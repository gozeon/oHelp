{"version":3,"sources":["webpack:///./node_modules/lodash/_getRawTag.js","webpack:///./node_modules/tinymce/plugins/template/index.js","webpack:///./node_modules/lodash/_baseKeys.js","webpack:///./node_modules/lodash/cloneDeep.js","webpack:///./node_modules/lodash/stubFalse.js","webpack:///./node_modules/tinymce/plugins/table/index.js","webpack:///./node_modules/tinymce/plugins/codesample/index.js","webpack:///./node_modules/tinymce/plugins/pagebreak/plugin.js","webpack:///./node_modules/lodash/_arrayPush.js","webpack:///./node_modules/tinymce/plugins/advlist/index.js","webpack:///./node_modules/tinymce/plugins/textcolor/plugin.js","webpack:///./node_modules/tinymce/plugins/preview/index.js","webpack:///./node_modules/tinymce/plugins/help/index.js","webpack:///./node_modules/lodash/_getNative.js","webpack:///./node_modules/lodash/isBuffer.js","webpack:///./node_modules/tinymce/plugins/visualblocks/index.js","webpack:///./node_modules/lodash/_baseAssignIn.js","webpack:///./node_modules/tinymce/plugins/template/plugin.js","webpack:///./node_modules/lodash/_copySymbolsIn.js","webpack:///./node_modules/lodash/_isKeyable.js","webpack:///./node_modules/lodash/isObjectLike.js","webpack:///./node_modules/lodash/_isMasked.js","webpack:///./node_modules/tinymce/plugins/anchor/plugin.js","webpack:///./node_modules/tinymce/plugins/charmap/plugin.js","webpack:///./node_modules/lodash/_baseIsMap.js","webpack:///./node_modules/lodash/isObject.js","webpack:///./node_modules/lodash/_getAllKeysIn.js","webpack:///./node_modules/lodash/_Promise.js","webpack:///./node_modules/lodash/_hashDelete.js","webpack:///./node_modules/lodash/_mapCacheSet.js","webpack:///./node_modules/tinymce/plugins/lists/plugin.js","webpack:///./node_modules/lodash/_Uint8Array.js","webpack:///./node_modules/lodash/_mapCacheGet.js","webpack:///./node_modules/tinymce/plugins/autolink/plugin.js","webpack:///./node_modules/tinymce/plugins/searchreplace/plugin.js","webpack:///./node_modules/lodash/_hashSet.js","webpack:///./node_modules/lodash/_baseIsArguments.js","webpack:///./node_modules/lodash/_listCacheClear.js","webpack:///./node_modules/lodash/_objectToString.js","webpack:///./node_modules/tinymce/plugins/hr/index.js","webpack:///./node_modules/lodash/_root.js","webpack:///./node_modules/tinymce/plugins/colorpicker/index.js","webpack:///./node_modules/lodash/_arrayFilter.js","webpack:///./node_modules/lodash/_getPrototype.js","webpack:///./node_modules/lodash/_stackDelete.js","webpack:///./node_modules/tinymce/plugins/autolink/index.js","webpack:///./node_modules/tinymce/plugins/colorpicker/plugin.js","webpack:///./node_modules/lodash/isArrayLike.js","webpack:///./node_modules/tinymce/plugins/fullscreen/index.js","webpack:///./node_modules/lodash/_assignValue.js","webpack:///./node_modules/lodash/_getSymbols.js","webpack:///./node_modules/lodash/_baseIsNative.js","webpack:///./node_modules/tinymce/plugins/textcolor/index.js","webpack:///./node_modules/tinymce/plugins/visualchars/index.js","webpack:///./node_modules/lodash/_getValue.js","webpack:///./node_modules/tinymce/plugins/media/plugin.js","webpack:///./node_modules/lodash/_baseGetTag.js","webpack:///./node_modules/tinymce/plugins/importcss/plugin.js","webpack:///./node_modules/lodash/_baseClone.js","webpack:///./node_modules/lodash/_WeakMap.js","webpack:///./node_modules/tinymce/plugins/textpattern/plugin.js","webpack:///./node_modules/tinymce/plugins/media/index.js","webpack:///./node_modules/tinymce/plugins/help/plugin.js","webpack:///./node_modules/lodash/_defineProperty.js","webpack:///./node_modules/core-js/internals/this-number-value.js","webpack:///./node_modules/lodash/_baseKeysIn.js","webpack:///./node_modules/tinymce/plugins/link/index.js","webpack:///./node_modules/lodash/_getMapData.js","webpack:///./node_modules/lodash/_getTag.js","webpack:///./node_modules/lodash/_copyArray.js","webpack:///./node_modules/tinymce/plugins/noneditable/plugin.js","webpack:///./node_modules/lodash/_hashClear.js","webpack:///./node_modules/tinymce/plugins/insertdatetime/index.js","webpack:///./node_modules/tinymce/plugins/visualblocks/plugin.js","webpack:///./src/components/my-tinymce.vue?6174","webpack:///./node_modules/vue-tinymce-editor/src/components/TinymceVue.vue?5083","webpack:///node_modules/vue-tinymce-editor/src/components/TinymceVue.vue","webpack:///./node_modules/vue-tinymce-editor/src/components/TinymceVue.vue?7abb","webpack:///./node_modules/vue-tinymce-editor/src/components/TinymceVue.vue","webpack:///./node_modules/vue-tinymce-editor/src/index.js","webpack:///src/components/my-tinymce.vue","webpack:///./src/components/my-tinymce.vue?7fde","webpack:///./src/components/my-tinymce.vue","webpack:///./node_modules/tinymce/plugins/legacyoutput/index.js","webpack:///./node_modules/tinymce/plugins/image/index.js","webpack:///./node_modules/lodash/_baseTimes.js","webpack:///./node_modules/lodash/_copySymbols.js","webpack:///./node_modules/tinymce/plugins/tabfocus/index.js","webpack:///./node_modules/lodash/_stackHas.js","webpack:///./node_modules/lodash/_nativeKeys.js","webpack:///./node_modules/lodash/_freeGlobal.js","webpack:///./node_modules/core-js/internals/whitespaces.js","webpack:///./node_modules/core-js/internals/string-trim.js","webpack:///./node_modules/lodash/_baseAssign.js","webpack:///./node_modules/lodash/_cloneDataView.js","webpack:///./node_modules/lodash/_ListCache.js","webpack:///./node_modules/tinymce/plugins/contextmenu/plugin.js","webpack:///./node_modules/lodash/_nativeCreate.js","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/tinymce/plugins/searchreplace/index.js","webpack:///./node_modules/tinymce/plugins/code/index.js","webpack:///./node_modules/lodash/isArray.js","webpack:///./node_modules/lodash/_listCacheSet.js","webpack:///./node_modules/tinymce/plugins/save/index.js","webpack:///./node_modules/tinymce/plugins/preview/plugin.js","webpack:///./node_modules/lodash/_listCacheDelete.js","webpack:///./node_modules/tinymce/plugins/emoticons/index.js","webpack:///./node_modules/tinymce/plugins/fullpage/plugin.js","webpack:///./node_modules/lodash/_cloneRegExp.js","webpack:///./node_modules/lodash/_arrayLikeKeys.js","webpack:///./node_modules/tinymce/plugins/legacyoutput/plugin.js","webpack:///./node_modules/tinymce/plugins/autoresize/index.js","webpack:///./node_modules/lodash/isTypedArray.js","webpack:///./node_modules/lodash/_baseIsTypedArray.js","webpack:///./node_modules/lodash/_baseCreate.js","webpack:///./node_modules/tinymce/plugins/save/plugin.js","webpack:///./node_modules/lodash/toString.js","webpack:///./node_modules/tinymce/plugins/textpattern/index.js","webpack:///./node_modules/tinymce/themes/modern/theme.js","webpack:///./node_modules/lodash/_arrayMap.js","webpack:///./node_modules/lodash/_Map.js","webpack:///./node_modules/lodash/_hashHas.js","webpack:///./node_modules/lodash/_MapCache.js","webpack:///./node_modules/tinymce/plugins/paste/plugin.js","webpack:///./node_modules/lodash/_mapCacheClear.js","webpack:///./node_modules/lodash/_baseGetAllKeys.js","webpack:///./node_modules/lodash/_Stack.js","webpack:///./node_modules/lodash/_stackGet.js","webpack:///./node_modules/lodash/_arrayEach.js","webpack:///./node_modules/tinymce/plugins/print/index.js","webpack:///./node_modules/tinymce/plugins/lists/index.js","webpack:///./node_modules/tinymce/plugins/directionality/index.js","webpack:///./node_modules/lodash/_baseAssignValue.js","webpack:///./node_modules/tinymce/plugins/imagetools/index.js","webpack:///./node_modules/tinymce/plugins/advlist/plugin.js","webpack:///./node_modules/tinymce/plugins/autosave/plugin.js","webpack:///./node_modules/lodash/_copyObject.js","webpack:///./node_modules/lodash/_overArg.js","webpack:///./node_modules/lodash/_mapCacheDelete.js","webpack:///./node_modules/tinymce/plugins/wordcount/index.js","webpack:///./node_modules/tinymce/plugins/table/plugin.js","webpack:///./node_modules/lodash/isFunction.js","webpack:///./node_modules/lodash/eq.js","webpack:///./node_modules/lodash/keysIn.js","webpack:///./node_modules/lodash/_nodeUtil.js","webpack:///./node_modules/tinymce/plugins/bbcode/plugin.js","webpack:///./node_modules/tinymce/plugins/imagetools/plugin.js","webpack:///./node_modules/lodash/_Symbol.js","webpack:///./node_modules/lodash/_getSymbolsIn.js","webpack:///./node_modules/lodash/_cloneSymbol.js","webpack:///./node_modules/tinymce/plugins/insertdatetime/plugin.js","webpack:///./node_modules/tinymce/plugins/bbcode/index.js","webpack:///./node_modules/lodash/_mapCacheHas.js","webpack:///./node_modules/tinymce/plugins/codesample/plugin.js","webpack:///./node_modules/lodash/_getAllKeys.js","webpack:///./node_modules/core-js/modules/es.number.constructor.js","webpack:///./node_modules/tinymce/plugins/autoresize/plugin.js","webpack:///./node_modules/lodash/_baseUnary.js","webpack:///./node_modules/lodash/isLength.js","webpack:///./node_modules/lodash/_listCacheGet.js","webpack:///./node_modules/lodash/_DataView.js","webpack:///./node_modules/lodash/_hashGet.js","webpack:///./node_modules/tinymce/plugins/paste/index.js","webpack:///./node_modules/tinymce/plugins/link/plugin.js","webpack:///./node_modules/lodash/_isIndex.js","webpack:///./node_modules/lodash/_initCloneByTag.js","webpack:///./node_modules/tinymce/plugins/nonbreaking/plugin.js","webpack:///./node_modules/tinymce/plugins/charmap/index.js","webpack:///./node_modules/lodash/_baseIsSet.js","webpack:///./node_modules/lodash/_Set.js","webpack:///./node_modules/lodash/_initCloneArray.js","webpack:///./node_modules/lodash/_cloneTypedArray.js","webpack:///./node_modules/lodash/_assocIndexOf.js","webpack:///./node_modules/lodash/isMap.js","webpack:///./node_modules/tinymce/plugins/image/plugin.js","webpack:///./node_modules/lodash/_baseToString.js","webpack:///./node_modules/tinymce/plugins/visualchars/plugin.js","webpack:///./node_modules/tinymce/plugins/noneditable/index.js","webpack:///./node_modules/lodash/_stackSet.js","webpack:///./node_modules/tinymce/plugins/emoticons/plugin.js","webpack:///./node_modules/tinymce/plugins/anchor/index.js","webpack:///./node_modules/lodash/stubArray.js","webpack:///./node_modules/lodash/isArguments.js","webpack:///./node_modules/tinymce/plugins/print/plugin.js","webpack:///./node_modules/lodash/isSet.js","webpack:///./node_modules/lodash/_coreJsData.js","webpack:///./node_modules/tinymce/plugins/hr/plugin.js","webpack:///./node_modules/lodash/_toSource.js","webpack:///./node_modules/tinymce/plugins/spellchecker/index.js","webpack:///./node_modules/lodash/_Hash.js","webpack:///./node_modules/tinymce/plugins/directionality/plugin.js","webpack:///./node_modules/tinymce/plugins/fullpage/index.js","webpack:///./node_modules/lodash/_cloneBuffer.js","webpack:///./node_modules/tinymce/tinymce.js","webpack:///./node_modules/tinymce/plugins/spellchecker/plugin.js","webpack:///./node_modules/tinymce/plugins/wordcount/plugin.js","webpack:///./node_modules/lodash/_isPrototype.js","webpack:///./node_modules/tinymce/plugins/pagebreak/index.js","webpack:///./node_modules/lodash/keys.js","webpack:///./node_modules/lodash/_nativeKeysIn.js","webpack:///./node_modules/tinymce/plugins/nonbreaking/index.js","webpack:///./node_modules/tinymce/plugins/code/plugin.js","webpack:///./node_modules/tinymce/plugins/toc/index.js","webpack:///./node_modules/lodash/_stackClear.js","webpack:///./node_modules/tinymce/plugins/fullscreen/plugin.js","webpack:///./node_modules/tinymce/plugins/contextmenu/index.js","webpack:///./node_modules/lodash/_cloneArrayBuffer.js","webpack:///./node_modules/tinymce/plugins/tabfocus/plugin.js","webpack:///./node_modules/lodash/_initCloneObject.js","webpack:///./node_modules/lodash/_listCacheHas.js","webpack:///./node_modules/tinymce/plugins/importcss/index.js","webpack:///./node_modules/tinymce/plugins/toc/plugin.js","webpack:///./node_modules/tinymce/plugins/autosave/index.js","webpack:///./node_modules/lodash/isSymbol.js"],"names":["Symbol","objectProto","Object","prototype","hasOwnProperty","nativeObjectToString","toString","symToStringTag","toStringTag","undefined","getRawTag","value","isOwn","call","tag","unmasked","e","result","module","exports","isPrototype","nativeKeys","baseKeys","object","key","push","baseClone","CLONE_DEEP_FLAG","CLONE_SYMBOLS_FLAG","cloneDeep","stubFalse","global","tinymce","util","Tools","resolve","global$1","getSeparatorHtml","editor","getParam","shouldSplitBlock","Settings","getPageBreakClass","getPlaceholderHtml","transparentSrc","setup","separatorHtml","pageBreakSeparatorRegExp","RegExp","replace","a","on","content","serializer","addNodeFilter","nodes","node","className","i","length","attr","indexOf","parentNode","parent","schema","getBlockElements","name","type","raw","remove","FilterContent","register","addCommand","settings","pagebreak_split_block","insertContent","Commands","setup$1","target","nodeName","dom","hasClass","ResolveName","register$1","addButton","title","cmd","addMenuItem","text","icon","context","Buttons","Plugin","add","arrayPush","array","values","index","offset","getCurrentColor","format","color","getParents","selection","getStart","elm","style","mapColors","colorMap","colors","applyFormat","undoManager","transact","focus","formatter","apply","nodeChanged","removeFormat","TextColor","global$2","defaultColorMap","getTextColorMap","getForeColorMap","getBackColorMap","getTextColorRows","getTextColorCols","getForeColorRows","getBackColorRows","getForeColorCols","getBackColorCols","getColorPickerCallback","hasColorPicker","global$3","getHtml","cols","rows","html","last","x","y","count","id","DOM","uniqueId","getColorCellHtml","isNoColor","translate","ColorPickerHtml","setDivColor","div","background","setAttribute","onButtonClick","ctrl","control","_color","execCommand","onPanelClick","buttonCtrl","this","currentColor","selectColor","hidePanel","resetColor","getParent","colorPickerCallback","customColorCells","tableElm","panel","getEl","getElementsByTagName","map","childNodes","firstChild","getAttribute","lastId","get","renderColorPicker","foreColor","tooltip","role","ariaRemember","onclick","baseIsNative","getValue","getNative","freeExports","nodeType","freeModule","moduleExports","Buffer","root","nativeIsBuffer","isBuffer","copyObject","keysIn","baseAssignIn","source","curry","fn","initialArgs","_i","arguments","restArgs","all","concat","getCreationDateClasses","getModificationDateClasses","getSelectedContentClasses","getPreviewReplaceValues","getTemplateReplaceValues","getTemplates","editorSettings","templates","getCdateFormat","getLang","getMdateFormat","getDialogWidth","getDialogHeight","Math","min","getViewPort","h","addZeros","len","getDateTime","fmt","date","daysShort","split","daysLong","monthsShort","monthsLong","Date","getFullYear","getYear","getMonth","getDate","getHours","getMinutes","getSeconds","getDay","DateTimeHelper","createTemplateList","callback","templateList","send","url","success","JSON","parse","replaceTemplateValues","templateValues","each","v","k","replaceVals","vl","select","n","c","test","insertTemplate","ui","el","sel","getContent","create","appendChild","cloneNode","innerHTML","addVisual","Templates","o","dateFormat","insertIframeHtml","win","contentCssLinks_1","contentCSS","documentBaseURI","toAbsolute","bodyClass","body_class","doc","find","contentWindow","document","open","write","close","templateHtml","template","selected","description","onSelectTemplate","windowManager","layout","direction","align","padding","spacing","items","flex","label","onselect","border","onsubmit","minWidth","minHeight","fire","message","notificationManager","Dialog","showDialog","getSymbolsIn","copySymbolsIn","isKeyable","isObjectLike","coreJsData","maskSrcKey","uid","exec","keys","IE_PROTO","isMasked","func","isValidId","getId","selectedNode","getNode","isAnchor","tagName","getAttrib","insert","removeAttribute","collapse","createHTML","Anchor","insertAnchor","newId","alert","currentId","body","size","data","preventDefault","isAnchorNode","setContentEditable","state","parser","stateSelector","fireInsertCustomChar","chr","Events","insertChar","evtChr","Actions","getCharMap","charmap","getCharMapAppend","charmap_append","isArray","getDefaultCharMap","charmapFilter","grep","item","getCharsFromSetting","settingValue","extendCharMap","userCharMap","userCharMapAppend","getCharMap$1","CharMap","Api","gridHtml","width","height","ceil","charCode","parseInt","chrText","String","fromCharCode","GridHtml","getParentTd","charMapPanel","charDiv","hasAttribute","charCodeString","isNaN","ctrlKey","onmouseover","td","buttons","getTag","mapTag","baseIsMap","isObject","baseGetAllKeys","getAllKeysIn","Promise","hashDelete","has","__data__","getMapData","mapCacheSet","set","domGlobals","global$4","global$5","global$6","isTextNode","isListNode","isOlUlNode","isListItemNode","isDlItemNode","isTableCellNode","isBr","isFirstChild","isLastChild","lastChild","isTextBlock","getTextBlockElements","isBlock","blockElements","isBogusBr","nextSibling","previousSibling","isEmpty","keepBookmarks","empty","isChildOfBody","isChildOf","getRoot","NodeType","getNormalizedPoint","container","normalizeRange","rng","outRng","cloneRange","rangeStart","startContainer","startOffset","setStart","rangeEnd","endContainer","endOffset","setEnd","Range","createBookmark","bookmark","setupEndPoint","start","offsetNode","hasChildNodes","insertBefore","insertAfter","collapsed","resolveBookmark","restoreEndPoint","nodeIndex","idx","createRng","Bookmark","noop","constant","not","f","args","never","always","none","NONE","eq","isNone","thunk","me","fold","s","is","isSome","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","or","orThunk","bind","exists","forall","filter","equals","equals_","toArray","freeze","some","constant_a","self","elementEq","b","from","Option","typeOf","t","Array","isPrototypeOf","constructor","isType","isString","isBoolean","isFunction","isNumber","nativeSlice","slice","nativePush","xs","r","pred","groupBy","wasType","group","foldl","acc","flatten","output","reverse","head","Global","window","Function","path","parts","scope","p","unsafe","actual","Global$1","htmlElement","HTMLElement","global$7","getParentList","selectionStart","getClosestListRootElm","isParentListSelected","parentList","selectedBlocks","findSubLists","querySelectorAll","getSelectedSubLists","getSelectedBlocks","findParentListItemsNodes","elms","listItemsElms","parentLi","unique","getSelectedListItems","block","getSelectedDlItems","parentTableCell","getBody","findLastParentListNode","parentLists","getSelectedLists","firstList","subsequentLists","getSelectedListRoots","selectedLists","getUniqueListRoots","lists","listRoots","list","isList","Selection","fromHtml","createElement","console","error","fromDom","fromTag","fromText","createTextNode","fromPoint","docElm","elementFromPoint","Element","lift2","oa","ob","fromElements","elements","fragment","createDocumentFragment","element","Immutable","fields","struct","each$1","obj","props","compareDocumentPosition","match","documentPositionPreceding","DOCUMENT_POSITION_PRECEDING","documentPositionContainedBy","DOCUMENT_POSITION_CONTAINED_BY","Node","cached","called","firstMatch","regexes","find$1","agent","major","minor","Number","nu","detect","versionRegexes","cleanedAgent","toLowerCase","unknown","Version","edge","chrome","ie","opera","firefox","safari","isBrowser","current","unknown$1","nu$1","version","info","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","windows","ios","android","linux","osx","solaris","freebsd","isOS","unknown$2","nu$2","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","OperatingSystem","DeviceType","os","browser","userAgent","isiPad","isiPhone","isAndroid3","isAndroid4","isTablet","isTouch","isPhone","iOSwebview","isWebView","detect$1","candidates","candidate","search","detectBrowser","browsers","detectOs","oses","UaString","contains","str","substr","normalVersionRegex","checkContains","uastring","PlatformInfo","detect$2","deviceType","PlatformDetection","detect$3","navigator","PlatformDetection$1","ELEMENT","ATTRIBUTE_NODE","CDATA_SECTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","ELEMENT_NODE","ELEMENT$1","TEXT_NODE","PROCESSING_INSTRUCTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","NOTATION_NODE","selector","elem","matches","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","e1","e2","regularContains","d1","d2","ieContains","contains$1","is$1","children","child","cs","before","marker","parent$1","append","before$1","append$1","removeChild","isType$1","isElement","rawSet","setAll","attrs","clone","attributes","isSupported","getPropertyValue","internalSet","property","setProperty","clone$1","original","isDeep","deep","shallowAs","mutate","children$1","joinSegment","joinSegments","segments","appendSegments","head$1","tail","createSegment","listType","segment","createSegments","entry","populateSegments","listAttributes","itemAttributes","normalizeSegment","createItem","appendItem","writeShallow","cast","newCast","depth","writeDeep","composeList","entries","isList$1","hasFirstChildList","hasLastChildList","isIndented","isSelected","cloneItemContent","li","createEntry","indentEntry","indentation","shallow","old","baseMerge","merger","objects","ret","j","curObject","merge","cloneListProperties","previousSiblingEntry","normalizeEntries","matchingEntry","Cell","initial","parseItem","itemSelection","selectionState","currentItemEntry","end","childListEntries","parseList","newDepth","parseLists","initialDepth","sourceList","global$8","createTextBlock","contentNode","textBlock","blockName","hasContentNode","createFragment","forced_root_block","setAttribs","forced_root_block_attrs","outdentedComposer","indentedComposer","contentDocument","composeEntries","groupIsIndented","indentSelectedEntries","getItemSelection","selectedListItems","listsIndentation","entrySets","entrySet","DOM$1","splitList","ul","tmpRng","bookmarks","newBlock","removeAndKeepBookmarks","targetNode","setStartAfter","setEndAfter","extractContents","SplitList","outdentDlItem","dl","indentDlItem","dlIndentation","dlItems","selectionIndentation","isHandled","getBookmark","moveToBookmark","setRng","getRng","indentListSelection","outdentListSelection","flattenListSelection","updateListStyle","detail","setStyle","updateListAttrs","updateListWithDetails","removeStyles","styles","_a","getEndPointNode","getSelectedTextBlocks","textBlocks","startNode","endNode","siblings","isBookmarkNode","hasCompatibleStyle","sib","sibStyle","getStyle","detailStyle","applyList","listName","listItemName","getContentEditable","toUpperCase","listBlock","sibling","rename","mergeWithAdjacentLists","isValidLists","list1","list2","hasSameListStyle","targetStyle","hasSameClasses","elm1","elm2","shouldMerge","updateList","newList","toggleMultipleLists","hasListStyleDetail","toggleSingleList","toggleList","selectedSubLists","ToggleList","DOM$2","normalizeList","normalizeLists","NormalizeLists","findNextCaretContainer","isForward","nonEmptyBlocks","walker","getNonEmptyElements","next","hasOnlyOneBlockChild","unwrapSingleBlockChild","moveChildren","fromElm","toElm","targetElm","mergeLiElements","listNode","$","nestedLists","mergeIntoEmptyLi","fromLi","toLi","setCursorLocation","mergeForward","mergeBackward","resolvedBookmark","backspaceDeleteFromListToListCaret","otherLi","selectionStartElm","removeBlock","parentBlock","backspaceDeleteIntoListCaret","otherLi_1","backspaceDeleteCaret","backspaceDeleteRange","startListParent","backspaceDelete","isCollapsed","keyCode","BACKSPACE","DELETE","Delete","queryListCommandState","command","addQueryStateHandler","shouldIndentOnTab","setupTabKey","TAB","metaKeyPressed","shiftKey","Keyboard","findIndex","predicate","listState","tableCellIndex","parents","active","hasPlugin","plugin","plugins","inArray","onPostRender","Uint8Array","mapCacheGet","getAutoLinkPattern","getDefaultLinkTarget","rangeEqualsDelimiterOrSpace","rangeString","delimiter","charCodeAt","handleEclipse","parseCurrentLine","handleSpacebar","handleEnter","scopeIndex","setStartBefore","prev","rngText","autoLinkPattern","defaultLinkTarget","nodeValue","charAt","trim","setAttrib","autoUrlDetectState","ex","Keys","isContentEditableFalse","contentEditable","findAndReplaceDOMText","regex","replacementNode","captureGroup","m","blockElementsMap","hiddenTextElementsMap","shortEndedElementsMap","getMatchIndexes","cg","getText","txt","stepThroughMatches","replaceFn","startNodeIndex","endNodeIndex","innerNodes","atIndex","curNode","matchLocation","shift","matchIndex","out","genReplacer","makeReplacementNode","stencilNode_1","fill","range","after","node_1","substring","elA","l","innerNode","innerEl","replaceChild","elB","ownerDocument","getWhiteSpaceElements","getShortEndedElements","FindReplaceText","getElmIndex","markAllMatches","currentIndexState","done","unwrap","findSpansByIndex","spans","moveSelection","forward","testIndex","removeClass","addClass","scrollIntoView","removeNode","matchCase","wholeWord","isMatchSpan","currentMatchIndex","hasMore","nextIndex","hasNext","hasPrev","keepEditorSelection","selectedText","updateButtonStates","statusbar","disabled","notFoundAlert","pack","onClose","onSubmit","caseState","checked","subtype","submit","labelGap","shortcut","separator","shortcuts","nativeCreate","HASH_UNDEFINED","hashSet","baseGetTag","argsTag","baseIsArguments","listCacheClear","objectToString","freeGlobal","freeSelf","arrayFilter","resIndex","overArg","getPrototype","getPrototypeOf","stackDelete","showPreview","hexColor","setColor","rgb","toRgb","fromJSON","g","hex","toHex","onchange","defaults","spellcheck","colorPickerCtrl","autofocus","toJSON","color_picker_callback","isLength","isArrayLike","baseAssignValue","assignValue","objValue","stubArray","propertyIsEnumerable","nativeGetSymbols","getOwnPropertySymbols","getSymbols","symbol","toSource","reRegExpChar","reIsHostCtor","funcProto","funcToString","reIsNative","pattern","getScripts","getAudioTemplateCallback","getVideoTemplateCallback","hasLiveEmbeds","shouldFilterHtml","getUrlResolver","hasAltSource","hasPoster","hasDimensions","getVideoScriptMatch","prefixes","src","VideoScript","trimPx","getEphoxEmbedData","parseStyle","source1","source2","poster","htmlToData","isEphoxEmbed","validate","allow_conditional_comments","special","movie","extend","videoScript","HtmlToData","guess","mimes","mp3","wav","mp4","webm","ogg","swf","fileEnd","pop","mime","Mime","addPx","setAttributes","updatedAttrs","splice","updateEphoxEmbed","styleMap","serializeStyle","updateHtml","updateAll","hasImage","writer","sourceCount","comment","cdata","imgAttrs","UpdateHtml","urlPatterns","w","allowFullscreen","getUrl","newUrl","_loop_1","matchPattern","getIframeHtml","getFlashHtml","getAudioHtml","audioTemplateCallback","source2mime","getVideoHtml","videoTemplateCallback","source1mime","getScriptHtml","dataToHtml","dataIn","embed","convertURL","encode","DataToHtml","cache","embedPromise","handler","res","rej","wrappedResolve","response","defaultPromise","loadedData","getEmbedHtml","embedHandler","isCached","Service","trimPx$1","addPx$1","getSize","setSize","Size","getMaxWidth","getMaxHeight","setMaxWidth","setMaxHeight","doSyncSize","widthCtrl","heightCtrl","doSizeControls","constrained","doUpdateSize","isContrained","oldWidth","oldHeight","newWidth","newHeight","round","syncSize","updateSize","createUi","onChange","recalcSize","maxLength","ariaLabel","SizeManager","embedChange","handleError","errorMessage","getData","dataEmbed","serialize","getSource","addEmbedHtml","selectPlaceholder","beforeObjects","afterObjects","handleInsert","submitForm","then","catch","populateMeta","meta","generalFormItems","filetype","onpaste","setTimeout","onbeforecall","advancedFormItems","reserialise","update","embedTextBox","multiline","updateValueOnChange","forId","bodyType","get$1","sanitize","blocked","attrName","Sanitize","createPlaceholderNode","placeHolder","shortEnded","retainAttributesAndInnerHtml","createPreviewIframeNode","previewWrapper","previewNode","shimNode","allowfullscreen","class","frameborder","sourceNode","attrValue","attribs","ai","innerHtml","escape","isWithinEphoxEmbed","placeHolderConverter","ceFalse","Nodes","specialElements","getSpecialElements","boolAttrs","getBoolAttrs","addAttributeFilter","realElm","realElmName","unescape","$elm","setup$2","objectType","prependToContext","nullTag","undefinedTag","shouldMergeClasses","shouldImportExclusive","getSelectorConverter","getSelectorFilter","getCssGroups","shouldAppend","getFileFilter","removeCacheSuffix","cacheSuffix","isSkinContentCss","href","skin","skinUrl","skin_url","baseURL","inline","compileFilter","getSelectors","fileFilter","selectors","contentCSSUrls","styleSheet","imported","rules","imports","cssRules","cssRule","selectorText","styleSheets","defaultConvertSelectorToFormat","elementName","classes","join","inlineSelectorElements","makeMap","getGroupsBySelector","groups","compileUserDefinedGroups","menu","isExclusiveMode","isUniqueSelector","globallyUniqueSelectors","markUniqueSelector","convertSelectorToFormat","selectorConverter","selector_converter","selectorFilter","processSelector","importcss","formatName","itemDefaults","getDoc","selectorGroups","menuItem","renderNew","ImportCss","Stack","arrayEach","baseAssign","cloneBuffer","copyArray","copySymbols","getAllKeys","initCloneArray","initCloneByTag","initCloneObject","isMap","isSet","CLONE_FLAT_FLAG","arrayTag","boolTag","dateTag","errorTag","funcTag","genTag","numberTag","objectTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","cloneableTags","bitmask","customizer","stack","isFlat","isFull","isArr","isFunc","stacked","forEach","subValue","keysFunc","WeakMap","__spreadArrays","il","jl","sort","comparator","copy","isInlinePattern","isBlockPattern","isReplacementPattern","sortPatterns","patterns","createPatternSet","inlinePatterns","blockPatterns","replacementPatterns","patternsState","setPatterns","newPatterns","getPatterns","defaultPatterns","getPatternSet","findPattern","lastIndexOf","isMatchingPattern","delta","textEnd","hasContent","findEndPattern","findInlinePattern","space","endPattern","patternRng","createRange","startPattern","findReplacementPattern","startSearch","isText","setSelection","textNode","newRng","splitContainer","splitText","deleteData","splitAndApply","found","formatArray","validFormats","applyInlinePattern","foundPattern","applyInlinePatternSpace","wrappedTextNode","lastChar","lastCharNode","applyInlinePatternEnter","applyBlockPattern","firstTextNode","textBlockElm","max","selectionInsertText","string","insertData","newNode","insertNode","applyReplacement","replacement","extractChar","char","applyReplacementPattern","ch","applyReplacementPatternSpace","applyReplacementPatternEnter","patternSet","handleInlineKey","checkKeyEvent","codes","event","checkKeyCode","code","modifierPressed","checkCharCode","chars","KeyHandler","charCodes","keyCodes","setEditorTimeout","nativeIndexOf","rawIndexOf","ts","mac","access","action","KeyboardShortcuts","makeTab","makeAriaLabel","shortcutLisString","KeyboardShortcutsTab","supplant","isStringOrNumber","fullMatch","urls","PluginUrls","makeLink","maybeUrlize","getMetadata","getPluginKeys","keys$1","forced_plugins","pluginLister","pluginKeys","pluginLis","pluginsString","installedPlugins","availablePlugins","makeTab$1","PluginsTab","getVersion","makeRow","majorVersion","minorVersion","changeLogLink","ButtonsRow","pluginUrl","defineProperty","uncurryThis","valueOf","nativeKeysIn","baseKeysIn","isProto","DataView","Map","Set","promiseTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","ArrayBuffer","Ctor","ctorString","getNonEditableClass","getEditableClass","getNonEditableRegExps","nonEditableRegExps","checkClassName","replaceMatchWithSpan","cls","prevChar","findStartTagIndex","tagHtml","convertRegExpsToNonEditable","editClass","nonEditClass","contentEditableAttrName","hasEditClass","hasNonEditClass","hashClear","fireVisualBlocks","isEnabledByDefault","getContentCss","visualblocks_content_css","cssId","load","linkElements","matchingLinkElms","linkElm","rel","LoadCss","toggleVisualBlocks","enabledState","contentCss","toggleClass","VisualBlocks","Bindings","toggleActiveState","selectable","render","_vm","_h","$createElement","_c","_self","tinyOptions","handleChange","model","$$v","editorContent","expression","staticRenderFns","_v","_s","required","htmlClass","default","toolbar1","toolbar2","other_options","readonly","cTinyMce","checkerTimeout","isTyping","mounted","beforeDestroy","watch","methods","init","init_instance_callback","initEditor","concatAssciativeArrays","array1","array2","dest","submitNewContent","clearTimeout","component","components","branding","paste_data_images","language_url","media_live_embeds","images_upload_handler","params","post","headers","succFun","failFun","file_picker_types","file_picker_callback","input","alt","created","$emit","baseTimes","iteratee","stackHas","requireObjectCoercible","whitespaces","whitespace","ltrim","rtrim","createMethod","TYPE","$this","cloneArrayBuffer","cloneDataView","dataView","buffer","byteOffset","byteLength","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","clear","visibleState","isContextMenuVisible","shouldNeverUseNative","contextmenu_never_use_native","getContextMenu","getUiContainer","ui_container","transpose","pos","dx","dy","fromPageXY","pageX","pageY","fromClientXY","clientX","clientY","transposeUiContainer","containerPos","getPos","scrollLeft","scrollTop","transposeContentAreaContainer","iframePos","getContentAreaContainer","Coords","renderMenu","contextmenu","menuItems","uiContainer","renderTo","show","moveTo","ContextMenu","isNativeOverrideKeyEvent","Bind","webpackPolyfill","deprecate","paths","enumerable","assocIndexOf","getPreviewDialogWidth","getPreviewDialogHeight","getContentStyle","getPreviewHtml","previewHtml","headHtml","contentStyle","getURI","bodyId","body_id","preventClicksOnLinksScript","dirAttr","directionality","injectIframeContent","iframe","sandbox","encodeURIComponent","IframeContent","dialogHtml","dialogWidth","dialogHeight","iframeElm","arrayProto","lastIndex","shouldHideInSourceView","getDefaultXmlPi","getDefaultEncoding","getDefaultFontFamily","getDefaultFontSize","getDefaultTextColor","getDefaultTitle","getDefaultDocType","parseHeader","root_name","headerFragment","getAttr","fontface","fontsize","xml_pi","docencoding","getAll","doctype","httpEquiv","langcode","stylesheets","link","langdir","visited_color","link_color","active_color","headElement","setAttr","addHeadNode","currentStyleSheetsMap","stylesheet","dir","vLink","aLink","indent","apply_source_formatting","indent_before","indent_after","Parser","headState","protectHtml","protect","unprotectHtml","Protect","low","handleSetContent","footState","evt","startPos","endPos","source_view","getDefaultHeader","headElm","cssText","header","piEncoding","handleGetContent","foot","reFlags","cloneRegExp","regexp","isArguments","isIndex","isTypedArray","arrayLikeKeys","inherited","isArg","isBuff","skipIndexes","overrideFormats","alignElements","fontSizes","explode","font_size_style_values","alignleft","aligncenter","alignright","alignjustify","bold","fontWeight","italic","fontStyle","underline","textDecoration","exact","strikethrough","fontname","face","vars","forecolor","hilitecolor","backgroundColor","addValidElements","getElementRule","rule","attributesOrder","inline_styles","Formats","defaultFontsizeFormats","fontsizeFormats","fixedWidth","fontElm","createFormats","formats","defaultFontsFormats","fonts","font_formats","font","textStyle","baseIsTypedArray","baseUnary","nodeUtil","nodeIsTypedArray","typedArrayTags","objectCreate","baseCreate","proto","enableWhenDirty","hasOnSaveCallback","hasOnCancelCallback","displayErrorMessage","save","formObj","isDirty","execCallback","setDirty","cancel","startContent","setContent","stateToggle","addShortcut","baseToString","isBrandingEnabled","hasMenubar","getMenubar","hasStatusbar","getToolbarSize","isReadOnly","getFixedToolbarContainer","getInlineToolbarPositionHandler","getMenu","getRemovedMenuItems","getMinWidth","getMinHeight","isSkinDisabled","isInline","getResize","resize","getSkinUrl","skinName","getIndexedToolbars","defaultToolbar","toolbars","toolbar","mainToolbar","getToolbars","fireSkinLoaded","fireResizeEditor","fireBeforeRenderUI","addKeys","A11y","getUiContainerDelta","setUiContainer","inheritUiContainer","fromCtrl","toCtrl","UiContainer","createToolbar","buttonGroup","toolbarItems","itemName","bindSelectorChanged","selectorChanged","disabledStateSelector","initialized","createToolbars","addToolbar","ariaRoot","Toolbar","toClientRect","geomRect","left","top","right","bottom","hideAllFloatingPanels","contextToolbars","hide","movePanelTo","togglePositionClass","relPos","toggle","userConstrain","elementRect","contentAreaRect","panelRect","addContextualToolbars","scrollContainer","getContextToolbars","getElementRect","targetRect","getRect","documentElement","reposition","shouldShow","relRect","testPositions","smallElementWidthThreshold","removed","clientRect","getBoundingClientRect","offsetWidth","controlSelection","isResizable","inflate","findBestRelativePosition","clamp","relativePosition","intersect","pos1","pos2","repositionHandler","execute","findFrontMostMatch","requestAnimationFrame","bindScrollEvent","reposition_1","uiContainer_1","getScrollContainer","getWin","unbind","showContextToolbar","autohide","autofix","fixed","oncancel","reflow","hideAllContextToolbars","parentsAndSelf","ContextToolbars","defaultMenus","file","edit","view","tools","table","help","delimiterMenuNamePair","createMenuNameItemPair","hasItemName","namedMenuItems","namedMenuItem","isSeparator","cleanupMenu","removedMenuItems","menuItemsPass1","menuItemsPass2","createMenu","editorMenuItems","menus","menuButton","isUserDefined","unshift","getDefaultMenubar","defaultMenuBar","createMenuButtons","menuButtons","menubar","enabledMenuNames","Menubar","clientWidth","clientHeight","resizeTo","containerElm","containerSize","iframeSize","getContainer","resizeBy","dw","dh","Resize","api","trigger","sidebar","callbackName","hidePanels","sidebars","visible","deactivateButtons","findSidebar","showPanel","btnCtrl","prepend","isModernBrowser","hasSidebar","createSidebar","image","Sidebar","fireSkinLoaded$1","_skinLoaded","SkinLoaded","switchMode","mode","editArea","editAreaContainer","theme","resizeHandleCtrl","startSize","skinUiCss","styleSheetLoader","onResizeStart","onResize","deltaX","deltaY","linkHtml","brandingLabel","renderBefore","setMode","iframeContainer","editorContainer","Iframe","global$9","funcs","getWindowSize","rect","offsetHeight","getElementById","css","getRuntimeStyle","off","setHTML","isStatic","isFixed","calculateRelativePosition","ctrlElm","selfW","selfH","targetW","targetH","viewport","getWindowViewPort","getUiContainerViewPort","customUiContainer","scrollWidth","scrollHeight","pageXOffset","pageYOffset","innerWidth","innerHeight","getViewPortRect","Movable","testMoveRel","rels","viewPortRect","moveRel","moveBy","layoutRect","constrain","constrainToViewport","repaint","global$a","global$b","BoxUtils","parseBox","radix","measureBox","prefix","defaultView","computedStyle","getComputedStyle","currentStyle","getSide","val","parseFloat","noop$1","ClassList","_map","uniqueItems","__checked","_change","curState","clsValue","Collection","Collection$1","chunker","whiteSpace","Selector","compileNameFilter","compileIdFilter","_name","compileClassesFilter","compileAttrFilter","cmp","check","compilePsuedoFilter","notSelectors","parseChunks","compile","filters","direct","pseudo","extra","_selectors","si","sl","fi","fl","collect","prop","Collection$2","Binding","otherModel","otherName","bindings","fromSelfToOther","fromOtherToSelf","_bindings","global$c","isNode","isEqual","animationFrameRequested","Control","ObservableObject","Mixins","oldValue","destroy","dirtyCtrls","ReflowQueue","_layout","isNative","_id","hasMouseWheelEventSupport","hasWheelEventSupport","classPrefix","idCounter","proto$1","Statics","isRtl","rtl","defaultClasses","applyClasses","Defaults","_aria","_elmCache","borderBox","paddingBox","marginBox","margin","hidden","Properties","getContainerElm","getParentCtrl","lookup","controlIdLookup","initLayoutRect","autoResize","startMinWidth","startMinHeight","initialSize","deltaW","deltaH","maxW","maxWidth","maxH","maxHeight","_layoutRect","contentW","contentH","innerW","innerH","minW","minH","scrollW","_lastLayoutRect","newRect","lastLayoutRect","deltaWidth","deltaHeight","repaintControls","curRect","bodyStyle","bodyElm","borderW","borderH","lastRepaintRect","_lastRepaintRect","_hasBody","updateLayoutRect","_lastRect","resolveCallbackName","callbacks","getEventDispatcher","bubble","isPropagationStopped","hasEventListeners","parentControls","$el","suffix","blur","aria","ariaTarget","newItems","controls","_eventsRoot","renderHtml","postRender","preRender","box","parentEventsRoot","_nativeEvents","bindPendingEvents","display","bindStates","parentCtrl","getOffset","rootElm","offsetLeft","offsetTop","offsetParent","parentWidth","parentHeight","parentElm","rootControl","_eventDispatcher","toggleEvent","eventCtrl","eventRootCtrl","nativeEvents","delegate","mouseLeaveHandler","_lastHoverCtrl","mouseEnterHandler","lastParents","lastCtrl","fixWheelEvent","wheelDelta","wheelDeltaX","eventRootDelegates","_delegates","_hasMouseEnter","Control$1","hasTabstopData","KeyboardNavigation","focusedElement","focusedControl","activeElement","getRole","getParentRole","getAriaProp","isTextInputElement","canFocus","getFocusElements","getNavigationRoot","targetControl","navigationRoot","focusFirst","focusElements","moveFocusToIndex","lastAriaIndex","moveFocus","parentRole","submenu","enter","up","down","tab","handleNonTabOrEscEvent","isDefaultPrevented","selectorCache","Container","_super","_items","bodyClasses","containerCls","keyboard","focusCtrl","keyboardNav","oldItem","newItem","ctrlItems","defaultType","curItems","beforeItems","afterItems","recalc","lastRect","getDocumentSize","updateWithTouchData","changedTouches","DragHelper","$eventOverlay","downButton","stop","drag","startX","startY","handleElement","handle","handleElm","cursor","docSize","button","screenX","screenY","runtimeStyle","position","zIndex","opacity","appendTo","documentClickHandler","documentScrollHandler","windowResizeHandler","hasModal","Scrollable","renderScroll","repaintScroll","hasScrollH","hasScrollV","repaintAxis","axisName","posName","sizeName","contentSizeName","hasScroll","ax","scrollBarElm","scrollThumbElm","scrollSize","ratio","posNameLower","sizeNameLower","addScroll","addScrollAxis","deltaPosName","scrollStart","axisId","draghelper","autoScroll","_hasScroll","bodyEl","Panel","_preBodyHtml","Resizable","resizeToContent","visiblePanels","zOrder","skipOrHidePanels","clickCtrl","bindDocumentClickHandler","bindDocumentScrollHandler","repositionPanel","bindWindowResizeHandler","docElm_1","clientWidth_1","clientHeight_1","FloatPanel","hideAll","scrollY","toggleFixedChildPanels","_autoFixY","addRemove","topModal","modal","modalBlockEl","currentZIndex","$modalBlockEl_1","prefix_1","popover","describedBy","removeVisiblePanel","bodyRole","isFixed$1","inlineToolbarContainer","render$1","fixedToolbarContainer","_fixed","bodyPos","scrollContainerPos","content_editable","Inline","Throbber","timer","time","throbber","ProgressState","renderUI","Render","Tooltip","Widget","tooltips","_tooltip","disable","Progress","setValue","updateLiveRegion","ctx","textContent","progressBar","Notification","timeout","closeButton","notificationStyle","NotificationManagerImpl","getEditorContainer","getElement","getContainerWidth","prePositionNotifications","notifications","notification","positionNotifications","firstItem","closeCallback","extendedArgs","notif","getArgs","oldMetaValue","toggleFullScreenState","contentValue","noScaleMetaValue","overrideViewPort","toggleBodyFullScreenClasses","checkFullscreenWindows","_fullscreen","handleWindowResize","desktop","lastSize_1","setInterval","Window","closeClass","needsRecalc","headerW","headEl","headerH","headerHtml","footerHtml","fullscreen","slowRendering","_timer","getTime","_initial","dragHelper","getContentWindow","ifr","MessageBox","OK","OK_CANCEL","YES_NO","YES_NO_CANCEL","msgBox","createButton","status","primary","onClick","onCancel","confirm","WindowManagerImpl","commands","features","choiceCallback","getParams","setParams","getNotificationManagerImpl","getWindowManagerImpl","ThemeApi","Layout","firstControlClass","lastControlClass","containerClass","firstClass","lastClass","lastItem","controlClass","AbsoluteLayout","Button","btnStyle","btnElm","ariaPressed","textHtml","getSelection","textCls","setButtonText","$span","iconElm","BrowseButton","multiple","accept","files","stopPropagation","click","ButtonGroup","Checkbox","global$d","ComboBox","subinput","showMenu","newValue","statusLevel","statusMessage","lineHeight","openElm","innerPadding","inputElm","documentMode","openBtnHtml","extraAttrs","statusHtml","placeholder","showAutoComplete","term","previewUrl","hideMenu","statusIconElm","focusIdx","DOWN","UP","ColorBox","onaction","repaintColor","PanelButton","panelSettings","rtlRels","ltrRels","popoverAlign","isTop","DOM$3","ColorButton","onClickHandler","stopImmediatePropagation","global$e","ColorPicker","hsv","hueRootElm","huePointElm","svRootElm","svPointElm","updateColor","hueUpdate","hue","updateSaturationAndValue","updateHue","toHsv","_repaint","_svdraghelper","_hdraghelper","_rendered","hueHtml","stops","getOldIeFallbackHtml","gradientPrefix","stopsList","gradientCssText","DropZone","cfg","hidefocus","outerHTML","toggleDragClass","re","dataTransfer","Path","row","_getDataPathHtml","ElementPath","isHidden","elementpath","outParents","FormItem","Form","formItemDefaults","formItem","recalcLabels","maxLabelWidth","labels","labelGapCalc","labelCtrl","labelWidth","FieldSet","unique$1","generate","random","floor","DOCUMENT","windows$1","DOCUMENT$1","bypassSelector","childElementCount","base","one","querySelector","descendants","hasContentEditableState","isContentEditableTrue","level","attach","isChildOfContentEditableTrue","getElementText","innerText","getOrGenerateId","isValidAnchor","isEditable","isHeader","isValidHeader","getLevel","headerTarget","headerId","anchorTarget","anchorId","anchorText","getHeaderTargets","getAnchorTargets","getTargetElements","hasTitle","find$2","LinkTargets","getActiveEditor","activeEditor","history","HISTORY_LENGTH","clearHistory","toMenuItem","toMenuItems","targets","staticMenuItem","isUniqueUrl","foundTarget","getSetting","defaultValue","createMenuItems","fileType","fromHistoryMenuItems","historyItems","uniqueHistory","fromMenuItems","filteredTargets","anchorMenuItems","topAnchor","bottomAchor","bothEmpty","typeahead_urls","filterByQuery","addToHistory","lowerCaseTerm","getTitle","linkDetails","setupAutoCompleteHandler","autocomplete","linkTargets","statusToUiState","setupLinkValidatorHandler","validatorHandler","filepicker_validator_handler","validateUrl_1","uiState","FilePicker","actionCallback","fileBrowserCallback","fileBrowserCallbackTypes","file_browser_callback_types","file_browser_callback","FitLayout","contLayoutRect","FlexLayout","contPaddingBox","contSettings","totalFlex","availableSpace","ctrlLayoutRect","ctrlSettings","maxSize","maxAlignEndPos","minSizeName","maxSizeName","beforeName","innerSizeName","deltaSizeName","alignAxisName","alignInnerSizeName","alignSizeName","alignMinSizeName","alignBeforeName","alignAfterName","alignDeltaSizeName","alignContentSizeName","maxSizeItems","maxFlexSize","FlowLayout","endClass","descendant","toggleFormat","addFormatChangedListener","changed","formatChanged","postRenderFormatToggle","alignFormats","defaultAlign","alignMenuItems","onShowMenu","alignnone","Align","getFirstFont","fontFamily","findMatchingValue","createFontNameListBoxChangeHandler","queryCommandValue","getFontItems","registerButtons","FontSelect","number","precision","factor","pow","toPt","fontSize","findMatchingValue$1","pt","px","createFontSizeListBoxChangeHandler","getFontSizeItems","fontsize_formats","registerButtons$1","register$2","FontSizeSelect","hideMenuObjects","canApply","hideFormatMenuItems","createFormatMenu","newFormats","defaultStyleFormats","createStylesMenu","style_formats_merge","style_formats","preview","getCssText","queryCommandState","registerMenuItems","formatMenu","registerButtons$2","style_formats_autohide","register$3","defaultBlocks","createFormats$1","createListBoxChangeHandler","matchNode","lazyFormatSelectBoxItems","blocks","buildMenuItems","register$4","block_formats","FormatSelect","createCustomMenuItems","names","nameList","isSeparator$1","trimMenuItems","menuItems2","createContextMenuItems","outputMenuItems","createInsertMenu","insertButtonItems","insert_button_items","registerButtons$3","oncreatemenu","register$5","InsertButton","registerFormatButtons","subscript","superscript","registerCommandButtons","outdent","cut","paste","selectall","visualaid","newdocument","removeformat","registerCommandToggleButtons","blockquote","registerButtons$4","registerMenuItems$1","register$6","SimpleControls","toggleUndoRedoState","checkState","typeFn","registerMenuItems$2","registerButtons$5","register$7","UndoRedo","toggleVisualAidState","hasVisual","registerMenuItems$3","register$8","VisualAid","setupEnvironment","iOS","setupUiContainer","setupRtlMode","setupHideFloatPanels","FormatControls","GridLayout","posX","posY","spacingH","spacingV","alignH","alignV","maxX","maxY","ctrlMinWidth","ctrlMinHeight","availableWidth","availableHeight","reverseRows","colWidths","rowHeights","columns","sqrt","flexV","packV","flexWidths","Iframe$1","InfoBox","severity","Label","strong","startMinH","targetCtrl","forName","Toolbar$1","MenuBar","isChildOf$1","MenuButton","_renderOpen","animate","activeMenu","menuLayoutRect","selfBottom","hasVisibleSiblingMenu","overCtrl","Menu","itemsFactory","factory","hideThrobber","requestTime","_hasIcons","ListBox","lastItemCtrl","setSelected","menuValues","_values","lastControl","valueExists","activateMenuItemsByValue","hasMenus","getSelectedItem","selectedItem","toggleTextStyle","_textStyle","textElm","MenuItem","ariaHideMenu","_parentMenu","_lastRel","iconHtml","convertShortcut","escapeRegExp","markMatches","boldMatches","hover","Radio","ResizeHandle","resizeDragHelper","createOptions","options","strOptions","SelectBox","_options","minVal","maxVal","setAriaProp","updateSliderHandle","maxHandlePos","shortSizeName","stylePosName","styleValue","handleEl","orientation","_minValue","_maxValue","previewFilter","Slider","minValue","maxValue","_initValue","reset","screenCordName","toFraction","fromFraction","handleKeyboard","alter","handleDrag","startHandlePos","handlePos","_dragHelper","Spacer","SplitButton","mainButtonElm","menuButtonElm","_menuBtnText","StackLayout","TabPanel","activateTab","activeTabElm","activeTabId","tabsHtml","activeTab","targetParent","headH","TextBox","getApi","Factory","ref","registerToFactory","Theme","arrayMap","hashHas","mapCacheClear","mapCacheDelete","mapCacheHas","MapCache","hasProPlugin","log","DetectProPlugin","clipboard","quirks","firePastePreProcess","internal","isWordHtml","wordContent","firePastePostProcess","firePastePlainTextToggle","firePaste","ieFake","shouldPlainTextInform","shouldBlockDrop","shouldPasteDataImages","shouldFilterDrop","getPreProcess","getPostProcess","getWebkitStyles","shouldRemoveWebKitStyles","shouldMergeFormats","isSmartPasteEnabled","isPasteAsTextEnabled","getRetainStyleProps","getWordValidElements","defaultValidElements","shouldConvertWordFakeLists","shouldUseDefaultFilters","shouldInformUserAboutPlainText","userIsInformedState","displayNotification","togglePlainTextPaste","pasteFormat","pasteHtml","pasteText","internalMimeType","internalMark","mark","unmark","isMarked","InternalHtml","internalHtmlMime","isPlainText","toBRs","openContainer","rootTag","rootAttrs","encodeAllRaw","toBlockElements","tagOpen","tagClose","paragraphs","stitch","convert","Newlines","domParser","shortEndedElements","ignoreElements","walk","currentNode","trimHtml","trimSpaces","s1","s2","createIdGenerator","isMsEdge","Utils","isWordContent","isNumericList","isBulletList","convertFakeListsToProperLists","currentListNode","prevListNode","lastLevel","trimListStart","regExp","removeIgnoredNodes","_listIgnore","convertParagraphToLi","paragraphNode","_listLevel","wrap","nodeText","filterStyles","validStyles","outputStyles","filterWordContent","retainStyleProperties","spaces","validElements","valid_elements","valid_children","rootNode","preProcess","WordFilter","preProcess$1","isRootContent","processResult","cancelled","postProcessFilter","tempBody","postProcessArgs","filterContent","preProcessArgs","filteredContent","process","ProcessFilters","isAbsoluteUrl","isImageUrl","createImage","pasteHtmlFn","createLink","linkSelection","insertImage","smartInsertContent","SmartPaste","filter$1","from$1","exports$1","define","require","amd","EphoxContactWrapper","u","1","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","Item","nextTick","env","argv","versions","addListener","once","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","2","setImmediate","setTimeoutFunc","thisArg","TypeError","_state","_handled","_value","_deferreds","doResolve","deferred","_immediateFn","cb","onFulfilled","onRejected","reject","promise","finale","_unhandledRejectionFn","Handler","reason","prom","arr","remaining","race","err","warn","_setImmediateFn","_setUnhandledRejectionFn","3","clearImmediate","immediateIds","nextImmediateId","Timeout","clearFn","_clearFn","clearInterval","unref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","4","promisePolyfill","boltExport","baseFn","nCallback","isReady","cbs","pure","LazyValue","errorReporter","make","fab","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","pure$1","Future","par","asyncValues","asyncValue","par$1","futures","traverse","mapM","subject","pasteHtml$1","internalFlag","getDataTransferItems","mceInternalUrlPrefix","legacyText","types","contentType","getClipboardContent","clipboardEvent","clipboardData","hasContentType","clipboardContent","mimeType","hasHtmlOrText","getBase64FromUri","uri","isValidDataUriImage","imgElm","images_dataimg_filter","extractFilename","pasteImage","imageItem","base64","images_reuse_filename","blob","img","Image","blobCache","editorUpload","blobInfo","existingBlobInfo","findFirst","cachedBlobInfo","blobUri","isClipboardEvent","readBlobsAsDataUris","getAsFile","reader","FileReader","onload","readAsDataURL","getImagesFromDataTransfer","images","pasteImageData","blobResults","isBrokenAndroidClipboardEvent","isKeyboardPasteEvent","registerEventHandlers","pasteBin","keyboardPastePlainTextState","keyboardPasteEvent","insertClipboardContent","isKeyBoardPaste","plainTextMode","isPlainTextHtml","isDefaultContent","removePasteBinOnKeyUp","webkit","getLastRng","registerEventsAndFilters","isPasteInsert","isWebKitFakeUrl","isDataUri","allow_html_data_urls","getPasteBinParent","isExternalPasteBin","delegatePasteEvents","pasteBinElm","pasteBinDefaultContent","isDefault","lastRngCell","gecko","pasteBinClone","lastRng","pasteBinClones","dirtyWrappers","cleanWrapper","copyAndRemove","isPasteBin","PasteBin","Clipboard","hasWorkingClipboardApi","setData","setHtml5Clipboard","clearData","setClipboardData","fallback","markedHtml","outer","inner","contenteditable","setStyles","overflow","offscreenRange","selectNodeContents","contextual","isTableSelection","hasSelectedContent","CutCopy","getCaretRangeFromEvent","getCaretRangeFromPoint","isPlainTextFileUrl","plainTextContent","setFocusedRange","draggingInternallyState","dropContent","content_1","DragDrop","postProcess","PrePostProcess","addPreProcessFilter","filterFunc","addPostProcessFilter","removeExplorerBrElementsAfterBlocks","explorerBlocksRegExp","removeWebKitStyles","webKitStyles","webKitStylesSetting","dom_1","inputStyles","decode","inputValue","currentValue","removeUnderlineAndFontInAnchor","Quirks","stateChange","Hash","symbolsFunc","stackClear","stackGet","stackSet","applyListFormat","getNumberStyles","getBulletStyles","getSelectedStyleType","listElm","ListUtils","styleValueToText","ListStyles","updateSelection","listStyleType","addSplitButton","onshow","addControl","fireRestoreDraft","fireStoreDraft","fireRemoveDraft","timeString","defaultTime","multiples","toParse","parsedTime","shouldAskBeforeUnload","getAutoSavePrefix","location","pathname","hash","shouldRestoreWhenEmpty","getAutoSaveInterval","autosave_interval","getAutoSaveRetention","autosave_retention","forcedRootBlockName","hasDraft","getItem","removeDraft","removeItem","storeDraft","setItem","no_events","restoreDraft","startStoreDraft","started","interval","restoreLastDraft","_beforeUnloadHandler","autosave","onbeforeunload","isNew","transform","arg","compose","fa","fb","identity","die","eachr","foldr","map$1","tupleMap","tuple","reqMessage","unsuppMessage","unsupported","validateStrArr","invalidTypeMessage","incorrect","checkDupes","everything","sorted","dupe","d","MixedBag","optional","allReqd","req","opt","COMMENT","TEXT","isComment","checkRange","endsWith","inBody","internalRemove","removeProperty","set$1","setAll$1","getUnsafeProperty","getRaw","remove$1","sourceDom","targetDom","contains$2","owner","isRoot","rawParent","prevSibling","firstChild$1","wrapper","after$1","rogue","remove$2","grid","address","detailnew","extended","rowdata","elementnew","rowdatanew","rowcells","rowdetails","bounds","ancestors","ancestors$1","children$2","descendants$1","ClosestOrAncestor","ancestor","closest","child$1","descend","child_1","ancestor$1","child$2","descendant$1","closest$1","firstLayer","filterFirstLayer","LayerSelector","tags","isRootOrUpperTable","cell","cells","notCell","neighbours","neighbourCells","neighbourRows","firstCell","grid$1","rowProp","colProp","rowsCount","TableLookup","fromTable","parentSection","parentName","rowspan","colspan","fromPastedRows","example","section","DetailsList","column","getAt","warehouse","findItem","filtered","filterItems","maxRows","maxColumns","details","currentRow","cr","cc","newpos","justCells","Warehouse","statsStruct","findSelectedStats","house","totalColumns","totalRows","minRow","minCol","maxRow","maxCol","startRow","endRow","startCol","endCol","makeCell","seenSelected","rowIndex","fillInGaps","stats","needCell","clean","emptyRows","extract","selectedSelector","unselectedCells","CopySelected","NodeValue","getOption","get$2","set$2","getEnd","NBSP","isTextNodeWithCursorPosition","elementsWithCursorPosition","isCursorPosition","hasCursorPosition","first","last$1","descendantRtl","copy$1","cloneChildren","createCell","replica","pasteReplace","newRow","cloneFormats","oldCell","newCell","first$1","firstText","formatSelector","clonedFormat","cellOperations","formatsToClone","docu","lastNode","gap","TableFill","fromHtml$1","inSelection","leftEdge","rightEdge","topEdge","bottomEdge","finishCol","finishRow","isWithin","isRectangular","isRect","detailIsWithin","CellBounds","getBounds","detailA","detailB","getAnyBox","startCell","finishCell","startCoords","finishCoords","sc","fc","getBox","CellGroup","intercepts","finish","inside","parentCell","innerCell","isContainedBy","c1","c2","CellFinder","moveBy$1","deltaRow","deltaColumn","getWarehouse","intercepts$1","nestedIntercepts","firstTable","lastTable","optStartCell","optLastCell","lastCell","getBox$1","TablePositions","TagBoundaries","DomUniverse","isBoundary","isEmptyTag","comparePosition","other","copyAttributesTo","destination","as","copyTo","afterAll","appendAll","query","setText","leftRight","brokenPath","bisect","universe","ind","breakToRight","second","breakToLeft","prior","breakPath","breaker","splits","breakage","nextChild","all$1","look","oneAll","unsafeOne","commonElement","eq$1","unsafeSubset","common","ps1","ps2","finder","ps","topDown","startIndex","endIndex","sIndex","eIndex","ancestors$2","prune","pruned1","pruned2","shared","firstpath","secondpath","subset","ancs","SubsetFn","sharedOne","subset$1","ancestors$3","breakToLeft$1","breakToRight$1","breakPath$1","Parent","sharedOne$1","_universe","subset$2","ancestors$4","breakToLeft$2","breakToRight$2","breakPath$2","DomParent","Identified","lookupTable","identify","getIsRoot","rootTable","boxes","startTable","finishTable","ancestorCells","lca","lcaTable","finishAncestorCells","startAncestorCells","retrieve","sels","getLast","lastSelectedSelector","getEdges","firstSelectedSelector","tbl","expandTo","identified","shiftSelection","CellSelection","retrieve$1","retrieveBox","edges","firstAncestor","lastAncestor","fA","lA","TableSelection","attributeSelector","firstSelected","lastSelected","Ephemera","generate$1","cases","constructors","adt","acase","argLength","branches","branchKeys","reqKey","Adt","type$1","single","cata","onNone","onMultiple","onSingle","SelectionTypes","selections","unmergable","hasSpan","mergable","_env","CellOperations","noMenu","forMenu","notCell$1","paste$1","pasteRows","generators","TableTargets","extractSelected","serializeElements","getTextContent","registerEvents","actions","cellSelection","multiCellContext","cellOpt","domCell","pasteCells","Dimension","getOuter","aggregate","properties","cumulativeInclusions","absoluteMax","api$1","get$3","api$2","get$4","getOuter$1","platform","needManualCalc","toNumber","num","getProp","getCalculatedHeight","paddingTop","paddingBottom","borderTop","borderBottom","boxSizing","borders","getWidth","getHeight","RuntimeSize","genericSizeRegex","percentageBasedSizeRegex","pixelBasedSizeRegex","setPixelWidth","amount","setPercentageWidth","setHeight","getHeightValue","getter","setter","newSize","total","normalizePixelSize","getTotalHeight","get$5","span","getSpan","getRawWidth","cssWidth","normalizePercentageWidth","cellWidth","tableSize","pixelWidth","choosePercentageSize","percentMatch","intWidth","getPercentageWidth","normalizePixelWidth","choosePixelSize","pixelMatch","floatWidth","getPixelWidth","getHeight$1","getGenericWidth","unit","setGenericWidth","Sizes","halve","main","CellMutations","Position","boxPosition","firstDefinedOrZero","absolute","clientTop","clientLeft","rowInfo","colInfo","rtlEdge","ltrEdge","getLeftEdge","getRightEdge","getTop","getTopEdge","getBottomEdge","findPositions","getInnerEdge","getOuterEdge","lines","cellOption","lastLine","negate","step","positions","optElements","ltr","BarPositions","ResizeDirection","TableDirection","directionAt","auto","getGridSize","TableGridSize","__assign","assign","cat","findMap","setIfNot","ignore","newRows","newCells","renderSection","gridSection","sectionName","tb","tr","removeSection","renderOrRemoveSection","headSection","bodySection","footSection","copy$2","clonedCell","Redraw","read","remove$3","supports","classList","get$6","add$1","clazz","remove$4","add$2","cleanClass","remove$5","has$1","repeat","repititions","deduce","rest","aa","extras","abs","rowsArr","col","getBlock","isSingle","getFallback","decide","inBlock","singleInBlock","detailOption","rows$1","Blocks","namespace","dashNamespace","Styles","blocker","row$1","Bar","resizeBar","resizeRowBar","resizeColBar","BAR_THICKNESS","wire","previous","drawBar","origin","cpOption","cp","bar","refreshCol","colPositions","tableHeight","colBar","refreshRow","rowPositions","tableWidth","rowBar","refreshGrid","hdirection","vdirection","refresh","each$2","bars","isRowBar","isColBar","Bars","addCell","gridRow","setCells","mutateCell","mapCells","getCell","getCellElement","cellLength","GridRow","getColumn","getRow","findDiff","comp","subgrid","restOfRow","endColIndex","restOfColumn","endRowIndex","TableGrid","toDetails","seen","ri","ci","updateSeen","toGrid","rowCells","Transitions","fromWarehouse","deriveRows","rendered","findRow","rowOfCells","toDetailList","findInWarehouse","operation","adjustment","postAction","genWrappers","newElements","onCell","onPaste","onPasteRows","lc","onMergable","_warehouse","onUnmergable","onCells","mapError","_","onValue","toOption","isValue","isError","onError","fromOption","Result","measure","startAddress","gridA","gridB","rowRemainder","colRemainder","colRequired","rowRequired","rowDelta","colDelta","measureWidth","colLengthA","colLengthB","generator","rowFill","_row","colFill","tailor","fillCols","fillRows","modifiedCols","tailoredGrid","Fitment","substitution","unmerge","isToReplace","uniqueCells","currentCell","splitRows","rowPrevCells","_loop_2","sub","MergingOperations","isSpanning","matching","mergeTables","mergeHeight","mergeWidth","merge$1","fittedGrid","fittedNewGrid","secondDelta","fittedOldGrid","TableMerge","insertRowAt","between","withinSpan","insertColumnAt","splitCellIntoColumns","exampleRow","exampleCol","isTargetCell","splitCellIntoRows","deleteColumnsAt","deleteRowsAt","ModificationOperations","replaceIn","isTarget","notStartRow","colIndex","notStartColumn","replaceColumn","alreadyAdded","replaceRow","targetRow","TransformOperations","only","middle","ColumnContext","neighbours$1","determine","zero","onOnly","singleColumnWidth","newNext","minCellWidth","newThis","diffx","onLeft","onMiddle","_prev","onRight","Deltas","getSpan$1","hasColspan","hasRowspan","getInt","CellUtils","getRaw$1","getRawW","getRawH","getWidthFrom","backups","columnCell","deduced","getDeduced","getRawWidths","getPercentageWidths","getPixelWidths","getHeightFrom","rowCell","getPixelHeights","getRawHeights","ColumnSizes","measures","recalculateWidth","widths","recalculateHeight","heights","matchRowHeight","Recalculations","percentageSize","getCellDelta","_delta","setTableWidth","_newWidths","change","getWidths","setElementWidth","pixelSize","newWidths","chooseSize","fallbackWidth","getTableSize","TableSize","getWarehouse$1","sumUp","getTableWarehouse","adjustWidth","deltas","newSizes","adjustHeight","newHeights","newCellSizes","newRowSizes","adjustWidthTo","Adjustments","handleUnsupported","baseWith","invalidKeys","handleExact","exactly","verifyGenerators","elementToData","modification","toData","nuFrom","recent","getOrInit","makeNew","replaceOrInit","merging","combine","Generators","blockList","isFormatting","isHeading","isContainer","isFrame","Structure","universe$1","isBlock$1","isFormatting$1","isHeading$1","isContainer$1","isEmptyTag$1","isFrame$1","isInline$1","DomStructure","merge$2","advancedBr","isListItem","siblingIsBlock","rightSibling","markCell","rightSiblingIsBlock","markContent","contents","TableContent","outcome","elementFromGrid","findIn","bundle","uniqueRows","currentDetail","uniqueColumns","insertRowBefore","targetIndex","newGrid","insertRowsBefore","newG","insertRowAfter","insertRowsAfter","insertColumnBefore","insertColumnsBefore","insertColumnAfter","insertColumnsAfter","makeRowHeader","makeColumnHeader","unmakeRowHeader","unmakeColumnHeader","splitCellIntoColumns$1","splitCellIntoRows$1","eraseColumns","_comparator","_genWrappers","eraseRows","mergeCells","unmergeCells","pasteDetails","gridify","wh","mergedGrid","nuGrid","gridifyRows","pasteRowsBefore","pasteRowsAfter","TableOperations","getBody$1","getPixelWidth$1","getPixelHeight","removePxSuffix","addSizeSuffix","removeDataStyle","dataStyleCells","getDirection","ltr$1","rtl$1","Direction","defaultTableToolbar","defaultStyles","defaultAttributes","getDefaultAttributes","getDefaultStyles","hasTableResizeBars","hasTabNavigation","hasAdvancedCellTab","hasAdvancedRowTab","hasAdvancedTableTab","hasAppearanceOptions","hasTableGrid","shouldStyleWithCss","getCellClassList","getRowClassList","getTableClassList","isPixelsForced","getCloneElements","cloneElements","hasObjectResizing","objectResizing","getToolbar","fireNewRow","fireNewCell","fireObjectResizeStart","fireObjectResized","TableActions","lazyWire","isTableBody","lastRowGuard","lastColumnGuard","guard","deleteRow","deleteColumn","copyRows","selectedCells","slicedGrid","slicedDetails","CopyRows","getTDTHOverallStyle","firstChildStyle","checkChildren","applyAlign","applyVAlign","unApplyAlign","unApplyVAlign","Styles$1","buildListItems","inputList","itemCallback","startItems","appendItems","styleFieldHasFocus","isEqualNode","syncAdvancedStyleFields","updateAdvancedFields","updateStyleField","borderStyle","borderColor","extractAdvancedStyles","createStyleForm","createColorPickAction","Helpers","updateStyles","dataset","mceStyle","extractDataFromElement","valign","onSubmitCellForm","cellElm","classListCtrl","generalCellForm","CellDialog","extractDataFromElement$1","switchRowType","rowElm","toType","oldParentElm","onSubmitRowForm","oldData","open$1","generalRowForm","RowDialog","DefaultRenderOptions","percentages","makeTable","tableBody","tableRow","tableHeaderCell","tableCell","rowHeaders","columnHeaders","renderOpts","tbody","trs","get$7","getOuter$2","placeCaretInCell","selectFirstCellInTable","fireEvents","isPercentage","insert$1","InsertTable","styleTDTH","extractDataFromElement$2","cellspacing","cellpadding","caption","applyDataToElement","onSubmitTableForm","captionElm","open$2","isProps","colsCtrl","rowsCtrl","generalTableForm","TableDialog","each$3","registerCommands","clipboardRows","eraseTable","getSelectionStartCell","getSelectionStartCaption","cellOrCaption","getSelectionStartFromSelector","getTableFromCell","resizeChange","oldSize","actOnSelection","beforeSize","copyRowSelection","pasteOnSelection","clonedRows","mceTableSplitCells","mceTableMergeCells","mceTableInsertRowBefore","mceTableInsertRowAfter","mceTableInsertColBefore","mceTableInsertColAfter","mceTableDeleteCol","mceTableDeleteRow","mceTableCutRow","mceTableCopyRow","mceTablePasteRowBefore","mceTablePasteRowAfter","mceTableDelete","mceInsertTable","mceTableProps","mceTableRowProps","mceTableCellProps","detached","editable","body$1","ResizeWire","Event","handlers","create$1","typeDefs","registry","mkEvent","prevent","kill","rawEvent","binder","useCapture","wrapped","addEventListener","bind$1","removeEventListener","bind$2","shallow$1","merge$3","styles$1","Styles$2","Blocker","layerClass","DragMode","DragSink","DragApi","compare","extract$1","mutation","sink","dragApi","mdown","forceDrop","mup","drop","mmove","move","mout","delayDrop","MouseDrag","last$2","rate","throttle","InDrag","onEvent","dataOption","events","NoDrag","Movement","noDragState","inDragState","dragState","isOn","movement","throttledDrop","go","mousemove","runIfActive","Dragging","transform$1","Dragger","Mutation","BarMutation","xDelta","yDelta","findClosestContentEditable","resizeBarDragging","BarManager","resizing","hoverTable","getResizer","_dataRow","_dataCol","currentCol","getDelta","newX","oldX","startAdjust","mousedown","findClosestEditableTable","mouseover","hideBars","showBars","create$2","manager","beforeResize","afterResize","startDrag","TableResize","createContainer","get$8","remove$6","TableWire","ResizeHandler","startW","startRawW","selectionRng","isTable","lazyResize","sz","rawWire","rawTable","percentW","targetPercentW","newCellSizes_1","newCellSize","adt$1","none$1","CellLocation","detect$4","detection","CellNavigation","create$3","SimRange","adt$2","cata$1","onBefore","onOn","onAfter","situ","before$2","after$2","Situ","adt$3","domRange","relative","exactFromRange","simRange","soffset","foffset","getStart$1","startSitu","finishSitu","range$1","selectNodeContentsUsing","setFinish","setEndBefore","relativeToNative","exactToNative","toRect","getFirstRect","rects","getClientRects","adt$4","fromRange","getRanges","doDiagnose","ranges","reversed","rev","diagnose","asLtrRange","diagnosis","searchForPoint","rectForOffset","curDeltaX","inRect","locateOffset","textnode","rangeForOffset","locate","selectNode","foundRect","searchInChildren","locateNode","locate$1","boundedX","boundedY","COLLAPSE_TO_LEFT","COLLAPSE_TO_RIGHT","getCollapseDirection","createCollapsedNode","collapseDirection","locateInElement","cursorRange","locateInEmpty","caretPositionFromPoint","caretRangeFromPoint","searchTextNodes","searchFromPoint","availableSearch","fromPoint$1","beforeSpecial","name$1","preprocessRelative","preprocessExact","preprocess","makeRange","after$3","same","doSetNativeRange","removeAllRanges","addRange","doSetRange","setLegacyRtlRange","setRangeFromRelative","setBaseAndExtent","setExact","setRelative","toNative","getDomRange","readRange","rangeCount","firstRng","getRangeAt","doGetExact","anchor","anchorNode","focusNode","anchorOffset","focusOffset","setToElement","getExact","get$9","getFirstRect$1","getAtPoint","backward","getCellFirstCursorPosition","getNewRowCursorPosition","rootElements","handle$1","body_1","isRoot_1","navigation","TabContext","create$4","Response","create$5","Situs","convertToRange","makeSitus","Util","sync","selectRange","detect$5","cellSel","annotations","newSels","KeySelection","backtrack","_direction","transition","sidestep","advance","successors","go$1","ruleOpt","succ","Walkers","hone","left$1","right$1","isLeaf","before$3","seekLeft","after$4","seekRight","universe$2","before$4","after$5","seekLeft$1","seekRight$1","ancestor$2","point","adt$5","failedUp","failedDown","isOverlapping","bridge","beforeBounds","afterBounds","isRow","verify","beforeOffset","afterOffset","failure","afterCell","beforeCell","_sharedRow","cata$2","onSuccess","onFailedUp","onFailedDown","BeforeAfter","inParent","indexInParent","gatherer","cand","gather","handleBr","findBr","handleParent","br","adjacent","tryBr","tgt","analysis","BrTags","nu$3","moveDown","caret","moveUp","moveBottomTo","moveTopTo","getTop$1","getBottom","Carets","getPartialBox","getRangedRect","toCaret","getElemBox","getBoxAt","getEntireBox","Rectangles","JUMP_SIZE","NUM_RETRIES","adt$6","retry","isOutside","inOutsideBlock","adjustDown","guessBox","lowerCaret","adjustUp","higherCaret","upMovement","adjuster","downMovement","isAtTable","adjustForTable","numRetries","adjustTil","situsFromPoint","newCaret","ieTryDown","ieTryUp","checkScroll","adjusted","getInnerHeight","moved","scrollBy","Retries","tryUp","tryDown","getJumpSize","MAX_RETRIES","platform$1","findSpot","brNeighbour","fromSitus","scan","tryCursor","situs","tryAgain","tryAt","otherRetry","ieRetry","handle$2","spot","TableKeys","inSameTable","simulate","navigate","precheck","firstUpCheck","lastOffset","lastDownCheck","VerticalMovement","findCell","MouseSelection","clearState","selectContents","mouseup","_event","KeyDirection","isKey","keycode","isUp","isDown","isNavigation","SelectionKeys","isBackward","toRaw","sr","Rect","get$a","_DOC","by","WindowBridge","exactAdt","clearSelection","setRelativeSelection","getScrollY","rc","mouse","clearToNavigate","keydown","realEvent","which","attempts","keyup","InputHandlers","remove$7","removeClasses","byClass","ephemera","addSelectionClass","removeSelectionClasses","byAttr","removeSelectionAttributes","addSelectionAttribute","SelectionAnnotation","hasInternalTarget","CellSelection$1","handlerStruct","syncSelection","mouseHandlers","keyHandlers","hasShiftKey","handleResponse","ns","wrappedEvent","wrapEvent","isMouseEvent","isLeftMouse","isLeftButtonPressed","mouseDown","mouseOver","mouseUp","Selections","each$4","addButtons","addToolbars","selectorMatched","addContextToolbar","addMenuItems","tableCtrls","cellCtrls","mergeCtrls","unmergeCtrls","noTargetDisable","ctrlEnable","pushTable","pushCell","pushMerge","pushUnmerge","setDisabledCtrls","mergeCtrl","unmergeCtrl","cellDom","generateTableGrid","selectGrid","tx","ty","focusCell","insertTable","onhide","lastX","lastY","onmousemove","tableProperties","deleteTable","MenuItems","getClipboardRows","setClipboardRows","sugarRows","resizeHandler","addTempAttr","Plugin$1","asyncTag","proxyTag","freeProcess","html2bbcode","rep","bbcode2html","Convert","canvas","tCanvas","get2dContext","drawImage","getContext","naturalWidth","naturalHeight","asap","immediateFn","values_1","imageToBlob","dataUriToBlob","anyUriToBlob","blobToImage","blobUrl","URL","createObjectURL","removeListeners","loaded","complete","xhr","XMLHttpRequest","responseType","onerror","_this","corsError","genericError","dataUriToBlobSync","mimetype","sliceSize","byteCharacters","atob","bytesLength","slicesCount","byteArrays","sliceIndex","begin","bytes","Blob","canvasToBlob","quality","HTMLCanvasElement","toBlob","toDataURL","canvasToDataURL","blobToCanvas","revokeImageUrl","blobToDataUri","onloadend","revokeObjectURL","blobToImage$1","imageToBlob$1","getCanvas","initialType","getType","toBase64","toAdjustedBlob","toAdjustedDataURL","toAdjustedBase64","dataurl","toCanvas","fromBlob","fromCanvas","parsedValue","DELTA_INDEX","multiply","matrix1","matrix2","adjust","matrix","adjustValue","adjustContrast","adjustSaturation","lumR","lumG","lumB","adjustHue","angle","PI","cosVal","cos","sinVal","sin","adjustBrightness","adjustColors","adjustR","adjustG","adjustB","adjustSepia","adjustGrayscale","colorFilter","ir","applyColorFilter","applyMatrix","pixelsData","m0","m1","m2","m3","m4","m5","m6","m7","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","pixels","getImageData","putImageData","convoluteFilter","applyConvoluteFilter","pIn","pOut","aMatrix","side","halfSide","rgba","drgba","cy","cx","scx","scy","innerOffset","wt","pixelsIn","pixelsOut","functionColorFilter","colorFn","filterImpl","applyLookup","lookupData","complexAdjustableColorFilter","matrixAdjustFn","basicColorFilter","basicConvolutionFilter","kernel","invert","brightness","saturate","contrast","grayscale","sepia","colorize","sharpen","emboss","gamma","exposure","exp","scale","dW","dH","sW","sH","wRatio","hRatio","scaleCapped","scaled","_scale","rotate","applyRotate","translateX","translateY","flip","axis","applyFlip","crop","applyCrop","resize$1","newCanvas","invert$1","sharpen$1","emboss$1","gamma$1","exposure$1","colorize$1","brightness$1","hue$1","saturate$1","contrast$1","grayscale$1","sepia$1","flip$1","crop$1","resize$2","rotate$1","blobToImageResult","getToolbarItems","getProxyUrl","getCorsHosts","getCredentialsHosts","getApiKey","getUploadTimeout","shouldReuseFilename","UndoStack","undo","canUndo","redo","canRedo","loadImage","LoadImage","CropRect","currentRect","clampRect","instance","handles","dragHelpers","blockers","getAbsoluteRect","outerRect","relativeRect","getRelativeRect","innerRect","getInnerRect","moveRect","startRect","setInnerRect","createDragHelper","activeHandle","moveAndBlock","LEFT","RIGHT","ENTER","SPACEBAR","toggleVisibility","updateElementRect","xMul","yMul","setRect","setViewPortRect","setClampRect","helper","ImagePanel","imageSize","viewRect","toggleCropRect","imageSrc","$img","replaceWith","bg","zoomFit","repaintImage","zoom","pw","ph","$bg","cropRect","setupCropRect","createState","destroyState","destroyStates","states","currentState","mainPanel","filtersPanel","tempState","cropPanel","resizePanel","flipRotatePanel","imagePanel","sidePanel","mainViewContainer","invertPanel","brightnessPanel","huePanel","saturatePanel","contrastPanel","grayscalePanel","sepiaPanel","colorizePanel","sharpenPanel","embossPanel","gammaPanel","exposurePanel","panels","ratioW","ratioH","undoStack","reverseIfRtl","floatToPercent","updateButtonUndoStates","disableUndoRedo","displayState","switchPanel","targetPanel","addTempState","addBlobState","imageResultToBlob","tempAction","waitForTempState","times","applyCall","applyTempState","zoomIn","zoomOut","createPanel","createFilterPanel","newTempState","createVariableFilterPanel","ondragend","createRgbFilterPanel","toggleConstrain","onkeyup","imageResult","getImageSize","isPxValue","setImageSize","getNaturalImageSize","ImageSize","json","reduce","requestUrlAsBlob","withCredentials","onreadystatechange","readyState","setRequestHeader","readBlob","fr","readAsText","parseJson","friendlyHttpErrors","friendlyServiceErrors","isServiceErrorCode","getHttpErrorMsg","handleHttpError","getServiceErrorMsg","getServiceError","serviceError","errorType","errorMsg","handleServiceError","handleServiceErrorResponse","Errors","appendApiKey","apiKey","requestServiceBlob","requestBlob","Proxy","count$1","isEditableImage","isLocalImage","isCorsImage","imagetools_proxy","displayError","getSelectedImage","createId","host","isCorsWithCredentialsImage","imageToBlob$2","findSelectedBlob","getByUri","startTimedUpload","imageUploadTimerState","imageUploadTimer","uploadImagesAuto","cancelTimedUpload","updateSelectedImage","uploadImmediately","selectedImage","imageLoadedHandler","removeAttr","selectedImageOperation","_scanForImages","rotate$2","flippedSize","flip$2","editImageDialog","originalSize","handleDialogBlob","newImage","openDialog","mceImageRotateLeft","mceImageRotateRight","mceImageFlipVertical","mceImageFlipHorizontal","mceEditImage","lastSelectedImageState","lastSelectedImage","UploadSelectedImage","ContextToolbar","symbolProto","symbolValueOf","cloneSymbol","getDateFormat","getTimeFormat","getFormats","getDefaultDateTime","shouldInsertTimeElement","updateElement","timeElm","computerTime","userTime","newTimeElm","datetime","insertDateTime","lastFormatState","lastFormat","codesample_content_css","getLanguages","codesample_languages","getDialogMinWidth","getDialogMinHeight","WorkerGlobalScope","Prism","lang","tokens","Token","alias","languages","redef","grammar","newToken","token","DFS","highlightAll","async","highlightElement","language","hooks","Worker","worker","filename","onmessage","highlightedCode","postMessage","stringify","immediateClose","highlight","tokenize","strarr","tokenloop","lookbehind","lookbehindLength","to","aliases","isCodeSample","trimArg","predicateFn","arg1","arg2","markup","prolog","punctuation","entity","xml","mathml","svg","atrule","important","function","clike","javascript","keyword","interpolation","script","js","operator","macro","boolean","csharp","preprocessor","cpp","java","php","variable","package","tokenStack","backupCode","python","ruby","builtin","getSelectedCodeSample","insertCodeSample","getCurrentCode","CodeSample","getLanguages$1","defaultLanguages","customLanguages","getCurrentLanguage","Languages","currentLanguage","currentLanguages","currentCode","unprocessedCodeSamples","loadCss","addedInlineCss","addedCss","ev","DESCRIPTORS","isForced","redefine","hasOwn","inheritIfRequired","isSymbol","toPrimitive","fails","getOwnPropertyNames","getOwnPropertyDescriptor","thisNumberValue","NUMBER","NativeNumber","NumberPrototype","arraySlice","toNumeric","primValue","argument","third","maxCode","digits","it","NaN","NumberWrapper","dummy","getAutoResizeMinHeight","getAutoResizeMaxHeight","getAutoResizeOverflowPadding","getAutoResizeBottomMargin","shouldAutoResizeOnInit","isFullscreen","wait","toggleScrolling","overflowY","deltaSize","resizeHeight","myHeight","marginTop","marginBottom","iframeElement","overflowPadding","bottomMargin","paddingLeft","paddingRight","MAX_SAFE_INTEGER","hashGet","assumeExternalTargets","link_assume_external_targets","hasContextToolbar","link_context_toolbar","getLinkList","link_list","hasDefaultLinkTarget","default_link_target","getTargetList","target_list","setTargetList","shouldShowTargetList","getRelList","rel_list","hasRelList","getLinkClassList","link_class_list","hasLinkClassList","shouldShowLinkTitle","link_title","allowUnsafeLinkTarget","allow_unsafe_link_target","appendClickRemove","dispatchEvent","createEvent","initMouseEvent","opener","OpenUrl","toggleTargetRules","isUnsafe","newRel","addTargetRules","removeTargetRules","trimCaretContainers","getAnchorElement","selectedElm","isImageFigure","getAnchorText","anchorElm","isLink","hasLinks","isOnlyTextSelected","attachState","linkAttrs","linkImageFigure","unlink","unlinkImageFigure","fig","createLinkList","linkList","delayedConfirm","initialText","onlyText","textListCtrl","linkListCtrl","relListCtrl","targetListCtrl","linkTitleCtrl","linkListChangeHandler","textCtrl","buildAnchorListControl","anchorList","updateText","urlChange","inp","onBeforeCall","insertLink","removeLink","resultData","getLink","getSelectedLink","getHref","hasOnlyAltModifier","altKey","metaKey","gotoLink","targetEl","gotoSelectedLink","leftClickedOnAHref","setupGotoLinks","toggleViewLinkState","setupButtons","onpostrender","setupMenuItems","setupContextToolbars","Controls","reIsUint","cloneTypedArray","stringRepeat","repeats","isVisualCharsEnabled","visualchars","isEnabled","insertNbsp","nbsp","getKeyboardSpaces","baseIsSet","typedArray","nodeIsMap","image_dimensions","hasAdvTab","image_advtab","getPrependUrl","getClassList","hasDescription","image_description","hasImageTitle","image_title","hasImageCaption","image_caption","getImageList","hasUploadUrl","hasUploadHandler","getUploadUrl","getUploadHandler","getUploadBasePath","getUploadCredentials","parseIntAndGetMax","val1","val2","visibility","removePixelSuffix","addPixelSuffix","mergeMargins","splitMargin","createImageList","imageList","waitLoadImage","selectImage","getHspace","marginLeft","marginRight","getVspace","getBorder","borderWidth","hasCaption","wrapInFigure","figureElm","removeFigure","toggleCaption","normalizeStyle","normalizeCss","setHspace","pxValue","setVspace","setBorder","setBorderStyle","getBorderStyle","isFigure","defaultData","hspace","vspace","getStyleValue","figure","updateProp","newData","normalized","mergedCss","compressed","splitTextBlock","readImageDataFromSelection","insertImageAtCaret","insertedElm","syncSrcAttr","deleteImage","writeImageDataToSelection","insertOrUpdateImage","updateVSpaceHSpaceBorder","updateStyle","AdvTab","onSrcChange","srcURL","prependURL","absoluteURLPattern","imageListCtrl","getGeneralItems","MainTab","pathJoin","path1","path2","Uploader","defaultHandler","progress","formData","credentials","upload","onprogress","responseText","basePath","FormData","uploadBlob","isDefaultHandler","onFileInput","uploader","finalize","dataUrl","acceptExts","makeTab$2","UploadTab","altCtrl","hasImageClass","toggleContentEditableState","toggleContentEditable","INFINITY","symbolToString","toggleState","fireVisualChars","charMap","charMapToRegExp","charMapToSelector","Data","regExpGlobal","wrapCharWithSpan","Html","isMatch","value$1","filterDescendants","findParentElm","replaceWithSpans","nodeList","withSpans","VisualChars","toggleVisualChars","debouncedToggle","debounce","valueForToggling","LARGE_ARRAY_SIZE","pairs","emoticons","emoticonsHtml","emoticonUrl","PanelHtml","insertEmoticon","panelHtml","print","nodeIsSet","setDir","curDir","generateSelector","allocUnsafe","ie11","ie12","iDevice","fileApi","phone","tablet","windowsPhone","isNull","partition","pass","fail","difference","a1","a2","mapToObject","nav","matchMediaQuery","matchMedia","appName","requestAnimationFramePromise","Env","caretAfter","experimentalShadowDom","canHaveCSP","promiseObj","requestAnimationFrameFunc","vendors","featurefill","wrappedSetTimeout","wrappedSetInterval","wrappedClearTimeout","wrappedClearInterval","Delay","setEditorInterval","eventExpandoPrefix","mouseEventRe","deprecated","keyLocation","layerX","layerY","returnValue","webkitMovementX","webkitMovementY","keyIdentifier","hasIsDefaultPrevented","returnTrue","returnFalse","addEvent","capture","attachEvent","removeEvent","detachEvent","getTargetFromShadowDom","defaultTarget","composedPath","fix","originalEvent","srcElement","eventDoc","cancelBubble","isImmediatePropagationStopped","bindOnReady","eventUtils","domLoaded","isDocReady","readyHandler","waitForDomLoaded","tryScroll","doScroll","EventUtils","expando","hasFocusIn","hasMouseEnterLeave","mouseEnterLeave","mouseenter","mouseleave","executeHandlers","callbackList","fakeName","nativeHandler","defaultNativeHandler","related","currentTarget","relatedTarget","eventMap","parentWindow","support","Expr","isXML","outermostContext","sortInput","hasDuplicate","setDocument","docElem","documentIsHTML","rbuggyQSA","rbuggyMatches","preferredDoc","dirruns","classCache","createCache","tokenCache","compilerCache","sortOrder","strundefined","MAX_NEGATIVE","push_native","indexOf$1","booleans","identifier","pseudos","rcomma","rcombinators","rattributeQuotes","rpseudo","ridentifier","matchExpr","ID","CLASS","TAG","ATTR","PSEUDO","CHILD","bool","needsContext","rinputs","rheader","rnative","rquickExpr","rsibling","rescape","runescape","funescape","escaped","escapedWhitespace","high","els","Sizzle","results","seed","nid","newContext","newSelector","getElementsByClassName","qsa","toSelector","testContext","qsaError","cacheLength","markFunction","siblingCheck","cur","diff","sourceIndex","createInputPseudo","createButtonPseudo","createPositionalPseudo","matchIndexes","hasCompare","getById","attrId","tmp","disconnectedMatch","adown","bup","sortDetached","aup","ap","bp","expr","matchesSelector","attrHandle","getAttributeNode","specified","uniqueSort","duplicates","detectDuplicates","sortStable","createPseudo","preFilter","excess","unquoted","nodeNameSelector","what","simple","ofType","outerCache","useCache","setFilters","matched","matcher","unmatched","elemLang","hasFocus","tabIndex","enabled","selectedIndex","even","odd","lt","gt","nth","radio","checkbox","password","addCombinator","combinator","checkNonElements","doneName","oldCache","newCache","elementMatcher","matchers","multipleContexts","contexts","condense","newUnmatched","mapped","setMatcher","postFilter","postFinder","postSelector","temp","preMap","postMap","preexisting","elems","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","implicitRelative","matchContext","matchAnyContext","matcherFromGroupMatchers","elementMatchers","setMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","parseOnly","soFar","preFilters","compiled","isArray$1","indexOf$2","collection","accumulator","findIndex$1","ArrUtils","whiteSpaceRegExp","delim","sp","cn","scn","de","createNS","onCreate","static","ext","resolve$1","_addCacheSuffix","push$1","slice$1","rquickExpr$1","skipUniques","isDefined","isString$1","isWindow","fragDoc","frag","domManipulate","targetNodes","sourceItem","getElementDocument","DomQuery","makeArray","lastParent","newWrapper","numericCssMap","booleanMap","propFix","for","cssFix","float","attrHooks","cssHooks","whiteSpaceRegExp$1","trim$1","hook","camel","dashed","prependTo","wrapAll","wrapInner","existingClassName","classState","until","siblingName","firstSibling","parentsUntil","nextUntil","prevUntil","overrideDefaults","appendHooks","targetHooks","maxlength","ie$1","opera$1","android$1","trim$2","lTrim","rTrim","hasOwnProperty$1","map$2","bifilter","branch","getAllRaw","ruleName","toArray$1","recurse","Recurse","contains$3","prevSiblings","nextSiblings","childNodesCount","browser$1","firstElement","getTableCaptionDeltaY","bodyTop","captionTop","captionHeight","module$1","nu$4","StyleSheetLoader","maxLoadTime","idCount","loadedStates","appendToHead","loadedCallback","errorCallback","startTime","passed","failed","isOldWebKit","webKitChunks","testCallback","waitCallback","waitForWebKitLinkLoaded","ownerNode","owningElement","waitForGeckoLinkLoaded","sheet","defer","contentCssCors","crossOrigin","loadF","unbox","loadAll","TreeWalker","findSibling","startName","findPreviousNode","prev2","namedEntities","baseEntities","reverseEntities","voids","tableCells","tableSections","headings","listItems","wsElements","lazyLookup","isVoid","isTableSection","isTableCell","isWsPreserveElement","isNodeType","isRestrictedNode","isElement$1","matchNodeNames","matchStyleValues","cssValue","computed","hasPropValue","propName","propValue","hasAttributeValue","isBogus","isBogusAll","isText$1","isDocument","isDocumentFragment","isBr$1","surroundedBySpans","previousIsSpan","nextIsSpan","trimNode","trimmedLength","TrimNode","makeMap$1","attrsCharsRegExp","textCharsRegExp","rawCharsRegExp","entityRegExp","asciiMap","128","130","131","132","133","134","135","136","137","138","139","140","142","145","146","147","148","149","150","151","152","153","154","155","156","158","159","'","nativeDecode","buildEntitiesLookup","encodeRaw","encodeNumeric","encodeNamed","entities","getEncodeFunc","entitiesMap","encodeNamedAndNumeric","encodeCustomNamed","nameMap","named","numeric","Entities","mapCache","dummyObj","makeMap$2","extend$1","explode$1","inArray$1","compileSchema","globalAttributes","blockContent","phrasingContent","flowContent","html4BlockContent","html4PhrasingContent","ni","arrayToMap","addAttrs","schemaItem","compileElementMap","Schema","invalidStyles","schemaItems","whiteSpaceElementsMap","selfClosingElementsMap","boolAttrMap","validClasses","nonEmptyElementsMap","moveCaretBeforeOnEnterElementsMap","textBlockElementsMap","textInlineElementsMap","patternElements","customElementsMap","createLookupTable","option","extendWith","verify_html","valid_styles","invalid_styles","valid_classes","patternToRegExp","ei","al","attrData","attrType","outputName","globalAttributesOrder","elementRuleRegExp","attrRuleRegExp","hasPatternsRegExp","paddEmpty","removeEmpty","removeEmptyAttrs","attributesRequired","attributesDefault","attributesForced","forcedValue","validValues","attributePatterns","setValidElements","addCustomElements","customElements","customElementRegExp","text_block_elements","block_elements","cloneName","customRule","elmName","addValidChildren","validChildren","childRuleRegExp","custom_elements","extended_valid_elements","dd","dt","th","thead","tfoot","legend","area","param","parentsRequired","invalid_elements","getValidStyles","getInvalidStyles","getValidClasses","getTextInlineElements","getSelfClosingElements","getMoveCaretBeforeOnEnterElements","isValidChild","isValid","attrPatterns","getCustomElements","encodingItems","rgbRegExp","urlOrStrRegExp","styleRegExp","trimRightRegExp","encodingLookup","invisibleChar","isEncoded","urlConverter","url_converter","urlConverterScope","url_converter_scope","compress","noJoin","canCompress","compress2","keepSlashes","decodeSingleHexSequence","escSeq","decodeHexSequences","processUrl","url2","url3","str2","allow_script_urls","scriptUrl","allow_svg_data_urls","serializeStyles","styleList","each$5","grep$1","simpleSelectorRe","whiteSpaceRegExp$2","setupAttrHooks","keepValues","keep_values","keepUrlHook","updateInternalStyleAttr","rawValue","findNodeIndex","lastNodeType","DOMUtils","addedStyles","counter","stdMode","boxModel","boundEvents","ownEvents","proxy","getElementsByName","$$","defaultVal","getAttribs","originalValue","onSetAttrib","attrElm","clone_1","root_element","argWin","actWin","update_styles","stylesArg","selectorVal","_findSib","getNext","getPrev","canHaveHTML","newElm","outHtml","keepChildren","$node","removeAllAttribs","removeAttributeNode","addStyle","styleElm","loadCSS","getOuterHTML","setOuterHTML","reference","referenceNode","oldElm","attrNode","findCommonAncestor","pe","rgbVal","brCount","bogusVal","splitElm","replacementElm","bef","aft","pa","getContentEditableParent","dumpRng","DOMUtils$1","each$6","grep$2","isFunction$1","ScriptLoader","QUEUED","LOADING","LOADED","FAILED","scriptLoadedCallbacks","queueLoadedCallbacks","loading","loadScript","isDone","markDone","loadQueue","loadScripts","scripts","failures","execCallbacks","loadingScripts","notifyCallbacks","each$7","AddOnManager","_listeners","dependencies","requireLangPack","languageLoad","addOn","listener","createUrl","baseUrl","dep","resource","addComponents","pluginName","loadDependencies","addOnUrl","deps","urlString","waitFor","PluginManager","ThemeManager","wrap$1","has$2","annotation","dataAnnotation","dataAnnotationId","annotationName","an","newStart","findMarkers","isAnnotation","findAll","markers","directory","nodesAlready","changeCallbacks","initData","withCallbacks","updateCallbacks","callbackMap","outputData","fireCallbacks","fireNoAnnotation","onNodeChange","identifyParserNode","optAnnotation","persistent","__rest","add$3","owner$1","docDom","contentElements","ZWSP","isZwsp","trim$3","Zwsp","isElement$2","isText$2","isCaretContainerBlock","isCaretContainerInline","isCaretContainer","insertInline","endsWithCaretContainer","startsWithCaretContainer","isBeforeInline","isAtStart","isAfterInline","isAtEnd","createBogusBr","insertBlock","blockNode","trimBogusBr","brs","lastBr","showCaretContainerBlock","caretContainer","isRangeInCaretContainerBlock","isContentEditableTrue$1","isContentEditableFalse$1","isBr$2","isText$3","isInvalidTextElement","isAtomicInline","isTable$1","isCaretContainer$1","isCaretCandidate","isNonUiContentEditableFalse","isUnselectable","isInEditable","isAtomicContentEditableFalse","isAtomic","isEditableCaretCandidate","toStart","rect1","rect2","isValidOverflow","isAbove","halfHeight","isBelow","containsXY","overflowX","getOverflow","getSelectedNode","extendingChars","isExtendingChar","lift3","oc","slice$2","and","Predicate","isElement$3","isCaretCandidate$1","isFloated","isValidElementCaretCandidate","isNotPre","isText$4","isBr$3","resolveIndex","isWhiteSpace","isRange","isHiddenWhiteSpaceRange","getBrClientRect","brNode","getBoundingClientRectWebKitText","ec","so","eo","isZeroRect","clientRects","collapseAndInflateWidth","newClientRect","getCaretPositionClientRects","caretPosition","beforeNode","addUniqueAndValidRect","addCharacterOffset","CaretPosition","toRange","isVisible","fromRangeStart","fromRangeEnd","isTextPosition","isElementPosition","HDirection","CaretPosition$1","isText$5","isBogus$1","nodeIndex$1","normalizedParent","getChildNodes","normalizedTextOffset","equal","normalizedNodeIndex","numTextFragments","createPathItem","outputOffset","resolvePathItem","findTextPosition","dataLen","targetOffset","resolve$2","trimEmptyTextNode","insertFragment","rangeInsertNode","isContentEditableFalse$2","getNormalizedTextOffset","trimmedOffset","getPoint","getLocation","findIndex$2","moveEndPoint","normalizeTableCellSelection","findAdjacentContentEditableFalseElm","getOffsetBookmark","getCaretBookmark","getRangeBookmark","createBookmarkSpan","filled","getPersistentBookmark","rng2","endBookmarkNode","startBookmarkNode","keep","GetBookmark","getUndoBookmark","CARET_ID","isCaretNode","getParentCaretContainer","isElement$4","isText$6","getNodeValue","setNodeValue","trimCount","trimmedText","removeUnchanged","removeTextAndReposition","removeElementAndReposition","newPosition","removeTextCaretContainer","removeElementCaretContainer","removeAndReposition","caretContainerNode","CaretContainerRemove","browser$2","isContentEditableFalse$3","isTableCell$1","getAbsoluteClientRect","scrollX","rootRect","trimInlineCaretContainers","contentEditableFalseNodes","FakeCaret","cursorInterval","lastVisualCaret","caretState","startBlink","getCss","isFakeCaretTableBrowser","isFakeCaretTarget","isContentEditableFalse$4","isBlockLike","isCaretContainer$2","isCaretContainerBlock$1","isElement$5","isCaretCandidate$2","isForwards","isBackwards","skipCaretContainers","findNode","getParentBlock","isInSameBlock","caretPosition1","caretPosition2","getChildNodeAtRelativeOffset","relativeOffset","beforeAfter","isNodesInSameBlock","node1","node2","lean","leanLeft","leanRight","getRelativeCefElm","getNormalizedRangeEndPoint","normalizedRange","getElementFromPosition","getElementFromPrevPosition","getVisualCaretPosition","walkFn","isMoveInsideSameBlock","inSameBlock","isContentEditableFalse$5","isText$7","isElement$6","isBr$4","isCaretCandidate$3","isAtomic$1","isEditableCaretCandidate$1","nodeAtIndex","getCaretCandidatePosition","moveForwardFromBr","nextNode","findCaretPosition","Forwards","rootContentEditableFalseElm","CaretWalker","Backwards","walkToPositionIn","fromPosition","afterElement","isBeforeOrStart","isAfterOrEnd","isBeforeAfterSameElement","isAtBr","shouldSkipPosition","navigateIgnore","ignoreFilter","positionIn","nextPosition","prevPosition","CaretFinder","firstPositionIn","lastPositionIn","isStringPathBookmark","isRangeBookmark","isIdBookmark","isIndexBookmark","isPathBookmark","addBogus","resolveCaretPositionBookmark","insertZwsp","tryFindRangePosition","padEmptyCaretContainer","setEndPoint","isValidTextNode","appendData","o1","o2","resolvePaths","resolveId","spos","epos","resolveIndex$1","resolve$3","ResolveBookmark","getBookmark$1","isBookmarkNode$1","Bookmarks","isInlineBlock","moveStart","isWhiteSpaceNode","getNonWhiteSpaceSibling","inc","isTextBlock$1","ed","replaceVars","isEq","str1","normalizeStyleValue","getTextDecoration","decoration","getParents$1","FormatUtils","isBookmarkNode$2","getParents$2","isWhiteSpaceNode$1","isTextBlock$2","findLeaf","excludeTrailingWhitespace","leaf","findParentContentEditable","findSpace","findWordEndPoint","lastTextNode","findSelectorEndPoint","curFormat","findBlockEndPoint","scopeRoot","findParentContainer","block_expand","expandRng","endPoint","expand","ExpandRange","each$8","getEndChild","walk$1","startPoint","exclude","collectSiblings","findEndPoint","walkBoundary","RangeWalk","zeroWidth","isZeroWidth","wrapName","shouldApplyToTrailingSpaces","applyWordGrab","makeAnnotation","eDoc","decorate","_b","master","_d","_e","annotate","newWrappers","finishWrapper","getOrOpenWrapper","processElements","processElement","processNodes","annotateWithBookmark","initialRng","Annotator","changes","annotationChanged","hasOnlyOneChild","isPaddingNode","isPaddedEmptyBlock","isEmptyFragmentElement","nonEmptyElements","isListFragment","cleanupDomFragment","domFragment","toDomFragment","listItems$1","isPadding","isListItemPadded","isEmptyOrPadded","trimListItems","getParentLi","isParentBlockLi","getSplit","beforeRng","afterRng","cloneContents","findFirstIn","caretPos","caretWalker","newCaretPos","findLastOf","insertMiddle","insertAtCaret","liTarget","liElms","BEGINNING","END","isAt","newPos","InsertList","each$9","ElementUtils","compareObjects","obj1","obj2","getLastChildren","rawNode","removeTrailingBr","allBrs","fillWithPaddingBr","isPaddingContents","isPaddedElement","trimBlockTrailingBr","lastChildPrevSibling","PaddingBr","makeMap$3","Writer","indentBefore","indentAfter","htmlOutput","entity_encoding","element_format","pi","HtmlSerializer","8","7","10","11","sortedAttrs","elementRule","createRange$1","normalizeBlockSelectionRange","commonAncestorContainer","newEndPos","normalize","RangeNormalizer","isAfterNbsp","trimOrPadLeftRight","hasSiblingText","trimNbspAfterDeleteAndPadValue","isTableCell$2","selectionSetContent","validInsertion","trimBrsFromTableCell","reduceInlineTextElements","textInlineElements","root_1","elementUtils_1","testNode","markFragmentElements","umarkFragmentElements","isPartOfFragment","canHaveChildren","moveSelectionToMarker","parentEditableFalseElm","nextRng","getContentEditableFalseParent","findNextCaretRng","insertHtmlAtCaret","bookmarkHtml","caretElement","parentElement","parserArgs","_selectionOverrides","showBlockCaretContainer","invalid","processValue","insertAtCaret$1","InsertContent","strongRtl","hasStrongRtl","getBodySetting","bodyObj","getIframeAttrs","getDocType","getDocumentBaseUrl","getBodyId","getBodyClass","getContentSecurityPolicy","shouldPutBrInPre","getForcedRootBlock","getForcedRootBlockAttrs","getBrNewLineSelector","getNoNewLineSelector","shouldKeepStyles","shouldEndContainerOnEmptyBlock","getFontStyleValues","getFontSizeClasses","getImagesDataImgFilter","isAutomaticUploadsEnabled","shouldReuseFileName","shouldReplaceBlobUris","getImageUploadUrl","getImageUploadBasePath","getImagesUploadCredentials","getImagesUploadHandler","shouldUseContentCssCors","getInlineBoundarySelector","isInlineTarget","findInlineParents","findRootInline","hasSameParentBlock","block1","block2","isAtZwsp","normalizePosition","normalizeForwards","normalizeBackwards","InlineUtils","isBeforeRoot","getParentBlock$1","placeCaretInEmptyBody","paddEmptyBody","willDeleteLastPositionInElement","fromPos","firstPos","lastPos","normalizedFirstPos","normalizedLastPos","normalizedFromPos","nextPos","prevPos","DeleteUtils","hasWhitespacePreserveParent","rootElement","isWhitespace","isNamedAnchor","isContent","isBookmark","isBogus$2","isBogusAll$1","isEmptyNode","isEmpty$1","Empty","BlockPosition","BlockBoundary","getBlockPosition","isDifferentBlocks","blockBoundary","hasSameParent","parent1","parent2","skipLastBr","blockPosition","lastPositionInBlock","readFromRange","fromBlockPos","toBlockPos","blockPos","read$1","BlockMergeBoundary","dropLast","parentsUntil$1","parents$1","Parents","getChildrenUntilBlockBoundary","extractChildren","removeEmptyRoot","isEmptyBefore","nestedBlockMerge","fromBlock","toBlock","insertionPoint","sidelongBlockMerge","findInsertionPoint","getInsertionPoint","trimBr","mergeBlockInto","mergeBlocks","MergeBlocks","BlockBoundaryDelete","deleteRangeMergeBlocks","deleteContents","isRawNodeInTable","isSelectionInTable","isEverythingSelected","noPrevious","noNext","emptyEditor","deleteRange","backspaceDelete$1","BlockRangeDelete","isBr$5","parentBlocks","isBeforeBr","isAfterBr","findPreviousBr","findNextBr","is$2","expected","isNbsp","isWhiteSpace$1","isContent$1","isChar","isBeforeSpace","isAfterSpace","isEmptyText","isNextToContentEditableFalse","isBeforeContentEditableFalse","isAfterContentEditableFalse","isNextToTable","isBeforeTable","isAfterTable","isCompoundElement","DeleteAction","moveToElement","moveToPosition","isAtContentEditableBlockCaret","caretLocation","isDeleteFromCefDifferentBlocks","deleteEmptyBlockOrMoveToCef","toCefElm","blockElm","findCefPosition","getContentEditableBlockAction","skipMoveToActionFromInlineCefToContent","deleteAction","getContentEditableAction","read$2","isCollapsibleWhitespace","normalizeContent","isStartOfContent","isEndOfContent","previousCharIsSpace","normalize$1","replaceData","normalizeWhitespaceAfter","whitespaceCount","normalizeWhitespaceBefore","mergeTextNodes","prevNode","normalizeWhitespace","whitespaceOffset","needsReposition","beforeOrStartOf","afterOrEndOf","getPreviousSiblingCaretPosition","getNextSiblingCaretPosition","findCaretPositionBackwardsFromElm","startPosition","findCaretPositionForwardsFromElm","findCaretPositionBackwards","findCaretPositionForward","findCaretPosition$1","findCaretPosOutsideElmAfterDelete","eqRawNode","isBlock$2","paddEmptyBlock","deleteNormalized","afterDeletePosOpt","prevTextOpt","nextTextOpt","isInlineElement","deleteElement","moveCaret","afterDeletePos","normalizedAfterDeletePos","paddPos","DeleteElement","deleteElement$1","hideFakeCaret","deleteOffscreenSelection","selectedElement","getContentEditableRoot","paddEmptyElement","ceRoot","backspaceDelete$2","CefDelete","isText$8","startsWithCaretContainer$1","endsWithCaretContainer$1","createZwsp","insertBefore$1","insertAfter$1","insertInline$1","insertInlineBefore","insertInlineAfter","insertInlinePos","isPosCaretContainer","caretNode","renderCaret","BoundaryCaret","evaluateUntil","fns","LazyEvaluator","Location","rescope","nPos","isNotInsideFormatCaretContainer","findInsideRootInline","isValidLocation","readLocation","getName","outside","isEq$1","location1","location2","betweenInlines","fromInline","toInline","skipNoMovement","fromLocation","toLocation","findLocationTraverse","findLocationSimple","findLocation","BoundaryLocation","prevLocation","nextLocation","hasSelectionModifyApi","getSel","modify","moveByWord","WordSelection","setCaretPosition","isFeatureEnabled","inline_boundaries","renderCaretLocation","findLocation$1","toggleInlines","selectedInlines","targetInlines","safeRemoveCaretContainer","composing","renderInsideInlineCaret","inlines","moveWord","setupSelectedState","moveNextWord","movePrevWord","BoundarySelection","isFeatureEnabled$1","rangeFromPositions","hasOnlyTwoOrLessPositionsLeft","setCaretLocation","deleteFromTo","rescope$1","backspaceDeleteCollapsed","toPosition","backspaceDelete$3","InlineBoundaryDelete","tableCellRng","tableSelection","removeTable","emptyCells","isRootFromElement","getClosestCell","getClosestTable","isExpandedCellRng","cellRng","getTableFromCellRng","startParentTable","endParentTable","getTableCells","getCellRangeFromStartTable","endCell","partialSelection","isWithinSameTable","getCellRng","getTableSelectionFromCellRng","getTableSelectionFromRng","getCellIndex","getSelectedCells","getAction","getActionFromCells","getActionFromRange","TableDeleteAction","getSelectedNodes","hasMultipleRanges","MultiRange","getCellsFromRanges","getCellsFromElement","getCellsFromElementOrRanges","rangeCells","getCellsFromEditor","TableCellSelection","deleteTableElement","deleteCellRange","deleteCaptionRange","emptyElement","deleteTableRange","startElm","getParentCaption","deleteRange$1","getParentCell","deleteBetweenCells","fromCell","toCell","isDeleteOfLastCharPos","fromCaption","emptyCaretCaption","validateCaretCaption","toCaption","deleteCaretInsideCaption","deleteCaretCells","deleteCaretCaption","deleteCaret","backspaceDelete$4","TableDelete","isEq$2","matchesUnInheritedFormatSelector","formatList","inherit","matchParents","matchName","matchItems","similar","onmatch","matchAll","startElement","matchedFormatNames","checkedMap","defaultBlock","MatchFormat","split$1","SplitRange","ZWSP$1","CARET_ID$1","importNode","getEmptyCaretContainers","isCaretContainerEmpty","findFirstTextNode","createCaretContainer","trimZwspFromCaretContainer","removeCaretContainerNode","removeCaretContainer","insertCaretContainerNode","formatNode","appendNode","insertFormatNodesIntoCaretContainer","formatNodes","innerMostFormatNode","applyCaretFormat","wordcharRegex","removeCaretFormat","hasContentAfter","expandedRng","newCaretContainer","disableCaretContainer","replaceWithCaretFormat","innerMost","isFormatElement","inlineElements","isEmptyCaretFormatElement","getParentInlines","hasOnlyOneChild$1","deleteLastPosition","parentInlines","isFormatElement$1","deleteCaret$1","backspaceDelete$5","InlineFormatDelete","getPos$1","fireScrollIntoViewEvent","alignToTop","scrollEvent","scrollElementIntoView","viewPort","viewPortY","viewPortH","offsetY","scrollTo","scrollRangeIntoView","rngRect","bodyRect","ScrollIntoView","isContentEditableTrue$2","isContentEditableFalse$6","showCaret","getNodeRange","renderCaretAtRange","caretPositionNode","caretPositionBeforeNode","renderRangeCaret","caretRange","moveToRange","trimEmptyTextNode$1","deleteContentAndShowCaret","peekCaretPosition","deleteCefBoundaryText","getNextVisualCaretPosition","getPrevVisualCaretPosition","getNextPosFn","isBeforeContentEditableFalseFn","nextCaretPosition","backspaceDelete$6","CefBoundaryDelete","nativeCommand","deleteCommand","forwardDeleteCommand","DeleteCommands","getSpecifiedFontProp","getProperty","round$1","normalizeFontFamily","getComputedFontProp","getFontProp","FontInfo","getFontSize","getFontFamily","findFirstCaretElement","isRangeAtStartOfNode","getCaretElement","fromFontSizeNumber","fontSizeNumber","fontClasses","fontNameAction","fontNameQuery","fontSizeAction","fontSizeQuery","isEq$3","rng1","RangeCompare","findParent","hasParent","hasParentWithName","isTable$2","isTableCell$3","isCeFalseCaretContainer","hasBrBeforeAfter","isPrevNode","hasContentEditableFalseParent","findTextNodeRelative","isAfterNode","lastInlineElement","parentBlockContainer","normalizeEndPoint","directionLeft","normalize$2","normRng","NormalizeRange","hasRightSideContent","scrollToBr","brElm","moveSelectionToBr","extraBr","insertBrAtCaret","isAfterLastNodeInContainer","containerBlock","containerBlockName","isControlKey","insertBrBefore","insertBrAfter","hasBrAfter","isBeforeBr$1","isAnchorLink","isInsideAnchor","readInlineAnchorLocation","insertBrOutsideAnchor","anchorLocation","InsertBr","browser$3","normalizeRng","isOrContains","isRngInRoot","shouldStore","nativeRangeToSelectionRange","getBookmark$2","bookmarkToNativeRng","store","newBookmark","storeNative","restore","SelectionBookmark","indentElement","useMargin","indentStyleName","isListComponent","parentIsListComponent","getBlocksToIndent","indentUnit","indentValue","each$a","extend$2","map$3","inArray$2","EditorCommands","customCommand","skip_focus","addCommands","commandList","queryCommandSupported","addQueryValueHandler","hasCustomCommand","execNativeCommand","isFormatMatch","storeSelection","restoreSelection","queryCommandEnabled","listParent","editingHost","alignStates","Undo","Redo","Dispatcher","beforeFire","bindingName","hi","customEventRootDelegates","toggleNativeEvent","Observable","firePreProcess","firePostProcess","fireRemove","fireDetach","fireSwitchMode","setEditorCommandState","toggleReadOnly","hideResizeRect","getMode","getEventTarget","eventName","event_root","eventRoot","isListening","fireEvent","bindEventDelegate","eventRootElm","delegates","editorManager","editors","EditorObservable","bindPendingEventDelegates","_pendingNativeEvents","unbindAllNativeEvents","EditorObservable$1","sectionResult","mobilePlugins","defaultMobileSettings","normalizePlugins","pluginNames","trimmedPlugins","filterMobilePlugins","extractSections","getSection","sections","sectionSettings","hasSection","getDefaultSettings","documentBaseUrl","delta_width","delta_height","popup_css","document_base_url","add_form_submit_trigger","submit_patch","add_unload_trigger","convert_urls","relative_urls","remove_script_host","object_resizing","visual","font_size_legacy_values","hidden_input","render_ui","convert_fonts_to_spans","ie7_compat","getExternalPlugins","overrideSettings","userDefinedExternalPlugins","external_plugins","combinePlugins","forcedPlugins","processPlugins","isTouchDevice","defaultOverrideSettings","platformPlugins","combinedPlugins","isOnMobile","combineSettings","defaultSettings","extendedSettings","getEditorSettings","getFiltered","getParamObject","isArrayOf","each$b","explode$2","keyCodeLookup","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","modifierNames","Shortcuts","pendingPatterns","parseShortcut","createShortcut","desc","cmdFunc","subpatterns","hasModifier","isFunctionKey","matchShortcut","executeShortcutAction","_doc","getContentEditableHost","getCollapsedNode","getFocusInElement","normalizeSelection","focusBody","setActive","hasElementFocus","hasIframeFocus","hasInlineFocus","rawBody","hasFocus$1","focusEditor","refreshContentEditable","contentEditableHost","activateEditor","bookmarkRng","skipFocus","EditorFocus","rawElm","getComputedSizeProp","getClientWidth","getClientHeight","getMarginTop","getMarginLeft","getBoundingClientRect$1","isInsideElementContentArea","isXYInContentArea","transposedPoint","fromDomSafe","isEditorAttachedToDom","rawContainer","EditorView","unimplemented","NotificationManager","getImplementation","getTopNotification","addNotification","closeNotification","otherNotification","getNotifications","serviceMessage","service_message","WindowManager","funcBind","fireOpenEvent","fireCloseEvent","addWindow","closeWindow","otherWindow","getTopWindow","getWindows","I18n","setCode","newCode","_dir","getCode","langData","getLangData","$1","$2","resolvePluginName","targetUrl","matchUrl","pluginUrlToMessage","uploadError","pluginLoadError","pluginInitError","initError","ErrorReporter","PluginManager$1","uploadStatus","pendingPromises","noUpload","handlerSuccess","handlerFailure","resolvePending","uploadBlobInfo","openNotification","markPending","closeNotification_1","markUploaded","removeFailed","percent","pendingUploadBlobInfo","uploadBlobs","blobInfos","isUploaded","isPending","requestAnimationFrame$1","blobUriToBlob","rejectWithError","parseDataUri","uriParts","decodeURIComponent","uriToBlob","Conversions","imageToBlobInfo","dataUri","getAllImages","ImageScanner","cachedPromises","promises","imageInfo","newPromise","rnd","now","uuid","Uuid","BlobCache","mimeToExt","toBlobInfo","removeByUri","UploadStatus","PENDING","UPLOADED","blobUriStatuses","createStatus","resultUri","hasBlobUri","getResultUri","EditorUpload","imageScanner","urlFilters","aliveGuard","cacheInvalidator","replaceString","replaceImageUrl","replacementUrl","replaceUrlInUndoStack","fragments","replaceImageUri","uploadImages","scanForImages","imageInfos","filteredResult","uploadInfo","dataImgFilter","addFilter","resultItem","replaceBlobUris","isBlockElement","isValidTarget","hasBlockParent","shouldRemoveTextNode","addRootBlocks","rootBlockNode","tempNode","rootNodeName","forcedRootBlock","setup$3","ForceBlocks","getStartNode","getEndNode","getFirstChildren","getLastChildren$1","hasAllContentsSelected","moveEndPoint$1","hasAnyRanges","NodeChange","lastPath","isSameElementPath","currentPath","nativeRng","fakeRng","selectionChange","disable_nodechange","VDirection","VK","HOME","getNodeClientRects","toArrayWithNode","findUntil","walkUntil","isAboveFn","isBeflowFn","targetClientRect","line","aboveLineNumber","lineNumber","isLineNumber","upUntil","Up","downUntil","Down","positionsUntil","isBelowFn","getClientRect","isAboveLine","isLine","isContentEditableFalse$7","findNode$1","distanceToRectLeft","distanceToRectRight","isInside","findClosestClientRect","oldClientRect","oldDistance","newDistance","walkUntil$1","findLineNodeRects","targetNodeRect","checkPosFn","lineRects","getFakeCaretTargets","caretInfo","closestCaret","closestNodeRect","contentEditableFalseNodeRects","targetNodeRects","isXYWithinRange","RangePoint","getAbsolutePosition","getBodyPosition","getScrollPosition","getBodyScroll","inlineScroll","iframeScroll","getMousePosition","iframePosition","scrollPosition","calculatePosition","bodyPosition","mousePosition","calc","MousePosition","isContentEditableFalse$8","isContentEditableTrue$3","isDraggable","isValidDropTarget","targetElement","dragElement","cloneElement","cloneElm","createGhost","clonedElm","ghostElm","appendGhostToBody","moveGhost","removeElement","isLeftMouseButtonPressed","hasDraggableElement","applyRelPos","relX","start$1","ceElm","elmPos","relY","ghost","move$1","throttledPlaceCaretAt","placeCaretAt","dragging","targetPos","getRawTarget","targetClone_1","targetClone","removeDragState","bindFakeDragEvents","pageDom","dragStartHandler","dragHandler","dropHandler","dragEndHandler","rootDocument","blockIeDrop","realTarget","DragDropOverrides","setup$4","renderFocusCaret","CefFocus","isContentEditableTrue$4","isContentEditableFalse$9","getContentEditableRoot$1","SelectionOverrides","selectedContentEditableNode","fakeCaret","realSelectionId","isFakeSelectionElement","getRealSelectionElement","setRange","getRange","blockCaretContainer","contentEditableRoot","removeContentEditableSelection","handleTouchSelect","setContentEditableSelection","hasNormalCaretPosition","hasBetterMouseTarget","targetBlock","caretBlock","normalizeShortEndedElementSelection","isRangeInCaretContainer","realSelectionElement","outerText","addCss","contentStyles","rootClass","isWithinCaretContainer","$realSelectionContainer","origTargetClone","isValidPrefixAttrName","trimComments","sanitizedText","isInvalidUri","findEndTagIndex","tokenRegExp","checkBogusAttribute","attrString","SaxParser","fix_self_closing","endRegExp","attrList","textData","isInternalElement","removeInternalElements","fillAttrsMap","isShortEnded","isValidElement","attribsValue","validAttributesMap","validAttributePatterns","processHtml","anyAttributesRequired","selfClosing","attrRegExp","fixSelfClosing","filteredUrlAttrs","scriptUriRegExp","processEndTag","valid","parseAttribute","val3","attrRule","trimRegExp","self_closing_elements","remove_internals","bogusValue","findEndTag","SaxParser$1","tempAttrs","trimContentRegExp","trimInternal","endTagIndex","matchLength","bogusAllRegExp","getTempAttrs","trimExternal","TrimHtml","KEEP","INSERT","vDown","vUp","snake","diag","buildScript","start1","end1","start2","end2","getMiddleSnake","i2","buildSnake","sum","Diff","getOuterHtml","createFragment$1","insertAt","removeAt","applyDiff","read$3","currentFragments","Fragments","undoLevelDocument","lazyTempDocument","implementation","createHTMLDocument","hasIframes","createFragmentedLevel","beforeBookmark","createCompleteLevel","createFromEditor","trimmedFragments","trimmed","applyToEditor","getLevelContent","getCleanLevelContent","hasEqualContent","level1","level2","hasEqualCleanedContent","isEq$4","Levels","UndoManager","isFirstTypedCharacter","locks","isUnlocked","setTyping","typing","addNonTypingUndoLevel","endTyping","beforeChange","modKey","isInsertReplacementText","inputType","isInsertTextDataNull","currentLevel","custom_undo_redo_levels","hasUndo","hasRedo","callback1","callback2","postProcessHooks","filter$2","each$c","addPostProcessHook","isPre","hasPreSibling","pre","joinPre","pre1","pre2","Hooks","MCE_ATTR_RE","each$d","isEq$5","isTableCell$4","isChildOfInlineParent","lastIdx","wrap$2","wrapWithSiblings","matchName$1","isColorFormatAndAnchor","links","find$3","removeNode$1","rootBlockElm","list_block","compareNode","stylesModified","remove_similar","valueOut","findFormatRoot","formatRoot","wrapAndSplit","lastClone","firstClone","formatRootParent","mixed","splitToFormatRoot","isRemoveBookmarkNode","lastContentEditable","removeRngStyle","ceFalseOverride","RemoveFormat","each$e","isElementNode","findElementSibling","mergeSiblingsNodes","tmpSibling","elementUtils","processChildElements","hasStyle","applyStyle","unwrapEmptySpan","processUnderlineAndColor","mergeUnderlineAndColor","mergeBackgroundColorAndFontSize","mergeSubSup","mergeSiblings","merge_siblings","clearChildStyles","clear_child_styles","mergeWithChildren","mergeWithParents","merge_with_parents","MergeFormats","each$f","isElementNode$1","setElementFormat","onformat","styleVal","applyNodeStyle","applyRngStyle","nodeSpecific","wrapElm","currentWrapElm","childCount","getChildCount","getChildElementNode","mergeStyles","curSelNode","ApplyFormat","each$g","setup$5","formatChangeData","currentFormats","matchedFormats","addListeners","formatChangeItems","formatChangeState","FormatChanged","valigntop","verticalAlign","valignmiddle","valignbottom","textAlign","fontsize_class","DefaultFormats","FormatRegistry","unregister","each$h","parsedSelectorToHtml","ancestry","sItem","getRequiredParent","elmRule","wrapInHtml","parentCandidate","parentRequired","ancestorName","siblingElm","selectorToHtml","parseSelector","parseSelectorItem","$0","$3","$4","previewFrag","previewElm","parentFontSize","previewStyles","previewCss","preview_styles","removeVars","numValue","Preview","ToggleFormat","setup$6","FormatShortcuts","Formatter","hasOwnProperty$2","htmlParser","internalName","cleanup","hasChildren","trimTrailingBr","brNode1","brNode2","DomSerializerFilters","impl","oldDoc","shouldFireEvent","DomSerializerPreProcess","removeAttrs","addFontToSpansFilter","addStrikeToSpanFilter","addFilters","LegacyFilter","whiteSpaceRegExp$3","typeLookup","walk$2","Node$1","selfAttrs","selfAttr","cloneAttrs","refNode","paddEmptyNode","brPreferred","padd_empty_with_br","isPaddedWithNbsp","hasOnlyChild","isPadded","isEmpty$2","whitespaceElements","isLineBreakNode","remove_trailing_brs","prevName","whiteSpaceElements","appendRel","addNoOpener","allow_html_in_named_anchor","fix_list_elements","classValue","validClassesMap","makeMap$4","each$i","explode$3","extend$3","DomParser","nodeFilters","attributeFilters","matchedNodes","matchedAttributes","fixInvalidChildren","newParent","childNode","nonSplitableElements","textBlockElements","filterNode","getNodeFilters","getAttributeFilters","isInWhiteSpacePreservedElement","invalidChildren","rootBlockName","startWhiteSpaceRegExp","endWhiteSpaceRegExp","allWhiteSpaceRegExp","isAllWhiteSpaceRegExp","createNode","removeWhitespaceBefore","textNodeNext","textVal","cloneAndExcludeBlocks","attrFiltersLen","postProcess$1","outArgs","getHtmlFromNode","getInner","parseHtml","serializeNode","htmlSerializer","toHtml","DomSerializer","addRules","setRules","DomSerializer$1","domSerializer","BookmarkManager","BreakType","BookmarkManager$1","isContentEditableFalse$a","isContentEditableTrue$5","getContentEditableRoot$2","ControlSelection","selectedElmGhost","resizeHelper","resizeHandles","selectedHandle","selectedElmX","selectedElmY","startH","resizeStarted","startScrollWidth","startScrollHeight","editableDoc","nw","ne","se","sw","isImage","isEventOnImageOutsideRange","contextMenuSelectImage","getResizeTarget","resizeGhostElement","proportional","resizeHelperX","resizeHelperY","resize_img_proportional","endGhostResize","setSizeProp","showResizeRect","targetWidth","targetHeight","unbindResizeHandleEvents","unSelectabe","updateResizeRect","controlElm","isChildOrEqual","disableGeckoResize","isWithinContentEditableFalse","delayedSelect","throttledUpdateResizeRect","hasCeProperty","findParent$1","findClosestIeRange","createTextRange","moveToElementText","moveToPoint","moveOutOfContentEditableFalse","pointDoc","CaretRangeFromPoint","processRanges","EventProcessRanges","tableModel","cellPosition","fillout","y2","x2","cellExists","skipCellsX","findElementPos","extractRows","sx","sy","ey","subTable","createDomTable","tableElement","modelRowsToDomRows","fromDom$1","toDom","subsection","endElement","SimpleTableModel","findParentListContainer","getFullySelectedListWrappers","listCont","wrap$3","innerElm","directListWrappers","commonAnchorContainer","getWrapElements","wrapElements","listWrappers","allWrappers","emptyFragment","getFragmentFromRange","getParentTable","getTableFragment","selectedTableCells","fullTableModel","sectionedTableModel","getSelectionFragment","read$4","FragmentReader","bin","getHtmlContent","tmpElm","GetSelectionContent","setupArgs","cleanContent","contentArgs","createContextualFragment","anyRng","pasteHTML","SetSelectionContent","getEndpointElement","real","getStart$2","skipEmptyTextNodes","forwards","orig","getNode$1","endElm","select$1","each$j","isNativeIeSelection","isAttachedToDom","isValidRange","Selection$1","bookmarkManager","selectedRange","explicitRange","selectorChangedData","getEnd$1","compareEndPoints","tryCompareBoundaryPoints","how","sourceRange","destinationRange","compareBoundaryPoints","START_TO_START","END_TO_END","ieRange","setNode","getSelectedBlocks$1","anchorRange","focusRange","currentSelectors","matchedSelectors","walk$3","getBreakType","currentPos","Br","Block","Wrap","getPositionsUntil","breakType","breakAt","Eol","getAdjacentLinePositions","getPositionsUntilBreak","findClosestHorizontalPositionFromPoint","lastDist","newDist","findClosestHorizontalPosition","getPositionsUntilPreviousLine","getPositionsUntilNextLine","isAtFirstLine","isAtLastLine","getPositionsAbove","getPositionsBelow","getFirstLinePositions","getLastLinePositions","isContentEditableFalse$b","getSelectedNode$1","moveToCeFalseHorizontally","rangeIsInContainerBlock","moveToCeFalseVertically","walkerFn","linePositions","nextLinePositions","closestNextLineRect","caretClientRect","dist1","dist2","contentEditableFalseNode","caretPositions","exitPreBlock","getHorizontalRange","newRange","getVerticalRange","moveH","moveV","isCefPosition","moveToLineEndPoint","deflate","getCorners","getYAxisValue","tds","findClosestCorner","corners","newCorner","oldCorner","oldDist","getClosestCell$1","isTargetCorner","corner","getBottomValue","getTopValue","isAbove$1","isBelow$1","getClosestCellAbove","getClosestCellBelow","findClosestPositionInAboveCell","findClosestPositionInBelowCell","hasNextBreak","lineInfo","breakPos","startsWithWrapBreak","startsWithBrBreak","isAtTableCellLine","isAtFirstTableCellLine","isAtLastTableCellLine","isCaretAtStartOrEndOfTable","navigateHorizontally","getClosestAbovePosition","getClosestBelowPosition","getTable","renderBlock","navigateVertically","moveH$1","moveV$1","rangeBefore","insertElement","insertBr","insertBlock$1","insertEmptyLine","getClosestTargetBlock","isAtFirstOrLastLine","moveCaretToNewEmptyLine","rootBlock","rootBlockAttrs","moveV$2","matchesEvent","match$1","MatchKeys","executeKeydownOverride","setup$7","ArrowKeys","executeKeydownOverride$1","executeKeyupOverride","setup$8","DeleteBackspaceKeys","firstNonWhiteSpaceNodeSibling","moveToCaretPosition","tempElm","getEditableRoot","editableRoot","getParentBlock$2","getParentBlockName","isListItemParentBlock","NewLineUtils","hasFirstChild","hasParent$1","isListBlock","isNestedList","getContainerBlock","containerBlockParent","isFirstOrLastLi","createNewBlock","newBlockName","InsertLi","trimZwsp","isEmptyAnchor","isTableCell$5","emptyBlock","containerAndSiblingName","canSplitBlock","trimInlineElementsOnLeftSideOfBlock","firstChilds","normalizeZwspOffset","includeZwspInRange","trimLeadingLineBreaks","getEditableRoot$1","applyAttributes","forcedRootBlockAttrs","attrStyles","currentStyles","newStyles","attrClassesOpt","attrClasses","currentClassesOpt","currentClasses","filteredClasses","newClasses","appliedAttrs","remainingAttrs","setForcedBlockAttrs","wrapSelfAndSiblingsInDefaultBlock","addBrToBlockIfNeeded","insert$2","parentBlockName","clonedNode","isCaretAtStartOrEndOfBlock","normalizedOffset","insertNewBlockAfter","InsertBlock","shouldInsertBr","shouldBlockNewLine","ContextSelectors","newLineAction","shouldBlockNewLine$1","isBrMode","requiredState","brMode","inListBlock","inPreBlock","inSummaryBlock","shouldPutBrInPre$1","inBrContext","canInsertIntoEditableRoot","rootEditable","match$2","predicates","getAction$1","NewLineAction","insert$3","InsertNewLine","endTypingLevel","handleEnterKeyEvent","setup$9","EnterKey","insertTextAtPosition","insertNbspAtPosition","insertSpaceAtPosition","navigateIgnoreEmptyTextNodes","getClosestBlock","isAtBeforeAfterBlockBoundary","isAtBlockBoundary","isAtStartOfBlock","isAtEndOfBlock","isBeforeBlock","isAfterBlock","isInMiddleOfText","getClosestBlock$1","hasSpaceBefore","hasSpaceAfter","isPreValue","isInPre","isAtBeginningOfBody","isAtEndOfBody","isAtLineBoundary","needsToHaveNbsp","needsToBeNbspLeft","needsToBeNbspRight","afterPos","needsToBeNbsp","isNbspAt","hasNbsp","normalizeNbspMiddle","normalizeNbspAtStart","normalizeNbspInMiddleOfTextNode","newText","normalizeNbspAtEnd","normalizeNbsps","normalizeNbspsInEditor","locationToCaretPosition","insertInlineBoundarySpaceOrNbsp","checkPos","setSelection$1","insertSpaceOrNbspAtSelection","executeKeydownOverride$2","setup$a","SpaceKey","findBlockCaretContainer","removeIeControlRect","handleBlockContainer","setup$b","CaretContainerInput","browser$4","setupIeInput","keypressThrotter","setup$c","isComposing","executeKeydownOverride$3","setup$d","HomeEndKeys","setup$e","KeyboardOverrides","isGecko","isWebKit","mceInternalDataType","setMceInternalContent","selectionHtml","internalContent","getMceInternalContent","insertClipboardContents","emptyEditorWhenDeleting","serializeRng","allContentsSelected","allRng","allSelection","selectAll","inputMethodFocus","removeHrOnBackspace","selectControlElements","removeStylesWhenDeletingAcrossBlockElements","getAttributeApplyFunction","setAttributeNode","isSelectionAcrossElements","disableBackspaceIntoATable","removeBlockQuoteOnBackSpace","setGeckoEditingOptions","setOpts","addBrAfterLastLinks","fixLinks","setDefaultBlockType","showBrokenImageIcon","restoreFocusOnKeyDown","bodyHeight","blockCmdArrowNavigation","disableAutoUrlDetect","tapLinksAndImages","blockFormSubmitInsideEditor","removeAppleInterchangeBrs","ieInternalDragAndDrop","isTextBlockNode","normalizeSelection$1","setup$f","preventSummaryToggle","filterDetails","setup$g","appendStyle","createParser","autoFocus","auto_focus","destroyed","getStyleSheetLoader","initContentBody","skipWrite","contentCssText","orgVisibility","iframeHTML","content_document","content_window","bodyElement","hex_colors","force_hex_style_colors","class_filter","annotator","_nodeChangeDispatcher","browser_spellcheck","gecko_spellcheck","nowrap","content_style","InitContentBody","relaxDomain","domain","hostname","bodyUuid","domainRelaxUrl","normalizeHeight","normalizedHeight","createIframeElement","customAttrs","frameBorder","allowTransparency","createIframe","isDomainRelaxed","contentAreaContainer","init$1","boxInfo","orgDisplay","InitIframe","DOM$4","initPlugin","initializedPlugins","pluginInstance","trimLegacyPrefix","initPlugins","initTheme","renderFromLoadedTheme","min_height","iframeHeight","renderFromThemeFunc","createThemeFalseResult","renderThemeFalseIframe","renderThemeFalse","renderThemeUi","init$2","rtl_ui","i18n","aria_label","content_css","Init","DOM$5","hasSkipLoadPrefix","loadLanguage","scriptLoader","loadTheme","themeUrl","theme_url","loadPlugins","form","formElement","hasHiddenInput","formEventDelegate","_mceOldSubmit","triggerSave","encoding","_beforeUnload","set_dirty","add$4","each$k","trim$4","queryParts","DEFAULT_PORTS","ftp","http","https","mailto","URI","baseUri","base_uri","isProtocolRelative","protocol","toAbsPath","part","userInfo","port","setPath","toRelative","tu","uu","toRelPath","noHost","isSameOrigin","defaultPort","breakPoint","outPath","nb","noProtoHost","loc","defaultFormat","trimEmptyContents","emptyRegExp","getContentFromBody","getContent$1","findMatchingNodes","nodeMatches","attrMatches","filter$3","defaultFormat$1","isTreeNode","setEditorHtml","setContentString","padd","setContentTree","setContent$1","DOM$6","restoreOriginalStyles","safeDestroy","clearDomReferences","restoreForm","is_removing","automatic","DOM$7","extend$4","each$l","resolve$4","ie$2","Editor","documentBaseURL","baseURI","language_load","loadedCSS","editorCommands","cache_suffix","override_viewport","callbackLookup","lang_1","i18n_1","addSidebar","focusedEditor","setProgressState","isNotDirty","oldState","urlconverter_callback","visual_table_class","visual_anchor_class","documentFocusInHandler","beforeUnloadDelegate","EditorManager","isEditorUIElement","FocusManager","isManualNodeChange","registerPageMouseUp","throttledStore","mouseUpPage","registerFocusOut","registerMouseUp","registerEditorEvents","SelectionRestore","DOM$8","isEditorUIElement$1","isUIElement","customSelector","custom_ui_selector","getActiveElement","blurredEditor","unregisterDocumentEvents","setup$h","FocusController","DOM$9","explode$4","each$m","extend$5","instanceCounter","boundGlobalEvents","legacyEditors","isValidLegacyKey","globalEventDelegate","toggleGlobalEvents","removeEditorFromList","targetEditor","oldEditors","purgeDestroyedEditor","releaseDate","preInit","tinyMCEPreInit","srcScript","currentScript","base_url","pluginBaseUrls","plugin_base_urls","invalidInlineTargets","isInvalidInlineTarget","findTargets","forms","editor_deselector","editor_selector","provideResults","initEditors","initCount","createEditor","existingEditor","addI18n","EditorManager$1","RangeUtils","normalizedRng","compareRanges","extendClass","initializing","RangeUtils$1","round$2","constrainRect","x1","y1","clamp$1","fixedSize","underflowX1","underflowY1","overflowX2","overflowY2","cx2","cy2","fromClientRect","typeClass","lctype","controlType","ControlType","each$n","extend$6","Class","member","mixins","mixin","name_1","Methods","fieldName","min$1","max$1","round$3","Color","rgb2hsv","minRGB","maxRGB","hsvToRgb","saturation","chroma","quote","JSON$1","JSONP","XHR","ready","success_scope","error_scope","overrideMimeType","content_type","crossDomain","requestheaders","extend$7","JSONRequest","sendRPC","ecb","scb","method","localStorage","storage","configurable","LocalStorage","publicApi","geom","EventDispatcher","Serializer","isMac","Tinymce","exportToModuleLoaders","exportToWindowGlobal","tinyMCE","getLanguage","defaultLanguage","getRpcUrl","getSpellcheckerCallback","getSpellcheckerWordcharPattern","defaultPattern","fireSpellcheckStart","fireSpellcheckEnd","suggestionsMenu","DomTextMatcher","createMatch","stencil","unwrapElement","getWrappersByIndex","wrappers","dataIndex","filteredMatches","matchFromElement","elementFromMatch","rangeFromMatch","getTextMatcher","textMatcherState","textMatcher","defaultSpellcheckCallback","currentLanguageState","doneCallback","postData","sendRpcCall","successCallback","userSpellcheckCallback","spellCheckCallback","spellchecker","startedState","lastSuggestionsState","markErrors","checkIfFinished","addToDictionary","word","ignoreWord","suggestions","hasDictionarySupport","words","dictionary","getWordCharPattern","languageValues","languageValue","selectedLanguage","getItems","langPair","languageMenuItems","startSpellchecking","buttonArgs","showSuggestions","suggestion","onautohide","SuggestionsMenu","regExps","aletter","midnumlet","midletter","midnum","lf","newline","katakana","extendnumlet","characterIndices","ALETTER","MIDNUMLET","MIDLETTER","MIDNUM","NUMERIC","CR","LF","NEWLINE","EXTEND","FORMAT","KATAKANA","EXTENDNUMLET","AT","OTHER","SETS","EMPTY_STRING","PUNCTUATION","WHITESPACE","UnicodeData","SETS$1","setsLength","memoize","classify","memoized","StringMapper","isWordBoundary","prevType","nextNextType","nextType","WordBoundary","EMPTY_STRING$1","WHITESPACE$1","PUNCTUATION$1","isProtocol","findWordEnd","extractUrl","peakedWord","doGetWords","includePunctuation","includeWhitespace","ignoreCase","getWords","WordGetter","treeWalker","getCount","WordCount","wordsToText","debouncedUpdate","Statusbar","Content","fullscreenState","fireFullscreenStateChanged","getScrollPos","vp","setScrollPos","toggleFullscreen","editorContainerStyle","iframeStyle","fullscreenInfo","removeResize","iframeWidth","containerWidth","containerHeight","scrollPos","removeHandler","newFullScreenInfo","arrayBuffer","getTabFocusElements","getTabFocus","tabCancel","tabHandler","canSelectRecursive","canSelect","getTocClass","getTocHeader","getTocDepth","guid","Guid","tocId","hasHeaders","readHeaders","tocClass","headerTag","getMinLevel","minLevel","generateTitle","openTag","closeTag","generateTocHtml","generateTocContentHtml","ii","nextLevel","prevLevel","isEmptyOrOffscren","insertToc","$tocElm","updateToc","Toc","isToc"],"mappings":"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A,oBAEF,CACE,OACA,kBAEF,CACE,OACA,oBAEF,CACE,MACA,gBAEF,CACE,MACA,kBAEF,CACE,MACA,qBAEF,CACE,OACA,6CAEF,CACE,OACA,8CAEF,CACE,MACA,2BAEF,CACE,MACA,4BAEF,CACE,OACA,8BAEF,CACE,OACA,+BAEF,CACE,OACA,8BAEF,CACE,OACA,+BAEF,CACE,OACA,+BAEF,CACE,OACA,+BAEF,CACE,KACA,kBAEF,CACE,KACA,qBAEF,CACE,OACA,yBAEF,CACE,OACA,4BAEF,CACE,OACA,WAEF,CACE,OACA,WAEF,CACE,MACA,UAEF,CACE,OACA,YAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,aAEF,CACE,MACA,6BAEF,CACE,MACA,wBAEF,CACE,MACA,qBAEF,CACE,MACA,eAEF,CACE,MACA,eAEF,CACE,OACA,cAEF,CACE,MACA,mBAEF,CACE,MACA,iBAEF,CACE,OACA,kBAEF,CACE,MACA,uBAEF,CACE,MACA,mBAEF,CACE,MACA,mBAEF,CACE,MACA,qBAEF,CACE,MACA,wBAEF,CACE,MACA,qBAEF,CACE,MACA,2BAEF,CACE,MACA,qBAEF,CACE,OACA,YAEF,CACE,OACA,kBAEF,CACE,OACA,YAEF,CACE,OACA,eAEF,CACE,OACA,cAEF,CACE,OACA,0BAEF,CACE,OACA,mBAEF,CACE,OACA,gBAEF,CACE,OACA,gBAEF,CACE,OACA,cAEF,CACE,OACA,qBAEF,CACE,OACA,sBAEF,CACE,OACA,iBAEF,CACE,OACA,eAEF,CACE,OACA,cAEF,CACE,MACA,YAEF,CACE,OACA,gBAEF,CACE,OACA,SAEF,CACE,OACA,wBAEF,CACE,OACA,WAEF,CACE,OACA,gBAEF,CACE,OACA,YAEF,CACE,OACA,uBAEF,CACE,OACA,qBAEF,CACE,OACA,mBAEF,CACE,OACA,SAEF,CACE,MACA,gBAEF,CACE,MACA,WAEF,CACE,MACA,8BAEF,CACE,MACA,+BAEF,CACE,OACA,UAEF,CACE,OACA,iBAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,aAEF,CACE,MACA,iBAEF,CACE,MACA,kBAEF,CACE,MACA,cAEF,CACE,MACA,eAEF,CACE,MACA,eAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,OAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,aAEF,CACE,MACA,iBAEF,CACE,MACA,aAEF,CACE,MACA,cAEF,CACE,MACA,eAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,aAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,SAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,aAEF,CACE,MACA,iBAEF,CACE,MACA,kBAEF,CACE,MACA,cAEF,CACE,MACA,eAEF,CACE,MACA,eAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,OAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,aAEF,CACE,MACA,iBAEF,CACE,MACA,WAEF,CACE,MACA,YAEF,CACE,MACA,eAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,aAEF,CACE,MACA,SAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,SAEF,CACE,MACA,QAEF,CACE,MACA,SAEF,CACE,MACA,SAEF,CACE,MACA,WAEF,CACE,MACA,QAEF,CACE,MACA,OAEF,CACE,MACA,SAEF,CACE,MACA,QAEF,CACE,MACA,SAEF,CACE,MACA,UAEF,CACE,MACA,MAEF,CACE,MACA,MAEF,CACE,MACA,MAEF,CACE,MACA,WAEF,CACE,MACA,MAEF,CACE,MACA,OAEF,CACE,MACA,SAEF,CACE,MACA,OAEF,CACE,MACA,WAEF,CACE,MACA,OAEF,CACE,MACA,OAEF,CACE,MACA,OAEF,CACE,MACA,SAEF,CACE,MACA,SAEF,CACE,MACA,QAEF,CACE,MACA,SAEF,CACE,MACA,SAEF,CACE,MACA,WAEF,CACE,MACA,QAEF,CACE,MACA,OAEF,CACE,MACA,SAEF,CACE,MACA,QAEF,CACE,MACA,SAEF,CACE,MACA,UAEF,CACE,MACA,MAEF,CACE,MACA,MAEF,CACE,MACA,MAEF,CACE,MACA,WAEF,CACE,MACA,MAEF,CACE,MACA,OAEF,CACE,MACA,eAEF,CACE,MACA,SAEF,CACE,MACA,OAEF,CACE,MACA,WAEF,CACE,MACA,OAEF,CACE,MACA,OAEF,CACE,MACA,OAEF,CACE,MACA,SAEF,CACE,OACA,eAEF,CACE,MACA,aAEF,CACE,OACA,oBAEF,CACE,MACA,yBAEF,CACE,OACA,iBAEF,CACE,OACA,kBAEF,CACE,OACA,mBAEF,CACE,OACA,iBAEF,CACE,OACA,oBAEF,CACE,OACA,mBAEF,CACE,OACA,oBAEF,CACE,OACA,mBAEF,CACE,OACA,0BAEF,CACE,OACA,wBAEF,CACE,OACA,2BAEF,CACE,OACA,0BAEF,CACE,OACA,2BAEF,CACE,OACA,aAEF,CACE,OACA,aAEF,CACE,OACA,eAEF,CACE,OACA,mBAEF,CACE,OACA,yBAEF,CACE,OACA,2BAEF,CACE,OACA,gBAEF,CACE,OACA,iBAEF,CACE,OACA,iBAEF,CACE,OACA,gBAEF,CACE,OACA,gBAEF,CACE,OACA,iBAEF,CACE,OACA,cAEF,CACE,OACA,eA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1C,IAAK,WACL0C,KAAM,YAER,CACE1C,IAAK,aACL0C,KAAM,cAER,CACE1C,IAAK,WACL0C,KAAM,YAER,CACE1C,IAAK,SACL0C,KAAM,UAER,CACE1C,IAAK,UACL0C,KAAM,iBAER,CACE1C,IAAK,OACL0C,KAAM,QAER,CACE1C,IAAK,aACL0C,KAAM,eAER,CACE1C,IAAK,cACL0C,KAAM,gBAER,CACE1C,IAAK,WACL0C,KAAM,qBAER,CACE1C,IAAK,cACL0C,KAAM,gBAER,CACE1C,IAAK,iBACL0C,KAAM,kBAER,CACE1C,IAAK,YACL0C,KAAM,aAER,CACE1C,IAAK,WACL0C,KAAM,aAER,CACE1C,IAAK,aACL0C,KAAM,eAER,CACE1C,IAAK,OACL0C,KAAM,QAER,CACE1C,IAAK,KACL0C,KAAM,mBAER,CACE1C,IAAK,QACL0C,KAAM,SAER,CACE1C,IAAK,aACL0C,KAAM,eAER,CACE1C,IAAK,YACL0C,KAAM,cAER,CACE1C,IAAK,iBACL0C,KAAM,oBAER,CACE1C,IAAK,eACL0C,KAAM,iBAER,CACE1C,IAAK,OACL0C,KAAM,QAER,CACE1C,IAAK,QACL0C,KAAM,SAER,CACE1C,IAAK,QACL0C,KAAM,SAER,CACE1C,IAAK,cACL0C,KAAM,eAER,CACE1C,IAAK,cACL0C,KAAM,eAER,CACE1C,IAAK,YACL0C,KAAM,cAER,CACE1C,IAAK,QACL0C,KAAM,SAER,CACE1C,IAAK,UACL0C,KAAM,WAER,CACE1C,IAAK,QACL0C,KAAM,SAER,CACE1C,IAAK,OACL0C,KAAM,QAER,CACE1C,IAAK,gBACL0C,KAAM,sBAER,CACE1C,IAAK,eACL0C,KAAM,iBAER,CACE1C,IAAK,WACL0C,KAAM,aAER,CACE1C,IAAK,QACL0C,KAAM,SAER,CACE1C,IAAK,WACL0C,KAAM,YAER,CACE1C,IAAK,YACL0C,KAAM,cAER,CACE1C,IAAK,cACL0C,KAAM,gBAER,CACE1C,IAAK,MACL0C,KAAM,qBAER,CACE1C,IAAK,eACL0C,KAAM,iBAER,CACE1C,IAAK,cACL0C,KAAM,qBAE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GAAM96D,MAAK,SAAUq6D,GACxC,OAAOqoC,EAASsgB,EAAaloD,GAAOA,EAAMT,MAG9C,SAAS4pD,EAAW9D,EAAQ7qJ,GAC1B,OAAOotJ,EAAavC,EAAQ7qJ,GAAM0qC,MAAK,SAAU86D,GAC/C,OAAO4nC,EAASv4H,EAAQ7W,QAAQ6sJ,GAASrlD,EAAMqlD,EAAO2C,gBAI1D,SAASn3F,EAAM75D,EAAOiN,EAAK6uC,GACzB,IAAIs2G,EAA+B,kBAAVpyJ,EAAqB0jE,WAAW1jE,GAASA,EAMlE,OALIoyJ,EAAct2G,EAChBs2G,EAAct2G,EACLs2G,EAAcnlJ,IACvBmlJ,EAAcnlJ,GAETmlJ,EAET,SAASp/C,IACP,MAAO,CACL,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GAGJ,IAAIq/C,EAAc,CAChB,EACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,IACA,IACA,IACA,EACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,IACA,KACA,EACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,EACA,IACA,IACA,IACA,IACA,EACA,IACA,IACA,IACA,EACA,IACA,EACA,IACA,IACA,EACA,IACA,IACA,IACA,EACA,IACA,IACA,EACA,IACA,IACA,IACA,IAEF,SAASC,EAASC,EAASC,GAIzB,IAHA,IAEI/uF,EAFA8uD,EAAM,GACNtzF,EAAM,IAAIhgB,MAAM,IAEXlc,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAK,IAAIiuB,EAAI,EAAGA,EAAI,EAAGA,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IAIbgG,KAAK0d,QAAU,WACb,OAAOjkB,GAETuG,KAAKsvB,KAAO,SAAUhI,GAEpB,OADA7tB,EAAOozL,EAAYpzL,EAAM,aAAc,cAAe6tB,GAC/C7tB,GAETuG,KAAK0zB,KAAO,SAAUpM,GAEpB,OADA7tB,EAAOozL,EAAYpzL,EAAM,YAAa,kBAAmB6tB,GAClD7tB,GAETuG,KAAKgtL,MAAQ,SAAU1lK,GAErB,OADA7tB,EAAOszL,EAAiBtzL,EAAM,YAAa,kBAAmB6tB,GACvD7tB,GAIX,IAwSIwzL,GAAeC,GAAcC,GAxS7B/oG,GAAS,CACX,UACA,QACA,UACA,MACA,KACA,aACA,SACA,OACA,WACA,SACA,SACA,OACA,OACA,MACA,UACA,UACA,OACA,IACA,KACA,WACA,KACA,SACA,UACA,SACA,aACA,KACA,KACA,KACA,KACA,KACA,KACA,UACA,MACA,MACA,YACA,OACA,MACA,KACA,KACA,KACA,KACA,QACA,QACA,QACA,QACA,KACA,KACA,KACA,WAEEgpG,GAAQ,CACV,OACA,OACA,WACA,KACA,MACA,QACA,KACA,MACA,QACA,UACA,OACA,OACA,QACA,QACA,SACA,MACA,SAEEC,GAAa,CACf,KACA,MAEEC,GAAgB,CAClB,QACA,QACA,SAEE7gK,GAAa,CACf,KACA,KACA,KACA,KACA,KACA,KACA,IACA,MACA,UACA,MACA,OACA,aACA,SACA,MACA,WACA,SACA,SACA,UACA,UACA,SACA,QACA,MACA,UAEE8gK,GAAW,CACb,KACA,KACA,KACA,KACA,KACA,MAEEC,GAAY,CACd,KACA,KACA,MAEE3zK,GAAQ,CACV,KACA,KACA,MAEE4zK,GAAa,CACf,MACA,SACA,WACA,SAEEC,GAAa,SAAU5kL,GACzB,IAAIu2D,EACJ,OAAO,SAAU5lE,GAEf,OADA4lE,EAASA,GAAkBw3G,GAAY/tK,EAAOqK,GAAS,IAChDksD,EAAOhpE,eAAe8D,GAAKV,MAGlC0/H,GAAYu0D,GAAWH,IACvB/8K,GAAUk9K,GAAWtpG,IACrBl4B,GAAW,SAAUzyD,GACvB,OAAOyqB,GAAUzq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","file":"js/chunk-772e9386.85fbe80e.js","sourcesContent":["var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","// Exports the \"template\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/template')\n//   ES2015:\n//     import 'tinymce/plugins/template'\nrequire('./plugin.js');","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = cloneDeep;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","// Exports the \"table\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/table')\n//   ES2015:\n//     import 'tinymce/plugins/table'\nrequire('./plugin.js');","// Exports the \"codesample\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/codesample')\n//   ES2015:\n//     import 'tinymce/plugins/codesample'\nrequire('./plugin.js');","(function () {\nvar pagebreak = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var getSeparatorHtml = function (editor) {\n      return editor.getParam('pagebreak_separator', '<!-- pagebreak -->');\n    };\n    var shouldSplitBlock = function (editor) {\n      return editor.getParam('pagebreak_split_block', false);\n    };\n    var Settings = {\n      getSeparatorHtml: getSeparatorHtml,\n      shouldSplitBlock: shouldSplitBlock\n    };\n\n    var getPageBreakClass = function () {\n      return 'mce-pagebreak';\n    };\n    var getPlaceholderHtml = function () {\n      return '<img src=\"' + global$1.transparentSrc + '\" class=\"' + getPageBreakClass() + '\" data-mce-resize=\"false\" data-mce-placeholder />';\n    };\n    var setup = function (editor) {\n      var separatorHtml = Settings.getSeparatorHtml(editor);\n      var pageBreakSeparatorRegExp = new RegExp(separatorHtml.replace(/[\\?\\.\\*\\[\\]\\(\\)\\{\\}\\+\\^\\$\\:]/g, function (a) {\n        return '\\\\' + a;\n      }), 'gi');\n      editor.on('BeforeSetContent', function (e) {\n        e.content = e.content.replace(pageBreakSeparatorRegExp, getPlaceholderHtml());\n      });\n      editor.on('PreInit', function () {\n        editor.serializer.addNodeFilter('img', function (nodes) {\n          var i = nodes.length, node, className;\n          while (i--) {\n            node = nodes[i];\n            className = node.attr('class');\n            if (className && className.indexOf('mce-pagebreak') !== -1) {\n              var parentNode = node.parent;\n              if (editor.schema.getBlockElements()[parentNode.name] && Settings.shouldSplitBlock(editor)) {\n                parentNode.type = 3;\n                parentNode.value = separatorHtml;\n                parentNode.raw = true;\n                node.remove();\n                continue;\n              }\n              node.type = 3;\n              node.value = separatorHtml;\n              node.raw = true;\n            }\n          }\n        });\n      });\n    };\n    var FilterContent = {\n      setup: setup,\n      getPlaceholderHtml: getPlaceholderHtml,\n      getPageBreakClass: getPageBreakClass\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mcePageBreak', function () {\n        if (editor.settings.pagebreak_split_block) {\n          editor.insertContent('<p>' + FilterContent.getPlaceholderHtml() + '</p>');\n        } else {\n          editor.insertContent(FilterContent.getPlaceholderHtml());\n        }\n      });\n    };\n    var Commands = { register: register };\n\n    var setup$1 = function (editor) {\n      editor.on('ResolveName', function (e) {\n        if (e.target.nodeName === 'IMG' && editor.dom.hasClass(e.target, FilterContent.getPageBreakClass())) {\n          e.name = 'pagebreak';\n        }\n      });\n    };\n    var ResolveName = { setup: setup$1 };\n\n    var register$1 = function (editor) {\n      editor.addButton('pagebreak', {\n        title: 'Page break',\n        cmd: 'mcePageBreak'\n      });\n      editor.addMenuItem('pagebreak', {\n        text: 'Page break',\n        icon: 'pagebreak',\n        cmd: 'mcePageBreak',\n        context: 'insert'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('pagebreak', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n      FilterContent.setup(editor);\n      ResolveName.setup(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","// Exports the \"advlist\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/advlist')\n//   ES2015:\n//     import 'tinymce/plugins/advlist'\nrequire('./plugin.js');","(function () {\nvar textcolor = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var getCurrentColor = function (editor, format) {\n      var color;\n      editor.dom.getParents(editor.selection.getStart(), function (elm) {\n        var value;\n        if (value = elm.style[format === 'forecolor' ? 'color' : 'background-color']) {\n          color = color ? color : value;\n        }\n      });\n      return color;\n    };\n    var mapColors = function (colorMap) {\n      var i;\n      var colors = [];\n      for (i = 0; i < colorMap.length; i += 2) {\n        colors.push({\n          text: colorMap[i + 1],\n          color: '#' + colorMap[i]\n        });\n      }\n      return colors;\n    };\n    var applyFormat = function (editor, format, value) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.apply(format, { value: value });\n        editor.nodeChanged();\n      });\n    };\n    var removeFormat = function (editor, format) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.remove(format, { value: null }, null, true);\n        editor.nodeChanged();\n      });\n    };\n    var TextColor = {\n      getCurrentColor: getCurrentColor,\n      mapColors: mapColors,\n      applyFormat: applyFormat,\n      removeFormat: removeFormat\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceApplyTextcolor', function (format, value) {\n        TextColor.applyFormat(editor, format, value);\n      });\n      editor.addCommand('mceRemoveTextcolor', function (format) {\n        TextColor.removeFormat(editor, format);\n      });\n    };\n    var Commands = { register: register };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var defaultColorMap = [\n      '000000',\n      'Black',\n      '993300',\n      'Burnt orange',\n      '333300',\n      'Dark olive',\n      '003300',\n      'Dark green',\n      '003366',\n      'Dark azure',\n      '000080',\n      'Navy Blue',\n      '333399',\n      'Indigo',\n      '333333',\n      'Very dark gray',\n      '800000',\n      'Maroon',\n      'FF6600',\n      'Orange',\n      '808000',\n      'Olive',\n      '008000',\n      'Green',\n      '008080',\n      'Teal',\n      '0000FF',\n      'Blue',\n      '666699',\n      'Grayish blue',\n      '808080',\n      'Gray',\n      'FF0000',\n      'Red',\n      'FF9900',\n      'Amber',\n      '99CC00',\n      'Yellow green',\n      '339966',\n      'Sea green',\n      '33CCCC',\n      'Turquoise',\n      '3366FF',\n      'Royal blue',\n      '800080',\n      'Purple',\n      '999999',\n      'Medium gray',\n      'FF00FF',\n      'Magenta',\n      'FFCC00',\n      'Gold',\n      'FFFF00',\n      'Yellow',\n      '00FF00',\n      'Lime',\n      '00FFFF',\n      'Aqua',\n      '00CCFF',\n      'Sky blue',\n      '993366',\n      'Red violet',\n      'FFFFFF',\n      'White',\n      'FF99CC',\n      'Pink',\n      'FFCC99',\n      'Peach',\n      'FFFF99',\n      'Light yellow',\n      'CCFFCC',\n      'Pale green',\n      'CCFFFF',\n      'Pale cyan',\n      '99CCFF',\n      'Light sky blue',\n      'CC99FF',\n      'Plum'\n    ];\n    var getTextColorMap = function (editor) {\n      return editor.getParam('textcolor_map', defaultColorMap);\n    };\n    var getForeColorMap = function (editor) {\n      return editor.getParam('forecolor_map', getTextColorMap(editor));\n    };\n    var getBackColorMap = function (editor) {\n      return editor.getParam('backcolor_map', getTextColorMap(editor));\n    };\n    var getTextColorRows = function (editor) {\n      return editor.getParam('textcolor_rows', 5);\n    };\n    var getTextColorCols = function (editor) {\n      return editor.getParam('textcolor_cols', 8);\n    };\n    var getForeColorRows = function (editor) {\n      return editor.getParam('forecolor_rows', getTextColorRows(editor));\n    };\n    var getBackColorRows = function (editor) {\n      return editor.getParam('backcolor_rows', getTextColorRows(editor));\n    };\n    var getForeColorCols = function (editor) {\n      return editor.getParam('forecolor_cols', getTextColorCols(editor));\n    };\n    var getBackColorCols = function (editor) {\n      return editor.getParam('backcolor_cols', getTextColorCols(editor));\n    };\n    var getColorPickerCallback = function (editor) {\n      return editor.getParam('color_picker_callback', null);\n    };\n    var hasColorPicker = function (editor) {\n      return typeof getColorPickerCallback(editor) === 'function';\n    };\n    var Settings = {\n      getForeColorMap: getForeColorMap,\n      getBackColorMap: getBackColorMap,\n      getForeColorRows: getForeColorRows,\n      getBackColorRows: getBackColorRows,\n      getForeColorCols: getForeColorCols,\n      getBackColorCols: getBackColorCols,\n      getColorPickerCallback: getColorPickerCallback,\n      hasColorPicker: hasColorPicker\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var getHtml = function (cols, rows, colorMap, hasColorPicker) {\n      var colors, color, html, last, x, y, i, count = 0;\n      var id = global$1.DOM.uniqueId('mcearia');\n      var getColorCellHtml = function (color, title) {\n        var isNoColor = color === 'transparent';\n        return '<td class=\"mce-grid-cell' + (isNoColor ? ' mce-colorbtn-trans' : '') + '\">' + '<div id=\"' + id + '-' + count++ + '\"' + ' data-mce-color=\"' + (color ? color : '') + '\"' + ' role=\"option\"' + ' tabIndex=\"-1\"' + ' style=\"' + (color ? 'background-color: ' + color : '') + '\"' + ' title=\"' + global$3.translate(title) + '\">' + (isNoColor ? '&#215;' : '') + '</div>' + '</td>';\n      };\n      colors = TextColor.mapColors(colorMap);\n      colors.push({\n        text: global$3.translate('No color'),\n        color: 'transparent'\n      });\n      html = '<table class=\"mce-grid mce-grid-border mce-colorbutton-grid\" role=\"list\" cellspacing=\"0\"><tbody>';\n      last = colors.length - 1;\n      for (y = 0; y < rows; y++) {\n        html += '<tr>';\n        for (x = 0; x < cols; x++) {\n          i = y * cols + x;\n          if (i > last) {\n            html += '<td></td>';\n          } else {\n            color = colors[i];\n            html += getColorCellHtml(color.color, color.text);\n          }\n        }\n        html += '</tr>';\n      }\n      if (hasColorPicker) {\n        html += '<tr>' + '<td colspan=\"' + cols + '\" class=\"mce-custom-color-btn\">' + '<div id=\"' + id + '-c\" class=\"mce-widget mce-btn mce-btn-small mce-btn-flat\" ' + 'role=\"button\" tabindex=\"-1\" aria-labelledby=\"' + id + '-c\" style=\"width: 100%\">' + '<button type=\"button\" role=\"presentation\" tabindex=\"-1\">' + global$3.translate('Custom...') + '</button>' + '</div>' + '</td>' + '</tr>';\n        html += '<tr>';\n        for (x = 0; x < cols; x++) {\n          html += getColorCellHtml('', 'Custom color');\n        }\n        html += '</tr>';\n      }\n      html += '</tbody></table>';\n      return html;\n    };\n    var ColorPickerHtml = { getHtml: getHtml };\n\n    var setDivColor = function setDivColor(div, value) {\n      div.style.background = value;\n      div.setAttribute('data-mce-color', value);\n    };\n    var onButtonClick = function (editor) {\n      return function (e) {\n        var ctrl = e.control;\n        if (ctrl._color) {\n          editor.execCommand('mceApplyTextcolor', ctrl.settings.format, ctrl._color);\n        } else {\n          editor.execCommand('mceRemoveTextcolor', ctrl.settings.format);\n        }\n      };\n    };\n    var onPanelClick = function (editor, cols) {\n      return function (e) {\n        var buttonCtrl = this.parent();\n        var value;\n        var currentColor = TextColor.getCurrentColor(editor, buttonCtrl.settings.format);\n        var selectColor = function (value) {\n          editor.execCommand('mceApplyTextcolor', buttonCtrl.settings.format, value);\n          buttonCtrl.hidePanel();\n          buttonCtrl.color(value);\n        };\n        var resetColor = function () {\n          editor.execCommand('mceRemoveTextcolor', buttonCtrl.settings.format);\n          buttonCtrl.hidePanel();\n          buttonCtrl.resetColor();\n        };\n        if (global$1.DOM.getParent(e.target, '.mce-custom-color-btn')) {\n          buttonCtrl.hidePanel();\n          var colorPickerCallback = Settings.getColorPickerCallback(editor);\n          colorPickerCallback.call(editor, function (value) {\n            var tableElm = buttonCtrl.panel.getEl().getElementsByTagName('table')[0];\n            var customColorCells, div, i;\n            customColorCells = global$2.map(tableElm.rows[tableElm.rows.length - 1].childNodes, function (elm) {\n              return elm.firstChild;\n            });\n            for (i = 0; i < customColorCells.length; i++) {\n              div = customColorCells[i];\n              if (!div.getAttribute('data-mce-color')) {\n                break;\n              }\n            }\n            if (i === cols) {\n              for (i = 0; i < cols - 1; i++) {\n                setDivColor(customColorCells[i], customColorCells[i + 1].getAttribute('data-mce-color'));\n              }\n            }\n            setDivColor(div, value);\n            selectColor(value);\n          }, currentColor);\n        }\n        value = e.target.getAttribute('data-mce-color');\n        if (value) {\n          if (this.lastId) {\n            global$1.DOM.get(this.lastId).setAttribute('aria-selected', 'false');\n          }\n          e.target.setAttribute('aria-selected', true);\n          this.lastId = e.target.id;\n          if (value === 'transparent') {\n            resetColor();\n          } else {\n            selectColor(value);\n          }\n        } else if (value !== null) {\n          buttonCtrl.hidePanel();\n        }\n      };\n    };\n    var renderColorPicker = function (editor, foreColor) {\n      return function () {\n        var cols = foreColor ? Settings.getForeColorCols(editor) : Settings.getBackColorCols(editor);\n        var rows = foreColor ? Settings.getForeColorRows(editor) : Settings.getBackColorRows(editor);\n        var colorMap = foreColor ? Settings.getForeColorMap(editor) : Settings.getBackColorMap(editor);\n        var hasColorPicker = Settings.hasColorPicker(editor);\n        return ColorPickerHtml.getHtml(cols, rows, colorMap, hasColorPicker);\n      };\n    };\n    var register$1 = function (editor) {\n      editor.addButton('forecolor', {\n        type: 'colorbutton',\n        tooltip: 'Text color',\n        format: 'forecolor',\n        panel: {\n          role: 'application',\n          ariaRemember: true,\n          html: renderColorPicker(editor, true),\n          onclick: onPanelClick(editor, Settings.getForeColorCols(editor))\n        },\n        onclick: onButtonClick(editor)\n      });\n      editor.addButton('backcolor', {\n        type: 'colorbutton',\n        tooltip: 'Background color',\n        format: 'hilitecolor',\n        panel: {\n          role: 'application',\n          ariaRemember: true,\n          html: renderColorPicker(editor, false),\n          onclick: onPanelClick(editor, Settings.getBackColorCols(editor))\n        },\n        onclick: onButtonClick(editor)\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('textcolor', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"preview\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/preview')\n//   ES2015:\n//     import 'tinymce/plugins/preview'\nrequire('./plugin.js');","// Exports the \"help\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/help')\n//   ES2015:\n//     import 'tinymce/plugins/help'\nrequire('./plugin.js');","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","// Exports the \"visualblocks\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/visualblocks')\n//   ES2015:\n//     import 'tinymce/plugins/visualblocks'\nrequire('./plugin.js');","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nmodule.exports = baseAssignIn;\n","(function () {\nvar template = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var getCreationDateClasses = function (editor) {\n      return editor.getParam('template_cdate_classes', 'cdate');\n    };\n    var getModificationDateClasses = function (editor) {\n      return editor.getParam('template_mdate_classes', 'mdate');\n    };\n    var getSelectedContentClasses = function (editor) {\n      return editor.getParam('template_selected_content_classes', 'selcontent');\n    };\n    var getPreviewReplaceValues = function (editor) {\n      return editor.getParam('template_preview_replace_values');\n    };\n    var getTemplateReplaceValues = function (editor) {\n      return editor.getParam('template_replace_values');\n    };\n    var getTemplates = function (editorSettings) {\n      return editorSettings.templates;\n    };\n    var getCdateFormat = function (editor) {\n      return editor.getParam('template_cdate_format', editor.getLang('template.cdate_format'));\n    };\n    var getMdateFormat = function (editor) {\n      return editor.getParam('template_mdate_format', editor.getLang('template.mdate_format'));\n    };\n    var getDialogWidth = function (editor) {\n      return editor.getParam('template_popup_width', 600);\n    };\n    var getDialogHeight = function (editor) {\n      return Math.min(global$3.DOM.getViewPort().h, editor.getParam('template_popup_height', 500));\n    };\n    var Settings = {\n      getCreationDateClasses: getCreationDateClasses,\n      getModificationDateClasses: getModificationDateClasses,\n      getSelectedContentClasses: getSelectedContentClasses,\n      getPreviewReplaceValues: getPreviewReplaceValues,\n      getTemplateReplaceValues: getTemplateReplaceValues,\n      getTemplates: getTemplates,\n      getCdateFormat: getCdateFormat,\n      getMdateFormat: getMdateFormat,\n      getDialogWidth: getDialogWidth,\n      getDialogHeight: getDialogHeight\n    };\n\n    var addZeros = function (value, len) {\n      value = '' + value;\n      if (value.length < len) {\n        for (var i = 0; i < len - value.length; i++) {\n          value = '0' + value;\n        }\n      }\n      return value;\n    };\n    var getDateTime = function (editor, fmt, date) {\n      var daysShort = 'Sun Mon Tue Wed Thu Fri Sat Sun'.split(' ');\n      var daysLong = 'Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday'.split(' ');\n      var monthsShort = 'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec'.split(' ');\n      var monthsLong = 'January February March April May June July August September October November December'.split(' ');\n      date = date || new Date();\n      fmt = fmt.replace('%D', '%m/%d/%Y');\n      fmt = fmt.replace('%r', '%I:%M:%S %p');\n      fmt = fmt.replace('%Y', '' + date.getFullYear());\n      fmt = fmt.replace('%y', '' + date.getYear());\n      fmt = fmt.replace('%m', addZeros(date.getMonth() + 1, 2));\n      fmt = fmt.replace('%d', addZeros(date.getDate(), 2));\n      fmt = fmt.replace('%H', '' + addZeros(date.getHours(), 2));\n      fmt = fmt.replace('%M', '' + addZeros(date.getMinutes(), 2));\n      fmt = fmt.replace('%S', '' + addZeros(date.getSeconds(), 2));\n      fmt = fmt.replace('%I', '' + ((date.getHours() + 11) % 12 + 1));\n      fmt = fmt.replace('%p', '' + (date.getHours() < 12 ? 'AM' : 'PM'));\n      fmt = fmt.replace('%B', '' + editor.translate(monthsLong[date.getMonth()]));\n      fmt = fmt.replace('%b', '' + editor.translate(monthsShort[date.getMonth()]));\n      fmt = fmt.replace('%A', '' + editor.translate(daysLong[date.getDay()]));\n      fmt = fmt.replace('%a', '' + editor.translate(daysShort[date.getDay()]));\n      fmt = fmt.replace('%%', '%');\n      return fmt;\n    };\n    var DateTimeHelper = { getDateTime: getDateTime };\n\n    var createTemplateList = function (editorSettings, callback) {\n      return function () {\n        var templateList = Settings.getTemplates(editorSettings);\n        if (typeof templateList === 'function') {\n          templateList(callback);\n          return;\n        }\n        if (typeof templateList === 'string') {\n          global$2.send({\n            url: templateList,\n            success: function (text) {\n              callback(JSON.parse(text));\n            }\n          });\n        } else {\n          callback(templateList);\n        }\n      };\n    };\n    var replaceTemplateValues = function (editor, html, templateValues) {\n      global$1.each(templateValues, function (v, k) {\n        if (typeof v === 'function') {\n          v = v(k);\n        }\n        html = html.replace(new RegExp('\\\\{\\\\$' + k + '\\\\}', 'g'), v);\n      });\n      return html;\n    };\n    var replaceVals = function (editor, e) {\n      var dom = editor.dom, vl = Settings.getTemplateReplaceValues(editor);\n      global$1.each(dom.select('*', e), function (e) {\n        global$1.each(vl, function (v, k) {\n          if (dom.hasClass(e, k)) {\n            if (typeof vl[k] === 'function') {\n              vl[k](e);\n            }\n          }\n        });\n      });\n    };\n    var hasClass = function (n, c) {\n      return new RegExp('\\\\b' + c + '\\\\b', 'g').test(n.className);\n    };\n    var insertTemplate = function (editor, ui, html) {\n      var el;\n      var n;\n      var dom = editor.dom;\n      var sel = editor.selection.getContent();\n      html = replaceTemplateValues(editor, html, Settings.getTemplateReplaceValues(editor));\n      el = dom.create('div', null, html);\n      n = dom.select('.mceTmpl', el);\n      if (n && n.length > 0) {\n        el = dom.create('div', null);\n        el.appendChild(n[0].cloneNode(true));\n      }\n      global$1.each(dom.select('*', el), function (n) {\n        if (hasClass(n, Settings.getCreationDateClasses(editor).replace(/\\s+/g, '|'))) {\n          n.innerHTML = DateTimeHelper.getDateTime(editor, Settings.getCdateFormat(editor));\n        }\n        if (hasClass(n, Settings.getModificationDateClasses(editor).replace(/\\s+/g, '|'))) {\n          n.innerHTML = DateTimeHelper.getDateTime(editor, Settings.getMdateFormat(editor));\n        }\n        if (hasClass(n, Settings.getSelectedContentClasses(editor).replace(/\\s+/g, '|'))) {\n          n.innerHTML = sel;\n        }\n      });\n      replaceVals(editor, el);\n      editor.execCommand('mceInsertContent', false, el.innerHTML);\n      editor.addVisual();\n    };\n    var Templates = {\n      createTemplateList: createTemplateList,\n      replaceTemplateValues: replaceTemplateValues,\n      replaceVals: replaceVals,\n      insertTemplate: insertTemplate\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceInsertTemplate', curry(Templates.insertTemplate, editor));\n    };\n    var Commands = { register: register };\n\n    var setup = function (editor) {\n      editor.on('PreProcess', function (o) {\n        var dom = editor.dom, dateFormat = Settings.getMdateFormat(editor);\n        global$1.each(dom.select('div', o.node), function (e) {\n          if (dom.hasClass(e, 'mceTmpl')) {\n            global$1.each(dom.select('*', e), function (e) {\n              if (dom.hasClass(e, editor.getParam('template_mdate_classes', 'mdate').replace(/\\s+/g, '|'))) {\n                e.innerHTML = DateTimeHelper.getDateTime(editor, dateFormat);\n              }\n            });\n            Templates.replaceVals(editor, e);\n          }\n        });\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var insertIframeHtml = function (editor, win, html) {\n      if (html.indexOf('<html>') === -1) {\n        var contentCssLinks_1 = '';\n        global$1.each(editor.contentCSS, function (url) {\n          contentCssLinks_1 += '<link type=\"text/css\" rel=\"stylesheet\" href=\"' + editor.documentBaseURI.toAbsolute(url) + '\">';\n        });\n        var bodyClass = editor.settings.body_class || '';\n        if (bodyClass.indexOf('=') !== -1) {\n          bodyClass = editor.getParam('body_class', '', 'hash');\n          bodyClass = bodyClass[editor.id] || '';\n        }\n        html = '<!DOCTYPE html>' + '<html>' + '<head>' + contentCssLinks_1 + '</head>' + '<body class=\"' + bodyClass + '\">' + html + '</body>' + '</html>';\n      }\n      html = Templates.replaceTemplateValues(editor, html, Settings.getPreviewReplaceValues(editor));\n      var doc = win.find('iframe')[0].getEl().contentWindow.document;\n      doc.open();\n      doc.write(html);\n      doc.close();\n    };\n    var open = function (editor, templateList) {\n      var win;\n      var values = [];\n      var templateHtml;\n      if (!templateList || templateList.length === 0) {\n        var message = editor.translate('No templates defined.');\n        editor.notificationManager.open({\n          text: message,\n          type: 'info'\n        });\n        return;\n      }\n      global$1.each(templateList, function (template) {\n        values.push({\n          selected: !values.length,\n          text: template.title,\n          value: {\n            url: template.url,\n            content: template.content,\n            description: template.description\n          }\n        });\n      });\n      var onSelectTemplate = function (e) {\n        var value = e.control.value();\n        if (value.url) {\n          global$2.send({\n            url: value.url,\n            success: function (html) {\n              templateHtml = html;\n              insertIframeHtml(editor, win, templateHtml);\n            }\n          });\n        } else {\n          templateHtml = value.content;\n          insertIframeHtml(editor, win, templateHtml);\n        }\n        win.find('#description')[0].text(e.control.value().description);\n      };\n      win = editor.windowManager.open({\n        title: 'Insert template',\n        layout: 'flex',\n        direction: 'column',\n        align: 'stretch',\n        padding: 15,\n        spacing: 10,\n        items: [\n          {\n            type: 'form',\n            flex: 0,\n            padding: 0,\n            items: [{\n                type: 'container',\n                label: 'Templates',\n                items: {\n                  type: 'listbox',\n                  label: 'Templates',\n                  name: 'template',\n                  values: values,\n                  onselect: onSelectTemplate\n                }\n              }]\n          },\n          {\n            type: 'label',\n            name: 'description',\n            label: 'Description',\n            text: '\\xA0'\n          },\n          {\n            type: 'iframe',\n            flex: 1,\n            border: 1\n          }\n        ],\n        onsubmit: function () {\n          Templates.insertTemplate(editor, false, templateHtml);\n        },\n        minWidth: Settings.getDialogWidth(editor),\n        minHeight: Settings.getDialogHeight(editor)\n      });\n      win.find('listbox')[0].fire('select');\n    };\n    var Dialog = { open: open };\n\n    var showDialog = function (editor) {\n      return function (templates) {\n        Dialog.open(editor, templates);\n      };\n    };\n    var register$1 = function (editor) {\n      editor.addButton('template', {\n        title: 'Insert template',\n        onclick: Templates.createTemplateList(editor.settings, showDialog(editor))\n      });\n      editor.addMenuItem('template', {\n        text: 'Template',\n        onclick: Templates.createTemplateList(editor.settings, showDialog(editor)),\n        icon: 'template',\n        context: 'insert'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('template', function (editor) {\n      Buttons.register(editor);\n      Commands.register(editor);\n      FilterContent.setup(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","var copyObject = require('./_copyObject'),\n    getSymbolsIn = require('./_getSymbolsIn');\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nmodule.exports = copySymbolsIn;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","(function () {\nvar anchor = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var isValidId = function (id) {\n      return /^[A-Za-z][A-Za-z0-9\\-:._]*$/.test(id);\n    };\n    var getId = function (editor) {\n      var selectedNode = editor.selection.getNode();\n      var isAnchor = selectedNode.tagName === 'A' && editor.dom.getAttrib(selectedNode, 'href') === '';\n      return isAnchor ? selectedNode.id || selectedNode.name : '';\n    };\n    var insert = function (editor, id) {\n      var selectedNode = editor.selection.getNode();\n      var isAnchor = selectedNode.tagName === 'A' && editor.dom.getAttrib(selectedNode, 'href') === '';\n      if (isAnchor) {\n        selectedNode.removeAttribute('name');\n        selectedNode.id = id;\n        editor.undoManager.add();\n      } else {\n        editor.focus();\n        editor.selection.collapse(true);\n        editor.execCommand('mceInsertContent', false, editor.dom.createHTML('a', { id: id }));\n      }\n    };\n    var Anchor = {\n      isValidId: isValidId,\n      getId: getId,\n      insert: insert\n    };\n\n    var insertAnchor = function (editor, newId) {\n      if (!Anchor.isValidId(newId)) {\n        editor.windowManager.alert('Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.');\n        return true;\n      } else {\n        Anchor.insert(editor, newId);\n        return false;\n      }\n    };\n    var open = function (editor) {\n      var currentId = Anchor.getId(editor);\n      editor.windowManager.open({\n        title: 'Anchor',\n        body: {\n          type: 'textbox',\n          name: 'id',\n          size: 40,\n          label: 'Id',\n          value: currentId\n        },\n        onsubmit: function (e) {\n          var newId = e.data.id;\n          if (insertAnchor(editor, newId)) {\n            e.preventDefault();\n          }\n        }\n      });\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor) {\n      editor.addCommand('mceAnchor', function () {\n        Dialog.open(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var isAnchorNode = function (node) {\n      return !node.attr('href') && (node.attr('id') || node.attr('name')) && !node.firstChild;\n    };\n    var setContentEditable = function (state) {\n      return function (nodes) {\n        for (var i = 0; i < nodes.length; i++) {\n          if (isAnchorNode(nodes[i])) {\n            nodes[i].attr('contenteditable', state);\n          }\n        }\n      };\n    };\n    var setup = function (editor) {\n      editor.on('PreInit', function () {\n        editor.parser.addNodeFilter('a', setContentEditable('false'));\n        editor.serializer.addNodeFilter('a', setContentEditable(null));\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var register$1 = function (editor) {\n      editor.addButton('anchor', {\n        icon: 'anchor',\n        tooltip: 'Anchor',\n        cmd: 'mceAnchor',\n        stateSelector: 'a:not([href])'\n      });\n      editor.addMenuItem('anchor', {\n        icon: 'anchor',\n        text: 'Anchor',\n        context: 'insert',\n        cmd: 'mceAnchor'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('anchor', function (editor) {\n      FilterContent.setup(editor);\n      Commands.register(editor);\n      Buttons.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar charmap = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var fireInsertCustomChar = function (editor, chr) {\n      return editor.fire('insertCustomChar', { chr: chr });\n    };\n    var Events = { fireInsertCustomChar: fireInsertCustomChar };\n\n    var insertChar = function (editor, chr) {\n      var evtChr = Events.fireInsertCustomChar(editor, chr).chr;\n      editor.execCommand('mceInsertContent', false, evtChr);\n    };\n    var Actions = { insertChar: insertChar };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getCharMap = function (editor) {\n      return editor.settings.charmap;\n    };\n    var getCharMapAppend = function (editor) {\n      return editor.settings.charmap_append;\n    };\n    var Settings = {\n      getCharMap: getCharMap,\n      getCharMapAppend: getCharMapAppend\n    };\n\n    var isArray = global$1.isArray;\n    var getDefaultCharMap = function () {\n      return [\n        [\n          '160',\n          'no-break space'\n        ],\n        [\n          '173',\n          'soft hyphen'\n        ],\n        [\n          '34',\n          'quotation mark'\n        ],\n        [\n          '162',\n          'cent sign'\n        ],\n        [\n          '8364',\n          'euro sign'\n        ],\n        [\n          '163',\n          'pound sign'\n        ],\n        [\n          '165',\n          'yen sign'\n        ],\n        [\n          '169',\n          'copyright sign'\n        ],\n        [\n          '174',\n          'registered sign'\n        ],\n        [\n          '8482',\n          'trade mark sign'\n        ],\n        [\n          '8240',\n          'per mille sign'\n        ],\n        [\n          '181',\n          'micro sign'\n        ],\n        [\n          '183',\n          'middle dot'\n        ],\n        [\n          '8226',\n          'bullet'\n        ],\n        [\n          '8230',\n          'three dot leader'\n        ],\n        [\n          '8242',\n          'minutes / feet'\n        ],\n        [\n          '8243',\n          'seconds / inches'\n        ],\n        [\n          '167',\n          'section sign'\n        ],\n        [\n          '182',\n          'paragraph sign'\n        ],\n        [\n          '223',\n          'sharp s / ess-zed'\n        ],\n        [\n          '8249',\n          'single left-pointing angle quotation mark'\n        ],\n        [\n          '8250',\n          'single right-pointing angle quotation mark'\n        ],\n        [\n          '171',\n          'left pointing guillemet'\n        ],\n        [\n          '187',\n          'right pointing guillemet'\n        ],\n        [\n          '8216',\n          'left single quotation mark'\n        ],\n        [\n          '8217',\n          'right single quotation mark'\n        ],\n        [\n          '8220',\n          'left double quotation mark'\n        ],\n        [\n          '8221',\n          'right double quotation mark'\n        ],\n        [\n          '8218',\n          'single low-9 quotation mark'\n        ],\n        [\n          '8222',\n          'double low-9 quotation mark'\n        ],\n        [\n          '60',\n          'less-than sign'\n        ],\n        [\n          '62',\n          'greater-than sign'\n        ],\n        [\n          '8804',\n          'less-than or equal to'\n        ],\n        [\n          '8805',\n          'greater-than or equal to'\n        ],\n        [\n          '8211',\n          'en dash'\n        ],\n        [\n          '8212',\n          'em dash'\n        ],\n        [\n          '175',\n          'macron'\n        ],\n        [\n          '8254',\n          'overline'\n        ],\n        [\n          '164',\n          'currency sign'\n        ],\n        [\n          '166',\n          'broken bar'\n        ],\n        [\n          '168',\n          'diaeresis'\n        ],\n        [\n          '161',\n          'inverted exclamation mark'\n        ],\n        [\n          '191',\n          'turned question mark'\n        ],\n        [\n          '710',\n          'circumflex accent'\n        ],\n        [\n          '732',\n          'small tilde'\n        ],\n        [\n          '176',\n          'degree sign'\n        ],\n        [\n          '8722',\n          'minus sign'\n        ],\n        [\n          '177',\n          'plus-minus sign'\n        ],\n        [\n          '247',\n          'division sign'\n        ],\n        [\n          '8260',\n          'fraction slash'\n        ],\n        [\n          '215',\n          'multiplication sign'\n        ],\n        [\n          '185',\n          'superscript one'\n        ],\n        [\n          '178',\n          'superscript two'\n        ],\n        [\n          '179',\n          'superscript three'\n        ],\n        [\n          '188',\n          'fraction one quarter'\n        ],\n        [\n          '189',\n          'fraction one half'\n        ],\n        [\n          '190',\n          'fraction three quarters'\n        ],\n        [\n          '402',\n          'function / florin'\n        ],\n        [\n          '8747',\n          'integral'\n        ],\n        [\n          '8721',\n          'n-ary sumation'\n        ],\n        [\n          '8734',\n          'infinity'\n        ],\n        [\n          '8730',\n          'square root'\n        ],\n        [\n          '8764',\n          'similar to'\n        ],\n        [\n          '8773',\n          'approximately equal to'\n        ],\n        [\n          '8776',\n          'almost equal to'\n        ],\n        [\n          '8800',\n          'not equal to'\n        ],\n        [\n          '8801',\n          'identical to'\n        ],\n        [\n          '8712',\n          'element of'\n        ],\n        [\n          '8713',\n          'not an element of'\n        ],\n        [\n          '8715',\n          'contains as member'\n        ],\n        [\n          '8719',\n          'n-ary product'\n        ],\n        [\n          '8743',\n          'logical and'\n        ],\n        [\n          '8744',\n          'logical or'\n        ],\n        [\n          '172',\n          'not sign'\n        ],\n        [\n          '8745',\n          'intersection'\n        ],\n        [\n          '8746',\n          'union'\n        ],\n        [\n          '8706',\n          'partial differential'\n        ],\n        [\n          '8704',\n          'for all'\n        ],\n        [\n          '8707',\n          'there exists'\n        ],\n        [\n          '8709',\n          'diameter'\n        ],\n        [\n          '8711',\n          'backward difference'\n        ],\n        [\n          '8727',\n          'asterisk operator'\n        ],\n        [\n          '8733',\n          'proportional to'\n        ],\n        [\n          '8736',\n          'angle'\n        ],\n        [\n          '180',\n          'acute accent'\n        ],\n        [\n          '184',\n          'cedilla'\n        ],\n        [\n          '170',\n          'feminine ordinal indicator'\n        ],\n        [\n          '186',\n          'masculine ordinal indicator'\n        ],\n        [\n          '8224',\n          'dagger'\n        ],\n        [\n          '8225',\n          'double dagger'\n        ],\n        [\n          '192',\n          'A - grave'\n        ],\n        [\n          '193',\n          'A - acute'\n        ],\n        [\n          '194',\n          'A - circumflex'\n        ],\n        [\n          '195',\n          'A - tilde'\n        ],\n        [\n          '196',\n          'A - diaeresis'\n        ],\n        [\n          '197',\n          'A - ring above'\n        ],\n        [\n          '256',\n          'A - macron'\n        ],\n        [\n          '198',\n          'ligature AE'\n        ],\n        [\n          '199',\n          'C - cedilla'\n        ],\n        [\n          '200',\n          'E - grave'\n        ],\n        [\n          '201',\n          'E - acute'\n        ],\n        [\n          '202',\n          'E - circumflex'\n        ],\n        [\n          '203',\n          'E - diaeresis'\n        ],\n        [\n          '274',\n          'E - macron'\n        ],\n        [\n          '204',\n          'I - grave'\n        ],\n        [\n          '205',\n          'I - acute'\n        ],\n        [\n          '206',\n          'I - circumflex'\n        ],\n        [\n          '207',\n          'I - diaeresis'\n        ],\n        [\n          '298',\n          'I - macron'\n        ],\n        [\n          '208',\n          'ETH'\n        ],\n        [\n          '209',\n          'N - tilde'\n        ],\n        [\n          '210',\n          'O - grave'\n        ],\n        [\n          '211',\n          'O - acute'\n        ],\n        [\n          '212',\n          'O - circumflex'\n        ],\n        [\n          '213',\n          'O - tilde'\n        ],\n        [\n          '214',\n          'O - diaeresis'\n        ],\n        [\n          '216',\n          'O - slash'\n        ],\n        [\n          '332',\n          'O - macron'\n        ],\n        [\n          '338',\n          'ligature OE'\n        ],\n        [\n          '352',\n          'S - caron'\n        ],\n        [\n          '217',\n          'U - grave'\n        ],\n        [\n          '218',\n          'U - acute'\n        ],\n        [\n          '219',\n          'U - circumflex'\n        ],\n        [\n          '220',\n          'U - diaeresis'\n        ],\n        [\n          '362',\n          'U - macron'\n        ],\n        [\n          '221',\n          'Y - acute'\n        ],\n        [\n          '376',\n          'Y - diaeresis'\n        ],\n        [\n          '562',\n          'Y - macron'\n        ],\n        [\n          '222',\n          'THORN'\n        ],\n        [\n          '224',\n          'a - grave'\n        ],\n        [\n          '225',\n          'a - acute'\n        ],\n        [\n          '226',\n          'a - circumflex'\n        ],\n        [\n          '227',\n          'a - tilde'\n        ],\n        [\n          '228',\n          'a - diaeresis'\n        ],\n        [\n          '229',\n          'a - ring above'\n        ],\n        [\n          '257',\n          'a - macron'\n        ],\n        [\n          '230',\n          'ligature ae'\n        ],\n        [\n          '231',\n          'c - cedilla'\n        ],\n        [\n          '232',\n          'e - grave'\n        ],\n        [\n          '233',\n          'e - acute'\n        ],\n        [\n          '234',\n          'e - circumflex'\n        ],\n        [\n          '235',\n          'e - diaeresis'\n        ],\n        [\n          '275',\n          'e - macron'\n        ],\n        [\n          '236',\n          'i - grave'\n        ],\n        [\n          '237',\n          'i - acute'\n        ],\n        [\n          '238',\n          'i - circumflex'\n        ],\n        [\n          '239',\n          'i - diaeresis'\n        ],\n        [\n          '299',\n          'i - macron'\n        ],\n        [\n          '240',\n          'eth'\n        ],\n        [\n          '241',\n          'n - tilde'\n        ],\n        [\n          '242',\n          'o - grave'\n        ],\n        [\n          '243',\n          'o - acute'\n        ],\n        [\n          '244',\n          'o - circumflex'\n        ],\n        [\n          '245',\n          'o - tilde'\n        ],\n        [\n          '246',\n          'o - diaeresis'\n        ],\n        [\n          '248',\n          'o slash'\n        ],\n        [\n          '333',\n          'o macron'\n        ],\n        [\n          '339',\n          'ligature oe'\n        ],\n        [\n          '353',\n          's - caron'\n        ],\n        [\n          '249',\n          'u - grave'\n        ],\n        [\n          '250',\n          'u - acute'\n        ],\n        [\n          '251',\n          'u - circumflex'\n        ],\n        [\n          '252',\n          'u - diaeresis'\n        ],\n        [\n          '363',\n          'u - macron'\n        ],\n        [\n          '253',\n          'y - acute'\n        ],\n        [\n          '254',\n          'thorn'\n        ],\n        [\n          '255',\n          'y - diaeresis'\n        ],\n        [\n          '563',\n          'y - macron'\n        ],\n        [\n          '913',\n          'Alpha'\n        ],\n        [\n          '914',\n          'Beta'\n        ],\n        [\n          '915',\n          'Gamma'\n        ],\n        [\n          '916',\n          'Delta'\n        ],\n        [\n          '917',\n          'Epsilon'\n        ],\n        [\n          '918',\n          'Zeta'\n        ],\n        [\n          '919',\n          'Eta'\n        ],\n        [\n          '920',\n          'Theta'\n        ],\n        [\n          '921',\n          'Iota'\n        ],\n        [\n          '922',\n          'Kappa'\n        ],\n        [\n          '923',\n          'Lambda'\n        ],\n        [\n          '924',\n          'Mu'\n        ],\n        [\n          '925',\n          'Nu'\n        ],\n        [\n          '926',\n          'Xi'\n        ],\n        [\n          '927',\n          'Omicron'\n        ],\n        [\n          '928',\n          'Pi'\n        ],\n        [\n          '929',\n          'Rho'\n        ],\n        [\n          '931',\n          'Sigma'\n        ],\n        [\n          '932',\n          'Tau'\n        ],\n        [\n          '933',\n          'Upsilon'\n        ],\n        [\n          '934',\n          'Phi'\n        ],\n        [\n          '935',\n          'Chi'\n        ],\n        [\n          '936',\n          'Psi'\n        ],\n        [\n          '937',\n          'Omega'\n        ],\n        [\n          '945',\n          'alpha'\n        ],\n        [\n          '946',\n          'beta'\n        ],\n        [\n          '947',\n          'gamma'\n        ],\n        [\n          '948',\n          'delta'\n        ],\n        [\n          '949',\n          'epsilon'\n        ],\n        [\n          '950',\n          'zeta'\n        ],\n        [\n          '951',\n          'eta'\n        ],\n        [\n          '952',\n          'theta'\n        ],\n        [\n          '953',\n          'iota'\n        ],\n        [\n          '954',\n          'kappa'\n        ],\n        [\n          '955',\n          'lambda'\n        ],\n        [\n          '956',\n          'mu'\n        ],\n        [\n          '957',\n          'nu'\n        ],\n        [\n          '958',\n          'xi'\n        ],\n        [\n          '959',\n          'omicron'\n        ],\n        [\n          '960',\n          'pi'\n        ],\n        [\n          '961',\n          'rho'\n        ],\n        [\n          '962',\n          'final sigma'\n        ],\n        [\n          '963',\n          'sigma'\n        ],\n        [\n          '964',\n          'tau'\n        ],\n        [\n          '965',\n          'upsilon'\n        ],\n        [\n          '966',\n          'phi'\n        ],\n        [\n          '967',\n          'chi'\n        ],\n        [\n          '968',\n          'psi'\n        ],\n        [\n          '969',\n          'omega'\n        ],\n        [\n          '8501',\n          'alef symbol'\n        ],\n        [\n          '982',\n          'pi symbol'\n        ],\n        [\n          '8476',\n          'real part symbol'\n        ],\n        [\n          '978',\n          'upsilon - hook symbol'\n        ],\n        [\n          '8472',\n          'Weierstrass p'\n        ],\n        [\n          '8465',\n          'imaginary part'\n        ],\n        [\n          '8592',\n          'leftwards arrow'\n        ],\n        [\n          '8593',\n          'upwards arrow'\n        ],\n        [\n          '8594',\n          'rightwards arrow'\n        ],\n        [\n          '8595',\n          'downwards arrow'\n        ],\n        [\n          '8596',\n          'left right arrow'\n        ],\n        [\n          '8629',\n          'carriage return'\n        ],\n        [\n          '8656',\n          'leftwards double arrow'\n        ],\n        [\n          '8657',\n          'upwards double arrow'\n        ],\n        [\n          '8658',\n          'rightwards double arrow'\n        ],\n        [\n          '8659',\n          'downwards double arrow'\n        ],\n        [\n          '8660',\n          'left right double arrow'\n        ],\n        [\n          '8756',\n          'therefore'\n        ],\n        [\n          '8834',\n          'subset of'\n        ],\n        [\n          '8835',\n          'superset of'\n        ],\n        [\n          '8836',\n          'not a subset of'\n        ],\n        [\n          '8838',\n          'subset of or equal to'\n        ],\n        [\n          '8839',\n          'superset of or equal to'\n        ],\n        [\n          '8853',\n          'circled plus'\n        ],\n        [\n          '8855',\n          'circled times'\n        ],\n        [\n          '8869',\n          'perpendicular'\n        ],\n        [\n          '8901',\n          'dot operator'\n        ],\n        [\n          '8968',\n          'left ceiling'\n        ],\n        [\n          '8969',\n          'right ceiling'\n        ],\n        [\n          '8970',\n          'left floor'\n        ],\n        [\n          '8971',\n          'right floor'\n        ],\n        [\n          '9001',\n          'left-pointing angle bracket'\n        ],\n        [\n          '9002',\n          'right-pointing angle bracket'\n        ],\n        [\n          '9674',\n          'lozenge'\n        ],\n        [\n          '9824',\n          'black spade suit'\n        ],\n        [\n          '9827',\n          'black club suit'\n        ],\n        [\n          '9829',\n          'black heart suit'\n        ],\n        [\n          '9830',\n          'black diamond suit'\n        ],\n        [\n          '8194',\n          'en space'\n        ],\n        [\n          '8195',\n          'em space'\n        ],\n        [\n          '8201',\n          'thin space'\n        ],\n        [\n          '8204',\n          'zero width non-joiner'\n        ],\n        [\n          '8205',\n          'zero width joiner'\n        ],\n        [\n          '8206',\n          'left-to-right mark'\n        ],\n        [\n          '8207',\n          'right-to-left mark'\n        ]\n      ];\n    };\n    var charmapFilter = function (charmap) {\n      return global$1.grep(charmap, function (item) {\n        return isArray(item) && item.length === 2;\n      });\n    };\n    var getCharsFromSetting = function (settingValue) {\n      if (isArray(settingValue)) {\n        return [].concat(charmapFilter(settingValue));\n      }\n      if (typeof settingValue === 'function') {\n        return settingValue();\n      }\n      return [];\n    };\n    var extendCharMap = function (editor, charmap) {\n      var userCharMap = Settings.getCharMap(editor);\n      if (userCharMap) {\n        charmap = getCharsFromSetting(userCharMap);\n      }\n      var userCharMapAppend = Settings.getCharMapAppend(editor);\n      if (userCharMapAppend) {\n        return [].concat(charmap).concat(getCharsFromSetting(userCharMapAppend));\n      }\n      return charmap;\n    };\n    var getCharMap$1 = function (editor) {\n      return extendCharMap(editor, getDefaultCharMap());\n    };\n    var CharMap = { getCharMap: getCharMap$1 };\n\n    var get = function (editor) {\n      var getCharMap = function () {\n        return CharMap.getCharMap(editor);\n      };\n      var insertChar = function (chr) {\n        Actions.insertChar(editor, chr);\n      };\n      return {\n        getCharMap: getCharMap,\n        insertChar: insertChar\n      };\n    };\n    var Api = { get: get };\n\n    var getHtml = function (charmap) {\n      var gridHtml, x, y;\n      var width = Math.min(charmap.length, 25);\n      var height = Math.ceil(charmap.length / width);\n      gridHtml = '<table role=\"presentation\" cellspacing=\"0\" class=\"mce-charmap\"><tbody>';\n      for (y = 0; y < height; y++) {\n        gridHtml += '<tr>';\n        for (x = 0; x < width; x++) {\n          var index = y * width + x;\n          if (index < charmap.length) {\n            var chr = charmap[index];\n            var charCode = parseInt(chr[0], 10);\n            var chrText = chr ? String.fromCharCode(charCode) : '&nbsp;';\n            gridHtml += '<td title=\"' + chr[1] + '\">' + '<div tabindex=\"-1\" title=\"' + chr[1] + '\" role=\"button\" data-chr=\"' + charCode + '\">' + chrText + '</div>' + '</td>';\n          } else {\n            gridHtml += '<td />';\n          }\n        }\n        gridHtml += '</tr>';\n      }\n      gridHtml += '</tbody></table>';\n      return gridHtml;\n    };\n    var GridHtml = { getHtml: getHtml };\n\n    var getParentTd = function (elm) {\n      while (elm) {\n        if (elm.nodeName === 'TD') {\n          return elm;\n        }\n        elm = elm.parentNode;\n      }\n    };\n    var open = function (editor) {\n      var win;\n      var charMapPanel = {\n        type: 'container',\n        html: GridHtml.getHtml(CharMap.getCharMap(editor)),\n        onclick: function (e) {\n          var target = e.target;\n          if (/^(TD|DIV)$/.test(target.nodeName)) {\n            var charDiv = getParentTd(target).firstChild;\n            if (charDiv && charDiv.hasAttribute('data-chr')) {\n              var charCodeString = charDiv.getAttribute('data-chr');\n              var charCode = parseInt(charCodeString, 10);\n              if (!isNaN(charCode)) {\n                Actions.insertChar(editor, String.fromCharCode(charCode));\n              }\n              if (!e.ctrlKey) {\n                win.close();\n              }\n            }\n          }\n        },\n        onmouseover: function (e) {\n          var td = getParentTd(e.target);\n          if (td && td.firstChild) {\n            win.find('#preview').text(td.firstChild.firstChild.data);\n            win.find('#previewTitle').text(td.title);\n          } else {\n            win.find('#preview').text(' ');\n            win.find('#previewTitle').text(' ');\n          }\n        }\n      };\n      win = editor.windowManager.open({\n        title: 'Special character',\n        spacing: 10,\n        padding: 10,\n        items: [\n          charMapPanel,\n          {\n            type: 'container',\n            layout: 'flex',\n            direction: 'column',\n            align: 'center',\n            spacing: 5,\n            minWidth: 160,\n            minHeight: 160,\n            items: [\n              {\n                type: 'label',\n                name: 'preview',\n                text: ' ',\n                style: 'font-size: 40px; text-align: center',\n                border: 1,\n                minWidth: 140,\n                minHeight: 80\n              },\n              {\n                type: 'spacer',\n                minHeight: 20\n              },\n              {\n                type: 'label',\n                name: 'previewTitle',\n                text: ' ',\n                style: 'white-space: pre-wrap;',\n                border: 1,\n                minWidth: 140\n              }\n            ]\n          }\n        ],\n        buttons: [{\n            text: 'Close',\n            onclick: function () {\n              win.close();\n            }\n          }]\n      });\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor) {\n      editor.addCommand('mceShowCharmap', function () {\n        Dialog.open(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor) {\n      editor.addButton('charmap', {\n        icon: 'charmap',\n        tooltip: 'Special character',\n        cmd: 'mceShowCharmap'\n      });\n      editor.addMenuItem('charmap', {\n        icon: 'charmap',\n        text: 'Special character',\n        cmd: 'mceShowCharmap',\n        context: 'insert'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('charmap', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n      return Api.get(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nmodule.exports = baseIsMap;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","(function () {\nvar lists = (function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.dom.BookmarkManager');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var isTextNode = function (node) {\n      return node && node.nodeType === 3;\n    };\n    var isListNode = function (node) {\n      return node && /^(OL|UL|DL)$/.test(node.nodeName);\n    };\n    var isOlUlNode = function (node) {\n      return node && /^(OL|UL)$/.test(node.nodeName);\n    };\n    var isListItemNode = function (node) {\n      return node && /^(LI|DT|DD)$/.test(node.nodeName);\n    };\n    var isDlItemNode = function (node) {\n      return node && /^(DT|DD)$/.test(node.nodeName);\n    };\n    var isTableCellNode = function (node) {\n      return node && /^(TH|TD)$/.test(node.nodeName);\n    };\n    var isBr = function (node) {\n      return node && node.nodeName === 'BR';\n    };\n    var isFirstChild = function (node) {\n      return node.parentNode.firstChild === node;\n    };\n    var isLastChild = function (node) {\n      return node.parentNode.lastChild === node;\n    };\n    var isTextBlock = function (editor, node) {\n      return node && !!editor.schema.getTextBlockElements()[node.nodeName];\n    };\n    var isBlock = function (node, blockElements) {\n      return node && node.nodeName in blockElements;\n    };\n    var isBogusBr = function (dom, node) {\n      if (!isBr(node)) {\n        return false;\n      }\n      if (dom.isBlock(node.nextSibling) && !isBr(node.previousSibling)) {\n        return true;\n      }\n      return false;\n    };\n    var isEmpty = function (dom, elm, keepBookmarks) {\n      var empty = dom.isEmpty(elm);\n      if (keepBookmarks && dom.select('span[data-mce-type=bookmark]', elm).length > 0) {\n        return false;\n      }\n      return empty;\n    };\n    var isChildOfBody = function (dom, elm) {\n      return dom.isChildOf(elm, dom.getRoot());\n    };\n    var NodeType = {\n      isTextNode: isTextNode,\n      isListNode: isListNode,\n      isOlUlNode: isOlUlNode,\n      isDlItemNode: isDlItemNode,\n      isListItemNode: isListItemNode,\n      isTableCellNode: isTableCellNode,\n      isBr: isBr,\n      isFirstChild: isFirstChild,\n      isLastChild: isLastChild,\n      isTextBlock: isTextBlock,\n      isBlock: isBlock,\n      isBogusBr: isBogusBr,\n      isEmpty: isEmpty,\n      isChildOfBody: isChildOfBody\n    };\n\n    var getNormalizedPoint = function (container, offset) {\n      if (NodeType.isTextNode(container)) {\n        return {\n          container: container,\n          offset: offset\n        };\n      }\n      var node = global$1.getNode(container, offset);\n      if (NodeType.isTextNode(node)) {\n        return {\n          container: node,\n          offset: offset >= container.childNodes.length ? node.data.length : 0\n        };\n      } else if (node.previousSibling && NodeType.isTextNode(node.previousSibling)) {\n        return {\n          container: node.previousSibling,\n          offset: node.previousSibling.data.length\n        };\n      } else if (node.nextSibling && NodeType.isTextNode(node.nextSibling)) {\n        return {\n          container: node.nextSibling,\n          offset: 0\n        };\n      }\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n    var normalizeRange = function (rng) {\n      var outRng = rng.cloneRange();\n      var rangeStart = getNormalizedPoint(rng.startContainer, rng.startOffset);\n      outRng.setStart(rangeStart.container, rangeStart.offset);\n      var rangeEnd = getNormalizedPoint(rng.endContainer, rng.endOffset);\n      outRng.setEnd(rangeEnd.container, rangeEnd.offset);\n      return outRng;\n    };\n    var Range = {\n      getNormalizedPoint: getNormalizedPoint,\n      normalizeRange: normalizeRange\n    };\n\n    var DOM = global$6.DOM;\n    var createBookmark = function (rng) {\n      var bookmark = {};\n      var setupEndPoint = function (start) {\n        var offsetNode, container, offset;\n        container = rng[start ? 'startContainer' : 'endContainer'];\n        offset = rng[start ? 'startOffset' : 'endOffset'];\n        if (container.nodeType === 1) {\n          offsetNode = DOM.create('span', { 'data-mce-type': 'bookmark' });\n          if (container.hasChildNodes()) {\n            offset = Math.min(offset, container.childNodes.length - 1);\n            if (start) {\n              container.insertBefore(offsetNode, container.childNodes[offset]);\n            } else {\n              DOM.insertAfter(offsetNode, container.childNodes[offset]);\n            }\n          } else {\n            container.appendChild(offsetNode);\n          }\n          container = offsetNode;\n          offset = 0;\n        }\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      };\n      setupEndPoint(true);\n      if (!rng.collapsed) {\n        setupEndPoint();\n      }\n      return bookmark;\n    };\n    var resolveBookmark = function (bookmark) {\n      function restoreEndPoint(start) {\n        var container, offset, node;\n        var nodeIndex = function (container) {\n          var node = container.parentNode.firstChild, idx = 0;\n          while (node) {\n            if (node === container) {\n              return idx;\n            }\n            if (node.nodeType !== 1 || node.getAttribute('data-mce-type') !== 'bookmark') {\n              idx++;\n            }\n            node = node.nextSibling;\n          }\n          return -1;\n        };\n        container = node = bookmark[start ? 'startContainer' : 'endContainer'];\n        offset = bookmark[start ? 'startOffset' : 'endOffset'];\n        if (!container) {\n          return;\n        }\n        if (container.nodeType === 1) {\n          offset = nodeIndex(container);\n          container = container.parentNode;\n          DOM.remove(node);\n          if (!container.hasChildNodes() && DOM.isBlock(container)) {\n            container.appendChild(DOM.create('br'));\n          }\n        }\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      }\n      restoreEndPoint(true);\n      restoreEndPoint();\n      var rng = DOM.createRng();\n      rng.setStart(bookmark.startContainer, bookmark.startOffset);\n      if (bookmark.endContainer) {\n        rng.setEnd(bookmark.endContainer, bookmark.endOffset);\n      }\n      return Range.normalizeRange(rng);\n    };\n    var Bookmark = {\n      createBookmark: createBookmark,\n      resolveBookmark: resolveBookmark\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var not = function (f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return !f.apply(null, args);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativePush = Array.prototype.push;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var groupBy = function (xs, f) {\n      if (xs.length === 0) {\n        return [];\n      } else {\n        var wasType = f(xs[0]);\n        var r = [];\n        var group = [];\n        for (var i = 0, len = xs.length; i < len; i++) {\n          var x = xs[i];\n          var type = f(x);\n          if (type !== wasType) {\n            r.push(group);\n            group = [];\n          }\n          wasType = type;\n          group.push(x);\n        }\n        if (group.length !== 0) {\n          r.push(group);\n        }\n        return r;\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var head = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[0]);\n    };\n    var last = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n    var Global$1 = { getOrDie: getOrDie };\n\n    var htmlElement = function (scope) {\n      return Global$1.getOrDie('HTMLElement', scope);\n    };\n    var isPrototypeOf = function (x) {\n      var scope = resolve('ownerDocument.defaultView', x);\n      return htmlElement(scope).prototype.isPrototypeOf(x);\n    };\n    var HTMLElement = { isPrototypeOf: isPrototypeOf };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var getParentList = function (editor) {\n      var selectionStart = editor.selection.getStart(true);\n      return editor.dom.getParent(selectionStart, 'OL,UL,DL', getClosestListRootElm(editor, selectionStart));\n    };\n    var isParentListSelected = function (parentList, selectedBlocks) {\n      return parentList && selectedBlocks.length === 1 && selectedBlocks[0] === parentList;\n    };\n    var findSubLists = function (parentList) {\n      return global$5.grep(parentList.querySelectorAll('ol,ul,dl'), function (elm) {\n        return NodeType.isListNode(elm);\n      });\n    };\n    var getSelectedSubLists = function (editor) {\n      var parentList = getParentList(editor);\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n      if (isParentListSelected(parentList, selectedBlocks)) {\n        return findSubLists(parentList);\n      } else {\n        return global$5.grep(selectedBlocks, function (elm) {\n          return NodeType.isListNode(elm) && parentList !== elm;\n        });\n      }\n    };\n    var findParentListItemsNodes = function (editor, elms) {\n      var listItemsElms = global$5.map(elms, function (elm) {\n        var parentLi = editor.dom.getParent(elm, 'li,dd,dt', getClosestListRootElm(editor, elm));\n        return parentLi ? parentLi : elm;\n      });\n      return global$7.unique(listItemsElms);\n    };\n    var getSelectedListItems = function (editor) {\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n      return global$5.grep(findParentListItemsNodes(editor, selectedBlocks), function (block) {\n        return NodeType.isListItemNode(block);\n      });\n    };\n    var getSelectedDlItems = function (editor) {\n      return filter(getSelectedListItems(editor), NodeType.isDlItemNode);\n    };\n    var getClosestListRootElm = function (editor, elm) {\n      var parentTableCell = editor.dom.getParents(elm, 'TD,TH');\n      var root = parentTableCell.length > 0 ? parentTableCell[0] : editor.getBody();\n      return root;\n    };\n    var findLastParentListNode = function (editor, elm) {\n      var parentLists = editor.dom.getParents(elm, 'ol,ul', getClosestListRootElm(editor, elm));\n      return last(parentLists);\n    };\n    var getSelectedLists = function (editor) {\n      var firstList = findLastParentListNode(editor, editor.selection.getStart());\n      var subsequentLists = filter(editor.selection.getSelectedBlocks(), NodeType.isOlUlNode);\n      return firstList.toArray().concat(subsequentLists);\n    };\n    var getSelectedListRoots = function (editor) {\n      var selectedLists = getSelectedLists(editor);\n      return getUniqueListRoots(editor, selectedLists);\n    };\n    var getUniqueListRoots = function (editor, lists) {\n      var listRoots = map(lists, function (list) {\n        return findLastParentListNode(editor, list).getOr(list);\n      });\n      return global$7.unique(listRoots);\n    };\n    var isList = function (editor) {\n      var list = getParentList(editor);\n      return HTMLElement.isPrototypeOf(list);\n    };\n    var Selection = {\n      isList: isList,\n      getParentList: getParentList,\n      getSelectedSubLists: getSelectedSubLists,\n      getSelectedListItems: getSelectedListItems,\n      getClosestListRootElm: getClosestListRootElm,\n      getSelectedDlItems: getSelectedDlItems,\n      getSelectedListRoots: getSelectedListRoots\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Option.some(f(oa.getOrDie(), ob.getOrDie())) : Option.none();\n    };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || domGlobals.document;\n      var fragment = doc.createDocumentFragment();\n      each(elements, function (element) {\n        fragment.appendChild(element.dom());\n      });\n      return Element.fromDom(fragment);\n    };\n\n    var Immutable = function () {\n      var fields = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n      return function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var keys = Object.keys;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n\n    var node = function () {\n      var f = Global$1.getOrDie('Node');\n      return f;\n    };\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie, current),\n        isOpera: isBrowser(opera, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isAndroid3 = os.isAndroid() && os.version.major === 3;\n      var isAndroid4 = os.isAndroid() && os.version.major === 4;\n      var isTablet = isiPad || isAndroid3 || isAndroid4 && /mobile/i.test(userAgent) === true;\n      var isTouch = os.isiOS() || os.isAndroid();\n      var isPhone = isTouch && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var contains = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains(uastring, 'edge/') && contains(uastring, 'chrome') && contains(uastring, 'safari') && contains(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'chrome') && !contains(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'msie') || contains(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains(uastring, 'safari') || contains(uastring, 'mobile/')) && contains(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains(uastring, 'iphone') || contains(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var detect$3 = cached(function () {\n      var userAgent = domGlobals.navigator.userAgent;\n      return PlatformDetection.detect(userAgent);\n    });\n    var PlatformDetection$1 = { detect: detect$3 };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var ELEMENT$1 = ELEMENT;\n    var is = function (element, selector) {\n      var dom = element.dom();\n      if (dom.nodeType !== ELEMENT$1) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom() === e2.dom();\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = PlatformDetection$1.detect().browser;\n    var contains$1 = browser.isIE() ? ieContains : regularContains;\n    var is$1 = is;\n\n    var parent = function (element) {\n      return Option.from(element.dom().parentNode).map(Element.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom().childNodes, Element.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom().childNodes;\n      return Option.from(cs[index]).map(Element.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var lastChild = function (element) {\n      return child(element, element.dom().childNodes.length - 1);\n    };\n    var spot = Immutable('element', 'offset');\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom().insertBefore(element.dom(), marker.dom());\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom().appendChild(element.dom());\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var remove = function (element) {\n      var dom = element.dom();\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n\n    var name = function (element) {\n      var r = element.dom().nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        domGlobals.console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom();\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var clone = function (element) {\n      return foldl(element.dom().attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        domGlobals.console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var set = function (element, property, value) {\n      var dom = element.dom();\n      internalSet(dom, property, value);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return Element.fromDom(original.dom().cloneNode(isDeep));\n    };\n    var deep = function (original) {\n      return clone$1(original, true);\n    };\n    var shallowAs = function (original, tag) {\n      var nu = Element.fromTag(tag);\n      var attributes = clone(original);\n      setAll(nu, attributes);\n      return nu;\n    };\n    var mutate = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      before(original, nu);\n      var children$1 = children(original);\n      append$1(nu, children$1);\n      remove(original);\n      return nu;\n    };\n\n    var joinSegment = function (parent, child) {\n      append(parent.item, child.list);\n    };\n    var joinSegments = function (segments) {\n      for (var i = 1; i < segments.length; i++) {\n        joinSegment(segments[i - 1], segments[i]);\n      }\n    };\n    var appendSegments = function (head$1, tail) {\n      lift2(last(head$1), head(tail), joinSegment);\n    };\n    var createSegment = function (scope, listType) {\n      var segment = {\n        list: Element.fromTag(listType, scope),\n        item: Element.fromTag('li', scope)\n      };\n      append(segment.list, segment.item);\n      return segment;\n    };\n    var createSegments = function (scope, entry, size) {\n      var segments = [];\n      for (var i = 0; i < size; i++) {\n        segments.push(createSegment(scope, entry.listType));\n      }\n      return segments;\n    };\n    var populateSegments = function (segments, entry) {\n      for (var i = 0; i < segments.length - 1; i++) {\n        set(segments[i].item, 'list-style-type', 'none');\n      }\n      last(segments).each(function (segment) {\n        setAll(segment.list, entry.listAttributes);\n        setAll(segment.item, entry.itemAttributes);\n        append$1(segment.item, entry.content);\n      });\n    };\n    var normalizeSegment = function (segment, entry) {\n      if (name(segment.list) !== entry.listType) {\n        segment.list = mutate(segment.list, entry.listType);\n      }\n      setAll(segment.list, entry.listAttributes);\n    };\n    var createItem = function (scope, attr, content) {\n      var item = Element.fromTag('li', scope);\n      setAll(item, attr);\n      append$1(item, content);\n      return item;\n    };\n    var appendItem = function (segment, item) {\n      append(segment.list, item);\n      segment.item = item;\n    };\n    var writeShallow = function (scope, cast, entry) {\n      var newCast = cast.slice(0, entry.depth);\n      last(newCast).each(function (segment) {\n        var item = createItem(scope, entry.itemAttributes, entry.content);\n        appendItem(segment, item);\n        normalizeSegment(segment, entry);\n      });\n      return newCast;\n    };\n    var writeDeep = function (scope, cast, entry) {\n      var segments = createSegments(scope, entry, entry.depth - cast.length);\n      joinSegments(segments);\n      populateSegments(segments, entry);\n      appendSegments(cast, segments);\n      return cast.concat(segments);\n    };\n    var composeList = function (scope, entries) {\n      var cast = foldl(entries, function (cast, entry) {\n        return entry.depth > cast.length ? writeDeep(scope, cast, entry) : writeShallow(scope, cast, entry);\n      }, []);\n      return head(cast).map(function (segment) {\n        return segment.list;\n      });\n    };\n\n    var isList$1 = function (el) {\n      return is$1(el, 'OL,UL');\n    };\n    var hasFirstChildList = function (el) {\n      return firstChild(el).map(isList$1).getOr(false);\n    };\n    var hasLastChildList = function (el) {\n      return lastChild(el).map(isList$1).getOr(false);\n    };\n\n    var isIndented = function (entry) {\n      return entry.depth > 0;\n    };\n    var isSelected = function (entry) {\n      return entry.isSelected;\n    };\n    var cloneItemContent = function (li) {\n      var children$1 = children(li);\n      var content = hasLastChildList(li) ? children$1.slice(0, -1) : children$1;\n      return map(content, deep);\n    };\n    var createEntry = function (li, depth, isSelected) {\n      return parent(li).filter(isElement).map(function (list) {\n        return {\n          depth: depth,\n          isSelected: isSelected,\n          content: cloneItemContent(li),\n          itemAttributes: clone(li),\n          listAttributes: clone(list),\n          listType: name(list)\n        };\n      });\n    };\n\n    var indentEntry = function (indentation, entry) {\n      switch (indentation) {\n      case 'Indent':\n        entry.depth++;\n        break;\n      case 'Outdent':\n        entry.depth--;\n        break;\n      case 'Flatten':\n        entry.depth = 0;\n      }\n    };\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var merge = baseMerge(shallow);\n\n    var cloneListProperties = function (target, source) {\n      target.listType = source.listType;\n      target.listAttributes = merge({}, source.listAttributes);\n    };\n    var previousSiblingEntry = function (entries, start) {\n      var depth = entries[start].depth;\n      for (var i = start - 1; i >= 0; i--) {\n        if (entries[i].depth === depth) {\n          return Option.some(entries[i]);\n        }\n        if (entries[i].depth < depth) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var normalizeEntries = function (entries) {\n      each(entries, function (entry, i) {\n        previousSiblingEntry(entries, i).each(function (matchingEntry) {\n          cloneListProperties(entry, matchingEntry);\n        });\n      });\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var parseItem = function (depth, itemSelection, selectionState, item) {\n      return firstChild(item).filter(isList$1).fold(function () {\n        itemSelection.each(function (selection) {\n          if (eq(selection.start, item)) {\n            selectionState.set(true);\n          }\n        });\n        var currentItemEntry = createEntry(item, depth, selectionState.get());\n        itemSelection.each(function (selection) {\n          if (eq(selection.end, item)) {\n            selectionState.set(false);\n          }\n        });\n        var childListEntries = lastChild(item).filter(isList$1).map(function (list) {\n          return parseList(depth, itemSelection, selectionState, list);\n        }).getOr([]);\n        return currentItemEntry.toArray().concat(childListEntries);\n      }, function (list) {\n        return parseList(depth, itemSelection, selectionState, list);\n      });\n    };\n    var parseList = function (depth, itemSelection, selectionState, list) {\n      return bind(children(list), function (element) {\n        var parser = isList$1(element) ? parseList : parseItem;\n        var newDepth = depth + 1;\n        return parser(newDepth, itemSelection, selectionState, element);\n      });\n    };\n    var parseLists = function (lists, itemSelection) {\n      var selectionState = Cell(false);\n      var initialDepth = 0;\n      return map(lists, function (list) {\n        return {\n          sourceList: list,\n          entries: parseList(initialDepth, itemSelection, selectionState, list)\n        };\n      });\n    };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var createTextBlock = function (editor, contentNode) {\n      var dom = editor.dom;\n      var blockElements = editor.schema.getBlockElements();\n      var fragment = dom.createFragment();\n      var node, textBlock, blockName, hasContentNode;\n      if (editor.settings.forced_root_block) {\n        blockName = editor.settings.forced_root_block;\n      }\n      if (blockName) {\n        textBlock = dom.create(blockName);\n        if (textBlock.tagName === editor.settings.forced_root_block) {\n          dom.setAttribs(textBlock, editor.settings.forced_root_block_attrs);\n        }\n        if (!NodeType.isBlock(contentNode.firstChild, blockElements)) {\n          fragment.appendChild(textBlock);\n        }\n      }\n      if (contentNode) {\n        while (node = contentNode.firstChild) {\n          var nodeName = node.nodeName;\n          if (!hasContentNode && (nodeName !== 'SPAN' || node.getAttribute('data-mce-type') !== 'bookmark')) {\n            hasContentNode = true;\n          }\n          if (NodeType.isBlock(node, blockElements)) {\n            fragment.appendChild(node);\n            textBlock = null;\n          } else {\n            if (blockName) {\n              if (!textBlock) {\n                textBlock = dom.create(blockName);\n                fragment.appendChild(textBlock);\n              }\n              textBlock.appendChild(node);\n            } else {\n              fragment.appendChild(node);\n            }\n          }\n        }\n      }\n      if (!editor.settings.forced_root_block) {\n        fragment.appendChild(dom.create('br'));\n      } else {\n        if (!hasContentNode && (!global$8.ie || global$8.ie > 10)) {\n          textBlock.appendChild(dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      return fragment;\n    };\n\n    var outdentedComposer = function (editor, entries) {\n      return map(entries, function (entry) {\n        var content = fromElements(entry.content);\n        return Element.fromDom(createTextBlock(editor, content.dom()));\n      });\n    };\n    var indentedComposer = function (editor, entries) {\n      normalizeEntries(entries);\n      return composeList(editor.contentDocument, entries).toArray();\n    };\n    var composeEntries = function (editor, entries) {\n      return bind(groupBy(entries, isIndented), function (entries) {\n        var groupIsIndented = head(entries).map(isIndented).getOr(false);\n        return groupIsIndented ? indentedComposer(editor, entries) : outdentedComposer(editor, entries);\n      });\n    };\n    var indentSelectedEntries = function (entries, indentation) {\n      each(filter(entries, isSelected), function (entry) {\n        return indentEntry(indentation, entry);\n      });\n    };\n    var getItemSelection = function (editor) {\n      var selectedListItems = map(Selection.getSelectedListItems(editor), Element.fromDom);\n      return lift2(find(selectedListItems, not(hasFirstChildList)), find(reverse(selectedListItems), not(hasFirstChildList)), function (start, end) {\n        return {\n          start: start,\n          end: end\n        };\n      });\n    };\n    var listsIndentation = function (editor, lists, indentation) {\n      var entrySets = parseLists(lists, getItemSelection(editor));\n      each(entrySets, function (entrySet) {\n        indentSelectedEntries(entrySet.entries, indentation);\n        before$1(entrySet.sourceList, composeEntries(editor, entrySet.entries));\n        remove(entrySet.sourceList);\n      });\n    };\n\n    var DOM$1 = global$6.DOM;\n    var splitList = function (editor, ul, li) {\n      var tmpRng, fragment, bookmarks, node, newBlock;\n      var removeAndKeepBookmarks = function (targetNode) {\n        global$5.each(bookmarks, function (node) {\n          targetNode.parentNode.insertBefore(node, li.parentNode);\n        });\n        DOM$1.remove(targetNode);\n      };\n      bookmarks = DOM$1.select('span[data-mce-type=\"bookmark\"]', ul);\n      newBlock = createTextBlock(editor, li);\n      tmpRng = DOM$1.createRng();\n      tmpRng.setStartAfter(li);\n      tmpRng.setEndAfter(ul);\n      fragment = tmpRng.extractContents();\n      for (node = fragment.firstChild; node; node = node.firstChild) {\n        if (node.nodeName === 'LI' && editor.dom.isEmpty(node)) {\n          DOM$1.remove(node);\n          break;\n        }\n      }\n      if (!editor.dom.isEmpty(fragment)) {\n        DOM$1.insertAfter(fragment, ul);\n      }\n      DOM$1.insertAfter(newBlock, ul);\n      if (NodeType.isEmpty(editor.dom, li.parentNode)) {\n        removeAndKeepBookmarks(li.parentNode);\n      }\n      DOM$1.remove(li);\n      if (NodeType.isEmpty(editor.dom, ul)) {\n        DOM$1.remove(ul);\n      }\n    };\n    var SplitList = { splitList: splitList };\n\n    var outdentDlItem = function (editor, item) {\n      if (is$1(item, 'dd')) {\n        mutate(item, 'dt');\n      } else if (is$1(item, 'dt')) {\n        parent(item).each(function (dl) {\n          return SplitList.splitList(editor, dl.dom(), item.dom());\n        });\n      }\n    };\n    var indentDlItem = function (item) {\n      if (is$1(item, 'dt')) {\n        mutate(item, 'dd');\n      }\n    };\n    var dlIndentation = function (editor, indentation, dlItems) {\n      if (indentation === 'Indent') {\n        each(dlItems, indentDlItem);\n      } else {\n        each(dlItems, function (item) {\n          return outdentDlItem(editor, item);\n        });\n      }\n    };\n\n    var selectionIndentation = function (editor, indentation) {\n      var lists = map(Selection.getSelectedListRoots(editor), Element.fromDom);\n      var dlItems = map(Selection.getSelectedDlItems(editor), Element.fromDom);\n      var isHandled = false;\n      if (lists.length || dlItems.length) {\n        var bookmark = editor.selection.getBookmark();\n        listsIndentation(editor, lists, indentation);\n        dlIndentation(editor, indentation, dlItems);\n        editor.selection.moveToBookmark(bookmark);\n        editor.selection.setRng(Range.normalizeRange(editor.selection.getRng()));\n        editor.nodeChanged();\n        isHandled = true;\n      }\n      return isHandled;\n    };\n    var indentListSelection = function (editor) {\n      return selectionIndentation(editor, 'Indent');\n    };\n    var outdentListSelection = function (editor) {\n      return selectionIndentation(editor, 'Outdent');\n    };\n    var flattenListSelection = function (editor) {\n      return selectionIndentation(editor, 'Flatten');\n    };\n\n    var updateListStyle = function (dom, el, detail) {\n      var type = detail['list-style-type'] ? detail['list-style-type'] : null;\n      dom.setStyle(el, 'list-style-type', type);\n    };\n    var setAttribs = function (elm, attrs) {\n      global$5.each(attrs, function (value, key) {\n        elm.setAttribute(key, value);\n      });\n    };\n    var updateListAttrs = function (dom, el, detail) {\n      setAttribs(el, detail['list-attributes']);\n      global$5.each(dom.select('li', el), function (li) {\n        setAttribs(li, detail['list-item-attributes']);\n      });\n    };\n    var updateListWithDetails = function (dom, el, detail) {\n      updateListStyle(dom, el, detail);\n      updateListAttrs(dom, el, detail);\n    };\n    var removeStyles = function (dom, element, styles) {\n      global$5.each(styles, function (style) {\n        var _a;\n        return dom.setStyle(element, (_a = {}, _a[style] = '', _a));\n      });\n    };\n    var getEndPointNode = function (editor, rng, start, root) {\n      var container, offset;\n      container = rng[start ? 'startContainer' : 'endContainer'];\n      offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (container.nodeType === 1) {\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n      }\n      if (!start && NodeType.isBr(container.nextSibling)) {\n        container = container.nextSibling;\n      }\n      while (container.parentNode !== root) {\n        if (NodeType.isTextBlock(editor, container)) {\n          return container;\n        }\n        if (/^(TD|TH)$/.test(container.parentNode.nodeName)) {\n          return container;\n        }\n        container = container.parentNode;\n      }\n      return container;\n    };\n    var getSelectedTextBlocks = function (editor, rng, root) {\n      var textBlocks = [], dom = editor.dom;\n      var startNode = getEndPointNode(editor, rng, true, root);\n      var endNode = getEndPointNode(editor, rng, false, root);\n      var block;\n      var siblings = [];\n      for (var node = startNode; node; node = node.nextSibling) {\n        siblings.push(node);\n        if (node === endNode) {\n          break;\n        }\n      }\n      global$5.each(siblings, function (node) {\n        if (NodeType.isTextBlock(editor, node)) {\n          textBlocks.push(node);\n          block = null;\n          return;\n        }\n        if (dom.isBlock(node) || NodeType.isBr(node)) {\n          if (NodeType.isBr(node)) {\n            dom.remove(node);\n          }\n          block = null;\n          return;\n        }\n        var nextSibling = node.nextSibling;\n        if (global$4.isBookmarkNode(node)) {\n          if (NodeType.isTextBlock(editor, nextSibling) || !nextSibling && node.parentNode === root) {\n            block = null;\n            return;\n          }\n        }\n        if (!block) {\n          block = dom.create('p');\n          node.parentNode.insertBefore(block, node);\n          textBlocks.push(block);\n        }\n        block.appendChild(node);\n      });\n      return textBlocks;\n    };\n    var hasCompatibleStyle = function (dom, sib, detail) {\n      var sibStyle = dom.getStyle(sib, 'list-style-type');\n      var detailStyle = detail ? detail['list-style-type'] : '';\n      detailStyle = detailStyle === null ? '' : detailStyle;\n      return sibStyle === detailStyle;\n    };\n    var applyList = function (editor, listName, detail) {\n      if (detail === void 0) {\n        detail = {};\n      }\n      var rng = editor.selection.getRng(true);\n      var bookmark;\n      var listItemName = 'LI';\n      var root = Selection.getClosestListRootElm(editor, editor.selection.getStart(true));\n      var dom = editor.dom;\n      if (dom.getContentEditable(editor.selection.getNode()) === 'false') {\n        return;\n      }\n      listName = listName.toUpperCase();\n      if (listName === 'DL') {\n        listItemName = 'DT';\n      }\n      bookmark = Bookmark.createBookmark(rng);\n      global$5.each(getSelectedTextBlocks(editor, rng, root), function (block) {\n        var listBlock, sibling;\n        sibling = block.previousSibling;\n        if (sibling && NodeType.isListNode(sibling) && sibling.nodeName === listName && hasCompatibleStyle(dom, sibling, detail)) {\n          listBlock = sibling;\n          block = dom.rename(block, listItemName);\n          sibling.appendChild(block);\n        } else {\n          listBlock = dom.create(listName);\n          block.parentNode.insertBefore(listBlock, block);\n          listBlock.appendChild(block);\n          block = dom.rename(block, listItemName);\n        }\n        removeStyles(dom, block, [\n          'margin',\n          'margin-right',\n          'margin-bottom',\n          'margin-left',\n          'margin-top',\n          'padding',\n          'padding-right',\n          'padding-bottom',\n          'padding-left',\n          'padding-top'\n        ]);\n        updateListWithDetails(dom, listBlock, detail);\n        mergeWithAdjacentLists(editor.dom, listBlock);\n      });\n      editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n    };\n    var isValidLists = function (list1, list2) {\n      return list1 && list2 && NodeType.isListNode(list1) && list1.nodeName === list2.nodeName;\n    };\n    var hasSameListStyle = function (dom, list1, list2) {\n      var targetStyle = dom.getStyle(list1, 'list-style-type', true);\n      var style = dom.getStyle(list2, 'list-style-type', true);\n      return targetStyle === style;\n    };\n    var hasSameClasses = function (elm1, elm2) {\n      return elm1.className === elm2.className;\n    };\n    var shouldMerge = function (dom, list1, list2) {\n      return isValidLists(list1, list2) && hasSameListStyle(dom, list1, list2) && hasSameClasses(list1, list2);\n    };\n    var mergeWithAdjacentLists = function (dom, listBlock) {\n      var sibling, node;\n      sibling = listBlock.nextSibling;\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.firstChild) {\n          listBlock.appendChild(node);\n        }\n        dom.remove(sibling);\n      }\n      sibling = listBlock.previousSibling;\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.lastChild) {\n          listBlock.insertBefore(node, listBlock.firstChild);\n        }\n        dom.remove(sibling);\n      }\n    };\n    var updateList = function (dom, list, listName, detail) {\n      if (list.nodeName !== listName) {\n        var newList = dom.rename(list, listName);\n        updateListWithDetails(dom, newList, detail);\n      } else {\n        updateListWithDetails(dom, list, detail);\n      }\n    };\n    var toggleMultipleLists = function (editor, parentList, lists, listName, detail) {\n      if (parentList.nodeName === listName && !hasListStyleDetail(detail)) {\n        flattenListSelection(editor);\n      } else {\n        var bookmark = Bookmark.createBookmark(editor.selection.getRng(true));\n        global$5.each([parentList].concat(lists), function (elm) {\n          updateList(editor.dom, elm, listName, detail);\n        });\n        editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n      }\n    };\n    var hasListStyleDetail = function (detail) {\n      return 'list-style-type' in detail;\n    };\n    var toggleSingleList = function (editor, parentList, listName, detail) {\n      if (parentList === editor.getBody()) {\n        return;\n      }\n      if (parentList) {\n        if (parentList.nodeName === listName && !hasListStyleDetail(detail)) {\n          flattenListSelection(editor);\n        } else {\n          var bookmark = Bookmark.createBookmark(editor.selection.getRng(true));\n          updateListWithDetails(editor.dom, parentList, detail);\n          mergeWithAdjacentLists(editor.dom, editor.dom.rename(parentList, listName));\n          editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n        }\n      } else {\n        applyList(editor, listName, detail);\n      }\n    };\n    var toggleList = function (editor, listName, detail) {\n      var parentList = Selection.getParentList(editor);\n      var selectedSubLists = Selection.getSelectedSubLists(editor);\n      detail = detail ? detail : {};\n      if (parentList && selectedSubLists.length > 0) {\n        toggleMultipleLists(editor, parentList, selectedSubLists, listName, detail);\n      } else {\n        toggleSingleList(editor, parentList, listName, detail);\n      }\n    };\n    var ToggleList = {\n      toggleList: toggleList,\n      mergeWithAdjacentLists: mergeWithAdjacentLists\n    };\n\n    var DOM$2 = global$6.DOM;\n    var normalizeList = function (dom, ul) {\n      var sibling;\n      var parentNode = ul.parentNode;\n      if (parentNode.nodeName === 'LI' && parentNode.firstChild === ul) {\n        sibling = parentNode.previousSibling;\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(ul);\n          if (NodeType.isEmpty(dom, parentNode)) {\n            DOM$2.remove(parentNode);\n          }\n        } else {\n          DOM$2.setStyle(parentNode, 'listStyleType', 'none');\n        }\n      }\n      if (NodeType.isListNode(parentNode)) {\n        sibling = parentNode.previousSibling;\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(ul);\n        }\n      }\n    };\n    var normalizeLists = function (dom, element) {\n      global$5.each(global$5.grep(dom.select('ol,ul', element)), function (ul) {\n        normalizeList(dom, ul);\n      });\n    };\n    var NormalizeLists = {\n      normalizeList: normalizeList,\n      normalizeLists: normalizeLists\n    };\n\n    var findNextCaretContainer = function (editor, rng, isForward, root) {\n      var node = rng.startContainer;\n      var offset = rng.startOffset;\n      var nonEmptyBlocks, walker;\n      if (node.nodeType === 3 && (isForward ? offset < node.data.length : offset > 0)) {\n        return node;\n      }\n      nonEmptyBlocks = editor.schema.getNonEmptyElements();\n      if (node.nodeType === 1) {\n        node = global$1.getNode(node, offset);\n      }\n      walker = new global$2(node, root);\n      if (isForward) {\n        if (NodeType.isBogusBr(editor.dom, node)) {\n          walker.next();\n        }\n      }\n      while (node = walker[isForward ? 'next' : 'prev2']()) {\n        if (node.nodeName === 'LI' && !node.hasChildNodes()) {\n          return node;\n        }\n        if (nonEmptyBlocks[node.nodeName]) {\n          return node;\n        }\n        if (node.nodeType === 3 && node.data.length > 0) {\n          return node;\n        }\n      }\n    };\n    var hasOnlyOneBlockChild = function (dom, elm) {\n      var childNodes = elm.childNodes;\n      return childNodes.length === 1 && !NodeType.isListNode(childNodes[0]) && dom.isBlock(childNodes[0]);\n    };\n    var unwrapSingleBlockChild = function (dom, elm) {\n      if (hasOnlyOneBlockChild(dom, elm)) {\n        dom.remove(elm.firstChild, true);\n      }\n    };\n    var moveChildren = function (dom, fromElm, toElm) {\n      var node, targetElm;\n      targetElm = hasOnlyOneBlockChild(dom, toElm) ? toElm.firstChild : toElm;\n      unwrapSingleBlockChild(dom, fromElm);\n      if (!NodeType.isEmpty(dom, fromElm, true)) {\n        while (node = fromElm.firstChild) {\n          targetElm.appendChild(node);\n        }\n      }\n    };\n    var mergeLiElements = function (dom, fromElm, toElm) {\n      var node, listNode;\n      var ul = fromElm.parentNode;\n      if (!NodeType.isChildOfBody(dom, fromElm) || !NodeType.isChildOfBody(dom, toElm)) {\n        return;\n      }\n      if (NodeType.isListNode(toElm.lastChild)) {\n        listNode = toElm.lastChild;\n      }\n      if (ul === toElm.lastChild) {\n        if (NodeType.isBr(ul.previousSibling)) {\n          dom.remove(ul.previousSibling);\n        }\n      }\n      node = toElm.lastChild;\n      if (node && NodeType.isBr(node) && fromElm.hasChildNodes()) {\n        dom.remove(node);\n      }\n      if (NodeType.isEmpty(dom, toElm, true)) {\n        dom.$(toElm).empty();\n      }\n      moveChildren(dom, fromElm, toElm);\n      if (listNode) {\n        toElm.appendChild(listNode);\n      }\n      var contains = contains$1(Element.fromDom(toElm), Element.fromDom(fromElm));\n      var nestedLists = contains ? dom.getParents(fromElm, NodeType.isListNode, toElm) : [];\n      dom.remove(fromElm);\n      each(nestedLists, function (list) {\n        if (NodeType.isEmpty(dom, list) && list !== dom.getRoot()) {\n          dom.remove(list);\n        }\n      });\n    };\n    var mergeIntoEmptyLi = function (editor, fromLi, toLi) {\n      editor.dom.$(toLi).empty();\n      mergeLiElements(editor.dom, fromLi, toLi);\n      editor.selection.setCursorLocation(toLi);\n    };\n    var mergeForward = function (editor, rng, fromLi, toLi) {\n      var dom = editor.dom;\n      if (dom.isEmpty(toLi)) {\n        mergeIntoEmptyLi(editor, fromLi, toLi);\n      } else {\n        var bookmark = Bookmark.createBookmark(rng);\n        mergeLiElements(dom, fromLi, toLi);\n        editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n      }\n    };\n    var mergeBackward = function (editor, rng, fromLi, toLi) {\n      var bookmark = Bookmark.createBookmark(rng);\n      mergeLiElements(editor.dom, fromLi, toLi);\n      var resolvedBookmark = Bookmark.resolveBookmark(bookmark);\n      editor.selection.setRng(resolvedBookmark);\n    };\n    var backspaceDeleteFromListToListCaret = function (editor, isForward) {\n      var dom = editor.dom, selection = editor.selection;\n      var selectionStartElm = selection.getStart();\n      var root = Selection.getClosestListRootElm(editor, selectionStartElm);\n      var li = dom.getParent(selection.getStart(), 'LI', root);\n      var ul, rng, otherLi;\n      if (li) {\n        ul = li.parentNode;\n        if (ul === editor.getBody() && NodeType.isEmpty(dom, ul)) {\n          return true;\n        }\n        rng = Range.normalizeRange(selection.getRng(true));\n        otherLi = dom.getParent(findNextCaretContainer(editor, rng, isForward, root), 'LI', root);\n        if (otherLi && otherLi !== li) {\n          if (isForward) {\n            mergeForward(editor, rng, otherLi, li);\n          } else {\n            mergeBackward(editor, rng, li, otherLi);\n          }\n          return true;\n        } else if (!otherLi) {\n          if (!isForward) {\n            flattenListSelection(editor);\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var removeBlock = function (dom, block, root) {\n      var parentBlock = dom.getParent(block.parentNode, dom.isBlock, root);\n      dom.remove(block);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        dom.remove(parentBlock);\n      }\n    };\n    var backspaceDeleteIntoListCaret = function (editor, isForward) {\n      var dom = editor.dom;\n      var selectionStartElm = editor.selection.getStart();\n      var root = Selection.getClosestListRootElm(editor, selectionStartElm);\n      var block = dom.getParent(selectionStartElm, dom.isBlock, root);\n      if (block && dom.isEmpty(block)) {\n        var rng = Range.normalizeRange(editor.selection.getRng(true));\n        var otherLi_1 = dom.getParent(findNextCaretContainer(editor, rng, isForward, root), 'LI', root);\n        if (otherLi_1) {\n          editor.undoManager.transact(function () {\n            removeBlock(dom, block, root);\n            ToggleList.mergeWithAdjacentLists(dom, otherLi_1.parentNode);\n            editor.selection.select(otherLi_1, true);\n            editor.selection.collapse(isForward);\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    var backspaceDeleteCaret = function (editor, isForward) {\n      return backspaceDeleteFromListToListCaret(editor, isForward) || backspaceDeleteIntoListCaret(editor, isForward);\n    };\n    var backspaceDeleteRange = function (editor) {\n      var selectionStartElm = editor.selection.getStart();\n      var root = Selection.getClosestListRootElm(editor, selectionStartElm);\n      var startListParent = editor.dom.getParent(selectionStartElm, 'LI,DT,DD', root);\n      if (startListParent || Selection.getSelectedListItems(editor).length > 0) {\n        editor.undoManager.transact(function () {\n          editor.execCommand('Delete');\n          NormalizeLists.normalizeLists(editor.dom, editor.getBody());\n        });\n        return true;\n      }\n      return false;\n    };\n    var backspaceDelete = function (editor, isForward) {\n      return editor.selection.isCollapsed() ? backspaceDeleteCaret(editor, isForward) : backspaceDeleteRange(editor);\n    };\n    var setup = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode === global$3.BACKSPACE) {\n          if (backspaceDelete(editor, false)) {\n            e.preventDefault();\n          }\n        } else if (e.keyCode === global$3.DELETE) {\n          if (backspaceDelete(editor, true)) {\n            e.preventDefault();\n          }\n        }\n      });\n    };\n    var Delete = {\n      setup: setup,\n      backspaceDelete: backspaceDelete\n    };\n\n    var get = function (editor) {\n      return {\n        backspaceDelete: function (isForward) {\n          Delete.backspaceDelete(editor, isForward);\n        }\n      };\n    };\n    var Api = { get: get };\n\n    var queryListCommandState = function (editor, listName) {\n      return function () {\n        var parentList = editor.dom.getParent(editor.selection.getStart(), 'UL,OL,DL');\n        return parentList && parentList.nodeName === listName;\n      };\n    };\n    var register = function (editor) {\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command.toLowerCase();\n        if (cmd === 'indent') {\n          indentListSelection(editor);\n        } else if (cmd === 'outdent') {\n          outdentListSelection(editor);\n        }\n      });\n      editor.addCommand('InsertUnorderedList', function (ui, detail) {\n        ToggleList.toggleList(editor, 'UL', detail);\n      });\n      editor.addCommand('InsertOrderedList', function (ui, detail) {\n        ToggleList.toggleList(editor, 'OL', detail);\n      });\n      editor.addCommand('InsertDefinitionList', function (ui, detail) {\n        ToggleList.toggleList(editor, 'DL', detail);\n      });\n      editor.addCommand('RemoveList', function () {\n        flattenListSelection(editor);\n      });\n      editor.addQueryStateHandler('InsertUnorderedList', queryListCommandState(editor, 'UL'));\n      editor.addQueryStateHandler('InsertOrderedList', queryListCommandState(editor, 'OL'));\n      editor.addQueryStateHandler('InsertDefinitionList', queryListCommandState(editor, 'DL'));\n    };\n    var Commands = { register: register };\n\n    var shouldIndentOnTab = function (editor) {\n      return editor.getParam('lists_indent_on_tab', true);\n    };\n    var Settings = { shouldIndentOnTab: shouldIndentOnTab };\n\n    var setupTabKey = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode !== global$3.TAB || global$3.metaKeyPressed(e)) {\n          return;\n        }\n        editor.undoManager.transact(function () {\n          if (e.shiftKey ? outdentListSelection(editor) : indentListSelection(editor)) {\n            e.preventDefault();\n          }\n        });\n      });\n    };\n    var setup$1 = function (editor) {\n      if (Settings.shouldIndentOnTab(editor)) {\n        setupTabKey(editor);\n      }\n      Delete.setup(editor);\n    };\n    var Keyboard = { setup: setup$1 };\n\n    var findIndex = function (list, predicate) {\n      for (var index = 0; index < list.length; index++) {\n        var element = list[index];\n        if (predicate(element)) {\n          return index;\n        }\n      }\n      return -1;\n    };\n    var listState = function (editor, listName) {\n      return function (e) {\n        var ctrl = e.control;\n        editor.on('NodeChange', function (e) {\n          var tableCellIndex = findIndex(e.parents, NodeType.isTableCellNode);\n          var parents = tableCellIndex !== -1 ? e.parents.slice(0, tableCellIndex) : e.parents;\n          var lists = global$5.grep(parents, NodeType.isListNode);\n          ctrl.active(lists.length > 0 && lists[0].nodeName === listName);\n        });\n      };\n    };\n    var register$1 = function (editor) {\n      var hasPlugin = function (editor, plugin) {\n        var plugins = editor.settings.plugins ? editor.settings.plugins : '';\n        return global$5.inArray(plugins.split(/[ ,]/), plugin) !== -1;\n      };\n      if (!hasPlugin(editor, 'advlist')) {\n        editor.addButton('numlist', {\n          active: false,\n          title: 'Numbered list',\n          cmd: 'InsertOrderedList',\n          onPostRender: listState(editor, 'OL')\n        });\n        editor.addButton('bullist', {\n          active: false,\n          title: 'Bullet list',\n          cmd: 'InsertUnorderedList',\n          onPostRender: listState(editor, 'UL')\n        });\n      }\n      editor.addButton('indent', {\n        icon: 'indent',\n        title: 'Increase indent',\n        cmd: 'Indent'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('lists', function (editor) {\n      Keyboard.setup(editor);\n      Buttons.register(editor);\n      Commands.register(editor);\n      return Api.get(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","(function () {\nvar autolink = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var getAutoLinkPattern = function (editor) {\n      return editor.getParam('autolink_pattern', /^(https?:\\/\\/|ssh:\\/\\/|ftp:\\/\\/|file:\\/|www\\.|(?:mailto:)?[A-Z0-9._%+\\-]+@)(.+)$/i);\n    };\n    var getDefaultLinkTarget = function (editor) {\n      return editor.getParam('default_link_target', '');\n    };\n    var Settings = {\n      getAutoLinkPattern: getAutoLinkPattern,\n      getDefaultLinkTarget: getDefaultLinkTarget\n    };\n\n    var rangeEqualsDelimiterOrSpace = function (rangeString, delimiter) {\n      return rangeString === delimiter || rangeString === ' ' || rangeString.charCodeAt(0) === 160;\n    };\n    var handleEclipse = function (editor) {\n      parseCurrentLine(editor, -1, '(');\n    };\n    var handleSpacebar = function (editor) {\n      parseCurrentLine(editor, 0, '');\n    };\n    var handleEnter = function (editor) {\n      parseCurrentLine(editor, -1, '');\n    };\n    var scopeIndex = function (container, index) {\n      if (index < 0) {\n        index = 0;\n      }\n      if (container.nodeType === 3) {\n        var len = container.data.length;\n        if (index > len) {\n          index = len;\n        }\n      }\n      return index;\n    };\n    var setStart = function (rng, container, offset) {\n      if (container.nodeType !== 1 || container.hasChildNodes()) {\n        rng.setStart(container, scopeIndex(container, offset));\n      } else {\n        rng.setStartBefore(container);\n      }\n    };\n    var setEnd = function (rng, container, offset) {\n      if (container.nodeType !== 1 || container.hasChildNodes()) {\n        rng.setEnd(container, scopeIndex(container, offset));\n      } else {\n        rng.setEndAfter(container);\n      }\n    };\n    var parseCurrentLine = function (editor, endOffset, delimiter) {\n      var rng, end, start, endContainer, bookmark, text, matches, prev, len, rngText;\n      var autoLinkPattern = Settings.getAutoLinkPattern(editor);\n      var defaultLinkTarget = Settings.getDefaultLinkTarget(editor);\n      if (editor.selection.getNode().tagName === 'A') {\n        return;\n      }\n      rng = editor.selection.getRng(true).cloneRange();\n      if (rng.startOffset < 5) {\n        prev = rng.endContainer.previousSibling;\n        if (!prev) {\n          if (!rng.endContainer.firstChild || !rng.endContainer.firstChild.nextSibling) {\n            return;\n          }\n          prev = rng.endContainer.firstChild.nextSibling;\n        }\n        len = prev.length;\n        setStart(rng, prev, len);\n        setEnd(rng, prev, len);\n        if (rng.endOffset < 5) {\n          return;\n        }\n        end = rng.endOffset;\n        endContainer = prev;\n      } else {\n        endContainer = rng.endContainer;\n        if (endContainer.nodeType !== 3 && endContainer.firstChild) {\n          while (endContainer.nodeType !== 3 && endContainer.firstChild) {\n            endContainer = endContainer.firstChild;\n          }\n          if (endContainer.nodeType === 3) {\n            setStart(rng, endContainer, 0);\n            setEnd(rng, endContainer, endContainer.nodeValue.length);\n          }\n        }\n        if (rng.endOffset === 1) {\n          end = 2;\n        } else {\n          end = rng.endOffset - 1 - endOffset;\n        }\n      }\n      start = end;\n      do {\n        setStart(rng, endContainer, end >= 2 ? end - 2 : 0);\n        setEnd(rng, endContainer, end >= 1 ? end - 1 : 0);\n        end -= 1;\n        rngText = rng.toString();\n      } while (rngText !== ' ' && rngText !== '' && rngText.charCodeAt(0) !== 160 && end - 2 >= 0 && rngText !== delimiter);\n      if (rangeEqualsDelimiterOrSpace(rng.toString(), delimiter)) {\n        setStart(rng, endContainer, end);\n        setEnd(rng, endContainer, start);\n        end += 1;\n      } else if (rng.startOffset === 0) {\n        setStart(rng, endContainer, 0);\n        setEnd(rng, endContainer, start);\n      } else {\n        setStart(rng, endContainer, end);\n        setEnd(rng, endContainer, start);\n      }\n      text = rng.toString();\n      if (text.charAt(text.length - 1) === '.') {\n        setEnd(rng, endContainer, start - 1);\n      }\n      text = rng.toString().trim();\n      matches = text.match(autoLinkPattern);\n      if (matches) {\n        if (matches[1] === 'www.') {\n          matches[1] = 'http://www.';\n        } else if (/@$/.test(matches[1]) && !/^mailto:/.test(matches[1])) {\n          matches[1] = 'mailto:' + matches[1];\n        }\n        bookmark = editor.selection.getBookmark();\n        editor.selection.setRng(rng);\n        editor.execCommand('createlink', false, matches[1] + matches[2]);\n        if (defaultLinkTarget) {\n          editor.dom.setAttrib(editor.selection.getNode(), 'target', defaultLinkTarget);\n        }\n        editor.selection.moveToBookmark(bookmark);\n        editor.nodeChanged();\n      }\n    };\n    var setup = function (editor) {\n      var autoUrlDetectState;\n      editor.on('keydown', function (e) {\n        if (e.keyCode === 13) {\n          return handleEnter(editor);\n        }\n      });\n      if (global$1.ie) {\n        editor.on('focus', function () {\n          if (!autoUrlDetectState) {\n            autoUrlDetectState = true;\n            try {\n              editor.execCommand('AutoUrlDetect', false, true);\n            } catch (ex) {\n            }\n          }\n        });\n        return;\n      }\n      editor.on('keypress', function (e) {\n        if (e.keyCode === 41) {\n          return handleEclipse(editor);\n        }\n      });\n      editor.on('keyup', function (e) {\n        if (e.keyCode === 32) {\n          return handleSpacebar(editor);\n        }\n      });\n    };\n    var Keys = { setup: setup };\n\n    global.add('autolink', function (editor) {\n      Keys.setup(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar searchreplace = (function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    function isContentEditableFalse(node) {\n      return node && node.nodeType === 1 && node.contentEditable === 'false';\n    }\n    function findAndReplaceDOMText(regex, node, replacementNode, captureGroup, schema) {\n      var m;\n      var matches = [];\n      var text, count = 0, doc;\n      var blockElementsMap, hiddenTextElementsMap, shortEndedElementsMap;\n      doc = node.ownerDocument;\n      blockElementsMap = schema.getBlockElements();\n      hiddenTextElementsMap = schema.getWhiteSpaceElements();\n      shortEndedElementsMap = schema.getShortEndedElements();\n      function getMatchIndexes(m, captureGroup) {\n        captureGroup = captureGroup || 0;\n        if (!m[0]) {\n          throw new Error('findAndReplaceDOMText cannot handle zero-length matches');\n        }\n        var index = m.index;\n        if (captureGroup > 0) {\n          var cg = m[captureGroup];\n          if (!cg) {\n            throw new Error('Invalid capture group');\n          }\n          index += m[0].indexOf(cg);\n          m[0] = cg;\n        }\n        return [\n          index,\n          index + m[0].length,\n          [m[0]]\n        ];\n      }\n      function getText(node) {\n        var txt;\n        if (node.nodeType === 3) {\n          return node.data;\n        }\n        if (hiddenTextElementsMap[node.nodeName] && !blockElementsMap[node.nodeName]) {\n          return '';\n        }\n        txt = '';\n        if (isContentEditableFalse(node)) {\n          return '\\n';\n        }\n        if (blockElementsMap[node.nodeName] || shortEndedElementsMap[node.nodeName]) {\n          txt += '\\n';\n        }\n        if (node = node.firstChild) {\n          do {\n            txt += getText(node);\n          } while (node = node.nextSibling);\n        }\n        return txt;\n      }\n      function stepThroughMatches(node, matches, replaceFn) {\n        var startNode, endNode, startNodeIndex, endNodeIndex, innerNodes = [], atIndex = 0, curNode = node, matchLocation = matches.shift(), matchIndex = 0;\n        out:\n          while (true) {\n            if (blockElementsMap[curNode.nodeName] || shortEndedElementsMap[curNode.nodeName] || isContentEditableFalse(curNode)) {\n              atIndex++;\n            }\n            if (curNode.nodeType === 3) {\n              if (!endNode && curNode.length + atIndex >= matchLocation[1]) {\n                endNode = curNode;\n                endNodeIndex = matchLocation[1] - atIndex;\n              } else if (startNode) {\n                innerNodes.push(curNode);\n              }\n              if (!startNode && curNode.length + atIndex > matchLocation[0]) {\n                startNode = curNode;\n                startNodeIndex = matchLocation[0] - atIndex;\n              }\n              atIndex += curNode.length;\n            }\n            if (startNode && endNode) {\n              curNode = replaceFn({\n                startNode: startNode,\n                startNodeIndex: startNodeIndex,\n                endNode: endNode,\n                endNodeIndex: endNodeIndex,\n                innerNodes: innerNodes,\n                match: matchLocation[2],\n                matchIndex: matchIndex\n              });\n              atIndex -= endNode.length - endNodeIndex;\n              startNode = null;\n              endNode = null;\n              innerNodes = [];\n              matchLocation = matches.shift();\n              matchIndex++;\n              if (!matchLocation) {\n                break;\n              }\n            } else if ((!hiddenTextElementsMap[curNode.nodeName] || blockElementsMap[curNode.nodeName]) && curNode.firstChild) {\n              if (!isContentEditableFalse(curNode)) {\n                curNode = curNode.firstChild;\n                continue;\n              }\n            } else if (curNode.nextSibling) {\n              curNode = curNode.nextSibling;\n              continue;\n            }\n            while (true) {\n              if (curNode.nextSibling) {\n                curNode = curNode.nextSibling;\n                break;\n              } else if (curNode.parentNode !== node) {\n                curNode = curNode.parentNode;\n              } else {\n                break out;\n              }\n            }\n          }\n      }\n      function genReplacer(nodeName) {\n        var makeReplacementNode;\n        if (typeof nodeName !== 'function') {\n          var stencilNode_1 = nodeName.nodeType ? nodeName : doc.createElement(nodeName);\n          makeReplacementNode = function (fill, matchIndex) {\n            var clone = stencilNode_1.cloneNode(false);\n            clone.setAttribute('data-mce-index', matchIndex);\n            if (fill) {\n              clone.appendChild(doc.createTextNode(fill));\n            }\n            return clone;\n          };\n        } else {\n          makeReplacementNode = nodeName;\n        }\n        return function (range) {\n          var before;\n          var after;\n          var parentNode;\n          var startNode = range.startNode;\n          var endNode = range.endNode;\n          var matchIndex = range.matchIndex;\n          if (startNode === endNode) {\n            var node_1 = startNode;\n            parentNode = node_1.parentNode;\n            if (range.startNodeIndex > 0) {\n              before = doc.createTextNode(node_1.data.substring(0, range.startNodeIndex));\n              parentNode.insertBefore(before, node_1);\n            }\n            var el = makeReplacementNode(range.match[0], matchIndex);\n            parentNode.insertBefore(el, node_1);\n            if (range.endNodeIndex < node_1.length) {\n              after = doc.createTextNode(node_1.data.substring(range.endNodeIndex));\n              parentNode.insertBefore(after, node_1);\n            }\n            node_1.parentNode.removeChild(node_1);\n            return el;\n          }\n          before = doc.createTextNode(startNode.data.substring(0, range.startNodeIndex));\n          after = doc.createTextNode(endNode.data.substring(range.endNodeIndex));\n          var elA = makeReplacementNode(startNode.data.substring(range.startNodeIndex), matchIndex);\n          for (var i = 0, l = range.innerNodes.length; i < l; ++i) {\n            var innerNode = range.innerNodes[i];\n            var innerEl = makeReplacementNode(innerNode.data, matchIndex);\n            innerNode.parentNode.replaceChild(innerEl, innerNode);\n          }\n          var elB = makeReplacementNode(endNode.data.substring(0, range.endNodeIndex), matchIndex);\n          parentNode = startNode.parentNode;\n          parentNode.insertBefore(before, startNode);\n          parentNode.insertBefore(elA, startNode);\n          parentNode.removeChild(startNode);\n          parentNode = endNode.parentNode;\n          parentNode.insertBefore(elB, endNode);\n          parentNode.insertBefore(after, endNode);\n          parentNode.removeChild(endNode);\n          return elB;\n        };\n      }\n      text = getText(node);\n      if (!text) {\n        return;\n      }\n      if (regex.global) {\n        while (m = regex.exec(text)) {\n          matches.push(getMatchIndexes(m, captureGroup));\n        }\n      } else {\n        m = text.match(regex);\n        matches.push(getMatchIndexes(m, captureGroup));\n      }\n      if (matches.length) {\n        count = matches.length;\n        stepThroughMatches(node, matches, genReplacer(replacementNode));\n      }\n      return count;\n    }\n    var FindReplaceText = { findAndReplaceDOMText: findAndReplaceDOMText };\n\n    var getElmIndex = function (elm) {\n      var value = elm.getAttribute('data-mce-index');\n      if (typeof value === 'number') {\n        return '' + value;\n      }\n      return value;\n    };\n    var markAllMatches = function (editor, currentIndexState, regex) {\n      var node, marker;\n      marker = editor.dom.create('span', { 'data-mce-bogus': 1 });\n      marker.className = 'mce-match-marker';\n      node = editor.getBody();\n      done(editor, currentIndexState, false);\n      return FindReplaceText.findAndReplaceDOMText(regex, node, marker, false, editor.schema);\n    };\n    var unwrap = function (node) {\n      var parentNode = node.parentNode;\n      if (node.firstChild) {\n        parentNode.insertBefore(node.firstChild, node);\n      }\n      node.parentNode.removeChild(node);\n    };\n    var findSpansByIndex = function (editor, index) {\n      var nodes;\n      var spans = [];\n      nodes = global$1.toArray(editor.getBody().getElementsByTagName('span'));\n      if (nodes.length) {\n        for (var i = 0; i < nodes.length; i++) {\n          var nodeIndex = getElmIndex(nodes[i]);\n          if (nodeIndex === null || !nodeIndex.length) {\n            continue;\n          }\n          if (nodeIndex === index.toString()) {\n            spans.push(nodes[i]);\n          }\n        }\n      }\n      return spans;\n    };\n    var moveSelection = function (editor, currentIndexState, forward) {\n      var testIndex = currentIndexState.get();\n      var dom = editor.dom;\n      forward = forward !== false;\n      if (forward) {\n        testIndex++;\n      } else {\n        testIndex--;\n      }\n      dom.removeClass(findSpansByIndex(editor, currentIndexState.get()), 'mce-match-marker-selected');\n      var spans = findSpansByIndex(editor, testIndex);\n      if (spans.length) {\n        dom.addClass(findSpansByIndex(editor, testIndex), 'mce-match-marker-selected');\n        editor.selection.scrollIntoView(spans[0]);\n        return testIndex;\n      }\n      return -1;\n    };\n    var removeNode = function (dom, node) {\n      var parent = node.parentNode;\n      dom.remove(node);\n      if (dom.isEmpty(parent)) {\n        dom.remove(parent);\n      }\n    };\n    var find = function (editor, currentIndexState, text, matchCase, wholeWord) {\n      text = text.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n      text = text.replace(/\\s/g, '[^\\\\S\\\\r\\\\n]');\n      text = wholeWord ? '\\\\b' + text + '\\\\b' : text;\n      var count = markAllMatches(editor, currentIndexState, new RegExp(text, matchCase ? 'g' : 'gi'));\n      if (count) {\n        currentIndexState.set(-1);\n        currentIndexState.set(moveSelection(editor, currentIndexState, true));\n      }\n      return count;\n    };\n    var next = function (editor, currentIndexState) {\n      var index = moveSelection(editor, currentIndexState, true);\n      if (index !== -1) {\n        currentIndexState.set(index);\n      }\n    };\n    var prev = function (editor, currentIndexState) {\n      var index = moveSelection(editor, currentIndexState, false);\n      if (index !== -1) {\n        currentIndexState.set(index);\n      }\n    };\n    var isMatchSpan = function (node) {\n      var matchIndex = getElmIndex(node);\n      return matchIndex !== null && matchIndex.length > 0;\n    };\n    var replace = function (editor, currentIndexState, text, forward, all) {\n      var i, nodes, node, matchIndex, currentMatchIndex, nextIndex = currentIndexState.get(), hasMore;\n      forward = forward !== false;\n      node = editor.getBody();\n      nodes = global$1.grep(global$1.toArray(node.getElementsByTagName('span')), isMatchSpan);\n      for (i = 0; i < nodes.length; i++) {\n        var nodeIndex = getElmIndex(nodes[i]);\n        matchIndex = currentMatchIndex = parseInt(nodeIndex, 10);\n        if (all || matchIndex === currentIndexState.get()) {\n          if (text.length) {\n            nodes[i].firstChild.nodeValue = text;\n            unwrap(nodes[i]);\n          } else {\n            removeNode(editor.dom, nodes[i]);\n          }\n          while (nodes[++i]) {\n            matchIndex = parseInt(getElmIndex(nodes[i]), 10);\n            if (matchIndex === currentMatchIndex) {\n              removeNode(editor.dom, nodes[i]);\n            } else {\n              i--;\n              break;\n            }\n          }\n          if (forward) {\n            nextIndex--;\n          }\n        } else if (currentMatchIndex > currentIndexState.get()) {\n          nodes[i].setAttribute('data-mce-index', currentMatchIndex - 1);\n        }\n      }\n      currentIndexState.set(nextIndex);\n      if (forward) {\n        hasMore = hasNext(editor, currentIndexState);\n        next(editor, currentIndexState);\n      } else {\n        hasMore = hasPrev(editor, currentIndexState);\n        prev(editor, currentIndexState);\n      }\n      return !all && hasMore;\n    };\n    var done = function (editor, currentIndexState, keepEditorSelection) {\n      var i, nodes, startContainer, endContainer;\n      nodes = global$1.toArray(editor.getBody().getElementsByTagName('span'));\n      for (i = 0; i < nodes.length; i++) {\n        var nodeIndex = getElmIndex(nodes[i]);\n        if (nodeIndex !== null && nodeIndex.length) {\n          if (nodeIndex === currentIndexState.get().toString()) {\n            if (!startContainer) {\n              startContainer = nodes[i].firstChild;\n            }\n            endContainer = nodes[i].firstChild;\n          }\n          unwrap(nodes[i]);\n        }\n      }\n      if (startContainer && endContainer) {\n        var rng = editor.dom.createRng();\n        rng.setStart(startContainer, 0);\n        rng.setEnd(endContainer, endContainer.data.length);\n        if (keepEditorSelection !== false) {\n          editor.selection.setRng(rng);\n        }\n        return rng;\n      }\n    };\n    var hasNext = function (editor, currentIndexState) {\n      return findSpansByIndex(editor, currentIndexState.get() + 1).length > 0;\n    };\n    var hasPrev = function (editor, currentIndexState) {\n      return findSpansByIndex(editor, currentIndexState.get() - 1).length > 0;\n    };\n    var Actions = {\n      done: done,\n      find: find,\n      next: next,\n      prev: prev,\n      replace: replace,\n      hasNext: hasNext,\n      hasPrev: hasPrev\n    };\n\n    var get = function (editor, currentIndexState) {\n      var done = function (keepEditorSelection) {\n        return Actions.done(editor, currentIndexState, keepEditorSelection);\n      };\n      var find = function (text, matchCase, wholeWord) {\n        return Actions.find(editor, currentIndexState, text, matchCase, wholeWord);\n      };\n      var next = function () {\n        return Actions.next(editor, currentIndexState);\n      };\n      var prev = function () {\n        return Actions.prev(editor, currentIndexState);\n      };\n      var replace = function (text, forward, all) {\n        return Actions.replace(editor, currentIndexState, text, forward, all);\n      };\n      return {\n        done: done,\n        find: find,\n        next: next,\n        prev: prev,\n        replace: replace\n      };\n    };\n    var Api = { get: get };\n\n    var open = function (editor, currentIndexState) {\n      var last = {}, selectedText;\n      editor.undoManager.add();\n      selectedText = global$1.trim(editor.selection.getContent({ format: 'text' }));\n      function updateButtonStates() {\n        win.statusbar.find('#next').disabled(Actions.hasNext(editor, currentIndexState) === false);\n        win.statusbar.find('#prev').disabled(Actions.hasPrev(editor, currentIndexState) === false);\n      }\n      function notFoundAlert() {\n        editor.windowManager.alert('Could not find the specified string.', function () {\n          win.find('#find')[0].focus();\n        });\n      }\n      var win = editor.windowManager.open({\n        layout: 'flex',\n        pack: 'center',\n        align: 'center',\n        onClose: function () {\n          editor.focus();\n          Actions.done(editor, currentIndexState);\n          editor.undoManager.add();\n        },\n        onSubmit: function (e) {\n          var count, caseState, text, wholeWord;\n          e.preventDefault();\n          caseState = win.find('#case').checked();\n          wholeWord = win.find('#words').checked();\n          text = win.find('#find').value();\n          if (!text.length) {\n            Actions.done(editor, currentIndexState, false);\n            win.statusbar.items().slice(1).disabled(true);\n            return;\n          }\n          if (last.text === text && last.caseState === caseState && last.wholeWord === wholeWord) {\n            if (!Actions.hasNext(editor, currentIndexState)) {\n              notFoundAlert();\n              return;\n            }\n            Actions.next(editor, currentIndexState);\n            updateButtonStates();\n            return;\n          }\n          count = Actions.find(editor, currentIndexState, text, caseState, wholeWord);\n          if (!count) {\n            notFoundAlert();\n          }\n          win.statusbar.items().slice(1).disabled(count === 0);\n          updateButtonStates();\n          last = {\n            text: text,\n            caseState: caseState,\n            wholeWord: wholeWord\n          };\n        },\n        buttons: [\n          {\n            text: 'Find',\n            subtype: 'primary',\n            onclick: function () {\n              win.submit();\n            }\n          },\n          {\n            text: 'Replace',\n            disabled: true,\n            onclick: function () {\n              if (!Actions.replace(editor, currentIndexState, win.find('#replace').value())) {\n                win.statusbar.items().slice(1).disabled(true);\n                currentIndexState.set(-1);\n                last = {};\n              }\n            }\n          },\n          {\n            text: 'Replace all',\n            disabled: true,\n            onclick: function () {\n              Actions.replace(editor, currentIndexState, win.find('#replace').value(), true, true);\n              win.statusbar.items().slice(1).disabled(true);\n              last = {};\n            }\n          },\n          {\n            type: 'spacer',\n            flex: 1\n          },\n          {\n            text: 'Prev',\n            name: 'prev',\n            disabled: true,\n            onclick: function () {\n              Actions.prev(editor, currentIndexState);\n              updateButtonStates();\n            }\n          },\n          {\n            text: 'Next',\n            name: 'next',\n            disabled: true,\n            onclick: function () {\n              Actions.next(editor, currentIndexState);\n              updateButtonStates();\n            }\n          }\n        ],\n        title: 'Find and replace',\n        items: {\n          type: 'form',\n          padding: 20,\n          labelGap: 30,\n          spacing: 10,\n          items: [\n            {\n              type: 'textbox',\n              name: 'find',\n              size: 40,\n              label: 'Find',\n              value: selectedText\n            },\n            {\n              type: 'textbox',\n              name: 'replace',\n              size: 40,\n              label: 'Replace with'\n            },\n            {\n              type: 'checkbox',\n              name: 'case',\n              text: 'Match case',\n              label: ' '\n            },\n            {\n              type: 'checkbox',\n              name: 'words',\n              text: 'Whole words',\n              label: ' '\n            }\n          ]\n        }\n      });\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor, currentIndexState) {\n      editor.addCommand('SearchReplace', function () {\n        Dialog.open(editor, currentIndexState);\n      });\n    };\n    var Commands = { register: register };\n\n    var showDialog = function (editor, currentIndexState) {\n      return function () {\n        Dialog.open(editor, currentIndexState);\n      };\n    };\n    var register$1 = function (editor, currentIndexState) {\n      editor.addMenuItem('searchreplace', {\n        text: 'Find and replace',\n        shortcut: 'Meta+F',\n        onclick: showDialog(editor, currentIndexState),\n        separator: 'before',\n        context: 'edit'\n      });\n      editor.addButton('searchreplace', {\n        tooltip: 'Find and replace',\n        onclick: showDialog(editor, currentIndexState)\n      });\n      editor.shortcuts.add('Meta+F', '', showDialog(editor, currentIndexState));\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('searchreplace', function (editor) {\n      var currentIndexState = Cell(-1);\n      Commands.register(editor, currentIndexState);\n      Buttons.register(editor, currentIndexState);\n      return Api.get(editor, currentIndexState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","// Exports the \"hr\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/hr')\n//   ES2015:\n//     import 'tinymce/plugins/hr'\nrequire('./plugin.js');","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","// Exports the \"colorpicker\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/colorpicker')\n//   ES2015:\n//     import 'tinymce/plugins/colorpicker'\nrequire('./plugin.js');","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","// Exports the \"autolink\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/autolink')\n//   ES2015:\n//     import 'tinymce/plugins/autolink'\nrequire('./plugin.js');","(function () {\nvar colorpicker = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Color');\n\n    var showPreview = function (win, hexColor) {\n      win.find('#preview')[0].getEl().style.background = hexColor;\n    };\n    var setColor = function (win, value) {\n      var color = global$1(value), rgb = color.toRgb();\n      win.fromJSON({\n        r: rgb.r,\n        g: rgb.g,\n        b: rgb.b,\n        hex: color.toHex().substr(1)\n      });\n      showPreview(win, color.toHex());\n    };\n    var open = function (editor, callback, value) {\n      var win = editor.windowManager.open({\n        title: 'Color',\n        items: {\n          type: 'container',\n          layout: 'flex',\n          direction: 'row',\n          align: 'stretch',\n          padding: 5,\n          spacing: 10,\n          items: [\n            {\n              type: 'colorpicker',\n              value: value,\n              onchange: function () {\n                var rgb = this.rgb();\n                if (win) {\n                  win.find('#r').value(rgb.r);\n                  win.find('#g').value(rgb.g);\n                  win.find('#b').value(rgb.b);\n                  win.find('#hex').value(this.value().substr(1));\n                  showPreview(win, this.value());\n                }\n              }\n            },\n            {\n              type: 'form',\n              padding: 0,\n              labelGap: 5,\n              defaults: {\n                type: 'textbox',\n                size: 7,\n                value: '0',\n                flex: 1,\n                spellcheck: false,\n                onchange: function () {\n                  var colorPickerCtrl = win.find('colorpicker')[0];\n                  var name, value;\n                  name = this.name();\n                  value = this.value();\n                  if (name === 'hex') {\n                    value = '#' + value;\n                    setColor(win, value);\n                    colorPickerCtrl.value(value);\n                    return;\n                  }\n                  value = {\n                    r: win.find('#r').value(),\n                    g: win.find('#g').value(),\n                    b: win.find('#b').value()\n                  };\n                  colorPickerCtrl.value(value);\n                  setColor(win, value);\n                }\n              },\n              items: [\n                {\n                  name: 'r',\n                  label: 'R',\n                  autofocus: 1\n                },\n                {\n                  name: 'g',\n                  label: 'G'\n                },\n                {\n                  name: 'b',\n                  label: 'B'\n                },\n                {\n                  name: 'hex',\n                  label: '#',\n                  value: '000000'\n                },\n                {\n                  name: 'preview',\n                  type: 'container',\n                  border: 1\n                }\n              ]\n            }\n          ]\n        },\n        onSubmit: function () {\n          callback('#' + win.toJSON().hex);\n        }\n      });\n      setColor(win, value);\n    };\n    var Dialog = { open: open };\n\n    global.add('colorpicker', function (editor) {\n      if (!editor.settings.color_picker_callback) {\n        editor.settings.color_picker_callback = function (callback, value) {\n          Dialog.open(editor, callback, value);\n        };\n      }\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","// Exports the \"fullscreen\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/fullscreen')\n//   ES2015:\n//     import 'tinymce/plugins/fullscreen'\nrequire('./plugin.js');","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","// Exports the \"textcolor\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/textcolor')\n//   ES2015:\n//     import 'tinymce/plugins/textcolor'\nrequire('./plugin.js');","// Exports the \"visualchars\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/visualchars')\n//   ES2015:\n//     import 'tinymce/plugins/visualchars'\nrequire('./plugin.js');","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","(function () {\nvar media = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getScripts = function (editor) {\n      return editor.getParam('media_scripts');\n    };\n    var getAudioTemplateCallback = function (editor) {\n      return editor.getParam('audio_template_callback');\n    };\n    var getVideoTemplateCallback = function (editor) {\n      return editor.getParam('video_template_callback');\n    };\n    var hasLiveEmbeds = function (editor) {\n      return editor.getParam('media_live_embeds', true);\n    };\n    var shouldFilterHtml = function (editor) {\n      return editor.getParam('media_filter_html', true);\n    };\n    var getUrlResolver = function (editor) {\n      return editor.getParam('media_url_resolver');\n    };\n    var hasAltSource = function (editor) {\n      return editor.getParam('media_alt_source', true);\n    };\n    var hasPoster = function (editor) {\n      return editor.getParam('media_poster', true);\n    };\n    var hasDimensions = function (editor) {\n      return editor.getParam('media_dimensions', true);\n    };\n    var Settings = {\n      getScripts: getScripts,\n      getAudioTemplateCallback: getAudioTemplateCallback,\n      getVideoTemplateCallback: getVideoTemplateCallback,\n      hasLiveEmbeds: hasLiveEmbeds,\n      shouldFilterHtml: shouldFilterHtml,\n      getUrlResolver: getUrlResolver,\n      hasAltSource: hasAltSource,\n      hasPoster: hasPoster,\n      hasDimensions: hasDimensions\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var hasOwnProperty = Object.hasOwnProperty;\n    var get = function (obj, key) {\n      return has(obj, key) ? Option.from(obj[key]) : Option.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.html.SaxParser');\n\n    var getVideoScriptMatch = function (prefixes, src) {\n      if (prefixes) {\n        for (var i = 0; i < prefixes.length; i++) {\n          if (src.indexOf(prefixes[i].filter) !== -1) {\n            return prefixes[i];\n          }\n        }\n      }\n    };\n    var VideoScript = { getVideoScriptMatch: getVideoScriptMatch };\n\n    var DOM = global$3.DOM;\n    var trimPx = function (value) {\n      return value.replace(/px$/, '');\n    };\n    var getEphoxEmbedData = function (attrs) {\n      var style = attrs.map.style;\n      var styles = style ? DOM.parseStyle(style) : {};\n      return {\n        type: 'ephox-embed-iri',\n        source1: attrs.map['data-ephox-embed-iri'],\n        source2: '',\n        poster: '',\n        width: get(styles, 'max-width').map(trimPx).getOr(''),\n        height: get(styles, 'max-height').map(trimPx).getOr('')\n      };\n    };\n    var htmlToData = function (prefixes, html) {\n      var isEphoxEmbed = Cell(false);\n      var data = {};\n      global$4({\n        validate: false,\n        allow_conditional_comments: true,\n        special: 'script,noscript',\n        start: function (name, attrs) {\n          if (isEphoxEmbed.get()) ; else if (has(attrs.map, 'data-ephox-embed-iri')) {\n            isEphoxEmbed.set(true);\n            data = getEphoxEmbedData(attrs);\n          } else {\n            if (!data.source1 && name === 'param') {\n              data.source1 = attrs.map.movie;\n            }\n            if (name === 'iframe' || name === 'object' || name === 'embed' || name === 'video' || name === 'audio') {\n              if (!data.type) {\n                data.type = name;\n              }\n              data = global$2.extend(attrs.map, data);\n            }\n            if (name === 'script') {\n              var videoScript = VideoScript.getVideoScriptMatch(prefixes, attrs.map.src);\n              if (!videoScript) {\n                return;\n              }\n              data = {\n                type: 'script',\n                source1: attrs.map.src,\n                width: videoScript.width,\n                height: videoScript.height\n              };\n            }\n            if (name === 'source') {\n              if (!data.source1) {\n                data.source1 = attrs.map.src;\n              } else if (!data.source2) {\n                data.source2 = attrs.map.src;\n              }\n            }\n            if (name === 'img' && !data.poster) {\n              data.poster = attrs.map.src;\n            }\n          }\n        }\n      }).parse(html);\n      data.source1 = data.source1 || data.src || data.data;\n      data.source2 = data.source2 || '';\n      data.poster = data.poster || '';\n      return data;\n    };\n    var HtmlToData = { htmlToData: htmlToData };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var guess = function (url) {\n      var mimes = {\n        mp3: 'audio/mpeg',\n        wav: 'audio/wav',\n        mp4: 'video/mp4',\n        webm: 'video/webm',\n        ogg: 'video/ogg',\n        swf: 'application/x-shockwave-flash'\n      };\n      var fileEnd = url.toLowerCase().split('.').pop();\n      var mime = mimes[fileEnd];\n      return mime ? mime : '';\n    };\n    var Mime = { guess: guess };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.html.Schema');\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.html.Writer');\n\n    var DOM$1 = global$3.DOM;\n    var addPx = function (value) {\n      return /^[0-9.]+$/.test(value) ? value + 'px' : value;\n    };\n    var setAttributes = function (attrs, updatedAttrs) {\n      for (var name in updatedAttrs) {\n        var value = '' + updatedAttrs[name];\n        if (attrs.map[name]) {\n          var i = attrs.length;\n          while (i--) {\n            var attr = attrs[i];\n            if (attr.name === name) {\n              if (value) {\n                attrs.map[name] = value;\n                attr.value = value;\n              } else {\n                delete attrs.map[name];\n                attrs.splice(i, 1);\n              }\n            }\n          }\n        } else if (value) {\n          attrs.push({\n            name: name,\n            value: value\n          });\n          attrs.map[name] = value;\n        }\n      }\n    };\n    var updateEphoxEmbed = function (data, attrs) {\n      var style = attrs.map.style;\n      var styleMap = style ? DOM$1.parseStyle(style) : {};\n      styleMap['max-width'] = addPx(data.width);\n      styleMap['max-height'] = addPx(data.height);\n      setAttributes(attrs, { style: DOM$1.serializeStyle(styleMap) });\n    };\n    var updateHtml = function (html, data, updateAll) {\n      var writer = global$7();\n      var isEphoxEmbed = Cell(false);\n      var sourceCount = 0;\n      var hasImage;\n      global$4({\n        validate: false,\n        allow_conditional_comments: true,\n        special: 'script,noscript',\n        comment: function (text) {\n          writer.comment(text);\n        },\n        cdata: function (text) {\n          writer.cdata(text);\n        },\n        text: function (text, raw) {\n          writer.text(text, raw);\n        },\n        start: function (name, attrs, empty) {\n          if (isEphoxEmbed.get()) ; else if (has(attrs.map, 'data-ephox-embed-iri')) {\n            isEphoxEmbed.set(true);\n            updateEphoxEmbed(data, attrs);\n          } else {\n            switch (name) {\n            case 'video':\n            case 'object':\n            case 'embed':\n            case 'img':\n            case 'iframe':\n              if (data.height !== undefined && data.width !== undefined) {\n                setAttributes(attrs, {\n                  width: data.width,\n                  height: data.height\n                });\n              }\n              break;\n            }\n            if (updateAll) {\n              switch (name) {\n              case 'video':\n                setAttributes(attrs, {\n                  poster: data.poster,\n                  src: ''\n                });\n                if (data.source2) {\n                  setAttributes(attrs, { src: '' });\n                }\n                break;\n              case 'iframe':\n                setAttributes(attrs, { src: data.source1 });\n                break;\n              case 'source':\n                sourceCount++;\n                if (sourceCount <= 2) {\n                  setAttributes(attrs, {\n                    src: data['source' + sourceCount],\n                    type: data['source' + sourceCount + 'mime']\n                  });\n                  if (!data['source' + sourceCount]) {\n                    return;\n                  }\n                }\n                break;\n              case 'img':\n                if (!data.poster) {\n                  return;\n                }\n                hasImage = true;\n                break;\n              }\n            }\n          }\n          writer.start(name, attrs, empty);\n        },\n        end: function (name) {\n          if (!isEphoxEmbed.get()) {\n            if (name === 'video' && updateAll) {\n              for (var index = 1; index <= 2; index++) {\n                if (data['source' + index]) {\n                  var attrs = [];\n                  attrs.map = {};\n                  if (sourceCount < index) {\n                    setAttributes(attrs, {\n                      src: data['source' + index],\n                      type: data['source' + index + 'mime']\n                    });\n                    writer.start('source', attrs, true);\n                  }\n                }\n              }\n            }\n            if (data.poster && name === 'object' && updateAll && !hasImage) {\n              var imgAttrs = [];\n              imgAttrs.map = {};\n              setAttributes(imgAttrs, {\n                src: data.poster,\n                width: data.width,\n                height: data.height\n              });\n              writer.start('img', imgAttrs, true);\n            }\n          }\n          writer.end(name);\n        }\n      }, global$6({})).parse(html);\n      return writer.getContent();\n    };\n    var UpdateHtml = { updateHtml: updateHtml };\n\n    var urlPatterns = [\n      {\n        regex: /youtu\\.be\\/([\\w\\-_\\?&=.]+)/i,\n        type: 'iframe',\n        w: 560,\n        h: 314,\n        url: '//www.youtube.com/embed/$1',\n        allowFullscreen: true\n      },\n      {\n        regex: /youtube\\.com(.+)v=([^&]+)(&([a-z0-9&=\\-_]+))?/i,\n        type: 'iframe',\n        w: 560,\n        h: 314,\n        url: '//www.youtube.com/embed/$2?$4',\n        allowFullscreen: true\n      },\n      {\n        regex: /youtube.com\\/embed\\/([a-z0-9\\?&=\\-_]+)/i,\n        type: 'iframe',\n        w: 560,\n        h: 314,\n        url: '//www.youtube.com/embed/$1',\n        allowFullscreen: true\n      },\n      {\n        regex: /vimeo\\.com\\/([0-9]+)/,\n        type: 'iframe',\n        w: 425,\n        h: 350,\n        url: '//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc',\n        allowFullscreen: true\n      },\n      {\n        regex: /vimeo\\.com\\/(.*)\\/([0-9]+)/,\n        type: 'iframe',\n        w: 425,\n        h: 350,\n        url: '//player.vimeo.com/video/$2?title=0&amp;byline=0',\n        allowFullscreen: true\n      },\n      {\n        regex: /maps\\.google\\.([a-z]{2,3})\\/maps\\/(.+)msid=(.+)/,\n        type: 'iframe',\n        w: 425,\n        h: 350,\n        url: '//maps.google.com/maps/ms?msid=$2&output=embed\"',\n        allowFullscreen: false\n      },\n      {\n        regex: /dailymotion\\.com\\/video\\/([^_]+)/,\n        type: 'iframe',\n        w: 480,\n        h: 270,\n        url: '//www.dailymotion.com/embed/video/$1',\n        allowFullscreen: true\n      },\n      {\n        regex: /dai\\.ly\\/([^_]+)/,\n        type: 'iframe',\n        w: 480,\n        h: 270,\n        url: '//www.dailymotion.com/embed/video/$1',\n        allowFullscreen: true\n      }\n    ];\n    var getUrl = function (pattern, url) {\n      var match = pattern.regex.exec(url);\n      var newUrl = pattern.url;\n      var _loop_1 = function (i) {\n        newUrl = newUrl.replace('$' + i, function () {\n          return match[i] ? match[i] : '';\n        });\n      };\n      for (var i = 0; i < match.length; i++) {\n        _loop_1(i);\n      }\n      return newUrl.replace(/\\?$/, '');\n    };\n    var matchPattern = function (url) {\n      var pattern = urlPatterns.filter(function (pattern) {\n        return pattern.regex.test(url);\n      });\n      if (pattern.length > 0) {\n        return global$2.extend({}, pattern[0], { url: getUrl(pattern[0], url) });\n      } else {\n        return null;\n      }\n    };\n\n    var getIframeHtml = function (data) {\n      var allowFullscreen = data.allowFullscreen ? ' allowFullscreen=\"1\"' : '';\n      return '<iframe src=\"' + data.source1 + '\" width=\"' + data.width + '\" height=\"' + data.height + '\"' + allowFullscreen + '></iframe>';\n    };\n    var getFlashHtml = function (data) {\n      var html = '<object data=\"' + data.source1 + '\" width=\"' + data.width + '\" height=\"' + data.height + '\" type=\"application/x-shockwave-flash\">';\n      if (data.poster) {\n        html += '<img src=\"' + data.poster + '\" width=\"' + data.width + '\" height=\"' + data.height + '\" />';\n      }\n      html += '</object>';\n      return html;\n    };\n    var getAudioHtml = function (data, audioTemplateCallback) {\n      if (audioTemplateCallback) {\n        return audioTemplateCallback(data);\n      } else {\n        return '<audio controls=\"controls\" src=\"' + data.source1 + '\">' + (data.source2 ? '\\n<source src=\"' + data.source2 + '\"' + (data.source2mime ? ' type=\"' + data.source2mime + '\"' : '') + ' />\\n' : '') + '</audio>';\n      }\n    };\n    var getVideoHtml = function (data, videoTemplateCallback) {\n      if (videoTemplateCallback) {\n        return videoTemplateCallback(data);\n      } else {\n        return '<video width=\"' + data.width + '\" height=\"' + data.height + '\"' + (data.poster ? ' poster=\"' + data.poster + '\"' : '') + ' controls=\"controls\">\\n' + '<source src=\"' + data.source1 + '\"' + (data.source1mime ? ' type=\"' + data.source1mime + '\"' : '') + ' />\\n' + (data.source2 ? '<source src=\"' + data.source2 + '\"' + (data.source2mime ? ' type=\"' + data.source2mime + '\"' : '') + ' />\\n' : '') + '</video>';\n      }\n    };\n    var getScriptHtml = function (data) {\n      return '<script src=\"' + data.source1 + '\"></script>';\n    };\n    var dataToHtml = function (editor, dataIn) {\n      var data = global$2.extend({}, dataIn);\n      if (!data.source1) {\n        global$2.extend(data, HtmlToData.htmlToData(Settings.getScripts(editor), data.embed));\n        if (!data.source1) {\n          return '';\n        }\n      }\n      if (!data.source2) {\n        data.source2 = '';\n      }\n      if (!data.poster) {\n        data.poster = '';\n      }\n      data.source1 = editor.convertURL(data.source1, 'source');\n      data.source2 = editor.convertURL(data.source2, 'source');\n      data.source1mime = Mime.guess(data.source1);\n      data.source2mime = Mime.guess(data.source2);\n      data.poster = editor.convertURL(data.poster, 'poster');\n      var pattern = matchPattern(data.source1);\n      if (pattern) {\n        data.source1 = pattern.url;\n        data.type = pattern.type;\n        data.allowFullscreen = pattern.allowFullscreen;\n        data.width = data.width || pattern.w;\n        data.height = data.height || pattern.h;\n      }\n      if (data.embed) {\n        return UpdateHtml.updateHtml(data.embed, data, true);\n      } else {\n        var videoScript = VideoScript.getVideoScriptMatch(Settings.getScripts(editor), data.source1);\n        if (videoScript) {\n          data.type = 'script';\n          data.width = videoScript.width;\n          data.height = videoScript.height;\n        }\n        var audioTemplateCallback = Settings.getAudioTemplateCallback(editor);\n        var videoTemplateCallback = Settings.getVideoTemplateCallback(editor);\n        data.width = data.width || 300;\n        data.height = data.height || 150;\n        global$2.each(data, function (value, key) {\n          data[key] = editor.dom.encode(value);\n        });\n        if (data.type === 'iframe') {\n          return getIframeHtml(data);\n        } else if (data.source1mime === 'application/x-shockwave-flash') {\n          return getFlashHtml(data);\n        } else if (data.source1mime.indexOf('audio') !== -1) {\n          return getAudioHtml(data, audioTemplateCallback);\n        } else if (data.type === 'script') {\n          return getScriptHtml(data);\n        } else {\n          return getVideoHtml(data, videoTemplateCallback);\n        }\n      }\n    };\n    var DataToHtml = { dataToHtml: dataToHtml };\n\n    var cache = {};\n    var embedPromise = function (data, dataToHtml, handler) {\n      return new global$5(function (res, rej) {\n        var wrappedResolve = function (response) {\n          if (response.html) {\n            cache[data.source1] = response;\n          }\n          return res({\n            url: data.source1,\n            html: response.html ? response.html : dataToHtml(data)\n          });\n        };\n        if (cache[data.source1]) {\n          wrappedResolve(cache[data.source1]);\n        } else {\n          handler({ url: data.source1 }, wrappedResolve, rej);\n        }\n      });\n    };\n    var defaultPromise = function (data, dataToHtml) {\n      return new global$5(function (res) {\n        res({\n          html: dataToHtml(data),\n          url: data.source1\n        });\n      });\n    };\n    var loadedData = function (editor) {\n      return function (data) {\n        return DataToHtml.dataToHtml(editor, data);\n      };\n    };\n    var getEmbedHtml = function (editor, data) {\n      var embedHandler = Settings.getUrlResolver(editor);\n      return embedHandler ? embedPromise(data, loadedData(editor), embedHandler) : defaultPromise(data, loadedData(editor));\n    };\n    var isCached = function (url) {\n      return cache.hasOwnProperty(url);\n    };\n    var Service = {\n      getEmbedHtml: getEmbedHtml,\n      isCached: isCached\n    };\n\n    var trimPx$1 = function (value) {\n      return value.replace(/px$/, '');\n    };\n    var addPx$1 = function (value) {\n      return /^[0-9.]+$/.test(value) ? value + 'px' : value;\n    };\n    var getSize = function (name) {\n      return function (elm) {\n        return elm ? trimPx$1(elm.style[name]) : '';\n      };\n    };\n    var setSize = function (name) {\n      return function (elm, value) {\n        if (elm) {\n          elm.style[name] = addPx$1(value);\n        }\n      };\n    };\n    var Size = {\n      getMaxWidth: getSize('maxWidth'),\n      getMaxHeight: getSize('maxHeight'),\n      setMaxWidth: setSize('maxWidth'),\n      setMaxHeight: setSize('maxHeight')\n    };\n\n    var doSyncSize = function (widthCtrl, heightCtrl) {\n      widthCtrl.state.set('oldVal', widthCtrl.value());\n      heightCtrl.state.set('oldVal', heightCtrl.value());\n    };\n    var doSizeControls = function (win, f) {\n      var widthCtrl = win.find('#width')[0];\n      var heightCtrl = win.find('#height')[0];\n      var constrained = win.find('#constrain')[0];\n      if (widthCtrl && heightCtrl && constrained) {\n        f(widthCtrl, heightCtrl, constrained.checked());\n      }\n    };\n    var doUpdateSize = function (widthCtrl, heightCtrl, isContrained) {\n      var oldWidth = widthCtrl.state.get('oldVal');\n      var oldHeight = heightCtrl.state.get('oldVal');\n      var newWidth = widthCtrl.value();\n      var newHeight = heightCtrl.value();\n      if (isContrained && oldWidth && oldHeight && newWidth && newHeight) {\n        if (newWidth !== oldWidth) {\n          newHeight = Math.round(newWidth / oldWidth * newHeight);\n          if (!isNaN(newHeight)) {\n            heightCtrl.value(newHeight);\n          }\n        } else {\n          newWidth = Math.round(newHeight / oldHeight * newWidth);\n          if (!isNaN(newWidth)) {\n            widthCtrl.value(newWidth);\n          }\n        }\n      }\n      doSyncSize(widthCtrl, heightCtrl);\n    };\n    var syncSize = function (win) {\n      doSizeControls(win, doSyncSize);\n    };\n    var updateSize = function (win) {\n      doSizeControls(win, doUpdateSize);\n    };\n    var createUi = function (onChange) {\n      var recalcSize = function () {\n        onChange(function (win) {\n          updateSize(win);\n        });\n      };\n      return {\n        type: 'container',\n        label: 'Dimensions',\n        layout: 'flex',\n        align: 'center',\n        spacing: 5,\n        items: [\n          {\n            name: 'width',\n            type: 'textbox',\n            maxLength: 5,\n            size: 5,\n            onchange: recalcSize,\n            ariaLabel: 'Width'\n          },\n          {\n            type: 'label',\n            text: 'x'\n          },\n          {\n            name: 'height',\n            type: 'textbox',\n            maxLength: 5,\n            size: 5,\n            onchange: recalcSize,\n            ariaLabel: 'Height'\n          },\n          {\n            name: 'constrain',\n            type: 'checkbox',\n            checked: true,\n            text: 'Constrain proportions'\n          }\n        ]\n      };\n    };\n    var SizeManager = {\n      createUi: createUi,\n      syncSize: syncSize,\n      updateSize: updateSize\n    };\n\n    var embedChange = global$1.ie && global$1.ie <= 8 ? 'onChange' : 'onInput';\n    var handleError = function (editor) {\n      return function (error) {\n        var errorMessage = error && error.msg ? 'Media embed handler error: ' + error.msg : 'Media embed handler threw unknown error.';\n        editor.notificationManager.open({\n          type: 'error',\n          text: errorMessage\n        });\n      };\n    };\n    var getData = function (editor) {\n      var element = editor.selection.getNode();\n      var dataEmbed = element.getAttribute('data-ephox-embed-iri');\n      if (dataEmbed) {\n        return {\n          'source1': dataEmbed,\n          'data-ephox-embed-iri': dataEmbed,\n          'width': Size.getMaxWidth(element),\n          'height': Size.getMaxHeight(element)\n        };\n      }\n      return element.getAttribute('data-mce-object') ? HtmlToData.htmlToData(Settings.getScripts(editor), editor.serializer.serialize(element, { selection: true })) : {};\n    };\n    var getSource = function (editor) {\n      var elm = editor.selection.getNode();\n      if (elm.getAttribute('data-mce-object') || elm.getAttribute('data-ephox-embed-iri')) {\n        return editor.selection.getContent();\n      }\n    };\n    var addEmbedHtml = function (win, editor) {\n      return function (response) {\n        var html = response.html;\n        var embed = win.find('#embed')[0];\n        var data = global$2.extend(HtmlToData.htmlToData(Settings.getScripts(editor), html), { source1: response.url });\n        win.fromJSON(data);\n        if (embed) {\n          embed.value(html);\n          SizeManager.updateSize(win);\n        }\n      };\n    };\n    var selectPlaceholder = function (editor, beforeObjects) {\n      var i;\n      var y;\n      var afterObjects = editor.dom.select('img[data-mce-object]');\n      for (i = 0; i < beforeObjects.length; i++) {\n        for (y = afterObjects.length - 1; y >= 0; y--) {\n          if (beforeObjects[i] === afterObjects[y]) {\n            afterObjects.splice(y, 1);\n          }\n        }\n      }\n      editor.selection.select(afterObjects[0]);\n    };\n    var handleInsert = function (editor, html) {\n      var beforeObjects = editor.dom.select('img[data-mce-object]');\n      editor.insertContent(html);\n      selectPlaceholder(editor, beforeObjects);\n      editor.nodeChanged();\n    };\n    var submitForm = function (win, editor) {\n      var data = win.toJSON();\n      data.embed = UpdateHtml.updateHtml(data.embed, data);\n      if (data.embed && Service.isCached(data.source1)) {\n        handleInsert(editor, data.embed);\n      } else {\n        Service.getEmbedHtml(editor, data).then(function (response) {\n          handleInsert(editor, response.html);\n        }).catch(handleError(editor));\n      }\n    };\n    var populateMeta = function (win, meta) {\n      global$2.each(meta, function (value, key) {\n        win.find('#' + key).value(value);\n      });\n    };\n    var showDialog = function (editor) {\n      var win;\n      var data;\n      var generalFormItems = [{\n          name: 'source1',\n          type: 'filepicker',\n          filetype: 'media',\n          size: 40,\n          autofocus: true,\n          label: 'Source',\n          onpaste: function () {\n            setTimeout(function () {\n              Service.getEmbedHtml(editor, win.toJSON()).then(addEmbedHtml(win, editor)).catch(handleError(editor));\n            }, 1);\n          },\n          onchange: function (e) {\n            Service.getEmbedHtml(editor, win.toJSON()).then(addEmbedHtml(win, editor)).catch(handleError(editor));\n            populateMeta(win, e.meta);\n          },\n          onbeforecall: function (e) {\n            e.meta = win.toJSON();\n          }\n        }];\n      var advancedFormItems = [];\n      var reserialise = function (update) {\n        update(win);\n        data = win.toJSON();\n        win.find('#embed').value(UpdateHtml.updateHtml(data.embed, data));\n      };\n      if (Settings.hasAltSource(editor)) {\n        advancedFormItems.push({\n          name: 'source2',\n          type: 'filepicker',\n          filetype: 'media',\n          size: 40,\n          label: 'Alternative source'\n        });\n      }\n      if (Settings.hasPoster(editor)) {\n        advancedFormItems.push({\n          name: 'poster',\n          type: 'filepicker',\n          filetype: 'image',\n          size: 40,\n          label: 'Poster'\n        });\n      }\n      if (Settings.hasDimensions(editor)) {\n        var control = SizeManager.createUi(reserialise);\n        generalFormItems.push(control);\n      }\n      data = getData(editor);\n      var embedTextBox = {\n        id: 'mcemediasource',\n        type: 'textbox',\n        flex: 1,\n        name: 'embed',\n        value: getSource(editor),\n        multiline: true,\n        rows: 5,\n        label: 'Source'\n      };\n      var updateValueOnChange = function () {\n        data = global$2.extend({}, HtmlToData.htmlToData(Settings.getScripts(editor), this.value()));\n        this.parent().parent().fromJSON(data);\n      };\n      embedTextBox[embedChange] = updateValueOnChange;\n      var body = [\n        {\n          title: 'General',\n          type: 'form',\n          items: generalFormItems\n        },\n        {\n          title: 'Embed',\n          type: 'container',\n          layout: 'flex',\n          direction: 'column',\n          align: 'stretch',\n          padding: 10,\n          spacing: 10,\n          items: [\n            {\n              type: 'label',\n              text: 'Paste your embed code below:',\n              forId: 'mcemediasource'\n            },\n            embedTextBox\n          ]\n        }\n      ];\n      if (advancedFormItems.length > 0) {\n        body.push({\n          title: 'Advanced',\n          type: 'form',\n          items: advancedFormItems\n        });\n      }\n      win = editor.windowManager.open({\n        title: 'Insert/edit media',\n        data: data,\n        bodyType: 'tabpanel',\n        body: body,\n        onSubmit: function () {\n          SizeManager.updateSize(win);\n          submitForm(win, editor);\n        }\n      });\n      SizeManager.syncSize(win);\n    };\n    var Dialog = { showDialog: showDialog };\n\n    var get$1 = function (editor) {\n      var showDialog = function () {\n        Dialog.showDialog(editor);\n      };\n      return { showDialog: showDialog };\n    };\n    var Api = { get: get$1 };\n\n    var register = function (editor) {\n      var showDialog = function () {\n        Dialog.showDialog(editor);\n      };\n      editor.addCommand('mceMedia', showDialog);\n    };\n    var Commands = { register: register };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.html.Node');\n\n    var sanitize = function (editor, html) {\n      if (Settings.shouldFilterHtml(editor) === false) {\n        return html;\n      }\n      var writer = global$7();\n      var blocked;\n      global$4({\n        validate: false,\n        allow_conditional_comments: false,\n        special: 'script,noscript',\n        comment: function (text) {\n          writer.comment(text);\n        },\n        cdata: function (text) {\n          writer.cdata(text);\n        },\n        text: function (text, raw) {\n          writer.text(text, raw);\n        },\n        start: function (name, attrs, empty) {\n          blocked = true;\n          if (name === 'script' || name === 'noscript' || name === 'svg') {\n            return;\n          }\n          for (var i = attrs.length - 1; i >= 0; i--) {\n            var attrName = attrs[i].name;\n            if (attrName.indexOf('on') === 0) {\n              delete attrs.map[attrName];\n              attrs.splice(i, 1);\n            }\n            if (attrName === 'style') {\n              attrs[i].value = editor.dom.serializeStyle(editor.dom.parseStyle(attrs[i].value), name);\n            }\n          }\n          writer.start(name, attrs, empty);\n          blocked = false;\n        },\n        end: function (name) {\n          if (blocked) {\n            return;\n          }\n          writer.end(name);\n        }\n      }, global$6({})).parse(html);\n      return writer.getContent();\n    };\n    var Sanitize = { sanitize: sanitize };\n\n    var createPlaceholderNode = function (editor, node) {\n      var placeHolder;\n      var name = node.name;\n      placeHolder = new global$8('img', 1);\n      placeHolder.shortEnded = true;\n      retainAttributesAndInnerHtml(editor, node, placeHolder);\n      placeHolder.attr({\n        'width': node.attr('width') || '300',\n        'height': node.attr('height') || (name === 'audio' ? '30' : '150'),\n        'style': node.attr('style'),\n        'src': global$1.transparentSrc,\n        'data-mce-object': name,\n        'class': 'mce-object mce-object-' + name\n      });\n      return placeHolder;\n    };\n    var createPreviewIframeNode = function (editor, node) {\n      var previewWrapper;\n      var previewNode;\n      var shimNode;\n      var name = node.name;\n      previewWrapper = new global$8('span', 1);\n      previewWrapper.attr({\n        'contentEditable': 'false',\n        'style': node.attr('style'),\n        'data-mce-object': name,\n        'class': 'mce-preview-object mce-object-' + name\n      });\n      retainAttributesAndInnerHtml(editor, node, previewWrapper);\n      previewNode = new global$8(name, 1);\n      previewNode.attr({\n        src: node.attr('src'),\n        allowfullscreen: node.attr('allowfullscreen'),\n        style: node.attr('style'),\n        class: node.attr('class'),\n        width: node.attr('width'),\n        height: node.attr('height'),\n        frameborder: '0'\n      });\n      shimNode = new global$8('span', 1);\n      shimNode.attr('class', 'mce-shim');\n      previewWrapper.append(previewNode);\n      previewWrapper.append(shimNode);\n      return previewWrapper;\n    };\n    var retainAttributesAndInnerHtml = function (editor, sourceNode, targetNode) {\n      var attrName;\n      var attrValue;\n      var attribs;\n      var ai;\n      var innerHtml;\n      attribs = sourceNode.attributes;\n      ai = attribs.length;\n      while (ai--) {\n        attrName = attribs[ai].name;\n        attrValue = attribs[ai].value;\n        if (attrName !== 'width' && attrName !== 'height' && attrName !== 'style') {\n          if (attrName === 'data' || attrName === 'src') {\n            attrValue = editor.convertURL(attrValue, attrName);\n          }\n          targetNode.attr('data-mce-p-' + attrName, attrValue);\n        }\n      }\n      innerHtml = sourceNode.firstChild && sourceNode.firstChild.value;\n      if (innerHtml) {\n        targetNode.attr('data-mce-html', escape(Sanitize.sanitize(editor, innerHtml)));\n        targetNode.firstChild = null;\n      }\n    };\n    var isWithinEphoxEmbed = function (node) {\n      while (node = node.parent) {\n        if (node.attr('data-ephox-embed-iri')) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var placeHolderConverter = function (editor) {\n      return function (nodes) {\n        var i = nodes.length;\n        var node;\n        var videoScript;\n        while (i--) {\n          node = nodes[i];\n          if (!node.parent) {\n            continue;\n          }\n          if (node.parent.attr('data-mce-object')) {\n            continue;\n          }\n          if (node.name === 'script') {\n            videoScript = VideoScript.getVideoScriptMatch(Settings.getScripts(editor), node.attr('src'));\n            if (!videoScript) {\n              continue;\n            }\n          }\n          if (videoScript) {\n            if (videoScript.width) {\n              node.attr('width', videoScript.width.toString());\n            }\n            if (videoScript.height) {\n              node.attr('height', videoScript.height.toString());\n            }\n          }\n          if (node.name === 'iframe' && Settings.hasLiveEmbeds(editor) && global$1.ceFalse) {\n            if (!isWithinEphoxEmbed(node)) {\n              node.replace(createPreviewIframeNode(editor, node));\n            }\n          } else {\n            if (!isWithinEphoxEmbed(node)) {\n              node.replace(createPlaceholderNode(editor, node));\n            }\n          }\n        }\n      };\n    };\n    var Nodes = {\n      createPreviewIframeNode: createPreviewIframeNode,\n      createPlaceholderNode: createPlaceholderNode,\n      placeHolderConverter: placeHolderConverter\n    };\n\n    var setup = function (editor) {\n      editor.on('preInit', function () {\n        var specialElements = editor.schema.getSpecialElements();\n        global$2.each('video audio iframe object'.split(' '), function (name) {\n          specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n        });\n        var boolAttrs = editor.schema.getBoolAttrs();\n        global$2.each('webkitallowfullscreen mozallowfullscreen allowfullscreen'.split(' '), function (name) {\n          boolAttrs[name] = {};\n        });\n        editor.parser.addNodeFilter('iframe,video,audio,object,embed,script', Nodes.placeHolderConverter(editor));\n        editor.serializer.addAttributeFilter('data-mce-object', function (nodes, name) {\n          var i = nodes.length;\n          var node;\n          var realElm;\n          var ai;\n          var attribs;\n          var innerHtml;\n          var innerNode;\n          var realElmName;\n          var className;\n          while (i--) {\n            node = nodes[i];\n            if (!node.parent) {\n              continue;\n            }\n            realElmName = node.attr(name);\n            realElm = new global$8(realElmName, 1);\n            if (realElmName !== 'audio' && realElmName !== 'script') {\n              className = node.attr('class');\n              if (className && className.indexOf('mce-preview-object') !== -1) {\n                realElm.attr({\n                  width: node.firstChild.attr('width'),\n                  height: node.firstChild.attr('height')\n                });\n              } else {\n                realElm.attr({\n                  width: node.attr('width'),\n                  height: node.attr('height')\n                });\n              }\n            }\n            realElm.attr({ style: node.attr('style') });\n            attribs = node.attributes;\n            ai = attribs.length;\n            while (ai--) {\n              var attrName = attribs[ai].name;\n              if (attrName.indexOf('data-mce-p-') === 0) {\n                realElm.attr(attrName.substr(11), attribs[ai].value);\n              }\n            }\n            if (realElmName === 'script') {\n              realElm.attr('type', 'text/javascript');\n            }\n            innerHtml = node.attr('data-mce-html');\n            if (innerHtml) {\n              innerNode = new global$8('#text', 3);\n              innerNode.raw = true;\n              innerNode.value = Sanitize.sanitize(editor, unescape(innerHtml));\n              realElm.append(innerNode);\n            }\n            node.replace(realElm);\n          }\n        });\n      });\n      editor.on('setContent', function () {\n        editor.$('span.mce-preview-object').each(function (index, elm) {\n          var $elm = editor.$(elm);\n          if ($elm.find('span.mce-shim', elm).length === 0) {\n            $elm.append('<span class=\"mce-shim\"></span>');\n          }\n        });\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var setup$1 = function (editor) {\n      editor.on('ResolveName', function (e) {\n        var name;\n        if (e.target.nodeType === 1 && (name = e.target.getAttribute('data-mce-object'))) {\n          e.name = name;\n        }\n      });\n    };\n    var ResolveName = { setup: setup$1 };\n\n    var setup$2 = function (editor) {\n      editor.on('click keyup', function () {\n        var selectedNode = editor.selection.getNode();\n        if (selectedNode && editor.dom.hasClass(selectedNode, 'mce-preview-object')) {\n          if (editor.dom.getAttrib(selectedNode, 'data-mce-selected')) {\n            selectedNode.setAttribute('data-mce-selected', '2');\n          }\n        }\n      });\n      editor.on('ObjectSelected', function (e) {\n        var objectType = e.target.getAttribute('data-mce-object');\n        if (objectType === 'audio' || objectType === 'script') {\n          e.preventDefault();\n        }\n      });\n      editor.on('objectResized', function (e) {\n        var target = e.target;\n        var html;\n        if (target.getAttribute('data-mce-object')) {\n          html = target.getAttribute('data-mce-html');\n          if (html) {\n            html = unescape(html);\n            target.setAttribute('data-mce-html', escape(UpdateHtml.updateHtml(html, {\n              width: e.width,\n              height: e.height\n            })));\n          }\n        }\n      });\n    };\n    var Selection = { setup: setup$2 };\n\n    var register$1 = function (editor) {\n      editor.addButton('media', {\n        tooltip: 'Insert/edit media',\n        cmd: 'mceMedia',\n        stateSelector: [\n          'img[data-mce-object]',\n          'span[data-mce-object]',\n          'div[data-ephox-embed-iri]'\n        ]\n      });\n      editor.addMenuItem('media', {\n        icon: 'media',\n        text: 'Media',\n        cmd: 'mceMedia',\n        context: 'insert',\n        prependToContext: true\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('media', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n      ResolveName.setup(editor);\n      FilterContent.setup(editor);\n      Selection.setup(editor);\n      return Api.get(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","(function () {\nvar importcss = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var shouldMergeClasses = function (editor) {\n      return editor.getParam('importcss_merge_classes');\n    };\n    var shouldImportExclusive = function (editor) {\n      return editor.getParam('importcss_exclusive');\n    };\n    var getSelectorConverter = function (editor) {\n      return editor.getParam('importcss_selector_converter');\n    };\n    var getSelectorFilter = function (editor) {\n      return editor.getParam('importcss_selector_filter');\n    };\n    var getCssGroups = function (editor) {\n      return editor.getParam('importcss_groups');\n    };\n    var shouldAppend = function (editor) {\n      return editor.getParam('importcss_append');\n    };\n    var getFileFilter = function (editor) {\n      return editor.getParam('importcss_file_filter');\n    };\n    var Settings = {\n      shouldMergeClasses: shouldMergeClasses,\n      shouldImportExclusive: shouldImportExclusive,\n      getSelectorConverter: getSelectorConverter,\n      getSelectorFilter: getSelectorFilter,\n      getCssGroups: getCssGroups,\n      shouldAppend: shouldAppend,\n      getFileFilter: getFileFilter\n    };\n\n    var removeCacheSuffix = function (url) {\n      var cacheSuffix = global$3.cacheSuffix;\n      if (typeof url === 'string') {\n        url = url.replace('?' + cacheSuffix, '').replace('&' + cacheSuffix, '');\n      }\n      return url;\n    };\n    var isSkinContentCss = function (editor, href) {\n      var settings = editor.settings, skin = settings.skin !== false ? settings.skin || 'lightgray' : false;\n      if (skin) {\n        var skinUrl = settings.skin_url ? editor.documentBaseURI.toAbsolute(settings.skin_url) : global$2.baseURL + '/skins/' + skin;\n        return href === skinUrl + '/content' + (editor.inline ? '.inline' : '') + '.min.css';\n      }\n      return false;\n    };\n    var compileFilter = function (filter) {\n      if (typeof filter === 'string') {\n        return function (value) {\n          return value.indexOf(filter) !== -1;\n        };\n      } else if (filter instanceof RegExp) {\n        return function (value) {\n          return filter.test(value);\n        };\n      }\n      return filter;\n    };\n    var getSelectors = function (editor, doc, fileFilter) {\n      var selectors = [], contentCSSUrls = {};\n      function append(styleSheet, imported) {\n        var href = styleSheet.href, rules;\n        href = removeCacheSuffix(href);\n        if (!href || !fileFilter(href, imported) || isSkinContentCss(editor, href)) {\n          return;\n        }\n        global$4.each(styleSheet.imports, function (styleSheet) {\n          append(styleSheet, true);\n        });\n        try {\n          rules = styleSheet.cssRules || styleSheet.rules;\n        } catch (e) {\n        }\n        global$4.each(rules, function (cssRule) {\n          if (cssRule.styleSheet) {\n            append(cssRule.styleSheet, true);\n          } else if (cssRule.selectorText) {\n            global$4.each(cssRule.selectorText.split(','), function (selector) {\n              selectors.push(global$4.trim(selector));\n            });\n          }\n        });\n      }\n      global$4.each(editor.contentCSS, function (url) {\n        contentCSSUrls[url] = true;\n      });\n      if (!fileFilter) {\n        fileFilter = function (href, imported) {\n          return imported || contentCSSUrls[href];\n        };\n      }\n      try {\n        global$4.each(doc.styleSheets, function (styleSheet) {\n          append(styleSheet);\n        });\n      } catch (e) {\n      }\n      return selectors;\n    };\n    var defaultConvertSelectorToFormat = function (editor, selectorText) {\n      var format;\n      var selector = /^(?:([a-z0-9\\-_]+))?(\\.[a-z0-9_\\-\\.]+)$/i.exec(selectorText);\n      if (!selector) {\n        return;\n      }\n      var elementName = selector[1];\n      var classes = selector[2].substr(1).split('.').join(' ');\n      var inlineSelectorElements = global$4.makeMap('a,img');\n      if (selector[1]) {\n        format = { title: selectorText };\n        if (editor.schema.getTextBlockElements()[elementName]) {\n          format.block = elementName;\n        } else if (editor.schema.getBlockElements()[elementName] || inlineSelectorElements[elementName.toLowerCase()]) {\n          format.selector = elementName;\n        } else {\n          format.inline = elementName;\n        }\n      } else if (selector[2]) {\n        format = {\n          inline: 'span',\n          title: selectorText.substr(1),\n          classes: classes\n        };\n      }\n      if (Settings.shouldMergeClasses(editor) !== false) {\n        format.classes = classes;\n      } else {\n        format.attributes = { class: classes };\n      }\n      return format;\n    };\n    var getGroupsBySelector = function (groups, selector) {\n      return global$4.grep(groups, function (group) {\n        return !group.filter || group.filter(selector);\n      });\n    };\n    var compileUserDefinedGroups = function (groups) {\n      return global$4.map(groups, function (group) {\n        return global$4.extend({}, group, {\n          original: group,\n          selectors: {},\n          filter: compileFilter(group.filter),\n          item: {\n            text: group.title,\n            menu: []\n          }\n        });\n      });\n    };\n    var isExclusiveMode = function (editor, group) {\n      return group === null || Settings.shouldImportExclusive(editor) !== false;\n    };\n    var isUniqueSelector = function (editor, selector, group, globallyUniqueSelectors) {\n      return !(isExclusiveMode(editor, group) ? selector in globallyUniqueSelectors : selector in group.selectors);\n    };\n    var markUniqueSelector = function (editor, selector, group, globallyUniqueSelectors) {\n      if (isExclusiveMode(editor, group)) {\n        globallyUniqueSelectors[selector] = true;\n      } else {\n        group.selectors[selector] = true;\n      }\n    };\n    var convertSelectorToFormat = function (editor, plugin, selector, group) {\n      var selectorConverter;\n      if (group && group.selector_converter) {\n        selectorConverter = group.selector_converter;\n      } else if (Settings.getSelectorConverter(editor)) {\n        selectorConverter = Settings.getSelectorConverter(editor);\n      } else {\n        selectorConverter = function () {\n          return defaultConvertSelectorToFormat(editor, selector);\n        };\n      }\n      return selectorConverter.call(plugin, selector, group);\n    };\n    var setup = function (editor) {\n      editor.on('renderFormatsMenu', function (e) {\n        var globallyUniqueSelectors = {};\n        var selectorFilter = compileFilter(Settings.getSelectorFilter(editor)), ctrl = e.control;\n        var groups = compileUserDefinedGroups(Settings.getCssGroups(editor));\n        var processSelector = function (selector, group) {\n          if (isUniqueSelector(editor, selector, group, globallyUniqueSelectors)) {\n            markUniqueSelector(editor, selector, group, globallyUniqueSelectors);\n            var format = convertSelectorToFormat(editor, editor.plugins.importcss, selector, group);\n            if (format) {\n              var formatName = format.name || global$1.DOM.uniqueId();\n              editor.formatter.register(formatName, format);\n              return global$4.extend({}, ctrl.settings.itemDefaults, {\n                text: format.title,\n                format: formatName\n              });\n            }\n          }\n          return null;\n        };\n        if (!Settings.shouldAppend(editor)) {\n          ctrl.items().remove();\n        }\n        global$4.each(getSelectors(editor, e.doc || editor.getDoc(), compileFilter(Settings.getFileFilter(editor))), function (selector) {\n          if (selector.indexOf('.mce-') === -1) {\n            if (!selectorFilter || selectorFilter(selector)) {\n              var selectorGroups = getGroupsBySelector(groups, selector);\n              if (selectorGroups.length > 0) {\n                global$4.each(selectorGroups, function (group) {\n                  var menuItem = processSelector(selector, group);\n                  if (menuItem) {\n                    group.item.menu.push(menuItem);\n                  }\n                });\n              } else {\n                var menuItem = processSelector(selector, null);\n                if (menuItem) {\n                  ctrl.add(menuItem);\n                }\n              }\n            }\n          }\n        });\n        global$4.each(groups, function (group) {\n          if (group.item.menu.length > 0) {\n            ctrl.add(group.item);\n          }\n        });\n        e.control.renderNew();\n      });\n    };\n    var ImportCss = {\n      defaultConvertSelectorToFormat: defaultConvertSelectorToFormat,\n      setup: setup\n    };\n\n    var get = function (editor) {\n      var convertSelectorToFormat = function (selectorText) {\n        return ImportCss.defaultConvertSelectorToFormat(editor, selectorText);\n      };\n      return { convertSelectorToFormat: convertSelectorToFormat };\n    };\n    var Api = { get: get };\n\n    global.add('importcss', function (editor) {\n      ImportCss.setup(editor);\n      return Api.get(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseAssignIn = require('./_baseAssignIn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    copySymbolsIn = require('./_copySymbolsIn'),\n    getAllKeys = require('./_getAllKeys'),\n    getAllKeysIn = require('./_getAllKeysIn'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isMap = require('./isMap'),\n    isObject = require('./isObject'),\n    isSet = require('./isSet'),\n    keys = require('./keys'),\n    keysIn = require('./keysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","(function () {\nvar textpattern = (function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n        s += arguments[i].length;\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n      return r;\n    }\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isFunction = isType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var hasOwnProperty = Object.hasOwnProperty;\n    var get = function (obj, key) {\n      return has(obj, key) ? Option.from(obj[key]) : Option.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n\n    var isInlinePattern = function (pattern) {\n      return has(pattern, 'start') && has(pattern, 'end');\n    };\n    var isBlockPattern = function (pattern) {\n      return !has(pattern, 'end') && !has(pattern, 'replacement');\n    };\n    var isReplacementPattern = function (pattern) {\n      return has(pattern, 'replacement');\n    };\n    var sortPatterns = function (patterns) {\n      return sort(patterns, function (a, b) {\n        if (a.start.length === b.start.length) {\n          return 0;\n        }\n        return a.start.length > b.start.length ? -1 : 1;\n      });\n    };\n    var createPatternSet = function (patterns) {\n      return {\n        inlinePatterns: sortPatterns(filter(patterns, isInlinePattern)),\n        blockPatterns: sortPatterns(filter(patterns, isBlockPattern)),\n        replacementPatterns: filter(patterns, isReplacementPattern)\n      };\n    };\n\n    var get$1 = function (patternsState) {\n      var setPatterns = function (newPatterns) {\n        patternsState.set(createPatternSet(newPatterns));\n      };\n      var getPatterns = function () {\n        return __spreadArrays(patternsState.get().inlinePatterns, patternsState.get().blockPatterns, patternsState.get().replacementPatterns);\n      };\n      return {\n        setPatterns: setPatterns,\n        getPatterns: getPatterns\n      };\n    };\n    var Api = { get: get$1 };\n\n    var defaultPatterns = [\n      {\n        start: '*',\n        end: '*',\n        format: 'italic'\n      },\n      {\n        start: '**',\n        end: '**',\n        format: 'bold'\n      },\n      {\n        start: '***',\n        end: '***',\n        format: [\n          'bold',\n          'italic'\n        ]\n      },\n      {\n        start: '#',\n        format: 'h1'\n      },\n      {\n        start: '##',\n        format: 'h2'\n      },\n      {\n        start: '###',\n        format: 'h3'\n      },\n      {\n        start: '####',\n        format: 'h4'\n      },\n      {\n        start: '#####',\n        format: 'h5'\n      },\n      {\n        start: '######',\n        format: 'h6'\n      },\n      {\n        start: '1. ',\n        cmd: 'InsertOrderedList'\n      },\n      {\n        start: '* ',\n        cmd: 'InsertUnorderedList'\n      },\n      {\n        start: '- ',\n        cmd: 'InsertUnorderedList'\n      }\n    ];\n    var getPatternSet = function (editorSettings) {\n      var patterns = get(editorSettings, 'textpattern_patterns').getOr(defaultPatterns);\n      return createPatternSet(patterns);\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var findPattern = function (patterns, text) {\n      for (var i = 0; i < patterns.length; i++) {\n        var pattern = patterns[i];\n        if (text.indexOf(pattern.start) !== 0) {\n          continue;\n        }\n        if (pattern.end && text.lastIndexOf(pattern.end) !== text.length - pattern.end.length) {\n          continue;\n        }\n        return pattern;\n      }\n    };\n    var isMatchingPattern = function (pattern, text, offset, delta) {\n      var textEnd = text.substr(offset - pattern.end.length - delta, pattern.end.length);\n      return textEnd === pattern.end;\n    };\n    var hasContent = function (offset, delta, pattern) {\n      return offset - delta - pattern.end.length - pattern.start.length > 0;\n    };\n    var findEndPattern = function (patterns, text, offset, delta) {\n      var pattern, i;\n      for (i = 0; i < patterns.length; i++) {\n        pattern = patterns[i];\n        if (pattern.end !== undefined && isMatchingPattern(pattern, text, offset, delta) && hasContent(offset, delta, pattern)) {\n          return pattern;\n        }\n      }\n    };\n    var findInlinePattern = function (patterns, rng, space) {\n      if (rng.collapsed === false) {\n        return;\n      }\n      var container = rng.startContainer;\n      var text = container.data;\n      var delta = space === true ? 1 : 0;\n      if (container.nodeType !== 3) {\n        return;\n      }\n      var endPattern = findEndPattern(patterns, text, rng.startOffset, delta);\n      if (endPattern === undefined) {\n        return;\n      }\n      var endOffset = text.lastIndexOf(endPattern.end, rng.startOffset - delta);\n      var startOffset = text.lastIndexOf(endPattern.start, endOffset - endPattern.end.length);\n      endOffset = text.indexOf(endPattern.end, startOffset + endPattern.start.length);\n      if (startOffset === -1) {\n        return;\n      }\n      var patternRng = domGlobals.document.createRange();\n      patternRng.setStart(container, startOffset);\n      patternRng.setEnd(container, endOffset + endPattern.end.length);\n      var startPattern = findPattern(patterns, patternRng.toString());\n      if (endPattern === undefined || startPattern !== endPattern || container.data.length <= endPattern.start.length + endPattern.end.length) {\n        return;\n      }\n      return {\n        pattern: endPattern,\n        startOffset: startOffset,\n        endOffset: endOffset\n      };\n    };\n    var findReplacementPattern = function (patterns, startSearch, text) {\n      for (var i = 0; i < patterns.length; i++) {\n        var index = text.lastIndexOf(patterns[i].start, startSearch);\n        if (index !== -1) {\n          return Option.some({\n            pattern: patterns[i],\n            startOffset: index\n          });\n        }\n      }\n      return Option.none();\n    };\n\n    var isText = function (node) {\n      return node && node.nodeType === 3;\n    };\n    var setSelection = function (editor, textNode, offset) {\n      var newRng = editor.dom.createRng();\n      newRng.setStart(textNode, offset);\n      newRng.setEnd(textNode, offset);\n      editor.selection.setRng(newRng);\n    };\n    var splitContainer = function (container, pattern, endOffset, startOffset) {\n      container = startOffset > 0 ? container.splitText(startOffset) : container;\n      container.splitText(endOffset - startOffset + pattern.end.length);\n      container.deleteData(0, pattern.start.length);\n      container.deleteData(container.data.length - pattern.end.length, pattern.end.length);\n      return container;\n    };\n    var splitAndApply = function (editor, container, found, inline) {\n      var formatArray = global$4.isArray(found.pattern.format) ? found.pattern.format : [found.pattern.format];\n      var validFormats = global$4.grep(formatArray, function (formatName) {\n        var format = editor.formatter.get(formatName);\n        return format && format[0].inline;\n      });\n      if (validFormats.length !== 0) {\n        editor.undoManager.transact(function () {\n          container = splitContainer(container, found.pattern, found.endOffset, found.startOffset);\n          if (inline) {\n            editor.selection.setCursorLocation(container.nextSibling, 1);\n          }\n          formatArray.forEach(function (format) {\n            editor.formatter.apply(format, {}, container);\n          });\n        });\n        return container;\n      }\n    };\n    var applyInlinePattern = function (editor, patterns, inline) {\n      var rng = editor.selection.getRng();\n      return Option.from(findInlinePattern(patterns, rng, inline)).map(function (foundPattern) {\n        return splitAndApply(editor, rng.startContainer, foundPattern, inline);\n      });\n    };\n    var applyInlinePatternSpace = function (editor, patterns) {\n      applyInlinePattern(editor, patterns, true).each(function (wrappedTextNode) {\n        var lastChar = wrappedTextNode.data.slice(-1);\n        if (/[\\u00a0 ]/.test(lastChar)) {\n          wrappedTextNode.deleteData(wrappedTextNode.data.length - 1, 1);\n          var lastCharNode = editor.dom.doc.createTextNode(lastChar);\n          editor.dom.insertAfter(lastCharNode, wrappedTextNode.parentNode);\n          setSelection(editor, lastCharNode, 1);\n        }\n      });\n    };\n    var applyInlinePatternEnter = function (editor, patterns) {\n      applyInlinePattern(editor, patterns, false).each(function (wrappedTextNode) {\n        setSelection(editor, wrappedTextNode, wrappedTextNode.data.length);\n      });\n    };\n    var applyBlockPattern = function (editor, patterns) {\n      var selection, dom, container, firstTextNode, node, format, textBlockElm, pattern, walker, rng, offset;\n      selection = editor.selection;\n      dom = editor.dom;\n      if (!selection.isCollapsed()) {\n        return;\n      }\n      textBlockElm = dom.getParent(selection.getStart(), 'p');\n      if (textBlockElm) {\n        walker = new global$3(textBlockElm, textBlockElm);\n        while (node = walker.next()) {\n          if (isText(node)) {\n            firstTextNode = node;\n            break;\n          }\n        }\n        if (firstTextNode) {\n          pattern = findPattern(patterns, firstTextNode.data);\n          if (!pattern) {\n            return;\n          }\n          rng = selection.getRng(true);\n          container = rng.startContainer;\n          offset = rng.startOffset;\n          if (firstTextNode === container) {\n            offset = Math.max(0, offset - pattern.start.length);\n          }\n          if (global$4.trim(firstTextNode.data).length === pattern.start.length) {\n            return;\n          }\n          if (pattern.format) {\n            format = editor.formatter.get(pattern.format);\n            if (format && format[0].block) {\n              firstTextNode.deleteData(0, pattern.start.length);\n              editor.formatter.apply(pattern.format, {}, firstTextNode);\n              rng.setStart(container, offset);\n              rng.collapse(true);\n              selection.setRng(rng);\n            }\n          }\n          if (pattern.cmd) {\n            editor.undoManager.transact(function () {\n              firstTextNode.deleteData(0, pattern.start.length);\n              editor.execCommand(pattern.cmd);\n            });\n          }\n        }\n      }\n    };\n    var selectionInsertText = function (editor, string) {\n      var rng = editor.selection.getRng();\n      var container = rng.startContainer;\n      if (isText(container)) {\n        var offset = rng.startOffset;\n        container.insertData(offset, string);\n        setSelection(editor, container, offset + string.length);\n      } else {\n        var newNode = editor.dom.doc.createTextNode(string);\n        rng.insertNode(newNode);\n        setSelection(editor, newNode, newNode.length);\n      }\n    };\n    var applyReplacement = function (editor, target, match) {\n      target.deleteData(match.startOffset, match.pattern.start.length);\n      editor.insertContent(match.pattern.replacement);\n      Option.from(target.nextSibling).filter(isText).each(function (nextSibling) {\n        nextSibling.insertData(0, target.data);\n        editor.dom.remove(target);\n      });\n    };\n    var extractChar = function (node, match) {\n      var offset = match.startOffset + match.pattern.start.length;\n      var char = node.data.slice(offset, offset + 1);\n      node.deleteData(offset, 1);\n      return char;\n    };\n    var applyReplacementPattern = function (editor, patterns, inline) {\n      var rng = editor.selection.getRng();\n      var container = rng.startContainer;\n      if (rng.collapsed && isText(container)) {\n        findReplacementPattern(patterns, rng.startOffset, container.data).each(function (match) {\n          var char = inline ? Option.some(extractChar(container, match)) : Option.none();\n          applyReplacement(editor, container, match);\n          char.each(function (ch) {\n            return selectionInsertText(editor, ch);\n          });\n        });\n      }\n    };\n    var applyReplacementPatternSpace = function (editor, patterns) {\n      applyReplacementPattern(editor, patterns, true);\n    };\n    var applyReplacementPatternEnter = function (editor, patterns) {\n      applyReplacementPattern(editor, patterns, false);\n    };\n\n    var handleEnter = function (editor, patternSet) {\n      applyReplacementPatternEnter(editor, patternSet.replacementPatterns);\n      applyInlinePatternEnter(editor, patternSet.inlinePatterns);\n      applyBlockPattern(editor, patternSet.blockPatterns);\n    };\n    var handleInlineKey = function (editor, patternSet) {\n      applyReplacementPatternSpace(editor, patternSet.replacementPatterns);\n      applyInlinePatternSpace(editor, patternSet.inlinePatterns);\n    };\n    var checkKeyEvent = function (codes, event, predicate) {\n      for (var i = 0; i < codes.length; i++) {\n        if (predicate(codes[i], event)) {\n          return true;\n        }\n      }\n    };\n    var checkKeyCode = function (codes, event) {\n      return checkKeyEvent(codes, event, function (code, event) {\n        return code === event.keyCode && global$2.modifierPressed(event) === false;\n      });\n    };\n    var checkCharCode = function (chars, event) {\n      return checkKeyEvent(chars, event, function (chr, event) {\n        return chr.charCodeAt(0) === event.charCode;\n      });\n    };\n    var KeyHandler = {\n      handleEnter: handleEnter,\n      handleInlineKey: handleInlineKey,\n      checkCharCode: checkCharCode,\n      checkKeyCode: checkKeyCode\n    };\n\n    var setup = function (editor, patternsState) {\n      var charCodes = [\n        ',',\n        '.',\n        ';',\n        ':',\n        '!',\n        '?'\n      ];\n      var keyCodes = [32];\n      editor.on('keydown', function (e) {\n        if (e.keyCode === 13 && !global$2.modifierPressed(e)) {\n          KeyHandler.handleEnter(editor, patternsState.get());\n        }\n      }, true);\n      editor.on('keyup', function (e) {\n        if (KeyHandler.checkKeyCode(keyCodes, e)) {\n          KeyHandler.handleInlineKey(editor, patternsState.get());\n        }\n      });\n      editor.on('keypress', function (e) {\n        if (KeyHandler.checkCharCode(charCodes, e)) {\n          global$1.setEditorTimeout(editor, function () {\n            KeyHandler.handleInlineKey(editor, patternsState.get());\n          });\n        }\n      });\n    };\n    var Keyboard = { setup: setup };\n\n    global.add('textpattern', function (editor) {\n      var patternsState = Cell(getPatternSet(editor.settings));\n      Keyboard.setup(editor, patternsState);\n      return Api.get(patternsState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","// Exports the \"media\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/media')\n//   ES2015:\n//     import 'tinymce/plugins/media'\nrequire('./plugin.js');","(function () {\nvar help = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return !f.apply(null, args);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isFunction = isType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var meta = global$2.mac ? '\\u2318' : 'Ctrl';\n    var access = global$2.mac ? 'Ctrl + Alt' : 'Shift + Alt';\n    var shortcuts = [\n      {\n        shortcut: meta + ' + B',\n        action: 'Bold'\n      },\n      {\n        shortcut: meta + ' + I',\n        action: 'Italic'\n      },\n      {\n        shortcut: meta + ' + U',\n        action: 'Underline'\n      },\n      {\n        shortcut: meta + ' + A',\n        action: 'Select all'\n      },\n      {\n        shortcut: meta + ' + Y or ' + meta + ' + Shift + Z',\n        action: 'Redo'\n      },\n      {\n        shortcut: meta + ' + Z',\n        action: 'Undo'\n      },\n      {\n        shortcut: access + ' + 1',\n        action: 'Header 1'\n      },\n      {\n        shortcut: access + ' + 2',\n        action: 'Header 2'\n      },\n      {\n        shortcut: access + ' + 3',\n        action: 'Header 3'\n      },\n      {\n        shortcut: access + ' + 4',\n        action: 'Header 4'\n      },\n      {\n        shortcut: access + ' + 5',\n        action: 'Header 5'\n      },\n      {\n        shortcut: access + ' + 6',\n        action: 'Header 6'\n      },\n      {\n        shortcut: access + ' + 7',\n        action: 'Paragraph'\n      },\n      {\n        shortcut: access + ' + 8',\n        action: 'Div'\n      },\n      {\n        shortcut: access + ' + 9',\n        action: 'Address'\n      },\n      {\n        shortcut: 'Alt + F9',\n        action: 'Focus to menubar'\n      },\n      {\n        shortcut: 'Alt + F10',\n        action: 'Focus to toolbar'\n      },\n      {\n        shortcut: 'Alt + F11',\n        action: 'Focus to element path'\n      },\n      {\n        shortcut: 'Ctrl + F9',\n        action: 'Focus to contextual toolbar'\n      },\n      {\n        shortcut: meta + ' + K',\n        action: 'Insert link (if link plugin activated)'\n      },\n      {\n        shortcut: meta + ' + S',\n        action: 'Save (if save plugin activated)'\n      },\n      {\n        shortcut: meta + ' + F',\n        action: 'Find (if searchreplace plugin activated)'\n      }\n    ];\n    var KeyboardShortcuts = { shortcuts: shortcuts };\n\n    var makeTab = function () {\n      var makeAriaLabel = function (shortcut) {\n        return 'aria-label=\"Action: ' + shortcut.action + ', Shortcut: ' + shortcut.shortcut.replace(/Ctrl/g, 'Control') + '\"';\n      };\n      var shortcutLisString = map(KeyboardShortcuts.shortcuts, function (shortcut) {\n        return '<tr data-mce-tabstop=\"1\" tabindex=\"-1\" ' + makeAriaLabel(shortcut) + '>' + '<td>' + global$1.translate(shortcut.action) + '</td>' + '<td>' + shortcut.shortcut + '</td>' + '</tr>';\n      }).join('');\n      return {\n        title: 'Handy Shortcuts',\n        type: 'container',\n        style: 'overflow-y: auto; overflow-x: hidden; max-height: 250px',\n        items: [{\n            type: 'container',\n            html: '<div>' + '<table class=\"mce-table-striped\">' + '<thead>' + '<th>' + global$1.translate('Action') + '</th>' + '<th>' + global$1.translate('Shortcut') + '</th>' + '</thead>' + shortcutLisString + '</table>' + '</div>'\n          }]\n      };\n    };\n    var KeyboardShortcutsTab = { makeTab: makeTab };\n\n    var keys = Object.keys;\n\n    var supplant = function (str, obj) {\n      var isStringOrNumber = function (a) {\n        var t = typeof a;\n        return t === 'string' || t === 'number';\n      };\n      return str.replace(/\\$\\{([^{}]*)\\}/g, function (fullMatch, key) {\n        var value = obj[key];\n        return isStringOrNumber(value) ? value.toString() : fullMatch;\n      });\n    };\n\n    var urls = [\n      {\n        key: 'advlist',\n        name: 'Advanced List'\n      },\n      {\n        key: 'anchor',\n        name: 'Anchor'\n      },\n      {\n        key: 'autolink',\n        name: 'Autolink'\n      },\n      {\n        key: 'autoresize',\n        name: 'Autoresize'\n      },\n      {\n        key: 'autosave',\n        name: 'Autosave'\n      },\n      {\n        key: 'bbcode',\n        name: 'BBCode'\n      },\n      {\n        key: 'charmap',\n        name: 'Character Map'\n      },\n      {\n        key: 'code',\n        name: 'Code'\n      },\n      {\n        key: 'codesample',\n        name: 'Code Sample'\n      },\n      {\n        key: 'colorpicker',\n        name: 'Color Picker'\n      },\n      {\n        key: 'compat3x',\n        name: '3.x Compatibility'\n      },\n      {\n        key: 'contextmenu',\n        name: 'Context Menu'\n      },\n      {\n        key: 'directionality',\n        name: 'Directionality'\n      },\n      {\n        key: 'emoticons',\n        name: 'Emoticons'\n      },\n      {\n        key: 'fullpage',\n        name: 'Full Page'\n      },\n      {\n        key: 'fullscreen',\n        name: 'Full Screen'\n      },\n      {\n        key: 'help',\n        name: 'Help'\n      },\n      {\n        key: 'hr',\n        name: 'Horizontal Rule'\n      },\n      {\n        key: 'image',\n        name: 'Image'\n      },\n      {\n        key: 'imagetools',\n        name: 'Image Tools'\n      },\n      {\n        key: 'importcss',\n        name: 'Import CSS'\n      },\n      {\n        key: 'insertdatetime',\n        name: 'Insert Date/Time'\n      },\n      {\n        key: 'legacyoutput',\n        name: 'Legacy Output'\n      },\n      {\n        key: 'link',\n        name: 'Link'\n      },\n      {\n        key: 'lists',\n        name: 'Lists'\n      },\n      {\n        key: 'media',\n        name: 'Media'\n      },\n      {\n        key: 'nonbreaking',\n        name: 'Nonbreaking'\n      },\n      {\n        key: 'noneditable',\n        name: 'Noneditable'\n      },\n      {\n        key: 'pagebreak',\n        name: 'Page Break'\n      },\n      {\n        key: 'paste',\n        name: 'Paste'\n      },\n      {\n        key: 'preview',\n        name: 'Preview'\n      },\n      {\n        key: 'print',\n        name: 'Print'\n      },\n      {\n        key: 'save',\n        name: 'Save'\n      },\n      {\n        key: 'searchreplace',\n        name: 'Search and Replace'\n      },\n      {\n        key: 'spellchecker',\n        name: 'Spell Checker'\n      },\n      {\n        key: 'tabfocus',\n        name: 'Tab Focus'\n      },\n      {\n        key: 'table',\n        name: 'Table'\n      },\n      {\n        key: 'template',\n        name: 'Template'\n      },\n      {\n        key: 'textcolor',\n        name: 'Text Color'\n      },\n      {\n        key: 'textpattern',\n        name: 'Text Pattern'\n      },\n      {\n        key: 'toc',\n        name: 'Table of Contents'\n      },\n      {\n        key: 'visualblocks',\n        name: 'Visual Blocks'\n      },\n      {\n        key: 'visualchars',\n        name: 'Visual Characters'\n      },\n      {\n        key: 'wordcount',\n        name: 'Word Count'\n      }\n    ];\n    var PluginUrls = { urls: urls };\n\n    var makeLink = curry(supplant, '<a href=\"${url}\" target=\"_blank\" rel=\"noopener\">${name}</a>');\n    var maybeUrlize = function (editor, key) {\n      return find(PluginUrls.urls, function (x) {\n        return x.key === key;\n      }).fold(function () {\n        var getMetadata = editor.plugins[key].getMetadata;\n        return typeof getMetadata === 'function' ? makeLink(getMetadata()) : key;\n      }, function (x) {\n        return makeLink({\n          name: x.name,\n          url: 'https://www.tinymce.com/docs/plugins/' + x.key\n        });\n      });\n    };\n    var getPluginKeys = function (editor) {\n      var keys$1 = keys(editor.plugins);\n      return editor.settings.forced_plugins === undefined ? keys$1 : filter(keys$1, not(curry(contains, editor.settings.forced_plugins)));\n    };\n    var pluginLister = function (editor) {\n      var pluginKeys = getPluginKeys(editor);\n      var pluginLis = map(pluginKeys, function (key) {\n        return '<li>' + maybeUrlize(editor, key) + '</li>';\n      });\n      var count = pluginLis.length;\n      var pluginsString = pluginLis.join('');\n      return '<p><b>' + global$1.translate([\n        'Plugins installed ({0}):',\n        count\n      ]) + '</b></p>' + '<ul>' + pluginsString + '</ul>';\n    };\n    var installedPlugins = function (editor) {\n      return {\n        type: 'container',\n        html: '<div style=\"overflow-y: auto; overflow-x: hidden; max-height: 230px; height: 230px;\" data-mce-tabstop=\"1\" tabindex=\"-1\">' + pluginLister(editor) + '</div>',\n        flex: 1\n      };\n    };\n    var availablePlugins = function () {\n      return {\n        type: 'container',\n        html: '<div style=\"padding: 10px; background: #e3e7f4; height: 100%;\" data-mce-tabstop=\"1\" tabindex=\"-1\">' + '<p><b>' + global$1.translate('Premium plugins:') + '</b></p>' + '<ul>' + '<li>PowerPaste</li>' + '<li>Spell Checker Pro</li>' + '<li>Accessibility Checker</li>' + '<li>Advanced Code Editor</li>' + '<li>Enhanced Media Embed</li>' + '<li>Link Checker</li>' + '</ul><br />' + '<p style=\"float: right;\"><a href=\"https://www.tinymce.com/pricing/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce\" target=\"_blank\">' + global$1.translate('Learn more...') + '</a></p>' + '</div>',\n        flex: 1\n      };\n    };\n    var makeTab$1 = function (editor) {\n      return {\n        title: 'Plugins',\n        type: 'container',\n        style: 'overflow-y: auto; overflow-x: hidden;',\n        layout: 'flex',\n        padding: 10,\n        spacing: 10,\n        items: [\n          installedPlugins(editor),\n          availablePlugins()\n        ]\n      };\n    };\n    var PluginsTab = { makeTab: makeTab$1 };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var getVersion = function (major, minor) {\n      return major.indexOf('@') === 0 ? 'X.X.X' : major + '.' + minor;\n    };\n    var makeRow = function () {\n      var version = getVersion(global$3.majorVersion, global$3.minorVersion);\n      var changeLogLink = '<a href=\"https://www.tinymce.com/docs/changelog/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce\" target=\"_blank\">TinyMCE ' + version + '</a>';\n      return [\n        {\n          type: 'label',\n          html: global$1.translate([\n            'You are using {0}',\n            changeLogLink\n          ])\n        },\n        {\n          type: 'spacer',\n          flex: 1\n        },\n        {\n          text: 'Close',\n          onclick: function () {\n            this.parent().parent().close();\n          }\n        }\n      ];\n    };\n    var ButtonsRow = { makeRow: makeRow };\n\n    var open = function (editor, pluginUrl) {\n      return function () {\n        editor.windowManager.open({\n          title: 'Help',\n          bodyType: 'tabpanel',\n          layout: 'flex',\n          body: [\n            KeyboardShortcutsTab.makeTab(),\n            PluginsTab.makeTab(editor)\n          ],\n          buttons: ButtonsRow.makeRow(),\n          onPostRender: function () {\n            var title = this.getEl('title');\n            title.innerHTML = '<img src=\"' + pluginUrl + '/img/logo.png\" alt=\"TinyMCE Logo\" style=\"display: inline-block; width: 200px; height: 50px\">';\n          }\n        });\n      };\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor, pluginUrl) {\n      editor.addCommand('mceHelp', Dialog.open(editor, pluginUrl));\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor, pluginUrl) {\n      editor.addButton('help', {\n        icon: 'help',\n        onclick: Dialog.open(editor, pluginUrl)\n      });\n      editor.addMenuItem('help', {\n        text: 'Help',\n        icon: 'help',\n        context: 'help',\n        onclick: Dialog.open(editor, pluginUrl)\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('help', function (editor, pluginUrl) {\n      Buttons.register(editor, pluginUrl);\n      Commands.register(editor, pluginUrl);\n      editor.shortcuts.add('Alt+0', 'Open help dialog', 'mceHelp');\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var uncurryThis = require('../internals/function-uncurry-this');\n\n// `thisNumberValue` abstract operation\n// https://tc39.es/ecma262/#sec-thisnumbervalue\nmodule.exports = uncurryThis(1.0.valueOf);\n","var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n","// Exports the \"link\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/link')\n//   ES2015:\n//     import 'tinymce/plugins/link'\nrequire('./plugin.js');","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","(function () {\nvar noneditable = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getNonEditableClass = function (editor) {\n      return editor.getParam('noneditable_noneditable_class', 'mceNonEditable');\n    };\n    var getEditableClass = function (editor) {\n      return editor.getParam('noneditable_editable_class', 'mceEditable');\n    };\n    var getNonEditableRegExps = function (editor) {\n      var nonEditableRegExps = editor.getParam('noneditable_regexp', []);\n      if (nonEditableRegExps && nonEditableRegExps.constructor === RegExp) {\n        return [nonEditableRegExps];\n      } else {\n        return nonEditableRegExps;\n      }\n    };\n    var Settings = {\n      getNonEditableClass: getNonEditableClass,\n      getEditableClass: getEditableClass,\n      getNonEditableRegExps: getNonEditableRegExps\n    };\n\n    var hasClass = function (checkClassName) {\n      return function (node) {\n        return (' ' + node.attr('class') + ' ').indexOf(checkClassName) !== -1;\n      };\n    };\n    var replaceMatchWithSpan = function (editor, content, cls) {\n      return function (match) {\n        var args = arguments, index = args[args.length - 2];\n        var prevChar = index > 0 ? content.charAt(index - 1) : '';\n        if (prevChar === '\"') {\n          return match;\n        }\n        if (prevChar === '>') {\n          var findStartTagIndex = content.lastIndexOf('<', index);\n          if (findStartTagIndex !== -1) {\n            var tagHtml = content.substring(findStartTagIndex, index);\n            if (tagHtml.indexOf('contenteditable=\"false\"') !== -1) {\n              return match;\n            }\n          }\n        }\n        return '<span class=\"' + cls + '\" data-mce-content=\"' + editor.dom.encode(args[0]) + '\">' + editor.dom.encode(typeof args[1] === 'string' ? args[1] : args[0]) + '</span>';\n      };\n    };\n    var convertRegExpsToNonEditable = function (editor, nonEditableRegExps, e) {\n      var i = nonEditableRegExps.length, content = e.content;\n      if (e.format === 'raw') {\n        return;\n      }\n      while (i--) {\n        content = content.replace(nonEditableRegExps[i], replaceMatchWithSpan(editor, content, Settings.getNonEditableClass(editor)));\n      }\n      e.content = content;\n    };\n    var setup = function (editor) {\n      var editClass, nonEditClass;\n      var contentEditableAttrName = 'contenteditable';\n      editClass = ' ' + global$1.trim(Settings.getEditableClass(editor)) + ' ';\n      nonEditClass = ' ' + global$1.trim(Settings.getNonEditableClass(editor)) + ' ';\n      var hasEditClass = hasClass(editClass);\n      var hasNonEditClass = hasClass(nonEditClass);\n      var nonEditableRegExps = Settings.getNonEditableRegExps(editor);\n      editor.on('PreInit', function () {\n        if (nonEditableRegExps.length > 0) {\n          editor.on('BeforeSetContent', function (e) {\n            convertRegExpsToNonEditable(editor, nonEditableRegExps, e);\n          });\n        }\n        editor.parser.addAttributeFilter('class', function (nodes) {\n          var i = nodes.length, node;\n          while (i--) {\n            node = nodes[i];\n            if (hasEditClass(node)) {\n              node.attr(contentEditableAttrName, 'true');\n            } else if (hasNonEditClass(node)) {\n              node.attr(contentEditableAttrName, 'false');\n            }\n          }\n        });\n        editor.serializer.addAttributeFilter(contentEditableAttrName, function (nodes) {\n          var i = nodes.length, node;\n          while (i--) {\n            node = nodes[i];\n            if (!hasEditClass(node) && !hasNonEditClass(node)) {\n              continue;\n            }\n            if (nonEditableRegExps.length > 0 && node.attr('data-mce-content')) {\n              node.name = '#text';\n              node.type = 3;\n              node.raw = true;\n              node.value = node.attr('data-mce-content');\n            } else {\n              node.attr(contentEditableAttrName, null);\n            }\n          }\n        });\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    global.add('noneditable', function (editor) {\n      FilterContent.setup(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","// Exports the \"insertdatetime\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/insertdatetime')\n//   ES2015:\n//     import 'tinymce/plugins/insertdatetime'\nrequire('./plugin.js');","(function () {\nvar visualblocks = (function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var fireVisualBlocks = function (editor, state) {\n      editor.fire('VisualBlocks', { state: state });\n    };\n    var Events = { fireVisualBlocks: fireVisualBlocks };\n\n    var isEnabledByDefault = function (editor) {\n      return editor.getParam('visualblocks_default_state', false);\n    };\n    var getContentCss = function (editor) {\n      return editor.settings.visualblocks_content_css;\n    };\n    var Settings = {\n      isEnabledByDefault: isEnabledByDefault,\n      getContentCss: getContentCss\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var cssId = global$1.DOM.uniqueId();\n    var load = function (doc, url) {\n      var linkElements = global$2.toArray(doc.getElementsByTagName('link'));\n      var matchingLinkElms = global$2.grep(linkElements, function (head) {\n        return head.id === cssId;\n      });\n      if (matchingLinkElms.length === 0) {\n        var linkElm = global$1.DOM.create('link', {\n          id: cssId,\n          rel: 'stylesheet',\n          href: url\n        });\n        doc.getElementsByTagName('head')[0].appendChild(linkElm);\n      }\n    };\n    var LoadCss = { load: load };\n\n    var toggleVisualBlocks = function (editor, pluginUrl, enabledState) {\n      var dom = editor.dom;\n      var contentCss = Settings.getContentCss(editor);\n      LoadCss.load(editor.getDoc(), contentCss ? contentCss : pluginUrl + '/css/visualblocks.css');\n      dom.toggleClass(editor.getBody(), 'mce-visualblocks');\n      enabledState.set(!enabledState.get());\n      Events.fireVisualBlocks(editor, enabledState.get());\n    };\n    var VisualBlocks = { toggleVisualBlocks: toggleVisualBlocks };\n\n    var register = function (editor, pluginUrl, enabledState) {\n      editor.addCommand('mceVisualBlocks', function () {\n        VisualBlocks.toggleVisualBlocks(editor, pluginUrl, enabledState);\n      });\n    };\n    var Commands = { register: register };\n\n    var setup = function (editor, pluginUrl, enabledState) {\n      editor.on('PreviewFormats AfterPreviewFormats', function (e) {\n        if (enabledState.get()) {\n          editor.dom.toggleClass(editor.getBody(), 'mce-visualblocks', e.type === 'afterpreviewformats');\n        }\n      });\n      editor.on('init', function () {\n        if (Settings.isEnabledByDefault(editor)) {\n          VisualBlocks.toggleVisualBlocks(editor, pluginUrl, enabledState);\n        }\n      });\n      editor.on('remove', function () {\n        editor.dom.removeClass(editor.getBody(), 'mce-visualblocks');\n      });\n    };\n    var Bindings = { setup: setup };\n\n    var toggleActiveState = function (editor, enabledState) {\n      return function (e) {\n        var ctrl = e.control;\n        ctrl.active(enabledState.get());\n        editor.on('VisualBlocks', function (e) {\n          ctrl.active(e.state);\n        });\n      };\n    };\n    var register$1 = function (editor, enabledState) {\n      editor.addButton('visualblocks', {\n        active: false,\n        title: 'Show blocks',\n        cmd: 'mceVisualBlocks',\n        onPostRender: toggleActiveState(editor, enabledState)\n      });\n      editor.addMenuItem('visualblocks', {\n        text: 'Show blocks',\n        cmd: 'mceVisualBlocks',\n        onPostRender: toggleActiveState(editor, enabledState),\n        selectable: true,\n        context: 'view',\n        prependToContext: true\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('visualblocks', function (editor, pluginUrl) {\n      var enabledState = Cell(false);\n      Commands.register(editor, pluginUrl, enabledState);\n      Buttons.register(editor, enabledState);\n      Bindings.setup(editor, pluginUrl, enabledState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('tinymce',{attrs:{\"id\":_vm.id,\"other_options\":_vm.tinyOptions},on:{\"editorChange\":_vm.handleChange},model:{value:(_vm.editorContent),callback:function ($$v) {_vm.editorContent=$$v},expression:\"editorContent\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('textarea',{attrs:{\"id\":_vm.id}},[_vm._v(_vm._s(_vm.content))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n      <textarea :id=\"id\">{{ content }}</textarea>\n  </div>\n</template>\n\n<script>\n   // Import TinyMCE\n    import tinymce from 'tinymce/tinymce';\n\n    // A theme is also required\n    import 'tinymce/themes/modern/theme';\n\n    // Any plugins you want to use has to be imported\n    import 'tinymce/plugins/advlist';\n    import 'tinymce/plugins/wordcount';\n    import 'tinymce/plugins/autolink';\n    import 'tinymce/plugins/autosave';\n    import 'tinymce/plugins/charmap';\n    import 'tinymce/plugins/codesample';\n    import 'tinymce/plugins/contextmenu';\n    import 'tinymce/plugins/emoticons';\n    import 'tinymce/plugins/fullscreen';\n    import 'tinymce/plugins/hr';\n    import 'tinymce/plugins/imagetools';\n    import 'tinymce/plugins/insertdatetime';\n    import 'tinymce/plugins/link';\n    import 'tinymce/plugins/media';\n    import 'tinymce/plugins/noneditable';\n    import 'tinymce/plugins/paste';\n    import 'tinymce/plugins/print';\n    import 'tinymce/plugins/searchreplace';\n    import 'tinymce/plugins/tabfocus';\n    import 'tinymce/plugins/template';\n    import 'tinymce/plugins/textpattern';\n    import 'tinymce/plugins/visualblocks';\n    import 'tinymce/plugins/anchor';\n    import 'tinymce/plugins/autoresize';\n    import 'tinymce/plugins/bbcode';\n    import 'tinymce/plugins/code';\n    import 'tinymce/plugins/colorpicker';\n    import 'tinymce/plugins/directionality';\n    import 'tinymce/plugins/fullpage';\n    import 'tinymce/plugins/help';\n    import 'tinymce/plugins/image';\n    import 'tinymce/plugins/importcss';\n    import 'tinymce/plugins/legacyoutput';\n    import 'tinymce/plugins/lists';\n    import 'tinymce/plugins/nonbreaking';\n    import 'tinymce/plugins/pagebreak';\n    import 'tinymce/plugins/preview';\n    import 'tinymce/plugins/save';\n    import 'tinymce/plugins/spellchecker';\n    import 'tinymce/plugins/table';\n    import 'tinymce/plugins/textcolor';\n    import 'tinymce/plugins/toc';\n    import 'tinymce/plugins/visualchars';\n    \n    import 'tinymce/skins/lightgray/skin.min.css'\n   \n    export default {\n        name: 'tinymce',\n        props: { \n                id : {\n                    type : String,\n                    required : true\n                },\n                htmlClass : { default : '', type : String},\n                value : { default : '' },\n                plugins : { default : function(){ \n                                    return [\n                                        'advlist autolink lists link image charmap print preview hr anchor pagebreak',\n                                        'searchreplace wordcount visualblocks visualchars code fullscreen',\n                                        'insertdatetime media nonbreaking save table contextmenu directionality',\n                                        'template paste textcolor colorpicker textpattern imagetools toc help emoticons hr codesample'\n                                    ];\n                                } , type: Array\n                            },\n                toolbar1: { default :'formatselect | bold italic  strikethrough  forecolor backcolor | link | alignleft aligncenter alignright alignjustify  | numlist bullist outdent indent  | removeformat', type: String},\n                toolbar2: { default : '', type: String },\n                other_options: { default : function() { return {}; }, type: Object},\n                readonly: { default: false, type: Boolean }\n        },\n        data(){\n            return {\n                content : '',\n                editor : null,\n                cTinyMce : null,\n                checkerTimeout: null,\n                isTyping : false\n            }; \n        },\n        mounted(){\n            this.content = this.value;\n            this.init();  \n        },\n        beforeDestroy () {\n            this.editor.destroy();\n        },\n        watch: {\n            value : function (newValue){\n                if(!this.isTyping){\n                    if(this.editor !== null)\n                        this.editor.setContent(newValue);\n                    else\n                        this.content = newValue;\n                }\n            },\n            readonly(value){\n                if(value){\n                    this.editor.setMode('readonly');\n                } else {\n                    this.editor.setMode('design');\n                }\n            }\n        },\n        methods: {\n            init(){\n                let options = {\n                    selector: '#' + this.id,\n                    skin: false,\n                    toolbar1: this.toolbar1,\n                    toolbar2: this.toolbar2,\n                    plugins: this.plugins,\n                    init_instance_callback : this.initEditor\n                };\n                tinymce.init(this.concatAssciativeArrays(options, this.other_options));\n            },\n            initEditor(editor) {\n                this.editor = editor;\n                editor.on('KeyUp', (e) => {\n                    this.submitNewContent();\n                });\n                editor.on('Change', (e) => {\n                    if(this.editor.getContent() !== this.value){\n                        this.submitNewContent();\n                    }\n                    this.$emit('editorChange', e);\n                });\n                editor.on('init', (e) => {\n                    editor.setContent(this.content);\n                    this.$emit('input', this.content);\n                });\n                if(this.readonly){\n                    this.editor.setMode('readonly');\n                } else {\n                    this.editor.setMode('design');\n                }\n\n                this.$emit('editorInit', editor);\n            },\n            concatAssciativeArrays(array1, array2){\n                if(array2.length === 0) return array1;\n                if(array1.length === 0) return array2;\n                let dest = [];\n                for ( let key in array1) dest[key] = array1[key];\n                for ( let key in array2) dest[key] = array2[key];\n                return dest;\n            },\n            submitNewContent(){\n                this.isTyping = true;\n                if(this.checkerTimeout !== null)\n                    clearTimeout(this.checkerTimeout);\n                    this.checkerTimeout = setTimeout(()=>{\n                        this.isTyping = false;\n                    }, 300);\n\n                this.$emit('input', this.editor.getContent());\n            }\n        }\n    }\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n\n</style>\n","import mod from \"-!../../../cache-loader/dist/cjs.js??ref--13-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--1-0!../../../vue-loader/lib/index.js??vue-loader-options!./TinymceVue.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../cache-loader/dist/cjs.js??ref--13-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--1-0!../../../vue-loader/lib/index.js??vue-loader-options!./TinymceVue.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TinymceVue.vue?vue&type=template&id=7a7628c1&scoped=true&\"\nimport script from \"./TinymceVue.vue?vue&type=script&lang=js&\"\nexport * from \"./TinymceVue.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a7628c1\",\n  null\n  \n)\n\nexport default component.exports","import tinymce from './components/TinymceVue'\n\nexport default tinymce\nexport { tinymce }","<template>\r\n  <div>\r\n    <tinymce :id=\"id\" :other_options=\"tinyOptions\" v-model=\"editorContent\" @editorChange=\"handleChange\"></tinymce>\r\n  </div>\r\n</template>\r\n<script>\r\nimport cloneDeep from 'lodash/cloneDeep'\r\nimport tinymce from 'vue-tinymce-editor'\r\nexport default {\r\n  props: {\r\n    id: {\r\n      type: Number | String,\r\n      required: true,\r\n    },\r\n    value: {\r\n      type: Number | String,\r\n      required: true,\r\n    },\r\n    height: {\r\n      type: Number,\r\n      default: 500,\r\n    },\r\n  },\r\n  components: { tinymce },\r\n  data() {\r\n    return {\r\n      editorContent: '',\r\n      tinyOptions: {\r\n        branding: false,\r\n        height: this.height,\r\n        paste_data_images: true,\r\n        language_url: 'tinymce/zh_CN.js',\r\n        media_live_embeds: true,\r\n        images_upload_handler: (blobInfo, succFun, failFun) => {\r\n          let params = new FormData()\r\n          params.append('file', blobInfo.blob())\r\n\r\n          this.axios\r\n            .post('/upload', params, {\r\n              headers: {\r\n                'Content-Type': 'multipart/form-data',\r\n              },\r\n            })\r\n            .then((res) => {\r\n              const { status, msg, data } = res.data\r\n              if (status === 0) {\r\n                succFun(data.url)\r\n              } else {\r\n                failFun(msg)\r\n              }\r\n            })\r\n        },\r\n        file_picker_types: 'file image media',\r\n        file_picker_callback: (callback, value, meta) => {\r\n          //文件分类\r\n          var filetype = '.pdf, .txt, .zip, .rar, .7z, .doc, .docx, .xls, .xlsx, .ppt, .pptx, .mp3, .mp4'\r\n          //为不同插件指定文件类型及后端地址\r\n          switch (meta.filetype) {\r\n            case 'image':\r\n              filetype = '.jpg, .jpeg, .png, .gif'\r\n              break\r\n            case 'media':\r\n              filetype = '.mp3, .mp4'\r\n              break\r\n            case 'file':\r\n            default:\r\n          }\r\n\r\n          //模拟出一个input用于添加本地文件\r\n          var input = document.createElement('input')\r\n          input.setAttribute('type', 'file')\r\n          input.setAttribute('accept', filetype)\r\n          input.click()\r\n          input.onchange = (e) => {\r\n            let params = new FormData()\r\n            params.append('file', e.target.files[0])\r\n\r\n            this.axios\r\n              .post('/upload', params, {\r\n                headers: {\r\n                  'Content-Type': 'multipart/form-data',\r\n                },\r\n              })\r\n              .then((res) => {\r\n                const { status, msg, data } = res.data\r\n                if (status === 0) {\r\n                  if (meta.filetype == 'file') {\r\n                    callback(data.url, { text: 'My text' })\r\n                  }\r\n\r\n                  if (meta.filetype == 'image') {\r\n                    callback(data.url, { alt: 'My alt text' })\r\n                  }\r\n\r\n                  if (meta.filetype == 'media') {\r\n                    callback(data.url, { source1: data.url, source2: data.url, poster: '' })\r\n                  }\r\n                } else {\r\n                  callback('')\r\n                }\r\n              })\r\n          }\r\n        },\r\n\r\n        templates: [\r\n          { title: 'Some title 1', description: 'Some desc 1', content: 'My content' },\r\n          { title: 'Some title 2', description: 'Some desc 2', url: 'tinymce/tpl/tpl.html' },\r\n        ],\r\n      },\r\n    }\r\n  },\r\n  created() {\r\n    this.editorContent = cloneDeep(this.value)\r\n  },\r\n  methods: {\r\n    handleChange() {\r\n      this.$emit('input', this.editorContent)\r\n    },\r\n  },\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./my-tinymce.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./my-tinymce.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./my-tinymce.vue?vue&type=template&id=66dd44d1&\"\nimport script from \"./my-tinymce.vue?vue&type=script&lang=js&\"\nexport * from \"./my-tinymce.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Exports the \"legacyoutput\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/legacyoutput')\n//   ES2015:\n//     import 'tinymce/plugins/legacyoutput'\nrequire('./plugin.js');","// Exports the \"image\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/image')\n//   ES2015:\n//     import 'tinymce/plugins/image'\nrequire('./plugin.js');","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","// Exports the \"tabfocus\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/tabfocus')\n//   ES2015:\n//     import 'tinymce/plugins/tabfocus'\nrequire('./plugin.js');","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar whitespaces = require('../internals/whitespaces');\n\nvar replace = uncurryThis(''.replace);\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = toString(requireObjectCoercible($this));\n    if (TYPE & 1) string = replace(string, ltrim, '');\n    if (TYPE & 2) string = replace(string, rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nmodule.exports = cloneDataView;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","(function () {\nvar contextmenu = (function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var get = function (visibleState) {\n      var isContextMenuVisible = function () {\n        return visibleState.get();\n      };\n      return { isContextMenuVisible: isContextMenuVisible };\n    };\n    var Api = { get: get };\n\n    var shouldNeverUseNative = function (editor) {\n      return editor.settings.contextmenu_never_use_native;\n    };\n    var getContextMenu = function (editor) {\n      return editor.getParam('contextmenu', 'link openlink image inserttable | cell row column deletetable');\n    };\n    var Settings = {\n      shouldNeverUseNative: shouldNeverUseNative,\n      getContextMenu: getContextMenu\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var getUiContainer = function (editor) {\n      return global$1.DOM.select(editor.settings.ui_container)[0];\n    };\n\n    var nu = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var transpose = function (pos, dx, dy) {\n      return nu(pos.x + dx, pos.y + dy);\n    };\n    var fromPageXY = function (e) {\n      return nu(e.pageX, e.pageY);\n    };\n    var fromClientXY = function (e) {\n      return nu(e.clientX, e.clientY);\n    };\n    var transposeUiContainer = function (element, pos) {\n      if (element && global$1.DOM.getStyle(element, 'position', true) !== 'static') {\n        var containerPos = global$1.DOM.getPos(element);\n        var dx = containerPos.x - element.scrollLeft;\n        var dy = containerPos.y - element.scrollTop;\n        return transpose(pos, -dx, -dy);\n      } else {\n        return transpose(pos, 0, 0);\n      }\n    };\n    var transposeContentAreaContainer = function (element, pos) {\n      var containerPos = global$1.DOM.getPos(element);\n      return transpose(pos, containerPos.x, containerPos.y);\n    };\n    var getPos = function (editor, e) {\n      if (editor.inline) {\n        return transposeUiContainer(getUiContainer(editor), fromPageXY(e));\n      } else {\n        var iframePos = transposeContentAreaContainer(editor.getContentAreaContainer(), fromClientXY(e));\n        return transposeUiContainer(getUiContainer(editor), iframePos);\n      }\n    };\n    var Coords = { getPos: getPos };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.ui.Factory');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var renderMenu = function (editor, visibleState) {\n      var menu, contextmenu;\n      var items = [];\n      contextmenu = Settings.getContextMenu(editor);\n      global$3.each(contextmenu.split(/[ ,]/), function (name) {\n        var item = editor.menuItems[name];\n        if (name === '|') {\n          item = { text: name };\n        }\n        if (item) {\n          item.shortcut = '';\n          items.push(item);\n        }\n      });\n      for (var i = 0; i < items.length; i++) {\n        if (items[i].text === '|') {\n          if (i === 0 || i === items.length - 1) {\n            items.splice(i, 1);\n          }\n        }\n      }\n      menu = global$2.create('menu', {\n        items: items,\n        context: 'contextmenu',\n        classes: 'contextmenu'\n      });\n      menu.uiContainer = getUiContainer(editor);\n      menu.renderTo(getUiContainer(editor));\n      menu.on('hide', function (e) {\n        if (e.control === this) {\n          visibleState.set(false);\n        }\n      });\n      editor.on('remove', function () {\n        menu.remove();\n        menu = null;\n      });\n      return menu;\n    };\n    var show = function (editor, pos, visibleState, menu) {\n      if (menu.get() === null) {\n        menu.set(renderMenu(editor, visibleState));\n      } else {\n        menu.get().show();\n      }\n      menu.get().moveTo(pos.x, pos.y);\n      visibleState.set(true);\n    };\n    var ContextMenu = { show: show };\n\n    var isNativeOverrideKeyEvent = function (editor, e) {\n      return e.ctrlKey && !Settings.shouldNeverUseNative(editor);\n    };\n    var setup = function (editor, visibleState, menu) {\n      editor.on('contextmenu', function (e) {\n        if (isNativeOverrideKeyEvent(editor, e)) {\n          return;\n        }\n        e.preventDefault();\n        ContextMenu.show(editor, Coords.getPos(editor, e), visibleState, menu);\n      });\n    };\n    var Bind = { setup: setup };\n\n    global.add('contextmenu', function (editor) {\n      var menu = Cell(null), visibleState = Cell(false);\n      Bind.setup(editor, visibleState, menu);\n      return Api.get(visibleState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","// Exports the \"searchreplace\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/searchreplace')\n//   ES2015:\n//     import 'tinymce/plugins/searchreplace'\nrequire('./plugin.js');","// Exports the \"code\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/code')\n//   ES2015:\n//     import 'tinymce/plugins/code'\nrequire('./plugin.js');","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","// Exports the \"save\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/save')\n//   ES2015:\n//     import 'tinymce/plugins/save'\nrequire('./plugin.js');","(function () {\nvar preview = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var getPreviewDialogWidth = function (editor) {\n      return parseInt(editor.getParam('plugin_preview_width', '650'), 10);\n    };\n    var getPreviewDialogHeight = function (editor) {\n      return parseInt(editor.getParam('plugin_preview_height', '500'), 10);\n    };\n    var getContentStyle = function (editor) {\n      return editor.getParam('content_style', '');\n    };\n    var Settings = {\n      getPreviewDialogWidth: getPreviewDialogWidth,\n      getPreviewDialogHeight: getPreviewDialogHeight,\n      getContentStyle: getContentStyle\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getPreviewHtml = function (editor) {\n      var previewHtml;\n      var headHtml = '';\n      var encode = editor.dom.encode;\n      var contentStyle = Settings.getContentStyle(editor);\n      headHtml += '<base href=\"' + encode(editor.documentBaseURI.getURI()) + '\">';\n      if (contentStyle) {\n        headHtml += '<style type=\"text/css\">' + contentStyle + '</style>';\n      }\n      global$2.each(editor.contentCSS, function (url) {\n        headHtml += '<link type=\"text/css\" rel=\"stylesheet\" href=\"' + encode(editor.documentBaseURI.toAbsolute(url)) + '\">';\n      });\n      var bodyId = editor.settings.body_id || 'tinymce';\n      if (bodyId.indexOf('=') !== -1) {\n        bodyId = editor.getParam('body_id', '', 'hash');\n        bodyId = bodyId[editor.id] || bodyId;\n      }\n      var bodyClass = editor.settings.body_class || '';\n      if (bodyClass.indexOf('=') !== -1) {\n        bodyClass = editor.getParam('body_class', '', 'hash');\n        bodyClass = bodyClass[editor.id] || '';\n      }\n      var preventClicksOnLinksScript = '<script>' + 'document.addEventListener && document.addEventListener(\"click\", function(e) {' + 'for (var elm = e.target; elm; elm = elm.parentNode) {' + 'if (elm.nodeName === \"A\") {' + 'e.preventDefault();' + '}' + '}' + '}, false);' + '</script> ';\n      var dirAttr = editor.settings.directionality ? ' dir=\"' + editor.settings.directionality + '\"' : '';\n      previewHtml = '<!DOCTYPE html>' + '<html>' + '<head>' + headHtml + '</head>' + '<body id=\"' + encode(bodyId) + '\" class=\"mce-content-body ' + encode(bodyClass) + '\"' + encode(dirAttr) + '>' + editor.getContent() + preventClicksOnLinksScript + '</body>' + '</html>';\n      return previewHtml;\n    };\n    var injectIframeContent = function (editor, iframe, sandbox) {\n      var previewHtml = getPreviewHtml(editor);\n      if (!sandbox) {\n        var doc = iframe.contentWindow.document;\n        doc.open();\n        doc.write(previewHtml);\n        doc.close();\n      } else {\n        iframe.src = 'data:text/html;charset=utf-8,' + encodeURIComponent(previewHtml);\n      }\n    };\n    var IframeContent = {\n      getPreviewHtml: getPreviewHtml,\n      injectIframeContent: injectIframeContent\n    };\n\n    var open = function (editor) {\n      var sandbox = !global$1.ie;\n      var dialogHtml = '<iframe src=\"\" frameborder=\"0\"' + (sandbox ? ' sandbox=\"allow-scripts\"' : '') + '></iframe>';\n      var dialogWidth = Settings.getPreviewDialogWidth(editor);\n      var dialogHeight = Settings.getPreviewDialogHeight(editor);\n      editor.windowManager.open({\n        title: 'Preview',\n        width: dialogWidth,\n        height: dialogHeight,\n        html: dialogHtml,\n        buttons: {\n          text: 'Close',\n          onclick: function (e) {\n            e.control.parent().parent().close();\n          }\n        },\n        onPostRender: function (e) {\n          var iframeElm = e.control.getEl('body').firstChild;\n          IframeContent.injectIframeContent(editor, iframeElm, sandbox);\n        }\n      });\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor) {\n      editor.addCommand('mcePreview', function () {\n        Dialog.open(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor) {\n      editor.addButton('preview', {\n        title: 'Preview',\n        cmd: 'mcePreview'\n      });\n      editor.addMenuItem('preview', {\n        text: 'Preview',\n        cmd: 'mcePreview',\n        context: 'view'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('preview', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","// Exports the \"emoticons\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/emoticons')\n//   ES2015:\n//     import 'tinymce/plugins/emoticons'\nrequire('./plugin.js');","(function () {\nvar fullpage = (function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.html.DomParser');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.html.Node');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.html.Serializer');\n\n    var shouldHideInSourceView = function (editor) {\n      return editor.getParam('fullpage_hide_in_source_view');\n    };\n    var getDefaultXmlPi = function (editor) {\n      return editor.getParam('fullpage_default_xml_pi');\n    };\n    var getDefaultEncoding = function (editor) {\n      return editor.getParam('fullpage_default_encoding');\n    };\n    var getDefaultFontFamily = function (editor) {\n      return editor.getParam('fullpage_default_font_family');\n    };\n    var getDefaultFontSize = function (editor) {\n      return editor.getParam('fullpage_default_font_size');\n    };\n    var getDefaultTextColor = function (editor) {\n      return editor.getParam('fullpage_default_text_color');\n    };\n    var getDefaultTitle = function (editor) {\n      return editor.getParam('fullpage_default_title');\n    };\n    var getDefaultDocType = function (editor) {\n      return editor.getParam('fullpage_default_doctype', '<!DOCTYPE html>');\n    };\n    var Settings = {\n      shouldHideInSourceView: shouldHideInSourceView,\n      getDefaultXmlPi: getDefaultXmlPi,\n      getDefaultEncoding: getDefaultEncoding,\n      getDefaultFontFamily: getDefaultFontFamily,\n      getDefaultFontSize: getDefaultFontSize,\n      getDefaultTextColor: getDefaultTextColor,\n      getDefaultTitle: getDefaultTitle,\n      getDefaultDocType: getDefaultDocType\n    };\n\n    var parseHeader = function (head) {\n      return global$2({\n        validate: false,\n        root_name: '#document'\n      }).parse(head);\n    };\n    var htmlToData = function (editor, head) {\n      var headerFragment = parseHeader(head);\n      var data = {};\n      var elm, matches;\n      function getAttr(elm, name) {\n        var value = elm.attr(name);\n        return value || '';\n      }\n      data.fontface = Settings.getDefaultFontFamily(editor);\n      data.fontsize = Settings.getDefaultFontSize(editor);\n      elm = headerFragment.firstChild;\n      if (elm.type === 7) {\n        data.xml_pi = true;\n        matches = /encoding=\"([^\"]+)\"/.exec(elm.value);\n        if (matches) {\n          data.docencoding = matches[1];\n        }\n      }\n      elm = headerFragment.getAll('#doctype')[0];\n      if (elm) {\n        data.doctype = '<!DOCTYPE' + elm.value + '>';\n      }\n      elm = headerFragment.getAll('title')[0];\n      if (elm && elm.firstChild) {\n        data.title = elm.firstChild.value;\n      }\n      global$1.each(headerFragment.getAll('meta'), function (meta) {\n        var name = meta.attr('name');\n        var httpEquiv = meta.attr('http-equiv');\n        var matches;\n        if (name) {\n          data[name.toLowerCase()] = meta.attr('content');\n        } else if (httpEquiv === 'Content-Type') {\n          matches = /charset\\s*=\\s*(.*)\\s*/gi.exec(meta.attr('content'));\n          if (matches) {\n            data.docencoding = matches[1];\n          }\n        }\n      });\n      elm = headerFragment.getAll('html')[0];\n      if (elm) {\n        data.langcode = getAttr(elm, 'lang') || getAttr(elm, 'xml:lang');\n      }\n      data.stylesheets = [];\n      global$1.each(headerFragment.getAll('link'), function (link) {\n        if (link.attr('rel') === 'stylesheet') {\n          data.stylesheets.push(link.attr('href'));\n        }\n      });\n      elm = headerFragment.getAll('body')[0];\n      if (elm) {\n        data.langdir = getAttr(elm, 'dir');\n        data.style = getAttr(elm, 'style');\n        data.visited_color = getAttr(elm, 'vlink');\n        data.link_color = getAttr(elm, 'link');\n        data.active_color = getAttr(elm, 'alink');\n      }\n      return data;\n    };\n    var dataToHtml = function (editor, data, head) {\n      var headerFragment, headElement, html, elm, value;\n      var dom = editor.dom;\n      function setAttr(elm, name, value) {\n        elm.attr(name, value ? value : undefined);\n      }\n      function addHeadNode(node) {\n        if (headElement.firstChild) {\n          headElement.insert(node, headElement.firstChild);\n        } else {\n          headElement.append(node);\n        }\n      }\n      headerFragment = parseHeader(head);\n      headElement = headerFragment.getAll('head')[0];\n      if (!headElement) {\n        elm = headerFragment.getAll('html')[0];\n        headElement = new global$3('head', 1);\n        if (elm.firstChild) {\n          elm.insert(headElement, elm.firstChild, true);\n        } else {\n          elm.append(headElement);\n        }\n      }\n      elm = headerFragment.firstChild;\n      if (data.xml_pi) {\n        value = 'version=\"1.0\"';\n        if (data.docencoding) {\n          value += ' encoding=\"' + data.docencoding + '\"';\n        }\n        if (elm.type !== 7) {\n          elm = new global$3('xml', 7);\n          headerFragment.insert(elm, headerFragment.firstChild, true);\n        }\n        elm.value = value;\n      } else if (elm && elm.type === 7) {\n        elm.remove();\n      }\n      elm = headerFragment.getAll('#doctype')[0];\n      if (data.doctype) {\n        if (!elm) {\n          elm = new global$3('#doctype', 10);\n          if (data.xml_pi) {\n            headerFragment.insert(elm, headerFragment.firstChild);\n          } else {\n            addHeadNode(elm);\n          }\n        }\n        elm.value = data.doctype.substring(9, data.doctype.length - 1);\n      } else if (elm) {\n        elm.remove();\n      }\n      elm = null;\n      global$1.each(headerFragment.getAll('meta'), function (meta) {\n        if (meta.attr('http-equiv') === 'Content-Type') {\n          elm = meta;\n        }\n      });\n      if (data.docencoding) {\n        if (!elm) {\n          elm = new global$3('meta', 1);\n          elm.attr('http-equiv', 'Content-Type');\n          elm.shortEnded = true;\n          addHeadNode(elm);\n        }\n        elm.attr('content', 'text/html; charset=' + data.docencoding);\n      } else if (elm) {\n        elm.remove();\n      }\n      elm = headerFragment.getAll('title')[0];\n      if (data.title) {\n        if (!elm) {\n          elm = new global$3('title', 1);\n          addHeadNode(elm);\n        } else {\n          elm.empty();\n        }\n        elm.append(new global$3('#text', 3)).value = data.title;\n      } else if (elm) {\n        elm.remove();\n      }\n      global$1.each('keywords,description,author,copyright,robots'.split(','), function (name) {\n        var nodes = headerFragment.getAll('meta');\n        var i, meta;\n        var value = data[name];\n        for (i = 0; i < nodes.length; i++) {\n          meta = nodes[i];\n          if (meta.attr('name') === name) {\n            if (value) {\n              meta.attr('content', value);\n            } else {\n              meta.remove();\n            }\n            return;\n          }\n        }\n        if (value) {\n          elm = new global$3('meta', 1);\n          elm.attr('name', name);\n          elm.attr('content', value);\n          elm.shortEnded = true;\n          addHeadNode(elm);\n        }\n      });\n      var currentStyleSheetsMap = {};\n      global$1.each(headerFragment.getAll('link'), function (stylesheet) {\n        if (stylesheet.attr('rel') === 'stylesheet') {\n          currentStyleSheetsMap[stylesheet.attr('href')] = stylesheet;\n        }\n      });\n      global$1.each(data.stylesheets, function (stylesheet) {\n        if (!currentStyleSheetsMap[stylesheet]) {\n          elm = new global$3('link', 1);\n          elm.attr({\n            rel: 'stylesheet',\n            text: 'text/css',\n            href: stylesheet\n          });\n          elm.shortEnded = true;\n          addHeadNode(elm);\n        }\n        delete currentStyleSheetsMap[stylesheet];\n      });\n      global$1.each(currentStyleSheetsMap, function (stylesheet) {\n        stylesheet.remove();\n      });\n      elm = headerFragment.getAll('body')[0];\n      if (elm) {\n        setAttr(elm, 'dir', data.langdir);\n        setAttr(elm, 'style', data.style);\n        setAttr(elm, 'vlink', data.visited_color);\n        setAttr(elm, 'link', data.link_color);\n        setAttr(elm, 'alink', data.active_color);\n        dom.setAttribs(editor.getBody(), {\n          style: data.style,\n          dir: data.dir,\n          vLink: data.visited_color,\n          link: data.link_color,\n          aLink: data.active_color\n        });\n      }\n      elm = headerFragment.getAll('html')[0];\n      if (elm) {\n        setAttr(elm, 'lang', data.langcode);\n        setAttr(elm, 'xml:lang', data.langcode);\n      }\n      if (!headElement.firstChild) {\n        headElement.remove();\n      }\n      html = global$4({\n        validate: false,\n        indent: true,\n        apply_source_formatting: true,\n        indent_before: 'head,html,body,meta,title,script,link,style',\n        indent_after: 'head,html,body,meta,title,script,link,style'\n      }).serialize(headerFragment);\n      return html.substring(0, html.indexOf('</body>'));\n    };\n    var Parser = {\n      parseHeader: parseHeader,\n      htmlToData: htmlToData,\n      dataToHtml: dataToHtml\n    };\n\n    var open = function (editor, headState) {\n      var data = Parser.htmlToData(editor, headState.get());\n      editor.windowManager.open({\n        title: 'Document properties',\n        data: data,\n        defaults: {\n          type: 'textbox',\n          size: 40\n        },\n        body: [\n          {\n            name: 'title',\n            label: 'Title'\n          },\n          {\n            name: 'keywords',\n            label: 'Keywords'\n          },\n          {\n            name: 'description',\n            label: 'Description'\n          },\n          {\n            name: 'robots',\n            label: 'Robots'\n          },\n          {\n            name: 'author',\n            label: 'Author'\n          },\n          {\n            name: 'docencoding',\n            label: 'Encoding'\n          }\n        ],\n        onSubmit: function (e) {\n          var headHtml = Parser.dataToHtml(editor, global$1.extend(data, e.data), headState.get());\n          headState.set(headHtml);\n        }\n      });\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor, headState) {\n      editor.addCommand('mceFullPageProperties', function () {\n        Dialog.open(editor, headState);\n      });\n    };\n    var Commands = { register: register };\n\n    var protectHtml = function (protect, html) {\n      global$1.each(protect, function (pattern) {\n        html = html.replace(pattern, function (str) {\n          return '<!--mce:protected ' + escape(str) + '-->';\n        });\n      });\n      return html;\n    };\n    var unprotectHtml = function (html) {\n      return html.replace(/<!--mce:protected ([\\s\\S]*?)-->/g, function (a, m) {\n        return unescape(m);\n      });\n    };\n    var Protect = {\n      protectHtml: protectHtml,\n      unprotectHtml: unprotectHtml\n    };\n\n    var each = global$1.each;\n    var low = function (s) {\n      return s.replace(/<\\/?[A-Z]+/g, function (a) {\n        return a.toLowerCase();\n      });\n    };\n    var handleSetContent = function (editor, headState, footState, evt) {\n      var startPos, endPos, content, headerFragment, styles = '';\n      var dom = editor.dom;\n      var elm;\n      if (evt.selection) {\n        return;\n      }\n      content = Protect.protectHtml(editor.settings.protect, evt.content);\n      if (evt.format === 'raw' && headState.get()) {\n        return;\n      }\n      if (evt.source_view && Settings.shouldHideInSourceView(editor)) {\n        return;\n      }\n      if (content.length === 0 && !evt.source_view) {\n        content = global$1.trim(headState.get()) + '\\n' + global$1.trim(content) + '\\n' + global$1.trim(footState.get());\n      }\n      content = content.replace(/<(\\/?)BODY/gi, '<$1body');\n      startPos = content.indexOf('<body');\n      if (startPos !== -1) {\n        startPos = content.indexOf('>', startPos);\n        headState.set(low(content.substring(0, startPos + 1)));\n        endPos = content.indexOf('</body', startPos);\n        if (endPos === -1) {\n          endPos = content.length;\n        }\n        evt.content = global$1.trim(content.substring(startPos + 1, endPos));\n        footState.set(low(content.substring(endPos)));\n      } else {\n        headState.set(getDefaultHeader(editor));\n        footState.set('\\n</body>\\n</html>');\n      }\n      headerFragment = Parser.parseHeader(headState.get());\n      each(headerFragment.getAll('style'), function (node) {\n        if (node.firstChild) {\n          styles += node.firstChild.value;\n        }\n      });\n      elm = headerFragment.getAll('body')[0];\n      if (elm) {\n        dom.setAttribs(editor.getBody(), {\n          style: elm.attr('style') || '',\n          dir: elm.attr('dir') || '',\n          vLink: elm.attr('vlink') || '',\n          link: elm.attr('link') || '',\n          aLink: elm.attr('alink') || ''\n        });\n      }\n      dom.remove('fullpage_styles');\n      var headElm = editor.getDoc().getElementsByTagName('head')[0];\n      if (styles) {\n        dom.add(headElm, 'style', { id: 'fullpage_styles' }, styles);\n        elm = dom.get('fullpage_styles');\n        if (elm.styleSheet) {\n          elm.styleSheet.cssText = styles;\n        }\n      }\n      var currentStyleSheetsMap = {};\n      global$1.each(headElm.getElementsByTagName('link'), function (stylesheet) {\n        if (stylesheet.rel === 'stylesheet' && stylesheet.getAttribute('data-mce-fullpage')) {\n          currentStyleSheetsMap[stylesheet.href] = stylesheet;\n        }\n      });\n      global$1.each(headerFragment.getAll('link'), function (stylesheet) {\n        var href = stylesheet.attr('href');\n        if (!href) {\n          return true;\n        }\n        if (!currentStyleSheetsMap[href] && stylesheet.attr('rel') === 'stylesheet') {\n          dom.add(headElm, 'link', {\n            'rel': 'stylesheet',\n            'text': 'text/css',\n            'href': href,\n            'data-mce-fullpage': '1'\n          });\n        }\n        delete currentStyleSheetsMap[href];\n      });\n      global$1.each(currentStyleSheetsMap, function (stylesheet) {\n        stylesheet.parentNode.removeChild(stylesheet);\n      });\n    };\n    var getDefaultHeader = function (editor) {\n      var header = '', value, styles = '';\n      if (Settings.getDefaultXmlPi(editor)) {\n        var piEncoding = Settings.getDefaultEncoding(editor);\n        header += '<?xml version=\"1.0\" encoding=\"' + (piEncoding ? piEncoding : 'ISO-8859-1') + '\" ?>\\n';\n      }\n      header += Settings.getDefaultDocType(editor);\n      header += '\\n<html>\\n<head>\\n';\n      if (value = Settings.getDefaultTitle(editor)) {\n        header += '<title>' + value + '</title>\\n';\n      }\n      if (value = Settings.getDefaultEncoding(editor)) {\n        header += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=' + value + '\" />\\n';\n      }\n      if (value = Settings.getDefaultFontFamily(editor)) {\n        styles += 'font-family: ' + value + ';';\n      }\n      if (value = Settings.getDefaultFontSize(editor)) {\n        styles += 'font-size: ' + value + ';';\n      }\n      if (value = Settings.getDefaultTextColor(editor)) {\n        styles += 'color: ' + value + ';';\n      }\n      header += '</head>\\n<body' + (styles ? ' style=\"' + styles + '\"' : '') + '>\\n';\n      return header;\n    };\n    var handleGetContent = function (editor, head, foot, evt) {\n      if (!evt.selection && (!evt.source_view || !Settings.shouldHideInSourceView(editor))) {\n        evt.content = Protect.unprotectHtml(global$1.trim(head) + '\\n' + global$1.trim(evt.content) + '\\n' + global$1.trim(foot));\n      }\n    };\n    var setup = function (editor, headState, footState) {\n      editor.on('BeforeSetContent', function (evt) {\n        handleSetContent(editor, headState, footState, evt);\n      });\n      editor.on('GetContent', function (evt) {\n        handleGetContent(editor, headState.get(), footState.get(), evt);\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var register$1 = function (editor) {\n      editor.addButton('fullpage', {\n        title: 'Document properties',\n        cmd: 'mceFullPageProperties'\n      });\n      editor.addMenuItem('fullpage', {\n        text: 'Document properties',\n        cmd: 'mceFullPageProperties',\n        context: 'file'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('fullpage', function (editor) {\n      var headState = Cell(''), footState = Cell('');\n      Commands.register(editor, headState);\n      Buttons.register(editor);\n      FilterContent.setup(editor, headState, footState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","(function () {\nvar legacyoutput = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var overrideFormats = function (editor) {\n      var alignElements = 'p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img', fontSizes = global$1.explode(editor.settings.font_size_style_values), schema = editor.schema;\n      editor.formatter.register({\n        alignleft: {\n          selector: alignElements,\n          attributes: { align: 'left' }\n        },\n        aligncenter: {\n          selector: alignElements,\n          attributes: { align: 'center' }\n        },\n        alignright: {\n          selector: alignElements,\n          attributes: { align: 'right' }\n        },\n        alignjustify: {\n          selector: alignElements,\n          attributes: { align: 'justify' }\n        },\n        bold: [\n          {\n            inline: 'b',\n            remove: 'all'\n          },\n          {\n            inline: 'strong',\n            remove: 'all'\n          },\n          {\n            inline: 'span',\n            styles: { fontWeight: 'bold' }\n          }\n        ],\n        italic: [\n          {\n            inline: 'i',\n            remove: 'all'\n          },\n          {\n            inline: 'em',\n            remove: 'all'\n          },\n          {\n            inline: 'span',\n            styles: { fontStyle: 'italic' }\n          }\n        ],\n        underline: [\n          {\n            inline: 'u',\n            remove: 'all'\n          },\n          {\n            inline: 'span',\n            styles: { textDecoration: 'underline' },\n            exact: true\n          }\n        ],\n        strikethrough: [\n          {\n            inline: 'strike',\n            remove: 'all'\n          },\n          {\n            inline: 'span',\n            styles: { textDecoration: 'line-through' },\n            exact: true\n          }\n        ],\n        fontname: {\n          inline: 'font',\n          attributes: { face: '%value' }\n        },\n        fontsize: {\n          inline: 'font',\n          attributes: {\n            size: function (vars) {\n              return global$1.inArray(fontSizes, vars.value) + 1;\n            }\n          }\n        },\n        forecolor: {\n          inline: 'font',\n          attributes: { color: '%value' }\n        },\n        hilitecolor: {\n          inline: 'font',\n          styles: { backgroundColor: '%value' }\n        }\n      });\n      global$1.each('b,i,u,strike'.split(','), function (name) {\n        schema.addValidElements(name + '[*]');\n      });\n      if (!schema.getElementRule('font')) {\n        schema.addValidElements('font[face|size|color|style]');\n      }\n      global$1.each(alignElements.split(','), function (name) {\n        var rule = schema.getElementRule(name);\n        if (rule) {\n          if (!rule.attributes.align) {\n            rule.attributes.align = {};\n            rule.attributesOrder.push('align');\n          }\n        }\n      });\n    };\n    var setup = function (editor) {\n      editor.settings.inline_styles = false;\n      editor.on('init', function () {\n        overrideFormats(editor);\n      });\n    };\n    var Formats = { setup: setup };\n\n    var register = function (editor) {\n      editor.addButton('fontsizeselect', function () {\n        var items = [], defaultFontsizeFormats = '8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7';\n        var fontsizeFormats = editor.settings.fontsizeFormats || defaultFontsizeFormats;\n        editor.$.each(fontsizeFormats.split(' '), function (i, item) {\n          var text = item, value = item;\n          var values = item.split('=');\n          if (values.length > 1) {\n            text = values[0];\n            value = values[1];\n          }\n          items.push({\n            text: text,\n            value: value\n          });\n        });\n        return {\n          type: 'listbox',\n          text: 'Font Sizes',\n          tooltip: 'Font Sizes',\n          values: items,\n          fixedWidth: true,\n          onPostRender: function () {\n            var self = this;\n            editor.on('NodeChange', function () {\n              var fontElm;\n              fontElm = editor.dom.getParent(editor.selection.getNode(), 'font');\n              if (fontElm) {\n                self.value(fontElm.size);\n              } else {\n                self.value('');\n              }\n            });\n          },\n          onclick: function (e) {\n            if (e.control.settings.value) {\n              editor.execCommand('FontSize', false, e.control.settings.value);\n            }\n          }\n        };\n      });\n      editor.addButton('fontselect', function () {\n        function createFormats(formats) {\n          formats = formats.replace(/;$/, '').split(';');\n          var i = formats.length;\n          while (i--) {\n            formats[i] = formats[i].split('=');\n          }\n          return formats;\n        }\n        var defaultFontsFormats = 'Andale Mono=andale mono,monospace;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,sans-serif;' + 'Book Antiqua=book antiqua,palatino,serif;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier,monospace;' + 'Georgia=georgia,palatino,serif;' + 'Helvetica=helvetica,arial,sans-serif;' + 'Impact=impact,sans-serif;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco,monospace;' + 'Times New Roman=times new roman,times,serif;' + 'Trebuchet MS=trebuchet ms,geneva,sans-serif;' + 'Verdana=verdana,geneva,sans-serif;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats';\n        var items = [], fonts = createFormats(editor.settings.font_formats || defaultFontsFormats);\n        editor.$.each(fonts, function (i, font) {\n          items.push({\n            text: { raw: font[0] },\n            value: font[1],\n            textStyle: font[1].indexOf('dings') === -1 ? 'font-family:' + font[1] : ''\n          });\n        });\n        return {\n          type: 'listbox',\n          text: 'Font Family',\n          tooltip: 'Font Family',\n          values: items,\n          fixedWidth: true,\n          onPostRender: function () {\n            var self = this;\n            editor.on('NodeChange', function () {\n              var fontElm;\n              fontElm = editor.dom.getParent(editor.selection.getNode(), 'font');\n              if (fontElm) {\n                self.value(fontElm.face);\n              } else {\n                self.value('');\n              }\n            });\n          },\n          onselect: function (e) {\n            if (e.control.settings.value) {\n              editor.execCommand('FontName', false, e.control.settings.value);\n            }\n          }\n        };\n      });\n    };\n    var Buttons = { register: register };\n\n    global.add('legacyoutput', function (editor) {\n      Formats.setup(editor);\n      Buttons.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"autoresize\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/autoresize')\n//   ES2015:\n//     import 'tinymce/plugins/autoresize'\nrequire('./plugin.js');","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nmodule.exports = baseCreate;\n","(function () {\nvar save = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var enableWhenDirty = function (editor) {\n      return editor.getParam('save_enablewhendirty', true);\n    };\n    var hasOnSaveCallback = function (editor) {\n      return !!editor.getParam('save_onsavecallback');\n    };\n    var hasOnCancelCallback = function (editor) {\n      return !!editor.getParam('save_oncancelcallback');\n    };\n    var Settings = {\n      enableWhenDirty: enableWhenDirty,\n      hasOnSaveCallback: hasOnSaveCallback,\n      hasOnCancelCallback: hasOnCancelCallback\n    };\n\n    var displayErrorMessage = function (editor, message) {\n      editor.notificationManager.open({\n        text: editor.translate(message),\n        type: 'error'\n      });\n    };\n    var save = function (editor) {\n      var formObj;\n      formObj = global$1.DOM.getParent(editor.id, 'form');\n      if (Settings.enableWhenDirty(editor) && !editor.isDirty()) {\n        return;\n      }\n      editor.save();\n      if (Settings.hasOnSaveCallback(editor)) {\n        editor.execCallback('save_onsavecallback', editor);\n        editor.nodeChanged();\n        return;\n      }\n      if (formObj) {\n        editor.setDirty(false);\n        if (!formObj.onsubmit || formObj.onsubmit()) {\n          if (typeof formObj.submit === 'function') {\n            formObj.submit();\n          } else {\n            displayErrorMessage(editor, 'Error: Form submit field collision.');\n          }\n        }\n        editor.nodeChanged();\n      } else {\n        displayErrorMessage(editor, 'Error: No form element found.');\n      }\n    };\n    var cancel = function (editor) {\n      var h = global$2.trim(editor.startContent);\n      if (Settings.hasOnCancelCallback(editor)) {\n        editor.execCallback('save_oncancelcallback', editor);\n        return;\n      }\n      editor.setContent(h);\n      editor.undoManager.clear();\n      editor.nodeChanged();\n    };\n    var Actions = {\n      save: save,\n      cancel: cancel\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceSave', function () {\n        Actions.save(editor);\n      });\n      editor.addCommand('mceCancel', function () {\n        Actions.cancel(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var stateToggle = function (editor) {\n      return function (e) {\n        var ctrl = e.control;\n        editor.on('nodeChange dirty', function () {\n          ctrl.disabled(Settings.enableWhenDirty(editor) && !editor.isDirty());\n        });\n      };\n    };\n    var register$1 = function (editor) {\n      editor.addButton('save', {\n        icon: 'save',\n        text: 'Save',\n        cmd: 'mceSave',\n        disabled: true,\n        onPostRender: stateToggle(editor)\n      });\n      editor.addButton('cancel', {\n        text: 'Cancel',\n        icon: false,\n        cmd: 'mceCancel',\n        disabled: true,\n        onPostRender: stateToggle(editor)\n      });\n      editor.addShortcut('Meta+S', '', 'mceSave');\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('save', function (editor) {\n      Buttons.register(editor);\n      Commands.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","// Exports the \"textpattern\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/textpattern')\n//   ES2015:\n//     import 'tinymce/plugins/textpattern'\nrequire('./plugin.js');","(function () {\nvar modern = (function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.ThemeManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var isBrandingEnabled = function (editor) {\n      return editor.getParam('branding', true, 'boolean');\n    };\n    var hasMenubar = function (editor) {\n      return getMenubar(editor) !== false;\n    };\n    var getMenubar = function (editor) {\n      return editor.getParam('menubar');\n    };\n    var hasStatusbar = function (editor) {\n      return editor.getParam('statusbar', true, 'boolean');\n    };\n    var getToolbarSize = function (editor) {\n      return editor.getParam('toolbar_items_size');\n    };\n    var isReadOnly = function (editor) {\n      return editor.getParam('readonly', false, 'boolean');\n    };\n    var getFixedToolbarContainer = function (editor) {\n      return editor.getParam('fixed_toolbar_container');\n    };\n    var getInlineToolbarPositionHandler = function (editor) {\n      return editor.getParam('inline_toolbar_position_handler');\n    };\n    var getMenu = function (editor) {\n      return editor.getParam('menu');\n    };\n    var getRemovedMenuItems = function (editor) {\n      return editor.getParam('removed_menuitems', '');\n    };\n    var getMinWidth = function (editor) {\n      return editor.getParam('min_width', 100, 'number');\n    };\n    var getMinHeight = function (editor) {\n      return editor.getParam('min_height', 100, 'number');\n    };\n    var getMaxWidth = function (editor) {\n      return editor.getParam('max_width', 65535, 'number');\n    };\n    var getMaxHeight = function (editor) {\n      return editor.getParam('max_height', 65535, 'number');\n    };\n    var isSkinDisabled = function (editor) {\n      return editor.settings.skin === false;\n    };\n    var isInline = function (editor) {\n      return editor.getParam('inline', false, 'boolean');\n    };\n    var getResize = function (editor) {\n      var resize = editor.getParam('resize', 'vertical');\n      if (resize === false) {\n        return 'none';\n      } else if (resize === 'both') {\n        return 'both';\n      } else {\n        return 'vertical';\n      }\n    };\n    var getSkinUrl = function (editor) {\n      var settings = editor.settings;\n      var skin = settings.skin;\n      var skinUrl = settings.skin_url;\n      if (skin !== false) {\n        var skinName = skin ? skin : 'lightgray';\n        if (skinUrl) {\n          skinUrl = editor.documentBaseURI.toAbsolute(skinUrl);\n        } else {\n          skinUrl = global$1.baseURL + '/skins/' + skinName;\n        }\n      }\n      return skinUrl;\n    };\n    var getIndexedToolbars = function (settings, defaultToolbar) {\n      var toolbars = [];\n      for (var i = 1; i < 10; i++) {\n        var toolbar = settings['toolbar' + i];\n        if (!toolbar) {\n          break;\n        }\n        toolbars.push(toolbar);\n      }\n      var mainToolbar = settings.toolbar ? [settings.toolbar] : [defaultToolbar];\n      return toolbars.length > 0 ? toolbars : mainToolbar;\n    };\n    var getToolbars = function (editor) {\n      var toolbar = editor.getParam('toolbar');\n      var defaultToolbar = 'undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image';\n      if (toolbar === false) {\n        return [];\n      } else if (global$2.isArray(toolbar)) {\n        return global$2.grep(toolbar, function (toolbar) {\n          return toolbar.length > 0;\n        });\n      } else {\n        return getIndexedToolbars(editor.settings, defaultToolbar);\n      }\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.ui.Factory');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var fireSkinLoaded = function (editor) {\n      return editor.fire('SkinLoaded');\n    };\n    var fireResizeEditor = function (editor) {\n      return editor.fire('ResizeEditor');\n    };\n    var fireBeforeRenderUI = function (editor) {\n      return editor.fire('BeforeRenderUI');\n    };\n    var Events = {\n      fireSkinLoaded: fireSkinLoaded,\n      fireResizeEditor: fireResizeEditor,\n      fireBeforeRenderUI: fireBeforeRenderUI\n    };\n\n    var focus = function (panel, type) {\n      return function () {\n        var item = panel.find(type)[0];\n        if (item) {\n          item.focus(true);\n        }\n      };\n    };\n    var addKeys = function (editor, panel) {\n      editor.shortcuts.add('Alt+F9', '', focus(panel, 'menubar'));\n      editor.shortcuts.add('Alt+F10,F10', '', focus(panel, 'toolbar'));\n      editor.shortcuts.add('Alt+F11', '', focus(panel, 'elementpath'));\n      panel.on('cancel', function () {\n        editor.focus();\n      });\n    };\n    var A11y = { addKeys: addKeys };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.geom.Rect');\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var getUiContainerDelta = function (ctrl) {\n      var uiContainer = getUiContainer(ctrl);\n      if (uiContainer && global$3.DOM.getStyle(uiContainer, 'position', true) !== 'static') {\n        var containerPos = global$3.DOM.getPos(uiContainer);\n        var dx = uiContainer.scrollLeft - containerPos.x;\n        var dy = uiContainer.scrollTop - containerPos.y;\n        return Option.some({\n          x: dx,\n          y: dy\n        });\n      } else {\n        return Option.none();\n      }\n    };\n    var setUiContainer = function (editor, ctrl) {\n      var uiContainer = global$3.DOM.select(editor.settings.ui_container)[0];\n      ctrl.getRoot().uiContainer = uiContainer;\n    };\n    var getUiContainer = function (ctrl) {\n      return ctrl ? ctrl.getRoot().uiContainer : null;\n    };\n    var inheritUiContainer = function (fromCtrl, toCtrl) {\n      return toCtrl.uiContainer = getUiContainer(fromCtrl);\n    };\n    var UiContainer = {\n      getUiContainerDelta: getUiContainerDelta,\n      setUiContainer: setUiContainer,\n      getUiContainer: getUiContainer,\n      inheritUiContainer: inheritUiContainer\n    };\n\n    var createToolbar = function (editor, items, size) {\n      var toolbarItems = [];\n      var buttonGroup;\n      if (!items) {\n        return;\n      }\n      global$2.each(items.split(/[ ,]/), function (item) {\n        var itemName;\n        var bindSelectorChanged = function () {\n          var selection = editor.selection;\n          if (item.settings.stateSelector) {\n            selection.selectorChanged(item.settings.stateSelector, function (state) {\n              item.active(state);\n            }, true);\n          }\n          if (item.settings.disabledStateSelector) {\n            selection.selectorChanged(item.settings.disabledStateSelector, function (state) {\n              item.disabled(state);\n            });\n          }\n        };\n        if (item === '|') {\n          buttonGroup = null;\n        } else {\n          if (!buttonGroup) {\n            buttonGroup = {\n              type: 'buttongroup',\n              items: []\n            };\n            toolbarItems.push(buttonGroup);\n          }\n          if (editor.buttons[item]) {\n            itemName = item;\n            item = editor.buttons[itemName];\n            if (typeof item === 'function') {\n              item = item();\n            }\n            item.type = item.type || 'button';\n            item.size = size;\n            item = global$4.create(item);\n            buttonGroup.items.push(item);\n            if (editor.initialized) {\n              bindSelectorChanged();\n            } else {\n              editor.on('init', bindSelectorChanged);\n            }\n          }\n        }\n      });\n      return {\n        type: 'toolbar',\n        layout: 'flow',\n        items: toolbarItems\n      };\n    };\n    var createToolbars = function (editor, size) {\n      var toolbars = [];\n      var addToolbar = function (items) {\n        if (items) {\n          toolbars.push(createToolbar(editor, items, size));\n        }\n      };\n      global$2.each(getToolbars(editor), function (toolbar) {\n        addToolbar(toolbar);\n      });\n      if (toolbars.length) {\n        return {\n          type: 'panel',\n          layout: 'stack',\n          classes: 'toolbar-grp',\n          ariaRoot: true,\n          ariaRemember: true,\n          items: toolbars\n        };\n      }\n    };\n    var Toolbar = {\n      createToolbar: createToolbar,\n      createToolbars: createToolbars\n    };\n\n    var DOM = global$3.DOM;\n    var toClientRect = function (geomRect) {\n      return {\n        left: geomRect.x,\n        top: geomRect.y,\n        width: geomRect.w,\n        height: geomRect.h,\n        right: geomRect.x + geomRect.w,\n        bottom: geomRect.y + geomRect.h\n      };\n    };\n    var hideAllFloatingPanels = function (editor) {\n      global$2.each(editor.contextToolbars, function (toolbar) {\n        if (toolbar.panel) {\n          toolbar.panel.hide();\n        }\n      });\n    };\n    var movePanelTo = function (panel, pos) {\n      panel.moveTo(pos.left, pos.top);\n    };\n    var togglePositionClass = function (panel, relPos, predicate) {\n      relPos = relPos ? relPos.substr(0, 2) : '';\n      global$2.each({\n        t: 'down',\n        b: 'up'\n      }, function (cls, pos) {\n        panel.classes.toggle('arrow-' + cls, predicate(pos, relPos.substr(0, 1)));\n      });\n      global$2.each({\n        l: 'left',\n        r: 'right'\n      }, function (cls, pos) {\n        panel.classes.toggle('arrow-' + cls, predicate(pos, relPos.substr(1, 1)));\n      });\n    };\n    var userConstrain = function (handler, x, y, elementRect, contentAreaRect, panelRect) {\n      panelRect = toClientRect({\n        x: x,\n        y: y,\n        w: panelRect.w,\n        h: panelRect.h\n      });\n      if (handler) {\n        panelRect = handler({\n          elementRect: toClientRect(elementRect),\n          contentAreaRect: toClientRect(contentAreaRect),\n          panelRect: panelRect\n        });\n      }\n      return panelRect;\n    };\n    var addContextualToolbars = function (editor) {\n      var scrollContainer;\n      var getContextToolbars = function () {\n        return editor.contextToolbars || [];\n      };\n      var getElementRect = function (elm) {\n        var pos, targetRect, root;\n        pos = DOM.getPos(editor.getContentAreaContainer());\n        targetRect = editor.dom.getRect(elm);\n        root = editor.dom.getRoot();\n        if (root.nodeName === 'BODY') {\n          targetRect.x -= root.ownerDocument.documentElement.scrollLeft || root.scrollLeft;\n          targetRect.y -= root.ownerDocument.documentElement.scrollTop || root.scrollTop;\n        }\n        targetRect.x += pos.x;\n        targetRect.y += pos.y;\n        return targetRect;\n      };\n      var reposition = function (match, shouldShow) {\n        var relPos, panelRect, elementRect, contentAreaRect, panel, relRect, testPositions, smallElementWidthThreshold;\n        var handler = getInlineToolbarPositionHandler(editor);\n        if (editor.removed) {\n          return;\n        }\n        if (!match || !match.toolbar.panel) {\n          hideAllFloatingPanels(editor);\n          return;\n        }\n        testPositions = [\n          'bc-tc',\n          'tc-bc',\n          'tl-bl',\n          'bl-tl',\n          'tr-br',\n          'br-tr'\n        ];\n        panel = match.toolbar.panel;\n        if (shouldShow) {\n          panel.show();\n        }\n        elementRect = getElementRect(match.element);\n        panelRect = DOM.getRect(panel.getEl());\n        contentAreaRect = DOM.getRect(editor.getContentAreaContainer() || editor.getBody());\n        var delta = UiContainer.getUiContainerDelta(panel).getOr({\n          x: 0,\n          y: 0\n        });\n        elementRect.x += delta.x;\n        elementRect.y += delta.y;\n        panelRect.x += delta.x;\n        panelRect.y += delta.y;\n        contentAreaRect.x += delta.x;\n        contentAreaRect.y += delta.y;\n        smallElementWidthThreshold = 25;\n        if (DOM.getStyle(match.element, 'display', true) !== 'inline') {\n          var clientRect = match.element.getBoundingClientRect();\n          elementRect.w = clientRect.width;\n          elementRect.h = clientRect.height;\n        }\n        if (!editor.inline) {\n          contentAreaRect.w = editor.getDoc().documentElement.offsetWidth;\n        }\n        if (editor.selection.controlSelection.isResizable(match.element) && elementRect.w < smallElementWidthThreshold) {\n          elementRect = global$6.inflate(elementRect, 0, 8);\n        }\n        relPos = global$6.findBestRelativePosition(panelRect, elementRect, contentAreaRect, testPositions);\n        elementRect = global$6.clamp(elementRect, contentAreaRect);\n        if (relPos) {\n          relRect = global$6.relativePosition(panelRect, elementRect, relPos);\n          movePanelTo(panel, userConstrain(handler, relRect.x, relRect.y, elementRect, contentAreaRect, panelRect));\n        } else {\n          contentAreaRect.h += panelRect.h;\n          elementRect = global$6.intersect(contentAreaRect, elementRect);\n          if (elementRect) {\n            relPos = global$6.findBestRelativePosition(panelRect, elementRect, contentAreaRect, [\n              'bc-tc',\n              'bl-tl',\n              'br-tr'\n            ]);\n            if (relPos) {\n              relRect = global$6.relativePosition(panelRect, elementRect, relPos);\n              movePanelTo(panel, userConstrain(handler, relRect.x, relRect.y, elementRect, contentAreaRect, panelRect));\n            } else {\n              movePanelTo(panel, userConstrain(handler, elementRect.x, elementRect.y, elementRect, contentAreaRect, panelRect));\n            }\n          } else {\n            panel.hide();\n          }\n        }\n        togglePositionClass(panel, relPos, function (pos1, pos2) {\n          return pos1 === pos2;\n        });\n      };\n      var repositionHandler = function (show) {\n        return function () {\n          var execute = function () {\n            if (editor.selection) {\n              reposition(findFrontMostMatch(editor.selection.getNode()), show);\n            }\n          };\n          global$7.requestAnimationFrame(execute);\n        };\n      };\n      var bindScrollEvent = function (panel) {\n        if (!scrollContainer) {\n          var reposition_1 = repositionHandler(true);\n          var uiContainer_1 = UiContainer.getUiContainer(panel);\n          scrollContainer = editor.selection.getScrollContainer() || editor.getWin();\n          DOM.bind(scrollContainer, 'scroll', reposition_1);\n          DOM.bind(uiContainer_1, 'scroll', reposition_1);\n          editor.on('remove', function () {\n            DOM.unbind(scrollContainer, 'scroll', reposition_1);\n            DOM.unbind(uiContainer_1, 'scroll', reposition_1);\n          });\n        }\n      };\n      var showContextToolbar = function (match) {\n        var panel;\n        if (match.toolbar.panel) {\n          match.toolbar.panel.show();\n          reposition(match);\n          return;\n        }\n        panel = global$4.create({\n          type: 'floatpanel',\n          role: 'dialog',\n          classes: 'tinymce tinymce-inline arrow',\n          ariaLabel: 'Inline toolbar',\n          layout: 'flex',\n          direction: 'column',\n          align: 'stretch',\n          autohide: false,\n          autofix: true,\n          fixed: true,\n          border: 1,\n          items: Toolbar.createToolbar(editor, match.toolbar.items),\n          oncancel: function () {\n            editor.focus();\n          }\n        });\n        UiContainer.setUiContainer(editor, panel);\n        bindScrollEvent(panel);\n        match.toolbar.panel = panel;\n        panel.renderTo().reflow();\n        reposition(match);\n      };\n      var hideAllContextToolbars = function () {\n        global$2.each(getContextToolbars(), function (toolbar) {\n          if (toolbar.panel) {\n            toolbar.panel.hide();\n          }\n        });\n      };\n      var findFrontMostMatch = function (targetElm) {\n        var i, y, parentsAndSelf;\n        var toolbars = getContextToolbars();\n        parentsAndSelf = editor.$(targetElm).parents().add(targetElm);\n        for (i = parentsAndSelf.length - 1; i >= 0; i--) {\n          for (y = toolbars.length - 1; y >= 0; y--) {\n            if (toolbars[y].predicate(parentsAndSelf[i])) {\n              return {\n                toolbar: toolbars[y],\n                element: parentsAndSelf[i]\n              };\n            }\n          }\n        }\n        return null;\n      };\n      editor.on('click keyup setContent ObjectResized', function (e) {\n        if (e.type === 'setcontent' && !e.selection) {\n          return;\n        }\n        global$7.setEditorTimeout(editor, function () {\n          var match;\n          match = findFrontMostMatch(editor.selection.getNode());\n          if (match) {\n            hideAllContextToolbars();\n            showContextToolbar(match);\n          } else {\n            hideAllContextToolbars();\n          }\n        });\n      });\n      editor.on('blur hide contextmenu', hideAllContextToolbars);\n      editor.on('ObjectResizeStart', function () {\n        var match = findFrontMostMatch(editor.selection.getNode());\n        if (match && match.toolbar.panel) {\n          match.toolbar.panel.hide();\n        }\n      });\n      editor.on('ResizeEditor ResizeWindow', repositionHandler(true));\n      editor.on('nodeChange', repositionHandler(false));\n      editor.on('remove', function () {\n        global$2.each(getContextToolbars(), function (toolbar) {\n          if (toolbar.panel) {\n            toolbar.panel.remove();\n          }\n        });\n        editor.contextToolbars = {};\n      });\n      editor.shortcuts.add('ctrl+F9', '', function () {\n        var match = findFrontMostMatch(editor.selection.getNode());\n        if (match && match.toolbar.panel) {\n          match.toolbar.panel.items()[0].focus();\n        }\n      });\n    };\n    var ContextToolbars = { addContextualToolbars: addContextualToolbars };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isArray = isType('array');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Option.none() : Option.some(r);\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(i);\n        }\n      }\n      return Option.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var defaultMenus = {\n      file: {\n        title: 'File',\n        items: 'newdocument restoredraft | preview | print'\n      },\n      edit: {\n        title: 'Edit',\n        items: 'undo redo | cut copy paste pastetext | selectall'\n      },\n      view: {\n        title: 'View',\n        items: 'code | visualaid visualchars visualblocks | spellchecker | preview fullscreen'\n      },\n      insert: {\n        title: 'Insert',\n        items: 'image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime'\n      },\n      format: {\n        title: 'Format',\n        items: 'bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat'\n      },\n      tools: {\n        title: 'Tools',\n        items: 'spellchecker spellcheckerlanguage | a11ycheck code'\n      },\n      table: { title: 'Table' },\n      help: { title: 'Help' }\n    };\n    var delimiterMenuNamePair = function () {\n      return {\n        name: '|',\n        item: { text: '|' }\n      };\n    };\n    var createMenuNameItemPair = function (name, item) {\n      var menuItem = item ? {\n        name: name,\n        item: item\n      } : null;\n      return name === '|' ? delimiterMenuNamePair() : menuItem;\n    };\n    var hasItemName = function (namedMenuItems, name) {\n      return findIndex(namedMenuItems, function (namedMenuItem) {\n        return namedMenuItem.name === name;\n      }).isSome();\n    };\n    var isSeparator = function (namedMenuItem) {\n      return namedMenuItem && namedMenuItem.item.text === '|';\n    };\n    var cleanupMenu = function (namedMenuItems, removedMenuItems) {\n      var menuItemsPass1 = filter(namedMenuItems, function (namedMenuItem) {\n        return removedMenuItems.hasOwnProperty(namedMenuItem.name) === false;\n      });\n      var menuItemsPass2 = filter(menuItemsPass1, function (namedMenuItem, i) {\n        return !isSeparator(namedMenuItem) || !isSeparator(menuItemsPass1[i - 1]);\n      });\n      return filter(menuItemsPass2, function (namedMenuItem, i) {\n        return !isSeparator(namedMenuItem) || i > 0 && i < menuItemsPass2.length - 1;\n      });\n    };\n    var createMenu = function (editorMenuItems, menus, removedMenuItems, context) {\n      var menuButton, menu, namedMenuItems, isUserDefined;\n      if (menus) {\n        menu = menus[context];\n        isUserDefined = true;\n      } else {\n        menu = defaultMenus[context];\n      }\n      if (menu) {\n        menuButton = { text: menu.title };\n        namedMenuItems = [];\n        global$2.each((menu.items || '').split(/[ ,]/), function (name) {\n          var namedMenuItem = createMenuNameItemPair(name, editorMenuItems[name]);\n          if (namedMenuItem) {\n            namedMenuItems.push(namedMenuItem);\n          }\n        });\n        if (!isUserDefined) {\n          global$2.each(editorMenuItems, function (item, name) {\n            if (item.context === context && !hasItemName(namedMenuItems, name)) {\n              if (item.separator === 'before') {\n                namedMenuItems.push(delimiterMenuNamePair());\n              }\n              if (item.prependToContext) {\n                namedMenuItems.unshift(createMenuNameItemPair(name, item));\n              } else {\n                namedMenuItems.push(createMenuNameItemPair(name, item));\n              }\n              if (item.separator === 'after') {\n                namedMenuItems.push(delimiterMenuNamePair());\n              }\n            }\n          });\n        }\n        menuButton.menu = map(cleanupMenu(namedMenuItems, removedMenuItems), function (menuItem) {\n          return menuItem.item;\n        });\n        if (!menuButton.menu.length) {\n          return null;\n        }\n      }\n      return menuButton;\n    };\n    var getDefaultMenubar = function (editor) {\n      var name;\n      var defaultMenuBar = [];\n      var menu = getMenu(editor);\n      if (menu) {\n        for (name in menu) {\n          defaultMenuBar.push(name);\n        }\n      } else {\n        for (name in defaultMenus) {\n          defaultMenuBar.push(name);\n        }\n      }\n      return defaultMenuBar;\n    };\n    var createMenuButtons = function (editor) {\n      var menuButtons = [];\n      var defaultMenuBar = getDefaultMenubar(editor);\n      var removedMenuItems = global$2.makeMap(getRemovedMenuItems(editor).split(/[ ,]/));\n      var menubar = getMenubar(editor);\n      var enabledMenuNames = typeof menubar === 'string' ? menubar.split(/[ ,]/) : defaultMenuBar;\n      for (var i = 0; i < enabledMenuNames.length; i++) {\n        var menuItems = enabledMenuNames[i];\n        var menu = createMenu(editor.menuItems, getMenu(editor), removedMenuItems, menuItems);\n        if (menu) {\n          menuButtons.push(menu);\n        }\n      }\n      return menuButtons;\n    };\n    var Menubar = { createMenuButtons: createMenuButtons };\n\n    var DOM$1 = global$3.DOM;\n    var getSize = function (elm) {\n      return {\n        width: elm.clientWidth,\n        height: elm.clientHeight\n      };\n    };\n    var resizeTo = function (editor, width, height) {\n      var containerElm, iframeElm, containerSize, iframeSize;\n      containerElm = editor.getContainer();\n      iframeElm = editor.getContentAreaContainer().firstChild;\n      containerSize = getSize(containerElm);\n      iframeSize = getSize(iframeElm);\n      if (width !== null) {\n        width = Math.max(getMinWidth(editor), width);\n        width = Math.min(getMaxWidth(editor), width);\n        DOM$1.setStyle(containerElm, 'width', width + (containerSize.width - iframeSize.width));\n        DOM$1.setStyle(iframeElm, 'width', width);\n      }\n      height = Math.max(getMinHeight(editor), height);\n      height = Math.min(getMaxHeight(editor), height);\n      DOM$1.setStyle(iframeElm, 'height', height);\n      Events.fireResizeEditor(editor);\n    };\n    var resizeBy = function (editor, dw, dh) {\n      var elm = editor.getContentAreaContainer();\n      resizeTo(editor, elm.clientWidth + dw, elm.clientHeight + dh);\n    };\n    var Resize = {\n      resizeTo: resizeTo,\n      resizeBy: resizeBy\n    };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var api = function (elm) {\n      return {\n        element: function () {\n          return elm;\n        }\n      };\n    };\n    var trigger = function (sidebar, panel, callbackName) {\n      var callback = sidebar.settings[callbackName];\n      if (callback) {\n        callback(api(panel.getEl('body')));\n      }\n    };\n    var hidePanels = function (name, container, sidebars) {\n      global$2.each(sidebars, function (sidebar) {\n        var panel = container.items().filter('#' + sidebar.name)[0];\n        if (panel && panel.visible() && sidebar.name !== name) {\n          trigger(sidebar, panel, 'onhide');\n          panel.visible(false);\n        }\n      });\n    };\n    var deactivateButtons = function (toolbar) {\n      toolbar.items().each(function (ctrl) {\n        ctrl.active(false);\n      });\n    };\n    var findSidebar = function (sidebars, name) {\n      return global$2.grep(sidebars, function (sidebar) {\n        return sidebar.name === name;\n      })[0];\n    };\n    var showPanel = function (editor, name, sidebars) {\n      return function (e) {\n        var btnCtrl = e.control;\n        var container = btnCtrl.parents().filter('panel')[0];\n        var panel = container.find('#' + name)[0];\n        var sidebar = findSidebar(sidebars, name);\n        hidePanels(name, container, sidebars);\n        deactivateButtons(btnCtrl.parent());\n        if (panel && panel.visible()) {\n          trigger(sidebar, panel, 'onhide');\n          panel.hide();\n          btnCtrl.active(false);\n        } else {\n          if (panel) {\n            panel.show();\n            trigger(sidebar, panel, 'onshow');\n          } else {\n            panel = global$4.create({\n              type: 'container',\n              name: name,\n              layout: 'stack',\n              classes: 'sidebar-panel',\n              html: ''\n            });\n            container.prepend(panel);\n            trigger(sidebar, panel, 'onrender');\n            trigger(sidebar, panel, 'onshow');\n          }\n          btnCtrl.active(true);\n        }\n        Events.fireResizeEditor(editor);\n      };\n    };\n    var isModernBrowser = function () {\n      return !global$8.ie || global$8.ie >= 11;\n    };\n    var hasSidebar = function (editor) {\n      return isModernBrowser() && editor.sidebars ? editor.sidebars.length > 0 : false;\n    };\n    var createSidebar = function (editor) {\n      var buttons = global$2.map(editor.sidebars, function (sidebar) {\n        var settings = sidebar.settings;\n        return {\n          type: 'button',\n          icon: settings.icon,\n          image: settings.image,\n          tooltip: settings.tooltip,\n          onclick: showPanel(editor, sidebar.name, editor.sidebars)\n        };\n      });\n      return {\n        type: 'panel',\n        name: 'sidebar',\n        layout: 'stack',\n        classes: 'sidebar',\n        items: [{\n            type: 'toolbar',\n            layout: 'stack',\n            classes: 'sidebar-toolbar',\n            items: buttons\n          }]\n      };\n    };\n    var Sidebar = {\n      hasSidebar: hasSidebar,\n      createSidebar: createSidebar\n    };\n\n    var fireSkinLoaded$1 = function (editor) {\n      var done = function () {\n        editor._skinLoaded = true;\n        Events.fireSkinLoaded(editor);\n      };\n      return function () {\n        if (editor.initialized) {\n          done();\n        } else {\n          editor.on('init', done);\n        }\n      };\n    };\n    var SkinLoaded = { fireSkinLoaded: fireSkinLoaded$1 };\n\n    var DOM$2 = global$3.DOM;\n    var switchMode = function (panel) {\n      return function (e) {\n        panel.find('*').disabled(e.mode === 'readonly');\n      };\n    };\n    var editArea = function (border) {\n      return {\n        type: 'panel',\n        name: 'iframe',\n        layout: 'stack',\n        classes: 'edit-area',\n        border: border,\n        html: ''\n      };\n    };\n    var editAreaContainer = function (editor) {\n      return {\n        type: 'panel',\n        layout: 'stack',\n        classes: 'edit-aria-container',\n        border: '1 0 0 0',\n        items: [\n          editArea('0'),\n          Sidebar.createSidebar(editor)\n        ]\n      };\n    };\n    var render = function (editor, theme, args) {\n      var panel, resizeHandleCtrl, startSize;\n      if (isSkinDisabled(editor) === false && args.skinUiCss) {\n        DOM$2.styleSheetLoader.load(args.skinUiCss, SkinLoaded.fireSkinLoaded(editor));\n      } else {\n        SkinLoaded.fireSkinLoaded(editor)();\n      }\n      panel = theme.panel = global$4.create({\n        type: 'panel',\n        role: 'application',\n        classes: 'tinymce',\n        style: 'visibility: hidden',\n        layout: 'stack',\n        border: 1,\n        items: [\n          {\n            type: 'container',\n            classes: 'top-part',\n            items: [\n              hasMenubar(editor) === false ? null : {\n                type: 'menubar',\n                border: '0 0 1 0',\n                items: Menubar.createMenuButtons(editor)\n              },\n              Toolbar.createToolbars(editor, getToolbarSize(editor))\n            ]\n          },\n          Sidebar.hasSidebar(editor) ? editAreaContainer(editor) : editArea('1 0 0 0')\n        ]\n      });\n      UiContainer.setUiContainer(editor, panel);\n      if (getResize(editor) !== 'none') {\n        resizeHandleCtrl = {\n          type: 'resizehandle',\n          direction: getResize(editor),\n          onResizeStart: function () {\n            var elm = editor.getContentAreaContainer().firstChild;\n            startSize = {\n              width: elm.clientWidth,\n              height: elm.clientHeight\n            };\n          },\n          onResize: function (e) {\n            if (getResize(editor) === 'both') {\n              Resize.resizeTo(editor, startSize.width + e.deltaX, startSize.height + e.deltaY);\n            } else {\n              Resize.resizeTo(editor, null, startSize.height + e.deltaY);\n            }\n          }\n        };\n      }\n      if (hasStatusbar(editor)) {\n        var linkHtml = '<a href=\"https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce\" rel=\"noopener\" target=\"_blank\" role=\"presentation\" tabindex=\"-1\">Tiny</a>';\n        var html = global$5.translate([\n          'Powered by {0}',\n          linkHtml\n        ]);\n        var brandingLabel = isBrandingEnabled(editor) ? {\n          type: 'label',\n          classes: 'branding',\n          html: ' ' + html\n        } : null;\n        panel.add({\n          type: 'panel',\n          name: 'statusbar',\n          classes: 'statusbar',\n          layout: 'flow',\n          border: '1 0 0 0',\n          ariaRoot: true,\n          items: [\n            {\n              type: 'elementpath',\n              editor: editor\n            },\n            resizeHandleCtrl,\n            brandingLabel\n          ]\n        });\n      }\n      Events.fireBeforeRenderUI(editor);\n      editor.on('SwitchMode', switchMode(panel));\n      panel.renderBefore(args.targetNode).reflow();\n      if (isReadOnly(editor)) {\n        editor.setMode('readonly');\n      }\n      if (args.width) {\n        DOM$2.setStyle(panel.getEl(), 'width', args.width);\n      }\n      editor.on('remove', function () {\n        panel.remove();\n        panel = null;\n      });\n      A11y.addKeys(editor, panel);\n      ContextToolbars.addContextualToolbars(editor);\n      return {\n        iframeContainer: panel.find('#iframe')[0].getEl(),\n        editorContainer: panel.getEl()\n      };\n    };\n    var Iframe = { render: render };\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var count = 0;\n    var funcs = {\n      id: function () {\n        return 'mceu_' + count++;\n      },\n      create: function (name, attrs, children) {\n        var elm = domGlobals.document.createElement(name);\n        global$3.DOM.setAttribs(elm, attrs);\n        if (typeof children === 'string') {\n          elm.innerHTML = children;\n        } else {\n          global$2.each(children, function (child) {\n            if (child.nodeType) {\n              elm.appendChild(child);\n            }\n          });\n        }\n        return elm;\n      },\n      createFragment: function (html) {\n        return global$3.DOM.createFragment(html);\n      },\n      getWindowSize: function () {\n        return global$3.DOM.getViewPort();\n      },\n      getSize: function (elm) {\n        var width, height;\n        if (elm.getBoundingClientRect) {\n          var rect = elm.getBoundingClientRect();\n          width = Math.max(rect.width || rect.right - rect.left, elm.offsetWidth);\n          height = Math.max(rect.height || rect.bottom - rect.bottom, elm.offsetHeight);\n        } else {\n          width = elm.offsetWidth;\n          height = elm.offsetHeight;\n        }\n        return {\n          width: width,\n          height: height\n        };\n      },\n      getPos: function (elm, root) {\n        return global$3.DOM.getPos(elm, root || funcs.getContainer());\n      },\n      getContainer: function () {\n        return global$8.container ? global$8.container : domGlobals.document.body;\n      },\n      getViewPort: function (win) {\n        return global$3.DOM.getViewPort(win);\n      },\n      get: function (id) {\n        return domGlobals.document.getElementById(id);\n      },\n      addClass: function (elm, cls) {\n        return global$3.DOM.addClass(elm, cls);\n      },\n      removeClass: function (elm, cls) {\n        return global$3.DOM.removeClass(elm, cls);\n      },\n      hasClass: function (elm, cls) {\n        return global$3.DOM.hasClass(elm, cls);\n      },\n      toggleClass: function (elm, cls, state) {\n        return global$3.DOM.toggleClass(elm, cls, state);\n      },\n      css: function (elm, name, value) {\n        return global$3.DOM.setStyle(elm, name, value);\n      },\n      getRuntimeStyle: function (elm, name) {\n        return global$3.DOM.getStyle(elm, name, true);\n      },\n      on: function (target, name, callback, scope) {\n        return global$3.DOM.bind(target, name, callback, scope);\n      },\n      off: function (target, name, callback) {\n        return global$3.DOM.unbind(target, name, callback);\n      },\n      fire: function (target, name, args) {\n        return global$3.DOM.fire(target, name, args);\n      },\n      innerHtml: function (elm, html) {\n        global$3.DOM.setHTML(elm, html);\n      }\n    };\n\n    var isStatic = function (elm) {\n      return funcs.getRuntimeStyle(elm, 'position') === 'static';\n    };\n    var isFixed = function (ctrl) {\n      return ctrl.state.get('fixed');\n    };\n    function calculateRelativePosition(ctrl, targetElm, rel) {\n      var ctrlElm, pos, x, y, selfW, selfH, targetW, targetH, viewport, size;\n      viewport = getWindowViewPort();\n      pos = funcs.getPos(targetElm, UiContainer.getUiContainer(ctrl));\n      x = pos.x;\n      y = pos.y;\n      if (isFixed(ctrl) && isStatic(domGlobals.document.body)) {\n        x -= viewport.x;\n        y -= viewport.y;\n      }\n      ctrlElm = ctrl.getEl();\n      size = funcs.getSize(ctrlElm);\n      selfW = size.width;\n      selfH = size.height;\n      size = funcs.getSize(targetElm);\n      targetW = size.width;\n      targetH = size.height;\n      rel = (rel || '').split('');\n      if (rel[0] === 'b') {\n        y += targetH;\n      }\n      if (rel[1] === 'r') {\n        x += targetW;\n      }\n      if (rel[0] === 'c') {\n        y += Math.round(targetH / 2);\n      }\n      if (rel[1] === 'c') {\n        x += Math.round(targetW / 2);\n      }\n      if (rel[3] === 'b') {\n        y -= selfH;\n      }\n      if (rel[4] === 'r') {\n        x -= selfW;\n      }\n      if (rel[3] === 'c') {\n        y -= Math.round(selfH / 2);\n      }\n      if (rel[4] === 'c') {\n        x -= Math.round(selfW / 2);\n      }\n      return {\n        x: x,\n        y: y,\n        w: selfW,\n        h: selfH\n      };\n    }\n    var getUiContainerViewPort = function (customUiContainer) {\n      return {\n        x: 0,\n        y: 0,\n        w: customUiContainer.scrollWidth - 1,\n        h: customUiContainer.scrollHeight - 1\n      };\n    };\n    var getWindowViewPort = function () {\n      var win = domGlobals.window;\n      var x = Math.max(win.pageXOffset, domGlobals.document.body.scrollLeft, domGlobals.document.documentElement.scrollLeft);\n      var y = Math.max(win.pageYOffset, domGlobals.document.body.scrollTop, domGlobals.document.documentElement.scrollTop);\n      var w = win.innerWidth || domGlobals.document.documentElement.clientWidth;\n      var h = win.innerHeight || domGlobals.document.documentElement.clientHeight;\n      return {\n        x: x,\n        y: y,\n        w: w,\n        h: h\n      };\n    };\n    var getViewPortRect = function (ctrl) {\n      var customUiContainer = UiContainer.getUiContainer(ctrl);\n      return customUiContainer && !isFixed(ctrl) ? getUiContainerViewPort(customUiContainer) : getWindowViewPort();\n    };\n    var Movable = {\n      testMoveRel: function (elm, rels) {\n        var viewPortRect = getViewPortRect(this);\n        for (var i = 0; i < rels.length; i++) {\n          var pos = calculateRelativePosition(this, elm, rels[i]);\n          if (isFixed(this)) {\n            if (pos.x > 0 && pos.x + pos.w < viewPortRect.w && pos.y > 0 && pos.y + pos.h < viewPortRect.h) {\n              return rels[i];\n            }\n          } else {\n            if (pos.x > viewPortRect.x && pos.x + pos.w < viewPortRect.w + viewPortRect.x && pos.y > viewPortRect.y && pos.y + pos.h < viewPortRect.h + viewPortRect.y) {\n              return rels[i];\n            }\n          }\n        }\n        return rels[0];\n      },\n      moveRel: function (elm, rel) {\n        if (typeof rel !== 'string') {\n          rel = this.testMoveRel(elm, rel);\n        }\n        var pos = calculateRelativePosition(this, elm, rel);\n        return this.moveTo(pos.x, pos.y);\n      },\n      moveBy: function (dx, dy) {\n        var self = this, rect = self.layoutRect();\n        self.moveTo(rect.x + dx, rect.y + dy);\n        return self;\n      },\n      moveTo: function (x, y) {\n        var self = this;\n        function constrain(value, max, size) {\n          if (value < 0) {\n            return 0;\n          }\n          if (value + size > max) {\n            value = max - size;\n            return value < 0 ? 0 : value;\n          }\n          return value;\n        }\n        if (self.settings.constrainToViewport) {\n          var viewPortRect = getViewPortRect(this);\n          var layoutRect = self.layoutRect();\n          x = constrain(x, viewPortRect.w + viewPortRect.x, layoutRect.w);\n          y = constrain(y, viewPortRect.h + viewPortRect.y, layoutRect.h);\n        }\n        var uiContainer = UiContainer.getUiContainer(self);\n        if (uiContainer && isStatic(uiContainer) && !isFixed(self)) {\n          x -= uiContainer.scrollLeft;\n          y -= uiContainer.scrollTop;\n        }\n        if (uiContainer) {\n          x += 1;\n          y += 1;\n        }\n        if (self.state.get('rendered')) {\n          self.layoutRect({\n            x: x,\n            y: y\n          }).repaint();\n        } else {\n          self.settings.x = x;\n          self.settings.y = y;\n        }\n        self.fire('move', {\n          x: x,\n          y: y\n        });\n        return self;\n      }\n    };\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.util.Class');\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.util.EventDispatcher');\n\n    var BoxUtils = {\n      parseBox: function (value) {\n        var len;\n        var radix = 10;\n        if (!value) {\n          return;\n        }\n        if (typeof value === 'number') {\n          value = value || 0;\n          return {\n            top: value,\n            left: value,\n            bottom: value,\n            right: value\n          };\n        }\n        value = value.split(' ');\n        len = value.length;\n        if (len === 1) {\n          value[1] = value[2] = value[3] = value[0];\n        } else if (len === 2) {\n          value[2] = value[0];\n          value[3] = value[1];\n        } else if (len === 3) {\n          value[3] = value[1];\n        }\n        return {\n          top: parseInt(value[0], radix) || 0,\n          right: parseInt(value[1], radix) || 0,\n          bottom: parseInt(value[2], radix) || 0,\n          left: parseInt(value[3], radix) || 0\n        };\n      },\n      measureBox: function (elm, prefix) {\n        function getStyle(name) {\n          var defaultView = elm.ownerDocument.defaultView;\n          if (defaultView) {\n            var computedStyle = defaultView.getComputedStyle(elm, null);\n            if (computedStyle) {\n              name = name.replace(/[A-Z]/g, function (a) {\n                return '-' + a;\n              });\n              return computedStyle.getPropertyValue(name);\n            } else {\n              return null;\n            }\n          }\n          return elm.currentStyle[name];\n        }\n        function getSide(name) {\n          var val = parseFloat(getStyle(name));\n          return isNaN(val) ? 0 : val;\n        }\n        return {\n          top: getSide(prefix + 'TopWidth'),\n          right: getSide(prefix + 'RightWidth'),\n          bottom: getSide(prefix + 'BottomWidth'),\n          left: getSide(prefix + 'LeftWidth')\n        };\n      }\n    };\n\n    function noop$1() {\n    }\n    function ClassList(onchange) {\n      this.cls = [];\n      this.cls._map = {};\n      this.onchange = onchange || noop$1;\n      this.prefix = '';\n    }\n    global$2.extend(ClassList.prototype, {\n      add: function (cls) {\n        if (cls && !this.contains(cls)) {\n          this.cls._map[cls] = true;\n          this.cls.push(cls);\n          this._change();\n        }\n        return this;\n      },\n      remove: function (cls) {\n        if (this.contains(cls)) {\n          var i = void 0;\n          for (i = 0; i < this.cls.length; i++) {\n            if (this.cls[i] === cls) {\n              break;\n            }\n          }\n          this.cls.splice(i, 1);\n          delete this.cls._map[cls];\n          this._change();\n        }\n        return this;\n      },\n      toggle: function (cls, state) {\n        var curState = this.contains(cls);\n        if (curState !== state) {\n          if (curState) {\n            this.remove(cls);\n          } else {\n            this.add(cls);\n          }\n          this._change();\n        }\n        return this;\n      },\n      contains: function (cls) {\n        return !!this.cls._map[cls];\n      },\n      _change: function () {\n        delete this.clsValue;\n        this.onchange.call(this);\n      }\n    });\n    ClassList.prototype.toString = function () {\n      var value;\n      if (this.clsValue) {\n        return this.clsValue;\n      }\n      value = '';\n      for (var i = 0; i < this.cls.length; i++) {\n        if (i > 0) {\n          value += ' ';\n        }\n        value += this.prefix + this.cls[i];\n      }\n      return value;\n    };\n\n    function unique(array) {\n      var uniqueItems = [];\n      var i = array.length, item;\n      while (i--) {\n        item = array[i];\n        if (!item.__checked) {\n          uniqueItems.push(item);\n          item.__checked = 1;\n        }\n      }\n      i = uniqueItems.length;\n      while (i--) {\n        delete uniqueItems[i].__checked;\n      }\n      return uniqueItems;\n    }\n    var expression = /^([\\w\\\\*]+)?(?:#([\\w\\-\\\\]+))?(?:\\.([\\w\\\\\\.]+))?(?:\\[\\@?([\\w\\\\]+)([\\^\\$\\*!~]?=)([\\w\\\\]+)\\])?(?:\\:(.+))?/i;\n    var chunker = /((?:\\((?:\\([^()]+\\)|[^()]+)+\\)|\\[(?:\\[[^\\[\\]]*\\]|['\"][^'\"]*['\"]|[^\\[\\]'\"]+)+\\]|\\\\.|[^ >+~,(\\[\\\\]+)+|[>+~])(\\s*,\\s*)?((?:.|\\r|\\n)*)/g;\n    var whiteSpace = /^\\s*|\\s*$/g;\n    var Collection;\n    var Selector = global$a.extend({\n      init: function (selector) {\n        var match = this.match;\n        function compileNameFilter(name) {\n          if (name) {\n            name = name.toLowerCase();\n            return function (item) {\n              return name === '*' || item.type === name;\n            };\n          }\n        }\n        function compileIdFilter(id) {\n          if (id) {\n            return function (item) {\n              return item._name === id;\n            };\n          }\n        }\n        function compileClassesFilter(classes) {\n          if (classes) {\n            classes = classes.split('.');\n            return function (item) {\n              var i = classes.length;\n              while (i--) {\n                if (!item.classes.contains(classes[i])) {\n                  return false;\n                }\n              }\n              return true;\n            };\n          }\n        }\n        function compileAttrFilter(name, cmp, check) {\n          if (name) {\n            return function (item) {\n              var value = item[name] ? item[name]() : '';\n              return !cmp ? !!check : cmp === '=' ? value === check : cmp === '*=' ? value.indexOf(check) >= 0 : cmp === '~=' ? (' ' + value + ' ').indexOf(' ' + check + ' ') >= 0 : cmp === '!=' ? value !== check : cmp === '^=' ? value.indexOf(check) === 0 : cmp === '$=' ? value.substr(value.length - check.length) === check : false;\n            };\n          }\n        }\n        function compilePsuedoFilter(name) {\n          var notSelectors;\n          if (name) {\n            name = /(?:not\\((.+)\\))|(.+)/i.exec(name);\n            if (!name[1]) {\n              name = name[2];\n              return function (item, index, length) {\n                return name === 'first' ? index === 0 : name === 'last' ? index === length - 1 : name === 'even' ? index % 2 === 0 : name === 'odd' ? index % 2 === 1 : item[name] ? item[name]() : false;\n              };\n            }\n            notSelectors = parseChunks(name[1], []);\n            return function (item) {\n              return !match(item, notSelectors);\n            };\n          }\n        }\n        function compile(selector, filters, direct) {\n          var parts;\n          function add(filter) {\n            if (filter) {\n              filters.push(filter);\n            }\n          }\n          parts = expression.exec(selector.replace(whiteSpace, ''));\n          add(compileNameFilter(parts[1]));\n          add(compileIdFilter(parts[2]));\n          add(compileClassesFilter(parts[3]));\n          add(compileAttrFilter(parts[4], parts[5], parts[6]));\n          add(compilePsuedoFilter(parts[7]));\n          filters.pseudo = !!parts[7];\n          filters.direct = direct;\n          return filters;\n        }\n        function parseChunks(selector, selectors) {\n          var parts = [];\n          var extra, matches, i;\n          do {\n            chunker.exec('');\n            matches = chunker.exec(selector);\n            if (matches) {\n              selector = matches[3];\n              parts.push(matches[1]);\n              if (matches[2]) {\n                extra = matches[3];\n                break;\n              }\n            }\n          } while (matches);\n          if (extra) {\n            parseChunks(extra, selectors);\n          }\n          selector = [];\n          for (i = 0; i < parts.length; i++) {\n            if (parts[i] !== '>') {\n              selector.push(compile(parts[i], [], parts[i - 1] === '>'));\n            }\n          }\n          selectors.push(selector);\n          return selectors;\n        }\n        this._selectors = parseChunks(selector, []);\n      },\n      match: function (control, selectors) {\n        var i, l, si, sl, selector, fi, fl, filters, index, length, siblings, count, item;\n        selectors = selectors || this._selectors;\n        for (i = 0, l = selectors.length; i < l; i++) {\n          selector = selectors[i];\n          sl = selector.length;\n          item = control;\n          count = 0;\n          for (si = sl - 1; si >= 0; si--) {\n            filters = selector[si];\n            while (item) {\n              if (filters.pseudo) {\n                siblings = item.parent().items();\n                index = length = siblings.length;\n                while (index--) {\n                  if (siblings[index] === item) {\n                    break;\n                  }\n                }\n              }\n              for (fi = 0, fl = filters.length; fi < fl; fi++) {\n                if (!filters[fi](item, index, length)) {\n                  fi = fl + 1;\n                  break;\n                }\n              }\n              if (fi === fl) {\n                count++;\n                break;\n              } else {\n                if (si === sl - 1) {\n                  break;\n                }\n              }\n              item = item.parent();\n            }\n          }\n          if (count === sl) {\n            return true;\n          }\n        }\n        return false;\n      },\n      find: function (container) {\n        var matches = [], i, l;\n        var selectors = this._selectors;\n        function collect(items, selector, index) {\n          var i, l, fi, fl, item;\n          var filters = selector[index];\n          for (i = 0, l = items.length; i < l; i++) {\n            item = items[i];\n            for (fi = 0, fl = filters.length; fi < fl; fi++) {\n              if (!filters[fi](item, i, l)) {\n                fi = fl + 1;\n                break;\n              }\n            }\n            if (fi === fl) {\n              if (index === selector.length - 1) {\n                matches.push(item);\n              } else {\n                if (item.items) {\n                  collect(item.items(), selector, index + 1);\n                }\n              }\n            } else if (filters.direct) {\n              return;\n            }\n            if (item.items) {\n              collect(item.items(), selector, index);\n            }\n          }\n        }\n        if (container.items) {\n          for (i = 0, l = selectors.length; i < l; i++) {\n            collect(container.items(), selectors[i], 0);\n          }\n          if (l > 1) {\n            matches = unique(matches);\n          }\n        }\n        if (!Collection) {\n          Collection = Selector.Collection;\n        }\n        return new Collection(matches);\n      }\n    });\n\n    var Collection$1, proto;\n    var push = Array.prototype.push, slice = Array.prototype.slice;\n    proto = {\n      length: 0,\n      init: function (items) {\n        if (items) {\n          this.add(items);\n        }\n      },\n      add: function (items) {\n        var self = this;\n        if (!global$2.isArray(items)) {\n          if (items instanceof Collection$1) {\n            self.add(items.toArray());\n          } else {\n            push.call(self, items);\n          }\n        } else {\n          push.apply(self, items);\n        }\n        return self;\n      },\n      set: function (items) {\n        var self = this;\n        var len = self.length;\n        var i;\n        self.length = 0;\n        self.add(items);\n        for (i = self.length; i < len; i++) {\n          delete self[i];\n        }\n        return self;\n      },\n      filter: function (selector) {\n        var self = this;\n        var i, l;\n        var matches = [];\n        var item, match;\n        if (typeof selector === 'string') {\n          selector = new Selector(selector);\n          match = function (item) {\n            return selector.match(item);\n          };\n        } else {\n          match = selector;\n        }\n        for (i = 0, l = self.length; i < l; i++) {\n          item = self[i];\n          if (match(item)) {\n            matches.push(item);\n          }\n        }\n        return new Collection$1(matches);\n      },\n      slice: function () {\n        return new Collection$1(slice.apply(this, arguments));\n      },\n      eq: function (index) {\n        return index === -1 ? this.slice(index) : this.slice(index, +index + 1);\n      },\n      each: function (callback) {\n        global$2.each(this, callback);\n        return this;\n      },\n      toArray: function () {\n        return global$2.toArray(this);\n      },\n      indexOf: function (ctrl) {\n        var self = this;\n        var i = self.length;\n        while (i--) {\n          if (self[i] === ctrl) {\n            break;\n          }\n        }\n        return i;\n      },\n      reverse: function () {\n        return new Collection$1(global$2.toArray(this).reverse());\n      },\n      hasClass: function (cls) {\n        return this[0] ? this[0].classes.contains(cls) : false;\n      },\n      prop: function (name, value) {\n        var self = this;\n        var item;\n        if (value !== undefined) {\n          self.each(function (item) {\n            if (item[name]) {\n              item[name](value);\n            }\n          });\n          return self;\n        }\n        item = self[0];\n        if (item && item[name]) {\n          return item[name]();\n        }\n      },\n      exec: function (name) {\n        var self = this, args = global$2.toArray(arguments).slice(1);\n        self.each(function (item) {\n          if (item[name]) {\n            item[name].apply(item, args);\n          }\n        });\n        return self;\n      },\n      remove: function () {\n        var i = this.length;\n        while (i--) {\n          this[i].remove();\n        }\n        return this;\n      },\n      addClass: function (cls) {\n        return this.each(function (item) {\n          item.classes.add(cls);\n        });\n      },\n      removeClass: function (cls) {\n        return this.each(function (item) {\n          item.classes.remove(cls);\n        });\n      }\n    };\n    global$2.each('fire on off show hide append prepend before after reflow'.split(' '), function (name) {\n      proto[name] = function () {\n        var args = global$2.toArray(arguments);\n        this.each(function (ctrl) {\n          if (name in ctrl) {\n            ctrl[name].apply(ctrl, args);\n          }\n        });\n        return this;\n      };\n    });\n    global$2.each('text name disabled active selected checked visible parent value data'.split(' '), function (name) {\n      proto[name] = function (value) {\n        return this.prop(name, value);\n      };\n    });\n    Collection$1 = global$a.extend(proto);\n    Selector.Collection = Collection$1;\n    var Collection$2 = Collection$1;\n\n    var Binding = function (settings) {\n      this.create = settings.create;\n    };\n    Binding.create = function (model, name) {\n      return new Binding({\n        create: function (otherModel, otherName) {\n          var bindings;\n          var fromSelfToOther = function (e) {\n            otherModel.set(otherName, e.value);\n          };\n          var fromOtherToSelf = function (e) {\n            model.set(name, e.value);\n          };\n          otherModel.on('change:' + otherName, fromOtherToSelf);\n          model.on('change:' + name, fromSelfToOther);\n          bindings = otherModel._bindings;\n          if (!bindings) {\n            bindings = otherModel._bindings = [];\n            otherModel.on('destroy', function () {\n              var i = bindings.length;\n              while (i--) {\n                bindings[i]();\n              }\n            });\n          }\n          bindings.push(function () {\n            model.off('change:' + name, fromSelfToOther);\n          });\n          return model.get(name);\n        }\n      });\n    };\n\n    var global$c = tinymce.util.Tools.resolve('tinymce.util.Observable');\n\n    function isNode(node) {\n      return node.nodeType > 0;\n    }\n    function isEqual(a, b) {\n      var k, checked;\n      if (a === b) {\n        return true;\n      }\n      if (a === null || b === null) {\n        return a === b;\n      }\n      if (typeof a !== 'object' || typeof b !== 'object') {\n        return a === b;\n      }\n      if (global$2.isArray(b)) {\n        if (a.length !== b.length) {\n          return false;\n        }\n        k = a.length;\n        while (k--) {\n          if (!isEqual(a[k], b[k])) {\n            return false;\n          }\n        }\n      }\n      if (isNode(a) || isNode(b)) {\n        return a === b;\n      }\n      checked = {};\n      for (k in b) {\n        if (!isEqual(a[k], b[k])) {\n          return false;\n        }\n        checked[k] = true;\n      }\n      for (k in a) {\n        if (!checked[k] && !isEqual(a[k], b[k])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    var ObservableObject = global$a.extend({\n      Mixins: [global$c],\n      init: function (data) {\n        var name, value;\n        data = data || {};\n        for (name in data) {\n          value = data[name];\n          if (value instanceof Binding) {\n            data[name] = value.create(this, name);\n          }\n        }\n        this.data = data;\n      },\n      set: function (name, value) {\n        var key, args;\n        var oldValue = this.data[name];\n        if (value instanceof Binding) {\n          value = value.create(this, name);\n        }\n        if (typeof name === 'object') {\n          for (key in name) {\n            this.set(key, name[key]);\n          }\n          return this;\n        }\n        if (!isEqual(oldValue, value)) {\n          this.data[name] = value;\n          args = {\n            target: this,\n            name: name,\n            value: value,\n            oldValue: oldValue\n          };\n          this.fire('change:' + name, args);\n          this.fire('change', args);\n        }\n        return this;\n      },\n      get: function (name) {\n        return this.data[name];\n      },\n      has: function (name) {\n        return name in this.data;\n      },\n      bind: function (name) {\n        return Binding.create(this, name);\n      },\n      destroy: function () {\n        this.fire('destroy');\n      }\n    });\n\n    var dirtyCtrls = {}, animationFrameRequested;\n    var ReflowQueue = {\n      add: function (ctrl) {\n        var parent = ctrl.parent();\n        if (parent) {\n          if (!parent._layout || parent._layout.isNative()) {\n            return;\n          }\n          if (!dirtyCtrls[parent._id]) {\n            dirtyCtrls[parent._id] = parent;\n          }\n          if (!animationFrameRequested) {\n            animationFrameRequested = true;\n            global$7.requestAnimationFrame(function () {\n              var id, ctrl;\n              animationFrameRequested = false;\n              for (id in dirtyCtrls) {\n                ctrl = dirtyCtrls[id];\n                if (ctrl.state.get('rendered')) {\n                  ctrl.reflow();\n                }\n              }\n              dirtyCtrls = {};\n            }, domGlobals.document.body);\n          }\n        }\n      },\n      remove: function (ctrl) {\n        if (dirtyCtrls[ctrl._id]) {\n          delete dirtyCtrls[ctrl._id];\n        }\n      }\n    };\n\n    var hasMouseWheelEventSupport = 'onmousewheel' in domGlobals.document;\n    var hasWheelEventSupport = false;\n    var classPrefix = 'mce-';\n    var Control, idCounter = 0;\n    var proto$1 = {\n      Statics: { classPrefix: classPrefix },\n      isRtl: function () {\n        return Control.rtl;\n      },\n      classPrefix: classPrefix,\n      init: function (settings) {\n        var self = this;\n        var classes, defaultClasses;\n        function applyClasses(classes) {\n          var i;\n          classes = classes.split(' ');\n          for (i = 0; i < classes.length; i++) {\n            self.classes.add(classes[i]);\n          }\n        }\n        self.settings = settings = global$2.extend({}, self.Defaults, settings);\n        self._id = settings.id || 'mceu_' + idCounter++;\n        self._aria = { role: settings.role };\n        self._elmCache = {};\n        self.$ = global$9;\n        self.state = new ObservableObject({\n          visible: true,\n          active: false,\n          disabled: false,\n          value: ''\n        });\n        self.data = new ObservableObject(settings.data);\n        self.classes = new ClassList(function () {\n          if (self.state.get('rendered')) {\n            self.getEl().className = this.toString();\n          }\n        });\n        self.classes.prefix = self.classPrefix;\n        classes = settings.classes;\n        if (classes) {\n          if (self.Defaults) {\n            defaultClasses = self.Defaults.classes;\n            if (defaultClasses && classes !== defaultClasses) {\n              applyClasses(defaultClasses);\n            }\n          }\n          applyClasses(classes);\n        }\n        global$2.each('title text name visible disabled active value'.split(' '), function (name) {\n          if (name in settings) {\n            self[name](settings[name]);\n          }\n        });\n        self.on('click', function () {\n          if (self.disabled()) {\n            return false;\n          }\n        });\n        self.settings = settings;\n        self.borderBox = BoxUtils.parseBox(settings.border);\n        self.paddingBox = BoxUtils.parseBox(settings.padding);\n        self.marginBox = BoxUtils.parseBox(settings.margin);\n        if (settings.hidden) {\n          self.hide();\n        }\n      },\n      Properties: 'parent,name',\n      getContainerElm: function () {\n        var uiContainer = UiContainer.getUiContainer(this);\n        return uiContainer ? uiContainer : funcs.getContainer();\n      },\n      getParentCtrl: function (elm) {\n        var ctrl;\n        var lookup = this.getRoot().controlIdLookup;\n        while (elm && lookup) {\n          ctrl = lookup[elm.id];\n          if (ctrl) {\n            break;\n          }\n          elm = elm.parentNode;\n        }\n        return ctrl;\n      },\n      initLayoutRect: function () {\n        var self = this;\n        var settings = self.settings;\n        var borderBox, layoutRect;\n        var elm = self.getEl();\n        var width, height, minWidth, minHeight, autoResize;\n        var startMinWidth, startMinHeight, initialSize;\n        borderBox = self.borderBox = self.borderBox || BoxUtils.measureBox(elm, 'border');\n        self.paddingBox = self.paddingBox || BoxUtils.measureBox(elm, 'padding');\n        self.marginBox = self.marginBox || BoxUtils.measureBox(elm, 'margin');\n        initialSize = funcs.getSize(elm);\n        startMinWidth = settings.minWidth;\n        startMinHeight = settings.minHeight;\n        minWidth = startMinWidth || initialSize.width;\n        minHeight = startMinHeight || initialSize.height;\n        width = settings.width;\n        height = settings.height;\n        autoResize = settings.autoResize;\n        autoResize = typeof autoResize !== 'undefined' ? autoResize : !width && !height;\n        width = width || minWidth;\n        height = height || minHeight;\n        var deltaW = borderBox.left + borderBox.right;\n        var deltaH = borderBox.top + borderBox.bottom;\n        var maxW = settings.maxWidth || 65535;\n        var maxH = settings.maxHeight || 65535;\n        self._layoutRect = layoutRect = {\n          x: settings.x || 0,\n          y: settings.y || 0,\n          w: width,\n          h: height,\n          deltaW: deltaW,\n          deltaH: deltaH,\n          contentW: width - deltaW,\n          contentH: height - deltaH,\n          innerW: width - deltaW,\n          innerH: height - deltaH,\n          startMinWidth: startMinWidth || 0,\n          startMinHeight: startMinHeight || 0,\n          minW: Math.min(minWidth, maxW),\n          minH: Math.min(minHeight, maxH),\n          maxW: maxW,\n          maxH: maxH,\n          autoResize: autoResize,\n          scrollW: 0\n        };\n        self._lastLayoutRect = {};\n        return layoutRect;\n      },\n      layoutRect: function (newRect) {\n        var self = this;\n        var curRect = self._layoutRect, lastLayoutRect, size, deltaWidth, deltaHeight, repaintControls;\n        if (!curRect) {\n          curRect = self.initLayoutRect();\n        }\n        if (newRect) {\n          deltaWidth = curRect.deltaW;\n          deltaHeight = curRect.deltaH;\n          if (newRect.x !== undefined) {\n            curRect.x = newRect.x;\n          }\n          if (newRect.y !== undefined) {\n            curRect.y = newRect.y;\n          }\n          if (newRect.minW !== undefined) {\n            curRect.minW = newRect.minW;\n          }\n          if (newRect.minH !== undefined) {\n            curRect.minH = newRect.minH;\n          }\n          size = newRect.w;\n          if (size !== undefined) {\n            size = size < curRect.minW ? curRect.minW : size;\n            size = size > curRect.maxW ? curRect.maxW : size;\n            curRect.w = size;\n            curRect.innerW = size - deltaWidth;\n          }\n          size = newRect.h;\n          if (size !== undefined) {\n            size = size < curRect.minH ? curRect.minH : size;\n            size = size > curRect.maxH ? curRect.maxH : size;\n            curRect.h = size;\n            curRect.innerH = size - deltaHeight;\n          }\n          size = newRect.innerW;\n          if (size !== undefined) {\n            size = size < curRect.minW - deltaWidth ? curRect.minW - deltaWidth : size;\n            size = size > curRect.maxW - deltaWidth ? curRect.maxW - deltaWidth : size;\n            curRect.innerW = size;\n            curRect.w = size + deltaWidth;\n          }\n          size = newRect.innerH;\n          if (size !== undefined) {\n            size = size < curRect.minH - deltaHeight ? curRect.minH - deltaHeight : size;\n            size = size > curRect.maxH - deltaHeight ? curRect.maxH - deltaHeight : size;\n            curRect.innerH = size;\n            curRect.h = size + deltaHeight;\n          }\n          if (newRect.contentW !== undefined) {\n            curRect.contentW = newRect.contentW;\n          }\n          if (newRect.contentH !== undefined) {\n            curRect.contentH = newRect.contentH;\n          }\n          lastLayoutRect = self._lastLayoutRect;\n          if (lastLayoutRect.x !== curRect.x || lastLayoutRect.y !== curRect.y || lastLayoutRect.w !== curRect.w || lastLayoutRect.h !== curRect.h) {\n            repaintControls = Control.repaintControls;\n            if (repaintControls) {\n              if (repaintControls.map && !repaintControls.map[self._id]) {\n                repaintControls.push(self);\n                repaintControls.map[self._id] = true;\n              }\n            }\n            lastLayoutRect.x = curRect.x;\n            lastLayoutRect.y = curRect.y;\n            lastLayoutRect.w = curRect.w;\n            lastLayoutRect.h = curRect.h;\n          }\n          return self;\n        }\n        return curRect;\n      },\n      repaint: function () {\n        var self = this;\n        var style, bodyStyle, bodyElm, rect, borderBox;\n        var borderW, borderH, lastRepaintRect, round, value;\n        round = !domGlobals.document.createRange ? Math.round : function (value) {\n          return value;\n        };\n        style = self.getEl().style;\n        rect = self._layoutRect;\n        lastRepaintRect = self._lastRepaintRect || {};\n        borderBox = self.borderBox;\n        borderW = borderBox.left + borderBox.right;\n        borderH = borderBox.top + borderBox.bottom;\n        if (rect.x !== lastRepaintRect.x) {\n          style.left = round(rect.x) + 'px';\n          lastRepaintRect.x = rect.x;\n        }\n        if (rect.y !== lastRepaintRect.y) {\n          style.top = round(rect.y) + 'px';\n          lastRepaintRect.y = rect.y;\n        }\n        if (rect.w !== lastRepaintRect.w) {\n          value = round(rect.w - borderW);\n          style.width = (value >= 0 ? value : 0) + 'px';\n          lastRepaintRect.w = rect.w;\n        }\n        if (rect.h !== lastRepaintRect.h) {\n          value = round(rect.h - borderH);\n          style.height = (value >= 0 ? value : 0) + 'px';\n          lastRepaintRect.h = rect.h;\n        }\n        if (self._hasBody && rect.innerW !== lastRepaintRect.innerW) {\n          value = round(rect.innerW);\n          bodyElm = self.getEl('body');\n          if (bodyElm) {\n            bodyStyle = bodyElm.style;\n            bodyStyle.width = (value >= 0 ? value : 0) + 'px';\n          }\n          lastRepaintRect.innerW = rect.innerW;\n        }\n        if (self._hasBody && rect.innerH !== lastRepaintRect.innerH) {\n          value = round(rect.innerH);\n          bodyElm = bodyElm || self.getEl('body');\n          if (bodyElm) {\n            bodyStyle = bodyStyle || bodyElm.style;\n            bodyStyle.height = (value >= 0 ? value : 0) + 'px';\n          }\n          lastRepaintRect.innerH = rect.innerH;\n        }\n        self._lastRepaintRect = lastRepaintRect;\n        self.fire('repaint', {}, false);\n      },\n      updateLayoutRect: function () {\n        var self = this;\n        self.parent()._lastRect = null;\n        funcs.css(self.getEl(), {\n          width: '',\n          height: ''\n        });\n        self._layoutRect = self._lastRepaintRect = self._lastLayoutRect = null;\n        self.initLayoutRect();\n      },\n      on: function (name, callback) {\n        var self = this;\n        function resolveCallbackName(name) {\n          var callback, scope;\n          if (typeof name !== 'string') {\n            return name;\n          }\n          return function (e) {\n            if (!callback) {\n              self.parentsAndSelf().each(function (ctrl) {\n                var callbacks = ctrl.settings.callbacks;\n                if (callbacks && (callback = callbacks[name])) {\n                  scope = ctrl;\n                  return false;\n                }\n              });\n            }\n            if (!callback) {\n              e.action = name;\n              this.fire('execute', e);\n              return;\n            }\n            return callback.call(scope, e);\n          };\n        }\n        getEventDispatcher(self).on(name, resolveCallbackName(callback));\n        return self;\n      },\n      off: function (name, callback) {\n        getEventDispatcher(this).off(name, callback);\n        return this;\n      },\n      fire: function (name, args, bubble) {\n        var self = this;\n        args = args || {};\n        if (!args.control) {\n          args.control = self;\n        }\n        args = getEventDispatcher(self).fire(name, args);\n        if (bubble !== false && self.parent) {\n          var parent = self.parent();\n          while (parent && !args.isPropagationStopped()) {\n            parent.fire(name, args, false);\n            parent = parent.parent();\n          }\n        }\n        return args;\n      },\n      hasEventListeners: function (name) {\n        return getEventDispatcher(this).has(name);\n      },\n      parents: function (selector) {\n        var self = this;\n        var ctrl, parents = new Collection$2();\n        for (ctrl = self.parent(); ctrl; ctrl = ctrl.parent()) {\n          parents.add(ctrl);\n        }\n        if (selector) {\n          parents = parents.filter(selector);\n        }\n        return parents;\n      },\n      parentsAndSelf: function (selector) {\n        return new Collection$2(this).add(this.parents(selector));\n      },\n      next: function () {\n        var parentControls = this.parent().items();\n        return parentControls[parentControls.indexOf(this) + 1];\n      },\n      prev: function () {\n        var parentControls = this.parent().items();\n        return parentControls[parentControls.indexOf(this) - 1];\n      },\n      innerHtml: function (html) {\n        this.$el.html(html);\n        return this;\n      },\n      getEl: function (suffix) {\n        var id = suffix ? this._id + '-' + suffix : this._id;\n        if (!this._elmCache[id]) {\n          this._elmCache[id] = global$9('#' + id)[0];\n        }\n        return this._elmCache[id];\n      },\n      show: function () {\n        return this.visible(true);\n      },\n      hide: function () {\n        return this.visible(false);\n      },\n      focus: function () {\n        try {\n          this.getEl().focus();\n        } catch (ex) {\n        }\n        return this;\n      },\n      blur: function () {\n        this.getEl().blur();\n        return this;\n      },\n      aria: function (name, value) {\n        var self = this, elm = self.getEl(self.ariaTarget);\n        if (typeof value === 'undefined') {\n          return self._aria[name];\n        }\n        self._aria[name] = value;\n        if (self.state.get('rendered')) {\n          elm.setAttribute(name === 'role' ? name : 'aria-' + name, value);\n        }\n        return self;\n      },\n      encode: function (text, translate) {\n        if (translate !== false) {\n          text = this.translate(text);\n        }\n        return (text || '').replace(/[&<>\"]/g, function (match) {\n          return '&#' + match.charCodeAt(0) + ';';\n        });\n      },\n      translate: function (text) {\n        return Control.translate ? Control.translate(text) : text;\n      },\n      before: function (items) {\n        var self = this, parent = self.parent();\n        if (parent) {\n          parent.insert(items, parent.items().indexOf(self), true);\n        }\n        return self;\n      },\n      after: function (items) {\n        var self = this, parent = self.parent();\n        if (parent) {\n          parent.insert(items, parent.items().indexOf(self));\n        }\n        return self;\n      },\n      remove: function () {\n        var self = this;\n        var elm = self.getEl();\n        var parent = self.parent();\n        var newItems, i;\n        if (self.items) {\n          var controls = self.items().toArray();\n          i = controls.length;\n          while (i--) {\n            controls[i].remove();\n          }\n        }\n        if (parent && parent.items) {\n          newItems = [];\n          parent.items().each(function (item) {\n            if (item !== self) {\n              newItems.push(item);\n            }\n          });\n          parent.items().set(newItems);\n          parent._lastRect = null;\n        }\n        if (self._eventsRoot && self._eventsRoot === self) {\n          global$9(elm).off();\n        }\n        var lookup = self.getRoot().controlIdLookup;\n        if (lookup) {\n          delete lookup[self._id];\n        }\n        if (elm && elm.parentNode) {\n          elm.parentNode.removeChild(elm);\n        }\n        self.state.set('rendered', false);\n        self.state.destroy();\n        self.fire('remove');\n        return self;\n      },\n      renderBefore: function (elm) {\n        global$9(elm).before(this.renderHtml());\n        this.postRender();\n        return this;\n      },\n      renderTo: function (elm) {\n        global$9(elm || this.getContainerElm()).append(this.renderHtml());\n        this.postRender();\n        return this;\n      },\n      preRender: function () {\n      },\n      render: function () {\n      },\n      renderHtml: function () {\n        return '<div id=\"' + this._id + '\" class=\"' + this.classes + '\"></div>';\n      },\n      postRender: function () {\n        var self = this;\n        var settings = self.settings;\n        var elm, box, parent, name, parentEventsRoot;\n        self.$el = global$9(self.getEl());\n        self.state.set('rendered', true);\n        for (name in settings) {\n          if (name.indexOf('on') === 0) {\n            self.on(name.substr(2), settings[name]);\n          }\n        }\n        if (self._eventsRoot) {\n          for (parent = self.parent(); !parentEventsRoot && parent; parent = parent.parent()) {\n            parentEventsRoot = parent._eventsRoot;\n          }\n          if (parentEventsRoot) {\n            for (name in parentEventsRoot._nativeEvents) {\n              self._nativeEvents[name] = true;\n            }\n          }\n        }\n        bindPendingEvents(self);\n        if (settings.style) {\n          elm = self.getEl();\n          if (elm) {\n            elm.setAttribute('style', settings.style);\n            elm.style.cssText = settings.style;\n          }\n        }\n        if (self.settings.border) {\n          box = self.borderBox;\n          self.$el.css({\n            'border-top-width': box.top,\n            'border-right-width': box.right,\n            'border-bottom-width': box.bottom,\n            'border-left-width': box.left\n          });\n        }\n        var root = self.getRoot();\n        if (!root.controlIdLookup) {\n          root.controlIdLookup = {};\n        }\n        root.controlIdLookup[self._id] = self;\n        for (var key in self._aria) {\n          self.aria(key, self._aria[key]);\n        }\n        if (self.state.get('visible') === false) {\n          self.getEl().style.display = 'none';\n        }\n        self.bindStates();\n        self.state.on('change:visible', function (e) {\n          var state = e.value;\n          var parentCtrl;\n          if (self.state.get('rendered')) {\n            self.getEl().style.display = state === false ? 'none' : '';\n            self.getEl().getBoundingClientRect();\n          }\n          parentCtrl = self.parent();\n          if (parentCtrl) {\n            parentCtrl._lastRect = null;\n          }\n          self.fire(state ? 'show' : 'hide');\n          ReflowQueue.add(self);\n        });\n        self.fire('postrender', {}, false);\n      },\n      bindStates: function () {\n      },\n      scrollIntoView: function (align) {\n        function getOffset(elm, rootElm) {\n          var x, y, parent = elm;\n          x = y = 0;\n          while (parent && parent !== rootElm && parent.nodeType) {\n            x += parent.offsetLeft || 0;\n            y += parent.offsetTop || 0;\n            parent = parent.offsetParent;\n          }\n          return {\n            x: x,\n            y: y\n          };\n        }\n        var elm = this.getEl(), parentElm = elm.parentNode;\n        var x, y, width, height, parentWidth, parentHeight;\n        var pos = getOffset(elm, parentElm);\n        x = pos.x;\n        y = pos.y;\n        width = elm.offsetWidth;\n        height = elm.offsetHeight;\n        parentWidth = parentElm.clientWidth;\n        parentHeight = parentElm.clientHeight;\n        if (align === 'end') {\n          x -= parentWidth - width;\n          y -= parentHeight - height;\n        } else if (align === 'center') {\n          x -= parentWidth / 2 - width / 2;\n          y -= parentHeight / 2 - height / 2;\n        }\n        parentElm.scrollLeft = x;\n        parentElm.scrollTop = y;\n        return this;\n      },\n      getRoot: function () {\n        var ctrl = this, rootControl;\n        var parents = [];\n        while (ctrl) {\n          if (ctrl.rootControl) {\n            rootControl = ctrl.rootControl;\n            break;\n          }\n          parents.push(ctrl);\n          rootControl = ctrl;\n          ctrl = ctrl.parent();\n        }\n        if (!rootControl) {\n          rootControl = this;\n        }\n        var i = parents.length;\n        while (i--) {\n          parents[i].rootControl = rootControl;\n        }\n        return rootControl;\n      },\n      reflow: function () {\n        ReflowQueue.remove(this);\n        var parent = this.parent();\n        if (parent && parent._layout && !parent._layout.isNative()) {\n          parent.reflow();\n        }\n        return this;\n      }\n    };\n    global$2.each('text title visible disabled active value'.split(' '), function (name) {\n      proto$1[name] = function (value) {\n        if (arguments.length === 0) {\n          return this.state.get(name);\n        }\n        if (typeof value !== 'undefined') {\n          this.state.set(name, value);\n        }\n        return this;\n      };\n    });\n    Control = global$a.extend(proto$1);\n    function getEventDispatcher(obj) {\n      if (!obj._eventDispatcher) {\n        obj._eventDispatcher = new global$b({\n          scope: obj,\n          toggleEvent: function (name, state) {\n            if (state && global$b.isNative(name)) {\n              if (!obj._nativeEvents) {\n                obj._nativeEvents = {};\n              }\n              obj._nativeEvents[name] = true;\n              if (obj.state.get('rendered')) {\n                bindPendingEvents(obj);\n              }\n            }\n          }\n        });\n      }\n      return obj._eventDispatcher;\n    }\n    function bindPendingEvents(eventCtrl) {\n      var i, l, parents, eventRootCtrl, nativeEvents, name;\n      function delegate(e) {\n        var control = eventCtrl.getParentCtrl(e.target);\n        if (control) {\n          control.fire(e.type, e);\n        }\n      }\n      function mouseLeaveHandler() {\n        var ctrl = eventRootCtrl._lastHoverCtrl;\n        if (ctrl) {\n          ctrl.fire('mouseleave', { target: ctrl.getEl() });\n          ctrl.parents().each(function (ctrl) {\n            ctrl.fire('mouseleave', { target: ctrl.getEl() });\n          });\n          eventRootCtrl._lastHoverCtrl = null;\n        }\n      }\n      function mouseEnterHandler(e) {\n        var ctrl = eventCtrl.getParentCtrl(e.target), lastCtrl = eventRootCtrl._lastHoverCtrl, idx = 0, i, parents, lastParents;\n        if (ctrl !== lastCtrl) {\n          eventRootCtrl._lastHoverCtrl = ctrl;\n          parents = ctrl.parents().toArray().reverse();\n          parents.push(ctrl);\n          if (lastCtrl) {\n            lastParents = lastCtrl.parents().toArray().reverse();\n            lastParents.push(lastCtrl);\n            for (idx = 0; idx < lastParents.length; idx++) {\n              if (parents[idx] !== lastParents[idx]) {\n                break;\n              }\n            }\n            for (i = lastParents.length - 1; i >= idx; i--) {\n              lastCtrl = lastParents[i];\n              lastCtrl.fire('mouseleave', { target: lastCtrl.getEl() });\n            }\n          }\n          for (i = idx; i < parents.length; i++) {\n            ctrl = parents[i];\n            ctrl.fire('mouseenter', { target: ctrl.getEl() });\n          }\n        }\n      }\n      function fixWheelEvent(e) {\n        e.preventDefault();\n        if (e.type === 'mousewheel') {\n          e.deltaY = -1 / 40 * e.wheelDelta;\n          if (e.wheelDeltaX) {\n            e.deltaX = -1 / 40 * e.wheelDeltaX;\n          }\n        } else {\n          e.deltaX = 0;\n          e.deltaY = e.detail;\n        }\n        e = eventCtrl.fire('wheel', e);\n      }\n      nativeEvents = eventCtrl._nativeEvents;\n      if (nativeEvents) {\n        parents = eventCtrl.parents().toArray();\n        parents.unshift(eventCtrl);\n        for (i = 0, l = parents.length; !eventRootCtrl && i < l; i++) {\n          eventRootCtrl = parents[i]._eventsRoot;\n        }\n        if (!eventRootCtrl) {\n          eventRootCtrl = parents[parents.length - 1] || eventCtrl;\n        }\n        eventCtrl._eventsRoot = eventRootCtrl;\n        for (l = i, i = 0; i < l; i++) {\n          parents[i]._eventsRoot = eventRootCtrl;\n        }\n        var eventRootDelegates = eventRootCtrl._delegates;\n        if (!eventRootDelegates) {\n          eventRootDelegates = eventRootCtrl._delegates = {};\n        }\n        for (name in nativeEvents) {\n          if (!nativeEvents) {\n            return false;\n          }\n          if (name === 'wheel' && !hasWheelEventSupport) {\n            if (hasMouseWheelEventSupport) {\n              global$9(eventCtrl.getEl()).on('mousewheel', fixWheelEvent);\n            } else {\n              global$9(eventCtrl.getEl()).on('DOMMouseScroll', fixWheelEvent);\n            }\n            continue;\n          }\n          if (name === 'mouseenter' || name === 'mouseleave') {\n            if (!eventRootCtrl._hasMouseEnter) {\n              global$9(eventRootCtrl.getEl()).on('mouseleave', mouseLeaveHandler).on('mouseover', mouseEnterHandler);\n              eventRootCtrl._hasMouseEnter = 1;\n            }\n          } else if (!eventRootDelegates[name]) {\n            global$9(eventRootCtrl.getEl()).on(name, delegate);\n            eventRootDelegates[name] = true;\n          }\n          nativeEvents[name] = false;\n        }\n      }\n    }\n    var Control$1 = Control;\n\n    var hasTabstopData = function (elm) {\n      return elm.getAttribute('data-mce-tabstop') ? true : false;\n    };\n    function KeyboardNavigation (settings) {\n      var root = settings.root;\n      var focusedElement, focusedControl;\n      function isElement(node) {\n        return node && node.nodeType === 1;\n      }\n      try {\n        focusedElement = domGlobals.document.activeElement;\n      } catch (ex) {\n        focusedElement = domGlobals.document.body;\n      }\n      focusedControl = root.getParentCtrl(focusedElement);\n      function getRole(elm) {\n        elm = elm || focusedElement;\n        if (isElement(elm)) {\n          return elm.getAttribute('role');\n        }\n        return null;\n      }\n      function getParentRole(elm) {\n        var role, parent = elm || focusedElement;\n        while (parent = parent.parentNode) {\n          if (role = getRole(parent)) {\n            return role;\n          }\n        }\n      }\n      function getAriaProp(name) {\n        var elm = focusedElement;\n        if (isElement(elm)) {\n          return elm.getAttribute('aria-' + name);\n        }\n      }\n      function isTextInputElement(elm) {\n        var tagName = elm.tagName.toUpperCase();\n        return tagName === 'INPUT' || tagName === 'TEXTAREA' || tagName === 'SELECT';\n      }\n      function canFocus(elm) {\n        if (isTextInputElement(elm) && !elm.hidden) {\n          return true;\n        }\n        if (hasTabstopData(elm)) {\n          return true;\n        }\n        if (/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(getRole(elm))) {\n          return true;\n        }\n        return false;\n      }\n      function getFocusElements(elm) {\n        var elements = [];\n        function collect(elm) {\n          if (elm.nodeType !== 1 || elm.style.display === 'none' || elm.disabled) {\n            return;\n          }\n          if (canFocus(elm)) {\n            elements.push(elm);\n          }\n          for (var i = 0; i < elm.childNodes.length; i++) {\n            collect(elm.childNodes[i]);\n          }\n        }\n        collect(elm || root.getEl());\n        return elements;\n      }\n      function getNavigationRoot(targetControl) {\n        var navigationRoot, controls;\n        targetControl = targetControl || focusedControl;\n        controls = targetControl.parents().toArray();\n        controls.unshift(targetControl);\n        for (var i = 0; i < controls.length; i++) {\n          navigationRoot = controls[i];\n          if (navigationRoot.settings.ariaRoot) {\n            break;\n          }\n        }\n        return navigationRoot;\n      }\n      function focusFirst(targetControl) {\n        var navigationRoot = getNavigationRoot(targetControl);\n        var focusElements = getFocusElements(navigationRoot.getEl());\n        if (navigationRoot.settings.ariaRemember && 'lastAriaIndex' in navigationRoot) {\n          moveFocusToIndex(navigationRoot.lastAriaIndex, focusElements);\n        } else {\n          moveFocusToIndex(0, focusElements);\n        }\n      }\n      function moveFocusToIndex(idx, elements) {\n        if (idx < 0) {\n          idx = elements.length - 1;\n        } else if (idx >= elements.length) {\n          idx = 0;\n        }\n        if (elements[idx]) {\n          elements[idx].focus();\n        }\n        return idx;\n      }\n      function moveFocus(dir, elements) {\n        var idx = -1;\n        var navigationRoot = getNavigationRoot();\n        elements = elements || getFocusElements(navigationRoot.getEl());\n        for (var i = 0; i < elements.length; i++) {\n          if (elements[i] === focusedElement) {\n            idx = i;\n          }\n        }\n        idx += dir;\n        navigationRoot.lastAriaIndex = moveFocusToIndex(idx, elements);\n      }\n      function left() {\n        var parentRole = getParentRole();\n        if (parentRole === 'tablist') {\n          moveFocus(-1, getFocusElements(focusedElement.parentNode));\n        } else if (focusedControl.parent().submenu) {\n          cancel();\n        } else {\n          moveFocus(-1);\n        }\n      }\n      function right() {\n        var role = getRole(), parentRole = getParentRole();\n        if (parentRole === 'tablist') {\n          moveFocus(1, getFocusElements(focusedElement.parentNode));\n        } else if (role === 'menuitem' && parentRole === 'menu' && getAriaProp('haspopup')) {\n          enter();\n        } else {\n          moveFocus(1);\n        }\n      }\n      function up() {\n        moveFocus(-1);\n      }\n      function down() {\n        var role = getRole(), parentRole = getParentRole();\n        if (role === 'menuitem' && parentRole === 'menubar') {\n          enter();\n        } else if (role === 'button' && getAriaProp('haspopup')) {\n          enter({ key: 'down' });\n        } else {\n          moveFocus(1);\n        }\n      }\n      function tab(e) {\n        var parentRole = getParentRole();\n        if (parentRole === 'tablist') {\n          var elm = getFocusElements(focusedControl.getEl('body'))[0];\n          if (elm) {\n            elm.focus();\n          }\n        } else {\n          moveFocus(e.shiftKey ? -1 : 1);\n        }\n      }\n      function cancel() {\n        focusedControl.fire('cancel');\n      }\n      function enter(aria) {\n        aria = aria || {};\n        focusedControl.fire('click', {\n          target: focusedElement,\n          aria: aria\n        });\n      }\n      root.on('keydown', function (e) {\n        function handleNonTabOrEscEvent(e, handler) {\n          if (isTextInputElement(focusedElement) || hasTabstopData(focusedElement)) {\n            return;\n          }\n          if (getRole(focusedElement) === 'slider') {\n            return;\n          }\n          if (handler(e) !== false) {\n            e.preventDefault();\n          }\n        }\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        switch (e.keyCode) {\n        case 37:\n          handleNonTabOrEscEvent(e, left);\n          break;\n        case 39:\n          handleNonTabOrEscEvent(e, right);\n          break;\n        case 38:\n          handleNonTabOrEscEvent(e, up);\n          break;\n        case 40:\n          handleNonTabOrEscEvent(e, down);\n          break;\n        case 27:\n          cancel();\n          break;\n        case 14:\n        case 13:\n        case 32:\n          handleNonTabOrEscEvent(e, enter);\n          break;\n        case 9:\n          tab(e);\n          e.preventDefault();\n          break;\n        }\n      });\n      root.on('focusin', function (e) {\n        focusedElement = e.target;\n        focusedControl = e.control;\n      });\n      return { focusFirst: focusFirst };\n    }\n\n    var selectorCache = {};\n    var Container = Control$1.extend({\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        settings = self.settings;\n        if (settings.fixed) {\n          self.state.set('fixed', true);\n        }\n        self._items = new Collection$2();\n        if (self.isRtl()) {\n          self.classes.add('rtl');\n        }\n        self.bodyClasses = new ClassList(function () {\n          if (self.state.get('rendered')) {\n            self.getEl('body').className = this.toString();\n          }\n        });\n        self.bodyClasses.prefix = self.classPrefix;\n        self.classes.add('container');\n        self.bodyClasses.add('container-body');\n        if (settings.containerCls) {\n          self.classes.add(settings.containerCls);\n        }\n        self._layout = global$4.create((settings.layout || '') + 'layout');\n        if (self.settings.items) {\n          self.add(self.settings.items);\n        } else {\n          self.add(self.render());\n        }\n        self._hasBody = true;\n      },\n      items: function () {\n        return this._items;\n      },\n      find: function (selector) {\n        selector = selectorCache[selector] = selectorCache[selector] || new Selector(selector);\n        return selector.find(this);\n      },\n      add: function (items) {\n        var self = this;\n        self.items().add(self.create(items)).parent(self);\n        return self;\n      },\n      focus: function (keyboard) {\n        var self = this;\n        var focusCtrl, keyboardNav, items;\n        if (keyboard) {\n          keyboardNav = self.keyboardNav || self.parents().eq(-1)[0].keyboardNav;\n          if (keyboardNav) {\n            keyboardNav.focusFirst(self);\n            return;\n          }\n        }\n        items = self.find('*');\n        if (self.statusbar) {\n          items.add(self.statusbar.items());\n        }\n        items.each(function (ctrl) {\n          if (ctrl.settings.autofocus) {\n            focusCtrl = null;\n            return false;\n          }\n          if (ctrl.canFocus) {\n            focusCtrl = focusCtrl || ctrl;\n          }\n        });\n        if (focusCtrl) {\n          focusCtrl.focus();\n        }\n        return self;\n      },\n      replace: function (oldItem, newItem) {\n        var ctrlElm;\n        var items = this.items();\n        var i = items.length;\n        while (i--) {\n          if (items[i] === oldItem) {\n            items[i] = newItem;\n            break;\n          }\n        }\n        if (i >= 0) {\n          ctrlElm = newItem.getEl();\n          if (ctrlElm) {\n            ctrlElm.parentNode.removeChild(ctrlElm);\n          }\n          ctrlElm = oldItem.getEl();\n          if (ctrlElm) {\n            ctrlElm.parentNode.removeChild(ctrlElm);\n          }\n        }\n        newItem.parent(this);\n      },\n      create: function (items) {\n        var self = this;\n        var settings;\n        var ctrlItems = [];\n        if (!global$2.isArray(items)) {\n          items = [items];\n        }\n        global$2.each(items, function (item) {\n          if (item) {\n            if (!(item instanceof Control$1)) {\n              if (typeof item === 'string') {\n                item = { type: item };\n              }\n              settings = global$2.extend({}, self.settings.defaults, item);\n              item.type = settings.type = settings.type || item.type || self.settings.defaultType || (settings.defaults ? settings.defaults.type : null);\n              item = global$4.create(settings);\n            }\n            ctrlItems.push(item);\n          }\n        });\n        return ctrlItems;\n      },\n      renderNew: function () {\n        var self = this;\n        self.items().each(function (ctrl, index) {\n          var containerElm;\n          ctrl.parent(self);\n          if (!ctrl.state.get('rendered')) {\n            containerElm = self.getEl('body');\n            if (containerElm.hasChildNodes() && index <= containerElm.childNodes.length - 1) {\n              global$9(containerElm.childNodes[index]).before(ctrl.renderHtml());\n            } else {\n              global$9(containerElm).append(ctrl.renderHtml());\n            }\n            ctrl.postRender();\n            ReflowQueue.add(ctrl);\n          }\n        });\n        self._layout.applyClasses(self.items().filter(':visible'));\n        self._lastRect = null;\n        return self;\n      },\n      append: function (items) {\n        return this.add(items).renderNew();\n      },\n      prepend: function (items) {\n        var self = this;\n        self.items().set(self.create(items).concat(self.items().toArray()));\n        return self.renderNew();\n      },\n      insert: function (items, index, before) {\n        var self = this;\n        var curItems, beforeItems, afterItems;\n        items = self.create(items);\n        curItems = self.items();\n        if (!before && index < curItems.length - 1) {\n          index += 1;\n        }\n        if (index >= 0 && index < curItems.length) {\n          beforeItems = curItems.slice(0, index).toArray();\n          afterItems = curItems.slice(index).toArray();\n          curItems.set(beforeItems.concat(items, afterItems));\n        }\n        return self.renderNew();\n      },\n      fromJSON: function (data) {\n        var self = this;\n        for (var name in data) {\n          self.find('#' + name).value(data[name]);\n        }\n        return self;\n      },\n      toJSON: function () {\n        var self = this, data = {};\n        self.find('*').each(function (ctrl) {\n          var name = ctrl.name(), value = ctrl.value();\n          if (name && typeof value !== 'undefined') {\n            data[name] = value;\n          }\n        });\n        return data;\n      },\n      renderHtml: function () {\n        var self = this, layout = self._layout, role = this.settings.role;\n        self.preRender();\n        layout.preRender(self);\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\"' + (role ? ' role=\"' + this.settings.role + '\"' : '') + '>' + '<div id=\"' + self._id + '-body\" class=\"' + self.bodyClasses + '\">' + (self.settings.html || '') + layout.renderHtml(self) + '</div>' + '</div>';\n      },\n      postRender: function () {\n        var self = this;\n        var box;\n        self.items().exec('postRender');\n        self._super();\n        self._layout.postRender(self);\n        self.state.set('rendered', true);\n        if (self.settings.style) {\n          self.$el.css(self.settings.style);\n        }\n        if (self.settings.border) {\n          box = self.borderBox;\n          self.$el.css({\n            'border-top-width': box.top,\n            'border-right-width': box.right,\n            'border-bottom-width': box.bottom,\n            'border-left-width': box.left\n          });\n        }\n        if (!self.parent()) {\n          self.keyboardNav = KeyboardNavigation({ root: self });\n        }\n        return self;\n      },\n      initLayoutRect: function () {\n        var self = this, layoutRect = self._super();\n        self._layout.recalc(self);\n        return layoutRect;\n      },\n      recalc: function () {\n        var self = this;\n        var rect = self._layoutRect;\n        var lastRect = self._lastRect;\n        if (!lastRect || lastRect.w !== rect.w || lastRect.h !== rect.h) {\n          self._layout.recalc(self);\n          rect = self.layoutRect();\n          self._lastRect = {\n            x: rect.x,\n            y: rect.y,\n            w: rect.w,\n            h: rect.h\n          };\n          return true;\n        }\n      },\n      reflow: function () {\n        var i;\n        ReflowQueue.remove(this);\n        if (this.visible()) {\n          Control$1.repaintControls = [];\n          Control$1.repaintControls.map = {};\n          this.recalc();\n          i = Control$1.repaintControls.length;\n          while (i--) {\n            Control$1.repaintControls[i].repaint();\n          }\n          if (this.settings.layout !== 'flow' && this.settings.layout !== 'stack') {\n            this.repaint();\n          }\n          Control$1.repaintControls = [];\n        }\n        return this;\n      }\n    });\n\n    function getDocumentSize(doc) {\n      var documentElement, body, scrollWidth, clientWidth;\n      var offsetWidth, scrollHeight, clientHeight, offsetHeight;\n      var max = Math.max;\n      documentElement = doc.documentElement;\n      body = doc.body;\n      scrollWidth = max(documentElement.scrollWidth, body.scrollWidth);\n      clientWidth = max(documentElement.clientWidth, body.clientWidth);\n      offsetWidth = max(documentElement.offsetWidth, body.offsetWidth);\n      scrollHeight = max(documentElement.scrollHeight, body.scrollHeight);\n      clientHeight = max(documentElement.clientHeight, body.clientHeight);\n      offsetHeight = max(documentElement.offsetHeight, body.offsetHeight);\n      return {\n        width: scrollWidth < offsetWidth ? clientWidth : scrollWidth,\n        height: scrollHeight < offsetHeight ? clientHeight : scrollHeight\n      };\n    }\n    function updateWithTouchData(e) {\n      var keys, i;\n      if (e.changedTouches) {\n        keys = 'screenX screenY pageX pageY clientX clientY'.split(' ');\n        for (i = 0; i < keys.length; i++) {\n          e[keys[i]] = e.changedTouches[0][keys[i]];\n        }\n      }\n    }\n    function DragHelper (id, settings) {\n      var $eventOverlay;\n      var doc = settings.document || domGlobals.document;\n      var downButton;\n      var start, stop, drag, startX, startY;\n      settings = settings || {};\n      var handleElement = doc.getElementById(settings.handle || id);\n      start = function (e) {\n        var docSize = getDocumentSize(doc);\n        var handleElm, cursor;\n        updateWithTouchData(e);\n        e.preventDefault();\n        downButton = e.button;\n        handleElm = handleElement;\n        startX = e.screenX;\n        startY = e.screenY;\n        if (domGlobals.window.getComputedStyle) {\n          cursor = domGlobals.window.getComputedStyle(handleElm, null).getPropertyValue('cursor');\n        } else {\n          cursor = handleElm.runtimeStyle.cursor;\n        }\n        $eventOverlay = global$9('<div></div>').css({\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: docSize.width,\n          height: docSize.height,\n          zIndex: 2147483647,\n          opacity: 0.0001,\n          cursor: cursor\n        }).appendTo(doc.body);\n        global$9(doc).on('mousemove touchmove', drag).on('mouseup touchend', stop);\n        settings.start(e);\n      };\n      drag = function (e) {\n        updateWithTouchData(e);\n        if (e.button !== downButton) {\n          return stop(e);\n        }\n        e.deltaX = e.screenX - startX;\n        e.deltaY = e.screenY - startY;\n        e.preventDefault();\n        settings.drag(e);\n      };\n      stop = function (e) {\n        updateWithTouchData(e);\n        global$9(doc).off('mousemove touchmove', drag).off('mouseup touchend', stop);\n        $eventOverlay.remove();\n        if (settings.stop) {\n          settings.stop(e);\n        }\n      };\n      this.destroy = function () {\n        global$9(handleElement).off();\n      };\n      global$9(handleElement).on('mousedown touchstart', start);\n    }\n\n    var Scrollable = {\n      init: function () {\n        var self = this;\n        self.on('repaint', self.renderScroll);\n      },\n      renderScroll: function () {\n        var self = this, margin = 2;\n        function repaintScroll() {\n          var hasScrollH, hasScrollV, bodyElm;\n          function repaintAxis(axisName, posName, sizeName, contentSizeName, hasScroll, ax) {\n            var containerElm, scrollBarElm, scrollThumbElm;\n            var containerSize, scrollSize, ratio, rect;\n            var posNameLower, sizeNameLower;\n            scrollBarElm = self.getEl('scroll' + axisName);\n            if (scrollBarElm) {\n              posNameLower = posName.toLowerCase();\n              sizeNameLower = sizeName.toLowerCase();\n              global$9(self.getEl('absend')).css(posNameLower, self.layoutRect()[contentSizeName] - 1);\n              if (!hasScroll) {\n                global$9(scrollBarElm).css('display', 'none');\n                return;\n              }\n              global$9(scrollBarElm).css('display', 'block');\n              containerElm = self.getEl('body');\n              scrollThumbElm = self.getEl('scroll' + axisName + 't');\n              containerSize = containerElm['client' + sizeName] - margin * 2;\n              containerSize -= hasScrollH && hasScrollV ? scrollBarElm['client' + ax] : 0;\n              scrollSize = containerElm['scroll' + sizeName];\n              ratio = containerSize / scrollSize;\n              rect = {};\n              rect[posNameLower] = containerElm['offset' + posName] + margin;\n              rect[sizeNameLower] = containerSize;\n              global$9(scrollBarElm).css(rect);\n              rect = {};\n              rect[posNameLower] = containerElm['scroll' + posName] * ratio;\n              rect[sizeNameLower] = containerSize * ratio;\n              global$9(scrollThumbElm).css(rect);\n            }\n          }\n          bodyElm = self.getEl('body');\n          hasScrollH = bodyElm.scrollWidth > bodyElm.clientWidth;\n          hasScrollV = bodyElm.scrollHeight > bodyElm.clientHeight;\n          repaintAxis('h', 'Left', 'Width', 'contentW', hasScrollH, 'Height');\n          repaintAxis('v', 'Top', 'Height', 'contentH', hasScrollV, 'Width');\n        }\n        function addScroll() {\n          function addScrollAxis(axisName, posName, sizeName, deltaPosName, ax) {\n            var scrollStart;\n            var axisId = self._id + '-scroll' + axisName, prefix = self.classPrefix;\n            global$9(self.getEl()).append('<div id=\"' + axisId + '\" class=\"' + prefix + 'scrollbar ' + prefix + 'scrollbar-' + axisName + '\">' + '<div id=\"' + axisId + 't\" class=\"' + prefix + 'scrollbar-thumb\"></div>' + '</div>');\n            self.draghelper = new DragHelper(axisId + 't', {\n              start: function () {\n                scrollStart = self.getEl('body')['scroll' + posName];\n                global$9('#' + axisId).addClass(prefix + 'active');\n              },\n              drag: function (e) {\n                var ratio, hasScrollH, hasScrollV, containerSize;\n                var layoutRect = self.layoutRect();\n                hasScrollH = layoutRect.contentW > layoutRect.innerW;\n                hasScrollV = layoutRect.contentH > layoutRect.innerH;\n                containerSize = self.getEl('body')['client' + sizeName] - margin * 2;\n                containerSize -= hasScrollH && hasScrollV ? self.getEl('scroll' + axisName)['client' + ax] : 0;\n                ratio = containerSize / self.getEl('body')['scroll' + sizeName];\n                self.getEl('body')['scroll' + posName] = scrollStart + e['delta' + deltaPosName] / ratio;\n              },\n              stop: function () {\n                global$9('#' + axisId).removeClass(prefix + 'active');\n              }\n            });\n          }\n          self.classes.add('scroll');\n          addScrollAxis('v', 'Top', 'Height', 'Y', 'Width');\n          addScrollAxis('h', 'Left', 'Width', 'X', 'Height');\n        }\n        if (self.settings.autoScroll) {\n          if (!self._hasScroll) {\n            self._hasScroll = true;\n            addScroll();\n            self.on('wheel', function (e) {\n              var bodyEl = self.getEl('body');\n              bodyEl.scrollLeft += (e.deltaX || 0) * 10;\n              bodyEl.scrollTop += e.deltaY * 10;\n              repaintScroll();\n            });\n            global$9(self.getEl('body')).on('scroll', repaintScroll);\n          }\n          repaintScroll();\n        }\n      }\n    };\n\n    var Panel = Container.extend({\n      Defaults: {\n        layout: 'fit',\n        containerCls: 'panel'\n      },\n      Mixins: [Scrollable],\n      renderHtml: function () {\n        var self = this;\n        var layout = self._layout;\n        var innerHtml = self.settings.html;\n        self.preRender();\n        layout.preRender(self);\n        if (typeof innerHtml === 'undefined') {\n          innerHtml = '<div id=\"' + self._id + '-body\" class=\"' + self.bodyClasses + '\">' + layout.renderHtml(self) + '</div>';\n        } else {\n          if (typeof innerHtml === 'function') {\n            innerHtml = innerHtml.call(self);\n          }\n          self._hasBody = false;\n        }\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\" hidefocus=\"1\" tabindex=\"-1\" role=\"group\">' + (self._preBodyHtml || '') + innerHtml + '</div>';\n      }\n    });\n\n    var Resizable = {\n      resizeToContent: function () {\n        this._layoutRect.autoResize = true;\n        this._lastRect = null;\n        this.reflow();\n      },\n      resizeTo: function (w, h) {\n        if (w <= 1 || h <= 1) {\n          var rect = funcs.getWindowSize();\n          w = w <= 1 ? w * rect.w : w;\n          h = h <= 1 ? h * rect.h : h;\n        }\n        this._layoutRect.autoResize = false;\n        return this.layoutRect({\n          minW: w,\n          minH: h,\n          w: w,\n          h: h\n        }).reflow();\n      },\n      resizeBy: function (dw, dh) {\n        var self = this, rect = self.layoutRect();\n        return self.resizeTo(rect.w + dw, rect.h + dh);\n      }\n    };\n\n    var documentClickHandler, documentScrollHandler, windowResizeHandler;\n    var visiblePanels = [];\n    var zOrder = [];\n    var hasModal;\n    function isChildOf(ctrl, parent) {\n      while (ctrl) {\n        if (ctrl === parent) {\n          return true;\n        }\n        ctrl = ctrl.parent();\n      }\n    }\n    function skipOrHidePanels(e) {\n      var i = visiblePanels.length;\n      while (i--) {\n        var panel = visiblePanels[i], clickCtrl = panel.getParentCtrl(e.target);\n        if (panel.settings.autohide) {\n          if (clickCtrl) {\n            if (isChildOf(clickCtrl, panel) || panel.parent() === clickCtrl) {\n              continue;\n            }\n          }\n          e = panel.fire('autohide', { target: e.target });\n          if (!e.isDefaultPrevented()) {\n            panel.hide();\n          }\n        }\n      }\n    }\n    function bindDocumentClickHandler() {\n      if (!documentClickHandler) {\n        documentClickHandler = function (e) {\n          if (e.button === 2) {\n            return;\n          }\n          skipOrHidePanels(e);\n        };\n        global$9(domGlobals.document).on('click touchstart', documentClickHandler);\n      }\n    }\n    function bindDocumentScrollHandler() {\n      if (!documentScrollHandler) {\n        documentScrollHandler = function () {\n          var i;\n          i = visiblePanels.length;\n          while (i--) {\n            repositionPanel(visiblePanels[i]);\n          }\n        };\n        global$9(domGlobals.window).on('scroll', documentScrollHandler);\n      }\n    }\n    function bindWindowResizeHandler() {\n      if (!windowResizeHandler) {\n        var docElm_1 = domGlobals.document.documentElement;\n        var clientWidth_1 = docElm_1.clientWidth, clientHeight_1 = docElm_1.clientHeight;\n        windowResizeHandler = function () {\n          if (!domGlobals.document.all || clientWidth_1 !== docElm_1.clientWidth || clientHeight_1 !== docElm_1.clientHeight) {\n            clientWidth_1 = docElm_1.clientWidth;\n            clientHeight_1 = docElm_1.clientHeight;\n            FloatPanel.hideAll();\n          }\n        };\n        global$9(domGlobals.window).on('resize', windowResizeHandler);\n      }\n    }\n    function repositionPanel(panel) {\n      var scrollY = funcs.getViewPort().y;\n      function toggleFixedChildPanels(fixed, deltaY) {\n        var parent;\n        for (var i = 0; i < visiblePanels.length; i++) {\n          if (visiblePanels[i] !== panel) {\n            parent = visiblePanels[i].parent();\n            while (parent && (parent = parent.parent())) {\n              if (parent === panel) {\n                visiblePanels[i].fixed(fixed).moveBy(0, deltaY).repaint();\n              }\n            }\n          }\n        }\n      }\n      if (panel.settings.autofix) {\n        if (!panel.state.get('fixed')) {\n          panel._autoFixY = panel.layoutRect().y;\n          if (panel._autoFixY < scrollY) {\n            panel.fixed(true).layoutRect({ y: 0 }).repaint();\n            toggleFixedChildPanels(true, scrollY - panel._autoFixY);\n          }\n        } else {\n          if (panel._autoFixY > scrollY) {\n            panel.fixed(false).layoutRect({ y: panel._autoFixY }).repaint();\n            toggleFixedChildPanels(false, panel._autoFixY - scrollY);\n          }\n        }\n      }\n    }\n    function addRemove(add, ctrl) {\n      var i, zIndex = FloatPanel.zIndex || 65535, topModal;\n      if (add) {\n        zOrder.push(ctrl);\n      } else {\n        i = zOrder.length;\n        while (i--) {\n          if (zOrder[i] === ctrl) {\n            zOrder.splice(i, 1);\n          }\n        }\n      }\n      if (zOrder.length) {\n        for (i = 0; i < zOrder.length; i++) {\n          if (zOrder[i].modal) {\n            zIndex++;\n            topModal = zOrder[i];\n          }\n          zOrder[i].getEl().style.zIndex = zIndex;\n          zOrder[i].zIndex = zIndex;\n          zIndex++;\n        }\n      }\n      var modalBlockEl = global$9('#' + ctrl.classPrefix + 'modal-block', ctrl.getContainerElm())[0];\n      if (topModal) {\n        global$9(modalBlockEl).css('z-index', topModal.zIndex - 1);\n      } else if (modalBlockEl) {\n        modalBlockEl.parentNode.removeChild(modalBlockEl);\n        hasModal = false;\n      }\n      FloatPanel.currentZIndex = zIndex;\n    }\n    var FloatPanel = Panel.extend({\n      Mixins: [\n        Movable,\n        Resizable\n      ],\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self._eventsRoot = self;\n        self.classes.add('floatpanel');\n        if (settings.autohide) {\n          bindDocumentClickHandler();\n          bindWindowResizeHandler();\n          visiblePanels.push(self);\n        }\n        if (settings.autofix) {\n          bindDocumentScrollHandler();\n          self.on('move', function () {\n            repositionPanel(this);\n          });\n        }\n        self.on('postrender show', function (e) {\n          if (e.control === self) {\n            var $modalBlockEl_1;\n            var prefix_1 = self.classPrefix;\n            if (self.modal && !hasModal) {\n              $modalBlockEl_1 = global$9('#' + prefix_1 + 'modal-block', self.getContainerElm());\n              if (!$modalBlockEl_1[0]) {\n                $modalBlockEl_1 = global$9('<div id=\"' + prefix_1 + 'modal-block\" class=\"' + prefix_1 + 'reset ' + prefix_1 + 'fade\"></div>').appendTo(self.getContainerElm());\n              }\n              global$7.setTimeout(function () {\n                $modalBlockEl_1.addClass(prefix_1 + 'in');\n                global$9(self.getEl()).addClass(prefix_1 + 'in');\n              });\n              hasModal = true;\n            }\n            addRemove(true, self);\n          }\n        });\n        self.on('show', function () {\n          self.parents().each(function (ctrl) {\n            if (ctrl.state.get('fixed')) {\n              self.fixed(true);\n              return false;\n            }\n          });\n        });\n        if (settings.popover) {\n          self._preBodyHtml = '<div class=\"' + self.classPrefix + 'arrow\"></div>';\n          self.classes.add('popover').add('bottom').add(self.isRtl() ? 'end' : 'start');\n        }\n        self.aria('label', settings.ariaLabel);\n        self.aria('labelledby', self._id);\n        self.aria('describedby', self.describedBy || self._id + '-none');\n      },\n      fixed: function (state) {\n        var self = this;\n        if (self.state.get('fixed') !== state) {\n          if (self.state.get('rendered')) {\n            var viewport = funcs.getViewPort();\n            if (state) {\n              self.layoutRect().y -= viewport.y;\n            } else {\n              self.layoutRect().y += viewport.y;\n            }\n          }\n          self.classes.toggle('fixed', state);\n          self.state.set('fixed', state);\n        }\n        return self;\n      },\n      show: function () {\n        var self = this;\n        var i;\n        var state = self._super();\n        i = visiblePanels.length;\n        while (i--) {\n          if (visiblePanels[i] === self) {\n            break;\n          }\n        }\n        if (i === -1) {\n          visiblePanels.push(self);\n        }\n        return state;\n      },\n      hide: function () {\n        removeVisiblePanel(this);\n        addRemove(false, this);\n        return this._super();\n      },\n      hideAll: function () {\n        FloatPanel.hideAll();\n      },\n      close: function () {\n        var self = this;\n        if (!self.fire('close').isDefaultPrevented()) {\n          self.remove();\n          addRemove(false, self);\n        }\n        return self;\n      },\n      remove: function () {\n        removeVisiblePanel(this);\n        this._super();\n      },\n      postRender: function () {\n        var self = this;\n        if (self.settings.bodyRole) {\n          this.getEl('body').setAttribute('role', self.settings.bodyRole);\n        }\n        return self._super();\n      }\n    });\n    FloatPanel.hideAll = function () {\n      var i = visiblePanels.length;\n      while (i--) {\n        var panel = visiblePanels[i];\n        if (panel && panel.settings.autohide) {\n          panel.hide();\n          visiblePanels.splice(i, 1);\n        }\n      }\n    };\n    function removeVisiblePanel(panel) {\n      var i;\n      i = visiblePanels.length;\n      while (i--) {\n        if (visiblePanels[i] === panel) {\n          visiblePanels.splice(i, 1);\n        }\n      }\n      i = zOrder.length;\n      while (i--) {\n        if (zOrder[i] === panel) {\n          zOrder.splice(i, 1);\n        }\n      }\n    }\n\n    var isFixed$1 = function (inlineToolbarContainer, editor) {\n      return !!(inlineToolbarContainer && !editor.settings.ui_container);\n    };\n    var render$1 = function (editor, theme, args) {\n      var panel, inlineToolbarContainer;\n      var DOM = global$3.DOM;\n      var fixedToolbarContainer = getFixedToolbarContainer(editor);\n      if (fixedToolbarContainer) {\n        inlineToolbarContainer = DOM.select(fixedToolbarContainer)[0];\n      }\n      var reposition = function () {\n        if (panel && panel.moveRel && panel.visible() && !panel._fixed) {\n          var scrollContainer = editor.selection.getScrollContainer(), body = editor.getBody();\n          var deltaX = 0, deltaY = 0;\n          if (scrollContainer) {\n            var bodyPos = DOM.getPos(body), scrollContainerPos = DOM.getPos(scrollContainer);\n            deltaX = Math.max(0, scrollContainerPos.x - bodyPos.x);\n            deltaY = Math.max(0, scrollContainerPos.y - bodyPos.y);\n          }\n          panel.fixed(false).moveRel(body, editor.rtl ? [\n            'tr-br',\n            'br-tr'\n          ] : [\n            'tl-bl',\n            'bl-tl',\n            'tr-br'\n          ]).moveBy(deltaX, deltaY);\n        }\n      };\n      var show = function () {\n        if (panel) {\n          panel.show();\n          reposition();\n          DOM.addClass(editor.getBody(), 'mce-edit-focus');\n        }\n      };\n      var hide = function () {\n        if (panel) {\n          panel.hide();\n          FloatPanel.hideAll();\n          DOM.removeClass(editor.getBody(), 'mce-edit-focus');\n        }\n      };\n      var render = function () {\n        if (panel) {\n          if (!panel.visible()) {\n            show();\n          }\n          return;\n        }\n        panel = theme.panel = global$4.create({\n          type: inlineToolbarContainer ? 'panel' : 'floatpanel',\n          role: 'application',\n          classes: 'tinymce tinymce-inline',\n          layout: 'flex',\n          direction: 'column',\n          align: 'stretch',\n          autohide: false,\n          autofix: true,\n          fixed: isFixed$1(inlineToolbarContainer, editor),\n          border: 1,\n          items: [\n            hasMenubar(editor) === false ? null : {\n              type: 'menubar',\n              border: '0 0 1 0',\n              items: Menubar.createMenuButtons(editor)\n            },\n            Toolbar.createToolbars(editor, getToolbarSize(editor))\n          ]\n        });\n        UiContainer.setUiContainer(editor, panel);\n        Events.fireBeforeRenderUI(editor);\n        if (inlineToolbarContainer) {\n          panel.renderTo(inlineToolbarContainer).reflow();\n        } else {\n          panel.renderTo().reflow();\n        }\n        A11y.addKeys(editor, panel);\n        show();\n        ContextToolbars.addContextualToolbars(editor);\n        editor.on('nodeChange', reposition);\n        editor.on('ResizeWindow', reposition);\n        editor.on('activate', show);\n        editor.on('deactivate', hide);\n        editor.nodeChanged();\n      };\n      editor.settings.content_editable = true;\n      editor.on('focus', function () {\n        if (isSkinDisabled(editor) === false && args.skinUiCss) {\n          DOM.styleSheetLoader.load(args.skinUiCss, render, render);\n        } else {\n          render();\n        }\n      });\n      editor.on('blur hide', hide);\n      editor.on('remove', function () {\n        if (panel) {\n          panel.remove();\n          panel = null;\n        }\n      });\n      if (isSkinDisabled(editor) === false && args.skinUiCss) {\n        DOM.styleSheetLoader.load(args.skinUiCss, SkinLoaded.fireSkinLoaded(editor));\n      } else {\n        SkinLoaded.fireSkinLoaded(editor)();\n      }\n      return {};\n    };\n    var Inline = { render: render$1 };\n\n    function Throbber (elm, inline) {\n      var self = this;\n      var state;\n      var classPrefix = Control$1.classPrefix;\n      var timer;\n      self.show = function (time, callback) {\n        function render() {\n          if (state) {\n            global$9(elm).append('<div class=\"' + classPrefix + 'throbber' + (inline ? ' ' + classPrefix + 'throbber-inline' : '') + '\"></div>');\n            if (callback) {\n              callback();\n            }\n          }\n        }\n        self.hide();\n        state = true;\n        if (time) {\n          timer = global$7.setTimeout(render, time);\n        } else {\n          render();\n        }\n        return self;\n      };\n      self.hide = function () {\n        var child = elm.lastChild;\n        global$7.clearTimeout(timer);\n        if (child && child.className.indexOf('throbber') !== -1) {\n          child.parentNode.removeChild(child);\n        }\n        state = false;\n        return self;\n      };\n    }\n\n    var setup = function (editor, theme) {\n      var throbber;\n      editor.on('ProgressState', function (e) {\n        throbber = throbber || new Throbber(theme.panel.getEl('body'));\n        if (e.state) {\n          throbber.show(e.time);\n        } else {\n          throbber.hide();\n        }\n      });\n    };\n    var ProgressState = { setup: setup };\n\n    var renderUI = function (editor, theme, args) {\n      var skinUrl = getSkinUrl(editor);\n      if (skinUrl) {\n        args.skinUiCss = skinUrl + '/skin.min.css';\n        editor.contentCSS.push(skinUrl + '/content' + (editor.inline ? '.inline' : '') + '.min.css');\n      }\n      ProgressState.setup(editor, theme);\n      return isInline(editor) ? Inline.render(editor, theme, args) : Iframe.render(editor, theme, args);\n    };\n    var Render = { renderUI: renderUI };\n\n    var Tooltip = Control$1.extend({\n      Mixins: [Movable],\n      Defaults: { classes: 'widget tooltip tooltip-n' },\n      renderHtml: function () {\n        var self = this, prefix = self.classPrefix;\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\" role=\"presentation\">' + '<div class=\"' + prefix + 'tooltip-arrow\"></div>' + '<div class=\"' + prefix + 'tooltip-inner\">' + self.encode(self.state.get('text')) + '</div>' + '</div>';\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:text', function (e) {\n          self.getEl().lastChild.innerHTML = self.encode(e.value);\n        });\n        return self._super();\n      },\n      repaint: function () {\n        var self = this;\n        var style, rect;\n        style = self.getEl().style;\n        rect = self._layoutRect;\n        style.left = rect.x + 'px';\n        style.top = rect.y + 'px';\n        style.zIndex = 65535 + 65535;\n      }\n    });\n\n    var Widget = Control$1.extend({\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        settings = self.settings;\n        self.canFocus = true;\n        if (settings.tooltip && Widget.tooltips !== false) {\n          self.on('mouseenter', function (e) {\n            var tooltip = self.tooltip().moveTo(-65535);\n            if (e.control === self) {\n              var rel = tooltip.text(settings.tooltip).show().testMoveRel(self.getEl(), [\n                'bc-tc',\n                'bc-tl',\n                'bc-tr'\n              ]);\n              tooltip.classes.toggle('tooltip-n', rel === 'bc-tc');\n              tooltip.classes.toggle('tooltip-nw', rel === 'bc-tl');\n              tooltip.classes.toggle('tooltip-ne', rel === 'bc-tr');\n              tooltip.moveRel(self.getEl(), rel);\n            } else {\n              tooltip.hide();\n            }\n          });\n          self.on('mouseleave mousedown click', function () {\n            self.tooltip().remove();\n            self._tooltip = null;\n          });\n        }\n        self.aria('label', settings.ariaLabel || settings.tooltip);\n      },\n      tooltip: function () {\n        if (!this._tooltip) {\n          this._tooltip = new Tooltip({ type: 'tooltip' });\n          UiContainer.inheritUiContainer(this, this._tooltip);\n          this._tooltip.renderTo();\n        }\n        return this._tooltip;\n      },\n      postRender: function () {\n        var self = this, settings = self.settings;\n        self._super();\n        if (!self.parent() && (settings.width || settings.height)) {\n          self.initLayoutRect();\n          self.repaint();\n        }\n        if (settings.autofocus) {\n          self.focus();\n        }\n      },\n      bindStates: function () {\n        var self = this;\n        function disable(state) {\n          self.aria('disabled', state);\n          self.classes.toggle('disabled', state);\n        }\n        function active(state) {\n          self.aria('pressed', state);\n          self.classes.toggle('active', state);\n        }\n        self.state.on('change:disabled', function (e) {\n          disable(e.value);\n        });\n        self.state.on('change:active', function (e) {\n          active(e.value);\n        });\n        if (self.state.get('disabled')) {\n          disable(true);\n        }\n        if (self.state.get('active')) {\n          active(true);\n        }\n        return self._super();\n      },\n      remove: function () {\n        this._super();\n        if (this._tooltip) {\n          this._tooltip.remove();\n          this._tooltip = null;\n        }\n      }\n    });\n\n    var Progress = Widget.extend({\n      Defaults: { value: 0 },\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.classes.add('progress');\n        if (!self.settings.filter) {\n          self.settings.filter = function (value) {\n            return Math.round(value);\n          };\n        }\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, prefix = this.classPrefix;\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\">' + '<div class=\"' + prefix + 'bar-container\">' + '<div class=\"' + prefix + 'bar\"></div>' + '</div>' + '<div class=\"' + prefix + 'text\">0%</div>' + '</div>';\n      },\n      postRender: function () {\n        var self = this;\n        self._super();\n        self.value(self.settings.value);\n        return self;\n      },\n      bindStates: function () {\n        var self = this;\n        function setValue(value) {\n          value = self.settings.filter(value);\n          self.getEl().lastChild.innerHTML = value + '%';\n          self.getEl().firstChild.firstChild.style.width = value + '%';\n        }\n        self.state.on('change:value', function (e) {\n          setValue(e.value);\n        });\n        setValue(self.state.get('value'));\n        return self._super();\n      }\n    });\n\n    var updateLiveRegion = function (ctx, text) {\n      ctx.getEl().lastChild.textContent = text + (ctx.progressBar ? ' ' + ctx.progressBar.value() + '%' : '');\n    };\n    var Notification = Control$1.extend({\n      Mixins: [Movable],\n      Defaults: { classes: 'widget notification' },\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.maxWidth = settings.maxWidth;\n        if (settings.text) {\n          self.text(settings.text);\n        }\n        if (settings.icon) {\n          self.icon = settings.icon;\n        }\n        if (settings.color) {\n          self.color = settings.color;\n        }\n        if (settings.type) {\n          self.classes.add('notification-' + settings.type);\n        }\n        if (settings.timeout && (settings.timeout < 0 || settings.timeout > 0) && !settings.closeButton) {\n          self.closeButton = false;\n        } else {\n          self.classes.add('has-close');\n          self.closeButton = true;\n        }\n        if (settings.progressBar) {\n          self.progressBar = new Progress();\n        }\n        self.on('click', function (e) {\n          if (e.target.className.indexOf(self.classPrefix + 'close') !== -1) {\n            self.close();\n          }\n        });\n      },\n      renderHtml: function () {\n        var self = this;\n        var prefix = self.classPrefix;\n        var icon = '', closeButton = '', progressBar = '', notificationStyle = '';\n        if (self.icon) {\n          icon = '<i class=\"' + prefix + 'ico' + ' ' + prefix + 'i-' + self.icon + '\"></i>';\n        }\n        notificationStyle = ' style=\"max-width: ' + self.maxWidth + 'px;' + (self.color ? 'background-color: ' + self.color + ';\"' : '\"');\n        if (self.closeButton) {\n          closeButton = '<button type=\"button\" class=\"' + prefix + 'close\" aria-hidden=\"true\">\\xD7</button>';\n        }\n        if (self.progressBar) {\n          progressBar = self.progressBar.renderHtml();\n        }\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\"' + notificationStyle + ' role=\"presentation\">' + icon + '<div class=\"' + prefix + 'notification-inner\">' + self.state.get('text') + '</div>' + progressBar + closeButton + '<div style=\"clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;\"' + ' aria-live=\"assertive\" aria-relevant=\"additions\" aria-atomic=\"true\"></div>' + '</div>';\n      },\n      postRender: function () {\n        var self = this;\n        global$7.setTimeout(function () {\n          self.$el.addClass(self.classPrefix + 'in');\n          updateLiveRegion(self, self.state.get('text'));\n        }, 100);\n        return self._super();\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:text', function (e) {\n          self.getEl().firstChild.innerHTML = e.value;\n          updateLiveRegion(self, e.value);\n        });\n        if (self.progressBar) {\n          self.progressBar.bindStates();\n          self.progressBar.state.on('change:value', function (e) {\n            updateLiveRegion(self, self.state.get('text'));\n          });\n        }\n        return self._super();\n      },\n      close: function () {\n        var self = this;\n        if (!self.fire('close').isDefaultPrevented()) {\n          self.remove();\n        }\n        return self;\n      },\n      repaint: function () {\n        var self = this;\n        var style, rect;\n        style = self.getEl().style;\n        rect = self._layoutRect;\n        style.left = rect.x + 'px';\n        style.top = rect.y + 'px';\n        style.zIndex = 65535 - 1;\n      }\n    });\n\n    function NotificationManagerImpl (editor) {\n      var getEditorContainer = function (editor) {\n        return editor.inline ? editor.getElement() : editor.getContentAreaContainer();\n      };\n      var getContainerWidth = function () {\n        var container = getEditorContainer(editor);\n        return funcs.getSize(container).width;\n      };\n      var prePositionNotifications = function (notifications) {\n        each(notifications, function (notification) {\n          notification.moveTo(0, 0);\n        });\n      };\n      var positionNotifications = function (notifications) {\n        if (notifications.length > 0) {\n          var firstItem = notifications.slice(0, 1)[0];\n          var container = getEditorContainer(editor);\n          firstItem.moveRel(container, 'tc-tc');\n          each(notifications, function (notification, index) {\n            if (index > 0) {\n              notification.moveRel(notifications[index - 1].getEl(), 'bc-tc');\n            }\n          });\n        }\n      };\n      var reposition = function (notifications) {\n        prePositionNotifications(notifications);\n        positionNotifications(notifications);\n      };\n      var open = function (args, closeCallback) {\n        var extendedArgs = global$2.extend(args, { maxWidth: getContainerWidth() });\n        var notif = new Notification(extendedArgs);\n        notif.args = extendedArgs;\n        if (extendedArgs.timeout > 0) {\n          notif.timer = setTimeout(function () {\n            notif.close();\n            closeCallback();\n          }, extendedArgs.timeout);\n        }\n        notif.on('close', function () {\n          closeCallback();\n        });\n        notif.renderTo();\n        return notif;\n      };\n      var close = function (notification) {\n        notification.close();\n      };\n      var getArgs = function (notification) {\n        return notification.args;\n      };\n      return {\n        open: open,\n        close: close,\n        reposition: reposition,\n        getArgs: getArgs\n      };\n    }\n\n    var windows = [];\n    var oldMetaValue = '';\n    function toggleFullScreenState(state) {\n      var noScaleMetaValue = 'width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0';\n      var viewport = global$9('meta[name=viewport]')[0], contentValue;\n      if (global$8.overrideViewPort === false) {\n        return;\n      }\n      if (!viewport) {\n        viewport = domGlobals.document.createElement('meta');\n        viewport.setAttribute('name', 'viewport');\n        domGlobals.document.getElementsByTagName('head')[0].appendChild(viewport);\n      }\n      contentValue = viewport.getAttribute('content');\n      if (contentValue && typeof oldMetaValue !== 'undefined') {\n        oldMetaValue = contentValue;\n      }\n      viewport.setAttribute('content', state ? noScaleMetaValue : oldMetaValue);\n    }\n    function toggleBodyFullScreenClasses(classPrefix, state) {\n      if (checkFullscreenWindows() && state === false) {\n        global$9([\n          domGlobals.document.documentElement,\n          domGlobals.document.body\n        ]).removeClass(classPrefix + 'fullscreen');\n      }\n    }\n    function checkFullscreenWindows() {\n      for (var i = 0; i < windows.length; i++) {\n        if (windows[i]._fullscreen) {\n          return true;\n        }\n      }\n      return false;\n    }\n    function handleWindowResize() {\n      if (!global$8.desktop) {\n        var lastSize_1 = {\n          w: domGlobals.window.innerWidth,\n          h: domGlobals.window.innerHeight\n        };\n        global$7.setInterval(function () {\n          var w = domGlobals.window.innerWidth, h = domGlobals.window.innerHeight;\n          if (lastSize_1.w !== w || lastSize_1.h !== h) {\n            lastSize_1 = {\n              w: w,\n              h: h\n            };\n            global$9(domGlobals.window).trigger('resize');\n          }\n        }, 100);\n      }\n      function reposition() {\n        var i;\n        var rect = funcs.getWindowSize();\n        var layoutRect;\n        for (i = 0; i < windows.length; i++) {\n          layoutRect = windows[i].layoutRect();\n          windows[i].moveTo(windows[i].settings.x || Math.max(0, rect.w / 2 - layoutRect.w / 2), windows[i].settings.y || Math.max(0, rect.h / 2 - layoutRect.h / 2));\n        }\n      }\n      global$9(domGlobals.window).on('resize', reposition);\n    }\n    var Window = FloatPanel.extend({\n      modal: true,\n      Defaults: {\n        border: 1,\n        layout: 'flex',\n        containerCls: 'panel',\n        role: 'dialog',\n        callbacks: {\n          submit: function () {\n            this.fire('submit', { data: this.toJSON() });\n          },\n          close: function () {\n            this.close();\n          }\n        }\n      },\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        if (self.isRtl()) {\n          self.classes.add('rtl');\n        }\n        self.classes.add('window');\n        self.bodyClasses.add('window-body');\n        self.state.set('fixed', true);\n        if (settings.buttons) {\n          self.statusbar = new Panel({\n            layout: 'flex',\n            border: '1 0 0 0',\n            spacing: 3,\n            padding: 10,\n            align: 'center',\n            pack: self.isRtl() ? 'start' : 'end',\n            defaults: { type: 'button' },\n            items: settings.buttons\n          });\n          self.statusbar.classes.add('foot');\n          self.statusbar.parent(self);\n        }\n        self.on('click', function (e) {\n          var closeClass = self.classPrefix + 'close';\n          if (funcs.hasClass(e.target, closeClass) || funcs.hasClass(e.target.parentNode, closeClass)) {\n            self.close();\n          }\n        });\n        self.on('cancel', function () {\n          self.close();\n        });\n        self.on('move', function (e) {\n          if (e.control === self) {\n            FloatPanel.hideAll();\n          }\n        });\n        self.aria('describedby', self.describedBy || self._id + '-none');\n        self.aria('label', settings.title);\n        self._fullscreen = false;\n      },\n      recalc: function () {\n        var self = this;\n        var statusbar = self.statusbar;\n        var layoutRect, width, x, needsRecalc;\n        if (self._fullscreen) {\n          self.layoutRect(funcs.getWindowSize());\n          self.layoutRect().contentH = self.layoutRect().innerH;\n        }\n        self._super();\n        layoutRect = self.layoutRect();\n        if (self.settings.title && !self._fullscreen) {\n          width = layoutRect.headerW;\n          if (width > layoutRect.w) {\n            x = layoutRect.x - Math.max(0, width / 2);\n            self.layoutRect({\n              w: width,\n              x: x\n            });\n            needsRecalc = true;\n          }\n        }\n        if (statusbar) {\n          statusbar.layoutRect({ w: self.layoutRect().innerW }).recalc();\n          width = statusbar.layoutRect().minW + layoutRect.deltaW;\n          if (width > layoutRect.w) {\n            x = layoutRect.x - Math.max(0, width - layoutRect.w);\n            self.layoutRect({\n              w: width,\n              x: x\n            });\n            needsRecalc = true;\n          }\n        }\n        if (needsRecalc) {\n          self.recalc();\n        }\n      },\n      initLayoutRect: function () {\n        var self = this;\n        var layoutRect = self._super();\n        var deltaH = 0, headEl;\n        if (self.settings.title && !self._fullscreen) {\n          headEl = self.getEl('head');\n          var size = funcs.getSize(headEl);\n          layoutRect.headerW = size.width;\n          layoutRect.headerH = size.height;\n          deltaH += layoutRect.headerH;\n        }\n        if (self.statusbar) {\n          deltaH += self.statusbar.layoutRect().h;\n        }\n        layoutRect.deltaH += deltaH;\n        layoutRect.minH += deltaH;\n        layoutRect.h += deltaH;\n        var rect = funcs.getWindowSize();\n        layoutRect.x = self.settings.x || Math.max(0, rect.w / 2 - layoutRect.w / 2);\n        layoutRect.y = self.settings.y || Math.max(0, rect.h / 2 - layoutRect.h / 2);\n        return layoutRect;\n      },\n      renderHtml: function () {\n        var self = this, layout = self._layout, id = self._id, prefix = self.classPrefix;\n        var settings = self.settings;\n        var headerHtml = '', footerHtml = '', html = settings.html;\n        self.preRender();\n        layout.preRender(self);\n        if (settings.title) {\n          headerHtml = '<div id=\"' + id + '-head\" class=\"' + prefix + 'window-head\">' + '<div id=\"' + id + '-title\" class=\"' + prefix + 'title\">' + self.encode(settings.title) + '</div>' + '<div id=\"' + id + '-dragh\" class=\"' + prefix + 'dragh\"></div>' + '<button type=\"button\" class=\"' + prefix + 'close\" aria-hidden=\"true\">' + '<i class=\"mce-ico mce-i-remove\"></i>' + '</button>' + '</div>';\n        }\n        if (settings.url) {\n          html = '<iframe src=\"' + settings.url + '\" tabindex=\"-1\"></iframe>';\n        }\n        if (typeof html === 'undefined') {\n          html = layout.renderHtml(self);\n        }\n        if (self.statusbar) {\n          footerHtml = self.statusbar.renderHtml();\n        }\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" hidefocus=\"1\">' + '<div class=\"' + self.classPrefix + 'reset\" role=\"application\">' + headerHtml + '<div id=\"' + id + '-body\" class=\"' + self.bodyClasses + '\">' + html + '</div>' + footerHtml + '</div>' + '</div>';\n      },\n      fullscreen: function (state) {\n        var self = this;\n        var documentElement = domGlobals.document.documentElement;\n        var slowRendering;\n        var prefix = self.classPrefix;\n        var layoutRect;\n        if (state !== self._fullscreen) {\n          global$9(domGlobals.window).on('resize', function () {\n            var time;\n            if (self._fullscreen) {\n              if (!slowRendering) {\n                time = new Date().getTime();\n                var rect = funcs.getWindowSize();\n                self.moveTo(0, 0).resizeTo(rect.w, rect.h);\n                if (new Date().getTime() - time > 50) {\n                  slowRendering = true;\n                }\n              } else {\n                if (!self._timer) {\n                  self._timer = global$7.setTimeout(function () {\n                    var rect = funcs.getWindowSize();\n                    self.moveTo(0, 0).resizeTo(rect.w, rect.h);\n                    self._timer = 0;\n                  }, 50);\n                }\n              }\n            }\n          });\n          layoutRect = self.layoutRect();\n          self._fullscreen = state;\n          if (!state) {\n            self.borderBox = BoxUtils.parseBox(self.settings.border);\n            self.getEl('head').style.display = '';\n            layoutRect.deltaH += layoutRect.headerH;\n            global$9([\n              documentElement,\n              domGlobals.document.body\n            ]).removeClass(prefix + 'fullscreen');\n            self.classes.remove('fullscreen');\n            self.moveTo(self._initial.x, self._initial.y).resizeTo(self._initial.w, self._initial.h);\n          } else {\n            self._initial = {\n              x: layoutRect.x,\n              y: layoutRect.y,\n              w: layoutRect.w,\n              h: layoutRect.h\n            };\n            self.borderBox = BoxUtils.parseBox('0');\n            self.getEl('head').style.display = 'none';\n            layoutRect.deltaH -= layoutRect.headerH + 2;\n            global$9([\n              documentElement,\n              domGlobals.document.body\n            ]).addClass(prefix + 'fullscreen');\n            self.classes.add('fullscreen');\n            var rect = funcs.getWindowSize();\n            self.moveTo(0, 0).resizeTo(rect.w, rect.h);\n          }\n        }\n        return self.reflow();\n      },\n      postRender: function () {\n        var self = this;\n        var startPos;\n        setTimeout(function () {\n          self.classes.add('in');\n          self.fire('open');\n        }, 0);\n        self._super();\n        if (self.statusbar) {\n          self.statusbar.postRender();\n        }\n        self.focus();\n        this.dragHelper = new DragHelper(self._id + '-dragh', {\n          start: function () {\n            startPos = {\n              x: self.layoutRect().x,\n              y: self.layoutRect().y\n            };\n          },\n          drag: function (e) {\n            self.moveTo(startPos.x + e.deltaX, startPos.y + e.deltaY);\n          }\n        });\n        self.on('submit', function (e) {\n          if (!e.isDefaultPrevented()) {\n            self.close();\n          }\n        });\n        windows.push(self);\n        toggleFullScreenState(true);\n      },\n      submit: function () {\n        return this.fire('submit', { data: this.toJSON() });\n      },\n      remove: function () {\n        var self = this;\n        var i;\n        self.dragHelper.destroy();\n        self._super();\n        if (self.statusbar) {\n          this.statusbar.remove();\n        }\n        toggleBodyFullScreenClasses(self.classPrefix, false);\n        i = windows.length;\n        while (i--) {\n          if (windows[i] === self) {\n            windows.splice(i, 1);\n          }\n        }\n        toggleFullScreenState(windows.length > 0);\n      },\n      getContentWindow: function () {\n        var ifr = this.getEl().getElementsByTagName('iframe')[0];\n        return ifr ? ifr.contentWindow : null;\n      }\n    });\n    handleWindowResize();\n\n    var MessageBox = Window.extend({\n      init: function (settings) {\n        settings = {\n          border: 1,\n          padding: 20,\n          layout: 'flex',\n          pack: 'center',\n          align: 'center',\n          containerCls: 'panel',\n          autoScroll: true,\n          buttons: {\n            type: 'button',\n            text: 'Ok',\n            action: 'ok'\n          },\n          items: {\n            type: 'label',\n            multiline: true,\n            maxWidth: 500,\n            maxHeight: 200\n          }\n        };\n        this._super(settings);\n      },\n      Statics: {\n        OK: 1,\n        OK_CANCEL: 2,\n        YES_NO: 3,\n        YES_NO_CANCEL: 4,\n        msgBox: function (settings) {\n          var buttons;\n          var callback = settings.callback || function () {\n          };\n          function createButton(text, status, primary) {\n            return {\n              type: 'button',\n              text: text,\n              subtype: primary ? 'primary' : '',\n              onClick: function (e) {\n                e.control.parents()[1].close();\n                callback(status);\n              }\n            };\n          }\n          switch (settings.buttons) {\n          case MessageBox.OK_CANCEL:\n            buttons = [\n              createButton('Ok', true, true),\n              createButton('Cancel', false)\n            ];\n            break;\n          case MessageBox.YES_NO:\n          case MessageBox.YES_NO_CANCEL:\n            buttons = [\n              createButton('Yes', 1, true),\n              createButton('No', 0)\n            ];\n            if (settings.buttons === MessageBox.YES_NO_CANCEL) {\n              buttons.push(createButton('Cancel', -1));\n            }\n            break;\n          default:\n            buttons = [createButton('Ok', true, true)];\n            break;\n          }\n          return new Window({\n            padding: 20,\n            x: settings.x,\n            y: settings.y,\n            minWidth: 300,\n            minHeight: 100,\n            layout: 'flex',\n            pack: 'center',\n            align: 'center',\n            buttons: buttons,\n            title: settings.title,\n            role: 'alertdialog',\n            items: {\n              type: 'label',\n              multiline: true,\n              maxWidth: 500,\n              maxHeight: 200,\n              text: settings.text\n            },\n            onPostRender: function () {\n              this.aria('describedby', this.items()[0]._id);\n            },\n            onClose: settings.onClose,\n            onCancel: function () {\n              callback(false);\n            }\n          }).renderTo(domGlobals.document.body).reflow();\n        },\n        alert: function (settings, callback) {\n          if (typeof settings === 'string') {\n            settings = { text: settings };\n          }\n          settings.callback = callback;\n          return MessageBox.msgBox(settings);\n        },\n        confirm: function (settings, callback) {\n          if (typeof settings === 'string') {\n            settings = { text: settings };\n          }\n          settings.callback = callback;\n          settings.buttons = MessageBox.OK_CANCEL;\n          return MessageBox.msgBox(settings);\n        }\n      }\n    });\n\n    function WindowManagerImpl (editor) {\n      var open = function (args, params, closeCallback) {\n        var win;\n        args.title = args.title || ' ';\n        args.url = args.url || args.file;\n        if (args.url) {\n          args.width = parseInt(args.width || 320, 10);\n          args.height = parseInt(args.height || 240, 10);\n        }\n        if (args.body) {\n          args.items = {\n            defaults: args.defaults,\n            type: args.bodyType || 'form',\n            items: args.body,\n            data: args.data,\n            callbacks: args.commands\n          };\n        }\n        if (!args.url && !args.buttons) {\n          args.buttons = [\n            {\n              text: 'Ok',\n              subtype: 'primary',\n              onclick: function () {\n                win.find('form')[0].submit();\n              }\n            },\n            {\n              text: 'Cancel',\n              onclick: function () {\n                win.close();\n              }\n            }\n          ];\n        }\n        win = new Window(args);\n        win.on('close', function () {\n          closeCallback(win);\n        });\n        if (args.data) {\n          win.on('postRender', function () {\n            this.find('*').each(function (ctrl) {\n              var name = ctrl.name();\n              if (name in args.data) {\n                ctrl.value(args.data[name]);\n              }\n            });\n          });\n        }\n        win.features = args || {};\n        win.params = params || {};\n        win = win.renderTo(domGlobals.document.body).reflow();\n        return win;\n      };\n      var alert = function (message, choiceCallback, closeCallback) {\n        var win;\n        win = MessageBox.alert(message, function () {\n          choiceCallback();\n        });\n        win.on('close', function () {\n          closeCallback(win);\n        });\n        return win;\n      };\n      var confirm = function (message, choiceCallback, closeCallback) {\n        var win;\n        win = MessageBox.confirm(message, function (state) {\n          choiceCallback(state);\n        });\n        win.on('close', function () {\n          closeCallback(win);\n        });\n        return win;\n      };\n      var close = function (window) {\n        window.close();\n      };\n      var getParams = function (window) {\n        return window.params;\n      };\n      var setParams = function (window, params) {\n        window.params = params;\n      };\n      return {\n        open: open,\n        alert: alert,\n        confirm: confirm,\n        close: close,\n        getParams: getParams,\n        setParams: setParams\n      };\n    }\n\n    var get = function (editor) {\n      var renderUI = function (args) {\n        return Render.renderUI(editor, this, args);\n      };\n      var resizeTo = function (w, h) {\n        return Resize.resizeTo(editor, w, h);\n      };\n      var resizeBy = function (dw, dh) {\n        return Resize.resizeBy(editor, dw, dh);\n      };\n      var getNotificationManagerImpl = function () {\n        return NotificationManagerImpl(editor);\n      };\n      var getWindowManagerImpl = function () {\n        return WindowManagerImpl();\n      };\n      return {\n        renderUI: renderUI,\n        resizeTo: resizeTo,\n        resizeBy: resizeBy,\n        getNotificationManagerImpl: getNotificationManagerImpl,\n        getWindowManagerImpl: getWindowManagerImpl\n      };\n    };\n    var ThemeApi = { get: get };\n\n    var Layout = global$a.extend({\n      Defaults: {\n        firstControlClass: 'first',\n        lastControlClass: 'last'\n      },\n      init: function (settings) {\n        this.settings = global$2.extend({}, this.Defaults, settings);\n      },\n      preRender: function (container) {\n        container.bodyClasses.add(this.settings.containerClass);\n      },\n      applyClasses: function (items) {\n        var self = this;\n        var settings = self.settings;\n        var firstClass, lastClass, firstItem, lastItem;\n        firstClass = settings.firstControlClass;\n        lastClass = settings.lastControlClass;\n        items.each(function (item) {\n          item.classes.remove(firstClass).remove(lastClass).add(settings.controlClass);\n          if (item.visible()) {\n            if (!firstItem) {\n              firstItem = item;\n            }\n            lastItem = item;\n          }\n        });\n        if (firstItem) {\n          firstItem.classes.add(firstClass);\n        }\n        if (lastItem) {\n          lastItem.classes.add(lastClass);\n        }\n      },\n      renderHtml: function (container) {\n        var self = this;\n        var html = '';\n        self.applyClasses(container.items());\n        container.items().each(function (item) {\n          html += item.renderHtml();\n        });\n        return html;\n      },\n      recalc: function () {\n      },\n      postRender: function () {\n      },\n      isNative: function () {\n        return false;\n      }\n    });\n\n    var AbsoluteLayout = Layout.extend({\n      Defaults: {\n        containerClass: 'abs-layout',\n        controlClass: 'abs-layout-item'\n      },\n      recalc: function (container) {\n        container.items().filter(':visible').each(function (ctrl) {\n          var settings = ctrl.settings;\n          ctrl.layoutRect({\n            x: settings.x,\n            y: settings.y,\n            w: settings.w,\n            h: settings.h\n          });\n          if (ctrl.recalc) {\n            ctrl.recalc();\n          }\n        });\n      },\n      renderHtml: function (container) {\n        return '<div id=\"' + container._id + '-absend\" class=\"' + container.classPrefix + 'abs-end\"></div>' + this._super(container);\n      }\n    });\n\n    var Button = Widget.extend({\n      Defaults: {\n        classes: 'widget btn',\n        role: 'button'\n      },\n      init: function (settings) {\n        var self = this;\n        var size;\n        self._super(settings);\n        settings = self.settings;\n        size = self.settings.size;\n        self.on('click mousedown', function (e) {\n          e.preventDefault();\n        });\n        self.on('touchstart', function (e) {\n          self.fire('click', e);\n          e.preventDefault();\n        });\n        if (settings.subtype) {\n          self.classes.add(settings.subtype);\n        }\n        if (size) {\n          self.classes.add('btn-' + size);\n        }\n        if (settings.icon) {\n          self.icon(settings.icon);\n        }\n      },\n      icon: function (icon) {\n        if (!arguments.length) {\n          return this.state.get('icon');\n        }\n        this.state.set('icon', icon);\n        return this;\n      },\n      repaint: function () {\n        var btnElm = this.getEl().firstChild;\n        var btnStyle;\n        if (btnElm) {\n          btnStyle = btnElm.style;\n          btnStyle.width = btnStyle.height = '100%';\n        }\n        this._super();\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, prefix = self.classPrefix;\n        var icon = self.state.get('icon'), image;\n        var text = self.state.get('text');\n        var textHtml = '';\n        var ariaPressed;\n        var settings = self.settings;\n        image = settings.image;\n        if (image) {\n          icon = 'none';\n          if (typeof image !== 'string') {\n            image = domGlobals.window.getSelection ? image[0] : image[1];\n          }\n          image = ' style=\"background-image: url(\\'' + image + '\\')\"';\n        } else {\n          image = '';\n        }\n        if (text) {\n          self.classes.add('btn-has-text');\n          textHtml = '<span class=\"' + prefix + 'txt\">' + self.encode(text) + '</span>';\n        }\n        icon = icon ? prefix + 'ico ' + prefix + 'i-' + icon : '';\n        ariaPressed = typeof settings.active === 'boolean' ? ' aria-pressed=\"' + settings.active + '\"' : '';\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" tabindex=\"-1\"' + ariaPressed + '>' + '<button id=\"' + id + '-button\" role=\"presentation\" type=\"button\" tabindex=\"-1\">' + (icon ? '<i class=\"' + icon + '\"' + image + '></i>' : '') + textHtml + '</button>' + '</div>';\n      },\n      bindStates: function () {\n        var self = this, $ = self.$, textCls = self.classPrefix + 'txt';\n        function setButtonText(text) {\n          var $span = $('span.' + textCls, self.getEl());\n          if (text) {\n            if (!$span[0]) {\n              $('button:first', self.getEl()).append('<span class=\"' + textCls + '\"></span>');\n              $span = $('span.' + textCls, self.getEl());\n            }\n            $span.html(self.encode(text));\n          } else {\n            $span.remove();\n          }\n          self.classes.toggle('btn-has-text', !!text);\n        }\n        self.state.on('change:text', function (e) {\n          setButtonText(e.value);\n        });\n        self.state.on('change:icon', function (e) {\n          var icon = e.value;\n          var prefix = self.classPrefix;\n          self.settings.icon = icon;\n          icon = icon ? prefix + 'ico ' + prefix + 'i-' + self.settings.icon : '';\n          var btnElm = self.getEl().firstChild;\n          var iconElm = btnElm.getElementsByTagName('i')[0];\n          if (icon) {\n            if (!iconElm || iconElm !== btnElm.firstChild) {\n              iconElm = domGlobals.document.createElement('i');\n              btnElm.insertBefore(iconElm, btnElm.firstChild);\n            }\n            iconElm.className = icon;\n          } else if (iconElm) {\n            btnElm.removeChild(iconElm);\n          }\n          setButtonText(self.state.get('text'));\n        });\n        return self._super();\n      }\n    });\n\n    var BrowseButton = Button.extend({\n      init: function (settings) {\n        var self = this;\n        settings = global$2.extend({\n          text: 'Browse...',\n          multiple: false,\n          accept: null\n        }, settings);\n        self._super(settings);\n        self.classes.add('browsebutton');\n        if (settings.multiple) {\n          self.classes.add('multiple');\n        }\n      },\n      postRender: function () {\n        var self = this;\n        var input = funcs.create('input', {\n          type: 'file',\n          id: self._id + '-browse',\n          accept: self.settings.accept\n        });\n        self._super();\n        global$9(input).on('change', function (e) {\n          var files = e.target.files;\n          self.value = function () {\n            if (!files.length) {\n              return null;\n            } else if (self.settings.multiple) {\n              return files;\n            } else {\n              return files[0];\n            }\n          };\n          e.preventDefault();\n          if (files.length) {\n            self.fire('change', e);\n          }\n        });\n        global$9(input).on('click', function (e) {\n          e.stopPropagation();\n        });\n        global$9(self.getEl('button')).on('click touchstart', function (e) {\n          e.stopPropagation();\n          input.click();\n          e.preventDefault();\n        });\n        self.getEl().appendChild(input);\n      },\n      remove: function () {\n        global$9(this.getEl('button')).off();\n        global$9(this.getEl('input')).off();\n        this._super();\n      }\n    });\n\n    var ButtonGroup = Container.extend({\n      Defaults: {\n        defaultType: 'button',\n        role: 'group'\n      },\n      renderHtml: function () {\n        var self = this, layout = self._layout;\n        self.classes.add('btn-group');\n        self.preRender();\n        layout.preRender(self);\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\">' + '<div id=\"' + self._id + '-body\">' + (self.settings.html || '') + layout.renderHtml(self) + '</div>' + '</div>';\n      }\n    });\n\n    var Checkbox = Widget.extend({\n      Defaults: {\n        classes: 'checkbox',\n        role: 'checkbox',\n        checked: false\n      },\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.on('click mousedown', function (e) {\n          e.preventDefault();\n        });\n        self.on('click', function (e) {\n          e.preventDefault();\n          if (!self.disabled()) {\n            self.checked(!self.checked());\n          }\n        });\n        self.checked(self.settings.checked);\n      },\n      checked: function (state) {\n        if (!arguments.length) {\n          return this.state.get('checked');\n        }\n        this.state.set('checked', state);\n        return this;\n      },\n      value: function (state) {\n        if (!arguments.length) {\n          return this.checked();\n        }\n        return this.checked(state);\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, prefix = self.classPrefix;\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" unselectable=\"on\" aria-labelledby=\"' + id + '-al\" tabindex=\"-1\">' + '<i class=\"' + prefix + 'ico ' + prefix + 'i-checkbox\"></i>' + '<span id=\"' + id + '-al\" class=\"' + prefix + 'label\">' + self.encode(self.state.get('text')) + '</span>' + '</div>';\n      },\n      bindStates: function () {\n        var self = this;\n        function checked(state) {\n          self.classes.toggle('checked', state);\n          self.aria('checked', state);\n        }\n        self.state.on('change:text', function (e) {\n          self.getEl('al').firstChild.data = self.translate(e.value);\n        });\n        self.state.on('change:checked change:value', function (e) {\n          self.fire('change');\n          checked(e.value);\n        });\n        self.state.on('change:icon', function (e) {\n          var icon = e.value;\n          var prefix = self.classPrefix;\n          if (typeof icon === 'undefined') {\n            return self.settings.icon;\n          }\n          self.settings.icon = icon;\n          icon = icon ? prefix + 'ico ' + prefix + 'i-' + self.settings.icon : '';\n          var btnElm = self.getEl().firstChild;\n          var iconElm = btnElm.getElementsByTagName('i')[0];\n          if (icon) {\n            if (!iconElm || iconElm !== btnElm.firstChild) {\n              iconElm = domGlobals.document.createElement('i');\n              btnElm.insertBefore(iconElm, btnElm.firstChild);\n            }\n            iconElm.className = icon;\n          } else if (iconElm) {\n            btnElm.removeChild(iconElm);\n          }\n        });\n        if (self.state.get('checked')) {\n          checked(true);\n        }\n        return self._super();\n      }\n    });\n\n    var global$d = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var ComboBox = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        settings = self.settings;\n        self.classes.add('combobox');\n        self.subinput = true;\n        self.ariaTarget = 'inp';\n        settings.menu = settings.menu || settings.values;\n        if (settings.menu) {\n          settings.icon = 'caret';\n        }\n        self.on('click', function (e) {\n          var elm = e.target;\n          var root = self.getEl();\n          if (!global$9.contains(root, elm) && elm !== root) {\n            return;\n          }\n          while (elm && elm !== root) {\n            if (elm.id && elm.id.indexOf('-open') !== -1) {\n              self.fire('action');\n              if (settings.menu) {\n                self.showMenu();\n                if (e.aria) {\n                  self.menu.items()[0].focus();\n                }\n              }\n            }\n            elm = elm.parentNode;\n          }\n        });\n        self.on('keydown', function (e) {\n          var rootControl;\n          if (e.keyCode === 13 && e.target.nodeName === 'INPUT') {\n            e.preventDefault();\n            self.parents().reverse().each(function (ctrl) {\n              if (ctrl.toJSON) {\n                rootControl = ctrl;\n                return false;\n              }\n            });\n            self.fire('submit', { data: rootControl.toJSON() });\n          }\n        });\n        self.on('keyup', function (e) {\n          if (e.target.nodeName === 'INPUT') {\n            var oldValue = self.state.get('value');\n            var newValue = e.target.value;\n            if (newValue !== oldValue) {\n              self.state.set('value', newValue);\n              self.fire('autocomplete', e);\n            }\n          }\n        });\n        self.on('mouseover', function (e) {\n          var tooltip = self.tooltip().moveTo(-65535);\n          if (self.statusLevel() && e.target.className.indexOf(self.classPrefix + 'status') !== -1) {\n            var statusMessage = self.statusMessage() || 'Ok';\n            var rel = tooltip.text(statusMessage).show().testMoveRel(e.target, [\n              'bc-tc',\n              'bc-tl',\n              'bc-tr'\n            ]);\n            tooltip.classes.toggle('tooltip-n', rel === 'bc-tc');\n            tooltip.classes.toggle('tooltip-nw', rel === 'bc-tl');\n            tooltip.classes.toggle('tooltip-ne', rel === 'bc-tr');\n            tooltip.moveRel(e.target, rel);\n          }\n        });\n      },\n      statusLevel: function (value) {\n        if (arguments.length > 0) {\n          this.state.set('statusLevel', value);\n        }\n        return this.state.get('statusLevel');\n      },\n      statusMessage: function (value) {\n        if (arguments.length > 0) {\n          this.state.set('statusMessage', value);\n        }\n        return this.state.get('statusMessage');\n      },\n      showMenu: function () {\n        var self = this;\n        var settings = self.settings;\n        var menu;\n        if (!self.menu) {\n          menu = settings.menu || [];\n          if (menu.length) {\n            menu = {\n              type: 'menu',\n              items: menu\n            };\n          } else {\n            menu.type = menu.type || 'menu';\n          }\n          self.menu = global$4.create(menu).parent(self).renderTo(self.getContainerElm());\n          self.fire('createmenu');\n          self.menu.reflow();\n          self.menu.on('cancel', function (e) {\n            if (e.control === self.menu) {\n              self.focus();\n            }\n          });\n          self.menu.on('show hide', function (e) {\n            e.control.items().each(function (ctrl) {\n              ctrl.active(ctrl.value() === self.value());\n            });\n          }).fire('show');\n          self.menu.on('select', function (e) {\n            self.value(e.control.value());\n          });\n          self.on('focusin', function (e) {\n            if (e.target.tagName.toUpperCase() === 'INPUT') {\n              self.menu.hide();\n            }\n          });\n          self.aria('expanded', true);\n        }\n        self.menu.show();\n        self.menu.layoutRect({ w: self.layoutRect().w });\n        self.menu.moveRel(self.getEl(), self.isRtl() ? [\n          'br-tr',\n          'tr-br'\n        ] : [\n          'bl-tl',\n          'tl-bl'\n        ]);\n      },\n      focus: function () {\n        this.getEl('inp').focus();\n      },\n      repaint: function () {\n        var self = this, elm = self.getEl(), openElm = self.getEl('open'), rect = self.layoutRect();\n        var width, lineHeight, innerPadding = 0;\n        var inputElm = elm.firstChild;\n        if (self.statusLevel() && self.statusLevel() !== 'none') {\n          innerPadding = parseInt(funcs.getRuntimeStyle(inputElm, 'padding-right'), 10) - parseInt(funcs.getRuntimeStyle(inputElm, 'padding-left'), 10);\n        }\n        if (openElm) {\n          width = rect.w - funcs.getSize(openElm).width - 10;\n        } else {\n          width = rect.w - 10;\n        }\n        var doc = domGlobals.document;\n        if (doc.all && (!doc.documentMode || doc.documentMode <= 8)) {\n          lineHeight = self.layoutRect().h - 2 + 'px';\n        }\n        global$9(inputElm).css({\n          width: width - innerPadding,\n          lineHeight: lineHeight\n        });\n        self._super();\n        return self;\n      },\n      postRender: function () {\n        var self = this;\n        global$9(this.getEl('inp')).on('change', function (e) {\n          self.state.set('value', e.target.value);\n          self.fire('change', e);\n        });\n        return self._super();\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, settings = self.settings, prefix = self.classPrefix;\n        var value = self.state.get('value') || '';\n        var icon, text, openBtnHtml = '', extraAttrs = '', statusHtml = '';\n        if ('spellcheck' in settings) {\n          extraAttrs += ' spellcheck=\"' + settings.spellcheck + '\"';\n        }\n        if (settings.maxLength) {\n          extraAttrs += ' maxlength=\"' + settings.maxLength + '\"';\n        }\n        if (settings.size) {\n          extraAttrs += ' size=\"' + settings.size + '\"';\n        }\n        if (settings.subtype) {\n          extraAttrs += ' type=\"' + settings.subtype + '\"';\n        }\n        statusHtml = '<i id=\"' + id + '-status\" class=\"mce-status mce-ico\" style=\"display: none\"></i>';\n        if (self.disabled()) {\n          extraAttrs += ' disabled=\"disabled\"';\n        }\n        icon = settings.icon;\n        if (icon && icon !== 'caret') {\n          icon = prefix + 'ico ' + prefix + 'i-' + settings.icon;\n        }\n        text = self.state.get('text');\n        if (icon || text) {\n          openBtnHtml = '<div id=\"' + id + '-open\" class=\"' + prefix + 'btn ' + prefix + 'open\" tabIndex=\"-1\" role=\"button\">' + '<button id=\"' + id + '-action\" type=\"button\" hidefocus=\"1\" tabindex=\"-1\">' + (icon !== 'caret' ? '<i class=\"' + icon + '\"></i>' : '<i class=\"' + prefix + 'caret\"></i>') + (text ? (icon ? ' ' : '') + text : '') + '</button>' + '</div>';\n          self.classes.add('has-open');\n        }\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\">' + '<input id=\"' + id + '-inp\" class=\"' + prefix + 'textbox\" value=\"' + self.encode(value, false) + '\" hidefocus=\"1\"' + extraAttrs + ' placeholder=\"' + self.encode(settings.placeholder) + '\" />' + statusHtml + openBtnHtml + '</div>';\n      },\n      value: function (value) {\n        if (arguments.length) {\n          this.state.set('value', value);\n          return this;\n        }\n        if (this.state.get('rendered')) {\n          this.state.set('value', this.getEl('inp').value);\n        }\n        return this.state.get('value');\n      },\n      showAutoComplete: function (items, term) {\n        var self = this;\n        if (items.length === 0) {\n          self.hideMenu();\n          return;\n        }\n        var insert = function (value, title) {\n          return function () {\n            self.fire('selectitem', {\n              title: title,\n              value: value\n            });\n          };\n        };\n        if (self.menu) {\n          self.menu.items().remove();\n        } else {\n          self.menu = global$4.create({\n            type: 'menu',\n            classes: 'combobox-menu',\n            layout: 'flow'\n          }).parent(self).renderTo();\n        }\n        global$2.each(items, function (item) {\n          self.menu.add({\n            text: item.title,\n            url: item.previewUrl,\n            match: term,\n            classes: 'menu-item-ellipsis',\n            onclick: insert(item.value, item.title)\n          });\n        });\n        self.menu.renderNew();\n        self.hideMenu();\n        self.menu.on('cancel', function (e) {\n          if (e.control.parent() === self.menu) {\n            e.stopPropagation();\n            self.focus();\n            self.hideMenu();\n          }\n        });\n        self.menu.on('select', function () {\n          self.focus();\n        });\n        var maxW = self.layoutRect().w;\n        self.menu.layoutRect({\n          w: maxW,\n          minW: 0,\n          maxW: maxW\n        });\n        self.menu.repaint();\n        self.menu.reflow();\n        self.menu.show();\n        self.menu.moveRel(self.getEl(), self.isRtl() ? [\n          'br-tr',\n          'tr-br'\n        ] : [\n          'bl-tl',\n          'tl-bl'\n        ]);\n      },\n      hideMenu: function () {\n        if (this.menu) {\n          this.menu.hide();\n        }\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:value', function (e) {\n          if (self.getEl('inp').value !== e.value) {\n            self.getEl('inp').value = e.value;\n          }\n        });\n        self.state.on('change:disabled', function (e) {\n          self.getEl('inp').disabled = e.value;\n        });\n        self.state.on('change:statusLevel', function (e) {\n          var statusIconElm = self.getEl('status');\n          var prefix = self.classPrefix, value = e.value;\n          funcs.css(statusIconElm, 'display', value === 'none' ? 'none' : '');\n          funcs.toggleClass(statusIconElm, prefix + 'i-checkmark', value === 'ok');\n          funcs.toggleClass(statusIconElm, prefix + 'i-warning', value === 'warn');\n          funcs.toggleClass(statusIconElm, prefix + 'i-error', value === 'error');\n          self.classes.toggle('has-status', value !== 'none');\n          self.repaint();\n        });\n        funcs.on(self.getEl('status'), 'mouseleave', function () {\n          self.tooltip().hide();\n        });\n        self.on('cancel', function (e) {\n          if (self.menu && self.menu.visible()) {\n            e.stopPropagation();\n            self.hideMenu();\n          }\n        });\n        var focusIdx = function (idx, menu) {\n          if (menu && menu.items().length > 0) {\n            menu.items().eq(idx)[0].focus();\n          }\n        };\n        self.on('keydown', function (e) {\n          var keyCode = e.keyCode;\n          if (e.target.nodeName === 'INPUT') {\n            if (keyCode === global$d.DOWN) {\n              e.preventDefault();\n              self.fire('autocomplete');\n              focusIdx(0, self.menu);\n            } else if (keyCode === global$d.UP) {\n              e.preventDefault();\n              focusIdx(-1, self.menu);\n            }\n          }\n        });\n        return self._super();\n      },\n      remove: function () {\n        global$9(this.getEl('inp')).off();\n        if (this.menu) {\n          this.menu.remove();\n        }\n        this._super();\n      }\n    });\n\n    var ColorBox = ComboBox.extend({\n      init: function (settings) {\n        var self = this;\n        settings.spellcheck = false;\n        if (settings.onaction) {\n          settings.icon = 'none';\n        }\n        self._super(settings);\n        self.classes.add('colorbox');\n        self.on('change keyup postrender', function () {\n          self.repaintColor(self.value());\n        });\n      },\n      repaintColor: function (value) {\n        var openElm = this.getEl('open');\n        var elm = openElm ? openElm.getElementsByTagName('i')[0] : null;\n        if (elm) {\n          try {\n            elm.style.background = value;\n          } catch (ex) {\n          }\n        }\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:value', function (e) {\n          if (self.state.get('rendered')) {\n            self.repaintColor(e.value);\n          }\n        });\n        return self._super();\n      }\n    });\n\n    var PanelButton = Button.extend({\n      showPanel: function () {\n        var self = this, settings = self.settings;\n        self.classes.add('opened');\n        if (!self.panel) {\n          var panelSettings = settings.panel;\n          if (panelSettings.type) {\n            panelSettings = {\n              layout: 'grid',\n              items: panelSettings\n            };\n          }\n          panelSettings.role = panelSettings.role || 'dialog';\n          panelSettings.popover = true;\n          panelSettings.autohide = true;\n          panelSettings.ariaRoot = true;\n          self.panel = new FloatPanel(panelSettings).on('hide', function () {\n            self.classes.remove('opened');\n          }).on('cancel', function (e) {\n            e.stopPropagation();\n            self.focus();\n            self.hidePanel();\n          }).parent(self).renderTo(self.getContainerElm());\n          self.panel.fire('show');\n          self.panel.reflow();\n        } else {\n          self.panel.show();\n        }\n        var rtlRels = [\n          'bc-tc',\n          'bc-tl',\n          'bc-tr'\n        ];\n        var ltrRels = [\n          'bc-tc',\n          'bc-tr',\n          'bc-tl',\n          'tc-bc',\n          'tc-br',\n          'tc-bl'\n        ];\n        var rel = self.panel.testMoveRel(self.getEl(), settings.popoverAlign || (self.isRtl() ? rtlRels : ltrRels));\n        self.panel.classes.toggle('start', rel.substr(-1) === 'l');\n        self.panel.classes.toggle('end', rel.substr(-1) === 'r');\n        var isTop = rel.substr(0, 1) === 't';\n        self.panel.classes.toggle('bottom', !isTop);\n        self.panel.classes.toggle('top', isTop);\n        self.panel.moveRel(self.getEl(), rel);\n      },\n      hidePanel: function () {\n        var self = this;\n        if (self.panel) {\n          self.panel.hide();\n        }\n      },\n      postRender: function () {\n        var self = this;\n        self.aria('haspopup', true);\n        self.on('click', function (e) {\n          if (e.control === self) {\n            if (self.panel && self.panel.visible()) {\n              self.hidePanel();\n            } else {\n              self.showPanel();\n              self.panel.focus(!!e.aria);\n            }\n          }\n        });\n        return self._super();\n      },\n      remove: function () {\n        if (this.panel) {\n          this.panel.remove();\n          this.panel = null;\n        }\n        return this._super();\n      }\n    });\n\n    var DOM$3 = global$3.DOM;\n    var ColorButton = PanelButton.extend({\n      init: function (settings) {\n        this._super(settings);\n        this.classes.add('splitbtn');\n        this.classes.add('colorbutton');\n      },\n      color: function (color) {\n        if (color) {\n          this._color = color;\n          this.getEl('preview').style.backgroundColor = color;\n          return this;\n        }\n        return this._color;\n      },\n      resetColor: function () {\n        this._color = null;\n        this.getEl('preview').style.backgroundColor = null;\n        return this;\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, prefix = self.classPrefix, text = self.state.get('text');\n        var icon = self.settings.icon ? prefix + 'ico ' + prefix + 'i-' + self.settings.icon : '';\n        var image = self.settings.image ? ' style=\"background-image: url(\\'' + self.settings.image + '\\')\"' : '';\n        var textHtml = '';\n        if (text) {\n          self.classes.add('btn-has-text');\n          textHtml = '<span class=\"' + prefix + 'txt\">' + self.encode(text) + '</span>';\n        }\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" role=\"button\" tabindex=\"-1\" aria-haspopup=\"true\">' + '<button role=\"presentation\" hidefocus=\"1\" type=\"button\" tabindex=\"-1\">' + (icon ? '<i class=\"' + icon + '\"' + image + '></i>' : '') + '<span id=\"' + id + '-preview\" class=\"' + prefix + 'preview\"></span>' + textHtml + '</button>' + '<button type=\"button\" class=\"' + prefix + 'open\" hidefocus=\"1\" tabindex=\"-1\">' + ' <i class=\"' + prefix + 'caret\"></i>' + '</button>' + '</div>';\n      },\n      postRender: function () {\n        var self = this, onClickHandler = self.settings.onclick;\n        self.on('click', function (e) {\n          if (e.aria && e.aria.key === 'down') {\n            return;\n          }\n          if (e.control === self && !DOM$3.getParent(e.target, '.' + self.classPrefix + 'open')) {\n            e.stopImmediatePropagation();\n            onClickHandler.call(self, e);\n          }\n        });\n        delete self.settings.onclick;\n        return self._super();\n      }\n    });\n\n    var global$e = tinymce.util.Tools.resolve('tinymce.util.Color');\n\n    var ColorPicker = Widget.extend({\n      Defaults: { classes: 'widget colorpicker' },\n      init: function (settings) {\n        this._super(settings);\n      },\n      postRender: function () {\n        var self = this;\n        var color = self.color();\n        var hsv, hueRootElm, huePointElm, svRootElm, svPointElm;\n        hueRootElm = self.getEl('h');\n        huePointElm = self.getEl('hp');\n        svRootElm = self.getEl('sv');\n        svPointElm = self.getEl('svp');\n        function getPos(elm, event) {\n          var pos = funcs.getPos(elm);\n          var x, y;\n          x = event.pageX - pos.x;\n          y = event.pageY - pos.y;\n          x = Math.max(0, Math.min(x / elm.clientWidth, 1));\n          y = Math.max(0, Math.min(y / elm.clientHeight, 1));\n          return {\n            x: x,\n            y: y\n          };\n        }\n        function updateColor(hsv, hueUpdate) {\n          var hue = (360 - hsv.h) / 360;\n          funcs.css(huePointElm, { top: hue * 100 + '%' });\n          if (!hueUpdate) {\n            funcs.css(svPointElm, {\n              left: hsv.s + '%',\n              top: 100 - hsv.v + '%'\n            });\n          }\n          svRootElm.style.background = global$e({\n            s: 100,\n            v: 100,\n            h: hsv.h\n          }).toHex();\n          self.color().parse({\n            s: hsv.s,\n            v: hsv.v,\n            h: hsv.h\n          });\n        }\n        function updateSaturationAndValue(e) {\n          var pos;\n          pos = getPos(svRootElm, e);\n          hsv.s = pos.x * 100;\n          hsv.v = (1 - pos.y) * 100;\n          updateColor(hsv);\n          self.fire('change');\n        }\n        function updateHue(e) {\n          var pos;\n          pos = getPos(hueRootElm, e);\n          hsv = color.toHsv();\n          hsv.h = (1 - pos.y) * 360;\n          updateColor(hsv, true);\n          self.fire('change');\n        }\n        self._repaint = function () {\n          hsv = color.toHsv();\n          updateColor(hsv);\n        };\n        self._super();\n        self._svdraghelper = new DragHelper(self._id + '-sv', {\n          start: updateSaturationAndValue,\n          drag: updateSaturationAndValue\n        });\n        self._hdraghelper = new DragHelper(self._id + '-h', {\n          start: updateHue,\n          drag: updateHue\n        });\n        self._repaint();\n      },\n      rgb: function () {\n        return this.color().toRgb();\n      },\n      value: function (value) {\n        var self = this;\n        if (arguments.length) {\n          self.color().parse(value);\n          if (self._rendered) {\n            self._repaint();\n          }\n        } else {\n          return self.color().toHex();\n        }\n      },\n      color: function () {\n        if (!this._color) {\n          this._color = global$e();\n        }\n        return this._color;\n      },\n      renderHtml: function () {\n        var self = this;\n        var id = self._id;\n        var prefix = self.classPrefix;\n        var hueHtml;\n        var stops = '#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000';\n        function getOldIeFallbackHtml() {\n          var i, l, html = '', gradientPrefix, stopsList;\n          gradientPrefix = 'filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=';\n          stopsList = stops.split(',');\n          for (i = 0, l = stopsList.length - 1; i < l; i++) {\n            html += '<div class=\"' + prefix + 'colorpicker-h-chunk\" style=\"' + 'height:' + 100 / l + '%;' + gradientPrefix + stopsList[i] + ',endColorstr=' + stopsList[i + 1] + ');' + '-ms-' + gradientPrefix + stopsList[i] + ',endColorstr=' + stopsList[i + 1] + ')' + '\"></div>';\n          }\n          return html;\n        }\n        var gradientCssText = 'background: -ms-linear-gradient(top,' + stops + ');' + 'background: linear-gradient(to bottom,' + stops + ');';\n        hueHtml = '<div id=\"' + id + '-h\" class=\"' + prefix + 'colorpicker-h\" style=\"' + gradientCssText + '\">' + getOldIeFallbackHtml() + '<div id=\"' + id + '-hp\" class=\"' + prefix + 'colorpicker-h-marker\"></div>' + '</div>';\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\">' + '<div id=\"' + id + '-sv\" class=\"' + prefix + 'colorpicker-sv\">' + '<div class=\"' + prefix + 'colorpicker-overlay1\">' + '<div class=\"' + prefix + 'colorpicker-overlay2\">' + '<div id=\"' + id + '-svp\" class=\"' + prefix + 'colorpicker-selector1\">' + '<div class=\"' + prefix + 'colorpicker-selector2\"></div>' + '</div>' + '</div>' + '</div>' + '</div>' + hueHtml + '</div>';\n      }\n    });\n\n    var DropZone = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        settings = global$2.extend({\n          height: 100,\n          text: 'Drop an image here',\n          multiple: false,\n          accept: null\n        }, settings);\n        self._super(settings);\n        self.classes.add('dropzone');\n        if (settings.multiple) {\n          self.classes.add('multiple');\n        }\n      },\n      renderHtml: function () {\n        var self = this;\n        var attrs, elm;\n        var cfg = self.settings;\n        attrs = {\n          id: self._id,\n          hidefocus: '1'\n        };\n        elm = funcs.create('div', attrs, '<span>' + this.translate(cfg.text) + '</span>');\n        if (cfg.height) {\n          funcs.css(elm, 'height', cfg.height + 'px');\n        }\n        if (cfg.width) {\n          funcs.css(elm, 'width', cfg.width + 'px');\n        }\n        elm.className = self.classes;\n        return elm.outerHTML;\n      },\n      postRender: function () {\n        var self = this;\n        var toggleDragClass = function (e) {\n          e.preventDefault();\n          self.classes.toggle('dragenter');\n          self.getEl().className = self.classes;\n        };\n        var filter = function (files) {\n          var accept = self.settings.accept;\n          if (typeof accept !== 'string') {\n            return files;\n          }\n          var re = new RegExp('(' + accept.split(/\\s*,\\s*/).join('|') + ')$', 'i');\n          return global$2.grep(files, function (file) {\n            return re.test(file.name);\n          });\n        };\n        self._super();\n        self.$el.on('dragover', function (e) {\n          e.preventDefault();\n        });\n        self.$el.on('dragenter', toggleDragClass);\n        self.$el.on('dragleave', toggleDragClass);\n        self.$el.on('drop', function (e) {\n          e.preventDefault();\n          if (self.state.get('disabled')) {\n            return;\n          }\n          var files = filter(e.dataTransfer.files);\n          self.value = function () {\n            if (!files.length) {\n              return null;\n            } else if (self.settings.multiple) {\n              return files;\n            } else {\n              return files[0];\n            }\n          };\n          if (files.length) {\n            self.fire('change', e);\n          }\n        });\n      },\n      remove: function () {\n        this.$el.off();\n        this._super();\n      }\n    });\n\n    var Path = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        if (!settings.delimiter) {\n          settings.delimiter = '\\xBB';\n        }\n        self._super(settings);\n        self.classes.add('path');\n        self.canFocus = true;\n        self.on('click', function (e) {\n          var index;\n          var target = e.target;\n          if (index = target.getAttribute('data-index')) {\n            self.fire('select', {\n              value: self.row()[index],\n              index: index\n            });\n          }\n        });\n        self.row(self.settings.row);\n      },\n      focus: function () {\n        var self = this;\n        self.getEl().firstChild.focus();\n        return self;\n      },\n      row: function (row) {\n        if (!arguments.length) {\n          return this.state.get('row');\n        }\n        this.state.set('row', row);\n        return this;\n      },\n      renderHtml: function () {\n        var self = this;\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\">' + self._getDataPathHtml(self.state.get('row')) + '</div>';\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:row', function (e) {\n          self.innerHtml(self._getDataPathHtml(e.value));\n        });\n        return self._super();\n      },\n      _getDataPathHtml: function (data) {\n        var self = this;\n        var parts = data || [];\n        var i, l, html = '';\n        var prefix = self.classPrefix;\n        for (i = 0, l = parts.length; i < l; i++) {\n          html += (i > 0 ? '<div class=\"' + prefix + 'divider\" aria-hidden=\"true\"> ' + self.settings.delimiter + ' </div>' : '') + '<div role=\"button\" class=\"' + prefix + 'path-item' + (i === l - 1 ? ' ' + prefix + 'last' : '') + '\" data-index=\"' + i + '\" tabindex=\"-1\" id=\"' + self._id + '-' + i + '\" aria-level=\"' + (i + 1) + '\">' + parts[i].name + '</div>';\n        }\n        if (!html) {\n          html = '<div class=\"' + prefix + 'path-item\">\\xA0</div>';\n        }\n        return html;\n      }\n    });\n\n    var ElementPath = Path.extend({\n      postRender: function () {\n        var self = this, editor = self.settings.editor;\n        function isHidden(elm) {\n          if (elm.nodeType === 1) {\n            if (elm.nodeName === 'BR' || !!elm.getAttribute('data-mce-bogus')) {\n              return true;\n            }\n            if (elm.getAttribute('data-mce-type') === 'bookmark') {\n              return true;\n            }\n          }\n          return false;\n        }\n        if (editor.settings.elementpath !== false) {\n          self.on('select', function (e) {\n            editor.focus();\n            editor.selection.select(this.row()[e.index].element);\n            editor.nodeChanged();\n          });\n          editor.on('nodeChange', function (e) {\n            var outParents = [];\n            var parents = e.parents;\n            var i = parents.length;\n            while (i--) {\n              if (parents[i].nodeType === 1 && !isHidden(parents[i])) {\n                var args = editor.fire('ResolveName', {\n                  name: parents[i].nodeName.toLowerCase(),\n                  target: parents[i]\n                });\n                if (!args.isDefaultPrevented()) {\n                  outParents.push({\n                    name: args.name,\n                    element: parents[i]\n                  });\n                }\n                if (args.isPropagationStopped()) {\n                  break;\n                }\n              }\n            }\n            self.row(outParents);\n          });\n        }\n        return self._super();\n      }\n    });\n\n    var FormItem = Container.extend({\n      Defaults: {\n        layout: 'flex',\n        align: 'center',\n        defaults: { flex: 1 }\n      },\n      renderHtml: function () {\n        var self = this, layout = self._layout, prefix = self.classPrefix;\n        self.classes.add('formitem');\n        layout.preRender(self);\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\" hidefocus=\"1\" tabindex=\"-1\">' + (self.settings.title ? '<div id=\"' + self._id + '-title\" class=\"' + prefix + 'title\">' + self.settings.title + '</div>' : '') + '<div id=\"' + self._id + '-body\" class=\"' + self.bodyClasses + '\">' + (self.settings.html || '') + layout.renderHtml(self) + '</div>' + '</div>';\n      }\n    });\n\n    var Form = Container.extend({\n      Defaults: {\n        containerCls: 'form',\n        layout: 'flex',\n        direction: 'column',\n        align: 'stretch',\n        flex: 1,\n        padding: 15,\n        labelGap: 30,\n        spacing: 10,\n        callbacks: {\n          submit: function () {\n            this.submit();\n          }\n        }\n      },\n      preRender: function () {\n        var self = this, items = self.items();\n        if (!self.settings.formItemDefaults) {\n          self.settings.formItemDefaults = {\n            layout: 'flex',\n            autoResize: 'overflow',\n            defaults: { flex: 1 }\n          };\n        }\n        items.each(function (ctrl) {\n          var formItem;\n          var label = ctrl.settings.label;\n          if (label) {\n            formItem = new FormItem(global$2.extend({\n              items: {\n                type: 'label',\n                id: ctrl._id + '-l',\n                text: label,\n                flex: 0,\n                forId: ctrl._id,\n                disabled: ctrl.disabled()\n              }\n            }, self.settings.formItemDefaults));\n            formItem.type = 'formitem';\n            ctrl.aria('labelledby', ctrl._id + '-l');\n            if (typeof ctrl.settings.flex === 'undefined') {\n              ctrl.settings.flex = 1;\n            }\n            self.replace(ctrl, formItem);\n            formItem.add(ctrl);\n          }\n        });\n      },\n      submit: function () {\n        return this.fire('submit', { data: this.toJSON() });\n      },\n      postRender: function () {\n        var self = this;\n        self._super();\n        self.fromJSON(self.settings.data);\n      },\n      bindStates: function () {\n        var self = this;\n        self._super();\n        function recalcLabels() {\n          var maxLabelWidth = 0;\n          var labels = [];\n          var i, labelGap, items;\n          if (self.settings.labelGapCalc === false) {\n            return;\n          }\n          if (self.settings.labelGapCalc === 'children') {\n            items = self.find('formitem');\n          } else {\n            items = self.items();\n          }\n          items.filter('formitem').each(function (item) {\n            var labelCtrl = item.items()[0], labelWidth = labelCtrl.getEl().clientWidth;\n            maxLabelWidth = labelWidth > maxLabelWidth ? labelWidth : maxLabelWidth;\n            labels.push(labelCtrl);\n          });\n          labelGap = self.settings.labelGap || 0;\n          i = labels.length;\n          while (i--) {\n            labels[i].settings.minWidth = maxLabelWidth + labelGap;\n          }\n        }\n        self.on('show', recalcLabels);\n        recalcLabels();\n      }\n    });\n\n    var FieldSet = Form.extend({\n      Defaults: {\n        containerCls: 'fieldset',\n        layout: 'flex',\n        direction: 'column',\n        align: 'stretch',\n        flex: 1,\n        padding: '25 15 5 15',\n        labelGap: 30,\n        spacing: 10,\n        border: 1\n      },\n      renderHtml: function () {\n        var self = this, layout = self._layout, prefix = self.classPrefix;\n        self.preRender();\n        layout.preRender(self);\n        return '<fieldset id=\"' + self._id + '\" class=\"' + self.classes + '\" hidefocus=\"1\" tabindex=\"-1\">' + (self.settings.title ? '<legend id=\"' + self._id + '-title\" class=\"' + prefix + 'fieldset-title\">' + self.settings.title + '</legend>' : '') + '<div id=\"' + self._id + '-body\" class=\"' + self.bodyClasses + '\">' + (self.settings.html || '') + layout.renderHtml(self) + '</div>' + '</fieldset>';\n      }\n    });\n\n    var unique$1 = 0;\n    var generate = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique$1++;\n      return prefix + '_' + random + unique$1 + String(time);\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n    var Global$1 = { getOrDie: getOrDie };\n\n    var Immutable = function () {\n      var fields = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n      return function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var node = function () {\n      var f = Global$1.getOrDie('Node');\n      return f;\n    };\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie, current),\n        isOpera: isBrowser(opera, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows$1 = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows$1, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows$1),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isAndroid3 = os.isAndroid() && os.version.major === 3;\n      var isAndroid4 = os.isAndroid() && os.version.major === 4;\n      var isTablet = isiPad || isAndroid3 || isAndroid4 && /mobile/i.test(userAgent) === true;\n      var isTouch = os.isiOS() || os.isAndroid();\n      var isPhone = isTouch && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var contains = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains(uastring, 'edge/') && contains(uastring, 'chrome') && contains(uastring, 'safari') && contains(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'chrome') && !contains(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'msie') || contains(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains(uastring, 'safari') || contains(uastring, 'mobile/')) && contains(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains(uastring, 'iphone') || contains(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var detect$3 = cached(function () {\n      var userAgent = domGlobals.navigator.userAgent;\n      return PlatformDetection.detect(userAgent);\n    });\n    var PlatformDetection$1 = { detect: detect$3 };\n\n    var ELEMENT$1 = ELEMENT;\n    var DOCUMENT$1 = DOCUMENT;\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT$1 && dom.nodeType !== DOCUMENT$1 || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), Element.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? Option.none() : Option.from(base.querySelector(selector)).map(Element.fromDom);\n    };\n\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = PlatformDetection$1.detect().browser;\n    var contains$1 = browser.isIE() ? ieContains : regularContains;\n\n    var spot = Immutable('element', 'offset');\n\n    var descendants = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var trim = global$2.trim;\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (node && node.nodeType === 1) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var create = function (type, title, url, level, attach) {\n      return {\n        type: type,\n        title: title,\n        url: url,\n        level: level,\n        attach: attach\n      };\n    };\n    var isChildOfContentEditableTrue = function (node) {\n      while (node = node.parentNode) {\n        var value = node.contentEditable;\n        if (value && value !== 'inherit') {\n          return isContentEditableTrue(node);\n        }\n      }\n      return false;\n    };\n    var select = function (selector, root) {\n      return map(descendants(Element.fromDom(root), selector), function (element) {\n        return element.dom();\n      });\n    };\n    var getElementText = function (elm) {\n      return elm.innerText || elm.textContent;\n    };\n    var getOrGenerateId = function (elm) {\n      return elm.id ? elm.id : generate('h');\n    };\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName === 'A' && (elm.id || elm.name);\n    };\n    var isValidAnchor = function (elm) {\n      return isAnchor(elm) && isEditable(elm);\n    };\n    var isHeader = function (elm) {\n      return elm && /^(H[1-6])$/.test(elm.nodeName);\n    };\n    var isEditable = function (elm) {\n      return isChildOfContentEditableTrue(elm) && !isContentEditableFalse(elm);\n    };\n    var isValidHeader = function (elm) {\n      return isHeader(elm) && isEditable(elm);\n    };\n    var getLevel = function (elm) {\n      return isHeader(elm) ? parseInt(elm.nodeName.substr(1), 10) : 0;\n    };\n    var headerTarget = function (elm) {\n      var headerId = getOrGenerateId(elm);\n      var attach = function () {\n        elm.id = headerId;\n      };\n      return create('header', getElementText(elm), '#' + headerId, getLevel(elm), attach);\n    };\n    var anchorTarget = function (elm) {\n      var anchorId = elm.id || elm.name;\n      var anchorText = getElementText(elm);\n      return create('anchor', anchorText ? anchorText : '#' + anchorId, '#' + anchorId, 0, noop);\n    };\n    var getHeaderTargets = function (elms) {\n      return map(filter(elms, isValidHeader), headerTarget);\n    };\n    var getAnchorTargets = function (elms) {\n      return map(filter(elms, isValidAnchor), anchorTarget);\n    };\n    var getTargetElements = function (elm) {\n      var elms = select('h1,h2,h3,h4,h5,h6,a:not([href])', elm);\n      return elms;\n    };\n    var hasTitle = function (target) {\n      return trim(target.title).length > 0;\n    };\n    var find$2 = function (elm) {\n      var elms = getTargetElements(elm);\n      return filter(getHeaderTargets(elms).concat(getAnchorTargets(elms)), hasTitle);\n    };\n    var LinkTargets = { find: find$2 };\n\n    var getActiveEditor = function () {\n      return window.tinymce ? window.tinymce.activeEditor : global$1.activeEditor;\n    };\n    var history = {};\n    var HISTORY_LENGTH = 5;\n    var clearHistory = function () {\n      history = {};\n    };\n    var toMenuItem = function (target) {\n      return {\n        title: target.title,\n        value: {\n          title: { raw: target.title },\n          url: target.url,\n          attach: target.attach\n        }\n      };\n    };\n    var toMenuItems = function (targets) {\n      return global$2.map(targets, toMenuItem);\n    };\n    var staticMenuItem = function (title, url) {\n      return {\n        title: title,\n        value: {\n          title: title,\n          url: url,\n          attach: noop\n        }\n      };\n    };\n    var isUniqueUrl = function (url, targets) {\n      var foundTarget = exists(targets, function (target) {\n        return target.url === url;\n      });\n      return !foundTarget;\n    };\n    var getSetting = function (editorSettings, name, defaultValue) {\n      var value = name in editorSettings ? editorSettings[name] : defaultValue;\n      return value === false ? null : value;\n    };\n    var createMenuItems = function (term, targets, fileType, editorSettings) {\n      var separator = { title: '-' };\n      var fromHistoryMenuItems = function (history) {\n        var historyItems = history.hasOwnProperty(fileType) ? history[fileType] : [];\n        var uniqueHistory = filter(historyItems, function (url) {\n          return isUniqueUrl(url, targets);\n        });\n        return global$2.map(uniqueHistory, function (url) {\n          return {\n            title: url,\n            value: {\n              title: url,\n              url: url,\n              attach: noop\n            }\n          };\n        });\n      };\n      var fromMenuItems = function (type) {\n        var filteredTargets = filter(targets, function (target) {\n          return target.type === type;\n        });\n        return toMenuItems(filteredTargets);\n      };\n      var anchorMenuItems = function () {\n        var anchorMenuItems = fromMenuItems('anchor');\n        var topAnchor = getSetting(editorSettings, 'anchor_top', '#top');\n        var bottomAchor = getSetting(editorSettings, 'anchor_bottom', '#bottom');\n        if (topAnchor !== null) {\n          anchorMenuItems.unshift(staticMenuItem('<top>', topAnchor));\n        }\n        if (bottomAchor !== null) {\n          anchorMenuItems.push(staticMenuItem('<bottom>', bottomAchor));\n        }\n        return anchorMenuItems;\n      };\n      var join = function (items) {\n        return foldl(items, function (a, b) {\n          var bothEmpty = a.length === 0 || b.length === 0;\n          return bothEmpty ? a.concat(b) : a.concat(separator, b);\n        }, []);\n      };\n      if (editorSettings.typeahead_urls === false) {\n        return [];\n      }\n      return fileType === 'file' ? join([\n        filterByQuery(term, fromHistoryMenuItems(history)),\n        filterByQuery(term, fromMenuItems('header')),\n        filterByQuery(term, anchorMenuItems())\n      ]) : filterByQuery(term, fromHistoryMenuItems(history));\n    };\n    var addToHistory = function (url, fileType) {\n      var items = history[fileType];\n      if (!/^https?/.test(url)) {\n        return;\n      }\n      if (items) {\n        if (indexOf(items, url).isNone()) {\n          history[fileType] = items.slice(0, HISTORY_LENGTH).concat(url);\n        }\n      } else {\n        history[fileType] = [url];\n      }\n    };\n    var filterByQuery = function (term, menuItems) {\n      var lowerCaseTerm = term.toLowerCase();\n      var result = global$2.grep(menuItems, function (item) {\n        return item.title.toLowerCase().indexOf(lowerCaseTerm) !== -1;\n      });\n      return result.length === 1 && result[0].title === term ? [] : result;\n    };\n    var getTitle = function (linkDetails) {\n      var title = linkDetails.title;\n      return title.raw ? title.raw : title;\n    };\n    var setupAutoCompleteHandler = function (ctrl, editorSettings, bodyElm, fileType) {\n      var autocomplete = function (term) {\n        var linkTargets = LinkTargets.find(bodyElm);\n        var menuItems = createMenuItems(term, linkTargets, fileType, editorSettings);\n        ctrl.showAutoComplete(menuItems, term);\n      };\n      ctrl.on('autocomplete', function () {\n        autocomplete(ctrl.value());\n      });\n      ctrl.on('selectitem', function (e) {\n        var linkDetails = e.value;\n        ctrl.value(linkDetails.url);\n        var title = getTitle(linkDetails);\n        if (fileType === 'image') {\n          ctrl.fire('change', {\n            meta: {\n              alt: title,\n              attach: linkDetails.attach\n            }\n          });\n        } else {\n          ctrl.fire('change', {\n            meta: {\n              text: title,\n              attach: linkDetails.attach\n            }\n          });\n        }\n        ctrl.focus();\n      });\n      ctrl.on('click', function (e) {\n        if (ctrl.value().length === 0 && e.target.nodeName === 'INPUT') {\n          autocomplete('');\n        }\n      });\n      ctrl.on('PostRender', function () {\n        ctrl.getRoot().on('submit', function (e) {\n          if (!e.isDefaultPrevented()) {\n            addToHistory(ctrl.value(), fileType);\n          }\n        });\n      });\n    };\n    var statusToUiState = function (result) {\n      var status = result.status, message = result.message;\n      if (status === 'valid') {\n        return {\n          status: 'ok',\n          message: message\n        };\n      } else if (status === 'unknown') {\n        return {\n          status: 'warn',\n          message: message\n        };\n      } else if (status === 'invalid') {\n        return {\n          status: 'warn',\n          message: message\n        };\n      } else {\n        return {\n          status: 'none',\n          message: ''\n        };\n      }\n    };\n    var setupLinkValidatorHandler = function (ctrl, editorSettings, fileType) {\n      var validatorHandler = editorSettings.filepicker_validator_handler;\n      if (validatorHandler) {\n        var validateUrl_1 = function (url) {\n          if (url.length === 0) {\n            ctrl.statusLevel('none');\n            return;\n          }\n          validatorHandler({\n            url: url,\n            type: fileType\n          }, function (result) {\n            var uiState = statusToUiState(result);\n            ctrl.statusMessage(uiState.message);\n            ctrl.statusLevel(uiState.status);\n          });\n        };\n        ctrl.state.on('change:value', function (e) {\n          validateUrl_1(e.value);\n        });\n      }\n    };\n    var FilePicker = ComboBox.extend({\n      Statics: { clearHistory: clearHistory },\n      init: function (settings) {\n        var self = this, editor = getActiveEditor(), editorSettings = editor.settings;\n        var actionCallback, fileBrowserCallback, fileBrowserCallbackTypes;\n        var fileType = settings.filetype;\n        settings.spellcheck = false;\n        fileBrowserCallbackTypes = editorSettings.file_picker_types || editorSettings.file_browser_callback_types;\n        if (fileBrowserCallbackTypes) {\n          fileBrowserCallbackTypes = global$2.makeMap(fileBrowserCallbackTypes, /[, ]/);\n        }\n        if (!fileBrowserCallbackTypes || fileBrowserCallbackTypes[fileType]) {\n          fileBrowserCallback = editorSettings.file_picker_callback;\n          if (fileBrowserCallback && (!fileBrowserCallbackTypes || fileBrowserCallbackTypes[fileType])) {\n            actionCallback = function () {\n              var meta = self.fire('beforecall').meta;\n              meta = global$2.extend({ filetype: fileType }, meta);\n              fileBrowserCallback.call(editor, function (value, meta) {\n                self.value(value).fire('change', { meta: meta });\n              }, self.value(), meta);\n            };\n          } else {\n            fileBrowserCallback = editorSettings.file_browser_callback;\n            if (fileBrowserCallback && (!fileBrowserCallbackTypes || fileBrowserCallbackTypes[fileType])) {\n              actionCallback = function () {\n                fileBrowserCallback(self.getEl('inp').id, self.value(), fileType, window);\n              };\n            }\n          }\n        }\n        if (actionCallback) {\n          settings.icon = 'browse';\n          settings.onaction = actionCallback;\n        }\n        self._super(settings);\n        self.classes.add('filepicker');\n        setupAutoCompleteHandler(self, editorSettings, editor.getBody(), fileType);\n        setupLinkValidatorHandler(self, editorSettings, fileType);\n      }\n    });\n\n    var FitLayout = AbsoluteLayout.extend({\n      recalc: function (container) {\n        var contLayoutRect = container.layoutRect(), paddingBox = container.paddingBox;\n        container.items().filter(':visible').each(function (ctrl) {\n          ctrl.layoutRect({\n            x: paddingBox.left,\n            y: paddingBox.top,\n            w: contLayoutRect.innerW - paddingBox.right - paddingBox.left,\n            h: contLayoutRect.innerH - paddingBox.top - paddingBox.bottom\n          });\n          if (ctrl.recalc) {\n            ctrl.recalc();\n          }\n        });\n      }\n    });\n\n    var FlexLayout = AbsoluteLayout.extend({\n      recalc: function (container) {\n        var i, l, items, contLayoutRect, contPaddingBox, contSettings, align, pack, spacing, totalFlex, availableSpace, direction;\n        var ctrl, ctrlLayoutRect, ctrlSettings, flex;\n        var maxSizeItems = [];\n        var size, maxSize, ratio, rect, pos, maxAlignEndPos;\n        var sizeName, minSizeName, posName, maxSizeName, beforeName, innerSizeName, deltaSizeName, contentSizeName;\n        var alignAxisName, alignInnerSizeName, alignSizeName, alignMinSizeName, alignBeforeName, alignAfterName;\n        var alignDeltaSizeName, alignContentSizeName;\n        var max = Math.max, min = Math.min;\n        items = container.items().filter(':visible');\n        contLayoutRect = container.layoutRect();\n        contPaddingBox = container.paddingBox;\n        contSettings = container.settings;\n        direction = container.isRtl() ? contSettings.direction || 'row-reversed' : contSettings.direction;\n        align = contSettings.align;\n        pack = container.isRtl() ? contSettings.pack || 'end' : contSettings.pack;\n        spacing = contSettings.spacing || 0;\n        if (direction === 'row-reversed' || direction === 'column-reverse') {\n          items = items.set(items.toArray().reverse());\n          direction = direction.split('-')[0];\n        }\n        if (direction === 'column') {\n          posName = 'y';\n          sizeName = 'h';\n          minSizeName = 'minH';\n          maxSizeName = 'maxH';\n          innerSizeName = 'innerH';\n          beforeName = 'top';\n          deltaSizeName = 'deltaH';\n          contentSizeName = 'contentH';\n          alignBeforeName = 'left';\n          alignSizeName = 'w';\n          alignAxisName = 'x';\n          alignInnerSizeName = 'innerW';\n          alignMinSizeName = 'minW';\n          alignAfterName = 'right';\n          alignDeltaSizeName = 'deltaW';\n          alignContentSizeName = 'contentW';\n        } else {\n          posName = 'x';\n          sizeName = 'w';\n          minSizeName = 'minW';\n          maxSizeName = 'maxW';\n          innerSizeName = 'innerW';\n          beforeName = 'left';\n          deltaSizeName = 'deltaW';\n          contentSizeName = 'contentW';\n          alignBeforeName = 'top';\n          alignSizeName = 'h';\n          alignAxisName = 'y';\n          alignInnerSizeName = 'innerH';\n          alignMinSizeName = 'minH';\n          alignAfterName = 'bottom';\n          alignDeltaSizeName = 'deltaH';\n          alignContentSizeName = 'contentH';\n        }\n        availableSpace = contLayoutRect[innerSizeName] - contPaddingBox[beforeName] - contPaddingBox[beforeName];\n        maxAlignEndPos = totalFlex = 0;\n        for (i = 0, l = items.length; i < l; i++) {\n          ctrl = items[i];\n          ctrlLayoutRect = ctrl.layoutRect();\n          ctrlSettings = ctrl.settings;\n          flex = ctrlSettings.flex;\n          availableSpace -= i < l - 1 ? spacing : 0;\n          if (flex > 0) {\n            totalFlex += flex;\n            if (ctrlLayoutRect[maxSizeName]) {\n              maxSizeItems.push(ctrl);\n            }\n            ctrlLayoutRect.flex = flex;\n          }\n          availableSpace -= ctrlLayoutRect[minSizeName];\n          size = contPaddingBox[alignBeforeName] + ctrlLayoutRect[alignMinSizeName] + contPaddingBox[alignAfterName];\n          if (size > maxAlignEndPos) {\n            maxAlignEndPos = size;\n          }\n        }\n        rect = {};\n        if (availableSpace < 0) {\n          rect[minSizeName] = contLayoutRect[minSizeName] - availableSpace + contLayoutRect[deltaSizeName];\n        } else {\n          rect[minSizeName] = contLayoutRect[innerSizeName] - availableSpace + contLayoutRect[deltaSizeName];\n        }\n        rect[alignMinSizeName] = maxAlignEndPos + contLayoutRect[alignDeltaSizeName];\n        rect[contentSizeName] = contLayoutRect[innerSizeName] - availableSpace;\n        rect[alignContentSizeName] = maxAlignEndPos;\n        rect.minW = min(rect.minW, contLayoutRect.maxW);\n        rect.minH = min(rect.minH, contLayoutRect.maxH);\n        rect.minW = max(rect.minW, contLayoutRect.startMinWidth);\n        rect.minH = max(rect.minH, contLayoutRect.startMinHeight);\n        if (contLayoutRect.autoResize && (rect.minW !== contLayoutRect.minW || rect.minH !== contLayoutRect.minH)) {\n          rect.w = rect.minW;\n          rect.h = rect.minH;\n          container.layoutRect(rect);\n          this.recalc(container);\n          if (container._lastRect === null) {\n            var parentCtrl = container.parent();\n            if (parentCtrl) {\n              parentCtrl._lastRect = null;\n              parentCtrl.recalc();\n            }\n          }\n          return;\n        }\n        ratio = availableSpace / totalFlex;\n        for (i = 0, l = maxSizeItems.length; i < l; i++) {\n          ctrl = maxSizeItems[i];\n          ctrlLayoutRect = ctrl.layoutRect();\n          maxSize = ctrlLayoutRect[maxSizeName];\n          size = ctrlLayoutRect[minSizeName] + ctrlLayoutRect.flex * ratio;\n          if (size > maxSize) {\n            availableSpace -= ctrlLayoutRect[maxSizeName] - ctrlLayoutRect[minSizeName];\n            totalFlex -= ctrlLayoutRect.flex;\n            ctrlLayoutRect.flex = 0;\n            ctrlLayoutRect.maxFlexSize = maxSize;\n          } else {\n            ctrlLayoutRect.maxFlexSize = 0;\n          }\n        }\n        ratio = availableSpace / totalFlex;\n        pos = contPaddingBox[beforeName];\n        rect = {};\n        if (totalFlex === 0) {\n          if (pack === 'end') {\n            pos = availableSpace + contPaddingBox[beforeName];\n          } else if (pack === 'center') {\n            pos = Math.round(contLayoutRect[innerSizeName] / 2 - (contLayoutRect[innerSizeName] - availableSpace) / 2) + contPaddingBox[beforeName];\n            if (pos < 0) {\n              pos = contPaddingBox[beforeName];\n            }\n          } else if (pack === 'justify') {\n            pos = contPaddingBox[beforeName];\n            spacing = Math.floor(availableSpace / (items.length - 1));\n          }\n        }\n        rect[alignAxisName] = contPaddingBox[alignBeforeName];\n        for (i = 0, l = items.length; i < l; i++) {\n          ctrl = items[i];\n          ctrlLayoutRect = ctrl.layoutRect();\n          size = ctrlLayoutRect.maxFlexSize || ctrlLayoutRect[minSizeName];\n          if (align === 'center') {\n            rect[alignAxisName] = Math.round(contLayoutRect[alignInnerSizeName] / 2 - ctrlLayoutRect[alignSizeName] / 2);\n          } else if (align === 'stretch') {\n            rect[alignSizeName] = max(ctrlLayoutRect[alignMinSizeName] || 0, contLayoutRect[alignInnerSizeName] - contPaddingBox[alignBeforeName] - contPaddingBox[alignAfterName]);\n            rect[alignAxisName] = contPaddingBox[alignBeforeName];\n          } else if (align === 'end') {\n            rect[alignAxisName] = contLayoutRect[alignInnerSizeName] - ctrlLayoutRect[alignSizeName] - contPaddingBox.top;\n          }\n          if (ctrlLayoutRect.flex > 0) {\n            size += ctrlLayoutRect.flex * ratio;\n          }\n          rect[sizeName] = size;\n          rect[posName] = pos;\n          ctrl.layoutRect(rect);\n          if (ctrl.recalc) {\n            ctrl.recalc();\n          }\n          pos += size + spacing;\n        }\n      }\n    });\n\n    var FlowLayout = Layout.extend({\n      Defaults: {\n        containerClass: 'flow-layout',\n        controlClass: 'flow-layout-item',\n        endClass: 'break'\n      },\n      recalc: function (container) {\n        container.items().filter(':visible').each(function (ctrl) {\n          if (ctrl.recalc) {\n            ctrl.recalc();\n          }\n        });\n      },\n      isNative: function () {\n        return true;\n      }\n    });\n\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n\n    var toggleFormat = function (editor, fmt) {\n      return function () {\n        editor.execCommand('mceToggleFormat', false, fmt);\n      };\n    };\n    var addFormatChangedListener = function (editor, name, changed) {\n      var handler = function (state) {\n        changed(state, name);\n      };\n      if (editor.formatter) {\n        editor.formatter.formatChanged(name, handler);\n      } else {\n        editor.on('init', function () {\n          editor.formatter.formatChanged(name, handler);\n        });\n      }\n    };\n    var postRenderFormatToggle = function (editor, name) {\n      return function (e) {\n        addFormatChangedListener(editor, name, function (state) {\n          e.control.active(state);\n        });\n      };\n    };\n\n    var register = function (editor) {\n      var alignFormats = [\n        'alignleft',\n        'aligncenter',\n        'alignright',\n        'alignjustify'\n      ];\n      var defaultAlign = 'alignleft';\n      var alignMenuItems = [\n        {\n          text: 'Left',\n          icon: 'alignleft',\n          onclick: toggleFormat(editor, 'alignleft')\n        },\n        {\n          text: 'Center',\n          icon: 'aligncenter',\n          onclick: toggleFormat(editor, 'aligncenter')\n        },\n        {\n          text: 'Right',\n          icon: 'alignright',\n          onclick: toggleFormat(editor, 'alignright')\n        },\n        {\n          text: 'Justify',\n          icon: 'alignjustify',\n          onclick: toggleFormat(editor, 'alignjustify')\n        }\n      ];\n      editor.addMenuItem('align', {\n        text: 'Align',\n        menu: alignMenuItems\n      });\n      editor.addButton('align', {\n        type: 'menubutton',\n        icon: defaultAlign,\n        menu: alignMenuItems,\n        onShowMenu: function (e) {\n          var menu = e.control.menu;\n          global$2.each(alignFormats, function (formatName, idx) {\n            menu.items().eq(idx).each(function (item) {\n              return item.active(editor.formatter.match(formatName));\n            });\n          });\n        },\n        onPostRender: function (e) {\n          var ctrl = e.control;\n          global$2.each(alignFormats, function (formatName, idx) {\n            addFormatChangedListener(editor, formatName, function (state) {\n              ctrl.icon(defaultAlign);\n              if (state) {\n                ctrl.icon(formatName);\n              }\n            });\n          });\n        }\n      });\n      global$2.each({\n        alignleft: [\n          'Align left',\n          'JustifyLeft'\n        ],\n        aligncenter: [\n          'Align center',\n          'JustifyCenter'\n        ],\n        alignright: [\n          'Align right',\n          'JustifyRight'\n        ],\n        alignjustify: [\n          'Justify',\n          'JustifyFull'\n        ],\n        alignnone: [\n          'No alignment',\n          'JustifyNone'\n        ]\n      }, function (item, name) {\n        editor.addButton(name, {\n          active: false,\n          tooltip: item[0],\n          cmd: item[1],\n          onPostRender: postRenderFormatToggle(editor, name)\n        });\n      });\n    };\n    var Align = { register: register };\n\n    var getFirstFont = function (fontFamily) {\n      return fontFamily ? fontFamily.split(',')[0] : '';\n    };\n    var findMatchingValue = function (items, fontFamily) {\n      var font = fontFamily ? fontFamily.toLowerCase() : '';\n      var value;\n      global$2.each(items, function (item) {\n        if (item.value.toLowerCase() === font) {\n          value = item.value;\n        }\n      });\n      global$2.each(items, function (item) {\n        if (!value && getFirstFont(item.value).toLowerCase() === getFirstFont(font).toLowerCase()) {\n          value = item.value;\n        }\n      });\n      return value;\n    };\n    var createFontNameListBoxChangeHandler = function (editor, items) {\n      return function () {\n        var self = this;\n        self.state.set('value', null);\n        editor.on('init nodeChange', function (e) {\n          var fontFamily = editor.queryCommandValue('FontName');\n          var match = findMatchingValue(items, fontFamily);\n          self.value(match ? match : null);\n          if (!match && fontFamily) {\n            self.text(getFirstFont(fontFamily));\n          }\n        });\n      };\n    };\n    var createFormats = function (formats) {\n      formats = formats.replace(/;$/, '').split(';');\n      var i = formats.length;\n      while (i--) {\n        formats[i] = formats[i].split('=');\n      }\n      return formats;\n    };\n    var getFontItems = function (editor) {\n      var defaultFontsFormats = 'Andale Mono=andale mono,monospace;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,sans-serif;' + 'Book Antiqua=book antiqua,palatino,serif;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier,monospace;' + 'Georgia=georgia,palatino,serif;' + 'Helvetica=helvetica,arial,sans-serif;' + 'Impact=impact,sans-serif;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco,monospace;' + 'Times New Roman=times new roman,times,serif;' + 'Trebuchet MS=trebuchet ms,geneva,sans-serif;' + 'Verdana=verdana,geneva,sans-serif;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats';\n      var fonts = createFormats(editor.settings.font_formats || defaultFontsFormats);\n      return global$2.map(fonts, function (font) {\n        return {\n          text: { raw: font[0] },\n          value: font[1],\n          textStyle: font[1].indexOf('dings') === -1 ? 'font-family:' + font[1] : ''\n        };\n      });\n    };\n    var registerButtons = function (editor) {\n      editor.addButton('fontselect', function () {\n        var items = getFontItems(editor);\n        return {\n          type: 'listbox',\n          text: 'Font Family',\n          tooltip: 'Font Family',\n          values: items,\n          fixedWidth: true,\n          onPostRender: createFontNameListBoxChangeHandler(editor, items),\n          onselect: function (e) {\n            if (e.control.settings.value) {\n              editor.execCommand('FontName', false, e.control.settings.value);\n            }\n          }\n        };\n      });\n    };\n    var register$1 = function (editor) {\n      registerButtons(editor);\n    };\n    var FontSelect = { register: register$1 };\n\n    var round = function (number, precision) {\n      var factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    var toPt = function (fontSize, precision) {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      }\n      return fontSize;\n    };\n    var findMatchingValue$1 = function (items, pt, px) {\n      var value;\n      global$2.each(items, function (item) {\n        if (item.value === px) {\n          value = px;\n        } else if (item.value === pt) {\n          value = pt;\n        }\n      });\n      return value;\n    };\n    var createFontSizeListBoxChangeHandler = function (editor, items) {\n      return function () {\n        var self = this;\n        editor.on('init nodeChange', function (e) {\n          var px, pt, precision, match;\n          px = editor.queryCommandValue('FontSize');\n          if (px) {\n            for (precision = 3; !match && precision >= 0; precision--) {\n              pt = toPt(px, precision);\n              match = findMatchingValue$1(items, pt, px);\n            }\n          }\n          self.value(match ? match : null);\n          if (!match) {\n            self.text(pt);\n          }\n        });\n      };\n    };\n    var getFontSizeItems = function (editor) {\n      var defaultFontsizeFormats = '8pt 10pt 12pt 14pt 18pt 24pt 36pt';\n      var fontsizeFormats = editor.settings.fontsize_formats || defaultFontsizeFormats;\n      return global$2.map(fontsizeFormats.split(' '), function (item) {\n        var text = item, value = item;\n        var values = item.split('=');\n        if (values.length > 1) {\n          text = values[0];\n          value = values[1];\n        }\n        return {\n          text: text,\n          value: value\n        };\n      });\n    };\n    var registerButtons$1 = function (editor) {\n      editor.addButton('fontsizeselect', function () {\n        var items = getFontSizeItems(editor);\n        return {\n          type: 'listbox',\n          text: 'Font Sizes',\n          tooltip: 'Font Sizes',\n          values: items,\n          fixedWidth: true,\n          onPostRender: createFontSizeListBoxChangeHandler(editor, items),\n          onclick: function (e) {\n            if (e.control.settings.value) {\n              editor.execCommand('FontSize', false, e.control.settings.value);\n            }\n          }\n        };\n      });\n    };\n    var register$2 = function (editor) {\n      registerButtons$1(editor);\n    };\n    var FontSizeSelect = { register: register$2 };\n\n    var hideMenuObjects = function (editor, menu) {\n      var count = menu.length;\n      global$2.each(menu, function (item) {\n        if (item.menu) {\n          item.hidden = hideMenuObjects(editor, item.menu) === 0;\n        }\n        var formatName = item.format;\n        if (formatName) {\n          item.hidden = !editor.formatter.canApply(formatName);\n        }\n        if (item.hidden) {\n          count--;\n        }\n      });\n      return count;\n    };\n    var hideFormatMenuItems = function (editor, menu) {\n      var count = menu.items().length;\n      menu.items().each(function (item) {\n        if (item.menu) {\n          item.visible(hideFormatMenuItems(editor, item.menu) > 0);\n        }\n        if (!item.menu && item.settings.menu) {\n          item.visible(hideMenuObjects(editor, item.settings.menu) > 0);\n        }\n        var formatName = item.settings.format;\n        if (formatName) {\n          item.visible(editor.formatter.canApply(formatName));\n        }\n        if (!item.visible()) {\n          count--;\n        }\n      });\n      return count;\n    };\n    var createFormatMenu = function (editor) {\n      var count = 0;\n      var newFormats = [];\n      var defaultStyleFormats = [\n        {\n          title: 'Headings',\n          items: [\n            {\n              title: 'Heading 1',\n              format: 'h1'\n            },\n            {\n              title: 'Heading 2',\n              format: 'h2'\n            },\n            {\n              title: 'Heading 3',\n              format: 'h3'\n            },\n            {\n              title: 'Heading 4',\n              format: 'h4'\n            },\n            {\n              title: 'Heading 5',\n              format: 'h5'\n            },\n            {\n              title: 'Heading 6',\n              format: 'h6'\n            }\n          ]\n        },\n        {\n          title: 'Inline',\n          items: [\n            {\n              title: 'Bold',\n              icon: 'bold',\n              format: 'bold'\n            },\n            {\n              title: 'Italic',\n              icon: 'italic',\n              format: 'italic'\n            },\n            {\n              title: 'Underline',\n              icon: 'underline',\n              format: 'underline'\n            },\n            {\n              title: 'Strikethrough',\n              icon: 'strikethrough',\n              format: 'strikethrough'\n            },\n            {\n              title: 'Superscript',\n              icon: 'superscript',\n              format: 'superscript'\n            },\n            {\n              title: 'Subscript',\n              icon: 'subscript',\n              format: 'subscript'\n            },\n            {\n              title: 'Code',\n              icon: 'code',\n              format: 'code'\n            }\n          ]\n        },\n        {\n          title: 'Blocks',\n          items: [\n            {\n              title: 'Paragraph',\n              format: 'p'\n            },\n            {\n              title: 'Blockquote',\n              format: 'blockquote'\n            },\n            {\n              title: 'Div',\n              format: 'div'\n            },\n            {\n              title: 'Pre',\n              format: 'pre'\n            }\n          ]\n        },\n        {\n          title: 'Alignment',\n          items: [\n            {\n              title: 'Left',\n              icon: 'alignleft',\n              format: 'alignleft'\n            },\n            {\n              title: 'Center',\n              icon: 'aligncenter',\n              format: 'aligncenter'\n            },\n            {\n              title: 'Right',\n              icon: 'alignright',\n              format: 'alignright'\n            },\n            {\n              title: 'Justify',\n              icon: 'alignjustify',\n              format: 'alignjustify'\n            }\n          ]\n        }\n      ];\n      var createMenu = function (formats) {\n        var menu = [];\n        if (!formats) {\n          return;\n        }\n        global$2.each(formats, function (format) {\n          var menuItem = {\n            text: format.title,\n            icon: format.icon\n          };\n          if (format.items) {\n            menuItem.menu = createMenu(format.items);\n          } else {\n            var formatName = format.format || 'custom' + count++;\n            if (!format.format) {\n              format.name = formatName;\n              newFormats.push(format);\n            }\n            menuItem.format = formatName;\n            menuItem.cmd = format.cmd;\n          }\n          menu.push(menuItem);\n        });\n        return menu;\n      };\n      var createStylesMenu = function () {\n        var menu;\n        if (editor.settings.style_formats_merge) {\n          if (editor.settings.style_formats) {\n            menu = createMenu(defaultStyleFormats.concat(editor.settings.style_formats));\n          } else {\n            menu = createMenu(defaultStyleFormats);\n          }\n        } else {\n          menu = createMenu(editor.settings.style_formats || defaultStyleFormats);\n        }\n        return menu;\n      };\n      editor.on('init', function () {\n        global$2.each(newFormats, function (format) {\n          editor.formatter.register(format.name, format);\n        });\n      });\n      return {\n        type: 'menu',\n        items: createStylesMenu(),\n        onPostRender: function (e) {\n          editor.fire('renderFormatsMenu', { control: e.control });\n        },\n        itemDefaults: {\n          preview: true,\n          textStyle: function () {\n            if (this.settings.format) {\n              return editor.formatter.getCssText(this.settings.format);\n            }\n          },\n          onPostRender: function () {\n            var self = this;\n            self.parent().on('show', function () {\n              var formatName, command;\n              formatName = self.settings.format;\n              if (formatName) {\n                self.disabled(!editor.formatter.canApply(formatName));\n                self.active(editor.formatter.match(formatName));\n              }\n              command = self.settings.cmd;\n              if (command) {\n                self.active(editor.queryCommandState(command));\n              }\n            });\n          },\n          onclick: function () {\n            if (this.settings.format) {\n              toggleFormat(editor, this.settings.format)();\n            }\n            if (this.settings.cmd) {\n              editor.execCommand(this.settings.cmd);\n            }\n          }\n        }\n      };\n    };\n    var registerMenuItems = function (editor, formatMenu) {\n      editor.addMenuItem('formats', {\n        text: 'Formats',\n        menu: formatMenu\n      });\n    };\n    var registerButtons$2 = function (editor, formatMenu) {\n      editor.addButton('styleselect', {\n        type: 'menubutton',\n        text: 'Formats',\n        menu: formatMenu,\n        onShowMenu: function () {\n          if (editor.settings.style_formats_autohide) {\n            hideFormatMenuItems(editor, this.menu);\n          }\n        }\n      });\n    };\n    var register$3 = function (editor) {\n      var formatMenu = createFormatMenu(editor);\n      registerMenuItems(editor, formatMenu);\n      registerButtons$2(editor, formatMenu);\n    };\n    var Formats = { register: register$3 };\n\n    var defaultBlocks = 'Paragraph=p;' + 'Heading 1=h1;' + 'Heading 2=h2;' + 'Heading 3=h3;' + 'Heading 4=h4;' + 'Heading 5=h5;' + 'Heading 6=h6;' + 'Preformatted=pre';\n    var createFormats$1 = function (formats) {\n      formats = formats.replace(/;$/, '').split(';');\n      var i = formats.length;\n      while (i--) {\n        formats[i] = formats[i].split('=');\n      }\n      return formats;\n    };\n    var createListBoxChangeHandler = function (editor, items, formatName) {\n      return function () {\n        var self = this;\n        editor.on('nodeChange', function (e) {\n          var formatter = editor.formatter;\n          var value = null;\n          global$2.each(e.parents, function (node) {\n            global$2.each(items, function (item) {\n              if (formatName) {\n                if (formatter.matchNode(node, formatName, { value: item.value })) {\n                  value = item.value;\n                }\n              } else {\n                if (formatter.matchNode(node, item.value)) {\n                  value = item.value;\n                }\n              }\n              if (value) {\n                return false;\n              }\n            });\n            if (value) {\n              return false;\n            }\n          });\n          self.value(value);\n        });\n      };\n    };\n    var lazyFormatSelectBoxItems = function (editor, blocks) {\n      return function () {\n        var items = [];\n        global$2.each(blocks, function (block) {\n          items.push({\n            text: block[0],\n            value: block[1],\n            textStyle: function () {\n              return editor.formatter.getCssText(block[1]);\n            }\n          });\n        });\n        return {\n          type: 'listbox',\n          text: blocks[0][0],\n          values: items,\n          fixedWidth: true,\n          onselect: function (e) {\n            if (e.control) {\n              var fmt = e.control.value();\n              toggleFormat(editor, fmt)();\n            }\n          },\n          onPostRender: createListBoxChangeHandler(editor, items)\n        };\n      };\n    };\n    var buildMenuItems = function (editor, blocks) {\n      return global$2.map(blocks, function (block) {\n        return {\n          text: block[0],\n          onclick: toggleFormat(editor, block[1]),\n          textStyle: function () {\n            return editor.formatter.getCssText(block[1]);\n          }\n        };\n      });\n    };\n    var register$4 = function (editor) {\n      var blocks = createFormats$1(editor.settings.block_formats || defaultBlocks);\n      editor.addMenuItem('blockformats', {\n        text: 'Blocks',\n        menu: buildMenuItems(editor, blocks)\n      });\n      editor.addButton('formatselect', lazyFormatSelectBoxItems(editor, blocks));\n    };\n    var FormatSelect = { register: register$4 };\n\n    var createCustomMenuItems = function (editor, names) {\n      var items, nameList;\n      if (typeof names === 'string') {\n        nameList = names.split(' ');\n      } else if (global$2.isArray(names)) {\n        return flatten(global$2.map(names, function (names) {\n          return createCustomMenuItems(editor, names);\n        }));\n      }\n      items = global$2.grep(nameList, function (name) {\n        return name === '|' || name in editor.menuItems;\n      });\n      return global$2.map(items, function (name) {\n        return name === '|' ? { text: '-' } : editor.menuItems[name];\n      });\n    };\n    var isSeparator$1 = function (menuItem) {\n      return menuItem && menuItem.text === '-';\n    };\n    var trimMenuItems = function (menuItems) {\n      var menuItems2 = filter(menuItems, function (menuItem, i) {\n        return !isSeparator$1(menuItem) || !isSeparator$1(menuItems[i - 1]);\n      });\n      return filter(menuItems2, function (menuItem, i) {\n        return !isSeparator$1(menuItem) || i > 0 && i < menuItems2.length - 1;\n      });\n    };\n    var createContextMenuItems = function (editor, context) {\n      var outputMenuItems = [{ text: '-' }];\n      var menuItems = global$2.grep(editor.menuItems, function (menuItem) {\n        return menuItem.context === context;\n      });\n      global$2.each(menuItems, function (menuItem) {\n        if (menuItem.separator === 'before') {\n          outputMenuItems.push({ text: '|' });\n        }\n        if (menuItem.prependToContext) {\n          outputMenuItems.unshift(menuItem);\n        } else {\n          outputMenuItems.push(menuItem);\n        }\n        if (menuItem.separator === 'after') {\n          outputMenuItems.push({ text: '|' });\n        }\n      });\n      return outputMenuItems;\n    };\n    var createInsertMenu = function (editor) {\n      var insertButtonItems = editor.settings.insert_button_items;\n      if (insertButtonItems) {\n        return trimMenuItems(createCustomMenuItems(editor, insertButtonItems));\n      } else {\n        return trimMenuItems(createContextMenuItems(editor, 'insert'));\n      }\n    };\n    var registerButtons$3 = function (editor) {\n      editor.addButton('insert', {\n        type: 'menubutton',\n        icon: 'insert',\n        menu: [],\n        oncreatemenu: function () {\n          this.menu.add(createInsertMenu(editor));\n          this.menu.renderNew();\n        }\n      });\n    };\n    var register$5 = function (editor) {\n      registerButtons$3(editor);\n    };\n    var InsertButton = { register: register$5 };\n\n    var registerFormatButtons = function (editor) {\n      global$2.each({\n        bold: 'Bold',\n        italic: 'Italic',\n        underline: 'Underline',\n        strikethrough: 'Strikethrough',\n        subscript: 'Subscript',\n        superscript: 'Superscript'\n      }, function (text, name) {\n        editor.addButton(name, {\n          active: false,\n          tooltip: text,\n          onPostRender: postRenderFormatToggle(editor, name),\n          onclick: toggleFormat(editor, name)\n        });\n      });\n    };\n    var registerCommandButtons = function (editor) {\n      global$2.each({\n        outdent: [\n          'Decrease indent',\n          'Outdent'\n        ],\n        indent: [\n          'Increase indent',\n          'Indent'\n        ],\n        cut: [\n          'Cut',\n          'Cut'\n        ],\n        copy: [\n          'Copy',\n          'Copy'\n        ],\n        paste: [\n          'Paste',\n          'Paste'\n        ],\n        help: [\n          'Help',\n          'mceHelp'\n        ],\n        selectall: [\n          'Select all',\n          'SelectAll'\n        ],\n        visualaid: [\n          'Visual aids',\n          'mceToggleVisualAid'\n        ],\n        newdocument: [\n          'New document',\n          'mceNewDocument'\n        ],\n        removeformat: [\n          'Clear formatting',\n          'RemoveFormat'\n        ],\n        remove: [\n          'Remove',\n          'Delete'\n        ]\n      }, function (item, name) {\n        editor.addButton(name, {\n          tooltip: item[0],\n          cmd: item[1]\n        });\n      });\n    };\n    var registerCommandToggleButtons = function (editor) {\n      global$2.each({\n        blockquote: [\n          'Blockquote',\n          'mceBlockQuote'\n        ],\n        subscript: [\n          'Subscript',\n          'Subscript'\n        ],\n        superscript: [\n          'Superscript',\n          'Superscript'\n        ]\n      }, function (item, name) {\n        editor.addButton(name, {\n          active: false,\n          tooltip: item[0],\n          cmd: item[1],\n          onPostRender: postRenderFormatToggle(editor, name)\n        });\n      });\n    };\n    var registerButtons$4 = function (editor) {\n      registerFormatButtons(editor);\n      registerCommandButtons(editor);\n      registerCommandToggleButtons(editor);\n    };\n    var registerMenuItems$1 = function (editor) {\n      global$2.each({\n        bold: [\n          'Bold',\n          'Bold',\n          'Meta+B'\n        ],\n        italic: [\n          'Italic',\n          'Italic',\n          'Meta+I'\n        ],\n        underline: [\n          'Underline',\n          'Underline',\n          'Meta+U'\n        ],\n        strikethrough: [\n          'Strikethrough',\n          'Strikethrough'\n        ],\n        subscript: [\n          'Subscript',\n          'Subscript'\n        ],\n        superscript: [\n          'Superscript',\n          'Superscript'\n        ],\n        removeformat: [\n          'Clear formatting',\n          'RemoveFormat'\n        ],\n        newdocument: [\n          'New document',\n          'mceNewDocument'\n        ],\n        cut: [\n          'Cut',\n          'Cut',\n          'Meta+X'\n        ],\n        copy: [\n          'Copy',\n          'Copy',\n          'Meta+C'\n        ],\n        paste: [\n          'Paste',\n          'Paste',\n          'Meta+V'\n        ],\n        selectall: [\n          'Select all',\n          'SelectAll',\n          'Meta+A'\n        ]\n      }, function (item, name) {\n        editor.addMenuItem(name, {\n          text: item[0],\n          icon: name,\n          shortcut: item[2],\n          cmd: item[1]\n        });\n      });\n      editor.addMenuItem('codeformat', {\n        text: 'Code',\n        icon: 'code',\n        onclick: toggleFormat(editor, 'code')\n      });\n    };\n    var register$6 = function (editor) {\n      registerButtons$4(editor);\n      registerMenuItems$1(editor);\n    };\n    var SimpleControls = { register: register$6 };\n\n    var toggleUndoRedoState = function (editor, type) {\n      return function () {\n        var self = this;\n        var checkState = function () {\n          var typeFn = type === 'redo' ? 'hasRedo' : 'hasUndo';\n          return editor.undoManager ? editor.undoManager[typeFn]() : false;\n        };\n        self.disabled(!checkState());\n        editor.on('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', function () {\n          self.disabled(editor.readonly || !checkState());\n        });\n      };\n    };\n    var registerMenuItems$2 = function (editor) {\n      editor.addMenuItem('undo', {\n        text: 'Undo',\n        icon: 'undo',\n        shortcut: 'Meta+Z',\n        onPostRender: toggleUndoRedoState(editor, 'undo'),\n        cmd: 'undo'\n      });\n      editor.addMenuItem('redo', {\n        text: 'Redo',\n        icon: 'redo',\n        shortcut: 'Meta+Y',\n        onPostRender: toggleUndoRedoState(editor, 'redo'),\n        cmd: 'redo'\n      });\n    };\n    var registerButtons$5 = function (editor) {\n      editor.addButton('undo', {\n        tooltip: 'Undo',\n        onPostRender: toggleUndoRedoState(editor, 'undo'),\n        cmd: 'undo'\n      });\n      editor.addButton('redo', {\n        tooltip: 'Redo',\n        onPostRender: toggleUndoRedoState(editor, 'redo'),\n        cmd: 'redo'\n      });\n    };\n    var register$7 = function (editor) {\n      registerMenuItems$2(editor);\n      registerButtons$5(editor);\n    };\n    var UndoRedo = { register: register$7 };\n\n    var toggleVisualAidState = function (editor) {\n      return function () {\n        var self = this;\n        editor.on('VisualAid', function (e) {\n          self.active(e.hasVisual);\n        });\n        self.active(editor.hasVisual);\n      };\n    };\n    var registerMenuItems$3 = function (editor) {\n      editor.addMenuItem('visualaid', {\n        text: 'Visual aids',\n        selectable: true,\n        onPostRender: toggleVisualAidState(editor),\n        cmd: 'mceToggleVisualAid'\n      });\n    };\n    var register$8 = function (editor) {\n      registerMenuItems$3(editor);\n    };\n    var VisualAid = { register: register$8 };\n\n    var setupEnvironment = function () {\n      Widget.tooltips = !global$8.iOS;\n      Control$1.translate = function (text) {\n        return global$1.translate(text);\n      };\n    };\n    var setupUiContainer = function (editor) {\n      if (editor.settings.ui_container) {\n        global$8.container = descendant(Element.fromDom(domGlobals.document.body), editor.settings.ui_container).fold(constant(null), function (elm) {\n          return elm.dom();\n        });\n      }\n    };\n    var setupRtlMode = function (editor) {\n      if (editor.rtl) {\n        Control$1.rtl = true;\n      }\n    };\n    var setupHideFloatPanels = function (editor) {\n      editor.on('mousedown progressstate', function () {\n        FloatPanel.hideAll();\n      });\n    };\n    var setup$1 = function (editor) {\n      setupRtlMode(editor);\n      setupHideFloatPanels(editor);\n      setupUiContainer(editor);\n      setupEnvironment();\n      FormatSelect.register(editor);\n      Align.register(editor);\n      SimpleControls.register(editor);\n      UndoRedo.register(editor);\n      FontSizeSelect.register(editor);\n      FontSelect.register(editor);\n      Formats.register(editor);\n      VisualAid.register(editor);\n      InsertButton.register(editor);\n    };\n    var FormatControls = { setup: setup$1 };\n\n    var GridLayout = AbsoluteLayout.extend({\n      recalc: function (container) {\n        var settings, rows, cols, items, contLayoutRect, width, height, rect, ctrlLayoutRect, ctrl, x, y, posX, posY, ctrlSettings, contPaddingBox, align, spacingH, spacingV, alignH, alignV, maxX, maxY;\n        var colWidths = [];\n        var rowHeights = [];\n        var ctrlMinWidth, ctrlMinHeight, availableWidth, availableHeight, reverseRows, idx;\n        settings = container.settings;\n        items = container.items().filter(':visible');\n        contLayoutRect = container.layoutRect();\n        cols = settings.columns || Math.ceil(Math.sqrt(items.length));\n        rows = Math.ceil(items.length / cols);\n        spacingH = settings.spacingH || settings.spacing || 0;\n        spacingV = settings.spacingV || settings.spacing || 0;\n        alignH = settings.alignH || settings.align;\n        alignV = settings.alignV || settings.align;\n        contPaddingBox = container.paddingBox;\n        reverseRows = 'reverseRows' in settings ? settings.reverseRows : container.isRtl();\n        if (alignH && typeof alignH === 'string') {\n          alignH = [alignH];\n        }\n        if (alignV && typeof alignV === 'string') {\n          alignV = [alignV];\n        }\n        for (x = 0; x < cols; x++) {\n          colWidths.push(0);\n        }\n        for (y = 0; y < rows; y++) {\n          rowHeights.push(0);\n        }\n        for (y = 0; y < rows; y++) {\n          for (x = 0; x < cols; x++) {\n            ctrl = items[y * cols + x];\n            if (!ctrl) {\n              break;\n            }\n            ctrlLayoutRect = ctrl.layoutRect();\n            ctrlMinWidth = ctrlLayoutRect.minW;\n            ctrlMinHeight = ctrlLayoutRect.minH;\n            colWidths[x] = ctrlMinWidth > colWidths[x] ? ctrlMinWidth : colWidths[x];\n            rowHeights[y] = ctrlMinHeight > rowHeights[y] ? ctrlMinHeight : rowHeights[y];\n          }\n        }\n        availableWidth = contLayoutRect.innerW - contPaddingBox.left - contPaddingBox.right;\n        for (maxX = 0, x = 0; x < cols; x++) {\n          maxX += colWidths[x] + (x > 0 ? spacingH : 0);\n          availableWidth -= (x > 0 ? spacingH : 0) + colWidths[x];\n        }\n        availableHeight = contLayoutRect.innerH - contPaddingBox.top - contPaddingBox.bottom;\n        for (maxY = 0, y = 0; y < rows; y++) {\n          maxY += rowHeights[y] + (y > 0 ? spacingV : 0);\n          availableHeight -= (y > 0 ? spacingV : 0) + rowHeights[y];\n        }\n        maxX += contPaddingBox.left + contPaddingBox.right;\n        maxY += contPaddingBox.top + contPaddingBox.bottom;\n        rect = {};\n        rect.minW = maxX + (contLayoutRect.w - contLayoutRect.innerW);\n        rect.minH = maxY + (contLayoutRect.h - contLayoutRect.innerH);\n        rect.contentW = rect.minW - contLayoutRect.deltaW;\n        rect.contentH = rect.minH - contLayoutRect.deltaH;\n        rect.minW = Math.min(rect.minW, contLayoutRect.maxW);\n        rect.minH = Math.min(rect.minH, contLayoutRect.maxH);\n        rect.minW = Math.max(rect.minW, contLayoutRect.startMinWidth);\n        rect.minH = Math.max(rect.minH, contLayoutRect.startMinHeight);\n        if (contLayoutRect.autoResize && (rect.minW !== contLayoutRect.minW || rect.minH !== contLayoutRect.minH)) {\n          rect.w = rect.minW;\n          rect.h = rect.minH;\n          container.layoutRect(rect);\n          this.recalc(container);\n          if (container._lastRect === null) {\n            var parentCtrl = container.parent();\n            if (parentCtrl) {\n              parentCtrl._lastRect = null;\n              parentCtrl.recalc();\n            }\n          }\n          return;\n        }\n        if (contLayoutRect.autoResize) {\n          rect = container.layoutRect(rect);\n          rect.contentW = rect.minW - contLayoutRect.deltaW;\n          rect.contentH = rect.minH - contLayoutRect.deltaH;\n        }\n        var flexV;\n        if (settings.packV === 'start') {\n          flexV = 0;\n        } else {\n          flexV = availableHeight > 0 ? Math.floor(availableHeight / rows) : 0;\n        }\n        var totalFlex = 0;\n        var flexWidths = settings.flexWidths;\n        if (flexWidths) {\n          for (x = 0; x < flexWidths.length; x++) {\n            totalFlex += flexWidths[x];\n          }\n        } else {\n          totalFlex = cols;\n        }\n        var ratio = availableWidth / totalFlex;\n        for (x = 0; x < cols; x++) {\n          colWidths[x] += flexWidths ? flexWidths[x] * ratio : ratio;\n        }\n        posY = contPaddingBox.top;\n        for (y = 0; y < rows; y++) {\n          posX = contPaddingBox.left;\n          height = rowHeights[y] + flexV;\n          for (x = 0; x < cols; x++) {\n            if (reverseRows) {\n              idx = y * cols + cols - 1 - x;\n            } else {\n              idx = y * cols + x;\n            }\n            ctrl = items[idx];\n            if (!ctrl) {\n              break;\n            }\n            ctrlSettings = ctrl.settings;\n            ctrlLayoutRect = ctrl.layoutRect();\n            width = Math.max(colWidths[x], ctrlLayoutRect.startMinWidth);\n            ctrlLayoutRect.x = posX;\n            ctrlLayoutRect.y = posY;\n            align = ctrlSettings.alignH || (alignH ? alignH[x] || alignH[0] : null);\n            if (align === 'center') {\n              ctrlLayoutRect.x = posX + width / 2 - ctrlLayoutRect.w / 2;\n            } else if (align === 'right') {\n              ctrlLayoutRect.x = posX + width - ctrlLayoutRect.w;\n            } else if (align === 'stretch') {\n              ctrlLayoutRect.w = width;\n            }\n            align = ctrlSettings.alignV || (alignV ? alignV[x] || alignV[0] : null);\n            if (align === 'center') {\n              ctrlLayoutRect.y = posY + height / 2 - ctrlLayoutRect.h / 2;\n            } else if (align === 'bottom') {\n              ctrlLayoutRect.y = posY + height - ctrlLayoutRect.h;\n            } else if (align === 'stretch') {\n              ctrlLayoutRect.h = height;\n            }\n            ctrl.layoutRect(ctrlLayoutRect);\n            posX += width + spacingH;\n            if (ctrl.recalc) {\n              ctrl.recalc();\n            }\n          }\n          posY += height + spacingV;\n        }\n      }\n    });\n\n    var Iframe$1 = Widget.extend({\n      renderHtml: function () {\n        var self = this;\n        self.classes.add('iframe');\n        self.canFocus = false;\n        return '<iframe id=\"' + self._id + '\" class=\"' + self.classes + '\" tabindex=\"-1\" src=\"' + (self.settings.url || 'javascript:\\'\\'') + '\" frameborder=\"0\"></iframe>';\n      },\n      src: function (src) {\n        this.getEl().src = src;\n      },\n      html: function (html, callback) {\n        var self = this, body = this.getEl().contentWindow.document.body;\n        if (!body) {\n          global$7.setTimeout(function () {\n            self.html(html);\n          });\n        } else {\n          body.innerHTML = html;\n          if (callback) {\n            callback();\n          }\n        }\n        return this;\n      }\n    });\n\n    var InfoBox = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.classes.add('widget').add('infobox');\n        self.canFocus = false;\n      },\n      severity: function (level) {\n        this.classes.remove('error');\n        this.classes.remove('warning');\n        this.classes.remove('success');\n        this.classes.add(level);\n      },\n      help: function (state) {\n        this.state.set('help', state);\n      },\n      renderHtml: function () {\n        var self = this, prefix = self.classPrefix;\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\">' + '<div id=\"' + self._id + '-body\">' + self.encode(self.state.get('text')) + '<button role=\"button\" tabindex=\"-1\">' + '<i class=\"' + prefix + 'ico ' + prefix + 'i-help\"></i>' + '</button>' + '</div>' + '</div>';\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:text', function (e) {\n          self.getEl('body').firstChild.data = self.encode(e.value);\n          if (self.state.get('rendered')) {\n            self.updateLayoutRect();\n          }\n        });\n        self.state.on('change:help', function (e) {\n          self.classes.toggle('has-help', e.value);\n          if (self.state.get('rendered')) {\n            self.updateLayoutRect();\n          }\n        });\n        return self._super();\n      }\n    });\n\n    var Label = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.classes.add('widget').add('label');\n        self.canFocus = false;\n        if (settings.multiline) {\n          self.classes.add('autoscroll');\n        }\n        if (settings.strong) {\n          self.classes.add('strong');\n        }\n      },\n      initLayoutRect: function () {\n        var self = this, layoutRect = self._super();\n        if (self.settings.multiline) {\n          var size = funcs.getSize(self.getEl());\n          if (size.width > layoutRect.maxW) {\n            layoutRect.minW = layoutRect.maxW;\n            self.classes.add('multiline');\n          }\n          self.getEl().style.width = layoutRect.minW + 'px';\n          layoutRect.startMinH = layoutRect.h = layoutRect.minH = Math.min(layoutRect.maxH, funcs.getSize(self.getEl()).height);\n        }\n        return layoutRect;\n      },\n      repaint: function () {\n        var self = this;\n        if (!self.settings.multiline) {\n          self.getEl().style.lineHeight = self.layoutRect().h + 'px';\n        }\n        return self._super();\n      },\n      severity: function (level) {\n        this.classes.remove('error');\n        this.classes.remove('warning');\n        this.classes.remove('success');\n        this.classes.add(level);\n      },\n      renderHtml: function () {\n        var self = this;\n        var targetCtrl, forName, forId = self.settings.forId;\n        var text = self.settings.html ? self.settings.html : self.encode(self.state.get('text'));\n        if (!forId && (forName = self.settings.forName)) {\n          targetCtrl = self.getRoot().find('#' + forName)[0];\n          if (targetCtrl) {\n            forId = targetCtrl._id;\n          }\n        }\n        if (forId) {\n          return '<label id=\"' + self._id + '\" class=\"' + self.classes + '\"' + (forId ? ' for=\"' + forId + '\"' : '') + '>' + text + '</label>';\n        }\n        return '<span id=\"' + self._id + '\" class=\"' + self.classes + '\">' + text + '</span>';\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:text', function (e) {\n          self.innerHtml(self.encode(e.value));\n          if (self.state.get('rendered')) {\n            self.updateLayoutRect();\n          }\n        });\n        return self._super();\n      }\n    });\n\n    var Toolbar$1 = Container.extend({\n      Defaults: {\n        role: 'toolbar',\n        layout: 'flow'\n      },\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.classes.add('toolbar');\n      },\n      postRender: function () {\n        var self = this;\n        self.items().each(function (ctrl) {\n          ctrl.classes.add('toolbar-item');\n        });\n        return self._super();\n      }\n    });\n\n    var MenuBar = Toolbar$1.extend({\n      Defaults: {\n        role: 'menubar',\n        containerCls: 'menubar',\n        ariaRoot: true,\n        defaults: { type: 'menubutton' }\n      }\n    });\n\n    function isChildOf$1(node, parent) {\n      while (node) {\n        if (parent === node) {\n          return true;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    }\n    var MenuButton = Button.extend({\n      init: function (settings) {\n        var self = this;\n        self._renderOpen = true;\n        self._super(settings);\n        settings = self.settings;\n        self.classes.add('menubtn');\n        if (settings.fixedWidth) {\n          self.classes.add('fixed-width');\n        }\n        self.aria('haspopup', true);\n        self.state.set('menu', settings.menu || self.render());\n      },\n      showMenu: function (toggle) {\n        var self = this;\n        var menu;\n        if (self.menu && self.menu.visible() && toggle !== false) {\n          return self.hideMenu();\n        }\n        if (!self.menu) {\n          menu = self.state.get('menu') || [];\n          self.classes.add('opened');\n          if (menu.length) {\n            menu = {\n              type: 'menu',\n              animate: true,\n              items: menu\n            };\n          } else {\n            menu.type = menu.type || 'menu';\n            menu.animate = true;\n          }\n          if (!menu.renderTo) {\n            self.menu = global$4.create(menu).parent(self).renderTo();\n          } else {\n            self.menu = menu.parent(self).show().renderTo();\n          }\n          self.fire('createmenu');\n          self.menu.reflow();\n          self.menu.on('cancel', function (e) {\n            if (e.control.parent() === self.menu) {\n              e.stopPropagation();\n              self.focus();\n              self.hideMenu();\n            }\n          });\n          self.menu.on('select', function () {\n            self.focus();\n          });\n          self.menu.on('show hide', function (e) {\n            if (e.type === 'hide' && e.control.parent() === self) {\n              self.classes.remove('opened-under');\n            }\n            if (e.control === self.menu) {\n              self.activeMenu(e.type === 'show');\n              self.classes.toggle('opened', e.type === 'show');\n            }\n            self.aria('expanded', e.type === 'show');\n          }).fire('show');\n        }\n        self.menu.show();\n        self.menu.layoutRect({ w: self.layoutRect().w });\n        self.menu.repaint();\n        self.menu.moveRel(self.getEl(), self.isRtl() ? [\n          'br-tr',\n          'tr-br'\n        ] : [\n          'bl-tl',\n          'tl-bl'\n        ]);\n        var menuLayoutRect = self.menu.layoutRect();\n        var selfBottom = self.$el.offset().top + self.layoutRect().h;\n        if (selfBottom > menuLayoutRect.y && selfBottom < menuLayoutRect.y + menuLayoutRect.h) {\n          self.classes.add('opened-under');\n        }\n        self.fire('showmenu');\n      },\n      hideMenu: function () {\n        var self = this;\n        if (self.menu) {\n          self.menu.items().each(function (item) {\n            if (item.hideMenu) {\n              item.hideMenu();\n            }\n          });\n          self.menu.hide();\n        }\n      },\n      activeMenu: function (state) {\n        this.classes.toggle('active', state);\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, prefix = self.classPrefix;\n        var icon = self.settings.icon, image;\n        var text = self.state.get('text');\n        var textHtml = '';\n        image = self.settings.image;\n        if (image) {\n          icon = 'none';\n          if (typeof image !== 'string') {\n            image = domGlobals.window.getSelection ? image[0] : image[1];\n          }\n          image = ' style=\"background-image: url(\\'' + image + '\\')\"';\n        } else {\n          image = '';\n        }\n        if (text) {\n          self.classes.add('btn-has-text');\n          textHtml = '<span class=\"' + prefix + 'txt\">' + self.encode(text) + '</span>';\n        }\n        icon = self.settings.icon ? prefix + 'ico ' + prefix + 'i-' + icon : '';\n        self.aria('role', self.parent() instanceof MenuBar ? 'menuitem' : 'button');\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" tabindex=\"-1\" aria-labelledby=\"' + id + '\">' + '<button id=\"' + id + '-open\" role=\"presentation\" type=\"button\" tabindex=\"-1\">' + (icon ? '<i class=\"' + icon + '\"' + image + '></i>' : '') + textHtml + ' <i class=\"' + prefix + 'caret\"></i>' + '</button>' + '</div>';\n      },\n      postRender: function () {\n        var self = this;\n        self.on('click', function (e) {\n          if (e.control === self && isChildOf$1(e.target, self.getEl())) {\n            self.focus();\n            self.showMenu(!e.aria);\n            if (e.aria) {\n              self.menu.items().filter(':visible')[0].focus();\n            }\n          }\n        });\n        self.on('mouseenter', function (e) {\n          var overCtrl = e.control;\n          var parent = self.parent();\n          var hasVisibleSiblingMenu;\n          if (overCtrl && parent && overCtrl instanceof MenuButton && overCtrl.parent() === parent) {\n            parent.items().filter('MenuButton').each(function (ctrl) {\n              if (ctrl.hideMenu && ctrl !== overCtrl) {\n                if (ctrl.menu && ctrl.menu.visible()) {\n                  hasVisibleSiblingMenu = true;\n                }\n                ctrl.hideMenu();\n              }\n            });\n            if (hasVisibleSiblingMenu) {\n              overCtrl.focus();\n              overCtrl.showMenu();\n            }\n          }\n        });\n        return self._super();\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:menu', function () {\n          if (self.menu) {\n            self.menu.remove();\n          }\n          self.menu = null;\n        });\n        return self._super();\n      },\n      remove: function () {\n        this._super();\n        if (this.menu) {\n          this.menu.remove();\n        }\n      }\n    });\n\n    var Menu = FloatPanel.extend({\n      Defaults: {\n        defaultType: 'menuitem',\n        border: 1,\n        layout: 'stack',\n        role: 'application',\n        bodyRole: 'menu',\n        ariaRoot: true\n      },\n      init: function (settings) {\n        var self = this;\n        settings.autohide = true;\n        settings.constrainToViewport = true;\n        if (typeof settings.items === 'function') {\n          settings.itemsFactory = settings.items;\n          settings.items = [];\n        }\n        if (settings.itemDefaults) {\n          var items = settings.items;\n          var i = items.length;\n          while (i--) {\n            items[i] = global$2.extend({}, settings.itemDefaults, items[i]);\n          }\n        }\n        self._super(settings);\n        self.classes.add('menu');\n        if (settings.animate && global$8.ie !== 11) {\n          self.classes.add('animate');\n        }\n      },\n      repaint: function () {\n        this.classes.toggle('menu-align', true);\n        this._super();\n        this.getEl().style.height = '';\n        this.getEl('body').style.height = '';\n        return this;\n      },\n      cancel: function () {\n        var self = this;\n        self.hideAll();\n        self.fire('select');\n      },\n      load: function () {\n        var self = this;\n        var time, factory;\n        function hideThrobber() {\n          if (self.throbber) {\n            self.throbber.hide();\n            self.throbber = null;\n          }\n        }\n        factory = self.settings.itemsFactory;\n        if (!factory) {\n          return;\n        }\n        if (!self.throbber) {\n          self.throbber = new Throbber(self.getEl('body'), true);\n          if (self.items().length === 0) {\n            self.throbber.show();\n            self.fire('loading');\n          } else {\n            self.throbber.show(100, function () {\n              self.items().remove();\n              self.fire('loading');\n            });\n          }\n          self.on('hide close', hideThrobber);\n        }\n        self.requestTime = time = new Date().getTime();\n        self.settings.itemsFactory(function (items) {\n          if (items.length === 0) {\n            self.hide();\n            return;\n          }\n          if (self.requestTime !== time) {\n            return;\n          }\n          self.getEl().style.width = '';\n          self.getEl('body').style.width = '';\n          hideThrobber();\n          self.items().remove();\n          self.getEl('body').innerHTML = '';\n          self.add(items);\n          self.renderNew();\n          self.fire('loaded');\n        });\n      },\n      hideAll: function () {\n        var self = this;\n        this.find('menuitem').exec('hideMenu');\n        return self._super();\n      },\n      preRender: function () {\n        var self = this;\n        self.items().each(function (ctrl) {\n          var settings = ctrl.settings;\n          if (settings.icon || settings.image || settings.selectable) {\n            self._hasIcons = true;\n            return false;\n          }\n        });\n        if (self.settings.itemsFactory) {\n          self.on('postrender', function () {\n            if (self.settings.itemsFactory) {\n              self.load();\n            }\n          });\n        }\n        self.on('show hide', function (e) {\n          if (e.control === self) {\n            if (e.type === 'show') {\n              global$7.setTimeout(function () {\n                self.classes.add('in');\n              }, 0);\n            } else {\n              self.classes.remove('in');\n            }\n          }\n        });\n        return self._super();\n      }\n    });\n\n    var ListBox = MenuButton.extend({\n      init: function (settings) {\n        var self = this;\n        var values, selected, selectedText, lastItemCtrl;\n        function setSelected(menuValues) {\n          for (var i = 0; i < menuValues.length; i++) {\n            selected = menuValues[i].selected || settings.value === menuValues[i].value;\n            if (selected) {\n              selectedText = selectedText || menuValues[i].text;\n              self.state.set('value', menuValues[i].value);\n              return true;\n            }\n            if (menuValues[i].menu) {\n              if (setSelected(menuValues[i].menu)) {\n                return true;\n              }\n            }\n          }\n        }\n        self._super(settings);\n        settings = self.settings;\n        self._values = values = settings.values;\n        if (values) {\n          if (typeof settings.value !== 'undefined') {\n            setSelected(values);\n          }\n          if (!selected && values.length > 0) {\n            selectedText = values[0].text;\n            self.state.set('value', values[0].value);\n          }\n          self.state.set('menu', values);\n        }\n        self.state.set('text', settings.text || selectedText);\n        self.classes.add('listbox');\n        self.on('select', function (e) {\n          var ctrl = e.control;\n          if (lastItemCtrl) {\n            e.lastControl = lastItemCtrl;\n          }\n          if (settings.multiple) {\n            ctrl.active(!ctrl.active());\n          } else {\n            self.value(e.control.value());\n          }\n          lastItemCtrl = ctrl;\n        });\n      },\n      value: function (value) {\n        if (arguments.length === 0) {\n          return this.state.get('value');\n        }\n        if (typeof value === 'undefined') {\n          return this;\n        }\n        function valueExists(values) {\n          return exists(values, function (a) {\n            return a.menu ? valueExists(a.menu) : a.value === value;\n          });\n        }\n        if (this.settings.values) {\n          if (valueExists(this.settings.values)) {\n            this.state.set('value', value);\n          } else if (value === null) {\n            this.state.set('value', null);\n          }\n        } else {\n          this.state.set('value', value);\n        }\n        return this;\n      },\n      bindStates: function () {\n        var self = this;\n        function activateMenuItemsByValue(menu, value) {\n          if (menu instanceof Menu) {\n            menu.items().each(function (ctrl) {\n              if (!ctrl.hasMenus()) {\n                ctrl.active(ctrl.value() === value);\n              }\n            });\n          }\n        }\n        function getSelectedItem(menuValues, value) {\n          var selectedItem;\n          if (!menuValues) {\n            return;\n          }\n          for (var i = 0; i < menuValues.length; i++) {\n            if (menuValues[i].value === value) {\n              return menuValues[i];\n            }\n            if (menuValues[i].menu) {\n              selectedItem = getSelectedItem(menuValues[i].menu, value);\n              if (selectedItem) {\n                return selectedItem;\n              }\n            }\n          }\n        }\n        self.on('show', function (e) {\n          activateMenuItemsByValue(e.control, self.value());\n        });\n        self.state.on('change:value', function (e) {\n          var selectedItem = getSelectedItem(self.state.get('menu'), e.value);\n          if (selectedItem) {\n            self.text(selectedItem.text);\n          } else {\n            self.text(self.settings.text);\n          }\n        });\n        return self._super();\n      }\n    });\n\n    var toggleTextStyle = function (ctrl, state) {\n      var textStyle = ctrl._textStyle;\n      if (textStyle) {\n        var textElm = ctrl.getEl('text');\n        textElm.setAttribute('style', textStyle);\n        if (state) {\n          textElm.style.color = '';\n          textElm.style.backgroundColor = '';\n        }\n      }\n    };\n    var MenuItem = Widget.extend({\n      Defaults: {\n        border: 0,\n        role: 'menuitem'\n      },\n      init: function (settings) {\n        var self = this;\n        var text;\n        self._super(settings);\n        settings = self.settings;\n        self.classes.add('menu-item');\n        if (settings.menu) {\n          self.classes.add('menu-item-expand');\n        }\n        if (settings.preview) {\n          self.classes.add('menu-item-preview');\n        }\n        text = self.state.get('text');\n        if (text === '-' || text === '|') {\n          self.classes.add('menu-item-sep');\n          self.aria('role', 'separator');\n          self.state.set('text', '-');\n        }\n        if (settings.selectable) {\n          self.aria('role', 'menuitemcheckbox');\n          self.classes.add('menu-item-checkbox');\n          settings.icon = 'selected';\n        }\n        if (!settings.preview && !settings.selectable) {\n          self.classes.add('menu-item-normal');\n        }\n        self.on('mousedown', function (e) {\n          e.preventDefault();\n        });\n        if (settings.menu && !settings.ariaHideMenu) {\n          self.aria('haspopup', true);\n        }\n      },\n      hasMenus: function () {\n        return !!this.settings.menu;\n      },\n      showMenu: function () {\n        var self = this;\n        var settings = self.settings;\n        var menu;\n        var parent = self.parent();\n        parent.items().each(function (ctrl) {\n          if (ctrl !== self) {\n            ctrl.hideMenu();\n          }\n        });\n        if (settings.menu) {\n          menu = self.menu;\n          if (!menu) {\n            menu = settings.menu;\n            if (menu.length) {\n              menu = {\n                type: 'menu',\n                items: menu\n              };\n            } else {\n              menu.type = menu.type || 'menu';\n            }\n            if (parent.settings.itemDefaults) {\n              menu.itemDefaults = parent.settings.itemDefaults;\n            }\n            menu = self.menu = global$4.create(menu).parent(self).renderTo();\n            menu.reflow();\n            menu.on('cancel', function (e) {\n              e.stopPropagation();\n              self.focus();\n              menu.hide();\n            });\n            menu.on('show hide', function (e) {\n              if (e.control.items) {\n                e.control.items().each(function (ctrl) {\n                  ctrl.active(ctrl.settings.selected);\n                });\n              }\n            }).fire('show');\n            menu.on('hide', function (e) {\n              if (e.control === menu) {\n                self.classes.remove('selected');\n              }\n            });\n            menu.submenu = true;\n          } else {\n            menu.show();\n          }\n          menu._parentMenu = parent;\n          menu.classes.add('menu-sub');\n          var rel = menu.testMoveRel(self.getEl(), self.isRtl() ? [\n            'tl-tr',\n            'bl-br',\n            'tr-tl',\n            'br-bl'\n          ] : [\n            'tr-tl',\n            'br-bl',\n            'tl-tr',\n            'bl-br'\n          ]);\n          menu.moveRel(self.getEl(), rel);\n          menu.rel = rel;\n          rel = 'menu-sub-' + rel;\n          menu.classes.remove(menu._lastRel).add(rel);\n          menu._lastRel = rel;\n          self.classes.add('selected');\n          self.aria('expanded', true);\n        }\n      },\n      hideMenu: function () {\n        var self = this;\n        if (self.menu) {\n          self.menu.items().each(function (item) {\n            if (item.hideMenu) {\n              item.hideMenu();\n            }\n          });\n          self.menu.hide();\n          self.aria('expanded', false);\n        }\n        return self;\n      },\n      renderHtml: function () {\n        var self = this;\n        var id = self._id;\n        var settings = self.settings;\n        var prefix = self.classPrefix;\n        var text = self.state.get('text');\n        var icon = self.settings.icon, image = '', shortcut = settings.shortcut;\n        var url = self.encode(settings.url), iconHtml = '';\n        function convertShortcut(shortcut) {\n          var i, value, replace = {};\n          if (global$8.mac) {\n            replace = {\n              alt: '&#x2325;',\n              ctrl: '&#x2318;',\n              shift: '&#x21E7;',\n              meta: '&#x2318;'\n            };\n          } else {\n            replace = { meta: 'Ctrl' };\n          }\n          shortcut = shortcut.split('+');\n          for (i = 0; i < shortcut.length; i++) {\n            value = replace[shortcut[i].toLowerCase()];\n            if (value) {\n              shortcut[i] = value;\n            }\n          }\n          return shortcut.join('+');\n        }\n        function escapeRegExp(str) {\n          return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n        }\n        function markMatches(text) {\n          var match = settings.match || '';\n          return match ? text.replace(new RegExp(escapeRegExp(match), 'gi'), function (match) {\n            return '!mce~match[' + match + ']mce~match!';\n          }) : text;\n        }\n        function boldMatches(text) {\n          return text.replace(new RegExp(escapeRegExp('!mce~match['), 'g'), '<b>').replace(new RegExp(escapeRegExp(']mce~match!'), 'g'), '</b>');\n        }\n        if (icon) {\n          self.parent().classes.add('menu-has-icons');\n        }\n        if (settings.image) {\n          image = ' style=\"background-image: url(\\'' + settings.image + '\\')\"';\n        }\n        if (shortcut) {\n          shortcut = convertShortcut(shortcut);\n        }\n        icon = prefix + 'ico ' + prefix + 'i-' + (self.settings.icon || 'none');\n        iconHtml = text !== '-' ? '<i class=\"' + icon + '\"' + image + '></i>\\xA0' : '';\n        text = boldMatches(self.encode(markMatches(text)));\n        url = boldMatches(self.encode(markMatches(url)));\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" tabindex=\"-1\">' + iconHtml + (text !== '-' ? '<span id=\"' + id + '-text\" class=\"' + prefix + 'text\">' + text + '</span>' : '') + (shortcut ? '<div id=\"' + id + '-shortcut\" class=\"' + prefix + 'menu-shortcut\">' + shortcut + '</div>' : '') + (settings.menu ? '<div class=\"' + prefix + 'caret\"></div>' : '') + (url ? '<div class=\"' + prefix + 'menu-item-link\">' + url + '</div>' : '') + '</div>';\n      },\n      postRender: function () {\n        var self = this, settings = self.settings;\n        var textStyle = settings.textStyle;\n        if (typeof textStyle === 'function') {\n          textStyle = textStyle.call(this);\n        }\n        if (textStyle) {\n          var textElm = self.getEl('text');\n          if (textElm) {\n            textElm.setAttribute('style', textStyle);\n            self._textStyle = textStyle;\n          }\n        }\n        self.on('mouseenter click', function (e) {\n          if (e.control === self) {\n            if (!settings.menu && e.type === 'click') {\n              self.fire('select');\n              global$7.requestAnimationFrame(function () {\n                self.parent().hideAll();\n              });\n            } else {\n              self.showMenu();\n              if (e.aria) {\n                self.menu.focus(true);\n              }\n            }\n          }\n        });\n        self._super();\n        return self;\n      },\n      hover: function () {\n        var self = this;\n        self.parent().items().each(function (ctrl) {\n          ctrl.classes.remove('selected');\n        });\n        self.classes.toggle('selected', true);\n        return self;\n      },\n      active: function (state) {\n        toggleTextStyle(this, state);\n        if (typeof state !== 'undefined') {\n          this.aria('checked', state);\n        }\n        return this._super(state);\n      },\n      remove: function () {\n        this._super();\n        if (this.menu) {\n          this.menu.remove();\n        }\n      }\n    });\n\n    var Radio = Checkbox.extend({\n      Defaults: {\n        classes: 'radio',\n        role: 'radio'\n      }\n    });\n\n    var ResizeHandle = Widget.extend({\n      renderHtml: function () {\n        var self = this, prefix = self.classPrefix;\n        self.classes.add('resizehandle');\n        if (self.settings.direction === 'both') {\n          self.classes.add('resizehandle-both');\n        }\n        self.canFocus = false;\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\">' + '<i class=\"' + prefix + 'ico ' + prefix + 'i-resize\"></i>' + '</div>';\n      },\n      postRender: function () {\n        var self = this;\n        self._super();\n        self.resizeDragHelper = new DragHelper(this._id, {\n          start: function () {\n            self.fire('ResizeStart');\n          },\n          drag: function (e) {\n            if (self.settings.direction !== 'both') {\n              e.deltaX = 0;\n            }\n            self.fire('Resize', e);\n          },\n          stop: function () {\n            self.fire('ResizeEnd');\n          }\n        });\n      },\n      remove: function () {\n        if (this.resizeDragHelper) {\n          this.resizeDragHelper.destroy();\n        }\n        return this._super();\n      }\n    });\n\n    function createOptions(options) {\n      var strOptions = '';\n      if (options) {\n        for (var i = 0; i < options.length; i++) {\n          strOptions += '<option value=\"' + options[i] + '\">' + options[i] + '</option>';\n        }\n      }\n      return strOptions;\n    }\n    var SelectBox = Widget.extend({\n      Defaults: {\n        classes: 'selectbox',\n        role: 'selectbox',\n        options: []\n      },\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        if (self.settings.size) {\n          self.size = self.settings.size;\n        }\n        if (self.settings.options) {\n          self._options = self.settings.options;\n        }\n        self.on('keydown', function (e) {\n          var rootControl;\n          if (e.keyCode === 13) {\n            e.preventDefault();\n            self.parents().reverse().each(function (ctrl) {\n              if (ctrl.toJSON) {\n                rootControl = ctrl;\n                return false;\n              }\n            });\n            self.fire('submit', { data: rootControl.toJSON() });\n          }\n        });\n      },\n      options: function (state) {\n        if (!arguments.length) {\n          return this.state.get('options');\n        }\n        this.state.set('options', state);\n        return this;\n      },\n      renderHtml: function () {\n        var self = this;\n        var options, size = '';\n        options = createOptions(self._options);\n        if (self.size) {\n          size = ' size = \"' + self.size + '\"';\n        }\n        return '<select id=\"' + self._id + '\" class=\"' + self.classes + '\"' + size + '>' + options + '</select>';\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:options', function (e) {\n          self.getEl().innerHTML = createOptions(e.value);\n        });\n        return self._super();\n      }\n    });\n\n    function constrain(value, minVal, maxVal) {\n      if (value < minVal) {\n        value = minVal;\n      }\n      if (value > maxVal) {\n        value = maxVal;\n      }\n      return value;\n    }\n    function setAriaProp(el, name, value) {\n      el.setAttribute('aria-' + name, value);\n    }\n    function updateSliderHandle(ctrl, value) {\n      var maxHandlePos, shortSizeName, sizeName, stylePosName, styleValue, handleEl;\n      if (ctrl.settings.orientation === 'v') {\n        stylePosName = 'top';\n        sizeName = 'height';\n        shortSizeName = 'h';\n      } else {\n        stylePosName = 'left';\n        sizeName = 'width';\n        shortSizeName = 'w';\n      }\n      handleEl = ctrl.getEl('handle');\n      maxHandlePos = (ctrl.layoutRect()[shortSizeName] || 100) - funcs.getSize(handleEl)[sizeName];\n      styleValue = maxHandlePos * ((value - ctrl._minValue) / (ctrl._maxValue - ctrl._minValue)) + 'px';\n      handleEl.style[stylePosName] = styleValue;\n      handleEl.style.height = ctrl.layoutRect().h + 'px';\n      setAriaProp(handleEl, 'valuenow', value);\n      setAriaProp(handleEl, 'valuetext', '' + ctrl.settings.previewFilter(value));\n      setAriaProp(handleEl, 'valuemin', ctrl._minValue);\n      setAriaProp(handleEl, 'valuemax', ctrl._maxValue);\n    }\n    var Slider = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        if (!settings.previewFilter) {\n          settings.previewFilter = function (value) {\n            return Math.round(value * 100) / 100;\n          };\n        }\n        self._super(settings);\n        self.classes.add('slider');\n        if (settings.orientation === 'v') {\n          self.classes.add('vertical');\n        }\n        self._minValue = isNumber(settings.minValue) ? settings.minValue : 0;\n        self._maxValue = isNumber(settings.maxValue) ? settings.maxValue : 100;\n        self._initValue = self.state.get('value');\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, prefix = self.classPrefix;\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\">' + '<div id=\"' + id + '-handle\" class=\"' + prefix + 'slider-handle\" role=\"slider\" tabindex=\"-1\"></div>' + '</div>';\n      },\n      reset: function () {\n        this.value(this._initValue).repaint();\n      },\n      postRender: function () {\n        var self = this;\n        var minValue, maxValue, screenCordName, stylePosName, sizeName, shortSizeName;\n        function toFraction(min, max, val) {\n          return (val + min) / (max - min);\n        }\n        function fromFraction(min, max, val) {\n          return val * (max - min) - min;\n        }\n        function handleKeyboard(minValue, maxValue) {\n          function alter(delta) {\n            var value;\n            value = self.value();\n            value = fromFraction(minValue, maxValue, toFraction(minValue, maxValue, value) + delta * 0.05);\n            value = constrain(value, minValue, maxValue);\n            self.value(value);\n            self.fire('dragstart', { value: value });\n            self.fire('drag', { value: value });\n            self.fire('dragend', { value: value });\n          }\n          self.on('keydown', function (e) {\n            switch (e.keyCode) {\n            case 37:\n            case 38:\n              alter(-1);\n              break;\n            case 39:\n            case 40:\n              alter(1);\n              break;\n            }\n          });\n        }\n        function handleDrag(minValue, maxValue, handleEl) {\n          var startPos, startHandlePos, maxHandlePos, handlePos, value;\n          self._dragHelper = new DragHelper(self._id, {\n            handle: self._id + '-handle',\n            start: function (e) {\n              startPos = e[screenCordName];\n              startHandlePos = parseInt(self.getEl('handle').style[stylePosName], 10);\n              maxHandlePos = (self.layoutRect()[shortSizeName] || 100) - funcs.getSize(handleEl)[sizeName];\n              self.fire('dragstart', { value: value });\n            },\n            drag: function (e) {\n              var delta = e[screenCordName] - startPos;\n              handlePos = constrain(startHandlePos + delta, 0, maxHandlePos);\n              handleEl.style[stylePosName] = handlePos + 'px';\n              value = minValue + handlePos / maxHandlePos * (maxValue - minValue);\n              self.value(value);\n              self.tooltip().text('' + self.settings.previewFilter(value)).show().moveRel(handleEl, 'bc tc');\n              self.fire('drag', { value: value });\n            },\n            stop: function () {\n              self.tooltip().hide();\n              self.fire('dragend', { value: value });\n            }\n          });\n        }\n        minValue = self._minValue;\n        maxValue = self._maxValue;\n        if (self.settings.orientation === 'v') {\n          screenCordName = 'screenY';\n          stylePosName = 'top';\n          sizeName = 'height';\n          shortSizeName = 'h';\n        } else {\n          screenCordName = 'screenX';\n          stylePosName = 'left';\n          sizeName = 'width';\n          shortSizeName = 'w';\n        }\n        self._super();\n        handleKeyboard(minValue, maxValue);\n        handleDrag(minValue, maxValue, self.getEl('handle'));\n      },\n      repaint: function () {\n        this._super();\n        updateSliderHandle(this, this.value());\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:value', function (e) {\n          updateSliderHandle(self, e.value);\n        });\n        return self._super();\n      }\n    });\n\n    var Spacer = Widget.extend({\n      renderHtml: function () {\n        var self = this;\n        self.classes.add('spacer');\n        self.canFocus = false;\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\"></div>';\n      }\n    });\n\n    var SplitButton = MenuButton.extend({\n      Defaults: {\n        classes: 'widget btn splitbtn',\n        role: 'button'\n      },\n      repaint: function () {\n        var self = this;\n        var elm = self.getEl();\n        var rect = self.layoutRect();\n        var mainButtonElm, menuButtonElm;\n        self._super();\n        mainButtonElm = elm.firstChild;\n        menuButtonElm = elm.lastChild;\n        global$9(mainButtonElm).css({\n          width: rect.w - funcs.getSize(menuButtonElm).width,\n          height: rect.h - 2\n        });\n        global$9(menuButtonElm).css({ height: rect.h - 2 });\n        return self;\n      },\n      activeMenu: function (state) {\n        var self = this;\n        global$9(self.getEl().lastChild).toggleClass(self.classPrefix + 'active', state);\n      },\n      renderHtml: function () {\n        var self = this;\n        var id = self._id;\n        var prefix = self.classPrefix;\n        var image;\n        var icon = self.state.get('icon');\n        var text = self.state.get('text');\n        var settings = self.settings;\n        var textHtml = '', ariaPressed;\n        image = settings.image;\n        if (image) {\n          icon = 'none';\n          if (typeof image !== 'string') {\n            image = domGlobals.window.getSelection ? image[0] : image[1];\n          }\n          image = ' style=\"background-image: url(\\'' + image + '\\')\"';\n        } else {\n          image = '';\n        }\n        icon = settings.icon ? prefix + 'ico ' + prefix + 'i-' + icon : '';\n        if (text) {\n          self.classes.add('btn-has-text');\n          textHtml = '<span class=\"' + prefix + 'txt\">' + self.encode(text) + '</span>';\n        }\n        ariaPressed = typeof settings.active === 'boolean' ? ' aria-pressed=\"' + settings.active + '\"' : '';\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" role=\"button\"' + ariaPressed + ' tabindex=\"-1\">' + '<button type=\"button\" hidefocus=\"1\" tabindex=\"-1\">' + (icon ? '<i class=\"' + icon + '\"' + image + '></i>' : '') + textHtml + '</button>' + '<button type=\"button\" class=\"' + prefix + 'open\" hidefocus=\"1\" tabindex=\"-1\">' + (self._menuBtnText ? (icon ? '\\xA0' : '') + self._menuBtnText : '') + ' <i class=\"' + prefix + 'caret\"></i>' + '</button>' + '</div>';\n      },\n      postRender: function () {\n        var self = this, onClickHandler = self.settings.onclick;\n        self.on('click', function (e) {\n          var node = e.target;\n          if (e.control === this) {\n            while (node) {\n              if (e.aria && e.aria.key !== 'down' || node.nodeName === 'BUTTON' && node.className.indexOf('open') === -1) {\n                e.stopImmediatePropagation();\n                if (onClickHandler) {\n                  onClickHandler.call(this, e);\n                }\n                return;\n              }\n              node = node.parentNode;\n            }\n          }\n        });\n        delete self.settings.onclick;\n        return self._super();\n      }\n    });\n\n    var StackLayout = FlowLayout.extend({\n      Defaults: {\n        containerClass: 'stack-layout',\n        controlClass: 'stack-layout-item',\n        endClass: 'break'\n      },\n      isNative: function () {\n        return true;\n      }\n    });\n\n    var TabPanel = Panel.extend({\n      Defaults: {\n        layout: 'absolute',\n        defaults: { type: 'panel' }\n      },\n      activateTab: function (idx) {\n        var activeTabElm;\n        if (this.activeTabId) {\n          activeTabElm = this.getEl(this.activeTabId);\n          global$9(activeTabElm).removeClass(this.classPrefix + 'active');\n          activeTabElm.setAttribute('aria-selected', 'false');\n        }\n        this.activeTabId = 't' + idx;\n        activeTabElm = this.getEl('t' + idx);\n        activeTabElm.setAttribute('aria-selected', 'true');\n        global$9(activeTabElm).addClass(this.classPrefix + 'active');\n        this.items()[idx].show().fire('showtab');\n        this.reflow();\n        this.items().each(function (item, i) {\n          if (idx !== i) {\n            item.hide();\n          }\n        });\n      },\n      renderHtml: function () {\n        var self = this;\n        var layout = self._layout;\n        var tabsHtml = '';\n        var prefix = self.classPrefix;\n        self.preRender();\n        layout.preRender(self);\n        self.items().each(function (ctrl, i) {\n          var id = self._id + '-t' + i;\n          ctrl.aria('role', 'tabpanel');\n          ctrl.aria('labelledby', id);\n          tabsHtml += '<div id=\"' + id + '\" class=\"' + prefix + 'tab\" ' + 'unselectable=\"on\" role=\"tab\" aria-controls=\"' + ctrl._id + '\" aria-selected=\"false\" tabIndex=\"-1\">' + self.encode(ctrl.settings.title) + '</div>';\n        });\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\" hidefocus=\"1\" tabindex=\"-1\">' + '<div id=\"' + self._id + '-head\" class=\"' + prefix + 'tabs\" role=\"tablist\">' + tabsHtml + '</div>' + '<div id=\"' + self._id + '-body\" class=\"' + self.bodyClasses + '\">' + layout.renderHtml(self) + '</div>' + '</div>';\n      },\n      postRender: function () {\n        var self = this;\n        self._super();\n        self.settings.activeTab = self.settings.activeTab || 0;\n        self.activateTab(self.settings.activeTab);\n        this.on('click', function (e) {\n          var targetParent = e.target.parentNode;\n          if (targetParent && targetParent.id === self._id + '-head') {\n            var i = targetParent.childNodes.length;\n            while (i--) {\n              if (targetParent.childNodes[i] === e.target) {\n                self.activateTab(i);\n              }\n            }\n          }\n        });\n      },\n      initLayoutRect: function () {\n        var self = this;\n        var rect, minW, minH;\n        minW = funcs.getSize(self.getEl('head')).width;\n        minW = minW < 0 ? 0 : minW;\n        minH = 0;\n        self.items().each(function (item) {\n          minW = Math.max(minW, item.layoutRect().minW);\n          minH = Math.max(minH, item.layoutRect().minH);\n        });\n        self.items().each(function (ctrl) {\n          ctrl.settings.x = 0;\n          ctrl.settings.y = 0;\n          ctrl.settings.w = minW;\n          ctrl.settings.h = minH;\n          ctrl.layoutRect({\n            x: 0,\n            y: 0,\n            w: minW,\n            h: minH\n          });\n        });\n        var headH = funcs.getSize(self.getEl('head')).height;\n        self.settings.minWidth = minW;\n        self.settings.minHeight = minH + headH;\n        rect = self._super();\n        rect.deltaH += headH;\n        rect.innerH = rect.h - rect.deltaH;\n        return rect;\n      }\n    });\n\n    var TextBox = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.classes.add('textbox');\n        if (settings.multiline) {\n          self.classes.add('multiline');\n        } else {\n          self.on('keydown', function (e) {\n            var rootControl;\n            if (e.keyCode === 13) {\n              e.preventDefault();\n              self.parents().reverse().each(function (ctrl) {\n                if (ctrl.toJSON) {\n                  rootControl = ctrl;\n                  return false;\n                }\n              });\n              self.fire('submit', { data: rootControl.toJSON() });\n            }\n          });\n          self.on('keyup', function (e) {\n            self.state.set('value', e.target.value);\n          });\n        }\n      },\n      repaint: function () {\n        var self = this;\n        var style, rect, borderBox, borderW, borderH = 0, lastRepaintRect;\n        style = self.getEl().style;\n        rect = self._layoutRect;\n        lastRepaintRect = self._lastRepaintRect || {};\n        var doc = domGlobals.document;\n        if (!self.settings.multiline && doc.all && (!doc.documentMode || doc.documentMode <= 8)) {\n          style.lineHeight = rect.h - borderH + 'px';\n        }\n        borderBox = self.borderBox;\n        borderW = borderBox.left + borderBox.right + 8;\n        borderH = borderBox.top + borderBox.bottom + (self.settings.multiline ? 8 : 0);\n        if (rect.x !== lastRepaintRect.x) {\n          style.left = rect.x + 'px';\n          lastRepaintRect.x = rect.x;\n        }\n        if (rect.y !== lastRepaintRect.y) {\n          style.top = rect.y + 'px';\n          lastRepaintRect.y = rect.y;\n        }\n        if (rect.w !== lastRepaintRect.w) {\n          style.width = rect.w - borderW + 'px';\n          lastRepaintRect.w = rect.w;\n        }\n        if (rect.h !== lastRepaintRect.h) {\n          style.height = rect.h - borderH + 'px';\n          lastRepaintRect.h = rect.h;\n        }\n        self._lastRepaintRect = lastRepaintRect;\n        self.fire('repaint', {}, false);\n        return self;\n      },\n      renderHtml: function () {\n        var self = this;\n        var settings = self.settings;\n        var attrs, elm;\n        attrs = {\n          id: self._id,\n          hidefocus: '1'\n        };\n        global$2.each([\n          'rows',\n          'spellcheck',\n          'maxLength',\n          'size',\n          'readonly',\n          'min',\n          'max',\n          'step',\n          'list',\n          'pattern',\n          'placeholder',\n          'required',\n          'multiple'\n        ], function (name) {\n          attrs[name] = settings[name];\n        });\n        if (self.disabled()) {\n          attrs.disabled = 'disabled';\n        }\n        if (settings.subtype) {\n          attrs.type = settings.subtype;\n        }\n        elm = funcs.create(settings.multiline ? 'textarea' : 'input', attrs);\n        elm.value = self.state.get('value');\n        elm.className = self.classes.toString();\n        return elm.outerHTML;\n      },\n      value: function (value) {\n        if (arguments.length) {\n          this.state.set('value', value);\n          return this;\n        }\n        if (this.state.get('rendered')) {\n          this.state.set('value', this.getEl().value);\n        }\n        return this.state.get('value');\n      },\n      postRender: function () {\n        var self = this;\n        self.getEl().value = self.state.get('value');\n        self._super();\n        self.$el.on('change', function (e) {\n          self.state.set('value', e.target.value);\n          self.fire('change', e);\n        });\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:value', function (e) {\n          if (self.getEl().value !== e.value) {\n            self.getEl().value = e.value;\n          }\n        });\n        self.state.on('change:disabled', function (e) {\n          self.getEl().disabled = e.value;\n        });\n        return self._super();\n      },\n      remove: function () {\n        this.$el.off();\n        this._super();\n      }\n    });\n\n    var getApi = function () {\n      return {\n        Selector: Selector,\n        Collection: Collection$2,\n        ReflowQueue: ReflowQueue,\n        Control: Control$1,\n        Factory: global$4,\n        KeyboardNavigation: KeyboardNavigation,\n        Container: Container,\n        DragHelper: DragHelper,\n        Scrollable: Scrollable,\n        Panel: Panel,\n        Movable: Movable,\n        Resizable: Resizable,\n        FloatPanel: FloatPanel,\n        Window: Window,\n        MessageBox: MessageBox,\n        Tooltip: Tooltip,\n        Widget: Widget,\n        Progress: Progress,\n        Notification: Notification,\n        Layout: Layout,\n        AbsoluteLayout: AbsoluteLayout,\n        Button: Button,\n        ButtonGroup: ButtonGroup,\n        Checkbox: Checkbox,\n        ComboBox: ComboBox,\n        ColorBox: ColorBox,\n        PanelButton: PanelButton,\n        ColorButton: ColorButton,\n        ColorPicker: ColorPicker,\n        Path: Path,\n        ElementPath: ElementPath,\n        FormItem: FormItem,\n        Form: Form,\n        FieldSet: FieldSet,\n        FilePicker: FilePicker,\n        FitLayout: FitLayout,\n        FlexLayout: FlexLayout,\n        FlowLayout: FlowLayout,\n        FormatControls: FormatControls,\n        GridLayout: GridLayout,\n        Iframe: Iframe$1,\n        InfoBox: InfoBox,\n        Label: Label,\n        Toolbar: Toolbar$1,\n        MenuBar: MenuBar,\n        MenuButton: MenuButton,\n        MenuItem: MenuItem,\n        Throbber: Throbber,\n        Menu: Menu,\n        ListBox: ListBox,\n        Radio: Radio,\n        ResizeHandle: ResizeHandle,\n        SelectBox: SelectBox,\n        Slider: Slider,\n        Spacer: Spacer,\n        SplitButton: SplitButton,\n        StackLayout: StackLayout,\n        TabPanel: TabPanel,\n        TextBox: TextBox,\n        DropZone: DropZone,\n        BrowseButton: BrowseButton\n      };\n    };\n    var appendTo = function (target) {\n      if (target.ui) {\n        global$2.each(getApi(), function (ref, key) {\n          target.ui[key] = ref;\n        });\n      } else {\n        target.ui = getApi();\n      }\n    };\n    var registerToFactory = function () {\n      global$2.each(getApi(), function (ref, key) {\n        global$4.add(key, ref);\n      });\n    };\n    var Api = {\n      appendTo: appendTo,\n      registerToFactory: registerToFactory\n    };\n\n    Api.registerToFactory();\n    Api.appendTo(window.tinymce ? window.tinymce : {});\n    global.add('modern', function (editor) {\n      FormatControls.setup(editor);\n      return ThemeApi.get(editor);\n    });\n    function Theme () {\n    }\n\n    return Theme;\n\n}(window));\n})();\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","(function () {\nvar paste = (function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var hasProPlugin = function (editor) {\n      if (/(^|[ ,])powerpaste([, ]|$)/.test(editor.settings.plugins) && global$1.get('powerpaste')) {\n        if (typeof domGlobals.window.console !== 'undefined' && domGlobals.window.console.log) {\n          domGlobals.window.console.log('PowerPaste is incompatible with Paste plugin! Remove \\'paste\\' from the \\'plugins\\' option.');\n        }\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var DetectProPlugin = { hasProPlugin: hasProPlugin };\n\n    var get = function (clipboard, quirks) {\n      return {\n        clipboard: clipboard,\n        quirks: quirks\n      };\n    };\n    var Api = { get: get };\n\n    var firePastePreProcess = function (editor, html, internal, isWordHtml) {\n      return editor.fire('PastePreProcess', {\n        content: html,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePostProcess = function (editor, node, internal, isWordHtml) {\n      return editor.fire('PastePostProcess', {\n        node: node,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePlainTextToggle = function (editor, state) {\n      return editor.fire('PastePlainTextToggle', { state: state });\n    };\n    var firePaste = function (editor, ieFake) {\n      return editor.fire('paste', { ieFake: ieFake });\n    };\n    var Events = {\n      firePastePreProcess: firePastePreProcess,\n      firePastePostProcess: firePastePostProcess,\n      firePastePlainTextToggle: firePastePlainTextToggle,\n      firePaste: firePaste\n    };\n\n    var shouldPlainTextInform = function (editor) {\n      return editor.getParam('paste_plaintext_inform', true);\n    };\n    var shouldBlockDrop = function (editor) {\n      return editor.getParam('paste_block_drop', false);\n    };\n    var shouldPasteDataImages = function (editor) {\n      return editor.getParam('paste_data_images', false);\n    };\n    var shouldFilterDrop = function (editor) {\n      return editor.getParam('paste_filter_drop', true);\n    };\n    var getPreProcess = function (editor) {\n      return editor.getParam('paste_preprocess');\n    };\n    var getPostProcess = function (editor) {\n      return editor.getParam('paste_postprocess');\n    };\n    var getWebkitStyles = function (editor) {\n      return editor.getParam('paste_webkit_styles');\n    };\n    var shouldRemoveWebKitStyles = function (editor) {\n      return editor.getParam('paste_remove_styles_if_webkit', true);\n    };\n    var shouldMergeFormats = function (editor) {\n      return editor.getParam('paste_merge_formats', true);\n    };\n    var isSmartPasteEnabled = function (editor) {\n      return editor.getParam('smart_paste', true);\n    };\n    var isPasteAsTextEnabled = function (editor) {\n      return editor.getParam('paste_as_text', false);\n    };\n    var getRetainStyleProps = function (editor) {\n      return editor.getParam('paste_retain_style_properties');\n    };\n    var getWordValidElements = function (editor) {\n      var defaultValidElements = '-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,' + '-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,' + 'td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody';\n      return editor.getParam('paste_word_valid_elements', defaultValidElements);\n    };\n    var shouldConvertWordFakeLists = function (editor) {\n      return editor.getParam('paste_convert_word_fake_lists', true);\n    };\n    var shouldUseDefaultFilters = function (editor) {\n      return editor.getParam('paste_enable_default_filters', true);\n    };\n    var Settings = {\n      shouldPlainTextInform: shouldPlainTextInform,\n      shouldBlockDrop: shouldBlockDrop,\n      shouldPasteDataImages: shouldPasteDataImages,\n      shouldFilterDrop: shouldFilterDrop,\n      getPreProcess: getPreProcess,\n      getPostProcess: getPostProcess,\n      getWebkitStyles: getWebkitStyles,\n      shouldRemoveWebKitStyles: shouldRemoveWebKitStyles,\n      shouldMergeFormats: shouldMergeFormats,\n      isSmartPasteEnabled: isSmartPasteEnabled,\n      isPasteAsTextEnabled: isPasteAsTextEnabled,\n      getRetainStyleProps: getRetainStyleProps,\n      getWordValidElements: getWordValidElements,\n      shouldConvertWordFakeLists: shouldConvertWordFakeLists,\n      shouldUseDefaultFilters: shouldUseDefaultFilters\n    };\n\n    var shouldInformUserAboutPlainText = function (editor, userIsInformedState) {\n      return userIsInformedState.get() === false && Settings.shouldPlainTextInform(editor);\n    };\n    var displayNotification = function (editor, message) {\n      editor.notificationManager.open({\n        text: editor.translate(message),\n        type: 'info'\n      });\n    };\n    var togglePlainTextPaste = function (editor, clipboard, userIsInformedState) {\n      if (clipboard.pasteFormat.get() === 'text') {\n        clipboard.pasteFormat.set('html');\n        Events.firePastePlainTextToggle(editor, false);\n      } else {\n        clipboard.pasteFormat.set('text');\n        Events.firePastePlainTextToggle(editor, true);\n        if (shouldInformUserAboutPlainText(editor, userIsInformedState)) {\n          displayNotification(editor, 'Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.');\n          userIsInformedState.set(true);\n        }\n      }\n      editor.focus();\n    };\n    var Actions = { togglePlainTextPaste: togglePlainTextPaste };\n\n    var register = function (editor, clipboard, userIsInformedState) {\n      editor.addCommand('mceTogglePlainTextPaste', function () {\n        Actions.togglePlainTextPaste(editor, clipboard, userIsInformedState);\n      });\n      editor.addCommand('mceInsertClipboardContent', function (ui, value) {\n        if (value.content) {\n          clipboard.pasteHtml(value.content, value.internal);\n        }\n        if (value.text) {\n          clipboard.pasteText(value.text);\n        }\n      });\n    };\n    var Commands = { register: register };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var internalMimeType = 'x-tinymce/html';\n    var internalMark = '<!-- ' + internalMimeType + ' -->';\n    var mark = function (html) {\n      return internalMark + html;\n    };\n    var unmark = function (html) {\n      return html.replace(internalMark, '');\n    };\n    var isMarked = function (html) {\n      return html.indexOf(internalMark) !== -1;\n    };\n    var InternalHtml = {\n      mark: mark,\n      unmark: unmark,\n      isMarked: isMarked,\n      internalHtmlMime: function () {\n        return internalMimeType;\n      }\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    var isPlainText = function (text) {\n      return !/<(?:\\/?(?!(?:div|p|br|span)>)\\w+|(?:(?!(?:span style=\"white-space:\\s?pre;?\">)|br\\s?\\/>))\\w+\\s[^>]+)>/i.test(text);\n    };\n    var toBRs = function (text) {\n      return text.replace(/\\r?\\n/g, '<br>');\n    };\n    var openContainer = function (rootTag, rootAttrs) {\n      var key;\n      var attrs = [];\n      var tag = '<' + rootTag;\n      if (typeof rootAttrs === 'object') {\n        for (key in rootAttrs) {\n          if (rootAttrs.hasOwnProperty(key)) {\n            attrs.push(key + '=\"' + global$6.encodeAllRaw(rootAttrs[key]) + '\"');\n          }\n        }\n        if (attrs.length) {\n          tag += ' ' + attrs.join(' ');\n        }\n      }\n      return tag + '>';\n    };\n    var toBlockElements = function (text, rootTag, rootAttrs) {\n      var blocks = text.split(/\\n\\n/);\n      var tagOpen = openContainer(rootTag, rootAttrs);\n      var tagClose = '</' + rootTag + '>';\n      var paragraphs = global$4.map(blocks, function (p) {\n        return p.split(/\\n/).join('<br />');\n      });\n      var stitch = function (p) {\n        return tagOpen + p + tagClose;\n      };\n      return paragraphs.length === 1 ? paragraphs[0] : global$4.map(paragraphs, stitch).join('');\n    };\n    var convert = function (text, rootTag, rootAttrs) {\n      return rootTag ? toBlockElements(text, rootTag, rootAttrs) : toBRs(text);\n    };\n    var Newlines = {\n      isPlainText: isPlainText,\n      convert: convert,\n      toBRs: toBRs,\n      toBlockElements: toBlockElements\n    };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.html.DomParser');\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.html.Serializer');\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.html.Node');\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.html.Schema');\n\n    function filter(content, items) {\n      global$4.each(items, function (v) {\n        if (v.constructor === RegExp) {\n          content = content.replace(v, '');\n        } else {\n          content = content.replace(v[0], v[1]);\n        }\n      });\n      return content;\n    }\n    function innerText(html) {\n      var schema = global$a();\n      var domParser = global$7({}, schema);\n      var text = '';\n      var shortEndedElements = schema.getShortEndedElements();\n      var ignoreElements = global$4.makeMap('script noscript style textarea video audio iframe object', ' ');\n      var blockElements = schema.getBlockElements();\n      function walk(node) {\n        var name = node.name, currentNode = node;\n        if (name === 'br') {\n          text += '\\n';\n          return;\n        }\n        if (name === 'wbr') {\n          return;\n        }\n        if (shortEndedElements[name]) {\n          text += ' ';\n        }\n        if (ignoreElements[name]) {\n          text += ' ';\n          return;\n        }\n        if (node.type === 3) {\n          text += node.value;\n        }\n        if (!node.shortEnded) {\n          if (node = node.firstChild) {\n            do {\n              walk(node);\n            } while (node = node.next);\n          }\n        }\n        if (blockElements[name] && currentNode.next) {\n          text += '\\n';\n          if (name === 'p') {\n            text += '\\n';\n          }\n        }\n      }\n      html = filter(html, [/<!\\[[^\\]]+\\]>/g]);\n      walk(domParser.parse(html));\n      return text;\n    }\n    function trimHtml(html) {\n      function trimSpaces(all, s1, s2) {\n        if (!s1 && !s2) {\n          return ' ';\n        }\n        return '\\xA0';\n      }\n      html = filter(html, [\n        /^[\\s\\S]*<body[^>]*>\\s*|\\s*<\\/body[^>]*>[\\s\\S]*$/ig,\n        /<!--StartFragment-->|<!--EndFragment-->/g,\n        [\n          /( ?)<span class=\"Apple-converted-space\">\\u00a0<\\/span>( ?)/g,\n          trimSpaces\n        ],\n        /<br class=\"Apple-interchange-newline\">/g,\n        /<br>$/i\n      ]);\n      return html;\n    }\n    function createIdGenerator(prefix) {\n      var count = 0;\n      return function () {\n        return prefix + count++;\n      };\n    }\n    var isMsEdge = function () {\n      return domGlobals.navigator.userAgent.indexOf(' Edge/') !== -1;\n    };\n    var Utils = {\n      filter: filter,\n      innerText: innerText,\n      trimHtml: trimHtml,\n      createIdGenerator: createIdGenerator,\n      isMsEdge: isMsEdge\n    };\n\n    function isWordContent(content) {\n      return /<font face=\"Times New Roman\"|class=\"?Mso|style=\"[^\"]*\\bmso-|style='[^'']*\\bmso-|w:WordDocument/i.test(content) || /class=\"OutlineElement/.test(content) || /id=\"?docs\\-internal\\-guid\\-/.test(content);\n    }\n    function isNumericList(text) {\n      var found, patterns;\n      patterns = [\n        /^[IVXLMCD]{1,2}\\.[ \\u00a0]/,\n        /^[ivxlmcd]{1,2}\\.[ \\u00a0]/,\n        /^[a-z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[A-Z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[0-9]+\\.[ \\u00a0]/,\n        /^[\\u3007\\u4e00\\u4e8c\\u4e09\\u56db\\u4e94\\u516d\\u4e03\\u516b\\u4e5d]+\\.[ \\u00a0]/,\n        /^[\\u58f1\\u5f10\\u53c2\\u56db\\u4f0d\\u516d\\u4e03\\u516b\\u4e5d\\u62fe]+\\.[ \\u00a0]/\n      ];\n      text = text.replace(/^[\\u00a0 ]+/, '');\n      global$4.each(patterns, function (pattern) {\n        if (pattern.test(text)) {\n          found = true;\n          return false;\n        }\n      });\n      return found;\n    }\n    function isBulletList(text) {\n      return /^[\\s\\u00a0]*[\\u2022\\u00b7\\u00a7\\u25CF]\\s*/.test(text);\n    }\n    function convertFakeListsToProperLists(node) {\n      var currentListNode, prevListNode, lastLevel = 1;\n      function getText(node) {\n        var txt = '';\n        if (node.type === 3) {\n          return node.value;\n        }\n        if (node = node.firstChild) {\n          do {\n            txt += getText(node);\n          } while (node = node.next);\n        }\n        return txt;\n      }\n      function trimListStart(node, regExp) {\n        if (node.type === 3) {\n          if (regExp.test(node.value)) {\n            node.value = node.value.replace(regExp, '');\n            return false;\n          }\n        }\n        if (node = node.firstChild) {\n          do {\n            if (!trimListStart(node, regExp)) {\n              return false;\n            }\n          } while (node = node.next);\n        }\n        return true;\n      }\n      function removeIgnoredNodes(node) {\n        if (node._listIgnore) {\n          node.remove();\n          return;\n        }\n        if (node = node.firstChild) {\n          do {\n            removeIgnoredNodes(node);\n          } while (node = node.next);\n        }\n      }\n      function convertParagraphToLi(paragraphNode, listName, start) {\n        var level = paragraphNode._listLevel || lastLevel;\n        if (level !== lastLevel) {\n          if (level < lastLevel) {\n            if (currentListNode) {\n              currentListNode = currentListNode.parent.parent;\n            }\n          } else {\n            prevListNode = currentListNode;\n            currentListNode = null;\n          }\n        }\n        if (!currentListNode || currentListNode.name !== listName) {\n          prevListNode = prevListNode || currentListNode;\n          currentListNode = new global$9(listName, 1);\n          if (start > 1) {\n            currentListNode.attr('start', '' + start);\n          }\n          paragraphNode.wrap(currentListNode);\n        } else {\n          currentListNode.append(paragraphNode);\n        }\n        paragraphNode.name = 'li';\n        if (level > lastLevel && prevListNode) {\n          prevListNode.lastChild.append(currentListNode);\n        }\n        lastLevel = level;\n        removeIgnoredNodes(paragraphNode);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n        trimListStart(paragraphNode, /^\\s*([\\u2022\\u00b7\\u00a7\\u25CF]|\\w+\\.)/);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n      }\n      var elements = [];\n      var child = node.firstChild;\n      while (typeof child !== 'undefined' && child !== null) {\n        elements.push(child);\n        child = child.walk();\n        if (child !== null) {\n          while (typeof child !== 'undefined' && child.parent !== node) {\n            child = child.walk();\n          }\n        }\n      }\n      for (var i = 0; i < elements.length; i++) {\n        node = elements[i];\n        if (node.name === 'p' && node.firstChild) {\n          var nodeText = getText(node);\n          if (isBulletList(nodeText)) {\n            convertParagraphToLi(node, 'ul');\n            continue;\n          }\n          if (isNumericList(nodeText)) {\n            var matches = /([0-9]+)\\./.exec(nodeText);\n            var start = 1;\n            if (matches) {\n              start = parseInt(matches[1], 10);\n            }\n            convertParagraphToLi(node, 'ol', start);\n            continue;\n          }\n          if (node._listLevel) {\n            convertParagraphToLi(node, 'ul', 1);\n            continue;\n          }\n          currentListNode = null;\n        } else {\n          prevListNode = currentListNode;\n          currentListNode = null;\n        }\n      }\n    }\n    function filterStyles(editor, validStyles, node, styleValue) {\n      var outputStyles = {}, matches;\n      var styles = editor.dom.parseStyle(styleValue);\n      global$4.each(styles, function (value, name) {\n        switch (name) {\n        case 'mso-list':\n          matches = /\\w+ \\w+([0-9]+)/i.exec(styleValue);\n          if (matches) {\n            node._listLevel = parseInt(matches[1], 10);\n          }\n          if (/Ignore/i.test(value) && node.firstChild) {\n            node._listIgnore = true;\n            node.firstChild._listIgnore = true;\n          }\n          break;\n        case 'horiz-align':\n          name = 'text-align';\n          break;\n        case 'vert-align':\n          name = 'vertical-align';\n          break;\n        case 'font-color':\n        case 'mso-foreground':\n          name = 'color';\n          break;\n        case 'mso-background':\n        case 'mso-highlight':\n          name = 'background';\n          break;\n        case 'font-weight':\n        case 'font-style':\n          if (value !== 'normal') {\n            outputStyles[name] = value;\n          }\n          return;\n        case 'mso-element':\n          if (/^(comment|comment-list)$/i.test(value)) {\n            node.remove();\n            return;\n          }\n          break;\n        }\n        if (name.indexOf('mso-comment') === 0) {\n          node.remove();\n          return;\n        }\n        if (name.indexOf('mso-') === 0) {\n          return;\n        }\n        if (Settings.getRetainStyleProps(editor) === 'all' || validStyles && validStyles[name]) {\n          outputStyles[name] = value;\n        }\n      });\n      if (/(bold)/i.test(outputStyles['font-weight'])) {\n        delete outputStyles['font-weight'];\n        node.wrap(new global$9('b', 1));\n      }\n      if (/(italic)/i.test(outputStyles['font-style'])) {\n        delete outputStyles['font-style'];\n        node.wrap(new global$9('i', 1));\n      }\n      outputStyles = editor.dom.serializeStyle(outputStyles, node.name);\n      if (outputStyles) {\n        return outputStyles;\n      }\n      return null;\n    }\n    var filterWordContent = function (editor, content) {\n      var retainStyleProperties, validStyles;\n      retainStyleProperties = Settings.getRetainStyleProps(editor);\n      if (retainStyleProperties) {\n        validStyles = global$4.makeMap(retainStyleProperties.split(/[, ]/));\n      }\n      content = Utils.filter(content, [\n        /<br class=\"?Apple-interchange-newline\"?>/gi,\n        /<b[^>]+id=\"?docs-internal-[^>]*>/gi,\n        /<!--[\\s\\S]+?-->/gi,\n        /<(!|script[^>]*>.*?<\\/script(?=[>\\s])|\\/?(\\?xml(:\\w+)?|img|meta|link|style|\\w:\\w+)(?=[\\s\\/>]))[^>]*>/gi,\n        [\n          /<(\\/?)s>/gi,\n          '<$1strike>'\n        ],\n        [\n          /&nbsp;/gi,\n          '\\xA0'\n        ],\n        [\n          /<span\\s+style\\s*=\\s*\"\\s*mso-spacerun\\s*:\\s*yes\\s*;?\\s*\"\\s*>([\\s\\u00a0]*)<\\/span>/gi,\n          function (str, spaces) {\n            return spaces.length > 0 ? spaces.replace(/./, ' ').slice(Math.floor(spaces.length / 2)).split('').join('\\xA0') : '';\n          }\n        ]\n      ]);\n      var validElements = Settings.getWordValidElements(editor);\n      var schema = global$a({\n        valid_elements: validElements,\n        valid_children: '-li[p]'\n      });\n      global$4.each(schema.elements, function (rule) {\n        if (!rule.attributes.class) {\n          rule.attributes.class = {};\n          rule.attributesOrder.push('class');\n        }\n        if (!rule.attributes.style) {\n          rule.attributes.style = {};\n          rule.attributesOrder.push('style');\n        }\n      });\n      var domParser = global$7({}, schema);\n      domParser.addAttributeFilter('style', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.attr('style', filterStyles(editor, validStyles, node, node.attr('style')));\n          if (node.name === 'span' && node.parent && !node.attributes.length) {\n            node.unwrap();\n          }\n        }\n      });\n      domParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length, node, className;\n        while (i--) {\n          node = nodes[i];\n          className = node.attr('class');\n          if (/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(className)) {\n            node.remove();\n          }\n          node.attr('class', null);\n        }\n      });\n      domParser.addNodeFilter('del', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].remove();\n        }\n      });\n      domParser.addNodeFilter('a', function (nodes) {\n        var i = nodes.length, node, href, name;\n        while (i--) {\n          node = nodes[i];\n          href = node.attr('href');\n          name = node.attr('name');\n          if (href && href.indexOf('#_msocom_') !== -1) {\n            node.remove();\n            continue;\n          }\n          if (href && href.indexOf('file://') === 0) {\n            href = href.split('#')[1];\n            if (href) {\n              href = '#' + href;\n            }\n          }\n          if (!href && !name) {\n            node.unwrap();\n          } else {\n            if (name && !/^_?(?:toc|edn|ftn)/i.test(name)) {\n              node.unwrap();\n              continue;\n            }\n            node.attr({\n              href: href,\n              name: name\n            });\n          }\n        }\n      });\n      var rootNode = domParser.parse(content);\n      if (Settings.shouldConvertWordFakeLists(editor)) {\n        convertFakeListsToProperLists(rootNode);\n      }\n      content = global$8({ validate: editor.settings.validate }, schema).serialize(rootNode);\n      return content;\n    };\n    var preProcess = function (editor, content) {\n      return Settings.shouldUseDefaultFilters(editor) ? filterWordContent(editor, content) : content;\n    };\n    var WordFilter = {\n      preProcess: preProcess,\n      isWordContent: isWordContent\n    };\n\n    var preProcess$1 = function (editor, html) {\n      var parser = global$7({}, editor.schema);\n      parser.addNodeFilter('meta', function (nodes) {\n        global$4.each(nodes, function (node) {\n          return node.remove();\n        });\n      });\n      var fragment = parser.parse(html, {\n        forced_root_block: false,\n        isRootContent: true\n      });\n      return global$8({ validate: editor.settings.validate }, editor.schema).serialize(fragment);\n    };\n    var processResult = function (content, cancelled) {\n      return {\n        content: content,\n        cancelled: cancelled\n      };\n    };\n    var postProcessFilter = function (editor, html, internal, isWordHtml) {\n      var tempBody = editor.dom.create('div', { style: 'display:none' }, html);\n      var postProcessArgs = Events.firePastePostProcess(editor, tempBody, internal, isWordHtml);\n      return processResult(postProcessArgs.node.innerHTML, postProcessArgs.isDefaultPrevented());\n    };\n    var filterContent = function (editor, content, internal, isWordHtml) {\n      var preProcessArgs = Events.firePastePreProcess(editor, content, internal, isWordHtml);\n      var filteredContent = preProcess$1(editor, preProcessArgs.content);\n      if (editor.hasEventListeners('PastePostProcess') && !preProcessArgs.isDefaultPrevented()) {\n        return postProcessFilter(editor, filteredContent, internal, isWordHtml);\n      } else {\n        return processResult(filteredContent, preProcessArgs.isDefaultPrevented());\n      }\n    };\n    var process = function (editor, html, internal) {\n      var isWordHtml = WordFilter.isWordContent(html);\n      var content = isWordHtml ? WordFilter.preProcess(editor, html) : html;\n      return filterContent(editor, content, internal, isWordHtml);\n    };\n    var ProcessFilters = { process: process };\n\n    var pasteHtml = function (editor, html) {\n      editor.insertContent(html, {\n        merge: Settings.shouldMergeFormats(editor),\n        paste: true\n      });\n      return true;\n    };\n    var isAbsoluteUrl = function (url) {\n      return /^https?:\\/\\/[\\w\\?\\-\\/+=.&%@~#]+$/i.test(url);\n    };\n    var isImageUrl = function (url) {\n      return isAbsoluteUrl(url) && /.(gif|jpe?g|png)$/.test(url);\n    };\n    var createImage = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.insertContent('<img src=\"' + url + '\">');\n      });\n      return true;\n    };\n    var createLink = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.execCommand('mceInsertLink', false, url);\n      });\n      return true;\n    };\n    var linkSelection = function (editor, html, pasteHtmlFn) {\n      return editor.selection.isCollapsed() === false && isAbsoluteUrl(html) ? createLink(editor, html, pasteHtmlFn) : false;\n    };\n    var insertImage = function (editor, html, pasteHtmlFn) {\n      return isImageUrl(html) ? createImage(editor, html, pasteHtmlFn) : false;\n    };\n    var smartInsertContent = function (editor, html) {\n      global$4.each([\n        linkSelection,\n        insertImage,\n        pasteHtml\n      ], function (action) {\n        return action(editor, html, pasteHtml) !== true;\n      });\n    };\n    var insertContent = function (editor, html) {\n      if (Settings.isSmartPasteEnabled(editor) === false) {\n        pasteHtml(editor, html);\n      } else {\n        smartInsertContent(editor, html);\n      }\n    };\n    var SmartPaste = {\n      isImageUrl: isImageUrl,\n      isAbsoluteUrl: isAbsoluteUrl,\n      insertContent: insertContent\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isFunction = isType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter$1 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module, undefined));\n    var Promise = module.exports.boltExport;\n\n    var nu = function (baseFn) {\n      var data = Option.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        data = Option.some(x);\n        run(callbacks);\n        callbacks = [];\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          domGlobals.setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      domGlobals.setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$1 = function (baseFn) {\n      return make(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$1,\n      pure: pure$1\n    };\n\n    var par = function (asyncValues, nu) {\n      return nu(function (callback) {\n        var r = [];\n        var count = 0;\n        var cb = function (i) {\n          return function (value) {\n            r[i] = value;\n            count++;\n            if (count >= asyncValues.length) {\n              callback(r);\n            }\n          };\n        };\n        if (asyncValues.length === 0) {\n          callback([]);\n        } else {\n          each(asyncValues, function (asyncValue, i) {\n            asyncValue.get(cb(i));\n          });\n        }\n      });\n    };\n\n    var par$1 = function (futures) {\n      return par(futures, Future.nu);\n    };\n    var traverse = function (array, fn) {\n      return par$1(map(array, fn));\n    };\n    var mapM = traverse;\n\n    var value = function () {\n      var subject = Cell(Option.none());\n      var clear = function () {\n        subject.set(Option.none());\n      };\n      var set = function (s) {\n        subject.set(Option.some(s));\n      };\n      var on = function (f) {\n        subject.get().each(f);\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var pasteHtml$1 = function (editor, html, internalFlag) {\n      var internal = internalFlag ? internalFlag : InternalHtml.isMarked(html);\n      var args = ProcessFilters.process(editor, InternalHtml.unmark(html), internal);\n      if (args.cancelled === false) {\n        SmartPaste.insertContent(editor, args.content);\n      }\n    };\n    var pasteText = function (editor, text) {\n      text = editor.dom.encode(text).replace(/\\r\\n/g, '\\n');\n      text = Newlines.convert(text, editor.settings.forced_root_block, editor.settings.forced_root_block_attrs);\n      pasteHtml$1(editor, text, false);\n    };\n    var getDataTransferItems = function (dataTransfer) {\n      var items = {};\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      if (dataTransfer) {\n        if (dataTransfer.getData) {\n          var legacyText = dataTransfer.getData('Text');\n          if (legacyText && legacyText.length > 0) {\n            if (legacyText.indexOf(mceInternalUrlPrefix) === -1) {\n              items['text/plain'] = legacyText;\n            }\n          }\n        }\n        if (dataTransfer.types) {\n          for (var i = 0; i < dataTransfer.types.length; i++) {\n            var contentType = dataTransfer.types[i];\n            try {\n              items[contentType] = dataTransfer.getData(contentType);\n            } catch (ex) {\n              items[contentType] = '';\n            }\n          }\n        }\n      }\n      return items;\n    };\n    var getClipboardContent = function (editor, clipboardEvent) {\n      var content = getDataTransferItems(clipboardEvent.clipboardData || editor.getDoc().dataTransfer);\n      return Utils.isMsEdge() ? global$4.extend(content, { 'text/html': '' }) : content;\n    };\n    var hasContentType = function (clipboardContent, mimeType) {\n      return mimeType in clipboardContent && clipboardContent[mimeType].length > 0;\n    };\n    var hasHtmlOrText = function (content) {\n      return hasContentType(content, 'text/html') || hasContentType(content, 'text/plain');\n    };\n    var getBase64FromUri = function (uri) {\n      var idx;\n      idx = uri.indexOf(',');\n      if (idx !== -1) {\n        return uri.substr(idx + 1);\n      }\n      return null;\n    };\n    var isValidDataUriImage = function (settings, imgElm) {\n      return settings.images_dataimg_filter ? settings.images_dataimg_filter(imgElm) : true;\n    };\n    var extractFilename = function (editor, str) {\n      var m = str.match(/([\\s\\S]+?)\\.(?:jpeg|jpg|png|gif)$/i);\n      return m ? editor.dom.encode(m[1]) : null;\n    };\n    var uniqueId = Utils.createIdGenerator('mceclip');\n    var pasteImage = function (editor, imageItem) {\n      var base64 = getBase64FromUri(imageItem.uri);\n      var id = uniqueId();\n      var name = editor.settings.images_reuse_filename && imageItem.blob.name ? extractFilename(editor, imageItem.blob.name) : id;\n      var img = new domGlobals.Image();\n      img.src = imageItem.uri;\n      if (isValidDataUriImage(editor.settings, img)) {\n        var blobCache = editor.editorUpload.blobCache;\n        var blobInfo = void 0, existingBlobInfo = void 0;\n        existingBlobInfo = blobCache.findFirst(function (cachedBlobInfo) {\n          return cachedBlobInfo.base64() === base64;\n        });\n        if (!existingBlobInfo) {\n          blobInfo = blobCache.create(id, imageItem.blob, base64, name);\n          blobCache.add(blobInfo);\n        } else {\n          blobInfo = existingBlobInfo;\n        }\n        pasteHtml$1(editor, '<img src=\"' + blobInfo.blobUri() + '\">', false);\n      } else {\n        pasteHtml$1(editor, '<img src=\"' + imageItem.uri + '\">', false);\n      }\n    };\n    var isClipboardEvent = function (event) {\n      return event.type === 'paste';\n    };\n    var readBlobsAsDataUris = function (items) {\n      return mapM(items, function (item) {\n        return Future.nu(function (resolve) {\n          var blob = item.getAsFile ? item.getAsFile() : item;\n          var reader = new window.FileReader();\n          reader.onload = function () {\n            resolve({\n              blob: blob,\n              uri: reader.result\n            });\n          };\n          reader.readAsDataURL(blob);\n        });\n      });\n    };\n    var getImagesFromDataTransfer = function (dataTransfer) {\n      var items = dataTransfer.items ? map(from$1(dataTransfer.items), function (item) {\n        return item.getAsFile();\n      }) : [];\n      var files = dataTransfer.files ? from$1(dataTransfer.files) : [];\n      var images = filter$1(items.length > 0 ? items : files, function (file) {\n        return /^image\\/(jpeg|png|gif|bmp)$/.test(file.type);\n      });\n      return images;\n    };\n    var pasteImageData = function (editor, e, rng) {\n      var dataTransfer = isClipboardEvent(e) ? e.clipboardData : e.dataTransfer;\n      if (editor.settings.paste_data_images && dataTransfer) {\n        var images = getImagesFromDataTransfer(dataTransfer);\n        if (images.length > 0) {\n          e.preventDefault();\n          readBlobsAsDataUris(images).get(function (blobResults) {\n            if (rng) {\n              editor.selection.setRng(rng);\n            }\n            each(blobResults, function (result) {\n              pasteImage(editor, result);\n            });\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    var isBrokenAndroidClipboardEvent = function (e) {\n      var clipboardData = e.clipboardData;\n      return domGlobals.navigator.userAgent.indexOf('Android') !== -1 && clipboardData && clipboardData.items && clipboardData.items.length === 0;\n    };\n    var isKeyboardPasteEvent = function (e) {\n      return global$5.metaKeyPressed(e) && e.keyCode === 86 || e.shiftKey && e.keyCode === 45;\n    };\n    var registerEventHandlers = function (editor, pasteBin, pasteFormat) {\n      var keyboardPasteEvent = value();\n      var keyboardPastePlainTextState;\n      editor.on('keydown', function (e) {\n        function removePasteBinOnKeyUp(e) {\n          if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n            pasteBin.remove();\n          }\n        }\n        if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n          keyboardPastePlainTextState = e.shiftKey && e.keyCode === 86;\n          if (keyboardPastePlainTextState && global$2.webkit && domGlobals.navigator.userAgent.indexOf('Version/') !== -1) {\n            return;\n          }\n          e.stopImmediatePropagation();\n          keyboardPasteEvent.set(e);\n          window.setTimeout(function () {\n            keyboardPasteEvent.clear();\n          }, 100);\n          if (global$2.ie && keyboardPastePlainTextState) {\n            e.preventDefault();\n            Events.firePaste(editor, true);\n            return;\n          }\n          pasteBin.remove();\n          pasteBin.create();\n          editor.once('keyup', removePasteBinOnKeyUp);\n          editor.once('paste', function () {\n            editor.off('keyup', removePasteBinOnKeyUp);\n          });\n        }\n      });\n      function insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal) {\n        var content, isPlainTextHtml;\n        if (hasContentType(clipboardContent, 'text/html')) {\n          content = clipboardContent['text/html'];\n        } else {\n          content = pasteBin.getHtml();\n          internal = internal ? internal : InternalHtml.isMarked(content);\n          if (pasteBin.isDefaultContent(content)) {\n            plainTextMode = true;\n          }\n        }\n        content = Utils.trimHtml(content);\n        pasteBin.remove();\n        isPlainTextHtml = internal === false && Newlines.isPlainText(content);\n        if (!content.length || isPlainTextHtml) {\n          plainTextMode = true;\n        }\n        if (plainTextMode) {\n          if (hasContentType(clipboardContent, 'text/plain') && isPlainTextHtml) {\n            content = clipboardContent['text/plain'];\n          } else {\n            content = Utils.innerText(content);\n          }\n        }\n        if (pasteBin.isDefaultContent(content)) {\n          if (!isKeyBoardPaste) {\n            editor.windowManager.alert('Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.');\n          }\n          return;\n        }\n        if (plainTextMode) {\n          pasteText(editor, content);\n        } else {\n          pasteHtml$1(editor, content, internal);\n        }\n      }\n      var getLastRng = function () {\n        return pasteBin.getLastRng() || editor.selection.getRng();\n      };\n      editor.on('paste', function (e) {\n        var isKeyBoardPaste = keyboardPasteEvent.isSet();\n        var clipboardContent = getClipboardContent(editor, e);\n        var plainTextMode = pasteFormat.get() === 'text' || keyboardPastePlainTextState;\n        var internal = hasContentType(clipboardContent, InternalHtml.internalHtmlMime());\n        keyboardPastePlainTextState = false;\n        if (e.isDefaultPrevented() || isBrokenAndroidClipboardEvent(e)) {\n          pasteBin.remove();\n          return;\n        }\n        if (!hasHtmlOrText(clipboardContent) && pasteImageData(editor, e, getLastRng())) {\n          pasteBin.remove();\n          return;\n        }\n        if (!isKeyBoardPaste) {\n          e.preventDefault();\n        }\n        if (global$2.ie && (!isKeyBoardPaste || e.ieFake) && !hasContentType(clipboardContent, 'text/html')) {\n          pasteBin.create();\n          editor.dom.bind(pasteBin.getEl(), 'paste', function (e) {\n            e.stopPropagation();\n          });\n          editor.getDoc().execCommand('Paste', false, null);\n          clipboardContent['text/html'] = pasteBin.getHtml();\n        }\n        if (hasContentType(clipboardContent, 'text/html')) {\n          e.preventDefault();\n          if (!internal) {\n            internal = InternalHtml.isMarked(clipboardContent['text/html']);\n          }\n          insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal);\n        } else {\n          global$3.setEditorTimeout(editor, function () {\n            insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal);\n          }, 0);\n        }\n      });\n    };\n    var registerEventsAndFilters = function (editor, pasteBin, pasteFormat) {\n      registerEventHandlers(editor, pasteBin, pasteFormat);\n      var src;\n      editor.parser.addNodeFilter('img', function (nodes, name, args) {\n        var isPasteInsert = function (args) {\n          return args.data && args.data.paste === true;\n        };\n        var remove = function (node) {\n          if (!node.attr('data-mce-object') && src !== global$2.transparentSrc) {\n            node.remove();\n          }\n        };\n        var isWebKitFakeUrl = function (src) {\n          return src.indexOf('webkit-fake-url') === 0;\n        };\n        var isDataUri = function (src) {\n          return src.indexOf('data:') === 0;\n        };\n        if (!editor.settings.paste_data_images && isPasteInsert(args)) {\n          var i = nodes.length;\n          while (i--) {\n            src = nodes[i].attributes.map.src;\n            if (!src) {\n              continue;\n            }\n            if (isWebKitFakeUrl(src)) {\n              remove(nodes[i]);\n            } else if (!editor.settings.allow_html_data_urls && isDataUri(src)) {\n              remove(nodes[i]);\n            }\n          }\n        }\n      });\n    };\n\n    var getPasteBinParent = function (editor) {\n      return global$2.ie && editor.inline ? domGlobals.document.body : editor.getBody();\n    };\n    var isExternalPasteBin = function (editor) {\n      return getPasteBinParent(editor) !== editor.getBody();\n    };\n    var delegatePasteEvents = function (editor, pasteBinElm, pasteBinDefaultContent) {\n      if (isExternalPasteBin(editor)) {\n        editor.dom.bind(pasteBinElm, 'paste keyup', function (e) {\n          if (!isDefault(editor, pasteBinDefaultContent)) {\n            editor.fire('paste');\n          }\n        });\n      }\n    };\n    var create = function (editor, lastRngCell, pasteBinDefaultContent) {\n      var dom = editor.dom, body = editor.getBody();\n      var pasteBinElm;\n      lastRngCell.set(editor.selection.getRng());\n      pasteBinElm = editor.dom.add(getPasteBinParent(editor), 'div', {\n        'id': 'mcepastebin',\n        'class': 'mce-pastebin',\n        'contentEditable': true,\n        'data-mce-bogus': 'all',\n        'style': 'position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0'\n      }, pasteBinDefaultContent);\n      if (global$2.ie || global$2.gecko) {\n        dom.setStyle(pasteBinElm, 'left', dom.getStyle(body, 'direction', true) === 'rtl' ? 65535 : -65535);\n      }\n      dom.bind(pasteBinElm, 'beforedeactivate focusin focusout', function (e) {\n        e.stopPropagation();\n      });\n      delegatePasteEvents(editor, pasteBinElm, pasteBinDefaultContent);\n      pasteBinElm.focus();\n      editor.selection.select(pasteBinElm, true);\n    };\n    var remove = function (editor, lastRngCell) {\n      if (getEl(editor)) {\n        var pasteBinClone = void 0;\n        var lastRng = lastRngCell.get();\n        while (pasteBinClone = editor.dom.get('mcepastebin')) {\n          editor.dom.remove(pasteBinClone);\n          editor.dom.unbind(pasteBinClone);\n        }\n        if (lastRng) {\n          editor.selection.setRng(lastRng);\n        }\n      }\n      lastRngCell.set(null);\n    };\n    var getEl = function (editor) {\n      return editor.dom.get('mcepastebin');\n    };\n    var getHtml = function (editor) {\n      var pasteBinElm, pasteBinClones, i, dirtyWrappers, cleanWrapper;\n      var copyAndRemove = function (toElm, fromElm) {\n        toElm.appendChild(fromElm);\n        editor.dom.remove(fromElm, true);\n      };\n      pasteBinClones = global$4.grep(getPasteBinParent(editor).childNodes, function (elm) {\n        return elm.id === 'mcepastebin';\n      });\n      pasteBinElm = pasteBinClones.shift();\n      global$4.each(pasteBinClones, function (pasteBinClone) {\n        copyAndRemove(pasteBinElm, pasteBinClone);\n      });\n      dirtyWrappers = editor.dom.select('div[id=mcepastebin]', pasteBinElm);\n      for (i = dirtyWrappers.length - 1; i >= 0; i--) {\n        cleanWrapper = editor.dom.create('div');\n        pasteBinElm.insertBefore(cleanWrapper, dirtyWrappers[i]);\n        copyAndRemove(cleanWrapper, dirtyWrappers[i]);\n      }\n      return pasteBinElm ? pasteBinElm.innerHTML : '';\n    };\n    var getLastRng = function (lastRng) {\n      return lastRng.get();\n    };\n    var isDefaultContent = function (pasteBinDefaultContent, content) {\n      return content === pasteBinDefaultContent;\n    };\n    var isPasteBin = function (elm) {\n      return elm && elm.id === 'mcepastebin';\n    };\n    var isDefault = function (editor, pasteBinDefaultContent) {\n      var pasteBinElm = getEl(editor);\n      return isPasteBin(pasteBinElm) && isDefaultContent(pasteBinDefaultContent, pasteBinElm.innerHTML);\n    };\n    var PasteBin = function (editor) {\n      var lastRng = Cell(null);\n      var pasteBinDefaultContent = '%MCEPASTEBIN%';\n      return {\n        create: function () {\n          return create(editor, lastRng, pasteBinDefaultContent);\n        },\n        remove: function () {\n          return remove(editor, lastRng);\n        },\n        getEl: function () {\n          return getEl(editor);\n        },\n        getHtml: function () {\n          return getHtml(editor);\n        },\n        getLastRng: function () {\n          return getLastRng(lastRng);\n        },\n        isDefault: function () {\n          return isDefault(editor, pasteBinDefaultContent);\n        },\n        isDefaultContent: function (content) {\n          return isDefaultContent(pasteBinDefaultContent, content);\n        }\n      };\n    };\n\n    var Clipboard = function (editor, pasteFormat) {\n      var pasteBin = PasteBin(editor);\n      editor.on('preInit', function () {\n        return registerEventsAndFilters(editor, pasteBin, pasteFormat);\n      });\n      return {\n        pasteFormat: pasteFormat,\n        pasteHtml: function (html, internalFlag) {\n          return pasteHtml$1(editor, html, internalFlag);\n        },\n        pasteText: function (text) {\n          return pasteText(editor, text);\n        },\n        pasteImageData: function (e, rng) {\n          return pasteImageData(editor, e, rng);\n        },\n        getDataTransferItems: getDataTransferItems,\n        hasHtmlOrText: hasHtmlOrText,\n        hasContentType: hasContentType\n      };\n    };\n\n    var noop$1 = function () {\n    };\n    var hasWorkingClipboardApi = function (clipboardData) {\n      return global$2.iOS === false && clipboardData !== undefined && typeof clipboardData.setData === 'function' && Utils.isMsEdge() !== true;\n    };\n    var setHtml5Clipboard = function (clipboardData, html, text) {\n      if (hasWorkingClipboardApi(clipboardData)) {\n        try {\n          clipboardData.clearData();\n          clipboardData.setData('text/html', html);\n          clipboardData.setData('text/plain', text);\n          clipboardData.setData(InternalHtml.internalHtmlMime(), html);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    };\n    var setClipboardData = function (evt, data, fallback, done) {\n      if (setHtml5Clipboard(evt.clipboardData, data.html, data.text)) {\n        evt.preventDefault();\n        done();\n      } else {\n        fallback(data.html, done);\n      }\n    };\n    var fallback = function (editor) {\n      return function (html, done) {\n        var markedHtml = InternalHtml.mark(html);\n        var outer = editor.dom.create('div', {\n          'contenteditable': 'false',\n          'data-mce-bogus': 'all'\n        });\n        var inner = editor.dom.create('div', { contenteditable: 'true' }, markedHtml);\n        editor.dom.setStyles(outer, {\n          position: 'fixed',\n          top: '0',\n          left: '-3000px',\n          width: '1000px',\n          overflow: 'hidden'\n        });\n        outer.appendChild(inner);\n        editor.dom.add(editor.getBody(), outer);\n        var range = editor.selection.getRng();\n        inner.focus();\n        var offscreenRange = editor.dom.createRng();\n        offscreenRange.selectNodeContents(inner);\n        editor.selection.setRng(offscreenRange);\n        setTimeout(function () {\n          editor.selection.setRng(range);\n          outer.parentNode.removeChild(outer);\n          done();\n        }, 0);\n      };\n    };\n    var getData = function (editor) {\n      return {\n        html: editor.selection.getContent({ contextual: true }),\n        text: editor.selection.getContent({ format: 'text' })\n      };\n    };\n    var isTableSelection = function (editor) {\n      return !!editor.dom.getParent(editor.selection.getStart(), 'td[data-mce-selected],th[data-mce-selected]', editor.getBody());\n    };\n    var hasSelectedContent = function (editor) {\n      return !editor.selection.isCollapsed() || isTableSelection(editor);\n    };\n    var cut = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), function () {\n            setTimeout(function () {\n              editor.execCommand('Delete');\n            }, 0);\n          });\n        }\n      };\n    };\n    var copy = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), noop$1);\n        }\n      };\n    };\n    var register$1 = function (editor) {\n      editor.on('cut', cut(editor));\n      editor.on('copy', copy(editor));\n    };\n    var CutCopy = { register: register$1 };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n    var getCaretRangeFromEvent = function (editor, e) {\n      return global$b.getCaretRangeFromPoint(e.clientX, e.clientY, editor.getDoc());\n    };\n    var isPlainTextFileUrl = function (content) {\n      var plainTextContent = content['text/plain'];\n      return plainTextContent ? plainTextContent.indexOf('file://') === 0 : false;\n    };\n    var setFocusedRange = function (editor, rng) {\n      editor.focus();\n      editor.selection.setRng(rng);\n    };\n    var setup = function (editor, clipboard, draggingInternallyState) {\n      if (Settings.shouldBlockDrop(editor)) {\n        editor.on('dragend dragover draggesture dragdrop drop drag', function (e) {\n          e.preventDefault();\n          e.stopPropagation();\n        });\n      }\n      if (!Settings.shouldPasteDataImages(editor)) {\n        editor.on('drop', function (e) {\n          var dataTransfer = e.dataTransfer;\n          if (dataTransfer && dataTransfer.files && dataTransfer.files.length > 0) {\n            e.preventDefault();\n          }\n        });\n      }\n      editor.on('drop', function (e) {\n        var dropContent, rng;\n        rng = getCaretRangeFromEvent(editor, e);\n        if (e.isDefaultPrevented() || draggingInternallyState.get()) {\n          return;\n        }\n        dropContent = clipboard.getDataTransferItems(e.dataTransfer);\n        var internal = clipboard.hasContentType(dropContent, InternalHtml.internalHtmlMime());\n        if ((!clipboard.hasHtmlOrText(dropContent) || isPlainTextFileUrl(dropContent)) && clipboard.pasteImageData(e, rng)) {\n          return;\n        }\n        if (rng && Settings.shouldFilterDrop(editor)) {\n          var content_1 = dropContent['mce-internal'] || dropContent['text/html'] || dropContent['text/plain'];\n          if (content_1) {\n            e.preventDefault();\n            global$3.setEditorTimeout(editor, function () {\n              editor.undoManager.transact(function () {\n                if (dropContent['mce-internal']) {\n                  editor.execCommand('Delete');\n                }\n                setFocusedRange(editor, rng);\n                content_1 = Utils.trimHtml(content_1);\n                if (!dropContent['text/html']) {\n                  clipboard.pasteText(content_1);\n                } else {\n                  clipboard.pasteHtml(content_1, internal);\n                }\n              });\n            });\n          }\n        }\n      });\n      editor.on('dragstart', function (e) {\n        draggingInternallyState.set(true);\n      });\n      editor.on('dragover dragend', function (e) {\n        if (Settings.shouldPasteDataImages(editor) && draggingInternallyState.get() === false) {\n          e.preventDefault();\n          setFocusedRange(editor, getCaretRangeFromEvent(editor, e));\n        }\n        if (e.type === 'dragend') {\n          draggingInternallyState.set(false);\n        }\n      });\n    };\n    var DragDrop = { setup: setup };\n\n    var setup$1 = function (editor) {\n      var plugin = editor.plugins.paste;\n      var preProcess = Settings.getPreProcess(editor);\n      if (preProcess) {\n        editor.on('PastePreProcess', function (e) {\n          preProcess.call(plugin, plugin, e);\n        });\n      }\n      var postProcess = Settings.getPostProcess(editor);\n      if (postProcess) {\n        editor.on('PastePostProcess', function (e) {\n          postProcess.call(plugin, plugin, e);\n        });\n      }\n    };\n    var PrePostProcess = { setup: setup$1 };\n\n    function addPreProcessFilter(editor, filterFunc) {\n      editor.on('PastePreProcess', function (e) {\n        e.content = filterFunc(editor, e.content, e.internal, e.wordContent);\n      });\n    }\n    function addPostProcessFilter(editor, filterFunc) {\n      editor.on('PastePostProcess', function (e) {\n        filterFunc(editor, e.node);\n      });\n    }\n    function removeExplorerBrElementsAfterBlocks(editor, html) {\n      if (!WordFilter.isWordContent(html)) {\n        return html;\n      }\n      var blockElements = [];\n      global$4.each(editor.schema.getBlockElements(), function (block, blockName) {\n        blockElements.push(blockName);\n      });\n      var explorerBlocksRegExp = new RegExp('(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*(<\\\\/?(' + blockElements.join('|') + ')[^>]*>)(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*', 'g');\n      html = Utils.filter(html, [[\n          explorerBlocksRegExp,\n          '$1'\n        ]]);\n      html = Utils.filter(html, [\n        [\n          /<br><br>/g,\n          '<BR><BR>'\n        ],\n        [\n          /<br>/g,\n          ' '\n        ],\n        [\n          /<BR><BR>/g,\n          '<br>'\n        ]\n      ]);\n      return html;\n    }\n    function removeWebKitStyles(editor, content, internal, isWordHtml) {\n      if (isWordHtml || internal) {\n        return content;\n      }\n      var webKitStylesSetting = Settings.getWebkitStyles(editor);\n      var webKitStyles;\n      if (Settings.shouldRemoveWebKitStyles(editor) === false || webKitStylesSetting === 'all') {\n        return content;\n      }\n      if (webKitStylesSetting) {\n        webKitStyles = webKitStylesSetting.split(/[, ]/);\n      }\n      if (webKitStyles) {\n        var dom_1 = editor.dom, node_1 = editor.selection.getNode();\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, function (all, before, value, after) {\n          var inputStyles = dom_1.parseStyle(dom_1.decode(value));\n          var outputStyles = {};\n          if (webKitStyles === 'none') {\n            return before + after;\n          }\n          for (var i = 0; i < webKitStyles.length; i++) {\n            var inputValue = inputStyles[webKitStyles[i]], currentValue = dom_1.getStyle(node_1, webKitStyles[i], true);\n            if (/color/.test(webKitStyles[i])) {\n              inputValue = dom_1.toHex(inputValue);\n              currentValue = dom_1.toHex(currentValue);\n            }\n            if (currentValue !== inputValue) {\n              outputStyles[webKitStyles[i]] = inputValue;\n            }\n          }\n          outputStyles = dom_1.serializeStyle(outputStyles, 'span');\n          if (outputStyles) {\n            return before + ' style=\"' + outputStyles + '\"' + after;\n          }\n          return before + after;\n        });\n      } else {\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, '$1$3');\n      }\n      content = content.replace(/(<[^>]+) data-mce-style=\"([^\"]+)\"([^>]*>)/gi, function (all, before, value, after) {\n        return before + ' style=\"' + value + '\"' + after;\n      });\n      return content;\n    }\n    function removeUnderlineAndFontInAnchor(editor, root) {\n      editor.$('a', root).find('font,u').each(function (i, node) {\n        editor.dom.remove(node, true);\n      });\n    }\n    var setup$2 = function (editor) {\n      if (global$2.webkit) {\n        addPreProcessFilter(editor, removeWebKitStyles);\n      }\n      if (global$2.ie) {\n        addPreProcessFilter(editor, removeExplorerBrElementsAfterBlocks);\n        addPostProcessFilter(editor, removeUnderlineAndFontInAnchor);\n      }\n    };\n    var Quirks = { setup: setup$2 };\n\n    var stateChange = function (editor, clipboard, e) {\n      var ctrl = e.control;\n      ctrl.active(clipboard.pasteFormat.get() === 'text');\n      editor.on('PastePlainTextToggle', function (e) {\n        ctrl.active(e.state);\n      });\n    };\n    var register$2 = function (editor, clipboard) {\n      var postRender = curry(stateChange, editor, clipboard);\n      editor.addButton('pastetext', {\n        active: false,\n        icon: 'pastetext',\n        tooltip: 'Paste as text',\n        cmd: 'mceTogglePlainTextPaste',\n        onPostRender: postRender\n      });\n      editor.addMenuItem('pastetext', {\n        text: 'Paste as text',\n        selectable: true,\n        active: clipboard.pasteFormat,\n        cmd: 'mceTogglePlainTextPaste',\n        onPostRender: postRender\n      });\n    };\n    var Buttons = { register: register$2 };\n\n    global$1.add('paste', function (editor) {\n      if (DetectProPlugin.hasProPlugin(editor) === false) {\n        var userIsInformedState = Cell(false);\n        var draggingInternallyState = Cell(false);\n        var pasteFormat = Cell(Settings.isPasteAsTextEnabled(editor) ? 'text' : 'html');\n        var clipboard = Clipboard(editor, pasteFormat);\n        var quirks = Quirks.setup(editor);\n        Buttons.register(editor, clipboard);\n        Commands.register(editor, clipboard, userIsInformedState);\n        PrePostProcess.setup(editor);\n        CutCopy.register(editor);\n        DragDrop.setup(editor, clipboard, draggingInternallyState);\n        return Api.get(clipboard, quirks);\n      }\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","// Exports the \"print\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/print')\n//   ES2015:\n//     import 'tinymce/plugins/print'\nrequire('./plugin.js');","// Exports the \"lists\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/lists')\n//   ES2015:\n//     import 'tinymce/plugins/lists'\nrequire('./plugin.js');","// Exports the \"directionality\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/directionality')\n//   ES2015:\n//     import 'tinymce/plugins/directionality'\nrequire('./plugin.js');","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","// Exports the \"imagetools\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/imagetools')\n//   ES2015:\n//     import 'tinymce/plugins/imagetools'\nrequire('./plugin.js');","(function () {\nvar advlist = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var applyListFormat = function (editor, listName, styleValue) {\n      var cmd = listName === 'UL' ? 'InsertUnorderedList' : 'InsertOrderedList';\n      editor.execCommand(cmd, false, styleValue === false ? null : { 'list-style-type': styleValue });\n    };\n    var Actions = { applyListFormat: applyListFormat };\n\n    var register = function (editor) {\n      editor.addCommand('ApplyUnorderedListStyle', function (ui, value) {\n        Actions.applyListFormat(editor, 'UL', value['list-style-type']);\n      });\n      editor.addCommand('ApplyOrderedListStyle', function (ui, value) {\n        Actions.applyListFormat(editor, 'OL', value['list-style-type']);\n      });\n    };\n    var Commands = { register: register };\n\n    var getNumberStyles = function (editor) {\n      var styles = editor.getParam('advlist_number_styles', 'default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman');\n      return styles ? styles.split(/[ ,]/) : [];\n    };\n    var getBulletStyles = function (editor) {\n      var styles = editor.getParam('advlist_bullet_styles', 'default,circle,disc,square');\n      return styles ? styles.split(/[ ,]/) : [];\n    };\n    var Settings = {\n      getNumberStyles: getNumberStyles,\n      getBulletStyles: getBulletStyles\n    };\n\n    var isChildOfBody = function (editor, elm) {\n      return editor.$.contains(editor.getBody(), elm);\n    };\n    var isTableCellNode = function (node) {\n      return node && /^(TH|TD)$/.test(node.nodeName);\n    };\n    var isListNode = function (editor) {\n      return function (node) {\n        return node && /^(OL|UL|DL)$/.test(node.nodeName) && isChildOfBody(editor, node);\n      };\n    };\n    var getSelectedStyleType = function (editor) {\n      var listElm = editor.dom.getParent(editor.selection.getNode(), 'ol,ul');\n      return editor.dom.getStyle(listElm, 'listStyleType') || '';\n    };\n    var ListUtils = {\n      isTableCellNode: isTableCellNode,\n      isListNode: isListNode,\n      getSelectedStyleType: getSelectedStyleType\n    };\n\n    var styleValueToText = function (styleValue) {\n      return styleValue.replace(/\\-/g, ' ').replace(/\\b\\w/g, function (chr) {\n        return chr.toUpperCase();\n      });\n    };\n    var toMenuItems = function (styles) {\n      return global$1.map(styles, function (styleValue) {\n        var text = styleValueToText(styleValue);\n        var data = styleValue === 'default' ? '' : styleValue;\n        return {\n          text: text,\n          data: data\n        };\n      });\n    };\n    var ListStyles = { toMenuItems: toMenuItems };\n\n    var findIndex = function (list, predicate) {\n      for (var index = 0; index < list.length; index++) {\n        var element = list[index];\n        if (predicate(element)) {\n          return index;\n        }\n      }\n      return -1;\n    };\n    var listState = function (editor, listName) {\n      return function (e) {\n        var ctrl = e.control;\n        editor.on('NodeChange', function (e) {\n          var tableCellIndex = findIndex(e.parents, ListUtils.isTableCellNode);\n          var parents = tableCellIndex !== -1 ? e.parents.slice(0, tableCellIndex) : e.parents;\n          var lists = global$1.grep(parents, ListUtils.isListNode(editor));\n          ctrl.active(lists.length > 0 && lists[0].nodeName === listName);\n        });\n      };\n    };\n    var updateSelection = function (editor) {\n      return function (e) {\n        var listStyleType = ListUtils.getSelectedStyleType(editor);\n        e.control.items().each(function (ctrl) {\n          ctrl.active(ctrl.settings.data === listStyleType);\n        });\n      };\n    };\n    var addSplitButton = function (editor, id, tooltip, cmd, nodeName, styles) {\n      editor.addButton(id, {\n        active: false,\n        type: 'splitbutton',\n        tooltip: tooltip,\n        menu: ListStyles.toMenuItems(styles),\n        onPostRender: listState(editor, nodeName),\n        onshow: updateSelection(editor),\n        onselect: function (e) {\n          Actions.applyListFormat(editor, nodeName, e.control.settings.data);\n        },\n        onclick: function () {\n          editor.execCommand(cmd);\n        }\n      });\n    };\n    var addButton = function (editor, id, tooltip, cmd, nodeName, styles) {\n      editor.addButton(id, {\n        active: false,\n        type: 'button',\n        tooltip: tooltip,\n        onPostRender: listState(editor, nodeName),\n        onclick: function () {\n          editor.execCommand(cmd);\n        }\n      });\n    };\n    var addControl = function (editor, id, tooltip, cmd, nodeName, styles) {\n      if (styles.length > 0) {\n        addSplitButton(editor, id, tooltip, cmd, nodeName, styles);\n      } else {\n        addButton(editor, id, tooltip, cmd, nodeName);\n      }\n    };\n    var register$1 = function (editor) {\n      addControl(editor, 'numlist', 'Numbered list', 'InsertOrderedList', 'OL', Settings.getNumberStyles(editor));\n      addControl(editor, 'bullist', 'Bullet list', 'InsertUnorderedList', 'UL', Settings.getBulletStyles(editor));\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('advlist', function (editor) {\n      var hasPlugin = function (editor, plugin) {\n        var plugins = editor.settings.plugins ? editor.settings.plugins : '';\n        return global$1.inArray(plugins.split(/[ ,]/), plugin) !== -1;\n      };\n      if (hasPlugin(editor, 'lists')) {\n        Buttons.register(editor);\n        Commands.register(editor);\n      }\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar autosave = (function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.LocalStorage');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var fireRestoreDraft = function (editor) {\n      return editor.fire('RestoreDraft');\n    };\n    var fireStoreDraft = function (editor) {\n      return editor.fire('StoreDraft');\n    };\n    var fireRemoveDraft = function (editor) {\n      return editor.fire('RemoveDraft');\n    };\n\n    var parse = function (timeString, defaultTime) {\n      var multiples = {\n        s: 1000,\n        m: 60000\n      };\n      var toParse = timeString || defaultTime;\n      var parsedTime = /^(\\d+)([ms]?)$/.exec('' + toParse);\n      return (parsedTime[2] ? multiples[parsedTime[2]] : 1) * parseInt(toParse, 10);\n    };\n\n    var shouldAskBeforeUnload = function (editor) {\n      return editor.getParam('autosave_ask_before_unload', true);\n    };\n    var getAutoSavePrefix = function (editor) {\n      var prefix = editor.getParam('autosave_prefix', 'tinymce-autosave-{path}{query}{hash}-{id}-');\n      prefix = prefix.replace(/\\{path\\}/g, domGlobals.document.location.pathname);\n      prefix = prefix.replace(/\\{query\\}/g, domGlobals.document.location.search);\n      prefix = prefix.replace(/\\{hash\\}/g, domGlobals.document.location.hash);\n      prefix = prefix.replace(/\\{id\\}/g, editor.id);\n      return prefix;\n    };\n    var shouldRestoreWhenEmpty = function (editor) {\n      return editor.getParam('autosave_restore_when_empty', false);\n    };\n    var getAutoSaveInterval = function (editor) {\n      return parse(editor.settings.autosave_interval, '30s');\n    };\n    var getAutoSaveRetention = function (editor) {\n      return parse(editor.settings.autosave_retention, '20m');\n    };\n\n    var isEmpty = function (editor, html) {\n      var forcedRootBlockName = editor.settings.forced_root_block;\n      html = global$2.trim(typeof html === 'undefined' ? editor.getBody().innerHTML : html);\n      return html === '' || new RegExp('^<' + forcedRootBlockName + '[^>]*>((\\xA0|&nbsp;|[ \\t]|<br[^>]*>)+?|)</' + forcedRootBlockName + '>|<br>$', 'i').test(html);\n    };\n    var hasDraft = function (editor) {\n      var time = parseInt(global$1.getItem(getAutoSavePrefix(editor) + 'time'), 10) || 0;\n      if (new Date().getTime() - time > getAutoSaveRetention(editor)) {\n        removeDraft(editor, false);\n        return false;\n      }\n      return true;\n    };\n    var removeDraft = function (editor, fire) {\n      var prefix = getAutoSavePrefix(editor);\n      global$1.removeItem(prefix + 'draft');\n      global$1.removeItem(prefix + 'time');\n      if (fire !== false) {\n        fireRemoveDraft(editor);\n      }\n    };\n    var storeDraft = function (editor) {\n      var prefix = getAutoSavePrefix(editor);\n      if (!isEmpty(editor) && editor.isDirty()) {\n        global$1.setItem(prefix + 'draft', editor.getContent({\n          format: 'raw',\n          no_events: true\n        }));\n        global$1.setItem(prefix + 'time', new Date().getTime().toString());\n        fireStoreDraft(editor);\n      }\n    };\n    var restoreDraft = function (editor) {\n      var prefix = getAutoSavePrefix(editor);\n      if (hasDraft(editor)) {\n        editor.setContent(global$1.getItem(prefix + 'draft'), { format: 'raw' });\n        fireRestoreDraft(editor);\n      }\n    };\n    var startStoreDraft = function (editor, started) {\n      var interval = getAutoSaveInterval(editor);\n      if (!started.get()) {\n        setInterval(function () {\n          if (!editor.removed) {\n            storeDraft(editor);\n          }\n        }, interval);\n        started.set(true);\n      }\n    };\n    var restoreLastDraft = function (editor) {\n      editor.undoManager.transact(function () {\n        restoreDraft(editor);\n        removeDraft(editor);\n      });\n      editor.focus();\n    };\n\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n\n    var get = function (editor) {\n      return {\n        hasDraft: curry(hasDraft, editor),\n        storeDraft: curry(storeDraft, editor),\n        restoreDraft: curry(restoreDraft, editor),\n        removeDraft: curry(removeDraft, editor),\n        isEmpty: curry(isEmpty, editor)\n      };\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    global$3._beforeUnloadHandler = function () {\n      var msg;\n      global$2.each(global$3.get(), function (editor) {\n        if (editor.plugins.autosave) {\n          editor.plugins.autosave.storeDraft();\n        }\n        if (!msg && editor.isDirty() && shouldAskBeforeUnload(editor)) {\n          msg = editor.translate('You have unsaved changes are you sure you want to navigate away?');\n        }\n      });\n      return msg;\n    };\n    var setup = function (editor) {\n      domGlobals.window.onbeforeunload = global$3._beforeUnloadHandler;\n    };\n\n    var postRender = function (editor, started) {\n      return function (e) {\n        var ctrl = e.control;\n        ctrl.disabled(!hasDraft(editor));\n        editor.on('StoreDraft RestoreDraft RemoveDraft', function () {\n          ctrl.disabled(!hasDraft(editor));\n        });\n        startStoreDraft(editor, started);\n      };\n    };\n    var register = function (editor, started) {\n      editor.addButton('restoredraft', {\n        title: 'Restore last draft',\n        onclick: function () {\n          restoreLastDraft(editor);\n        },\n        onPostRender: postRender(editor, started)\n      });\n      editor.addMenuItem('restoredraft', {\n        text: 'Restore last draft',\n        onclick: function () {\n          restoreLastDraft(editor);\n        },\n        onPostRender: postRender(editor, started),\n        context: 'file'\n      });\n    };\n\n    global.add('autosave', function (editor) {\n      var started = Cell(false);\n      setup();\n      register(editor, started);\n      editor.on('init', function () {\n        if (shouldRestoreWhenEmpty(editor) && editor.dom.isEmpty(editor.getBody())) {\n          restoreDraft(editor);\n        }\n      });\n      return get(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","// Exports the \"wordcount\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/wordcount')\n//   ES2015:\n//     import 'tinymce/plugins/wordcount'\nrequire('./plugin.js');","(function () {\nvar table = (function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return !f.apply(null, args);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(i);\n        }\n      }\n      return Option.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var last = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var keys = Object.keys;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$1 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n\n    var Immutable = function () {\n      var fields = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n      return function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var sort = function (arr) {\n      return arr.slice(0).sort();\n    };\n    var reqMessage = function (required, keys) {\n      throw new Error('All required keys (' + sort(required).join(', ') + ') were not specified. Specified keys were: ' + sort(keys).join(', ') + '.');\n    };\n    var unsuppMessage = function (unsupported) {\n      throw new Error('Unsupported keys for object: ' + sort(unsupported).join(', '));\n    };\n    var validateStrArr = function (label, array) {\n      if (!isArray(array)) {\n        throw new Error('The ' + label + ' fields must be an array. Was: ' + array + '.');\n      }\n      each(array, function (a) {\n        if (!isString(a)) {\n          throw new Error('The value ' + a + ' in the ' + label + ' fields was not a string.');\n        }\n      });\n    };\n    var invalidTypeMessage = function (incorrect, type) {\n      throw new Error('All values need to be of type: ' + type + '. Keys (' + sort(incorrect).join(', ') + ') were not.');\n    };\n    var checkDupes = function (everything) {\n      var sorted = sort(everything);\n      var dupe = find(sorted, function (s, i) {\n        return i < sorted.length - 1 && s === sorted[i + 1];\n      });\n      dupe.each(function (d) {\n        throw new Error('The field: ' + d + ' occurs more than once in the combined fields: [' + sorted.join(', ') + '].');\n      });\n    };\n\n    var MixedBag = function (required, optional) {\n      var everything = required.concat(optional);\n      if (everything.length === 0) {\n        throw new Error('You must specify at least one required or optional field.');\n      }\n      validateStrArr('required', required);\n      validateStrArr('optional', optional);\n      checkDupes(everything);\n      return function (obj) {\n        var keys$1 = keys(obj);\n        var allReqd = forall(required, function (req) {\n          return contains(keys$1, req);\n        });\n        if (!allReqd) {\n          reqMessage(required, keys$1);\n        }\n        var unsupported = filter(keys$1, function (key) {\n          return !contains(everything, key);\n        });\n        if (unsupported.length > 0) {\n          unsuppMessage(unsupported);\n        }\n        var r = {};\n        each(required, function (req) {\n          r[req] = constant(obj[req]);\n        });\n        each(optional, function (opt) {\n          r[opt] = constant(Object.prototype.hasOwnProperty.call(obj, opt) ? Option.some(obj[opt]) : Option.none());\n        });\n        return r;\n      };\n    };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n    var Global$1 = { getOrDie: getOrDie };\n\n    var name = function (element) {\n      var r = element.dom().nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isComment = function (element) {\n      return type(element) === COMMENT || name(element) === '#comment';\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        domGlobals.console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom(), key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom();\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get = function (element, key) {\n      var v = element.dom().getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var has = function (element, key) {\n      var dom = element.dom();\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove = function (element, key) {\n      element.dom().removeAttribute(key);\n    };\n    var clone = function (element) {\n      return foldl(element.dom().attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var checkRange = function (str, substr, start) {\n      if (substr === '') {\n        return true;\n      }\n      if (str.length < substr.length) {\n        return false;\n      }\n      var x = str.substr(start, start + substr.length);\n      return x === substr;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var trim = function (str) {\n      return str.replace(/^\\s+|\\s+$/g, '');\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom().parentNode : element.dom();\n      return dom !== undefined && dom !== null && dom.ownerDocument.body.contains(dom);\n    };\n    var body = cached(function () {\n      return getBody(Element.fromDom(domGlobals.document));\n    });\n    var getBody = function (doc) {\n      var b = doc.dom().body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return Element.fromDom(b);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        domGlobals.console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$1 = function (element, property, value) {\n      var dom = element.dom();\n      internalSet(dom, property, value);\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom();\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$1 = function (element, property) {\n      var dom = element.dom();\n      var styles = domGlobals.window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      var v = r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n      return v === null ? undefined : v;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom();\n      var raw = getUnsafeProperty(dom, property);\n      return Option.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var remove$1 = function (element, property) {\n      var dom = element.dom();\n      internalRemove(dom, property);\n      if (has(element, 'style') && trim(get(element, 'style')) === '') {\n        remove(element, 'style');\n      }\n    };\n    var copy = function (source, target) {\n      var sourceDom = source.dom();\n      var targetDom = target.dom();\n      if (isSupported(sourceDom) && isSupported(targetDom)) {\n        targetDom.style.cssText = sourceDom.style.cssText;\n      }\n    };\n\n    var node = function () {\n      var f = Global$1.getOrDie('Node');\n      return f;\n    };\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie, current),\n        isOpera: isBrowser(opera, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isAndroid3 = os.isAndroid() && os.version.major === 3;\n      var isAndroid4 = os.isAndroid() && os.version.major === 4;\n      var isTablet = isiPad || isAndroid3 || isAndroid4 && /mobile/i.test(userAgent) === true;\n      var isTouch = os.isiOS() || os.isAndroid();\n      var isPhone = isTouch && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var detect$3 = cached(function () {\n      var userAgent = domGlobals.navigator.userAgent;\n      return PlatformDetection.detect(userAgent);\n    });\n    var PlatformDetection$1 = { detect: detect$3 };\n\n    var ELEMENT$1 = ELEMENT;\n    var DOCUMENT$1 = DOCUMENT;\n    var is = function (element, selector) {\n      var dom = element.dom();\n      if (dom.nodeType !== ELEMENT$1) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT$1 && dom.nodeType !== DOCUMENT$1 || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), Element.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? Option.none() : Option.from(base.querySelector(selector)).map(Element.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom() === e2.dom();\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = PlatformDetection$1.detect().browser;\n    var contains$2 = browser.isIE() ? ieContains : regularContains;\n    var is$1 = is;\n\n    var owner = function (element) {\n      return Element.fromDom(element.dom().ownerDocument);\n    };\n    var defaultView = function (element) {\n      return Element.fromDom(element.dom().ownerDocument.defaultView);\n    };\n    var parent = function (element) {\n      return Option.from(element.dom().parentNode).map(Element.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom();\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = Element.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var prevSibling = function (element) {\n      return Option.from(element.dom().previousSibling).map(Element.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Option.from(element.dom().nextSibling).map(Element.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom().childNodes, Element.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom().childNodes;\n      return Option.from(cs[index]).map(Element.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var spot = Immutable('element', 'offset');\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom().insertBefore(element.dom(), marker.dom());\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom().insertBefore(element.dom(), v.dom());\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom().appendChild(element.dom());\n    };\n    var wrap = function (element, wrapper) {\n      before(element, wrapper);\n      append(wrapper, element);\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var after$1 = function (marker, elements) {\n      each(elements, function (x, i) {\n        var e = i === 0 ? marker : elements[i - 1];\n        after(e, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom().textContent = '';\n      each(children(element), function (rogue) {\n        remove$2(rogue);\n      });\n    };\n    var remove$2 = function (element) {\n      var dom = element.dom();\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove$2(wrapper);\n    };\n\n    var dimension = Immutable('width', 'height');\n    var dimensions = Immutable('width', 'height');\n    var grid = Immutable('rows', 'columns');\n    var address = Immutable('row', 'column');\n    var coords = Immutable('x', 'y');\n    var detail = Immutable('element', 'rowspan', 'colspan');\n    var detailnew = Immutable('element', 'rowspan', 'colspan', 'isNew');\n    var extended = Immutable('element', 'rowspan', 'colspan', 'row', 'column');\n    var rowdata = Immutable('element', 'cells', 'section');\n    var elementnew = Immutable('element', 'isNew');\n    var rowdatanew = Immutable('element', 'cells', 'section', 'isNew');\n    var rowcells = Immutable('cells', 'section');\n    var rowdetails = Immutable('details', 'section');\n    var bounds = Immutable('startRow', 'startCol', 'finishRow', 'finishCol');\n\n    var ancestors = function (scope, predicate, isRoot) {\n      return filter(parents(scope, isRoot), predicate);\n    };\n    var children$1 = function (scope, predicate) {\n      return filter(children(scope), predicate);\n    };\n    var descendants = function (scope, predicate) {\n      var result = [];\n      each(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants(x, predicate));\n      });\n      return result;\n    };\n\n    var ancestors$1 = function (scope, selector, isRoot) {\n      return ancestors(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var children$2 = function (scope, selector) {\n      return children$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendants$1 = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      return is(scope, a) ? Option.some(scope) : isFunction(isRoot) && isRoot(scope) ? Option.none() : ancestor(scope, a, isRoot);\n    }\n\n    var ancestor = function (scope, predicate, isRoot) {\n      var element = scope.dom();\n      var stop = isFunction(isRoot) ? isRoot : constant(false);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = Element.fromDom(element);\n        if (predicate(el)) {\n          return Option.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var closest = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n    };\n    var child$1 = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(Element.fromDom(node));\n      };\n      var result = find(scope.dom().childNodes, pred);\n      return result.map(Element.fromDom);\n    };\n    var descendant = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = Element.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Option.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Option.none();\n      };\n      return descend(scope.dom());\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var child$2 = function (scope, selector) {\n      return child$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendant$1 = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      return ClosestOrAncestor(is, ancestor$1, scope, selector, isRoot);\n    };\n\n    var firstLayer = function (scope, selector) {\n      return filterFirstLayer(scope, selector, constant(true));\n    };\n    var filterFirstLayer = function (scope, selector, predicate) {\n      return bind(children(scope), function (x) {\n        return is(x, selector) ? predicate(x) ? [x] : [] : filterFirstLayer(x, selector, predicate);\n      });\n    };\n    var LayerSelector = {\n      firstLayer: firstLayer,\n      filterFirstLayer: filterFirstLayer\n    };\n\n    var lookup = function (tags, element, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      if (isRoot(element)) {\n        return Option.none();\n      }\n      if (contains(tags, name(element))) {\n        return Option.some(element);\n      }\n      var isRootOrUpperTable = function (elm) {\n        return is(elm, 'table') || isRoot(elm);\n      };\n      return ancestor$1(element, tags.join(','), isRootOrUpperTable);\n    };\n    var cell = function (element, isRoot) {\n      return lookup([\n        'td',\n        'th'\n      ], element, isRoot);\n    };\n    var cells = function (ancestor) {\n      return LayerSelector.firstLayer(ancestor, 'th,td');\n    };\n    var notCell = function (element, isRoot) {\n      return lookup([\n        'caption',\n        'tr',\n        'tbody',\n        'tfoot',\n        'thead'\n      ], element, isRoot);\n    };\n    var neighbours = function (selector, element) {\n      return parent(element).map(function (parent) {\n        return children$2(parent, selector);\n      });\n    };\n    var neighbourCells = curry(neighbours, 'th,td');\n    var neighbourRows = curry(neighbours, 'tr');\n    var firstCell = function (ancestor) {\n      return descendant$1(ancestor, 'th,td');\n    };\n    var table = function (element, isRoot) {\n      return closest$1(element, 'table', isRoot);\n    };\n    var row = function (element, isRoot) {\n      return lookup(['tr'], element, isRoot);\n    };\n    var rows = function (ancestor) {\n      return LayerSelector.firstLayer(ancestor, 'tr');\n    };\n    var attr = function (element, property) {\n      return parseInt(get(element, property), 10);\n    };\n    var grid$1 = function (element, rowProp, colProp) {\n      var rowsCount = attr(element, rowProp);\n      var cols = attr(element, colProp);\n      return grid(rowsCount, cols);\n    };\n    var TableLookup = {\n      cell: cell,\n      firstCell: firstCell,\n      cells: cells,\n      neighbourCells: neighbourCells,\n      table: table,\n      row: row,\n      rows: rows,\n      notCell: notCell,\n      neighbourRows: neighbourRows,\n      attr: attr,\n      grid: grid$1\n    };\n\n    var fromTable = function (table) {\n      var rows = TableLookup.rows(table);\n      return map(rows, function (row) {\n        var element = row;\n        var parent$1 = parent(element);\n        var parentSection = parent$1.map(function (p) {\n          var parentName = name(p);\n          return parentName === 'tfoot' || parentName === 'thead' || parentName === 'tbody' ? parentName : 'tbody';\n        }).getOr('tbody');\n        var cells = map(TableLookup.cells(row), function (cell) {\n          var rowspan = has(cell, 'rowspan') ? parseInt(get(cell, 'rowspan'), 10) : 1;\n          var colspan = has(cell, 'colspan') ? parseInt(get(cell, 'colspan'), 10) : 1;\n          return detail(cell, rowspan, colspan);\n        });\n        return rowdata(element, cells, parentSection);\n      });\n    };\n    var fromPastedRows = function (rows, example) {\n      return map(rows, function (row) {\n        var cells = map(TableLookup.cells(row), function (cell) {\n          var rowspan = has(cell, 'rowspan') ? parseInt(get(cell, 'rowspan'), 10) : 1;\n          var colspan = has(cell, 'colspan') ? parseInt(get(cell, 'colspan'), 10) : 1;\n          return detail(cell, rowspan, colspan);\n        });\n        return rowdata(row, cells, example.section());\n      });\n    };\n    var DetailsList = {\n      fromTable: fromTable,\n      fromPastedRows: fromPastedRows\n    };\n\n    var key = function (row, column) {\n      return row + ',' + column;\n    };\n    var getAt = function (warehouse, row, column) {\n      var raw = warehouse.access()[key(row, column)];\n      return raw !== undefined ? Option.some(raw) : Option.none();\n    };\n    var findItem = function (warehouse, item, comparator) {\n      var filtered = filterItems(warehouse, function (detail) {\n        return comparator(item, detail.element());\n      });\n      return filtered.length > 0 ? Option.some(filtered[0]) : Option.none();\n    };\n    var filterItems = function (warehouse, predicate) {\n      var all = bind(warehouse.all(), function (r) {\n        return r.cells();\n      });\n      return filter(all, predicate);\n    };\n    var generate = function (list) {\n      var access = {};\n      var cells = [];\n      var maxRows = list.length;\n      var maxColumns = 0;\n      each(list, function (details, r) {\n        var currentRow = [];\n        each(details.cells(), function (detail) {\n          var start = 0;\n          while (access[key(r, start)] !== undefined) {\n            start++;\n          }\n          var current = extended(detail.element(), detail.rowspan(), detail.colspan(), r, start);\n          for (var i = 0; i < detail.colspan(); i++) {\n            for (var j = 0; j < detail.rowspan(); j++) {\n              var cr = r + j;\n              var cc = start + i;\n              var newpos = key(cr, cc);\n              access[newpos] = current;\n              maxColumns = Math.max(maxColumns, cc + 1);\n            }\n          }\n          currentRow.push(current);\n        });\n        cells.push(rowdata(details.element(), currentRow, details.section()));\n      });\n      var grid$1 = grid(maxRows, maxColumns);\n      return {\n        grid: constant(grid$1),\n        access: constant(access),\n        all: constant(cells)\n      };\n    };\n    var justCells = function (warehouse) {\n      var rows = map(warehouse.all(), function (w) {\n        return w.cells();\n      });\n      return flatten(rows);\n    };\n    var Warehouse = {\n      generate: generate,\n      getAt: getAt,\n      findItem: findItem,\n      filterItems: filterItems,\n      justCells: justCells\n    };\n\n    var statsStruct = Immutable('minRow', 'minCol', 'maxRow', 'maxCol');\n    var findSelectedStats = function (house, isSelected) {\n      var totalColumns = house.grid().columns();\n      var totalRows = house.grid().rows();\n      var minRow = totalRows;\n      var minCol = totalColumns;\n      var maxRow = 0;\n      var maxCol = 0;\n      each$1(house.access(), function (detail) {\n        if (isSelected(detail)) {\n          var startRow = detail.row();\n          var endRow = startRow + detail.rowspan() - 1;\n          var startCol = detail.column();\n          var endCol = startCol + detail.colspan() - 1;\n          if (startRow < minRow) {\n            minRow = startRow;\n          } else if (endRow > maxRow) {\n            maxRow = endRow;\n          }\n          if (startCol < minCol) {\n            minCol = startCol;\n          } else if (endCol > maxCol) {\n            maxCol = endCol;\n          }\n        }\n      });\n      return statsStruct(minRow, minCol, maxRow, maxCol);\n    };\n    var makeCell = function (list, seenSelected, rowIndex) {\n      var row = list[rowIndex].element();\n      var td = Element.fromTag('td');\n      append(td, Element.fromTag('br'));\n      var f = seenSelected ? append : prepend;\n      f(row, td);\n    };\n    var fillInGaps = function (list, house, stats, isSelected) {\n      var totalColumns = house.grid().columns();\n      var totalRows = house.grid().rows();\n      for (var i = 0; i < totalRows; i++) {\n        var seenSelected = false;\n        for (var j = 0; j < totalColumns; j++) {\n          if (!(i < stats.minRow() || i > stats.maxRow() || j < stats.minCol() || j > stats.maxCol())) {\n            var needCell = Warehouse.getAt(house, i, j).filter(isSelected).isNone();\n            if (needCell) {\n              makeCell(list, seenSelected, i);\n            } else {\n              seenSelected = true;\n            }\n          }\n        }\n      }\n    };\n    var clean = function (table, stats) {\n      var emptyRows = filter(LayerSelector.firstLayer(table, 'tr'), function (row) {\n        return row.dom().childElementCount === 0;\n      });\n      each(emptyRows, remove$2);\n      if (stats.minCol() === stats.maxCol() || stats.minRow() === stats.maxRow()) {\n        each(LayerSelector.firstLayer(table, 'th,td'), function (cell) {\n          remove(cell, 'rowspan');\n          remove(cell, 'colspan');\n        });\n      }\n      remove(table, 'width');\n      remove(table, 'height');\n      remove$1(table, 'width');\n      remove$1(table, 'height');\n    };\n    var extract = function (table, selectedSelector) {\n      var isSelected = function (detail) {\n        return is(detail.element(), selectedSelector);\n      };\n      var list = DetailsList.fromTable(table);\n      var house = Warehouse.generate(list);\n      var stats = findSelectedStats(house, isSelected);\n      var selector = 'th:not(' + selectedSelector + ')' + ',td:not(' + selectedSelector + ')';\n      var unselectedCells = LayerSelector.filterFirstLayer(table, 'th,td', function (cell) {\n        return is(cell, selector);\n      });\n      each(unselectedCells, remove$2);\n      fillInGaps(list, house, stats, isSelected);\n      clean(table, stats);\n      return table;\n    };\n    var CopySelected = { extract: extract };\n\n    function NodeValue (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Option.from(element.dom().nodeValue) : Option.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom().nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    }\n\n    var api = NodeValue(isText, 'text');\n    var get$2 = function (element) {\n      return api.get(element);\n    };\n    var getOption = function (element) {\n      return api.getOption(element);\n    };\n    var set$2 = function (element, value) {\n      api.set(element, value);\n    };\n\n    var getEnd = function (element) {\n      return name(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var NBSP = '\\xA0';\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(NBSP) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains(elementsWithCursorPosition, name(elem));\n    };\n\n    var first = function (element) {\n      return descendant(element, isCursorPosition);\n    };\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Option.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Option.none();\n      };\n      return descend(scope);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return Element.fromDom(original.dom().cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n    var deep = function (original) {\n      return clone$1(original, true);\n    };\n    var shallowAs = function (original, tag) {\n      var nu = Element.fromTag(tag);\n      var attributes = clone(original);\n      setAll(nu, attributes);\n      return nu;\n    };\n    var copy$1 = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      var cloneChildren = children(deep(original));\n      append$1(nu, cloneChildren);\n      return nu;\n    };\n\n    var createCell = function () {\n      var td = Element.fromTag('td');\n      append(td, Element.fromTag('br'));\n      return td;\n    };\n    var replace = function (cell, tag, attrs) {\n      var replica = copy$1(cell, tag);\n      each$1(attrs, function (v, k) {\n        if (v === null) {\n          remove(replica, k);\n        } else {\n          set(replica, k, v);\n        }\n      });\n      return replica;\n    };\n    var pasteReplace = function (cell) {\n      return cell;\n    };\n    var newRow = function (doc) {\n      return function () {\n        return Element.fromTag('tr', doc.dom());\n      };\n    };\n    var cloneFormats = function (oldCell, newCell, formats) {\n      var first$1 = first(oldCell);\n      return first$1.map(function (firstText) {\n        var formatSelector = formats.join(',');\n        var parents = ancestors$1(firstText, formatSelector, function (element) {\n          return eq(element, oldCell);\n        });\n        return foldr(parents, function (last, parent) {\n          var clonedFormat = shallow(parent);\n          remove(clonedFormat, 'contenteditable');\n          append(last, clonedFormat);\n          return clonedFormat;\n        }, newCell);\n      }).getOr(newCell);\n    };\n    var cellOperations = function (mutate, doc, formatsToClone) {\n      var newCell = function (prev) {\n        var docu = owner(prev.element());\n        var td = Element.fromTag(name(prev.element()), docu.dom());\n        var formats = formatsToClone.getOr([\n          'strong',\n          'em',\n          'b',\n          'i',\n          'span',\n          'font',\n          'h1',\n          'h2',\n          'h3',\n          'h4',\n          'h5',\n          'h6',\n          'p',\n          'div'\n        ]);\n        var lastNode = formats.length > 0 ? cloneFormats(prev.element(), td, formats) : td;\n        append(lastNode, Element.fromTag('br'));\n        copy(prev.element(), td);\n        remove$1(td, 'height');\n        if (prev.colspan() !== 1) {\n          remove$1(prev.element(), 'width');\n        }\n        mutate(prev.element(), td);\n        return td;\n      };\n      return {\n        row: newRow(doc),\n        cell: newCell,\n        replace: replace,\n        gap: createCell\n      };\n    };\n    var paste = function (doc) {\n      return {\n        row: newRow(doc),\n        cell: createCell,\n        replace: pasteReplace,\n        gap: createCell\n      };\n    };\n    var TableFill = {\n      cellOperations: cellOperations,\n      paste: paste\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(Element.fromDom(div));\n    };\n\n    var inSelection = function (bounds, detail) {\n      var leftEdge = detail.column();\n      var rightEdge = detail.column() + detail.colspan() - 1;\n      var topEdge = detail.row();\n      var bottomEdge = detail.row() + detail.rowspan() - 1;\n      return leftEdge <= bounds.finishCol() && rightEdge >= bounds.startCol() && (topEdge <= bounds.finishRow() && bottomEdge >= bounds.startRow());\n    };\n    var isWithin = function (bounds, detail) {\n      return detail.column() >= bounds.startCol() && detail.column() + detail.colspan() - 1 <= bounds.finishCol() && detail.row() >= bounds.startRow() && detail.row() + detail.rowspan() - 1 <= bounds.finishRow();\n    };\n    var isRectangular = function (warehouse, bounds) {\n      var isRect = true;\n      var detailIsWithin = curry(isWithin, bounds);\n      for (var i = bounds.startRow(); i <= bounds.finishRow(); i++) {\n        for (var j = bounds.startCol(); j <= bounds.finishCol(); j++) {\n          isRect = isRect && Warehouse.getAt(warehouse, i, j).exists(detailIsWithin);\n        }\n      }\n      return isRect ? Option.some(bounds) : Option.none();\n    };\n    var CellBounds = {\n      inSelection: inSelection,\n      isWithin: isWithin,\n      isRectangular: isRectangular\n    };\n\n    var getBounds = function (detailA, detailB) {\n      return bounds(Math.min(detailA.row(), detailB.row()), Math.min(detailA.column(), detailB.column()), Math.max(detailA.row() + detailA.rowspan() - 1, detailB.row() + detailB.rowspan() - 1), Math.max(detailA.column() + detailA.colspan() - 1, detailB.column() + detailB.colspan() - 1));\n    };\n    var getAnyBox = function (warehouse, startCell, finishCell) {\n      var startCoords = Warehouse.findItem(warehouse, startCell, eq);\n      var finishCoords = Warehouse.findItem(warehouse, finishCell, eq);\n      return startCoords.bind(function (sc) {\n        return finishCoords.map(function (fc) {\n          return getBounds(sc, fc);\n        });\n      });\n    };\n    var getBox = function (warehouse, startCell, finishCell) {\n      return getAnyBox(warehouse, startCell, finishCell).bind(function (bounds) {\n        return CellBounds.isRectangular(warehouse, bounds);\n      });\n    };\n    var CellGroup = {\n      getAnyBox: getAnyBox,\n      getBox: getBox\n    };\n\n    var moveBy = function (warehouse, cell, row, column) {\n      return Warehouse.findItem(warehouse, cell, eq).bind(function (detail) {\n        var startRow = row > 0 ? detail.row() + detail.rowspan() - 1 : detail.row();\n        var startCol = column > 0 ? detail.column() + detail.colspan() - 1 : detail.column();\n        var dest = Warehouse.getAt(warehouse, startRow + row, startCol + column);\n        return dest.map(function (d) {\n          return d.element();\n        });\n      });\n    };\n    var intercepts = function (warehouse, start, finish) {\n      return CellGroup.getAnyBox(warehouse, start, finish).map(function (bounds) {\n        var inside = Warehouse.filterItems(warehouse, curry(CellBounds.inSelection, bounds));\n        return map(inside, function (detail) {\n          return detail.element();\n        });\n      });\n    };\n    var parentCell = function (warehouse, innerCell) {\n      var isContainedBy = function (c1, c2) {\n        return contains$2(c2, c1);\n      };\n      return Warehouse.findItem(warehouse, innerCell, isContainedBy).map(function (detail) {\n        return detail.element();\n      });\n    };\n    var CellFinder = {\n      moveBy: moveBy,\n      intercepts: intercepts,\n      parentCell: parentCell\n    };\n\n    var moveBy$1 = function (cell, deltaRow, deltaColumn) {\n      return TableLookup.table(cell).bind(function (table) {\n        var warehouse = getWarehouse(table);\n        return CellFinder.moveBy(warehouse, cell, deltaRow, deltaColumn);\n      });\n    };\n    var intercepts$1 = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return CellFinder.intercepts(warehouse, first, last);\n    };\n    var nestedIntercepts = function (table, first, firstTable, last, lastTable) {\n      var warehouse = getWarehouse(table);\n      var optStartCell = eq(table, firstTable) ? Option.some(first) : CellFinder.parentCell(warehouse, first);\n      var optLastCell = eq(table, lastTable) ? Option.some(last) : CellFinder.parentCell(warehouse, last);\n      return optStartCell.bind(function (startCell) {\n        return optLastCell.bind(function (lastCell) {\n          return CellFinder.intercepts(warehouse, startCell, lastCell);\n        });\n      });\n    };\n    var getBox$1 = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return CellGroup.getBox(warehouse, first, last);\n    };\n    var getWarehouse = function (table) {\n      var list = DetailsList.fromTable(table);\n      return Warehouse.generate(list);\n    };\n    var TablePositions = {\n      moveBy: moveBy$1,\n      intercepts: intercepts$1,\n      nestedIntercepts: nestedIntercepts,\n      getBox: getBox$1\n    };\n\n    var TagBoundaries = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'li',\n      'table',\n      'thead',\n      'tbody',\n      'tfoot',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n\n    function DomUniverse () {\n      var clone$1 = function (element) {\n        return Element.fromDom(element.dom().cloneNode(false));\n      };\n      var document = function (element) {\n        return element.dom().ownerDocument;\n      };\n      var isBoundary = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        if (name(element) === 'body') {\n          return true;\n        }\n        return contains(TagBoundaries, name(element));\n      };\n      var isEmptyTag = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        return contains([\n          'br',\n          'img',\n          'hr',\n          'input'\n        ], name(element));\n      };\n      var comparePosition = function (element, other) {\n        return element.dom().compareDocumentPosition(other.dom());\n      };\n      var copyAttributesTo = function (source, destination) {\n        var as = clone(source);\n        setAll(destination, as);\n      };\n      return {\n        up: constant({\n          selector: ancestor$1,\n          closest: closest$1,\n          predicate: ancestor,\n          all: parents\n        }),\n        down: constant({\n          selector: descendants$1,\n          predicate: descendants\n        }),\n        styles: constant({\n          get: get$1,\n          getRaw: getRaw,\n          set: set$1,\n          remove: remove$1\n        }),\n        attrs: constant({\n          get: get,\n          set: set,\n          remove: remove,\n          copyTo: copyAttributesTo\n        }),\n        insert: constant({\n          before: before,\n          after: after,\n          afterAll: after$1,\n          append: append,\n          appendAll: append$1,\n          prepend: prepend,\n          wrap: wrap\n        }),\n        remove: constant({\n          unwrap: unwrap,\n          remove: remove$2\n        }),\n        create: constant({\n          nu: Element.fromTag,\n          clone: clone$1,\n          text: Element.fromText\n        }),\n        query: constant({\n          comparePosition: comparePosition,\n          prevSibling: prevSibling,\n          nextSibling: nextSibling\n        }),\n        property: constant({\n          children: children,\n          name: name,\n          parent: parent,\n          document: document,\n          isText: isText,\n          isComment: isComment,\n          isElement: isElement,\n          getText: get$2,\n          setText: set$2,\n          isBoundary: isBoundary,\n          isEmptyTag: isEmptyTag\n        }),\n        eq: eq,\n        is: is$1\n      };\n    }\n\n    var leftRight = Immutable('left', 'right');\n    var brokenPath = Immutable('first', 'second', 'splits');\n    var bisect = function (universe, parent, child) {\n      var children = universe.property().children(parent);\n      var index = findIndex(children, curry(universe.eq, child));\n      return index.map(function (ind) {\n        return {\n          before: constant(children.slice(0, ind)),\n          after: constant(children.slice(ind + 1))\n        };\n      });\n    };\n    var breakToRight = function (universe, parent, child) {\n      return bisect(universe, parent, child).map(function (parts) {\n        var second = universe.create().clone(parent);\n        universe.insert().appendAll(second, parts.after());\n        universe.insert().after(parent, second);\n        return leftRight(parent, second);\n      });\n    };\n    var breakToLeft = function (universe, parent, child) {\n      return bisect(universe, parent, child).map(function (parts) {\n        var prior = universe.create().clone(parent);\n        universe.insert().appendAll(prior, parts.before().concat([child]));\n        universe.insert().appendAll(parent, parts.after());\n        universe.insert().before(parent, prior);\n        return leftRight(prior, parent);\n      });\n    };\n    var breakPath = function (universe, item, isTop, breaker) {\n      var next = function (child, group, splits) {\n        var fallback = brokenPath(child, Option.none(), splits);\n        if (isTop(child)) {\n          return brokenPath(child, group, splits);\n        } else {\n          return universe.property().parent(child).bind(function (parent) {\n            return breaker(universe, parent, child).map(function (breakage) {\n              var extra = [{\n                  first: breakage.left,\n                  second: breakage.right\n                }];\n              var nextChild = isTop(parent) ? parent : breakage.left();\n              return next(nextChild, Option.some(breakage.right()), splits.concat(extra));\n            });\n          }).getOr(fallback);\n        }\n      };\n      return next(item, Option.none(), []);\n    };\n\n    var all$1 = function (universe, look, elements, f) {\n      var head = elements[0];\n      var tail = elements.slice(1);\n      return f(universe, look, head, tail);\n    };\n    var oneAll = function (universe, look, elements) {\n      return elements.length > 0 ? all$1(universe, look, elements, unsafeOne) : Option.none();\n    };\n    var unsafeOne = function (universe, look, head, tail) {\n      var start = look(universe, head);\n      return foldr(tail, function (b, a) {\n        var current = look(universe, a);\n        return commonElement(universe, b, current);\n      }, start);\n    };\n    var commonElement = function (universe, start, end) {\n      return start.bind(function (s) {\n        return end.filter(curry(universe.eq, s));\n      });\n    };\n\n    var eq$1 = function (universe, item) {\n      return curry(universe.eq, item);\n    };\n    var unsafeSubset = function (universe, common, ps1, ps2) {\n      var children = universe.property().children(common);\n      if (universe.eq(common, ps1[0])) {\n        return Option.some([ps1[0]]);\n      }\n      if (universe.eq(common, ps2[0])) {\n        return Option.some([ps2[0]]);\n      }\n      var finder = function (ps) {\n        var topDown = reverse(ps);\n        var index = findIndex(topDown, eq$1(universe, common)).getOr(-1);\n        var item = index < topDown.length - 1 ? topDown[index + 1] : topDown[index];\n        return findIndex(children, eq$1(universe, item));\n      };\n      var startIndex = finder(ps1);\n      var endIndex = finder(ps2);\n      return startIndex.bind(function (sIndex) {\n        return endIndex.map(function (eIndex) {\n          var first = Math.min(sIndex, eIndex);\n          var last = Math.max(sIndex, eIndex);\n          return children.slice(first, last + 1);\n        });\n      });\n    };\n    var ancestors$2 = function (universe, start, end, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      var ps1 = [start].concat(universe.up().all(start));\n      var ps2 = [end].concat(universe.up().all(end));\n      var prune = function (path) {\n        var index = findIndex(path, isRoot);\n        return index.fold(function () {\n          return path;\n        }, function (ind) {\n          return path.slice(0, ind + 1);\n        });\n      };\n      var pruned1 = prune(ps1);\n      var pruned2 = prune(ps2);\n      var shared = find(pruned1, function (x) {\n        return exists(pruned2, eq$1(universe, x));\n      });\n      return {\n        firstpath: constant(pruned1),\n        secondpath: constant(pruned2),\n        shared: constant(shared)\n      };\n    };\n    var subset = function (universe, start, end) {\n      var ancs = ancestors$2(universe, start, end);\n      return ancs.shared().bind(function (shared) {\n        return unsafeSubset(universe, shared, ancs.firstpath(), ancs.secondpath());\n      });\n    };\n    var SubsetFn = {\n      subset: subset,\n      ancestors: ancestors$2\n    };\n\n    var sharedOne = oneAll;\n    var subset$1 = SubsetFn.subset;\n    var ancestors$3 = SubsetFn.ancestors;\n    var breakToLeft$1 = breakToLeft;\n    var breakToRight$1 = breakToRight;\n    var breakPath$1 = breakPath;\n    var Parent = {\n      sharedOne: sharedOne,\n      subset: subset$1,\n      ancestors: ancestors$3,\n      breakToLeft: breakToLeft$1,\n      breakToRight: breakToRight$1,\n      breakPath: breakPath$1\n    };\n\n    var universe = DomUniverse();\n    var sharedOne$1 = function (look, elements) {\n      return Parent.sharedOne(universe, function (_universe, element) {\n        return look(element);\n      }, elements);\n    };\n    var subset$2 = function (start, finish) {\n      return Parent.subset(universe, start, finish);\n    };\n    var ancestors$4 = function (start, finish, isRoot) {\n      return Parent.ancestors(universe, start, finish, isRoot);\n    };\n    var breakToLeft$2 = function (parent, child) {\n      return Parent.breakToLeft(universe, parent, child);\n    };\n    var breakToRight$2 = function (parent, child) {\n      return Parent.breakToRight(universe, parent, child);\n    };\n    var breakPath$2 = function (child, isTop, breaker) {\n      return Parent.breakPath(universe, child, isTop, function (u, p, c) {\n        return breaker(p, c);\n      });\n    };\n    var DomParent = {\n      sharedOne: sharedOne$1,\n      subset: subset$2,\n      ancestors: ancestors$4,\n      breakToLeft: breakToLeft$2,\n      breakToRight: breakToRight$2,\n      breakPath: breakPath$2\n    };\n\n    var create = MixedBag([\n      'boxes',\n      'start',\n      'finish'\n    ], []);\n    var Identified = { create: create };\n\n    var lookupTable = function (container) {\n      return ancestor$1(container, 'table');\n    };\n    var identify = function (start, finish, isRoot) {\n      var getIsRoot = function (rootTable) {\n        return function (element) {\n          return isRoot !== undefined && isRoot(element) || eq(element, rootTable);\n        };\n      };\n      if (eq(start, finish)) {\n        return Option.some(Identified.create({\n          boxes: Option.some([start]),\n          start: start,\n          finish: finish\n        }));\n      } else {\n        return lookupTable(start).bind(function (startTable) {\n          return lookupTable(finish).bind(function (finishTable) {\n            if (eq(startTable, finishTable)) {\n              return Option.some(Identified.create({\n                boxes: TablePositions.intercepts(startTable, start, finish),\n                start: start,\n                finish: finish\n              }));\n            } else if (contains$2(startTable, finishTable)) {\n              var ancestorCells = ancestors$1(finish, 'td,th', getIsRoot(startTable));\n              var finishCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : finish;\n              return Option.some(Identified.create({\n                boxes: TablePositions.nestedIntercepts(startTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: finishCell\n              }));\n            } else if (contains$2(finishTable, startTable)) {\n              var ancestorCells = ancestors$1(start, 'td,th', getIsRoot(finishTable));\n              var startCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : start;\n              return Option.some(Identified.create({\n                boxes: TablePositions.nestedIntercepts(finishTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: startCell\n              }));\n            } else {\n              return DomParent.ancestors(start, finish).shared().bind(function (lca) {\n                return closest$1(lca, 'table', isRoot).bind(function (lcaTable) {\n                  var finishAncestorCells = ancestors$1(finish, 'td,th', getIsRoot(lcaTable));\n                  var finishCell = finishAncestorCells.length > 0 ? finishAncestorCells[finishAncestorCells.length - 1] : finish;\n                  var startAncestorCells = ancestors$1(start, 'td,th', getIsRoot(lcaTable));\n                  var startCell = startAncestorCells.length > 0 ? startAncestorCells[startAncestorCells.length - 1] : start;\n                  return Option.some(Identified.create({\n                    boxes: TablePositions.nestedIntercepts(lcaTable, start, startTable, finish, finishTable),\n                    start: startCell,\n                    finish: finishCell\n                  }));\n                });\n              });\n            }\n          });\n        });\n      }\n    };\n    var retrieve = function (container, selector) {\n      var sels = descendants$1(container, selector);\n      return sels.length > 0 ? Option.some(sels) : Option.none();\n    };\n    var getLast = function (boxes, lastSelectedSelector) {\n      return find(boxes, function (box) {\n        return is(box, lastSelectedSelector);\n      });\n    };\n    var getEdges = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return descendant$1(container, firstSelectedSelector).bind(function (first) {\n        return descendant$1(container, lastSelectedSelector).bind(function (last) {\n          return DomParent.sharedOne(lookupTable, [\n            first,\n            last\n          ]).map(function (tbl) {\n            return {\n              first: constant(first),\n              last: constant(last),\n              table: constant(tbl)\n            };\n          });\n        });\n      });\n    };\n    var expandTo = function (finish, firstSelectedSelector) {\n      return ancestor$1(finish, 'table').bind(function (table) {\n        return descendant$1(table, firstSelectedSelector).bind(function (start) {\n          return identify(start, finish).bind(function (identified) {\n            return identified.boxes().map(function (boxes) {\n              return {\n                boxes: constant(boxes),\n                start: constant(identified.start()),\n                finish: constant(identified.finish())\n              };\n            });\n          });\n        });\n      });\n    };\n    var shiftSelection = function (boxes, deltaRow, deltaColumn, firstSelectedSelector, lastSelectedSelector) {\n      return getLast(boxes, lastSelectedSelector).bind(function (last) {\n        return TablePositions.moveBy(last, deltaRow, deltaColumn).bind(function (finish) {\n          return expandTo(finish, firstSelectedSelector);\n        });\n      });\n    };\n    var CellSelection = {\n      identify: identify,\n      retrieve: retrieve,\n      shiftSelection: shiftSelection,\n      getEdges: getEdges\n    };\n\n    var retrieve$1 = function (container, selector) {\n      return CellSelection.retrieve(container, selector);\n    };\n    var retrieveBox = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return CellSelection.getEdges(container, firstSelectedSelector, lastSelectedSelector).bind(function (edges) {\n        var isRoot = function (ancestor) {\n          return eq(container, ancestor);\n        };\n        var firstAncestor = ancestor$1(edges.first(), 'thead,tfoot,tbody,table', isRoot);\n        var lastAncestor = ancestor$1(edges.last(), 'thead,tfoot,tbody,table', isRoot);\n        return firstAncestor.bind(function (fA) {\n          return lastAncestor.bind(function (lA) {\n            return eq(fA, lA) ? TablePositions.getBox(edges.table(), edges.first(), edges.last()) : Option.none();\n          });\n        });\n      });\n    };\n    var TableSelection = {\n      retrieve: retrieve$1,\n      retrieveBox: retrieveBox\n    };\n\n    var selected = 'data-mce-selected';\n    var selectedSelector = 'td[' + selected + '],th[' + selected + ']';\n    var attributeSelector = '[' + selected + ']';\n    var firstSelected = 'data-mce-first-selected';\n    var firstSelectedSelector = 'td[' + firstSelected + '],th[' + firstSelected + ']';\n    var lastSelected = 'data-mce-last-selected';\n    var lastSelectedSelector = 'td[' + lastSelected + '],th[' + lastSelected + ']';\n    var Ephemera = {\n      selected: constant(selected),\n      selectedSelector: constant(selectedSelector),\n      attributeSelector: constant(attributeSelector),\n      firstSelected: constant(firstSelected),\n      firstSelectedSelector: constant(firstSelectedSelector),\n      lastSelected: constant(lastSelected),\n      lastSelectedSelector: constant(lastSelectedSelector)\n    };\n\n    var generate$1 = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var argLength = arguments.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var args = new Array(argLength);\n          for (var i = 0; i < args.length; i++) {\n            args[i] = arguments[i];\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              if (arguments.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n              }\n              var target = arguments[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              domGlobals.console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$1 };\n\n    var type$1 = Adt.generate([\n      { none: [] },\n      { multiple: ['elements'] },\n      { single: ['selection'] }\n    ]);\n    var cata = function (subject, onNone, onMultiple, onSingle) {\n      return subject.fold(onNone, onMultiple, onSingle);\n    };\n    var SelectionTypes = {\n      cata: cata,\n      none: type$1.none,\n      multiple: type$1.multiple,\n      single: type$1.single\n    };\n\n    var selection = function (cell, selections) {\n      return SelectionTypes.cata(selections.get(), constant([]), identity, constant([cell]));\n    };\n    var unmergable = function (cell, selections) {\n      var hasSpan = function (elem) {\n        return has(elem, 'rowspan') && parseInt(get(elem, 'rowspan'), 10) > 1 || has(elem, 'colspan') && parseInt(get(elem, 'colspan'), 10) > 1;\n      };\n      var candidates = selection(cell, selections);\n      return candidates.length > 0 && forall(candidates, hasSpan) ? Option.some(candidates) : Option.none();\n    };\n    var mergable = function (table, selections) {\n      return SelectionTypes.cata(selections.get(), Option.none, function (cells, _env) {\n        if (cells.length === 0) {\n          return Option.none();\n        }\n        return TableSelection.retrieveBox(table, Ephemera.firstSelectedSelector(), Ephemera.lastSelectedSelector()).bind(function (bounds) {\n          return cells.length > 1 ? Option.some({\n            bounds: constant(bounds),\n            cells: constant(cells)\n          }) : Option.none();\n        });\n      }, Option.none);\n    };\n    var CellOperations = {\n      mergable: mergable,\n      unmergable: unmergable,\n      selection: selection\n    };\n\n    var noMenu = function (cell) {\n      return {\n        element: constant(cell),\n        mergable: Option.none,\n        unmergable: Option.none,\n        selection: constant([cell])\n      };\n    };\n    var forMenu = function (selections, table, cell) {\n      return {\n        element: constant(cell),\n        mergable: constant(CellOperations.mergable(table, selections)),\n        unmergable: constant(CellOperations.unmergable(cell, selections)),\n        selection: constant(CellOperations.selection(cell, selections))\n      };\n    };\n    var notCell$1 = function (element) {\n      return noMenu(element);\n    };\n    var paste$1 = Immutable('element', 'clipboard', 'generators');\n    var pasteRows = function (selections, table, cell, clipboard, generators) {\n      return {\n        element: constant(cell),\n        mergable: Option.none,\n        unmergable: Option.none,\n        selection: constant(CellOperations.selection(cell, selections)),\n        clipboard: constant(clipboard),\n        generators: constant(generators)\n      };\n    };\n    var TableTargets = {\n      noMenu: noMenu,\n      forMenu: forMenu,\n      notCell: notCell$1,\n      paste: paste$1,\n      pasteRows: pasteRows\n    };\n\n    var extractSelected = function (cells) {\n      return TableLookup.table(cells[0]).map(deep).map(function (replica) {\n        return [CopySelected.extract(replica, Ephemera.attributeSelector())];\n      });\n    };\n    var serializeElements = function (editor, elements) {\n      return map(elements, function (elm) {\n        return editor.selection.serializer.serialize(elm.dom(), {});\n      }).join('');\n    };\n    var getTextContent = function (elements) {\n      return map(elements, function (element) {\n        return element.dom().innerText;\n      }).join('');\n    };\n    var registerEvents = function (editor, selections, actions, cellSelection) {\n      editor.on('BeforeGetContent', function (e) {\n        var multiCellContext = function (cells) {\n          e.preventDefault();\n          extractSelected(cells).each(function (elements) {\n            e.content = e.format === 'text' ? getTextContent(elements) : serializeElements(editor, elements);\n          });\n        };\n        if (e.selection === true) {\n          SelectionTypes.cata(selections.get(), noop, multiCellContext, noop);\n        }\n      });\n      editor.on('BeforeSetContent', function (e) {\n        if (e.selection === true && e.paste === true) {\n          var cellOpt = Option.from(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n          cellOpt.each(function (domCell) {\n            var cell = Element.fromDom(domCell);\n            TableLookup.table(cell).each(function (table) {\n              var elements = filter(fromHtml$1(e.content), function (content) {\n                return name(content) !== 'meta';\n              });\n              if (elements.length === 1 && name(elements[0]) === 'table') {\n                e.preventDefault();\n                var doc = Element.fromDom(editor.getDoc());\n                var generators = TableFill.paste(doc);\n                var targets = TableTargets.paste(cell, elements[0], generators);\n                actions.pasteCells(table, targets).each(function (rng) {\n                  editor.selection.setRng(rng);\n                  editor.focus();\n                  cellSelection.clear(table);\n                });\n              }\n            });\n          });\n        }\n      });\n    };\n    var Clipboard = { registerEvents: registerEvents };\n\n    function Dimension (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom();\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$1(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$1(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    }\n\n    var api$1 = Dimension('height', function (element) {\n      var dom = element.dom();\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$3 = function (element) {\n      return api$1.get(element);\n    };\n    var getOuter = function (element) {\n      return api$1.getOuter(element);\n    };\n\n    var api$2 = Dimension('width', function (element) {\n      return element.dom().offsetWidth;\n    });\n    var get$4 = function (element) {\n      return api$2.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api$2.getOuter(element);\n    };\n\n    var platform = PlatformDetection$1.detect();\n    var needManualCalc = function () {\n      return platform.browser.isIE() || platform.browser.isEdge();\n    };\n    var toNumber = function (px, fallback) {\n      var num = parseFloat(px);\n      return isNaN(num) ? fallback : num;\n    };\n    var getProp = function (elm, name, fallback) {\n      return toNumber(get$1(elm, name), fallback);\n    };\n    var getCalculatedHeight = function (cell) {\n      var paddingTop = getProp(cell, 'padding-top', 0);\n      var paddingBottom = getProp(cell, 'padding-bottom', 0);\n      var borderTop = getProp(cell, 'border-top-width', 0);\n      var borderBottom = getProp(cell, 'border-bottom-width', 0);\n      var height = cell.dom().getBoundingClientRect().height;\n      var boxSizing = get$1(cell, 'box-sizing');\n      var borders = borderTop + borderBottom;\n      return boxSizing === 'border-box' ? height : height - paddingTop - paddingBottom - borders;\n    };\n    var getWidth = function (cell) {\n      return getProp(cell, 'width', get$4(cell));\n    };\n    var getHeight = function (cell) {\n      return needManualCalc() ? getCalculatedHeight(cell) : getProp(cell, 'height', get$3(cell));\n    };\n    var RuntimeSize = {\n      getWidth: getWidth,\n      getHeight: getHeight\n    };\n\n    var genericSizeRegex = /(\\d+(\\.\\d+)?)(\\w|%)*/;\n    var percentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n    var pixelBasedSizeRegex = /(\\d+(\\.\\d+)?)px|em/;\n    var setPixelWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + 'px');\n    };\n    var setPercentageWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + '%');\n    };\n    var setHeight = function (cell, amount) {\n      set$1(cell, 'height', amount + 'px');\n    };\n    var getHeightValue = function (cell) {\n      return getRaw(cell, 'height').getOrThunk(function () {\n        return RuntimeSize.getHeight(cell) + 'px';\n      });\n    };\n    var convert = function (cell, number, getter, setter) {\n      var newSize = TableLookup.table(cell).map(function (table) {\n        var total = getter(table);\n        return Math.floor(number / 100 * total);\n      }).getOr(number);\n      setter(cell, newSize);\n      return newSize;\n    };\n    var normalizePixelSize = function (value, cell, getter, setter) {\n      var number = parseInt(value, 10);\n      return endsWith(value, '%') && name(cell) !== 'table' ? convert(cell, number, getter, setter) : number;\n    };\n    var getTotalHeight = function (cell) {\n      var value = getHeightValue(cell);\n      if (!value) {\n        return get$3(cell);\n      }\n      return normalizePixelSize(value, cell, get$3, setHeight);\n    };\n    var get$5 = function (cell, type, f) {\n      var v = f(cell);\n      var span = getSpan(cell, type);\n      return v / span;\n    };\n    var getSpan = function (cell, type) {\n      return has(cell, type) ? parseInt(get(cell, type), 10) : 1;\n    };\n    var getRawWidth = function (element) {\n      var cssWidth = getRaw(element, 'width');\n      return cssWidth.fold(function () {\n        return Option.from(get(element, 'width'));\n      }, function (width) {\n        return Option.some(width);\n      });\n    };\n    var normalizePercentageWidth = function (cellWidth, tableSize) {\n      return cellWidth / tableSize.pixelWidth() * 100;\n    };\n    var choosePercentageSize = function (element, width, tableSize) {\n      var percentMatch = percentageBasedSizeRegex.exec(width);\n      if (percentMatch !== null) {\n        return parseFloat(percentMatch[1]);\n      } else {\n        var intWidth = get$4(element);\n        return normalizePercentageWidth(intWidth, tableSize);\n      }\n    };\n    var getPercentageWidth = function (cell, tableSize) {\n      var width = getRawWidth(cell);\n      return width.fold(function () {\n        var intWidth = get$4(cell);\n        return normalizePercentageWidth(intWidth, tableSize);\n      }, function (w) {\n        return choosePercentageSize(cell, w, tableSize);\n      });\n    };\n    var normalizePixelWidth = function (cellWidth, tableSize) {\n      return cellWidth / 100 * tableSize.pixelWidth();\n    };\n    var choosePixelSize = function (element, width, tableSize) {\n      var pixelMatch = pixelBasedSizeRegex.exec(width);\n      if (pixelMatch !== null) {\n        return parseInt(pixelMatch[1], 10);\n      }\n      var percentMatch = percentageBasedSizeRegex.exec(width);\n      if (percentMatch !== null) {\n        var floatWidth = parseFloat(percentMatch[1]);\n        return normalizePixelWidth(floatWidth, tableSize);\n      }\n      return get$4(element);\n    };\n    var getPixelWidth = function (cell, tableSize) {\n      var width = getRawWidth(cell);\n      return width.fold(function () {\n        return get$4(cell);\n      }, function (w) {\n        return choosePixelSize(cell, w, tableSize);\n      });\n    };\n    var getHeight$1 = function (cell) {\n      return get$5(cell, 'rowspan', getTotalHeight);\n    };\n    var getGenericWidth = function (cell) {\n      var width = getRawWidth(cell);\n      return width.bind(function (w) {\n        var match = genericSizeRegex.exec(w);\n        if (match !== null) {\n          return Option.some({\n            width: constant(parseFloat(match[1])),\n            unit: constant(match[3])\n          });\n        } else {\n          return Option.none();\n        }\n      });\n    };\n    var setGenericWidth = function (cell, amount, unit) {\n      set$1(cell, 'width', amount + unit);\n    };\n    var Sizes = {\n      percentageBasedSizeRegex: constant(percentageBasedSizeRegex),\n      pixelBasedSizeRegex: constant(pixelBasedSizeRegex),\n      setPixelWidth: setPixelWidth,\n      setPercentageWidth: setPercentageWidth,\n      setHeight: setHeight,\n      getPixelWidth: getPixelWidth,\n      getPercentageWidth: getPercentageWidth,\n      getGenericWidth: getGenericWidth,\n      setGenericWidth: setGenericWidth,\n      getHeight: getHeight$1,\n      getRawWidth: getRawWidth\n    };\n\n    var halve = function (main, other) {\n      var width = Sizes.getGenericWidth(main);\n      width.each(function (w) {\n        var newWidth = w.width() / 2;\n        Sizes.setGenericWidth(main, newWidth, w.unit());\n        Sizes.setGenericWidth(other, newWidth, w.unit());\n      });\n    };\n    var CellMutations = { halve: halve };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: constant(left),\n        top: constant(top),\n        translate: translate\n      };\n    };\n    var Position = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return Position(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      return a !== undefined ? a : b !== undefined ? b : 0;\n    };\n    var absolute = function (element) {\n      var doc = element.dom().ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      var scrollTop = firstDefinedOrZero(win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom();\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return Position(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return Position(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var rowInfo = Immutable('row', 'y');\n    var colInfo = Immutable('col', 'x');\n    var rtlEdge = function (cell) {\n      var pos = absolute(cell);\n      return pos.left() + getOuter$1(cell);\n    };\n    var ltrEdge = function (cell) {\n      return absolute(cell).left();\n    };\n    var getLeftEdge = function (index, cell) {\n      return colInfo(index, ltrEdge(cell));\n    };\n    var getRightEdge = function (index, cell) {\n      return colInfo(index, rtlEdge(cell));\n    };\n    var getTop = function (cell) {\n      return absolute(cell).top();\n    };\n    var getTopEdge = function (index, cell) {\n      return rowInfo(index, getTop(cell));\n    };\n    var getBottomEdge = function (index, cell) {\n      return rowInfo(index, getTop(cell) + getOuter(cell));\n    };\n    var findPositions = function (getInnerEdge, getOuterEdge, array) {\n      if (array.length === 0) {\n        return [];\n      }\n      var lines = map(array.slice(1), function (cellOption, index) {\n        return cellOption.map(function (cell) {\n          return getInnerEdge(index, cell);\n        });\n      });\n      var lastLine = array[array.length - 1].map(function (cell) {\n        return getOuterEdge(array.length - 1, cell);\n      });\n      return lines.concat([lastLine]);\n    };\n    var negate = function (step) {\n      return -step;\n    };\n    var height = {\n      delta: identity,\n      positions: function (optElements) {\n        return findPositions(getTopEdge, getBottomEdge, optElements);\n      },\n      edge: getTop\n    };\n    var ltr = {\n      delta: identity,\n      edge: ltrEdge,\n      positions: function (optElements) {\n        return findPositions(getLeftEdge, getRightEdge, optElements);\n      }\n    };\n    var rtl = {\n      delta: negate,\n      edge: rtlEdge,\n      positions: function (optElements) {\n        return findPositions(getRightEdge, getLeftEdge, optElements);\n      }\n    };\n    var BarPositions = {\n      height: height,\n      rtl: rtl,\n      ltr: ltr\n    };\n\n    var ResizeDirection = {\n      ltr: BarPositions.ltr,\n      rtl: BarPositions.rtl\n    };\n\n    function TableDirection (directionAt) {\n      var auto = function (table) {\n        return directionAt(table).isRtl() ? ResizeDirection.rtl : ResizeDirection.ltr;\n      };\n      var delta = function (amount, table) {\n        return auto(table).delta(amount, table);\n      };\n      var positions = function (cols, table) {\n        return auto(table).positions(cols, table);\n      };\n      var edge = function (cell) {\n        return auto(cell).edge(cell);\n      };\n      return {\n        delta: delta,\n        edge: edge,\n        positions: positions\n      };\n    }\n\n    var getGridSize = function (table) {\n      var input = DetailsList.fromTable(table);\n      var warehouse = Warehouse.generate(input);\n      return warehouse.grid();\n    };\n    var TableGridSize = { getGridSize: getGridSize };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Option.none();\n    };\n\n    var setIfNot = function (element, property, value, ignore) {\n      if (value === ignore) {\n        remove(element, property);\n      } else {\n        set(element, property, value);\n      }\n    };\n    var render = function (table, grid) {\n      var newRows = [];\n      var newCells = [];\n      var renderSection = function (gridSection, sectionName) {\n        var section = child$2(table, sectionName).getOrThunk(function () {\n          var tb = Element.fromTag(sectionName, owner(table).dom());\n          append(table, tb);\n          return tb;\n        });\n        empty(section);\n        var rows = map(gridSection, function (row) {\n          if (row.isNew()) {\n            newRows.push(row.element());\n          }\n          var tr = row.element();\n          empty(tr);\n          each(row.cells(), function (cell) {\n            if (cell.isNew()) {\n              newCells.push(cell.element());\n            }\n            setIfNot(cell.element(), 'colspan', cell.colspan(), 1);\n            setIfNot(cell.element(), 'rowspan', cell.rowspan(), 1);\n            append(tr, cell.element());\n          });\n          return tr;\n        });\n        append$1(section, rows);\n      };\n      var removeSection = function (sectionName) {\n        child$2(table, sectionName).each(remove$2);\n      };\n      var renderOrRemoveSection = function (gridSection, sectionName) {\n        if (gridSection.length > 0) {\n          renderSection(gridSection, sectionName);\n        } else {\n          removeSection(sectionName);\n        }\n      };\n      var headSection = [];\n      var bodySection = [];\n      var footSection = [];\n      each(grid, function (row) {\n        switch (row.section()) {\n        case 'thead':\n          headSection.push(row);\n          break;\n        case 'tbody':\n          bodySection.push(row);\n          break;\n        case 'tfoot':\n          footSection.push(row);\n          break;\n        }\n      });\n      renderOrRemoveSection(headSection, 'thead');\n      renderOrRemoveSection(bodySection, 'tbody');\n      renderOrRemoveSection(footSection, 'tfoot');\n      return {\n        newRows: constant(newRows),\n        newCells: constant(newCells)\n      };\n    };\n    var copy$2 = function (grid) {\n      var rows = map(grid, function (row) {\n        var tr = shallow(row.element());\n        each(row.cells(), function (cell) {\n          var clonedCell = deep(cell.element());\n          setIfNot(clonedCell, 'colspan', cell.colspan(), 1);\n          setIfNot(clonedCell, 'rowspan', cell.rowspan(), 1);\n          append(tr, clonedCell);\n        });\n        return tr;\n      });\n      return rows;\n    };\n    var Redraw = {\n      render: render,\n      copy: copy$2\n    };\n\n    var read = function (element, attr) {\n      var value = get(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$3 = function (element, attr, id) {\n      var nu = filter(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set(element, attr, nu.join(' '));\n      } else {\n        remove(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom().classList !== undefined;\n    };\n    var get$6 = function (element) {\n      return read(element, 'class');\n    };\n    var add$1 = function (element, clazz) {\n      return add(element, 'class', clazz);\n    };\n    var remove$4 = function (element, clazz) {\n      return remove$3(element, 'class', clazz);\n    };\n\n    var add$2 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom().classList.add(clazz);\n      } else {\n        add$1(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom().classList : get$6(element);\n      if (classList.length === 0) {\n        remove(element, 'class');\n      }\n    };\n    var remove$5 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom().classList;\n        classList.remove(clazz);\n      } else {\n        remove$4(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$1 = function (element, clazz) {\n      return supports(element) && element.dom().classList.contains(clazz);\n    };\n\n    var repeat = function (repititions, f) {\n      var r = [];\n      for (var i = 0; i < repititions; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var range = function (start, end) {\n      var r = [];\n      for (var i = start; i < end; i++) {\n        r.push(i);\n      }\n      return r;\n    };\n    var deduce = function (xs, index) {\n      if (index < 0 || index >= xs.length - 1) {\n        return Option.none();\n      }\n      var current = xs[index].fold(function () {\n        var rest = reverse(xs.slice(0, index));\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (c) {\n        return Option.some({\n          value: c,\n          delta: 0\n        });\n      });\n      var next = xs[index + 1].fold(function () {\n        var rest = xs.slice(index + 1);\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (n) {\n        return Option.some({\n          value: n,\n          delta: 1\n        });\n      });\n      return current.bind(function (c) {\n        return next.map(function (n) {\n          var extras = n.delta + c.delta;\n          return Math.abs(n.value - c.value) / extras;\n        });\n      });\n    };\n\n    var columns = function (warehouse) {\n      var grid = warehouse.grid();\n      var cols = range(0, grid.columns());\n      var rowsArr = range(0, grid.rows());\n      return map(cols, function (col) {\n        var getBlock = function () {\n          return bind(rowsArr, function (r) {\n            return Warehouse.getAt(warehouse, r, col).filter(function (detail) {\n              return detail.column() === col;\n            }).fold(constant([]), function (detail) {\n              return [detail];\n            });\n          });\n        };\n        var isSingle = function (detail) {\n          return detail.colspan() === 1;\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, 0, col);\n        };\n        return decide(getBlock, isSingle, getFallback);\n      });\n    };\n    var decide = function (getBlock, isSingle, getFallback) {\n      var inBlock = getBlock();\n      var singleInBlock = find(inBlock, isSingle);\n      var detailOption = singleInBlock.orThunk(function () {\n        return Option.from(inBlock[0]).orThunk(getFallback);\n      });\n      return detailOption.map(function (detail) {\n        return detail.element();\n      });\n    };\n    var rows$1 = function (warehouse) {\n      var grid = warehouse.grid();\n      var rowsArr = range(0, grid.rows());\n      var cols = range(0, grid.columns());\n      return map(rowsArr, function (row) {\n        var getBlock = function () {\n          return bind(cols, function (c) {\n            return Warehouse.getAt(warehouse, row, c).filter(function (detail) {\n              return detail.row() === row;\n            }).fold(constant([]), function (detail) {\n              return [detail];\n            });\n          });\n        };\n        var isSingle = function (detail) {\n          return detail.rowspan() === 1;\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, row, 0);\n        };\n        return decide(getBlock, isSingle, getFallback);\n      });\n    };\n    var Blocks = {\n      columns: columns,\n      rows: rows$1\n    };\n\n    var css = function (namespace) {\n      var dashNamespace = namespace.replace(/\\./g, '-');\n      var resolve = function (str) {\n        return dashNamespace + '-' + str;\n      };\n      return { resolve: resolve };\n    };\n\n    var styles = css('ephox-snooker');\n    var Styles = { resolve: styles.resolve };\n\n    var col = function (column, x, y, w, h) {\n      var blocker = Element.fromTag('div');\n      setAll$1(blocker, {\n        position: 'absolute',\n        left: x - w / 2 + 'px',\n        top: y + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll(blocker, {\n        'data-column': column,\n        'role': 'presentation'\n      });\n      return blocker;\n    };\n    var row$1 = function (r, x, y, w, h) {\n      var blocker = Element.fromTag('div');\n      setAll$1(blocker, {\n        position: 'absolute',\n        left: x + 'px',\n        top: y - h / 2 + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll(blocker, {\n        'data-row': r,\n        'role': 'presentation'\n      });\n      return blocker;\n    };\n    var Bar = {\n      col: col,\n      row: row$1\n    };\n\n    var resizeBar = Styles.resolve('resizer-bar');\n    var resizeRowBar = Styles.resolve('resizer-rows');\n    var resizeColBar = Styles.resolve('resizer-cols');\n    var BAR_THICKNESS = 7;\n    var destroy = function (wire) {\n      var previous = descendants$1(wire.parent(), '.' + resizeBar);\n      each(previous, remove$2);\n    };\n    var drawBar = function (wire, positions, create) {\n      var origin = wire.origin();\n      each(positions, function (cpOption, i) {\n        cpOption.each(function (cp) {\n          var bar = create(origin, cp);\n          add$2(bar, resizeBar);\n          append(wire.parent(), bar);\n        });\n      });\n    };\n    var refreshCol = function (wire, colPositions, position, tableHeight) {\n      drawBar(wire, colPositions, function (origin, cp) {\n        var colBar = Bar.col(cp.col(), cp.x() - origin.left(), position.top() - origin.top(), BAR_THICKNESS, tableHeight);\n        add$2(colBar, resizeColBar);\n        return colBar;\n      });\n    };\n    var refreshRow = function (wire, rowPositions, position, tableWidth) {\n      drawBar(wire, rowPositions, function (origin, cp) {\n        var rowBar = Bar.row(cp.row(), position.left() - origin.left(), cp.y() - origin.top(), tableWidth, BAR_THICKNESS);\n        add$2(rowBar, resizeRowBar);\n        return rowBar;\n      });\n    };\n    var refreshGrid = function (wire, table, rows, cols, hdirection, vdirection) {\n      var position = absolute(table);\n      var rowPositions = rows.length > 0 ? hdirection.positions(rows, table) : [];\n      refreshRow(wire, rowPositions, position, getOuter$1(table));\n      var colPositions = cols.length > 0 ? vdirection.positions(cols, table) : [];\n      refreshCol(wire, colPositions, position, getOuter(table));\n    };\n    var refresh = function (wire, table, hdirection, vdirection) {\n      destroy(wire);\n      var list = DetailsList.fromTable(table);\n      var warehouse = Warehouse.generate(list);\n      var rows = Blocks.rows(warehouse);\n      var cols = Blocks.columns(warehouse);\n      refreshGrid(wire, table, rows, cols, hdirection, vdirection);\n    };\n    var each$2 = function (wire, f) {\n      var bars = descendants$1(wire.parent(), '.' + resizeBar);\n      each(bars, f);\n    };\n    var hide = function (wire) {\n      each$2(wire, function (bar) {\n        set$1(bar, 'display', 'none');\n      });\n    };\n    var show = function (wire) {\n      each$2(wire, function (bar) {\n        set$1(bar, 'display', 'block');\n      });\n    };\n    var isRowBar = function (element) {\n      return has$1(element, resizeRowBar);\n    };\n    var isColBar = function (element) {\n      return has$1(element, resizeColBar);\n    };\n    var Bars = {\n      refresh: refresh,\n      hide: hide,\n      show: show,\n      destroy: destroy,\n      isRowBar: isRowBar,\n      isColBar: isColBar\n    };\n\n    var addCell = function (gridRow, index, cell) {\n      var cells = gridRow.cells();\n      var before = cells.slice(0, index);\n      var after = cells.slice(index);\n      var newCells = before.concat([cell]).concat(after);\n      return setCells(gridRow, newCells);\n    };\n    var mutateCell = function (gridRow, index, cell) {\n      var cells = gridRow.cells();\n      cells[index] = cell;\n    };\n    var setCells = function (gridRow, cells) {\n      return rowcells(cells, gridRow.section());\n    };\n    var mapCells = function (gridRow, f) {\n      var cells = gridRow.cells();\n      var r = map(cells, f);\n      return rowcells(r, gridRow.section());\n    };\n    var getCell = function (gridRow, index) {\n      return gridRow.cells()[index];\n    };\n    var getCellElement = function (gridRow, index) {\n      return getCell(gridRow, index).element();\n    };\n    var cellLength = function (gridRow) {\n      return gridRow.cells().length;\n    };\n    var GridRow = {\n      addCell: addCell,\n      setCells: setCells,\n      mutateCell: mutateCell,\n      getCell: getCell,\n      getCellElement: getCellElement,\n      mapCells: mapCells,\n      cellLength: cellLength\n    };\n\n    var getColumn = function (grid, index) {\n      return map(grid, function (row) {\n        return GridRow.getCell(row, index);\n      });\n    };\n    var getRow = function (grid, index) {\n      return grid[index];\n    };\n    var findDiff = function (xs, comp) {\n      if (xs.length === 0) {\n        return 0;\n      }\n      var first = xs[0];\n      var index = findIndex(xs, function (x) {\n        return !comp(first.element(), x.element());\n      });\n      return index.fold(function () {\n        return xs.length;\n      }, function (ind) {\n        return ind;\n      });\n    };\n    var subgrid = function (grid, row, column, comparator) {\n      var restOfRow = getRow(grid, row).cells().slice(column);\n      var endColIndex = findDiff(restOfRow, comparator);\n      var restOfColumn = getColumn(grid, column).slice(row);\n      var endRowIndex = findDiff(restOfColumn, comparator);\n      return {\n        colspan: constant(endColIndex),\n        rowspan: constant(endRowIndex)\n      };\n    };\n    var TableGrid = { subgrid: subgrid };\n\n    var toDetails = function (grid, comparator) {\n      var seen = map(grid, function (row, ri) {\n        return map(row.cells(), function (col, ci) {\n          return false;\n        });\n      });\n      var updateSeen = function (ri, ci, rowspan, colspan) {\n        for (var r = ri; r < ri + rowspan; r++) {\n          for (var c = ci; c < ci + colspan; c++) {\n            seen[r][c] = true;\n          }\n        }\n      };\n      return map(grid, function (row, ri) {\n        var details = bind(row.cells(), function (cell, ci) {\n          if (seen[ri][ci] === false) {\n            var result = TableGrid.subgrid(grid, ri, ci, comparator);\n            updateSeen(ri, ci, result.rowspan(), result.colspan());\n            return [detailnew(cell.element(), result.rowspan(), result.colspan(), cell.isNew())];\n          } else {\n            return [];\n          }\n        });\n        return rowdetails(details, row.section());\n      });\n    };\n    var toGrid = function (warehouse, generators, isNew) {\n      var grid = [];\n      for (var i = 0; i < warehouse.grid().rows(); i++) {\n        var rowCells = [];\n        for (var j = 0; j < warehouse.grid().columns(); j++) {\n          var element = Warehouse.getAt(warehouse, i, j).map(function (item) {\n            return elementnew(item.element(), isNew);\n          }).getOrThunk(function () {\n            return elementnew(generators.gap(), true);\n          });\n          rowCells.push(element);\n        }\n        var row = rowcells(rowCells, warehouse.all()[i].section());\n        grid.push(row);\n      }\n      return grid;\n    };\n    var Transitions = {\n      toDetails: toDetails,\n      toGrid: toGrid\n    };\n\n    var fromWarehouse = function (warehouse, generators) {\n      return Transitions.toGrid(warehouse, generators, false);\n    };\n    var deriveRows = function (rendered, generators) {\n      var findRow = function (details) {\n        var rowOfCells = findMap(details, function (detail) {\n          return parent(detail.element()).map(function (row) {\n            var isNew = parent(row).isNone();\n            return elementnew(row, isNew);\n          });\n        });\n        return rowOfCells.getOrThunk(function () {\n          return elementnew(generators.row(), true);\n        });\n      };\n      return map(rendered, function (details) {\n        var row = findRow(details.details());\n        return rowdatanew(row.element(), details.details(), details.section(), row.isNew());\n      });\n    };\n    var toDetailList = function (grid, generators) {\n      var rendered = Transitions.toDetails(grid, eq);\n      return deriveRows(rendered, generators);\n    };\n    var findInWarehouse = function (warehouse, element) {\n      var all = flatten(map(warehouse.all(), function (r) {\n        return r.cells();\n      }));\n      return find(all, function (e) {\n        return eq(element, e.element());\n      });\n    };\n    var run = function (operation, extract, adjustment, postAction, genWrappers) {\n      return function (wire, table, target, generators, direction) {\n        var input = DetailsList.fromTable(table);\n        var warehouse = Warehouse.generate(input);\n        var output = extract(warehouse, target).map(function (info) {\n          var model = fromWarehouse(warehouse, generators);\n          var result = operation(model, info, eq, genWrappers(generators));\n          var grid = toDetailList(result.grid(), generators);\n          return {\n            grid: constant(grid),\n            cursor: result.cursor\n          };\n        });\n        return output.fold(function () {\n          return Option.none();\n        }, function (out) {\n          var newElements = Redraw.render(table, out.grid());\n          adjustment(table, out.grid(), direction);\n          postAction(table);\n          Bars.refresh(wire, table, BarPositions.height, direction);\n          return Option.some({\n            cursor: out.cursor,\n            newRows: newElements.newRows,\n            newCells: newElements.newCells\n          });\n        });\n      };\n    };\n    var onCell = function (warehouse, target) {\n      return TableLookup.cell(target.element()).bind(function (cell) {\n        return findInWarehouse(warehouse, cell);\n      });\n    };\n    var onPaste = function (warehouse, target) {\n      return TableLookup.cell(target.element()).bind(function (cell) {\n        return findInWarehouse(warehouse, cell).map(function (details) {\n          var value = __assign(__assign({}, details), {\n            generators: target.generators,\n            clipboard: target.clipboard\n          });\n          return value;\n        });\n      });\n    };\n    var onPasteRows = function (warehouse, target) {\n      var details = map(target.selection(), function (cell) {\n        return TableLookup.cell(cell).bind(function (lc) {\n          return findInWarehouse(warehouse, lc);\n        });\n      });\n      var cells = cat(details);\n      return cells.length > 0 ? Option.some({\n        cells: cells,\n        generators: target.generators,\n        clipboard: target.clipboard\n      }) : Option.none();\n    };\n    var onMergable = function (_warehouse, target) {\n      return target.mergable();\n    };\n    var onUnmergable = function (_warehouse, target) {\n      return target.unmergable();\n    };\n    var onCells = function (warehouse, target) {\n      var details = map(target.selection(), function (cell) {\n        return TableLookup.cell(cell).bind(function (lc) {\n          return findInWarehouse(warehouse, lc);\n        });\n      });\n      var cells = cat(details);\n      return cells.length > 0 ? Option.some(cells) : Option.none();\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (opt) {\n        return value(o);\n      };\n      var orThunk = function (f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOption = function () {\n        return Option.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOption: toOption\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOption: Option.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var measure = function (startAddress, gridA, gridB) {\n      if (startAddress.row() >= gridA.length || startAddress.column() > GridRow.cellLength(gridA[0])) {\n        return Result.error('invalid start address out of table bounds, row: ' + startAddress.row() + ', column: ' + startAddress.column());\n      }\n      var rowRemainder = gridA.slice(startAddress.row());\n      var colRemainder = rowRemainder[0].cells().slice(startAddress.column());\n      var colRequired = GridRow.cellLength(gridB[0]);\n      var rowRequired = gridB.length;\n      return Result.value({\n        rowDelta: constant(rowRemainder.length - rowRequired),\n        colDelta: constant(colRemainder.length - colRequired)\n      });\n    };\n    var measureWidth = function (gridA, gridB) {\n      var colLengthA = GridRow.cellLength(gridA[0]);\n      var colLengthB = GridRow.cellLength(gridB[0]);\n      return {\n        rowDelta: constant(0),\n        colDelta: constant(colLengthA - colLengthB)\n      };\n    };\n    var fill = function (cells, generator) {\n      return map(cells, function () {\n        return elementnew(generator.cell(), true);\n      });\n    };\n    var rowFill = function (grid, amount, generator) {\n      return grid.concat(repeat(amount, function (_row) {\n        return GridRow.setCells(grid[grid.length - 1], fill(grid[grid.length - 1].cells(), generator));\n      }));\n    };\n    var colFill = function (grid, amount, generator) {\n      return map(grid, function (row) {\n        return GridRow.setCells(row, row.cells().concat(fill(range(0, amount), generator)));\n      });\n    };\n    var tailor = function (gridA, delta, generator) {\n      var fillCols = delta.colDelta() < 0 ? colFill : identity;\n      var fillRows = delta.rowDelta() < 0 ? rowFill : identity;\n      var modifiedCols = fillCols(gridA, Math.abs(delta.colDelta()), generator);\n      var tailoredGrid = fillRows(modifiedCols, Math.abs(delta.rowDelta()), generator);\n      return tailoredGrid;\n    };\n    var Fitment = {\n      measure: measure,\n      measureWidth: measureWidth,\n      tailor: tailor\n    };\n\n    var merge = function (grid, bounds, comparator, substitution) {\n      if (grid.length === 0) {\n        return grid;\n      }\n      for (var i = bounds.startRow(); i <= bounds.finishRow(); i++) {\n        for (var j = bounds.startCol(); j <= bounds.finishCol(); j++) {\n          GridRow.mutateCell(grid[i], j, elementnew(substitution(), false));\n        }\n      }\n      return grid;\n    };\n    var unmerge = function (grid, target, comparator, substitution) {\n      var first = true;\n      for (var i = 0; i < grid.length; i++) {\n        for (var j = 0; j < GridRow.cellLength(grid[0]); j++) {\n          var current = GridRow.getCellElement(grid[i], j);\n          var isToReplace = comparator(current, target);\n          if (isToReplace === true && first === false) {\n            GridRow.mutateCell(grid[i], j, elementnew(substitution(), true));\n          } else if (isToReplace === true) {\n            first = false;\n          }\n        }\n      }\n      return grid;\n    };\n    var uniqueCells = function (row, comparator) {\n      return foldl(row, function (rest, cell) {\n        return exists(rest, function (currentCell) {\n          return comparator(currentCell.element(), cell.element());\n        }) ? rest : rest.concat([cell]);\n      }, []);\n    };\n    var splitRows = function (grid, index, comparator, substitution) {\n      if (index > 0 && index < grid.length) {\n        var rowPrevCells = grid[index - 1].cells();\n        var cells = uniqueCells(rowPrevCells, comparator);\n        each(cells, function (cell) {\n          var replacement = Option.none();\n          var _loop_1 = function (i) {\n            var _loop_2 = function (j) {\n              var current = grid[i].cells()[j];\n              var isToReplace = comparator(current.element(), cell.element());\n              if (isToReplace) {\n                if (replacement.isNone()) {\n                  replacement = Option.some(substitution());\n                }\n                replacement.each(function (sub) {\n                  GridRow.mutateCell(grid[i], j, elementnew(sub, true));\n                });\n              }\n            };\n            for (var j = 0; j < GridRow.cellLength(grid[0]); j++) {\n              _loop_2(j);\n            }\n          };\n          for (var i = index; i < grid.length; i++) {\n            _loop_1(i);\n          }\n        });\n      }\n      return grid;\n    };\n    var MergingOperations = {\n      merge: merge,\n      unmerge: unmerge,\n      splitRows: splitRows\n    };\n\n    var isSpanning = function (grid, row, col, comparator) {\n      var candidate = GridRow.getCell(grid[row], col);\n      var matching = curry(comparator, candidate.element());\n      var currentRow = grid[row];\n      return grid.length > 1 && GridRow.cellLength(currentRow) > 1 && (col > 0 && matching(GridRow.getCellElement(currentRow, col - 1)) || col < currentRow.cells().length - 1 && matching(GridRow.getCellElement(currentRow, col + 1)) || row > 0 && matching(GridRow.getCellElement(grid[row - 1], col)) || row < grid.length - 1 && matching(GridRow.getCellElement(grid[row + 1], col)));\n    };\n    var mergeTables = function (startAddress, gridA, gridB, generator, comparator) {\n      var startRow = startAddress.row();\n      var startCol = startAddress.column();\n      var mergeHeight = gridB.length;\n      var mergeWidth = GridRow.cellLength(gridB[0]);\n      var endRow = startRow + mergeHeight;\n      var endCol = startCol + mergeWidth;\n      for (var r = startRow; r < endRow; r++) {\n        for (var c = startCol; c < endCol; c++) {\n          if (isSpanning(gridA, r, c, comparator)) {\n            MergingOperations.unmerge(gridA, GridRow.getCellElement(gridA[r], c), comparator, generator.cell);\n          }\n          var newCell = GridRow.getCellElement(gridB[r - startRow], c - startCol);\n          var replacement = generator.replace(newCell);\n          GridRow.mutateCell(gridA[r], c, elementnew(replacement, true));\n        }\n      }\n      return gridA;\n    };\n    var merge$1 = function (startAddress, gridA, gridB, generator, comparator) {\n      var result = Fitment.measure(startAddress, gridA, gridB);\n      return result.map(function (delta) {\n        var fittedGrid = Fitment.tailor(gridA, delta, generator);\n        return mergeTables(startAddress, fittedGrid, gridB, generator, comparator);\n      });\n    };\n    var insert = function (index, gridA, gridB, generator, comparator) {\n      MergingOperations.splitRows(gridA, index, comparator, generator.cell);\n      var delta = Fitment.measureWidth(gridB, gridA);\n      var fittedNewGrid = Fitment.tailor(gridB, delta, generator);\n      var secondDelta = Fitment.measureWidth(gridA, fittedNewGrid);\n      var fittedOldGrid = Fitment.tailor(gridA, secondDelta, generator);\n      return fittedOldGrid.slice(0, index).concat(fittedNewGrid).concat(fittedOldGrid.slice(index, fittedOldGrid.length));\n    };\n    var TableMerge = {\n      merge: merge$1,\n      insert: insert\n    };\n\n    var insertRowAt = function (grid, index, example, comparator, substitution) {\n      var before = grid.slice(0, index);\n      var after = grid.slice(index);\n      var between = GridRow.mapCells(grid[example], function (ex, c) {\n        var withinSpan = index > 0 && index < grid.length && comparator(GridRow.getCellElement(grid[index - 1], c), GridRow.getCellElement(grid[index], c));\n        var ret = withinSpan ? GridRow.getCell(grid[index], c) : elementnew(substitution(ex.element(), comparator), true);\n        return ret;\n      });\n      return before.concat([between]).concat(after);\n    };\n    var insertColumnAt = function (grid, index, example, comparator, substitution) {\n      return map(grid, function (row) {\n        var withinSpan = index > 0 && index < GridRow.cellLength(row) && comparator(GridRow.getCellElement(row, index - 1), GridRow.getCellElement(row, index));\n        var sub = withinSpan ? GridRow.getCell(row, index) : elementnew(substitution(GridRow.getCellElement(row, example), comparator), true);\n        return GridRow.addCell(row, index, sub);\n      });\n    };\n    var splitCellIntoColumns = function (grid, exampleRow, exampleCol, comparator, substitution) {\n      var index = exampleCol + 1;\n      return map(grid, function (row, i) {\n        var isTargetCell = i === exampleRow;\n        var sub = isTargetCell ? elementnew(substitution(GridRow.getCellElement(row, exampleCol), comparator), true) : GridRow.getCell(row, exampleCol);\n        return GridRow.addCell(row, index, sub);\n      });\n    };\n    var splitCellIntoRows = function (grid, exampleRow, exampleCol, comparator, substitution) {\n      var index = exampleRow + 1;\n      var before = grid.slice(0, index);\n      var after = grid.slice(index);\n      var between = GridRow.mapCells(grid[exampleRow], function (ex, i) {\n        var isTargetCell = i === exampleCol;\n        return isTargetCell ? elementnew(substitution(ex.element(), comparator), true) : ex;\n      });\n      return before.concat([between]).concat(after);\n    };\n    var deleteColumnsAt = function (grid, start, finish) {\n      var rows = map(grid, function (row) {\n        var cells = row.cells().slice(0, start).concat(row.cells().slice(finish + 1));\n        return rowcells(cells, row.section());\n      });\n      return filter(rows, function (row) {\n        return row.cells().length > 0;\n      });\n    };\n    var deleteRowsAt = function (grid, start, finish) {\n      return grid.slice(0, start).concat(grid.slice(finish + 1));\n    };\n    var ModificationOperations = {\n      insertRowAt: insertRowAt,\n      insertColumnAt: insertColumnAt,\n      splitCellIntoColumns: splitCellIntoColumns,\n      splitCellIntoRows: splitCellIntoRows,\n      deleteRowsAt: deleteRowsAt,\n      deleteColumnsAt: deleteColumnsAt\n    };\n\n    var replaceIn = function (grid, targets, comparator, substitution) {\n      var isTarget = function (cell) {\n        return exists(targets, function (target) {\n          return comparator(cell.element(), target.element());\n        });\n      };\n      return map(grid, function (row) {\n        return GridRow.mapCells(row, function (cell) {\n          return isTarget(cell) ? elementnew(substitution(cell.element(), comparator), true) : cell;\n        });\n      });\n    };\n    var notStartRow = function (grid, rowIndex, colIndex, comparator) {\n      return GridRow.getCellElement(grid[rowIndex], colIndex) !== undefined && (rowIndex > 0 && comparator(GridRow.getCellElement(grid[rowIndex - 1], colIndex), GridRow.getCellElement(grid[rowIndex], colIndex)));\n    };\n    var notStartColumn = function (row, index, comparator) {\n      return index > 0 && comparator(GridRow.getCellElement(row, index - 1), GridRow.getCellElement(row, index));\n    };\n    var replaceColumn = function (grid, index, comparator, substitution) {\n      var targets = bind(grid, function (row, i) {\n        var alreadyAdded = notStartRow(grid, i, index, comparator) || notStartColumn(row, index, comparator);\n        return alreadyAdded ? [] : [GridRow.getCell(row, index)];\n      });\n      return replaceIn(grid, targets, comparator, substitution);\n    };\n    var replaceRow = function (grid, index, comparator, substitution) {\n      var targetRow = grid[index];\n      var targets = bind(targetRow.cells(), function (item, i) {\n        var alreadyAdded = notStartRow(grid, index, i, comparator) || notStartColumn(targetRow, i, comparator);\n        return alreadyAdded ? [] : [item];\n      });\n      return replaceIn(grid, targets, comparator, substitution);\n    };\n    var TransformOperations = {\n      replaceColumn: replaceColumn,\n      replaceRow: replaceRow\n    };\n\n    var adt = Adt.generate([\n      { none: [] },\n      { only: ['index'] },\n      {\n        left: [\n          'index',\n          'next'\n        ]\n      },\n      {\n        middle: [\n          'prev',\n          'index',\n          'next'\n        ]\n      },\n      {\n        right: [\n          'prev',\n          'index'\n        ]\n      }\n    ]);\n    var ColumnContext = __assign({}, adt);\n\n    var neighbours$1 = function (input, index) {\n      if (input.length === 0) {\n        return ColumnContext.none();\n      }\n      if (input.length === 1) {\n        return ColumnContext.only(0);\n      }\n      if (index === 0) {\n        return ColumnContext.left(0, 1);\n      }\n      if (index === input.length - 1) {\n        return ColumnContext.right(index - 1, index);\n      }\n      if (index > 0 && index < input.length - 1) {\n        return ColumnContext.middle(index - 1, index, index + 1);\n      }\n      return ColumnContext.none();\n    };\n    var determine = function (input, column, step, tableSize) {\n      var result = input.slice(0);\n      var context = neighbours$1(input, column);\n      var zero = function (array) {\n        return map(array, constant(0));\n      };\n      var onNone = constant(zero(result));\n      var onOnly = function (index) {\n        return tableSize.singleColumnWidth(result[index], step);\n      };\n      var onChange = function (index, next) {\n        if (step >= 0) {\n          var newNext = Math.max(tableSize.minCellWidth(), result[next] - step);\n          return zero(result.slice(0, index)).concat([\n            step,\n            newNext - result[next]\n          ]).concat(zero(result.slice(next + 1)));\n        } else {\n          var newThis = Math.max(tableSize.minCellWidth(), result[index] + step);\n          var diffx = result[index] - newThis;\n          return zero(result.slice(0, index)).concat([\n            newThis - result[index],\n            diffx\n          ]).concat(zero(result.slice(next + 1)));\n        }\n      };\n      var onLeft = onChange;\n      var onMiddle = function (_prev, index, next) {\n        return onChange(index, next);\n      };\n      var onRight = function (_prev, index) {\n        if (step >= 0) {\n          return zero(result.slice(0, index)).concat([step]);\n        } else {\n          var size = Math.max(tableSize.minCellWidth(), result[index] + step);\n          return zero(result.slice(0, index)).concat([size - result[index]]);\n        }\n      };\n      return context.fold(onNone, onOnly, onLeft, onMiddle, onRight);\n    };\n    var Deltas = { determine: determine };\n\n    var getSpan$1 = function (cell, type) {\n      return has(cell, type) && parseInt(get(cell, type), 10) > 1;\n    };\n    var hasColspan = function (cell) {\n      return getSpan$1(cell, 'colspan');\n    };\n    var hasRowspan = function (cell) {\n      return getSpan$1(cell, 'rowspan');\n    };\n    var getInt = function (element, property) {\n      return parseInt(get$1(element, property), 10);\n    };\n    var CellUtils = {\n      hasColspan: hasColspan,\n      hasRowspan: hasRowspan,\n      minWidth: constant(10),\n      minHeight: constant(10),\n      getInt: getInt\n    };\n\n    var getRaw$1 = function (cell, property, getter) {\n      return getRaw(cell, property).fold(function () {\n        return getter(cell) + 'px';\n      }, function (raw) {\n        return raw;\n      });\n    };\n    var getRawW = function (cell, tableSize) {\n      return getRaw$1(cell, 'width', function (e) {\n        return Sizes.getPixelWidth(e, tableSize);\n      });\n    };\n    var getRawH = function (cell) {\n      return getRaw$1(cell, 'height', Sizes.getHeight);\n    };\n    var getWidthFrom = function (warehouse, direction, getWidth, fallback, tableSize) {\n      var columns = Blocks.columns(warehouse);\n      var backups = map(columns, function (cellOption) {\n        return cellOption.map(direction.edge);\n      });\n      return map(columns, function (cellOption, c) {\n        var columnCell = cellOption.filter(not(CellUtils.hasColspan));\n        return columnCell.fold(function () {\n          var deduced = deduce(backups, c);\n          return fallback(deduced);\n        }, function (cell) {\n          return getWidth(cell, tableSize);\n        });\n      });\n    };\n    var getDeduced = function (deduced) {\n      return deduced.map(function (d) {\n        return d + 'px';\n      }).getOr('');\n    };\n    var getRawWidths = function (warehouse, direction, tableSize) {\n      return getWidthFrom(warehouse, direction, getRawW, getDeduced, tableSize);\n    };\n    var getPercentageWidths = function (warehouse, direction, tableSize) {\n      return getWidthFrom(warehouse, direction, Sizes.getPercentageWidth, function (deduced) {\n        return deduced.fold(function () {\n          return tableSize.minCellWidth();\n        }, function (cellWidth) {\n          return cellWidth / tableSize.pixelWidth() * 100;\n        });\n      }, tableSize);\n    };\n    var getPixelWidths = function (warehouse, direction, tableSize) {\n      return getWidthFrom(warehouse, direction, Sizes.getPixelWidth, function (deduced) {\n        return deduced.getOrThunk(tableSize.minCellWidth);\n      }, tableSize);\n    };\n    var getHeightFrom = function (warehouse, direction, getHeight, fallback) {\n      var rows = Blocks.rows(warehouse);\n      var backups = map(rows, function (cellOption) {\n        return cellOption.map(direction.edge);\n      });\n      return map(rows, function (cellOption, c) {\n        var rowCell = cellOption.filter(not(CellUtils.hasRowspan));\n        return rowCell.fold(function () {\n          var deduced = deduce(backups, c);\n          return fallback(deduced);\n        }, function (cell) {\n          return getHeight(cell);\n        });\n      });\n    };\n    var getPixelHeights = function (warehouse, direction) {\n      return getHeightFrom(warehouse, direction, Sizes.getHeight, function (deduced) {\n        return deduced.getOrThunk(CellUtils.minHeight);\n      });\n    };\n    var getRawHeights = function (warehouse, direction) {\n      return getHeightFrom(warehouse, direction, getRawH, getDeduced);\n    };\n    var ColumnSizes = {\n      getRawWidths: getRawWidths,\n      getPixelWidths: getPixelWidths,\n      getPercentageWidths: getPercentageWidths,\n      getPixelHeights: getPixelHeights,\n      getRawHeights: getRawHeights\n    };\n\n    var total = function (start, end, measures) {\n      var r = 0;\n      for (var i = start; i < end; i++) {\n        r += measures[i] !== undefined ? measures[i] : 0;\n      }\n      return r;\n    };\n    var recalculateWidth = function (warehouse, widths) {\n      var all = Warehouse.justCells(warehouse);\n      return map(all, function (cell) {\n        var width = total(cell.column(), cell.column() + cell.colspan(), widths);\n        return {\n          element: cell.element,\n          width: constant(width),\n          colspan: cell.colspan\n        };\n      });\n    };\n    var recalculateHeight = function (warehouse, heights) {\n      var all = Warehouse.justCells(warehouse);\n      return map(all, function (cell) {\n        var height = total(cell.row(), cell.row() + cell.rowspan(), heights);\n        return {\n          element: cell.element,\n          height: constant(height),\n          rowspan: cell.rowspan\n        };\n      });\n    };\n    var matchRowHeight = function (warehouse, heights) {\n      return map(warehouse.all(), function (row, i) {\n        return {\n          element: row.element,\n          height: constant(heights[i])\n        };\n      });\n    };\n    var Recalculations = {\n      recalculateWidth: recalculateWidth,\n      recalculateHeight: recalculateHeight,\n      matchRowHeight: matchRowHeight\n    };\n\n    var percentageSize = function (width, element) {\n      var floatWidth = parseFloat(width);\n      var pixelWidth = get$4(element);\n      var getCellDelta = function (delta) {\n        return delta / pixelWidth * 100;\n      };\n      var singleColumnWidth = function (w, _delta) {\n        return [100 - w];\n      };\n      var minCellWidth = function () {\n        return CellUtils.minWidth() / pixelWidth * 100;\n      };\n      var setTableWidth = function (table, _newWidths, delta) {\n        var ratio = delta / 100;\n        var change = ratio * floatWidth;\n        Sizes.setPercentageWidth(table, floatWidth + change);\n      };\n      return {\n        width: constant(floatWidth),\n        pixelWidth: constant(pixelWidth),\n        getWidths: ColumnSizes.getPercentageWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: minCellWidth,\n        setElementWidth: Sizes.setPercentageWidth,\n        setTableWidth: setTableWidth\n      };\n    };\n    var pixelSize = function (width) {\n      var getCellDelta = identity;\n      var singleColumnWidth = function (w, delta) {\n        var newNext = Math.max(CellUtils.minWidth(), w + delta);\n        return [newNext - w];\n      };\n      var setTableWidth = function (table, newWidths, _delta) {\n        var total = foldr(newWidths, function (b, a) {\n          return b + a;\n        }, 0);\n        Sizes.setPixelWidth(table, total);\n      };\n      return {\n        width: constant(width),\n        pixelWidth: constant(width),\n        getWidths: ColumnSizes.getPixelWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: CellUtils.minWidth,\n        setElementWidth: Sizes.setPixelWidth,\n        setTableWidth: setTableWidth\n      };\n    };\n    var chooseSize = function (element, width) {\n      var percentMatch = Sizes.percentageBasedSizeRegex().exec(width);\n      if (percentMatch !== null) {\n        return percentageSize(percentMatch[1], element);\n      }\n      var pixelMatch = Sizes.pixelBasedSizeRegex().exec(width);\n      if (pixelMatch !== null) {\n        var intWidth = parseInt(pixelMatch[1], 10);\n        return pixelSize(intWidth);\n      }\n      var fallbackWidth = get$4(element);\n      return pixelSize(fallbackWidth);\n    };\n    var getTableSize = function (element) {\n      var width = Sizes.getRawWidth(element);\n      return width.fold(function () {\n        var fallbackWidth = get$4(element);\n        return pixelSize(fallbackWidth);\n      }, function (w) {\n        return chooseSize(element, w);\n      });\n    };\n    var TableSize = { getTableSize: getTableSize };\n\n    var getWarehouse$1 = function (list) {\n      return Warehouse.generate(list);\n    };\n    var sumUp = function (newSize) {\n      return foldr(newSize, function (b, a) {\n        return b + a;\n      }, 0);\n    };\n    var getTableWarehouse = function (table) {\n      var list = DetailsList.fromTable(table);\n      return getWarehouse$1(list);\n    };\n    var adjustWidth = function (table, delta, index, direction) {\n      var tableSize = TableSize.getTableSize(table);\n      var step = tableSize.getCellDelta(delta);\n      var warehouse = getTableWarehouse(table);\n      var widths = tableSize.getWidths(warehouse, direction, tableSize);\n      var deltas = Deltas.determine(widths, index, step, tableSize);\n      var newWidths = map(deltas, function (dx, i) {\n        return dx + widths[i];\n      });\n      var newSizes = Recalculations.recalculateWidth(warehouse, newWidths);\n      each(newSizes, function (cell) {\n        tableSize.setElementWidth(cell.element(), cell.width());\n      });\n      if (index === warehouse.grid().columns() - 1) {\n        tableSize.setTableWidth(table, newWidths, step);\n      }\n    };\n    var adjustHeight = function (table, delta, index, direction) {\n      var warehouse = getTableWarehouse(table);\n      var heights = ColumnSizes.getPixelHeights(warehouse, direction);\n      var newHeights = map(heights, function (dy, i) {\n        return index === i ? Math.max(delta + dy, CellUtils.minHeight()) : dy;\n      });\n      var newCellSizes = Recalculations.recalculateHeight(warehouse, newHeights);\n      var newRowSizes = Recalculations.matchRowHeight(warehouse, newHeights);\n      each(newRowSizes, function (row) {\n        Sizes.setHeight(row.element(), row.height());\n      });\n      each(newCellSizes, function (cell) {\n        Sizes.setHeight(cell.element(), cell.height());\n      });\n      var total = sumUp(newHeights);\n      Sizes.setHeight(table, total);\n    };\n    var adjustWidthTo = function (table, list, direction) {\n      var tableSize = TableSize.getTableSize(table);\n      var warehouse = getWarehouse$1(list);\n      var widths = tableSize.getWidths(warehouse, direction, tableSize);\n      var newSizes = Recalculations.recalculateWidth(warehouse, widths);\n      each(newSizes, function (cell) {\n        tableSize.setElementWidth(cell.element(), cell.width());\n      });\n      if (newSizes.length > 0) {\n        tableSize.setTableWidth(table, widths, tableSize.getCellDelta(0));\n      }\n    };\n    var Adjustments = {\n      adjustWidth: adjustWidth,\n      adjustHeight: adjustHeight,\n      adjustWidthTo: adjustWidthTo\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var base = function (handleUnsupported, required) {\n      return baseWith(handleUnsupported, required, {\n        validate: isFunction,\n        label: 'function'\n      });\n    };\n    var baseWith = function (handleUnsupported, required, pred) {\n      if (required.length === 0) {\n        throw new Error('You must specify at least one required field.');\n      }\n      validateStrArr('required', required);\n      checkDupes(required);\n      return function (obj) {\n        var keys$1 = keys(obj);\n        var allReqd = forall(required, function (req) {\n          return contains(keys$1, req);\n        });\n        if (!allReqd) {\n          reqMessage(required, keys$1);\n        }\n        handleUnsupported(required, keys$1);\n        var invalidKeys = filter(required, function (key) {\n          return !pred.validate(obj[key], key);\n        });\n        if (invalidKeys.length > 0) {\n          invalidTypeMessage(invalidKeys, pred.label);\n        }\n        return obj;\n      };\n    };\n    var handleExact = function (required, keys) {\n      var unsupported = filter(keys, function (key) {\n        return !contains(required, key);\n      });\n      if (unsupported.length > 0) {\n        unsuppMessage(unsupported);\n      }\n    };\n    var exactly = function (required) {\n      return base(handleExact, required);\n    };\n\n    var verifyGenerators = exactly([\n      'cell',\n      'row',\n      'replace',\n      'gap'\n    ]);\n    var elementToData = function (element) {\n      var colspan = has(element, 'colspan') ? parseInt(get(element, 'colspan'), 10) : 1;\n      var rowspan = has(element, 'rowspan') ? parseInt(get(element, 'rowspan'), 10) : 1;\n      return {\n        element: constant(element),\n        colspan: constant(colspan),\n        rowspan: constant(rowspan)\n      };\n    };\n    var modification = function (generators, toData) {\n      if (toData === void 0) {\n        toData = elementToData;\n      }\n      verifyGenerators(generators);\n      var position = Cell(Option.none());\n      var nu = function (data) {\n        return generators.cell(data);\n      };\n      var nuFrom = function (element) {\n        var data = toData(element);\n        return nu(data);\n      };\n      var add = function (element) {\n        var replacement = nuFrom(element);\n        if (position.get().isNone()) {\n          position.set(Option.some(replacement));\n        }\n        recent = Option.some({\n          item: element,\n          replacement: replacement\n        });\n        return replacement;\n      };\n      var recent = Option.none();\n      var getOrInit = function (element, comparator) {\n        return recent.fold(function () {\n          return add(element);\n        }, function (p) {\n          return comparator(element, p.item) ? p.replacement : add(element);\n        });\n      };\n      return {\n        getOrInit: getOrInit,\n        cursor: position.get\n      };\n    };\n    var transform = function (scope, tag) {\n      return function (generators) {\n        var position = Cell(Option.none());\n        verifyGenerators(generators);\n        var list = [];\n        var find$1 = function (element, comparator) {\n          return find(list, function (x) {\n            return comparator(x.item, element);\n          });\n        };\n        var makeNew = function (element) {\n          var attrs = { scope: scope };\n          var cell = generators.replace(element, tag, attrs);\n          list.push({\n            item: element,\n            sub: cell\n          });\n          if (position.get().isNone()) {\n            position.set(Option.some(cell));\n          }\n          return cell;\n        };\n        var replaceOrInit = function (element, comparator) {\n          return find$1(element, comparator).fold(function () {\n            return makeNew(element);\n          }, function (p) {\n            return comparator(element, p.item) ? p.sub : makeNew(element);\n          });\n        };\n        return {\n          replaceOrInit: replaceOrInit,\n          cursor: position.get\n        };\n      };\n    };\n    var merging = function (generators) {\n      verifyGenerators(generators);\n      var position = Cell(Option.none());\n      var combine = function (cell) {\n        if (position.get().isNone()) {\n          position.set(Option.some(cell));\n        }\n        return function () {\n          var raw = generators.cell({\n            element: constant(cell),\n            colspan: constant(1),\n            rowspan: constant(1)\n          });\n          remove$1(raw, 'width');\n          remove$1(cell, 'width');\n          return raw;\n        };\n      };\n      return {\n        combine: combine,\n        cursor: position.get\n      };\n    };\n    var Generators = {\n      modification: modification,\n      transform: transform,\n      merging: merging\n    };\n\n    var blockList = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'table',\n      'thead',\n      'tfoot',\n      'tbody',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n    var isList = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains([\n        'ol',\n        'ul'\n      ], tagName);\n    };\n    var isBlock = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains(blockList, tagName);\n    };\n    var isFormatting = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains([\n        'address',\n        'pre',\n        'p',\n        'h1',\n        'h2',\n        'h3',\n        'h4',\n        'h5',\n        'h6'\n      ], tagName);\n    };\n    var isHeading = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains([\n        'h1',\n        'h2',\n        'h3',\n        'h4',\n        'h5',\n        'h6'\n      ], tagName);\n    };\n    var isContainer = function (universe, item) {\n      return contains([\n        'div',\n        'li',\n        'td',\n        'th',\n        'blockquote',\n        'body',\n        'caption'\n      ], universe.property().name(item));\n    };\n    var isEmptyTag = function (universe, item) {\n      return contains([\n        'br',\n        'img',\n        'hr',\n        'input'\n      ], universe.property().name(item));\n    };\n    var isFrame = function (universe, item) {\n      return universe.property().name(item) === 'iframe';\n    };\n    var isInline = function (universe, item) {\n      return !(isBlock(universe, item) || isEmptyTag(universe, item)) && universe.property().name(item) !== 'li';\n    };\n    var Structure = {\n      isBlock: isBlock,\n      isList: isList,\n      isFormatting: isFormatting,\n      isHeading: isHeading,\n      isContainer: isContainer,\n      isEmptyTag: isEmptyTag,\n      isFrame: isFrame,\n      isInline: isInline\n    };\n\n    var universe$1 = DomUniverse();\n    var isBlock$1 = function (element) {\n      return Structure.isBlock(universe$1, element);\n    };\n    var isList$1 = function (element) {\n      return Structure.isList(universe$1, element);\n    };\n    var isFormatting$1 = function (element) {\n      return Structure.isFormatting(universe$1, element);\n    };\n    var isHeading$1 = function (element) {\n      return Structure.isHeading(universe$1, element);\n    };\n    var isContainer$1 = function (element) {\n      return Structure.isContainer(universe$1, element);\n    };\n    var isEmptyTag$1 = function (element) {\n      return Structure.isEmptyTag(universe$1, element);\n    };\n    var isFrame$1 = function (element) {\n      return Structure.isFrame(universe$1, element);\n    };\n    var isInline$1 = function (element) {\n      return Structure.isInline(universe$1, element);\n    };\n    var DomStructure = {\n      isBlock: isBlock$1,\n      isList: isList$1,\n      isFormatting: isFormatting$1,\n      isHeading: isHeading$1,\n      isContainer: isContainer$1,\n      isEmptyTag: isEmptyTag$1,\n      isFrame: isFrame$1,\n      isInline: isInline$1\n    };\n\n    var merge$2 = function (cells) {\n      var isBr = function (el) {\n        return name(el) === 'br';\n      };\n      var advancedBr = function (children) {\n        return forall(children, function (c) {\n          return isBr(c) || isText(c) && get$2(c).trim().length === 0;\n        });\n      };\n      var isListItem = function (el) {\n        return name(el) === 'li' || ancestor(el, DomStructure.isList).isSome();\n      };\n      var siblingIsBlock = function (el) {\n        return nextSibling(el).map(function (rightSibling) {\n          if (DomStructure.isBlock(rightSibling)) {\n            return true;\n          }\n          if (DomStructure.isEmptyTag(rightSibling)) {\n            return name(rightSibling) === 'img' ? false : true;\n          }\n          return false;\n        }).getOr(false);\n      };\n      var markCell = function (cell) {\n        return last$1(cell).bind(function (rightEdge) {\n          var rightSiblingIsBlock = siblingIsBlock(rightEdge);\n          return parent(rightEdge).map(function (parent) {\n            return rightSiblingIsBlock === true || isListItem(parent) || isBr(rightEdge) || DomStructure.isBlock(parent) && !eq(cell, parent) ? [] : [Element.fromTag('br')];\n          });\n        }).getOr([]);\n      };\n      var markContent = function () {\n        var content = bind(cells, function (cell) {\n          var children$1 = children(cell);\n          return advancedBr(children$1) ? [] : children$1.concat(markCell(cell));\n        });\n        return content.length === 0 ? [Element.fromTag('br')] : content;\n      };\n      var contents = markContent();\n      empty(cells[0]);\n      append$1(cells[0], contents);\n    };\n    var TableContent = { merge: merge$2 };\n\n    var prune = function (table) {\n      var cells = TableLookup.cells(table);\n      if (cells.length === 0) {\n        remove$2(table);\n      }\n    };\n    var outcome = Immutable('grid', 'cursor');\n    var elementFromGrid = function (grid, row, column) {\n      return findIn(grid, row, column).orThunk(function () {\n        return findIn(grid, 0, 0);\n      });\n    };\n    var findIn = function (grid, row, column) {\n      return Option.from(grid[row]).bind(function (r) {\n        return Option.from(r.cells()[column]).bind(function (c) {\n          return Option.from(c.element());\n        });\n      });\n    };\n    var bundle = function (grid, row, column) {\n      return outcome(grid, findIn(grid, row, column));\n    };\n    var uniqueRows = function (details) {\n      return foldl(details, function (rest, detail) {\n        return exists(rest, function (currentDetail) {\n          return currentDetail.row() === detail.row();\n        }) ? rest : rest.concat([detail]);\n      }, []).sort(function (detailA, detailB) {\n        return detailA.row() - detailB.row();\n      });\n    };\n    var uniqueColumns = function (details) {\n      return foldl(details, function (rest, detail) {\n        return exists(rest, function (currentDetail) {\n          return currentDetail.column() === detail.column();\n        }) ? rest : rest.concat([detail]);\n      }, []).sort(function (detailA, detailB) {\n        return detailA.column() - detailB.column();\n      });\n    };\n    var insertRowBefore = function (grid, detail, comparator, genWrappers) {\n      var example = detail.row();\n      var targetIndex = detail.row();\n      var newGrid = ModificationOperations.insertRowAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, targetIndex, detail.column());\n    };\n    var insertRowsBefore = function (grid, details, comparator, genWrappers) {\n      var example = details[0].row();\n      var targetIndex = details[0].row();\n      var rows = uniqueRows(details);\n      var newGrid = foldl(rows, function (newG, _row) {\n        return ModificationOperations.insertRowAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, targetIndex, details[0].column());\n    };\n    var insertRowAfter = function (grid, detail, comparator, genWrappers) {\n      var example = detail.row();\n      var targetIndex = detail.row() + detail.rowspan();\n      var newGrid = ModificationOperations.insertRowAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, targetIndex, detail.column());\n    };\n    var insertRowsAfter = function (grid, details, comparator, genWrappers) {\n      var rows = uniqueRows(details);\n      var example = rows[rows.length - 1].row();\n      var targetIndex = rows[rows.length - 1].row() + rows[rows.length - 1].rowspan();\n      var newGrid = foldl(rows, function (newG, _row) {\n        return ModificationOperations.insertRowAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, targetIndex, details[0].column());\n    };\n    var insertColumnBefore = function (grid, detail, comparator, genWrappers) {\n      var example = detail.column();\n      var targetIndex = detail.column();\n      var newGrid = ModificationOperations.insertColumnAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), targetIndex);\n    };\n    var insertColumnsBefore = function (grid, details, comparator, genWrappers) {\n      var columns = uniqueColumns(details);\n      var example = columns[0].column();\n      var targetIndex = columns[0].column();\n      var newGrid = foldl(columns, function (newG, _row) {\n        return ModificationOperations.insertColumnAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, details[0].row(), targetIndex);\n    };\n    var insertColumnAfter = function (grid, detail, comparator, genWrappers) {\n      var example = detail.column();\n      var targetIndex = detail.column() + detail.colspan();\n      var newGrid = ModificationOperations.insertColumnAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), targetIndex);\n    };\n    var insertColumnsAfter = function (grid, details, comparator, genWrappers) {\n      var example = details[details.length - 1].column();\n      var targetIndex = details[details.length - 1].column() + details[details.length - 1].colspan();\n      var columns = uniqueColumns(details);\n      var newGrid = foldl(columns, function (newG, _row) {\n        return ModificationOperations.insertColumnAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, details[0].row(), targetIndex);\n    };\n    var makeRowHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = TransformOperations.replaceRow(grid, detail.row(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var makeColumnHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = TransformOperations.replaceColumn(grid, detail.column(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var unmakeRowHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = TransformOperations.replaceRow(grid, detail.row(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var unmakeColumnHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = TransformOperations.replaceColumn(grid, detail.column(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var splitCellIntoColumns$1 = function (grid, detail, comparator, genWrappers) {\n      var newGrid = ModificationOperations.splitCellIntoColumns(grid, detail.row(), detail.column(), comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var splitCellIntoRows$1 = function (grid, detail, comparator, genWrappers) {\n      var newGrid = ModificationOperations.splitCellIntoRows(grid, detail.row(), detail.column(), comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var eraseColumns = function (grid, details, _comparator, _genWrappers) {\n      var columns = uniqueColumns(details);\n      var newGrid = ModificationOperations.deleteColumnsAt(grid, columns[0].column(), columns[columns.length - 1].column());\n      var cursor = elementFromGrid(newGrid, details[0].row(), details[0].column());\n      return outcome(newGrid, cursor);\n    };\n    var eraseRows = function (grid, details, _comparator, _genWrappers) {\n      var rows = uniqueRows(details);\n      var newGrid = ModificationOperations.deleteRowsAt(grid, rows[0].row(), rows[rows.length - 1].row());\n      var cursor = elementFromGrid(newGrid, details[0].row(), details[0].column());\n      return outcome(newGrid, cursor);\n    };\n    var mergeCells = function (grid, mergable, comparator, _genWrappers) {\n      var cells = mergable.cells();\n      TableContent.merge(cells);\n      var newGrid = MergingOperations.merge(grid, mergable.bounds(), comparator, constant(cells[0]));\n      return outcome(newGrid, Option.from(cells[0]));\n    };\n    var unmergeCells = function (grid, unmergable, comparator, genWrappers) {\n      var newGrid = foldr(unmergable, function (b, cell) {\n        return MergingOperations.unmerge(b, cell, comparator, genWrappers.combine(cell));\n      }, grid);\n      return outcome(newGrid, Option.from(unmergable[0]));\n    };\n    var pasteCells = function (grid, pasteDetails, comparator, _genWrappers) {\n      var gridify = function (table, generators) {\n        var list = DetailsList.fromTable(table);\n        var wh = Warehouse.generate(list);\n        return Transitions.toGrid(wh, generators, true);\n      };\n      var gridB = gridify(pasteDetails.clipboard(), pasteDetails.generators());\n      var startAddress = address(pasteDetails.row(), pasteDetails.column());\n      var mergedGrid = TableMerge.merge(startAddress, grid, gridB, pasteDetails.generators(), comparator);\n      return mergedGrid.fold(function () {\n        return outcome(grid, Option.some(pasteDetails.element()));\n      }, function (nuGrid) {\n        var cursor = elementFromGrid(nuGrid, pasteDetails.row(), pasteDetails.column());\n        return outcome(nuGrid, cursor);\n      });\n    };\n    var gridifyRows = function (rows, generators, example) {\n      var pasteDetails = DetailsList.fromPastedRows(rows, example);\n      var wh = Warehouse.generate(pasteDetails);\n      return Transitions.toGrid(wh, generators, true);\n    };\n    var pasteRowsBefore = function (grid, pasteDetails, comparator, _genWrappers) {\n      var example = grid[pasteDetails.cells[0].row()];\n      var index = pasteDetails.cells[0].row();\n      var gridB = gridifyRows(pasteDetails.clipboard(), pasteDetails.generators(), example);\n      var mergedGrid = TableMerge.insert(index, grid, gridB, pasteDetails.generators(), comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row(), pasteDetails.cells[0].column());\n      return outcome(mergedGrid, cursor);\n    };\n    var pasteRowsAfter = function (grid, pasteDetails, comparator, _genWrappers) {\n      var example = grid[pasteDetails.cells[0].row()];\n      var index = pasteDetails.cells[pasteDetails.cells.length - 1].row() + pasteDetails.cells[pasteDetails.cells.length - 1].rowspan();\n      var gridB = gridifyRows(pasteDetails.clipboard(), pasteDetails.generators(), example);\n      var mergedGrid = TableMerge.insert(index, grid, gridB, pasteDetails.generators(), comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row(), pasteDetails.cells[0].column());\n      return outcome(mergedGrid, cursor);\n    };\n    var resize = Adjustments.adjustWidthTo;\n    var TableOperations = {\n      insertRowBefore: run(insertRowBefore, onCell, noop, noop, Generators.modification),\n      insertRowsBefore: run(insertRowsBefore, onCells, noop, noop, Generators.modification),\n      insertRowAfter: run(insertRowAfter, onCell, noop, noop, Generators.modification),\n      insertRowsAfter: run(insertRowsAfter, onCells, noop, noop, Generators.modification),\n      insertColumnBefore: run(insertColumnBefore, onCell, resize, noop, Generators.modification),\n      insertColumnsBefore: run(insertColumnsBefore, onCells, resize, noop, Generators.modification),\n      insertColumnAfter: run(insertColumnAfter, onCell, resize, noop, Generators.modification),\n      insertColumnsAfter: run(insertColumnsAfter, onCells, resize, noop, Generators.modification),\n      splitCellIntoColumns: run(splitCellIntoColumns$1, onCell, resize, noop, Generators.modification),\n      splitCellIntoRows: run(splitCellIntoRows$1, onCell, noop, noop, Generators.modification),\n      eraseColumns: run(eraseColumns, onCells, resize, prune, Generators.modification),\n      eraseRows: run(eraseRows, onCells, noop, prune, Generators.modification),\n      makeColumnHeader: run(makeColumnHeader, onCell, noop, noop, Generators.transform('row', 'th')),\n      unmakeColumnHeader: run(unmakeColumnHeader, onCell, noop, noop, Generators.transform(null, 'td')),\n      makeRowHeader: run(makeRowHeader, onCell, noop, noop, Generators.transform('col', 'th')),\n      unmakeRowHeader: run(unmakeRowHeader, onCell, noop, noop, Generators.transform(null, 'td')),\n      mergeCells: run(mergeCells, onMergable, noop, noop, Generators.merging),\n      unmergeCells: run(unmergeCells, onUnmergable, resize, noop, Generators.merging),\n      pasteCells: run(pasteCells, onPaste, resize, noop, Generators.modification),\n      pasteRowsBefore: run(pasteRowsBefore, onPasteRows, noop, noop, Generators.modification),\n      pasteRowsAfter: run(pasteRowsAfter, onPasteRows, noop, noop, Generators.modification)\n    };\n\n    var getBody$1 = function (editor) {\n      return Element.fromDom(editor.getBody());\n    };\n    var getPixelWidth$1 = function (elm) {\n      return elm.getBoundingClientRect().width;\n    };\n    var getPixelHeight = function (elm) {\n      return elm.getBoundingClientRect().height;\n    };\n    var getIsRoot = function (editor) {\n      return function (element) {\n        return eq(element, getBody$1(editor));\n      };\n    };\n    var removePxSuffix = function (size) {\n      return size ? size.replace(/px$/, '') : '';\n    };\n    var addSizeSuffix = function (size) {\n      if (/^[0-9]+$/.test(size)) {\n        size += 'px';\n      }\n      return size;\n    };\n    var removeDataStyle = function (table) {\n      var dataStyleCells = descendants$1(table, 'td[data-mce-style],th[data-mce-style]');\n      remove(table, 'data-mce-style');\n      each(dataStyleCells, function (cell) {\n        remove(cell, 'data-mce-style');\n      });\n    };\n\n    var getDirection = function (element) {\n      return get$1(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var ltr$1 = { isRtl: constant(false) };\n    var rtl$1 = { isRtl: constant(true) };\n    var directionAt = function (element) {\n      var dir = getDirection(element);\n      return dir === 'rtl' ? rtl$1 : ltr$1;\n    };\n    var Direction = { directionAt: directionAt };\n\n    var defaultTableToolbar = [\n      'tableprops',\n      'tabledelete',\n      '|',\n      'tableinsertrowbefore',\n      'tableinsertrowafter',\n      'tabledeleterow',\n      '|',\n      'tableinsertcolbefore',\n      'tableinsertcolafter',\n      'tabledeletecol'\n    ];\n    var defaultStyles = {\n      'border-collapse': 'collapse',\n      'width': '100%'\n    };\n    var defaultAttributes = { border: '1' };\n    var getDefaultAttributes = function (editor) {\n      return editor.getParam('table_default_attributes', defaultAttributes, 'object');\n    };\n    var getDefaultStyles = function (editor) {\n      return editor.getParam('table_default_styles', defaultStyles, 'object');\n    };\n    var hasTableResizeBars = function (editor) {\n      return editor.getParam('table_resize_bars', true, 'boolean');\n    };\n    var hasTabNavigation = function (editor) {\n      return editor.getParam('table_tab_navigation', true, 'boolean');\n    };\n    var hasAdvancedCellTab = function (editor) {\n      return editor.getParam('table_cell_advtab', true, 'boolean');\n    };\n    var hasAdvancedRowTab = function (editor) {\n      return editor.getParam('table_row_advtab', true, 'boolean');\n    };\n    var hasAdvancedTableTab = function (editor) {\n      return editor.getParam('table_advtab', true, 'boolean');\n    };\n    var hasAppearanceOptions = function (editor) {\n      return editor.getParam('table_appearance_options', true, 'boolean');\n    };\n    var hasTableGrid = function (editor) {\n      return editor.getParam('table_grid', true, 'boolean');\n    };\n    var shouldStyleWithCss = function (editor) {\n      return editor.getParam('table_style_by_css', false, 'boolean');\n    };\n    var getCellClassList = function (editor) {\n      return editor.getParam('table_cell_class_list', [], 'array');\n    };\n    var getRowClassList = function (editor) {\n      return editor.getParam('table_row_class_list', [], 'array');\n    };\n    var getTableClassList = function (editor) {\n      return editor.getParam('table_class_list', [], 'array');\n    };\n    var getColorPickerCallback = function (editor) {\n      return editor.getParam('color_picker_callback');\n    };\n    var isPixelsForced = function (editor) {\n      return editor.getParam('table_responsive_width') === false;\n    };\n    var getCloneElements = function (editor) {\n      var cloneElements = editor.getParam('table_clone_elements');\n      if (isString(cloneElements)) {\n        return Option.some(cloneElements.split(/[ ,]/));\n      } else if (Array.isArray(cloneElements)) {\n        return Option.some(cloneElements);\n      } else {\n        return Option.none();\n      }\n    };\n    var hasObjectResizing = function (editor) {\n      var objectResizing = editor.getParam('object_resizing', true);\n      return objectResizing === 'table' || objectResizing;\n    };\n    var getToolbar = function (editor) {\n      var toolbar = editor.getParam('table_toolbar', defaultTableToolbar);\n      if (toolbar === '' || toolbar === false) {\n        return [];\n      } else if (isString(toolbar)) {\n        return toolbar.split(/[ ,]/);\n      } else if (isArray(toolbar)) {\n        return toolbar;\n      } else {\n        return [];\n      }\n    };\n\n    var fireNewRow = function (editor, row) {\n      return editor.fire('newrow', { node: row });\n    };\n    var fireNewCell = function (editor, cell) {\n      return editor.fire('newcell', { node: cell });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n\n    var TableActions = function (editor, lazyWire) {\n      var isTableBody = function (editor) {\n        return name(getBody$1(editor)) === 'table';\n      };\n      var lastRowGuard = function (table) {\n        var size = TableGridSize.getGridSize(table);\n        return isTableBody(editor) === false || size.rows() > 1;\n      };\n      var lastColumnGuard = function (table) {\n        var size = TableGridSize.getGridSize(table);\n        return isTableBody(editor) === false || size.columns() > 1;\n      };\n      var cloneFormats = getCloneElements(editor);\n      var execute = function (operation, guard, mutate, lazyWire) {\n        return function (table, target) {\n          removeDataStyle(table);\n          var wire = lazyWire();\n          var doc = Element.fromDom(editor.getDoc());\n          var direction = TableDirection(Direction.directionAt);\n          var generators = TableFill.cellOperations(mutate, doc, cloneFormats);\n          return guard(table) ? operation(wire, table, target, generators, direction).bind(function (result) {\n            each(result.newRows(), function (row) {\n              fireNewRow(editor, row.dom());\n            });\n            each(result.newCells(), function (cell) {\n              fireNewCell(editor, cell.dom());\n            });\n            return result.cursor().map(function (cell) {\n              var rng = editor.dom.createRng();\n              rng.setStart(cell.dom(), 0);\n              rng.setEnd(cell.dom(), 0);\n              return rng;\n            });\n          }) : Option.none();\n        };\n      };\n      var deleteRow = execute(TableOperations.eraseRows, lastRowGuard, noop, lazyWire);\n      var deleteColumn = execute(TableOperations.eraseColumns, lastColumnGuard, noop, lazyWire);\n      var insertRowsBefore = execute(TableOperations.insertRowsBefore, always, noop, lazyWire);\n      var insertRowsAfter = execute(TableOperations.insertRowsAfter, always, noop, lazyWire);\n      var insertColumnsBefore = execute(TableOperations.insertColumnsBefore, always, CellMutations.halve, lazyWire);\n      var insertColumnsAfter = execute(TableOperations.insertColumnsAfter, always, CellMutations.halve, lazyWire);\n      var mergeCells = execute(TableOperations.mergeCells, always, noop, lazyWire);\n      var unmergeCells = execute(TableOperations.unmergeCells, always, noop, lazyWire);\n      var pasteRowsBefore = execute(TableOperations.pasteRowsBefore, always, noop, lazyWire);\n      var pasteRowsAfter = execute(TableOperations.pasteRowsAfter, always, noop, lazyWire);\n      var pasteCells = execute(TableOperations.pasteCells, always, noop, lazyWire);\n      return {\n        deleteRow: deleteRow,\n        deleteColumn: deleteColumn,\n        insertRowsBefore: insertRowsBefore,\n        insertRowsAfter: insertRowsAfter,\n        insertColumnsBefore: insertColumnsBefore,\n        insertColumnsAfter: insertColumnsAfter,\n        mergeCells: mergeCells,\n        unmergeCells: unmergeCells,\n        pasteRowsBefore: pasteRowsBefore,\n        pasteRowsAfter: pasteRowsAfter,\n        pasteCells: pasteCells\n      };\n    };\n\n    var copyRows = function (table, target, generators) {\n      var list = DetailsList.fromTable(table);\n      var house = Warehouse.generate(list);\n      var details = onCells(house, target);\n      return details.map(function (selectedCells) {\n        var grid = Transitions.toGrid(house, generators, false);\n        var slicedGrid = grid.slice(selectedCells[0].row(), selectedCells[selectedCells.length - 1].row() + selectedCells[selectedCells.length - 1].rowspan());\n        var slicedDetails = toDetailList(slicedGrid, generators);\n        return Redraw.copy(slicedDetails);\n      });\n    };\n    var CopyRows = { copyRows: copyRows };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getTDTHOverallStyle = function (dom, elm, name) {\n      var cells = dom.select('td,th', elm);\n      var firstChildStyle;\n      var checkChildren = function (firstChildStyle, elms) {\n        for (var i = 0; i < elms.length; i++) {\n          var currentStyle = dom.getStyle(elms[i], name);\n          if (typeof firstChildStyle === 'undefined') {\n            firstChildStyle = currentStyle;\n          }\n          if (firstChildStyle !== currentStyle) {\n            return '';\n          }\n        }\n        return firstChildStyle;\n      };\n      firstChildStyle = checkChildren(firstChildStyle, cells);\n      return firstChildStyle;\n    };\n    var applyAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('align' + name, {}, elm);\n      }\n    };\n    var applyVAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('valign' + name, {}, elm);\n      }\n    };\n    var unApplyAlign = function (editor, elm) {\n      global$1.each('left center right'.split(' '), function (name) {\n        editor.formatter.remove('align' + name, {}, elm);\n      });\n    };\n    var unApplyVAlign = function (editor, elm) {\n      global$1.each('top middle bottom'.split(' '), function (name) {\n        editor.formatter.remove('valign' + name, {}, elm);\n      });\n    };\n    var Styles$1 = {\n      applyAlign: applyAlign,\n      applyVAlign: applyVAlign,\n      unApplyAlign: unApplyAlign,\n      unApplyVAlign: unApplyVAlign,\n      getTDTHOverallStyle: getTDTHOverallStyle\n    };\n\n    var buildListItems = function (inputList, itemCallback, startItems) {\n      var appendItems = function (values, output) {\n        output = output || [];\n        global$1.each(values, function (item) {\n          var menuItem = { text: item.text || item.title };\n          if (item.menu) {\n            menuItem.menu = appendItems(item.menu);\n          } else {\n            menuItem.value = item.value;\n            if (itemCallback) {\n              itemCallback(menuItem);\n            }\n          }\n          output.push(menuItem);\n        });\n        return output;\n      };\n      return appendItems(inputList, startItems || []);\n    };\n    function styleFieldHasFocus(e) {\n      return e.control.rootControl.find('#style')[0].getEl().isEqualNode(domGlobals.document.activeElement);\n    }\n    var syncAdvancedStyleFields = function (editor, evt) {\n      if (styleFieldHasFocus(evt)) {\n        updateAdvancedFields(editor, evt);\n      } else {\n        updateStyleField(editor, evt);\n      }\n    };\n    var updateStyleField = function (editor, evt) {\n      var dom = editor.dom;\n      var rootControl = evt.control.rootControl;\n      var data = rootControl.toJSON();\n      var css = dom.parseStyle(data.style);\n      css['border-style'] = data.borderStyle;\n      css['border-color'] = data.borderColor;\n      css['background-color'] = data.backgroundColor;\n      css.width = data.width ? addSizeSuffix(data.width) : '';\n      css.height = data.height ? addSizeSuffix(data.height) : '';\n      rootControl.find('#style').value(dom.serializeStyle(dom.parseStyle(dom.serializeStyle(css))));\n    };\n    var updateAdvancedFields = function (editor, evt) {\n      var dom = editor.dom;\n      var rootControl = evt.control.rootControl;\n      var data = rootControl.toJSON();\n      var css = dom.parseStyle(data.style);\n      rootControl.find('#borderStyle').value(css['border-style'] || '');\n      rootControl.find('#borderColor').value(css['border-color'] || '');\n      rootControl.find('#backgroundColor').value(css['background-color'] || '');\n      rootControl.find('#width').value(css.width || '');\n      rootControl.find('#height').value(css.height || '');\n    };\n    var extractAdvancedStyles = function (dom, elm) {\n      var css = dom.parseStyle(dom.getAttrib(elm, 'style'));\n      var data = {};\n      if (css['border-style']) {\n        data.borderStyle = css['border-style'];\n      }\n      if (css['border-color']) {\n        data.borderColor = css['border-color'];\n      }\n      if (css['background-color']) {\n        data.backgroundColor = css['background-color'];\n      }\n      data.style = dom.serializeStyle(css);\n      return data;\n    };\n    var createStyleForm = function (editor) {\n      var createColorPickAction = function () {\n        var colorPickerCallback = getColorPickerCallback(editor);\n        if (colorPickerCallback) {\n          return function (evt) {\n            return colorPickerCallback.call(editor, function (value) {\n              evt.control.value(value).fire('change');\n            }, evt.control.value());\n          };\n        }\n      };\n      return {\n        title: 'Advanced',\n        type: 'form',\n        defaults: { onchange: curry(updateStyleField, editor) },\n        items: [\n          {\n            label: 'Style',\n            name: 'style',\n            type: 'textbox',\n            onchange: curry(updateAdvancedFields, editor)\n          },\n          {\n            type: 'form',\n            padding: 0,\n            formItemDefaults: {\n              layout: 'grid',\n              alignH: [\n                'start',\n                'right'\n              ]\n            },\n            defaults: { size: 7 },\n            items: [\n              {\n                label: 'Border style',\n                type: 'listbox',\n                name: 'borderStyle',\n                width: 90,\n                onselect: curry(updateStyleField, editor),\n                values: [\n                  {\n                    text: 'Select...',\n                    value: ''\n                  },\n                  {\n                    text: 'Solid',\n                    value: 'solid'\n                  },\n                  {\n                    text: 'Dotted',\n                    value: 'dotted'\n                  },\n                  {\n                    text: 'Dashed',\n                    value: 'dashed'\n                  },\n                  {\n                    text: 'Double',\n                    value: 'double'\n                  },\n                  {\n                    text: 'Groove',\n                    value: 'groove'\n                  },\n                  {\n                    text: 'Ridge',\n                    value: 'ridge'\n                  },\n                  {\n                    text: 'Inset',\n                    value: 'inset'\n                  },\n                  {\n                    text: 'Outset',\n                    value: 'outset'\n                  },\n                  {\n                    text: 'None',\n                    value: 'none'\n                  },\n                  {\n                    text: 'Hidden',\n                    value: 'hidden'\n                  }\n                ]\n              },\n              {\n                label: 'Border color',\n                type: 'colorbox',\n                name: 'borderColor',\n                onaction: createColorPickAction()\n              },\n              {\n                label: 'Background color',\n                type: 'colorbox',\n                name: 'backgroundColor',\n                onaction: createColorPickAction()\n              }\n            ]\n          }\n        ]\n      };\n    };\n    var Helpers = {\n      createStyleForm: createStyleForm,\n      buildListItems: buildListItems,\n      updateStyleField: updateStyleField,\n      extractAdvancedStyles: extractAdvancedStyles,\n      updateAdvancedFields: updateAdvancedFields,\n      syncAdvancedStyleFields: syncAdvancedStyleFields\n    };\n\n    var updateStyles = function (elm, cssText) {\n      delete elm.dataset.mceStyle;\n      elm.style.cssText += ';' + cssText;\n    };\n    var extractDataFromElement = function (editor, elm) {\n      var dom = editor.dom;\n      var data = {\n        width: dom.getStyle(elm, 'width') || dom.getAttrib(elm, 'width'),\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        scope: dom.getAttrib(elm, 'scope'),\n        class: dom.getAttrib(elm, 'class'),\n        type: elm.nodeName.toLowerCase(),\n        style: '',\n        align: '',\n        valign: ''\n      };\n      global$1.each('left center right'.split(' '), function (name) {\n        if (editor.formatter.matchNode(elm, 'align' + name)) {\n          data.align = name;\n        }\n      });\n      global$1.each('top middle bottom'.split(' '), function (name) {\n        if (editor.formatter.matchNode(elm, 'valign' + name)) {\n          data.valign = name;\n        }\n      });\n      if (hasAdvancedCellTab(editor)) {\n        global$1.extend(data, Helpers.extractAdvancedStyles(dom, elm));\n      }\n      return data;\n    };\n    var onSubmitCellForm = function (editor, cells, evt) {\n      var dom = editor.dom;\n      var data;\n      function setAttrib(elm, name, value) {\n        if (cells.length === 1 || value) {\n          dom.setAttrib(elm, name, value);\n        }\n      }\n      function setStyle(elm, name, value) {\n        if (cells.length === 1 || value) {\n          dom.setStyle(elm, name, value);\n        }\n      }\n      if (hasAdvancedCellTab(editor)) {\n        Helpers.syncAdvancedStyleFields(editor, evt);\n      }\n      data = evt.control.rootControl.toJSON();\n      editor.undoManager.transact(function () {\n        global$1.each(cells, function (cellElm) {\n          setAttrib(cellElm, 'scope', data.scope);\n          if (cells.length === 1) {\n            setAttrib(cellElm, 'style', data.style);\n          } else {\n            updateStyles(cellElm, data.style);\n          }\n          setAttrib(cellElm, 'class', data.class);\n          setStyle(cellElm, 'width', addSizeSuffix(data.width));\n          setStyle(cellElm, 'height', addSizeSuffix(data.height));\n          if (data.type && cellElm.nodeName.toLowerCase() !== data.type) {\n            cellElm = dom.rename(cellElm, data.type);\n          }\n          if (cells.length === 1) {\n            Styles$1.unApplyAlign(editor, cellElm);\n            Styles$1.unApplyVAlign(editor, cellElm);\n          }\n          if (data.align) {\n            Styles$1.applyAlign(editor, cellElm, data.align);\n          }\n          if (data.valign) {\n            Styles$1.applyVAlign(editor, cellElm, data.valign);\n          }\n        });\n        editor.focus();\n      });\n    };\n    var open = function (editor) {\n      var cellElm, data, classListCtrl, cells = [];\n      cells = editor.dom.select('td[data-mce-selected],th[data-mce-selected]');\n      cellElm = editor.dom.getParent(editor.selection.getStart(), 'td,th');\n      if (!cells.length && cellElm) {\n        cells.push(cellElm);\n      }\n      cellElm = cellElm || cells[0];\n      if (!cellElm) {\n        return;\n      }\n      if (cells.length > 1) {\n        data = {\n          width: '',\n          height: '',\n          scope: '',\n          class: '',\n          align: '',\n          valign: '',\n          style: '',\n          type: cellElm.nodeName.toLowerCase()\n        };\n      } else {\n        data = extractDataFromElement(editor, cellElm);\n      }\n      if (getCellClassList(editor).length > 0) {\n        classListCtrl = {\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          values: Helpers.buildListItems(getCellClassList(editor), function (item) {\n            if (item.value) {\n              item.textStyle = function () {\n                return editor.formatter.getCssText({\n                  block: 'td',\n                  classes: [item.value]\n                });\n              };\n            }\n          })\n        };\n      }\n      var generalCellForm = {\n        type: 'form',\n        layout: 'flex',\n        direction: 'column',\n        labelGapCalc: 'children',\n        padding: 0,\n        items: [\n          {\n            type: 'form',\n            layout: 'grid',\n            columns: 2,\n            labelGapCalc: false,\n            padding: 0,\n            defaults: {\n              type: 'textbox',\n              maxWidth: 50\n            },\n            items: [\n              {\n                label: 'Width',\n                name: 'width',\n                onchange: curry(Helpers.updateStyleField, editor)\n              },\n              {\n                label: 'Height',\n                name: 'height',\n                onchange: curry(Helpers.updateStyleField, editor)\n              },\n              {\n                label: 'Cell type',\n                name: 'type',\n                type: 'listbox',\n                text: 'None',\n                minWidth: 90,\n                maxWidth: null,\n                values: [\n                  {\n                    text: 'Cell',\n                    value: 'td'\n                  },\n                  {\n                    text: 'Header cell',\n                    value: 'th'\n                  }\n                ]\n              },\n              {\n                label: 'Scope',\n                name: 'scope',\n                type: 'listbox',\n                text: 'None',\n                minWidth: 90,\n                maxWidth: null,\n                values: [\n                  {\n                    text: 'None',\n                    value: ''\n                  },\n                  {\n                    text: 'Row',\n                    value: 'row'\n                  },\n                  {\n                    text: 'Column',\n                    value: 'col'\n                  },\n                  {\n                    text: 'Row group',\n                    value: 'rowgroup'\n                  },\n                  {\n                    text: 'Column group',\n                    value: 'colgroup'\n                  }\n                ]\n              },\n              {\n                label: 'H Align',\n                name: 'align',\n                type: 'listbox',\n                text: 'None',\n                minWidth: 90,\n                maxWidth: null,\n                values: [\n                  {\n                    text: 'None',\n                    value: ''\n                  },\n                  {\n                    text: 'Left',\n                    value: 'left'\n                  },\n                  {\n                    text: 'Center',\n                    value: 'center'\n                  },\n                  {\n                    text: 'Right',\n                    value: 'right'\n                  }\n                ]\n              },\n              {\n                label: 'V Align',\n                name: 'valign',\n                type: 'listbox',\n                text: 'None',\n                minWidth: 90,\n                maxWidth: null,\n                values: [\n                  {\n                    text: 'None',\n                    value: ''\n                  },\n                  {\n                    text: 'Top',\n                    value: 'top'\n                  },\n                  {\n                    text: 'Middle',\n                    value: 'middle'\n                  },\n                  {\n                    text: 'Bottom',\n                    value: 'bottom'\n                  }\n                ]\n              }\n            ]\n          },\n          classListCtrl\n        ]\n      };\n      if (hasAdvancedCellTab(editor)) {\n        editor.windowManager.open({\n          title: 'Cell properties',\n          bodyType: 'tabpanel',\n          data: data,\n          body: [\n            {\n              title: 'General',\n              type: 'form',\n              items: generalCellForm\n            },\n            Helpers.createStyleForm(editor)\n          ],\n          onsubmit: curry(onSubmitCellForm, editor, cells)\n        });\n      } else {\n        editor.windowManager.open({\n          title: 'Cell properties',\n          data: data,\n          body: generalCellForm,\n          onsubmit: curry(onSubmitCellForm, editor, cells)\n        });\n      }\n    };\n    var CellDialog = { open: open };\n\n    var extractDataFromElement$1 = function (editor, elm) {\n      var dom = editor.dom;\n      var data = {\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        scope: dom.getAttrib(elm, 'scope'),\n        class: dom.getAttrib(elm, 'class'),\n        align: '',\n        style: '',\n        type: elm.parentNode.nodeName.toLowerCase()\n      };\n      global$1.each('left center right'.split(' '), function (name) {\n        if (editor.formatter.matchNode(elm, 'align' + name)) {\n          data.align = name;\n        }\n      });\n      if (hasAdvancedRowTab(editor)) {\n        global$1.extend(data, Helpers.extractAdvancedStyles(dom, elm));\n      }\n      return data;\n    };\n    var switchRowType = function (dom, rowElm, toType) {\n      var tableElm = dom.getParent(rowElm, 'table');\n      var oldParentElm = rowElm.parentNode;\n      var parentElm = dom.select(toType, tableElm)[0];\n      if (!parentElm) {\n        parentElm = dom.create(toType);\n        if (tableElm.firstChild) {\n          if (tableElm.firstChild.nodeName === 'CAPTION') {\n            dom.insertAfter(parentElm, tableElm.firstChild);\n          } else {\n            tableElm.insertBefore(parentElm, tableElm.firstChild);\n          }\n        } else {\n          tableElm.appendChild(parentElm);\n        }\n      }\n      parentElm.appendChild(rowElm);\n      if (!oldParentElm.hasChildNodes()) {\n        dom.remove(oldParentElm);\n      }\n    };\n    function onSubmitRowForm(editor, rows, oldData, evt) {\n      var dom = editor.dom;\n      function setAttrib(elm, name, value) {\n        if (rows.length === 1 || value) {\n          dom.setAttrib(elm, name, value);\n        }\n      }\n      function setStyle(elm, name, value) {\n        if (rows.length === 1 || value) {\n          dom.setStyle(elm, name, value);\n        }\n      }\n      if (hasAdvancedRowTab(editor)) {\n        Helpers.syncAdvancedStyleFields(editor, evt);\n      }\n      var data = evt.control.rootControl.toJSON();\n      editor.undoManager.transact(function () {\n        global$1.each(rows, function (rowElm) {\n          setAttrib(rowElm, 'scope', data.scope);\n          setAttrib(rowElm, 'style', data.style);\n          setAttrib(rowElm, 'class', data.class);\n          setStyle(rowElm, 'height', addSizeSuffix(data.height));\n          if (data.type !== rowElm.parentNode.nodeName.toLowerCase()) {\n            switchRowType(editor.dom, rowElm, data.type);\n          }\n          if (data.align !== oldData.align) {\n            Styles$1.unApplyAlign(editor, rowElm);\n            Styles$1.applyAlign(editor, rowElm, data.align);\n          }\n        });\n        editor.focus();\n      });\n    }\n    var open$1 = function (editor) {\n      var dom = editor.dom;\n      var tableElm, cellElm, rowElm, classListCtrl, data;\n      var rows = [];\n      var generalRowForm;\n      tableElm = dom.getParent(editor.selection.getStart(), 'table');\n      cellElm = dom.getParent(editor.selection.getStart(), 'td,th');\n      global$1.each(tableElm.rows, function (row) {\n        global$1.each(row.cells, function (cell) {\n          if (dom.getAttrib(cell, 'data-mce-selected') || cell === cellElm) {\n            rows.push(row);\n            return false;\n          }\n        });\n      });\n      rowElm = rows[0];\n      if (!rowElm) {\n        return;\n      }\n      if (rows.length > 1) {\n        data = {\n          height: '',\n          scope: '',\n          style: '',\n          class: '',\n          align: '',\n          type: rowElm.parentNode.nodeName.toLowerCase()\n        };\n      } else {\n        data = extractDataFromElement$1(editor, rowElm);\n      }\n      if (getRowClassList(editor).length > 0) {\n        classListCtrl = {\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          values: Helpers.buildListItems(getRowClassList(editor), function (item) {\n            if (item.value) {\n              item.textStyle = function () {\n                return editor.formatter.getCssText({\n                  block: 'tr',\n                  classes: [item.value]\n                });\n              };\n            }\n          })\n        };\n      }\n      generalRowForm = {\n        type: 'form',\n        columns: 2,\n        padding: 0,\n        defaults: { type: 'textbox' },\n        items: [\n          {\n            type: 'listbox',\n            name: 'type',\n            label: 'Row type',\n            text: 'Header',\n            maxWidth: null,\n            values: [\n              {\n                text: 'Header',\n                value: 'thead'\n              },\n              {\n                text: 'Body',\n                value: 'tbody'\n              },\n              {\n                text: 'Footer',\n                value: 'tfoot'\n              }\n            ]\n          },\n          {\n            type: 'listbox',\n            name: 'align',\n            label: 'Alignment',\n            text: 'None',\n            maxWidth: null,\n            values: [\n              {\n                text: 'None',\n                value: ''\n              },\n              {\n                text: 'Left',\n                value: 'left'\n              },\n              {\n                text: 'Center',\n                value: 'center'\n              },\n              {\n                text: 'Right',\n                value: 'right'\n              }\n            ]\n          },\n          {\n            label: 'Height',\n            name: 'height'\n          },\n          classListCtrl\n        ]\n      };\n      if (hasAdvancedRowTab(editor)) {\n        editor.windowManager.open({\n          title: 'Row properties',\n          data: data,\n          bodyType: 'tabpanel',\n          body: [\n            {\n              title: 'General',\n              type: 'form',\n              items: generalRowForm\n            },\n            Helpers.createStyleForm(editor)\n          ],\n          onsubmit: curry(onSubmitRowForm, editor, rows, data)\n        });\n      } else {\n        editor.windowManager.open({\n          title: 'Row properties',\n          data: data,\n          body: generalRowForm,\n          onsubmit: curry(onSubmitRowForm, editor, rows, data)\n        });\n      }\n    };\n    var RowDialog = { open: open$1 };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var DefaultRenderOptions = {\n      styles: {\n        'border-collapse': 'collapse',\n        'width': '100%'\n      },\n      attributes: { border: '1' },\n      percentages: true\n    };\n    var makeTable = function () {\n      return Element.fromTag('table');\n    };\n    var tableBody = function () {\n      return Element.fromTag('tbody');\n    };\n    var tableRow = function () {\n      return Element.fromTag('tr');\n    };\n    var tableHeaderCell = function () {\n      return Element.fromTag('th');\n    };\n    var tableCell = function () {\n      return Element.fromTag('td');\n    };\n    var render$1 = function (rows, columns, rowHeaders, columnHeaders, renderOpts) {\n      if (renderOpts === void 0) {\n        renderOpts = DefaultRenderOptions;\n      }\n      var table = makeTable();\n      setAll$1(table, renderOpts.styles);\n      setAll(table, renderOpts.attributes);\n      var tbody = tableBody();\n      append(table, tbody);\n      var trs = [];\n      for (var i = 0; i < rows; i++) {\n        var tr = tableRow();\n        for (var j = 0; j < columns; j++) {\n          var td = i < rowHeaders || j < columnHeaders ? tableHeaderCell() : tableCell();\n          if (j < columnHeaders) {\n            set(td, 'scope', 'row');\n          }\n          if (i < rowHeaders) {\n            set(td, 'scope', 'col');\n          }\n          append(td, Element.fromTag('br'));\n          if (renderOpts.percentages) {\n            set$1(td, 'width', 100 / columns + '%');\n          }\n          append(tr, td);\n        }\n        trs.push(tr);\n      }\n      append$1(tbody, trs);\n      return table;\n    };\n\n    var get$7 = function (element) {\n      return element.dom().innerHTML;\n    };\n    var getOuter$2 = function (element) {\n      var container = Element.fromTag('div');\n      var clone = Element.fromDom(element.dom().cloneNode(true));\n      append(container, clone);\n      return get$7(container);\n    };\n\n    var placeCaretInCell = function (editor, cell) {\n      editor.selection.select(cell.dom(), true);\n      editor.selection.collapse(true);\n    };\n    var selectFirstCellInTable = function (editor, tableElm) {\n      descendant$1(tableElm, 'td,th').each(curry(placeCaretInCell, editor));\n    };\n    var fireEvents = function (editor, table) {\n      each(descendants$1(table, 'tr'), function (row) {\n        fireNewRow(editor, row.dom());\n        each(descendants$1(row, 'th,td'), function (cell) {\n          fireNewCell(editor, cell.dom());\n        });\n      });\n    };\n    var isPercentage = function (width) {\n      return isString(width) && width.indexOf('%') !== -1;\n    };\n    var insert$1 = function (editor, columns, rows) {\n      var defaultStyles = getDefaultStyles(editor);\n      var options = {\n        styles: defaultStyles,\n        attributes: getDefaultAttributes(editor),\n        percentages: isPercentage(defaultStyles.width) && !isPixelsForced(editor)\n      };\n      var table = render$1(rows, columns, 0, 0, options);\n      set(table, 'data-mce-id', '__mce');\n      var html = getOuter$2(table);\n      editor.insertContent(html);\n      return descendant$1(getBody$1(editor), 'table[data-mce-id=\"__mce\"]').map(function (table) {\n        if (isPixelsForced(editor)) {\n          set$1(table, 'width', get$1(table, 'width'));\n        }\n        remove(table, 'data-mce-id');\n        fireEvents(editor, table);\n        selectFirstCellInTable(editor, table);\n        return table.dom();\n      }).getOr(null);\n    };\n    var InsertTable = { insert: insert$1 };\n\n    function styleTDTH(dom, elm, name, value) {\n      if (elm.tagName === 'TD' || elm.tagName === 'TH') {\n        dom.setStyle(elm, name, value);\n      } else {\n        if (elm.children) {\n          for (var i = 0; i < elm.children.length; i++) {\n            styleTDTH(dom, elm.children[i], name, value);\n          }\n        }\n      }\n    }\n    var extractDataFromElement$2 = function (editor, tableElm) {\n      var dom = editor.dom;\n      var data = {\n        width: dom.getStyle(tableElm, 'width') || dom.getAttrib(tableElm, 'width'),\n        height: dom.getStyle(tableElm, 'height') || dom.getAttrib(tableElm, 'height'),\n        cellspacing: dom.getStyle(tableElm, 'border-spacing') || dom.getAttrib(tableElm, 'cellspacing'),\n        cellpadding: dom.getAttrib(tableElm, 'data-mce-cell-padding') || dom.getAttrib(tableElm, 'cellpadding') || Styles$1.getTDTHOverallStyle(editor.dom, tableElm, 'padding'),\n        border: dom.getAttrib(tableElm, 'data-mce-border') || dom.getAttrib(tableElm, 'border') || Styles$1.getTDTHOverallStyle(editor.dom, tableElm, 'border'),\n        borderColor: dom.getAttrib(tableElm, 'data-mce-border-color'),\n        caption: !!dom.select('caption', tableElm)[0],\n        class: dom.getAttrib(tableElm, 'class')\n      };\n      global$1.each('left center right'.split(' '), function (name) {\n        if (editor.formatter.matchNode(tableElm, 'align' + name)) {\n          data.align = name;\n        }\n      });\n      if (hasAdvancedTableTab(editor)) {\n        global$1.extend(data, Helpers.extractAdvancedStyles(dom, tableElm));\n      }\n      return data;\n    };\n    var applyDataToElement = function (editor, tableElm, data) {\n      var dom = editor.dom;\n      var attrs = {};\n      var styles = {};\n      attrs.class = data.class;\n      styles.height = addSizeSuffix(data.height);\n      if (dom.getAttrib(tableElm, 'width') && !shouldStyleWithCss(editor)) {\n        attrs.width = removePxSuffix(data.width);\n      } else {\n        styles.width = addSizeSuffix(data.width);\n      }\n      if (shouldStyleWithCss(editor)) {\n        styles['border-width'] = addSizeSuffix(data.border);\n        styles['border-spacing'] = addSizeSuffix(data.cellspacing);\n        global$1.extend(attrs, {\n          'data-mce-border-color': data.borderColor,\n          'data-mce-cell-padding': data.cellpadding,\n          'data-mce-border': data.border\n        });\n      } else {\n        global$1.extend(attrs, {\n          border: data.border,\n          cellpadding: data.cellpadding,\n          cellspacing: data.cellspacing\n        });\n      }\n      if (shouldStyleWithCss(editor)) {\n        if (tableElm.children) {\n          for (var i = 0; i < tableElm.children.length; i++) {\n            styleTDTH(dom, tableElm.children[i], {\n              'border-width': addSizeSuffix(data.border),\n              'border-color': data.borderColor,\n              'padding': addSizeSuffix(data.cellpadding)\n            });\n          }\n        }\n      }\n      if (data.style) {\n        global$1.extend(styles, dom.parseStyle(data.style));\n      } else {\n        styles = global$1.extend({}, dom.parseStyle(dom.getAttrib(tableElm, 'style')), styles);\n      }\n      attrs.style = dom.serializeStyle(styles);\n      dom.setAttribs(tableElm, attrs);\n    };\n    var onSubmitTableForm = function (editor, tableElm, evt) {\n      var dom = editor.dom;\n      var captionElm;\n      var data;\n      if (hasAdvancedTableTab(editor)) {\n        Helpers.syncAdvancedStyleFields(editor, evt);\n      }\n      data = evt.control.rootControl.toJSON();\n      if (data.class === false) {\n        delete data.class;\n      }\n      editor.undoManager.transact(function () {\n        if (!tableElm) {\n          tableElm = InsertTable.insert(editor, data.cols || 1, data.rows || 1);\n        }\n        applyDataToElement(editor, tableElm, data);\n        captionElm = dom.select('caption', tableElm)[0];\n        if (captionElm && !data.caption) {\n          dom.remove(captionElm);\n        }\n        if (!captionElm && data.caption) {\n          captionElm = dom.create('caption');\n          captionElm.innerHTML = !global$2.ie ? '<br data-mce-bogus=\"1\"/>' : '\\xA0';\n          tableElm.insertBefore(captionElm, tableElm.firstChild);\n        }\n        Styles$1.unApplyAlign(editor, tableElm);\n        if (data.align) {\n          Styles$1.applyAlign(editor, tableElm, data.align);\n        }\n        editor.focus();\n        editor.addVisual();\n      });\n    };\n    var open$2 = function (editor, isProps) {\n      var dom = editor.dom;\n      var tableElm, colsCtrl, rowsCtrl, classListCtrl, data = {}, generalTableForm;\n      if (isProps === true) {\n        tableElm = dom.getParent(editor.selection.getStart(), 'table');\n        if (tableElm) {\n          data = extractDataFromElement$2(editor, tableElm);\n        }\n      } else {\n        colsCtrl = {\n          label: 'Cols',\n          name: 'cols'\n        };\n        rowsCtrl = {\n          label: 'Rows',\n          name: 'rows'\n        };\n      }\n      if (getTableClassList(editor).length > 0) {\n        if (data.class) {\n          data.class = data.class.replace(/\\s*mce\\-item\\-table\\s*/g, '');\n        }\n        classListCtrl = {\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          values: Helpers.buildListItems(getTableClassList(editor), function (item) {\n            if (item.value) {\n              item.textStyle = function () {\n                return editor.formatter.getCssText({\n                  block: 'table',\n                  classes: [item.value]\n                });\n              };\n            }\n          })\n        };\n      }\n      generalTableForm = {\n        type: 'form',\n        layout: 'flex',\n        direction: 'column',\n        labelGapCalc: 'children',\n        padding: 0,\n        items: [\n          {\n            type: 'form',\n            labelGapCalc: false,\n            padding: 0,\n            layout: 'grid',\n            columns: 2,\n            defaults: {\n              type: 'textbox',\n              maxWidth: 50\n            },\n            items: hasAppearanceOptions(editor) ? [\n              colsCtrl,\n              rowsCtrl,\n              {\n                label: 'Width',\n                name: 'width',\n                onchange: curry(Helpers.updateStyleField, editor)\n              },\n              {\n                label: 'Height',\n                name: 'height',\n                onchange: curry(Helpers.updateStyleField, editor)\n              },\n              {\n                label: 'Cell spacing',\n                name: 'cellspacing'\n              },\n              {\n                label: 'Cell padding',\n                name: 'cellpadding'\n              },\n              {\n                label: 'Border',\n                name: 'border'\n              },\n              {\n                label: 'Caption',\n                name: 'caption',\n                type: 'checkbox'\n              }\n            ] : [\n              colsCtrl,\n              rowsCtrl,\n              {\n                label: 'Width',\n                name: 'width',\n                onchange: curry(Helpers.updateStyleField, editor)\n              },\n              {\n                label: 'Height',\n                name: 'height',\n                onchange: curry(Helpers.updateStyleField, editor)\n              }\n            ]\n          },\n          {\n            label: 'Alignment',\n            name: 'align',\n            type: 'listbox',\n            text: 'None',\n            values: [\n              {\n                text: 'None',\n                value: ''\n              },\n              {\n                text: 'Left',\n                value: 'left'\n              },\n              {\n                text: 'Center',\n                value: 'center'\n              },\n              {\n                text: 'Right',\n                value: 'right'\n              }\n            ]\n          },\n          classListCtrl\n        ]\n      };\n      if (hasAdvancedTableTab(editor)) {\n        editor.windowManager.open({\n          title: 'Table properties',\n          data: data,\n          bodyType: 'tabpanel',\n          body: [\n            {\n              title: 'General',\n              type: 'form',\n              items: generalTableForm\n            },\n            Helpers.createStyleForm(editor)\n          ],\n          onsubmit: curry(onSubmitTableForm, editor, tableElm)\n        });\n      } else {\n        editor.windowManager.open({\n          title: 'Table properties',\n          data: data,\n          body: generalTableForm,\n          onsubmit: curry(onSubmitTableForm, editor, tableElm)\n        });\n      }\n    };\n    var TableDialog = { open: open$2 };\n\n    var each$3 = global$1.each;\n    var registerCommands = function (editor, actions, cellSelection, selections, clipboardRows) {\n      var isRoot = getIsRoot(editor);\n      var eraseTable = function () {\n        getSelectionStartCell().orThunk(getSelectionStartCaption).each(function (cellOrCaption) {\n          var table = TableLookup.table(cellOrCaption, isRoot);\n          table.filter(not(isRoot)).each(function (table) {\n            var cursor = Element.fromText('');\n            after(table, cursor);\n            remove$2(table);\n            var rng = editor.dom.createRng();\n            rng.setStart(cursor.dom(), 0);\n            rng.setEnd(cursor.dom(), 0);\n            editor.selection.setRng(rng);\n          });\n        });\n      };\n      var getSelectionStartFromSelector = function (selector) {\n        return function () {\n          return Option.from(editor.dom.getParent(editor.selection.getStart(), selector)).map(Element.fromDom);\n        };\n      };\n      var getSelectionStartCaption = getSelectionStartFromSelector('caption');\n      var getSelectionStartCell = getSelectionStartFromSelector('th,td');\n      var getTableFromCell = function (cell) {\n        return TableLookup.table(cell, isRoot);\n      };\n      var getSize = function (table) {\n        return {\n          width: getPixelWidth$1(table.dom()),\n          height: getPixelWidth$1(table.dom())\n        };\n      };\n      var resizeChange = function (editor, oldSize, table) {\n        var newSize = getSize(table);\n        if (oldSize.width !== newSize.width || oldSize.height !== newSize.height) {\n          fireObjectResizeStart(editor, table.dom(), oldSize.width, oldSize.height);\n          fireObjectResized(editor, table.dom(), newSize.width, newSize.height);\n        }\n      };\n      var actOnSelection = function (execute) {\n        getSelectionStartCell().each(function (cell) {\n          getTableFromCell(cell).each(function (table) {\n            var targets = TableTargets.forMenu(selections, table, cell);\n            var beforeSize = getSize(table);\n            execute(table, targets).each(function (rng) {\n              resizeChange(editor, beforeSize, table);\n              editor.selection.setRng(rng);\n              editor.focus();\n              cellSelection.clear(table);\n              removeDataStyle(table);\n            });\n          });\n        });\n      };\n      var copyRowSelection = function (execute) {\n        return getSelectionStartCell().bind(function (cell) {\n          return getTableFromCell(cell).bind(function (table) {\n            var doc = Element.fromDom(editor.getDoc());\n            var targets = TableTargets.forMenu(selections, table, cell);\n            var generators = TableFill.cellOperations(noop, doc, Option.none());\n            return CopyRows.copyRows(table, targets, generators);\n          });\n        });\n      };\n      var pasteOnSelection = function (execute) {\n        clipboardRows.get().each(function (rows) {\n          var clonedRows = map(rows, function (row) {\n            return deep(row);\n          });\n          getSelectionStartCell().each(function (cell) {\n            getTableFromCell(cell).each(function (table) {\n              var doc = Element.fromDom(editor.getDoc());\n              var generators = TableFill.paste(doc);\n              var targets = TableTargets.pasteRows(selections, table, cell, clonedRows, generators);\n              execute(table, targets).each(function (rng) {\n                editor.selection.setRng(rng);\n                editor.focus();\n                cellSelection.clear(table);\n              });\n            });\n          });\n        });\n      };\n      each$3({\n        mceTableSplitCells: function () {\n          actOnSelection(actions.unmergeCells);\n        },\n        mceTableMergeCells: function () {\n          actOnSelection(actions.mergeCells);\n        },\n        mceTableInsertRowBefore: function () {\n          actOnSelection(actions.insertRowsBefore);\n        },\n        mceTableInsertRowAfter: function () {\n          actOnSelection(actions.insertRowsAfter);\n        },\n        mceTableInsertColBefore: function () {\n          actOnSelection(actions.insertColumnsBefore);\n        },\n        mceTableInsertColAfter: function () {\n          actOnSelection(actions.insertColumnsAfter);\n        },\n        mceTableDeleteCol: function () {\n          actOnSelection(actions.deleteColumn);\n        },\n        mceTableDeleteRow: function () {\n          actOnSelection(actions.deleteRow);\n        },\n        mceTableCutRow: function (grid) {\n          clipboardRows.set(copyRowSelection());\n          actOnSelection(actions.deleteRow);\n        },\n        mceTableCopyRow: function (grid) {\n          clipboardRows.set(copyRowSelection());\n        },\n        mceTablePasteRowBefore: function (grid) {\n          pasteOnSelection(actions.pasteRowsBefore);\n        },\n        mceTablePasteRowAfter: function (grid) {\n          pasteOnSelection(actions.pasteRowsAfter);\n        },\n        mceTableDelete: eraseTable\n      }, function (func, name) {\n        editor.addCommand(name, func);\n      });\n      each$3({\n        mceInsertTable: curry(TableDialog.open, editor),\n        mceTableProps: curry(TableDialog.open, editor, true),\n        mceTableRowProps: curry(RowDialog.open, editor),\n        mceTableCellProps: curry(CellDialog.open, editor)\n      }, function (func, name) {\n        editor.addCommand(name, function (ui, val) {\n          func(val);\n        });\n      });\n    };\n    var Commands = { registerCommands: registerCommands };\n\n    var only = function (element) {\n      var parent = Option.from(element.dom().documentElement).map(Element.fromDom).getOr(element);\n      return {\n        parent: constant(parent),\n        view: constant(element),\n        origin: constant(Position(0, 0))\n      };\n    };\n    var detached = function (editable, chrome) {\n      var origin = function () {\n        return absolute(chrome);\n      };\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: origin\n      };\n    };\n    var body$1 = function (editable, chrome) {\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: constant(Position(0, 0))\n      };\n    };\n    var ResizeWire = {\n      only: only,\n      detached: detached,\n      body: body$1\n    };\n\n    var Event = function (fields) {\n      var struct = Immutable.apply(null, fields);\n      var handlers = [];\n      var bind = function (handler) {\n        if (handler === undefined) {\n          throw new Error('Event bind error: undefined handler');\n        }\n        handlers.push(handler);\n      };\n      var unbind = function (handler) {\n        handlers = filter(handlers, function (h) {\n          return h !== handler;\n        });\n      };\n      var trigger = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        var event = struct.apply(null, args);\n        each(handlers, function (handler) {\n          handler(event);\n        });\n      };\n      return {\n        bind: bind,\n        unbind: unbind,\n        trigger: trigger\n      };\n    };\n\n    var create$1 = function (typeDefs) {\n      var registry = map$1(typeDefs, function (event) {\n        return {\n          bind: event.bind,\n          unbind: event.unbind\n        };\n      });\n      var trigger = map$1(typeDefs, function (event) {\n        return event.trigger;\n      });\n      return {\n        registry: registry,\n        trigger: trigger\n      };\n    };\n    var Events = { create: create$1 };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: constant(target),\n        x: constant(x),\n        y: constant(y),\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: constant(raw)\n      };\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (!filter(rawEvent)) {\n          return;\n        }\n        var target = Element.fromDom(rawEvent.target);\n        var stop = function () {\n          rawEvent.stopPropagation();\n        };\n        var prevent = function () {\n          rawEvent.preventDefault();\n        };\n        var kill = compose(prevent, stop);\n        var evt = mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n        handler(evt);\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom().addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$1 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom().removeEventListener(event, handler, useCapture);\n    };\n\n    var filter$1 = constant(true);\n    var bind$2 = function (element, event, handler) {\n      return bind$1(element, event, filter$1, handler);\n    };\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var shallow$1 = function (old, nu) {\n      return nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var merge$3 = baseMerge(shallow$1);\n\n    var styles$1 = css('ephox-dragster');\n    var Styles$2 = { resolve: styles$1.resolve };\n\n    var Blocker = function (options) {\n      var settings = merge$3({ layerClass: Styles$2.resolve('blocker') }, options);\n      var div = Element.fromTag('div');\n      set(div, 'role', 'presentation');\n      setAll$1(div, {\n        position: 'fixed',\n        left: '0px',\n        top: '0px',\n        width: '100%',\n        height: '100%'\n      });\n      add$2(div, Styles$2.resolve('blocker'));\n      add$2(div, settings.layerClass);\n      var element = function () {\n        return div;\n      };\n      var destroy = function () {\n        remove$2(div);\n      };\n      return {\n        element: element,\n        destroy: destroy\n      };\n    };\n\n    var DragMode = exactly([\n      'compare',\n      'extract',\n      'mutate',\n      'sink'\n    ]);\n    var DragSink = exactly([\n      'element',\n      'start',\n      'stop',\n      'destroy'\n    ]);\n    var DragApi = exactly([\n      'forceDrop',\n      'drop',\n      'move',\n      'delayDrop'\n    ]);\n\n    var compare = function (old, nu) {\n      return Position(nu.left() - old.left(), nu.top() - old.top());\n    };\n    var extract$1 = function (event) {\n      return Option.some(Position(event.x(), event.y()));\n    };\n    var mutate = function (mutation, info) {\n      mutation.mutate(info.left(), info.top());\n    };\n    var sink = function (dragApi, settings) {\n      var blocker = Blocker(settings);\n      var mdown = bind$2(blocker.element(), 'mousedown', dragApi.forceDrop);\n      var mup = bind$2(blocker.element(), 'mouseup', dragApi.drop);\n      var mmove = bind$2(blocker.element(), 'mousemove', dragApi.move);\n      var mout = bind$2(blocker.element(), 'mouseout', dragApi.delayDrop);\n      var destroy = function () {\n        blocker.destroy();\n        mup.unbind();\n        mmove.unbind();\n        mout.unbind();\n        mdown.unbind();\n      };\n      var start = function (parent) {\n        append(parent, blocker.element());\n      };\n      var stop = function () {\n        remove$2(blocker.element());\n      };\n      return DragSink({\n        element: blocker.element,\n        start: start,\n        stop: stop,\n        destroy: destroy\n      });\n    };\n    var MouseDrag = DragMode({\n      compare: compare,\n      extract: extract$1,\n      sink: sink,\n      mutate: mutate\n    });\n\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n        }\n        timer = domGlobals.setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    function InDrag () {\n      var previous = Option.none();\n      var reset = function () {\n        previous = Option.none();\n      };\n      var update = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.compare(old, nu);\n        });\n        previous = Option.some(nu);\n        return result;\n      };\n      var onEvent = function (event, mode) {\n        var dataOption = mode.extract(event);\n        dataOption.each(function (data) {\n          var offset = update(mode, data);\n          offset.each(function (d) {\n            events.trigger.move(d);\n          });\n        });\n      };\n      var events = Events.create({ move: Event(['info']) });\n      return {\n        onEvent: onEvent,\n        reset: reset,\n        events: events.registry\n      };\n    }\n\n    function NoDrag () {\n      return {\n        onEvent: noop,\n        reset: noop\n      };\n    }\n\n    function Movement () {\n      var noDragState = NoDrag();\n      var inDragState = InDrag();\n      var dragState = noDragState;\n      var on = function () {\n        dragState.reset();\n        dragState = inDragState;\n      };\n      var off = function () {\n        dragState.reset();\n        dragState = noDragState;\n      };\n      var onEvent = function (event, mode) {\n        dragState.onEvent(event, mode);\n      };\n      var isOn = function () {\n        return dragState === inDragState;\n      };\n      return {\n        on: on,\n        off: off,\n        isOn: isOn,\n        onEvent: onEvent,\n        events: inDragState.events\n      };\n    }\n\n    var setup = function (mutation, mode, settings) {\n      var active = false;\n      var events = Events.create({\n        start: Event([]),\n        stop: Event([])\n      });\n      var movement = Movement();\n      var drop = function () {\n        sink.stop();\n        if (movement.isOn()) {\n          movement.off();\n          events.trigger.stop();\n        }\n      };\n      var throttledDrop = last$2(drop, 200);\n      var go = function (parent) {\n        sink.start(parent);\n        movement.on();\n        events.trigger.start();\n      };\n      var mousemove = function (event) {\n        throttledDrop.cancel();\n        movement.onEvent(event, mode);\n      };\n      movement.events.move.bind(function (event) {\n        mode.mutate(mutation, event.info());\n      });\n      var on = function () {\n        active = true;\n      };\n      var off = function () {\n        active = false;\n      };\n      var runIfActive = function (f) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (active) {\n            f.apply(null, args);\n          }\n        };\n      };\n      var sink = mode.sink(DragApi({\n        forceDrop: drop,\n        drop: runIfActive(drop),\n        move: runIfActive(mousemove),\n        delayDrop: runIfActive(throttledDrop.throttle)\n      }), settings);\n      var destroy = function () {\n        sink.destroy();\n      };\n      return {\n        element: sink.element,\n        go: go,\n        on: on,\n        off: off,\n        destroy: destroy,\n        events: events.registry\n      };\n    };\n    var Dragging = { setup: setup };\n\n    var transform$1 = function (mutation, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var mode = settings.mode !== undefined ? settings.mode : MouseDrag;\n      return Dragging.setup(mutation, mode, settings);\n    };\n    var Dragger = { transform: transform$1 };\n\n    var Mutation = function () {\n      var events = Events.create({\n        drag: Event([\n          'xDelta',\n          'yDelta'\n        ])\n      });\n      var mutate = function (x, y) {\n        events.trigger.drag(x, y);\n      };\n      return {\n        mutate: mutate,\n        events: events.registry\n      };\n    };\n\n    var BarMutation = function () {\n      var events = Events.create({\n        drag: Event([\n          'xDelta',\n          'yDelta',\n          'target'\n        ])\n      });\n      var target = Option.none();\n      var delegate = Mutation();\n      delegate.events.drag.bind(function (event) {\n        target.each(function (t) {\n          events.trigger.drag(event.xDelta(), event.yDelta(), t);\n        });\n      });\n      var assign = function (t) {\n        target = Option.some(t);\n      };\n      var get = function () {\n        return target;\n      };\n      return {\n        assign: assign,\n        get: get,\n        mutate: delegate.mutate,\n        events: events.registry\n      };\n    };\n\n    var isContentEditableTrue = function (elm) {\n      return get(elm, 'contenteditable') === 'true';\n    };\n    var findClosestContentEditable = function (target, isRoot) {\n      return closest$1(target, '[contenteditable]', isRoot);\n    };\n\n    var resizeBarDragging = Styles.resolve('resizer-bar-dragging');\n    var BarManager = function (wire, direction, hdirection) {\n      var mutation = BarMutation();\n      var resizing = Dragger.transform(mutation, {});\n      var hoverTable = Option.none();\n      var getResizer = function (element, type) {\n        return Option.from(get(element, type));\n      };\n      mutation.events.drag.bind(function (event) {\n        getResizer(event.target(), 'data-row').each(function (_dataRow) {\n          var currentRow = CellUtils.getInt(event.target(), 'top');\n          set$1(event.target(), 'top', currentRow + event.yDelta() + 'px');\n        });\n        getResizer(event.target(), 'data-column').each(function (_dataCol) {\n          var currentCol = CellUtils.getInt(event.target(), 'left');\n          set$1(event.target(), 'left', currentCol + event.xDelta() + 'px');\n        });\n      });\n      var getDelta = function (target, dir) {\n        var newX = CellUtils.getInt(target, dir);\n        var oldX = parseInt(get(target, 'data-initial-' + dir), 10);\n        return newX - oldX;\n      };\n      resizing.events.stop.bind(function () {\n        mutation.get().each(function (target) {\n          hoverTable.each(function (table) {\n            getResizer(target, 'data-row').each(function (row) {\n              var delta = getDelta(target, 'top');\n              remove(target, 'data-initial-top');\n              events.trigger.adjustHeight(table, delta, parseInt(row, 10));\n            });\n            getResizer(target, 'data-column').each(function (column) {\n              var delta = getDelta(target, 'left');\n              remove(target, 'data-initial-left');\n              events.trigger.adjustWidth(table, delta, parseInt(column, 10));\n            });\n            Bars.refresh(wire, table, hdirection, direction);\n          });\n        });\n      });\n      var handler = function (target, dir) {\n        events.trigger.startAdjust();\n        mutation.assign(target);\n        set(target, 'data-initial-' + dir, parseInt(get$1(target, dir), 10));\n        add$2(target, resizeBarDragging);\n        set$1(target, 'opacity', '0.2');\n        resizing.go(wire.parent());\n      };\n      var mousedown = bind$2(wire.parent(), 'mousedown', function (event) {\n        if (Bars.isRowBar(event.target())) {\n          handler(event.target(), 'top');\n        }\n        if (Bars.isColBar(event.target())) {\n          handler(event.target(), 'left');\n        }\n      });\n      var isRoot = function (e) {\n        return eq(e, wire.view());\n      };\n      var findClosestEditableTable = function (target) {\n        return closest$1(target, 'table', isRoot).filter(function (table) {\n          return findClosestContentEditable(table, isRoot).exists(isContentEditableTrue);\n        });\n      };\n      var mouseover = bind$2(wire.view(), 'mouseover', function (event) {\n        findClosestEditableTable(event.target()).fold(function () {\n          if (inBody(event.target())) {\n            Bars.destroy(wire);\n          }\n        }, function (table) {\n          hoverTable = Option.some(table);\n          Bars.refresh(wire, table, hdirection, direction);\n        });\n      });\n      var destroy = function () {\n        mousedown.unbind();\n        mouseover.unbind();\n        resizing.destroy();\n        Bars.destroy(wire);\n      };\n      var refresh = function (tbl) {\n        Bars.refresh(wire, tbl, hdirection, direction);\n      };\n      var events = Events.create({\n        adjustHeight: Event([\n          'table',\n          'delta',\n          'row'\n        ]),\n        adjustWidth: Event([\n          'table',\n          'delta',\n          'column'\n        ]),\n        startAdjust: Event([])\n      });\n      return {\n        destroy: destroy,\n        refresh: refresh,\n        on: resizing.on,\n        off: resizing.off,\n        hideBars: curry(Bars.hide, wire),\n        showBars: curry(Bars.show, wire),\n        events: events.registry\n      };\n    };\n\n    var create$2 = function (wire, vdirection) {\n      var hdirection = BarPositions.height;\n      var manager = BarManager(wire, vdirection, hdirection);\n      var events = Events.create({\n        beforeResize: Event(['table']),\n        afterResize: Event(['table']),\n        startDrag: Event([])\n      });\n      manager.events.adjustHeight.bind(function (event) {\n        events.trigger.beforeResize(event.table());\n        var delta = hdirection.delta(event.delta(), event.table());\n        Adjustments.adjustHeight(event.table(), delta, event.row(), hdirection);\n        events.trigger.afterResize(event.table());\n      });\n      manager.events.startAdjust.bind(function (event) {\n        events.trigger.startDrag();\n      });\n      manager.events.adjustWidth.bind(function (event) {\n        events.trigger.beforeResize(event.table());\n        var delta = vdirection.delta(event.delta(), event.table());\n        Adjustments.adjustWidth(event.table(), delta, event.column(), vdirection);\n        events.trigger.afterResize(event.table());\n      });\n      return {\n        on: manager.on,\n        off: manager.off,\n        hideBars: manager.hideBars,\n        showBars: manager.showBars,\n        destroy: manager.destroy,\n        events: events.registry\n      };\n    };\n    var TableResize = { create: create$2 };\n\n    var createContainer = function () {\n      var container = Element.fromTag('div');\n      setAll$1(container, {\n        position: 'static',\n        height: '0',\n        width: '0',\n        padding: '0',\n        margin: '0',\n        border: '0'\n      });\n      append(body(), container);\n      return container;\n    };\n    var get$8 = function (editor, container) {\n      return editor.inline ? ResizeWire.body(getBody$1(editor), createContainer()) : ResizeWire.only(Element.fromDom(editor.getDoc()));\n    };\n    var remove$6 = function (editor, wire) {\n      if (editor.inline) {\n        remove$2(wire.parent());\n      }\n    };\n    var TableWire = {\n      get: get$8,\n      remove: remove$6\n    };\n\n    var ResizeHandler = function (editor) {\n      var selectionRng = Option.none();\n      var resize = Option.none();\n      var wire = Option.none();\n      var percentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n      var startW, startRawW;\n      var isTable = function (elm) {\n        return elm.nodeName === 'TABLE';\n      };\n      var getRawWidth = function (elm) {\n        return editor.dom.getStyle(elm, 'width') || editor.dom.getAttrib(elm, 'width');\n      };\n      var lazyResize = function () {\n        return resize;\n      };\n      var lazyWire = function () {\n        return wire.getOr(ResizeWire.only(Element.fromDom(editor.getBody())));\n      };\n      var destroy = function () {\n        resize.each(function (sz) {\n          sz.destroy();\n        });\n        wire.each(function (w) {\n          TableWire.remove(editor, w);\n        });\n      };\n      editor.on('init', function () {\n        var direction = TableDirection(Direction.directionAt);\n        var rawWire = TableWire.get(editor);\n        wire = Option.some(rawWire);\n        if (hasObjectResizing(editor) && hasTableResizeBars(editor)) {\n          var sz = TableResize.create(rawWire, direction);\n          sz.on();\n          sz.events.startDrag.bind(function (event) {\n            selectionRng = Option.some(editor.selection.getRng());\n          });\n          sz.events.beforeResize.bind(function (event) {\n            var rawTable = event.table().dom();\n            fireObjectResizeStart(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable));\n          });\n          sz.events.afterResize.bind(function (event) {\n            var table = event.table();\n            var rawTable = table.dom();\n            removeDataStyle(table);\n            selectionRng.each(function (rng) {\n              editor.selection.setRng(rng);\n              editor.focus();\n            });\n            fireObjectResized(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable));\n            editor.undoManager.add();\n          });\n          resize = Option.some(sz);\n        }\n      });\n      editor.on('ObjectResizeStart', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          startW = e.width;\n          startRawW = getRawWidth(targetElm);\n        }\n      });\n      editor.on('ObjectResized', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          var table = targetElm;\n          if (percentageBasedSizeRegex.test(startRawW)) {\n            var percentW = parseFloat(percentageBasedSizeRegex.exec(startRawW)[1]);\n            var targetPercentW = e.width * percentW / startW;\n            editor.dom.setStyle(table, 'width', targetPercentW + '%');\n          } else {\n            var newCellSizes_1 = [];\n            global$1.each(table.rows, function (row) {\n              global$1.each(row.cells, function (cell) {\n                var width = editor.dom.getStyle(cell, 'width', true);\n                newCellSizes_1.push({\n                  cell: cell,\n                  width: width\n                });\n              });\n            });\n            global$1.each(newCellSizes_1, function (newCellSize) {\n              editor.dom.setStyle(newCellSize.cell, 'width', newCellSize.width);\n              editor.dom.setAttrib(newCellSize.cell, 'width', null);\n            });\n          }\n        }\n      });\n      return {\n        lazyResize: lazyResize,\n        lazyWire: lazyWire,\n        destroy: destroy\n      };\n    };\n\n    var adt$1 = Adt.generate([\n      { none: ['current'] },\n      { first: ['current'] },\n      {\n        middle: [\n          'current',\n          'target'\n        ]\n      },\n      { last: ['current'] }\n    ]);\n    var none$1 = function (current) {\n      if (current === void 0) {\n        current = undefined;\n      }\n      return adt$1.none(current);\n    };\n    var CellLocation = __assign(__assign({}, adt$1), { none: none$1 });\n\n    var detect$4 = function (current, isRoot) {\n      return TableLookup.table(current, isRoot).bind(function (table) {\n        var all = TableLookup.cells(table);\n        var index = findIndex(all, function (x) {\n          return eq(current, x);\n        });\n        return index.map(function (ind) {\n          return {\n            index: constant(ind),\n            all: constant(all)\n          };\n        });\n      });\n    };\n    var next = function (current, isRoot) {\n      var detection = detect$4(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none(current);\n      }, function (info) {\n        return info.index() + 1 < info.all().length ? CellLocation.middle(current, info.all()[info.index() + 1]) : CellLocation.last(current);\n      });\n    };\n    var prev = function (current, isRoot) {\n      var detection = detect$4(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none();\n      }, function (info) {\n        return info.index() - 1 >= 0 ? CellLocation.middle(current, info.all()[info.index() - 1]) : CellLocation.first(current);\n      });\n    };\n    var CellNavigation = {\n      next: next,\n      prev: prev\n    };\n\n    var create$3 = Immutable('start', 'soffset', 'finish', 'foffset');\n    var SimRange = { create: create$3 };\n\n    var adt$2 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata$1 = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$2 = adt$2.before;\n    var on = adt$2.on;\n    var after$2 = adt$2.after;\n    var Situ = {\n      before: before$2,\n      on: on,\n      after: after$2,\n      cata: cata$1,\n      getStart: getStart\n    };\n\n    var adt$3 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$3.exact(simRange.start(), simRange.soffset(), simRange.finish(), simRange.foffset());\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return Element.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$3.domRange;\n    var relative = adt$3.relative;\n    var exact = adt$3.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var Selection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var selectNodeContents = function (win, element) {\n      var rng = win.document.createRange();\n      selectNodeContentsUsing(rng, element);\n      return rng;\n    };\n    var selectNodeContentsUsing = function (rng, element) {\n      rng.selectNodeContents(element.dom());\n    };\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom());\n      }, function (e, o) {\n        rng.setStart(e.dom(), o);\n      }, function (e) {\n        rng.setStartAfter(e.dom());\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom());\n      }, function (e, o) {\n        rng.setEnd(e.dom(), o);\n      }, function (e) {\n        rng.setEndAfter(e.dom());\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom(), soffset);\n      rng.setEnd(finish.dom(), foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: constant(rect.left),\n        top: constant(rect.top),\n        right: constant(rect.right),\n        bottom: constant(rect.bottom),\n        width: constant(rect.width),\n        height: constant(rect.height)\n      };\n    };\n    var getFirstRect = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Option.some(rect).map(toRect) : Option.none();\n    };\n\n    var adt$4 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(Element.fromDom(range.startContainer), range.startOffset, Element.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant(rng),\n            rtl: Option.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Option.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Option.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$4.rtl(Element.fromDom(rev.endContainer), rev.endOffset, Element.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$4.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$4.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom(), soffset);\n          rng.setEnd(finish.dom(), foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom(), foffset);\n          rng.setEnd(start.dom(), soffset);\n          return rng;\n        }\n      });\n    };\n\n    var searchForPoint = function (rectForOffset, x, y, maxX, length) {\n      if (length === 0) {\n        return 0;\n      } else if (x === maxX) {\n        return length - 1;\n      }\n      var xDelta = maxX;\n      for (var i = 1; i < length; i++) {\n        var rect = rectForOffset(i);\n        var curDeltaX = Math.abs(x - rect.left);\n        if (y <= rect.bottom) {\n          if (y < rect.top || curDeltaX > xDelta) {\n            return i - 1;\n          } else {\n            xDelta = curDeltaX;\n          }\n        }\n      }\n      return 0;\n    };\n    var inRect = function (rect, x, y) {\n      return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n    };\n\n    var locateOffset = function (doc, textnode, x, y, rect) {\n      var rangeForOffset = function (o) {\n        var r = doc.dom().createRange();\n        r.setStart(textnode.dom(), o);\n        r.collapse(true);\n        return r;\n      };\n      var rectForOffset = function (o) {\n        var r = rangeForOffset(o);\n        return r.getBoundingClientRect();\n      };\n      var length = get$2(textnode).length;\n      var offset = searchForPoint(rectForOffset, x, y, rect.right, length);\n      return rangeForOffset(offset);\n    };\n    var locate = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rects = r.getClientRects();\n      var foundRect = findMap(rects, function (rect) {\n        return inRect(rect, x, y) ? Option.some(rect) : Option.none();\n      });\n      return foundRect.map(function (rect) {\n        return locateOffset(doc, node, x, y, rect);\n      });\n    };\n\n    var searchInChildren = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      var nodes = children(node);\n      return findMap(nodes, function (n) {\n        r.selectNode(n.dom());\n        return inRect(r.getBoundingClientRect(), x, y) ? locateNode(doc, n, x, y) : Option.none();\n      });\n    };\n    var locateNode = function (doc, node, x, y) {\n      return isText(node) ? locate(doc, node, x, y) : searchInChildren(doc, node, x, y);\n    };\n    var locate$1 = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locateNode(doc, node, boundedX, boundedY);\n    };\n\n    var COLLAPSE_TO_LEFT = true;\n    var COLLAPSE_TO_RIGHT = false;\n    var getCollapseDirection = function (rect, x) {\n      return x - rect.left < rect.right - x ? COLLAPSE_TO_LEFT : COLLAPSE_TO_RIGHT;\n    };\n    var createCollapsedNode = function (doc, target, collapseDirection) {\n      var r = doc.dom().createRange();\n      r.selectNode(target.dom());\n      r.collapse(collapseDirection);\n      return r;\n    };\n    var locateInElement = function (doc, node, x) {\n      var cursorRange = doc.dom().createRange();\n      cursorRange.selectNode(node.dom());\n      var rect = cursorRange.getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      var f = collapseDirection === COLLAPSE_TO_LEFT ? first : last$1;\n      return f(node).map(function (target) {\n        return createCollapsedNode(doc, target, collapseDirection);\n      });\n    };\n    var locateInEmpty = function (doc, node, x) {\n      var rect = node.dom().getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      return Option.some(createCollapsedNode(doc, node, collapseDirection));\n    };\n    var search = function (doc, node, x) {\n      var f = children(node).length === 0 ? locateInEmpty : locateInElement;\n      return f(doc, node, x);\n    };\n\n    var caretPositionFromPoint = function (doc, x, y) {\n      return Option.from(doc.dom().caretPositionFromPoint(x, y)).bind(function (pos) {\n        if (pos.offsetNode === null) {\n          return Option.none();\n        }\n        var r = doc.dom().createRange();\n        r.setStart(pos.offsetNode, pos.offset);\n        r.collapse();\n        return Option.some(r);\n      });\n    };\n    var caretRangeFromPoint = function (doc, x, y) {\n      return Option.from(doc.dom().caretRangeFromPoint(x, y));\n    };\n    var searchTextNodes = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locate$1(doc, node, boundedX, boundedY);\n    };\n    var searchFromPoint = function (doc, x, y) {\n      return Element.fromPoint(doc, x, y).bind(function (elem) {\n        var fallback = function () {\n          return search(doc, elem, x);\n        };\n        return children(elem).length === 0 ? fallback() : searchTextNodes(doc, elem, x, y).orThunk(fallback);\n      });\n    };\n    var availableSearch = document.caretPositionFromPoint ? caretPositionFromPoint : document.caretRangeFromPoint ? caretRangeFromPoint : searchFromPoint;\n    var fromPoint$1 = function (win, x, y) {\n      var doc = Element.fromDom(win.document);\n      return availableSearch(doc, x, y).map(function (rng) {\n        return SimRange.create(Element.fromDom(rng.startContainer), rng.startOffset, Element.fromDom(rng.endContainer), rng.endOffset);\n      });\n    };\n\n    var beforeSpecial = function (element, offset) {\n      var name$1 = name(element);\n      if ('input' === name$1) {\n        return Situ.after(element);\n      } else if (!contains([\n          'br',\n          'img'\n        ], name$1)) {\n        return Situ.on(element, offset);\n      } else {\n        return offset === 0 ? Situ.before(element) : Situ.after(element);\n      }\n    };\n    var preprocessRelative = function (startSitu, finishSitu) {\n      var start = startSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      var finish = finishSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      return Selection.relative(start, finish);\n    };\n    var preprocessExact = function (start, soffset, finish, foffset) {\n      var startSitu = beforeSpecial(start, soffset);\n      var finishSitu = beforeSpecial(finish, foffset);\n      return Selection.relative(startSitu, finishSitu);\n    };\n    var preprocess = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          var start = Element.fromDom(rng.startContainer);\n          var finish = Element.fromDom(rng.endContainer);\n          return preprocessExact(start, rng.startOffset, finish, rng.endOffset);\n        },\n        relative: preprocessRelative,\n        exact: preprocessExact\n      });\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner(start);\n      var rng = doc.dom().createRange();\n      rng.setStart(start.dom(), soffset);\n      rng.setEnd(finish.dom(), foffset);\n      return rng;\n    };\n    var after$3 = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var doSetNativeRange = function (win, rng) {\n      Option.from(win.getSelection()).each(function (selection) {\n        selection.removeAllRanges();\n        selection.addRange(rng);\n      });\n    };\n    var doSetRange = function (win, start, soffset, finish, foffset) {\n      var rng = exactToNative(win, start, soffset, finish, foffset);\n      doSetNativeRange(win, rng);\n    };\n    var setLegacyRtlRange = function (win, selection, start, soffset, finish, foffset) {\n      selection.collapse(start.dom(), soffset);\n      selection.extend(finish.dom(), foffset);\n    };\n    var setRangeFromRelative = function (win, relative) {\n      return diagnose(win, relative).match({\n        ltr: function (start, soffset, finish, foffset) {\n          doSetRange(win, start, soffset, finish, foffset);\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var selection = win.getSelection();\n          if (selection.setBaseAndExtent) {\n            selection.setBaseAndExtent(start.dom(), soffset, finish.dom(), foffset);\n          } else if (selection.extend) {\n            try {\n              setLegacyRtlRange(win, selection, start, soffset, finish, foffset);\n            } catch (e) {\n              doSetRange(win, finish, foffset, start, soffset);\n            }\n          } else {\n            doSetRange(win, finish, foffset, start, soffset);\n          }\n        }\n      });\n    };\n    var setExact = function (win, start, soffset, finish, foffset) {\n      var relative = preprocessExact(start, soffset, finish, foffset);\n      setRangeFromRelative(win, relative);\n    };\n    var setRelative = function (win, startSitu, finishSitu) {\n      var relative = preprocessRelative(startSitu, finishSitu);\n      setRangeFromRelative(win, relative);\n    };\n    var toNative = function (selection) {\n      var win = Selection.getWin(selection).dom();\n      var getDomRange = function (start, soffset, finish, foffset) {\n        return exactToNative(win, start, soffset, finish, foffset);\n      };\n      var filtered = preprocess(selection);\n      return diagnose(win, filtered).match({\n        ltr: getDomRange,\n        rtl: getDomRange\n      });\n    };\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Option.some(SimRange.create(Element.fromDom(firstRng.startContainer), firstRng.startOffset, Element.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Option.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      var anchor = Element.fromDom(selection.anchorNode);\n      var focus = Element.fromDom(selection.focusNode);\n      return after$3(anchor, selection.anchorOffset, focus, selection.focusOffset) ? Option.some(SimRange.create(anchor, selection.anchorOffset, focus, selection.focusOffset)) : readRange(selection);\n    };\n    var setToElement = function (win, element) {\n      var rng = selectNodeContents(win, element);\n      doSetNativeRange(win, rng);\n    };\n    var getExact = function (win) {\n      return Option.from(win.getSelection()).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var get$9 = function (win) {\n      return getExact(win).map(function (range) {\n        return Selection.exact(range.start(), range.soffset(), range.finish(), range.foffset());\n      });\n    };\n    var getFirstRect$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect(rng);\n    };\n    var getAtPoint = function (win, x, y) {\n      return fromPoint$1(win, x, y);\n    };\n    var clear = function (win) {\n      var selection = win.getSelection();\n      selection.removeAllRanges();\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var forward = function (editor, isRoot, cell, lazyWire) {\n      return go(editor, isRoot, CellNavigation.next(cell), lazyWire);\n    };\n    var backward = function (editor, isRoot, cell, lazyWire) {\n      return go(editor, isRoot, CellNavigation.prev(cell), lazyWire);\n    };\n    var getCellFirstCursorPosition = function (editor, cell) {\n      var selection = Selection.exact(cell, 0, cell, 0);\n      return toNative(selection);\n    };\n    var getNewRowCursorPosition = function (editor, table) {\n      var rows = descendants$1(table, 'tr');\n      return last(rows).bind(function (last) {\n        return descendant$1(last, 'td,th').map(function (first) {\n          return getCellFirstCursorPosition(editor, first);\n        });\n      });\n    };\n    var go = function (editor, isRoot, cell, actions, lazyWire) {\n      return cell.fold(Option.none, Option.none, function (current, next) {\n        return first(next).map(function (cell) {\n          return getCellFirstCursorPosition(editor, cell);\n        });\n      }, function (current) {\n        return TableLookup.table(current, isRoot).bind(function (table) {\n          var targets = TableTargets.noMenu(current);\n          editor.undoManager.transact(function () {\n            actions.insertRowsAfter(table, targets);\n          });\n          return getNewRowCursorPosition(editor, table);\n        });\n      });\n    };\n    var rootElements = [\n      'table',\n      'li',\n      'dl'\n    ];\n    var handle$1 = function (event, editor, actions, lazyWire) {\n      if (event.keyCode === global$3.TAB) {\n        var body_1 = getBody$1(editor);\n        var isRoot_1 = function (element) {\n          var name$1 = name(element);\n          return eq(element, body_1) || contains(rootElements, name$1);\n        };\n        var rng = editor.selection.getRng();\n        if (rng.collapsed) {\n          var start = Element.fromDom(rng.startContainer);\n          TableLookup.cell(start, isRoot_1).each(function (cell) {\n            event.preventDefault();\n            var navigation = event.shiftKey ? backward : forward;\n            var rng = navigation(editor, isRoot_1, cell, actions, lazyWire);\n            rng.each(function (range) {\n              editor.selection.setRng(range);\n            });\n          });\n        }\n      }\n    };\n    var TabContext = { handle: handle$1 };\n\n    var create$4 = Immutable('selection', 'kill');\n    var Response = { create: create$4 };\n\n    var create$5 = function (start, soffset, finish, foffset) {\n      return {\n        start: constant(Situ.on(start, soffset)),\n        finish: constant(Situ.on(finish, foffset))\n      };\n    };\n    var Situs = { create: create$5 };\n\n    var convertToRange = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return SimRange.create(Element.fromDom(rng.startContainer), rng.startOffset, Element.fromDom(rng.endContainer), rng.endOffset);\n    };\n    var makeSitus = Situs.create;\n    var Util = {\n      convertToRange: convertToRange,\n      makeSitus: makeSitus\n    };\n\n    var sync = function (container, isRoot, start, soffset, finish, foffset, selectRange) {\n      if (!(eq(start, finish) && soffset === foffset)) {\n        return closest$1(start, 'td,th', isRoot).bind(function (s) {\n          return closest$1(finish, 'td,th', isRoot).bind(function (f) {\n            return detect$5(container, isRoot, s, f, selectRange);\n          });\n        });\n      } else {\n        return Option.none();\n      }\n    };\n    var detect$5 = function (container, isRoot, start, finish, selectRange) {\n      if (!eq(start, finish)) {\n        return CellSelection.identify(start, finish, isRoot).bind(function (cellSel) {\n          var boxes = cellSel.boxes().getOr([]);\n          if (boxes.length > 0) {\n            selectRange(container, boxes, cellSel.start(), cellSel.finish());\n            return Option.some(Response.create(Option.some(Util.makeSitus(start, 0, start, getEnd(start))), true));\n          } else {\n            return Option.none();\n          }\n        });\n      } else {\n        return Option.none();\n      }\n    };\n    var update = function (rows, columns, container, selected, annotations) {\n      var updateSelection = function (newSels) {\n        annotations.clear(container);\n        annotations.selectRange(container, newSels.boxes(), newSels.start(), newSels.finish());\n        return newSels.boxes();\n      };\n      return CellSelection.shiftSelection(selected, rows, columns, annotations.firstSelectedSelector(), annotations.lastSelectedSelector()).map(updateSelection);\n    };\n    var KeySelection = {\n      sync: sync,\n      detect: detect$5,\n      update: update\n    };\n\n    var traverse = Immutable('item', 'mode');\n    var backtrack = function (universe, item, _direction, transition) {\n      if (transition === void 0) {\n        transition = sidestep;\n      }\n      return universe.property().parent(item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var sidestep = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      return direction.sibling(universe, item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var advance = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      var children = universe.property().children(item);\n      var result = direction.first(children);\n      return result.map(function (r) {\n        return traverse(r, transition);\n      });\n    };\n    var successors = [\n      {\n        current: backtrack,\n        next: sidestep,\n        fallback: Option.none()\n      },\n      {\n        current: sidestep,\n        next: advance,\n        fallback: Option.some(backtrack)\n      },\n      {\n        current: advance,\n        next: advance,\n        fallback: Option.some(sidestep)\n      }\n    ];\n    var go$1 = function (universe, item, mode, direction, rules) {\n      if (rules === void 0) {\n        rules = successors;\n      }\n      var ruleOpt = find(rules, function (succ) {\n        return succ.current === mode;\n      });\n      return ruleOpt.bind(function (rule) {\n        return rule.current(universe, item, direction, rule.next).orThunk(function () {\n          return rule.fallback.bind(function (fb) {\n            return go$1(universe, item, fb, direction);\n          });\n        });\n      });\n    };\n\n    var left = function () {\n      var sibling = function (universe, item) {\n        return universe.query().prevSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Option.some(children[children.length - 1]) : Option.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var right = function () {\n      var sibling = function (universe, item) {\n        return universe.query().nextSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Option.some(children[0]) : Option.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var Walkers = {\n      left: left,\n      right: right\n    };\n\n    var hone = function (universe, item, predicate, mode, direction, isRoot) {\n      var next = go$1(universe, item, mode, direction);\n      return next.bind(function (n) {\n        if (isRoot(n.item())) {\n          return Option.none();\n        } else {\n          return predicate(n.item()) ? Option.some(n.item()) : hone(universe, n.item(), predicate, n.mode(), direction, isRoot);\n        }\n      });\n    };\n    var left$1 = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.left(), isRoot);\n    };\n    var right$1 = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.right(), isRoot);\n    };\n\n    var isLeaf = function (universe) {\n      return function (element) {\n        return universe.property().children(element).length === 0;\n      };\n    };\n    var before$3 = function (universe, item, isRoot) {\n      return seekLeft(universe, item, isLeaf(universe), isRoot);\n    };\n    var after$4 = function (universe, item, isRoot) {\n      return seekRight(universe, item, isLeaf(universe), isRoot);\n    };\n    var seekLeft = left$1;\n    var seekRight = right$1;\n\n    var universe$2 = DomUniverse();\n    var before$4 = function (element, isRoot) {\n      return before$3(universe$2, element, isRoot);\n    };\n    var after$5 = function (element, isRoot) {\n      return after$4(universe$2, element, isRoot);\n    };\n    var seekLeft$1 = function (element, predicate, isRoot) {\n      return seekLeft(universe$2, element, predicate, isRoot);\n    };\n    var seekRight$1 = function (element, predicate, isRoot) {\n      return seekRight(universe$2, element, predicate, isRoot);\n    };\n\n    var ancestor$2 = function (scope, predicate, isRoot) {\n      return ancestor(scope, predicate, isRoot).isSome();\n    };\n\n    var point = Immutable('element', 'offset');\n    var delta = Immutable('element', 'deltaOffset');\n    var range$2 = Immutable('element', 'start', 'finish');\n    var points = Immutable('begin', 'end');\n    var text = Immutable('element', 'text');\n\n    var adt$5 = Adt.generate([\n      { none: ['message'] },\n      { success: [] },\n      { failedUp: ['cell'] },\n      { failedDown: ['cell'] }\n    ]);\n    var isOverlapping = function (bridge, before, after) {\n      var beforeBounds = bridge.getRect(before);\n      var afterBounds = bridge.getRect(after);\n      return afterBounds.right > beforeBounds.left && afterBounds.left < beforeBounds.right;\n    };\n    var isRow = function (elem) {\n      return closest$1(elem, 'tr');\n    };\n    var verify = function (bridge, before, beforeOffset, after, afterOffset, failure, isRoot) {\n      return closest$1(after, 'td,th', isRoot).bind(function (afterCell) {\n        return closest$1(before, 'td,th', isRoot).map(function (beforeCell) {\n          if (!eq(afterCell, beforeCell)) {\n            return DomParent.sharedOne(isRow, [\n              afterCell,\n              beforeCell\n            ]).fold(function () {\n              return isOverlapping(bridge, beforeCell, afterCell) ? adt$5.success() : failure(beforeCell);\n            }, function (_sharedRow) {\n              return failure(beforeCell);\n            });\n          } else {\n            return eq(after, afterCell) && getEnd(afterCell) === afterOffset ? failure(beforeCell) : adt$5.none('in same cell');\n          }\n        });\n      }).getOr(adt$5.none('default'));\n    };\n    var cata$2 = function (subject, onNone, onSuccess, onFailedUp, onFailedDown) {\n      return subject.fold(onNone, onSuccess, onFailedUp, onFailedDown);\n    };\n    var BeforeAfter = __assign(__assign({}, adt$5), {\n      verify: verify,\n      cata: cata$2\n    });\n\n    var inAncestor = Immutable('ancestor', 'descendants', 'element', 'index');\n    var inParent = Immutable('parent', 'children', 'element', 'index');\n    var indexInParent = function (element) {\n      return parent(element).bind(function (parent) {\n        var children$1 = children(parent);\n        return indexOf(children$1, element).map(function (index) {\n          return inParent(parent, children$1, element, index);\n        });\n      });\n    };\n    var indexOf = function (elements, element) {\n      return findIndex(elements, curry(eq, element));\n    };\n\n    var isBr = function (elem) {\n      return name(elem) === 'br';\n    };\n    var gatherer = function (cand, gather, isRoot) {\n      return gather(cand, isRoot).bind(function (target) {\n        return isText(target) && get$2(target).trim().length === 0 ? gatherer(target, gather, isRoot) : Option.some(target);\n      });\n    };\n    var handleBr = function (isRoot, element, direction) {\n      return direction.traverse(element).orThunk(function () {\n        return gatherer(element, direction.gather, isRoot);\n      }).map(direction.relative);\n    };\n    var findBr = function (element, offset) {\n      return child(element, offset).filter(isBr).orThunk(function () {\n        return child(element, offset - 1).filter(isBr);\n      });\n    };\n    var handleParent = function (isRoot, element, offset, direction) {\n      return findBr(element, offset).bind(function (br) {\n        return direction.traverse(br).fold(function () {\n          return gatherer(br, direction.gather, isRoot).map(direction.relative);\n        }, function (adjacent) {\n          return indexInParent(adjacent).map(function (info) {\n            return Situ.on(info.parent(), info.index());\n          });\n        });\n      });\n    };\n    var tryBr = function (isRoot, element, offset, direction) {\n      var target = isBr(element) ? handleBr(isRoot, element, direction) : handleParent(isRoot, element, offset, direction);\n      return target.map(function (tgt) {\n        return {\n          start: constant(tgt),\n          finish: constant(tgt)\n        };\n      });\n    };\n    var process = function (analysis) {\n      return BeforeAfter.cata(analysis, function (message) {\n        return Option.none();\n      }, function () {\n        return Option.none();\n      }, function (cell) {\n        return Option.some(point(cell, 0));\n      }, function (cell) {\n        return Option.some(point(cell, getEnd(cell)));\n      });\n    };\n    var BrTags = {\n      tryBr: tryBr,\n      process: process\n    };\n\n    var nu$3 = MixedBag([\n      'left',\n      'top',\n      'right',\n      'bottom'\n    ], []);\n    var moveDown = function (caret, amount) {\n      return nu$3({\n        left: caret.left(),\n        top: caret.top() + amount,\n        right: caret.right(),\n        bottom: caret.bottom() + amount\n      });\n    };\n    var moveUp = function (caret, amount) {\n      return nu$3({\n        left: caret.left(),\n        top: caret.top() - amount,\n        right: caret.right(),\n        bottom: caret.bottom() - amount\n      });\n    };\n    var moveBottomTo = function (caret, bottom) {\n      var height = caret.bottom() - caret.top();\n      return nu$3({\n        left: caret.left(),\n        top: bottom - height,\n        right: caret.right(),\n        bottom: bottom\n      });\n    };\n    var moveTopTo = function (caret, top) {\n      var height = caret.bottom() - caret.top();\n      return nu$3({\n        left: caret.left(),\n        top: top,\n        right: caret.right(),\n        bottom: top + height\n      });\n    };\n    var translate = function (caret, xDelta, yDelta) {\n      return nu$3({\n        left: caret.left() + xDelta,\n        top: caret.top() + yDelta,\n        right: caret.right() + xDelta,\n        bottom: caret.bottom() + yDelta\n      });\n    };\n    var getTop$1 = function (caret) {\n      return caret.top();\n    };\n    var getBottom = function (caret) {\n      return caret.bottom();\n    };\n    var toString = function (caret) {\n      return '(' + caret.left() + ', ' + caret.top() + ') -> (' + caret.right() + ', ' + caret.bottom() + ')';\n    };\n    var Carets = {\n      nu: nu$3,\n      moveUp: moveUp,\n      moveDown: moveDown,\n      moveBottomTo: moveBottomTo,\n      moveTopTo: moveTopTo,\n      getTop: getTop$1,\n      getBottom: getBottom,\n      translate: translate,\n      toString: toString\n    };\n\n    var getPartialBox = function (bridge, element, offset) {\n      if (offset >= 0 && offset < getEnd(element)) {\n        return bridge.getRangedRect(element, offset, element, offset + 1);\n      } else if (offset > 0) {\n        return bridge.getRangedRect(element, offset - 1, element, offset);\n      }\n      return Option.none();\n    };\n    var toCaret = function (rect) {\n      return Carets.nu({\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom\n      });\n    };\n    var getElemBox = function (bridge, element) {\n      return Option.some(bridge.getRect(element));\n    };\n    var getBoxAt = function (bridge, element, offset) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return getPartialBox(bridge, element, offset).map(toCaret);\n      } else {\n        return Option.none();\n      }\n    };\n    var getEntireBox = function (bridge, element) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return bridge.getRangedRect(element, 0, element, getEnd(element)).map(toCaret);\n      } else {\n        return Option.none();\n      }\n    };\n    var Rectangles = {\n      getBoxAt: getBoxAt,\n      getEntireBox: getEntireBox\n    };\n\n    var JUMP_SIZE = 5;\n    var NUM_RETRIES = 100;\n    var adt$6 = Adt.generate([\n      { none: [] },\n      { retry: ['caret'] }\n    ]);\n    var isOutside = function (caret, box) {\n      return caret.left() < box.left() || Math.abs(box.right() - caret.left()) < 1 || caret.left() > box.right();\n    };\n    var inOutsideBlock = function (bridge, element, caret) {\n      return closest(element, DomStructure.isBlock).fold(constant(false), function (cell) {\n        return Rectangles.getEntireBox(bridge, cell).exists(function (box) {\n          return isOutside(caret, box);\n        });\n      });\n    };\n    var adjustDown = function (bridge, element, guessBox, original, caret) {\n      var lowerCaret = Carets.moveDown(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.bottom() - original.bottom()) < 1) {\n        return adt$6.retry(lowerCaret);\n      } else if (guessBox.top() > caret.bottom()) {\n        return adt$6.retry(lowerCaret);\n      } else if (guessBox.top() === caret.bottom()) {\n        return adt$6.retry(Carets.moveDown(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt$6.retry(Carets.translate(lowerCaret, JUMP_SIZE, 0)) : adt$6.none();\n      }\n    };\n    var adjustUp = function (bridge, element, guessBox, original, caret) {\n      var higherCaret = Carets.moveUp(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.top() - original.top()) < 1) {\n        return adt$6.retry(higherCaret);\n      } else if (guessBox.bottom() < caret.top()) {\n        return adt$6.retry(higherCaret);\n      } else if (guessBox.bottom() === caret.top()) {\n        return adt$6.retry(Carets.moveUp(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt$6.retry(Carets.translate(higherCaret, JUMP_SIZE, 0)) : adt$6.none();\n      }\n    };\n    var upMovement = {\n      point: Carets.getTop,\n      adjuster: adjustUp,\n      move: Carets.moveUp,\n      gather: before$4\n    };\n    var downMovement = {\n      point: Carets.getBottom,\n      adjuster: adjustDown,\n      move: Carets.moveDown,\n      gather: after$5\n    };\n    var isAtTable = function (bridge, x, y) {\n      return bridge.elementFromPoint(x, y).filter(function (elm) {\n        return name(elm) === 'table';\n      }).isSome();\n    };\n    var adjustForTable = function (bridge, movement, original, caret, numRetries) {\n      return adjustTil(bridge, movement, original, movement.move(caret, JUMP_SIZE), numRetries);\n    };\n    var adjustTil = function (bridge, movement, original, caret, numRetries) {\n      if (numRetries === 0) {\n        return Option.some(caret);\n      }\n      if (isAtTable(bridge, caret.left(), movement.point(caret))) {\n        return adjustForTable(bridge, movement, original, caret, numRetries - 1);\n      }\n      return bridge.situsFromPoint(caret.left(), movement.point(caret)).bind(function (guess) {\n        return guess.start().fold(Option.none, function (element) {\n          return Rectangles.getEntireBox(bridge, element).bind(function (guessBox) {\n            return movement.adjuster(bridge, element, guessBox, original, caret).fold(Option.none, function (newCaret) {\n              return adjustTil(bridge, movement, original, newCaret, numRetries - 1);\n            });\n          }).orThunk(function () {\n            return Option.some(caret);\n          });\n        }, Option.none);\n      });\n    };\n    var ieTryDown = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left(), caret.bottom() + JUMP_SIZE);\n    };\n    var ieTryUp = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left(), caret.top() - JUMP_SIZE);\n    };\n    var checkScroll = function (movement, adjusted, bridge) {\n      if (movement.point(adjusted) > bridge.getInnerHeight()) {\n        return Option.some(movement.point(adjusted) - bridge.getInnerHeight());\n      } else if (movement.point(adjusted) < 0) {\n        return Option.some(-movement.point(adjusted));\n      } else {\n        return Option.none();\n      }\n    };\n    var retry = function (movement, bridge, caret) {\n      var moved = movement.move(caret, JUMP_SIZE);\n      var adjusted = adjustTil(bridge, movement, caret, moved, NUM_RETRIES).getOr(moved);\n      return checkScroll(movement, adjusted, bridge).fold(function () {\n        return bridge.situsFromPoint(adjusted.left(), movement.point(adjusted));\n      }, function (delta) {\n        bridge.scrollBy(0, delta);\n        return bridge.situsFromPoint(adjusted.left(), movement.point(adjusted) - delta);\n      });\n    };\n    var Retries = {\n      tryUp: curry(retry, upMovement),\n      tryDown: curry(retry, downMovement),\n      ieTryUp: ieTryUp,\n      ieTryDown: ieTryDown,\n      getJumpSize: constant(JUMP_SIZE)\n    };\n\n    var MAX_RETRIES = 20;\n    var platform$1 = PlatformDetection$1.detect();\n    var findSpot = function (bridge, isRoot, direction) {\n      return bridge.getSelection().bind(function (sel) {\n        return BrTags.tryBr(isRoot, sel.finish(), sel.foffset(), direction).fold(function () {\n          return Option.some(point(sel.finish(), sel.foffset()));\n        }, function (brNeighbour) {\n          var range = bridge.fromSitus(brNeighbour);\n          var analysis = BeforeAfter.verify(bridge, sel.finish(), sel.foffset(), range.finish(), range.foffset(), direction.failure, isRoot);\n          return BrTags.process(analysis);\n        });\n      });\n    };\n    var scan = function (bridge, isRoot, element, offset, direction, numRetries) {\n      if (numRetries === 0) {\n        return Option.none();\n      }\n      return tryCursor(bridge, isRoot, element, offset, direction).bind(function (situs) {\n        var range = bridge.fromSitus(situs);\n        var analysis = BeforeAfter.verify(bridge, element, offset, range.finish(), range.foffset(), direction.failure, isRoot);\n        return BeforeAfter.cata(analysis, function () {\n          return Option.none();\n        }, function () {\n          return Option.some(situs);\n        }, function (cell) {\n          if (eq(element, cell) && offset === 0) {\n            return tryAgain(bridge, element, offset, Carets.moveUp, direction);\n          } else {\n            return scan(bridge, isRoot, cell, 0, direction, numRetries - 1);\n          }\n        }, function (cell) {\n          if (eq(element, cell) && offset === getEnd(cell)) {\n            return tryAgain(bridge, element, offset, Carets.moveDown, direction);\n          } else {\n            return scan(bridge, isRoot, cell, getEnd(cell), direction, numRetries - 1);\n          }\n        });\n      });\n    };\n    var tryAgain = function (bridge, element, offset, move, direction) {\n      return Rectangles.getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, move(box, Retries.getJumpSize()));\n      });\n    };\n    var tryAt = function (bridge, direction, box) {\n      if (platform$1.browser.isChrome() || platform$1.browser.isSafari() || platform$1.browser.isFirefox() || platform$1.browser.isEdge()) {\n        return direction.otherRetry(bridge, box);\n      } else if (platform$1.browser.isIE()) {\n        return direction.ieRetry(bridge, box);\n      } else {\n        return Option.none();\n      }\n    };\n    var tryCursor = function (bridge, isRoot, element, offset, direction) {\n      return Rectangles.getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, box);\n      });\n    };\n    var handle$2 = function (bridge, isRoot, direction) {\n      return findSpot(bridge, isRoot, direction).bind(function (spot) {\n        return scan(bridge, isRoot, spot.element(), spot.offset(), direction, MAX_RETRIES).map(bridge.fromSitus);\n      });\n    };\n    var TableKeys = { handle: handle$2 };\n\n    var detection = PlatformDetection$1.detect();\n    var inSameTable = function (elem, table) {\n      return ancestor$2(elem, function (e) {\n        return parent(e).exists(function (p) {\n          return eq(p, table);\n        });\n      });\n    };\n    var simulate = function (bridge, isRoot, direction, initial, anchor) {\n      return closest$1(initial, 'td,th', isRoot).bind(function (start) {\n        return closest$1(start, 'table', isRoot).bind(function (table) {\n          if (!inSameTable(anchor, table)) {\n            return Option.none();\n          }\n          return TableKeys.handle(bridge, isRoot, direction).bind(function (range) {\n            return closest$1(range.finish(), 'td,th', isRoot).map(function (finish) {\n              return {\n                start: constant(start),\n                finish: constant(finish),\n                range: constant(range)\n              };\n            });\n          });\n        });\n      });\n    };\n    var navigate = function (bridge, isRoot, direction, initial, anchor, precheck) {\n      if (detection.browser.isIE()) {\n        return Option.none();\n      } else {\n        return precheck(initial, isRoot).orThunk(function () {\n          return simulate(bridge, isRoot, direction, initial, anchor).map(function (info) {\n            var range = info.range();\n            return Response.create(Option.some(Util.makeSitus(range.start(), range.soffset(), range.finish(), range.foffset())), true);\n          });\n        });\n      }\n    };\n    var firstUpCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants$1(table, 'tr');\n          if (eq(startRow, rows[0])) {\n            return seekLeft$1(table, function (element) {\n              return last$1(element).isSome();\n            }, isRoot).map(function (last) {\n              var lastOffset = getEnd(last);\n              return Response.create(Option.some(Util.makeSitus(last, lastOffset, last, lastOffset)), true);\n            });\n          } else {\n            return Option.none();\n          }\n        });\n      });\n    };\n    var lastDownCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants$1(table, 'tr');\n          if (eq(startRow, rows[rows.length - 1])) {\n            return seekRight$1(table, function (element) {\n              return first(element).isSome();\n            }, isRoot).map(function (first) {\n              return Response.create(Option.some(Util.makeSitus(first, 0, first, 0)), true);\n            });\n          } else {\n            return Option.none();\n          }\n        });\n      });\n    };\n    var select = function (bridge, container, isRoot, direction, initial, anchor, selectRange) {\n      return simulate(bridge, isRoot, direction, initial, anchor).bind(function (info) {\n        return KeySelection.detect(container, isRoot, info.start(), info.finish(), selectRange);\n      });\n    };\n    var VerticalMovement = {\n      navigate: navigate,\n      select: select,\n      firstUpCheck: firstUpCheck,\n      lastDownCheck: lastDownCheck\n    };\n\n    var findCell = function (target, isRoot) {\n      return closest$1(target, 'td,th', isRoot);\n    };\n    function MouseSelection (bridge, container, isRoot, annotations) {\n      var cursor = Option.none();\n      var clearState = function () {\n        cursor = Option.none();\n      };\n      var mousedown = function (event) {\n        annotations.clear(container);\n        cursor = findCell(event.target(), isRoot);\n      };\n      var mouseover = function (event) {\n        cursor.each(function (start) {\n          annotations.clear(container);\n          findCell(event.target(), isRoot).each(function (finish) {\n            CellSelection.identify(start, finish, isRoot).each(function (cellSel) {\n              var boxes = cellSel.boxes().getOr([]);\n              if (boxes.length > 1 || boxes.length === 1 && !eq(start, finish)) {\n                annotations.selectRange(container, boxes, cellSel.start(), cellSel.finish());\n                bridge.selectContents(finish);\n              }\n            });\n          });\n        });\n      };\n      var mouseup = function (_event) {\n        cursor.each(clearState);\n      };\n      return {\n        mousedown: mousedown,\n        mouseover: mouseover,\n        mouseup: mouseup\n      };\n    }\n\n    var down = {\n      traverse: nextSibling,\n      gather: after$5,\n      relative: Situ.before,\n      otherRetry: Retries.tryDown,\n      ieRetry: Retries.ieTryDown,\n      failure: BeforeAfter.failedDown\n    };\n    var up = {\n      traverse: prevSibling,\n      gather: before$4,\n      relative: Situ.before,\n      otherRetry: Retries.tryUp,\n      ieRetry: Retries.ieTryUp,\n      failure: BeforeAfter.failedUp\n    };\n    var KeyDirection = {\n      down: down,\n      up: up\n    };\n\n    var isKey = function (key) {\n      return function (keycode) {\n        return keycode === key;\n      };\n    };\n    var isUp = isKey(38);\n    var isDown = isKey(40);\n    var isNavigation = function (keycode) {\n      return keycode >= 37 && keycode <= 40;\n    };\n    var SelectionKeys = {\n      ltr: {\n        isBackward: isKey(37),\n        isForward: isKey(39)\n      },\n      rtl: {\n        isBackward: isKey(39),\n        isForward: isKey(37)\n      },\n      isUp: isUp,\n      isDown: isDown,\n      isNavigation: isNavigation\n    };\n\n    var toRaw = function (sr) {\n      return {\n        left: sr.left(),\n        top: sr.top(),\n        right: sr.right(),\n        bottom: sr.bottom(),\n        width: sr.width(),\n        height: sr.height()\n      };\n    };\n    var Rect = { toRaw: toRaw };\n\n    var isSafari = PlatformDetection$1.detect().browser.isSafari();\n    var get$a = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom() : domGlobals.document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return Position(x, y);\n    };\n    var by = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom() : domGlobals.document;\n      var win = doc.defaultView;\n      win.scrollBy(x, y);\n    };\n\n    var WindowBridge = function (win) {\n      var elementFromPoint = function (x, y) {\n        return Element.fromPoint(Element.fromDom(win.document), x, y);\n      };\n      var getRect = function (element) {\n        return element.dom().getBoundingClientRect();\n      };\n      var getRangedRect = function (start, soffset, finish, foffset) {\n        var sel = Selection.exact(start, soffset, finish, foffset);\n        return getFirstRect$1(win, sel).map(Rect.toRaw);\n      };\n      var getSelection = function () {\n        return get$9(win).map(function (exactAdt) {\n          return Util.convertToRange(win, exactAdt);\n        });\n      };\n      var fromSitus = function (situs) {\n        var relative = Selection.relative(situs.start(), situs.finish());\n        return Util.convertToRange(win, relative);\n      };\n      var situsFromPoint = function (x, y) {\n        return getAtPoint(win, x, y).map(function (exact) {\n          return Situs.create(exact.start(), exact.soffset(), exact.finish(), exact.foffset());\n        });\n      };\n      var clearSelection = function () {\n        clear(win);\n      };\n      var selectContents = function (element) {\n        setToElement(win, element);\n      };\n      var setSelection = function (sel) {\n        setExact(win, sel.start(), sel.soffset(), sel.finish(), sel.foffset());\n      };\n      var setRelativeSelection = function (start, finish) {\n        setRelative(win, start, finish);\n      };\n      var getInnerHeight = function () {\n        return win.innerHeight;\n      };\n      var getScrollY = function () {\n        var pos = get$a(Element.fromDom(win.document));\n        return pos.top();\n      };\n      var scrollBy = function (x, y) {\n        by(x, y, Element.fromDom(win.document));\n      };\n      return {\n        elementFromPoint: elementFromPoint,\n        getRect: getRect,\n        getRangedRect: getRangedRect,\n        getSelection: getSelection,\n        fromSitus: fromSitus,\n        situsFromPoint: situsFromPoint,\n        clearSelection: clearSelection,\n        setSelection: setSelection,\n        setRelativeSelection: setRelativeSelection,\n        selectContents: selectContents,\n        getInnerHeight: getInnerHeight,\n        getScrollY: getScrollY,\n        scrollBy: scrollBy\n      };\n    };\n\n    var rc = Immutable('rows', 'cols');\n    var mouse = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var handlers = MouseSelection(bridge, container, isRoot, annotations);\n      return {\n        mousedown: handlers.mousedown,\n        mouseover: handlers.mouseover,\n        mouseup: handlers.mouseup\n      };\n    };\n    var keyboard = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var clearToNavigate = function () {\n        annotations.clear(container);\n        return Option.none();\n      };\n      var keydown = function (event, start, soffset, finish, foffset, direction) {\n        var realEvent = event.raw();\n        var keycode = realEvent.which;\n        var shiftKey = realEvent.shiftKey === true;\n        var handler = CellSelection.retrieve(container, annotations.selectedSelector()).fold(function () {\n          if (SelectionKeys.isDown(keycode) && shiftKey) {\n            return curry(VerticalMovement.select, bridge, container, isRoot, KeyDirection.down, finish, start, annotations.selectRange);\n          } else if (SelectionKeys.isUp(keycode) && shiftKey) {\n            return curry(VerticalMovement.select, bridge, container, isRoot, KeyDirection.up, finish, start, annotations.selectRange);\n          } else if (SelectionKeys.isDown(keycode)) {\n            return curry(VerticalMovement.navigate, bridge, isRoot, KeyDirection.down, finish, start, VerticalMovement.lastDownCheck);\n          } else if (SelectionKeys.isUp(keycode)) {\n            return curry(VerticalMovement.navigate, bridge, isRoot, KeyDirection.up, finish, start, VerticalMovement.firstUpCheck);\n          } else {\n            return Option.none;\n          }\n        }, function (selected) {\n          var update = function (attempts) {\n            return function () {\n              var navigation = findMap(attempts, function (delta) {\n                return KeySelection.update(delta.rows(), delta.cols(), container, selected, annotations);\n              });\n              return navigation.fold(function () {\n                return CellSelection.getEdges(container, annotations.firstSelectedSelector(), annotations.lastSelectedSelector()).map(function (edges) {\n                  var relative = SelectionKeys.isDown(keycode) || direction.isForward(keycode) ? Situ.after : Situ.before;\n                  bridge.setRelativeSelection(Situ.on(edges.first(), 0), relative(edges.table()));\n                  annotations.clear(container);\n                  return Response.create(Option.none(), true);\n                });\n              }, function (_) {\n                return Option.some(Response.create(Option.none(), true));\n              });\n            };\n          };\n          if (SelectionKeys.isDown(keycode) && shiftKey) {\n            return update([rc(+1, 0)]);\n          } else if (SelectionKeys.isUp(keycode) && shiftKey) {\n            return update([rc(-1, 0)]);\n          } else if (direction.isBackward(keycode) && shiftKey) {\n            return update([\n              rc(0, -1),\n              rc(-1, 0)\n            ]);\n          } else if (direction.isForward(keycode) && shiftKey) {\n            return update([\n              rc(0, +1),\n              rc(+1, 0)\n            ]);\n          } else if (SelectionKeys.isNavigation(keycode) && shiftKey === false) {\n            return clearToNavigate;\n          } else {\n            return Option.none;\n          }\n        });\n        return handler();\n      };\n      var keyup = function (event, start, soffset, finish, foffset) {\n        return CellSelection.retrieve(container, annotations.selectedSelector()).fold(function () {\n          var realEvent = event.raw();\n          var keycode = realEvent.which;\n          var shiftKey = realEvent.shiftKey === true;\n          if (shiftKey === false) {\n            return Option.none();\n          }\n          if (SelectionKeys.isNavigation(keycode)) {\n            return KeySelection.sync(container, isRoot, start, soffset, finish, foffset, annotations.selectRange);\n          } else {\n            return Option.none();\n          }\n        }, Option.none);\n      };\n      return {\n        keydown: keydown,\n        keyup: keyup\n      };\n    };\n    var InputHandlers = {\n      mouse: mouse,\n      keyboard: keyboard\n    };\n\n    var remove$7 = function (element, classes) {\n      each(classes, function (x) {\n        remove$5(element, x);\n      });\n    };\n\n    var addClass = function (clazz) {\n      return function (element) {\n        add$2(element, clazz);\n      };\n    };\n    var removeClasses = function (classes) {\n      return function (element) {\n        remove$7(element, classes);\n      };\n    };\n\n    var byClass = function (ephemera) {\n      var addSelectionClass = addClass(ephemera.selected());\n      var removeSelectionClasses = removeClasses([\n        ephemera.selected(),\n        ephemera.lastSelected(),\n        ephemera.firstSelected()\n      ]);\n      var clear = function (container) {\n        var sels = descendants$1(container, ephemera.selectedSelector());\n        each(sels, removeSelectionClasses);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each(cells, addSelectionClass);\n        add$2(start, ephemera.firstSelected());\n        add$2(finish, ephemera.lastSelected());\n      };\n      return {\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var byAttr = function (ephemera) {\n      var removeSelectionAttributes = function (element) {\n        remove(element, ephemera.selected());\n        remove(element, ephemera.firstSelected());\n        remove(element, ephemera.lastSelected());\n      };\n      var addSelectionAttribute = function (element) {\n        set(element, ephemera.selected(), '1');\n      };\n      var clear = function (container) {\n        var sels = descendants$1(container, ephemera.selectedSelector());\n        each(sels, removeSelectionAttributes);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each(cells, addSelectionAttribute);\n        set(start, ephemera.firstSelected(), '1');\n        set(finish, ephemera.lastSelected(), '1');\n      };\n      return {\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var SelectionAnnotation = {\n      byClass: byClass,\n      byAttr: byAttr\n    };\n\n    var hasInternalTarget = function (e) {\n      return has$1(Element.fromDom(e.target), 'ephox-snooker-resizer-bar') === false;\n    };\n    function CellSelection$1 (editor, lazyResize) {\n      var handlerStruct = MixedBag([\n        'mousedown',\n        'mouseover',\n        'mouseup',\n        'keyup',\n        'keydown'\n      ], []);\n      var handlers = Option.none();\n      var annotations = SelectionAnnotation.byAttr(Ephemera);\n      editor.on('init', function (e) {\n        var win = editor.getWin();\n        var body = getBody$1(editor);\n        var isRoot = getIsRoot(editor);\n        var syncSelection = function () {\n          var sel = editor.selection;\n          var start = Element.fromDom(sel.getStart());\n          var end = Element.fromDom(sel.getEnd());\n          var shared = DomParent.sharedOne(TableLookup.table, [\n            start,\n            end\n          ]);\n          shared.fold(function () {\n            annotations.clear(body);\n          }, noop);\n        };\n        var mouseHandlers = InputHandlers.mouse(win, body, isRoot, annotations);\n        var keyHandlers = InputHandlers.keyboard(win, body, isRoot, annotations);\n        var hasShiftKey = function (event) {\n          return event.raw().shiftKey === true;\n        };\n        var handleResponse = function (event, response) {\n          if (!hasShiftKey(event)) {\n            return;\n          }\n          if (response.kill()) {\n            event.kill();\n          }\n          response.selection().each(function (ns) {\n            var relative = Selection.relative(ns.start(), ns.finish());\n            var rng = asLtrRange(win, relative);\n            editor.selection.setRng(rng);\n          });\n        };\n        var keyup = function (event) {\n          var wrappedEvent = wrapEvent(event);\n          if (wrappedEvent.raw().shiftKey && SelectionKeys.isNavigation(wrappedEvent.raw().which)) {\n            var rng = editor.selection.getRng();\n            var start = Element.fromDom(rng.startContainer);\n            var end = Element.fromDom(rng.endContainer);\n            keyHandlers.keyup(wrappedEvent, start, rng.startOffset, end, rng.endOffset).each(function (response) {\n              handleResponse(wrappedEvent, response);\n            });\n          }\n        };\n        var keydown = function (event) {\n          var wrappedEvent = wrapEvent(event);\n          lazyResize().each(function (resize) {\n            resize.hideBars();\n          });\n          var rng = editor.selection.getRng();\n          var startContainer = Element.fromDom(editor.selection.getStart());\n          var start = Element.fromDom(rng.startContainer);\n          var end = Element.fromDom(rng.endContainer);\n          var direction = Direction.directionAt(startContainer).isRtl() ? SelectionKeys.rtl : SelectionKeys.ltr;\n          keyHandlers.keydown(wrappedEvent, start, rng.startOffset, end, rng.endOffset, direction).each(function (response) {\n            handleResponse(wrappedEvent, response);\n          });\n          lazyResize().each(function (resize) {\n            resize.showBars();\n          });\n        };\n        var isMouseEvent = function (event) {\n          return event.hasOwnProperty('x') && event.hasOwnProperty('y');\n        };\n        var wrapEvent = function (event) {\n          var target = Element.fromDom(event.target);\n          var stop = function () {\n            event.stopPropagation();\n          };\n          var prevent = function () {\n            event.preventDefault();\n          };\n          var kill = compose(prevent, stop);\n          return {\n            target: constant(target),\n            x: constant(isMouseEvent(event) ? event.x : null),\n            y: constant(isMouseEvent(event) ? event.y : null),\n            stop: stop,\n            prevent: prevent,\n            kill: kill,\n            raw: constant(event)\n          };\n        };\n        var isLeftMouse = function (raw) {\n          return raw.button === 0;\n        };\n        var isLeftButtonPressed = function (raw) {\n          if (raw.buttons === undefined) {\n            return true;\n          }\n          if (global$2.ie && global$2.ie >= 12 && raw.buttons === 0) {\n            return true;\n          }\n          return (raw.buttons & 1) !== 0;\n        };\n        var mouseDown = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mousedown(wrapEvent(e));\n          }\n        };\n        var mouseOver = function (e) {\n          if (isLeftButtonPressed(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseover(wrapEvent(e));\n          }\n        };\n        var mouseUp = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseup(wrapEvent(e));\n          }\n        };\n        editor.on('mousedown', mouseDown);\n        editor.on('mouseover', mouseOver);\n        editor.on('mouseup', mouseUp);\n        editor.on('keyup', keyup);\n        editor.on('keydown', keydown);\n        editor.on('nodechange', syncSelection);\n        handlers = Option.some(handlerStruct({\n          mousedown: mouseDown,\n          mouseover: mouseOver,\n          mouseup: mouseUp,\n          keyup: keyup,\n          keydown: keydown\n        }));\n      });\n      var destroy = function () {\n        handlers.each(function (handlers) {\n        });\n      };\n      return {\n        clear: annotations.clear,\n        destroy: destroy\n      };\n    }\n\n    var Selections = function (editor) {\n      var get = function () {\n        var body = getBody$1(editor);\n        return TableSelection.retrieve(body, Ephemera.selectedSelector()).fold(function () {\n          if (editor.selection.getStart() === undefined) {\n            return SelectionTypes.none();\n          } else {\n            return SelectionTypes.single(editor.selection);\n          }\n        }, function (cells) {\n          return SelectionTypes.multiple(cells);\n        });\n      };\n      return { get: get };\n    };\n\n    var each$4 = global$1.each;\n    var addButtons = function (editor) {\n      var menuItems = [];\n      each$4('inserttable tableprops deletetable | cell row column'.split(' '), function (name) {\n        if (name === '|') {\n          menuItems.push({ text: '-' });\n        } else {\n          menuItems.push(editor.menuItems[name]);\n        }\n      });\n      editor.addButton('table', {\n        type: 'menubutton',\n        title: 'Table',\n        menu: menuItems\n      });\n      function cmd(command) {\n        return function () {\n          editor.execCommand(command);\n        };\n      }\n      editor.addButton('tableprops', {\n        title: 'Table properties',\n        onclick: cmd('mceTableProps'),\n        icon: 'table'\n      });\n      editor.addButton('tabledelete', {\n        title: 'Delete table',\n        onclick: cmd('mceTableDelete')\n      });\n      editor.addButton('tablecellprops', {\n        title: 'Cell properties',\n        onclick: cmd('mceTableCellProps')\n      });\n      editor.addButton('tablemergecells', {\n        title: 'Merge cells',\n        onclick: cmd('mceTableMergeCells')\n      });\n      editor.addButton('tablesplitcells', {\n        title: 'Split cell',\n        onclick: cmd('mceTableSplitCells')\n      });\n      editor.addButton('tableinsertrowbefore', {\n        title: 'Insert row before',\n        onclick: cmd('mceTableInsertRowBefore')\n      });\n      editor.addButton('tableinsertrowafter', {\n        title: 'Insert row after',\n        onclick: cmd('mceTableInsertRowAfter')\n      });\n      editor.addButton('tabledeleterow', {\n        title: 'Delete row',\n        onclick: cmd('mceTableDeleteRow')\n      });\n      editor.addButton('tablerowprops', {\n        title: 'Row properties',\n        onclick: cmd('mceTableRowProps')\n      });\n      editor.addButton('tablecutrow', {\n        title: 'Cut row',\n        onclick: cmd('mceTableCutRow')\n      });\n      editor.addButton('tablecopyrow', {\n        title: 'Copy row',\n        onclick: cmd('mceTableCopyRow')\n      });\n      editor.addButton('tablepasterowbefore', {\n        title: 'Paste row before',\n        onclick: cmd('mceTablePasteRowBefore')\n      });\n      editor.addButton('tablepasterowafter', {\n        title: 'Paste row after',\n        onclick: cmd('mceTablePasteRowAfter')\n      });\n      editor.addButton('tableinsertcolbefore', {\n        title: 'Insert column before',\n        onclick: cmd('mceTableInsertColBefore')\n      });\n      editor.addButton('tableinsertcolafter', {\n        title: 'Insert column after',\n        onclick: cmd('mceTableInsertColAfter')\n      });\n      editor.addButton('tabledeletecol', {\n        title: 'Delete column',\n        onclick: cmd('mceTableDeleteCol')\n      });\n    };\n    var addToolbars = function (editor) {\n      var isTable = function (table) {\n        var selectorMatched = editor.dom.is(table, 'table') && editor.getBody().contains(table);\n        return selectorMatched;\n      };\n      var toolbar = getToolbar(editor);\n      if (toolbar.length > 0) {\n        editor.addContextToolbar(isTable, toolbar.join(' '));\n      }\n    };\n    var Buttons = {\n      addButtons: addButtons,\n      addToolbars: addToolbars\n    };\n\n    var addMenuItems = function (editor, selections) {\n      var targets = Option.none();\n      var tableCtrls = [];\n      var cellCtrls = [];\n      var mergeCtrls = [];\n      var unmergeCtrls = [];\n      var noTargetDisable = function (ctrl) {\n        ctrl.disabled(true);\n      };\n      var ctrlEnable = function (ctrl) {\n        ctrl.disabled(false);\n      };\n      var pushTable = function () {\n        var self = this;\n        tableCtrls.push(self);\n        targets.fold(function () {\n          noTargetDisable(self);\n        }, function (targets) {\n          ctrlEnable(self);\n        });\n      };\n      var pushCell = function () {\n        var self = this;\n        cellCtrls.push(self);\n        targets.fold(function () {\n          noTargetDisable(self);\n        }, function (targets) {\n          ctrlEnable(self);\n        });\n      };\n      var pushMerge = function () {\n        var self = this;\n        mergeCtrls.push(self);\n        targets.fold(function () {\n          noTargetDisable(self);\n        }, function (targets) {\n          self.disabled(targets.mergable().isNone());\n        });\n      };\n      var pushUnmerge = function () {\n        var self = this;\n        unmergeCtrls.push(self);\n        targets.fold(function () {\n          noTargetDisable(self);\n        }, function (targets) {\n          self.disabled(targets.unmergable().isNone());\n        });\n      };\n      var setDisabledCtrls = function () {\n        targets.fold(function () {\n          each(tableCtrls, noTargetDisable);\n          each(cellCtrls, noTargetDisable);\n          each(mergeCtrls, noTargetDisable);\n          each(unmergeCtrls, noTargetDisable);\n        }, function (targets) {\n          each(tableCtrls, ctrlEnable);\n          each(cellCtrls, ctrlEnable);\n          each(mergeCtrls, function (mergeCtrl) {\n            mergeCtrl.disabled(targets.mergable().isNone());\n          });\n          each(unmergeCtrls, function (unmergeCtrl) {\n            unmergeCtrl.disabled(targets.unmergable().isNone());\n          });\n        });\n      };\n      editor.on('init', function () {\n        editor.on('nodechange', function (e) {\n          var cellOpt = Option.from(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n          targets = cellOpt.bind(function (cellDom) {\n            var cell = Element.fromDom(cellDom);\n            var table = TableLookup.table(cell);\n            return table.map(function (table) {\n              return TableTargets.forMenu(selections, table, cell);\n            });\n          });\n          setDisabledCtrls();\n        });\n      });\n      var generateTableGrid = function () {\n        var html = '';\n        html = '<table role=\"grid\" class=\"mce-grid mce-grid-border\" aria-readonly=\"true\">';\n        for (var y = 0; y < 10; y++) {\n          html += '<tr>';\n          for (var x = 0; x < 10; x++) {\n            html += '<td role=\"gridcell\" tabindex=\"-1\"><a id=\"mcegrid' + (y * 10 + x) + '\" href=\"#\" ' + 'data-mce-x=\"' + x + '\" data-mce-y=\"' + y + '\"></a></td>';\n          }\n          html += '</tr>';\n        }\n        html += '</table>';\n        html += '<div class=\"mce-text-center\" role=\"presentation\">1 x 1</div>';\n        return html;\n      };\n      var selectGrid = function (editor, tx, ty, control) {\n        var table = control.getEl().getElementsByTagName('table')[0];\n        var x, y, focusCell, cell, active;\n        var rtl = control.isRtl() || control.parent().rel === 'tl-tr';\n        table.nextSibling.innerHTML = tx + 1 + ' x ' + (ty + 1);\n        if (rtl) {\n          tx = 9 - tx;\n        }\n        for (y = 0; y < 10; y++) {\n          for (x = 0; x < 10; x++) {\n            cell = table.rows[y].childNodes[x].firstChild;\n            active = (rtl ? x >= tx : x <= tx) && y <= ty;\n            editor.dom.toggleClass(cell, 'mce-active', active);\n            if (active) {\n              focusCell = cell;\n            }\n          }\n        }\n        return focusCell.parentNode;\n      };\n      var insertTable = hasTableGrid(editor) === false ? {\n        text: 'Table',\n        icon: 'table',\n        context: 'table',\n        onclick: cmd('mceInsertTable')\n      } : {\n        text: 'Table',\n        icon: 'table',\n        context: 'table',\n        ariaHideMenu: true,\n        onclick: function (e) {\n          if (e.aria) {\n            this.parent().hideAll();\n            e.stopImmediatePropagation();\n            editor.execCommand('mceInsertTable');\n          }\n        },\n        onshow: function () {\n          selectGrid(editor, 0, 0, this.menu.items()[0]);\n        },\n        onhide: function () {\n          var elements = this.menu.items()[0].getEl().getElementsByTagName('a');\n          editor.dom.removeClass(elements, 'mce-active');\n          editor.dom.addClass(elements[0], 'mce-active');\n        },\n        menu: [{\n            type: 'container',\n            html: generateTableGrid(),\n            onPostRender: function () {\n              this.lastX = this.lastY = 0;\n            },\n            onmousemove: function (e) {\n              var target = e.target;\n              var x, y;\n              if (target.tagName.toUpperCase() === 'A') {\n                x = parseInt(target.getAttribute('data-mce-x'), 10);\n                y = parseInt(target.getAttribute('data-mce-y'), 10);\n                if (this.isRtl() || this.parent().rel === 'tl-tr') {\n                  x = 9 - x;\n                }\n                if (x !== this.lastX || y !== this.lastY) {\n                  selectGrid(editor, x, y, e.control);\n                  this.lastX = x;\n                  this.lastY = y;\n                }\n              }\n            },\n            onclick: function (e) {\n              var self = this;\n              if (e.target.tagName.toUpperCase() === 'A') {\n                e.preventDefault();\n                e.stopPropagation();\n                self.parent().cancel();\n                editor.undoManager.transact(function () {\n                  InsertTable.insert(editor, self.lastX + 1, self.lastY + 1);\n                });\n                editor.addVisual();\n              }\n            }\n          }]\n      };\n      function cmd(command) {\n        return function () {\n          editor.execCommand(command);\n        };\n      }\n      var tableProperties = {\n        text: 'Table properties',\n        context: 'table',\n        onPostRender: pushTable,\n        onclick: cmd('mceTableProps')\n      };\n      var deleteTable = {\n        text: 'Delete table',\n        context: 'table',\n        onPostRender: pushTable,\n        cmd: 'mceTableDelete'\n      };\n      var row = {\n        text: 'Row',\n        context: 'table',\n        menu: [\n          {\n            text: 'Insert row before',\n            onclick: cmd('mceTableInsertRowBefore'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Insert row after',\n            onclick: cmd('mceTableInsertRowAfter'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Delete row',\n            onclick: cmd('mceTableDeleteRow'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Row properties',\n            onclick: cmd('mceTableRowProps'),\n            onPostRender: pushCell\n          },\n          { text: '-' },\n          {\n            text: 'Cut row',\n            onclick: cmd('mceTableCutRow'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Copy row',\n            onclick: cmd('mceTableCopyRow'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Paste row before',\n            onclick: cmd('mceTablePasteRowBefore'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Paste row after',\n            onclick: cmd('mceTablePasteRowAfter'),\n            onPostRender: pushCell\n          }\n        ]\n      };\n      var column = {\n        text: 'Column',\n        context: 'table',\n        menu: [\n          {\n            text: 'Insert column before',\n            onclick: cmd('mceTableInsertColBefore'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Insert column after',\n            onclick: cmd('mceTableInsertColAfter'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Delete column',\n            onclick: cmd('mceTableDeleteCol'),\n            onPostRender: pushCell\n          }\n        ]\n      };\n      var cell = {\n        separator: 'before',\n        text: 'Cell',\n        context: 'table',\n        menu: [\n          {\n            text: 'Cell properties',\n            onclick: cmd('mceTableCellProps'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Merge cells',\n            onclick: cmd('mceTableMergeCells'),\n            onPostRender: pushMerge\n          },\n          {\n            text: 'Split cell',\n            onclick: cmd('mceTableSplitCells'),\n            onPostRender: pushUnmerge\n          }\n        ]\n      };\n      editor.addMenuItem('inserttable', insertTable);\n      editor.addMenuItem('tableprops', tableProperties);\n      editor.addMenuItem('deletetable', deleteTable);\n      editor.addMenuItem('row', row);\n      editor.addMenuItem('column', column);\n      editor.addMenuItem('cell', cell);\n    };\n    var MenuItems = { addMenuItems: addMenuItems };\n\n    var getClipboardRows = function (clipboardRows) {\n      return clipboardRows.get().fold(function () {\n        return;\n      }, function (rows) {\n        return map(rows, function (row) {\n          return row.dom();\n        });\n      });\n    };\n    var setClipboardRows = function (rows, clipboardRows) {\n      var sugarRows = map(rows, Element.fromDom);\n      clipboardRows.set(Option.from(sugarRows));\n    };\n    var getApi = function (editor, clipboardRows) {\n      return {\n        insertTable: function (columns, rows) {\n          return InsertTable.insert(editor, columns, rows);\n        },\n        setClipboardRows: function (rows) {\n          return setClipboardRows(rows, clipboardRows);\n        },\n        getClipboardRows: function () {\n          return getClipboardRows(clipboardRows);\n        }\n      };\n    };\n\n    function Plugin(editor) {\n      var resizeHandler = ResizeHandler(editor);\n      var cellSelection = CellSelection$1(editor, resizeHandler.lazyResize);\n      var actions = TableActions(editor, resizeHandler.lazyWire);\n      var selections = Selections(editor);\n      var clipboardRows = Cell(Option.none());\n      Commands.registerCommands(editor, actions, cellSelection, selections, clipboardRows);\n      Clipboard.registerEvents(editor, selections, actions, cellSelection);\n      MenuItems.addMenuItems(editor, selections);\n      Buttons.addButtons(editor);\n      Buttons.addToolbars(editor);\n      editor.on('PreInit', function () {\n        editor.serializer.addTempAttr(Ephemera.firstSelected());\n        editor.serializer.addTempAttr(Ephemera.lastSelected());\n      });\n      if (hasTabNavigation(editor)) {\n        editor.on('keydown', function (e) {\n          TabContext.handle(e, editor, actions, resizeHandler.lazyWire);\n        });\n      }\n      editor.on('remove', function () {\n        resizeHandler.destroy();\n        cellSelection.destroy();\n      });\n      return getApi(editor, clipboardRows);\n    }\n    global.add('table', Plugin);\n    function Plugin$1 () {\n    }\n\n    return Plugin$1;\n\n}(window));\n})();\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","(function () {\nvar bbcode = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var html2bbcode = function (s) {\n      s = global$1.trim(s);\n      var rep = function (re, str) {\n        s = s.replace(re, str);\n      };\n      rep(/<a.*?href=\\\"(.*?)\\\".*?>(.*?)<\\/a>/gi, '[url=$1]$2[/url]');\n      rep(/<font.*?color=\\\"(.*?)\\\".*?class=\\\"codeStyle\\\".*?>(.*?)<\\/font>/gi, '[code][color=$1]$2[/color][/code]');\n      rep(/<font.*?color=\\\"(.*?)\\\".*?class=\\\"quoteStyle\\\".*?>(.*?)<\\/font>/gi, '[quote][color=$1]$2[/color][/quote]');\n      rep(/<font.*?class=\\\"codeStyle\\\".*?color=\\\"(.*?)\\\".*?>(.*?)<\\/font>/gi, '[code][color=$1]$2[/color][/code]');\n      rep(/<font.*?class=\\\"quoteStyle\\\".*?color=\\\"(.*?)\\\".*?>(.*?)<\\/font>/gi, '[quote][color=$1]$2[/color][/quote]');\n      rep(/<span style=\\\"color: ?(.*?);\\\">(.*?)<\\/span>/gi, '[color=$1]$2[/color]');\n      rep(/<font.*?color=\\\"(.*?)\\\".*?>(.*?)<\\/font>/gi, '[color=$1]$2[/color]');\n      rep(/<span style=\\\"font-size:(.*?);\\\">(.*?)<\\/span>/gi, '[size=$1]$2[/size]');\n      rep(/<font>(.*?)<\\/font>/gi, '$1');\n      rep(/<img.*?src=\\\"(.*?)\\\".*?\\/>/gi, '[img]$1[/img]');\n      rep(/<span class=\\\"codeStyle\\\">(.*?)<\\/span>/gi, '[code]$1[/code]');\n      rep(/<span class=\\\"quoteStyle\\\">(.*?)<\\/span>/gi, '[quote]$1[/quote]');\n      rep(/<strong class=\\\"codeStyle\\\">(.*?)<\\/strong>/gi, '[code][b]$1[/b][/code]');\n      rep(/<strong class=\\\"quoteStyle\\\">(.*?)<\\/strong>/gi, '[quote][b]$1[/b][/quote]');\n      rep(/<em class=\\\"codeStyle\\\">(.*?)<\\/em>/gi, '[code][i]$1[/i][/code]');\n      rep(/<em class=\\\"quoteStyle\\\">(.*?)<\\/em>/gi, '[quote][i]$1[/i][/quote]');\n      rep(/<u class=\\\"codeStyle\\\">(.*?)<\\/u>/gi, '[code][u]$1[/u][/code]');\n      rep(/<u class=\\\"quoteStyle\\\">(.*?)<\\/u>/gi, '[quote][u]$1[/u][/quote]');\n      rep(/<\\/(strong|b)>/gi, '[/b]');\n      rep(/<(strong|b)>/gi, '[b]');\n      rep(/<\\/(em|i)>/gi, '[/i]');\n      rep(/<(em|i)>/gi, '[i]');\n      rep(/<\\/u>/gi, '[/u]');\n      rep(/<span style=\\\"text-decoration: ?underline;\\\">(.*?)<\\/span>/gi, '[u]$1[/u]');\n      rep(/<u>/gi, '[u]');\n      rep(/<blockquote[^>]*>/gi, '[quote]');\n      rep(/<\\/blockquote>/gi, '[/quote]');\n      rep(/<br \\/>/gi, '\\n');\n      rep(/<br\\/>/gi, '\\n');\n      rep(/<br>/gi, '\\n');\n      rep(/<p>/gi, '');\n      rep(/<\\/p>/gi, '\\n');\n      rep(/&nbsp;|\\u00a0/gi, ' ');\n      rep(/&quot;/gi, '\"');\n      rep(/&lt;/gi, '<');\n      rep(/&gt;/gi, '>');\n      rep(/&amp;/gi, '&');\n      return s;\n    };\n    var bbcode2html = function (s) {\n      s = global$1.trim(s);\n      var rep = function (re, str) {\n        s = s.replace(re, str);\n      };\n      rep(/\\n/gi, '<br />');\n      rep(/\\[b\\]/gi, '<strong>');\n      rep(/\\[\\/b\\]/gi, '</strong>');\n      rep(/\\[i\\]/gi, '<em>');\n      rep(/\\[\\/i\\]/gi, '</em>');\n      rep(/\\[u\\]/gi, '<u>');\n      rep(/\\[\\/u\\]/gi, '</u>');\n      rep(/\\[url=([^\\]]+)\\](.*?)\\[\\/url\\]/gi, '<a href=\"$1\">$2</a>');\n      rep(/\\[url\\](.*?)\\[\\/url\\]/gi, '<a href=\"$1\">$1</a>');\n      rep(/\\[img\\](.*?)\\[\\/img\\]/gi, '<img src=\"$1\" />');\n      rep(/\\[color=(.*?)\\](.*?)\\[\\/color\\]/gi, '<font color=\"$1\">$2</font>');\n      rep(/\\[code\\](.*?)\\[\\/code\\]/gi, '<span class=\"codeStyle\">$1</span>&nbsp;');\n      rep(/\\[quote.*?\\](.*?)\\[\\/quote\\]/gi, '<span class=\"quoteStyle\">$1</span>&nbsp;');\n      return s;\n    };\n    var Convert = {\n      html2bbcode: html2bbcode,\n      bbcode2html: bbcode2html\n    };\n\n    global.add('bbcode', function () {\n      return {\n        init: function (editor) {\n          editor.on('beforeSetContent', function (e) {\n            e.content = Convert.bbcode2html(e.content);\n          });\n          editor.on('postProcess', function (e) {\n            if (e.set) {\n              e.content = Convert.bbcode2html(e.content);\n            }\n            if (e.get) {\n              e.content = Convert.html2bbcode(e.content);\n            }\n          });\n        }\n      };\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar imagetools = (function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    function create(width, height) {\n      return resize(domGlobals.document.createElement('canvas'), width, height);\n    }\n    function clone(canvas) {\n      var tCanvas = create(canvas.width, canvas.height);\n      var ctx = get2dContext(tCanvas);\n      ctx.drawImage(canvas, 0, 0);\n      return tCanvas;\n    }\n    function get2dContext(canvas) {\n      return canvas.getContext('2d');\n    }\n    function resize(canvas, width, height) {\n      canvas.width = width;\n      canvas.height = height;\n      return canvas;\n    }\n\n    function getWidth(image) {\n      return image.naturalWidth || image.width;\n    }\n    function getHeight(image) {\n      return image.naturalHeight || image.height;\n    }\n\n    var promise = function () {\n      var Promise = function (fn) {\n        if (typeof this !== 'object') {\n          throw new TypeError('Promises must be constructed via new');\n        }\n        if (typeof fn !== 'function') {\n          throw new TypeError('not a function');\n        }\n        this._state = null;\n        this._value = null;\n        this._deferreds = [];\n        doResolve(fn, bind(resolve, this), bind(reject, this));\n      };\n      var asap = Promise.immediateFn || typeof window.setImmediate === 'function' && window.setImmediate || function (fn) {\n        domGlobals.setTimeout(fn, 1);\n      };\n      function bind(fn, thisArg) {\n        return function () {\n          return fn.apply(thisArg, arguments);\n        };\n      }\n      var isArray = Array.isArray || function (value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n      };\n      function handle(deferred) {\n        var me = this;\n        if (this._state === null) {\n          this._deferreds.push(deferred);\n          return;\n        }\n        asap(function () {\n          var cb = me._state ? deferred.onFulfilled : deferred.onRejected;\n          if (cb === null) {\n            (me._state ? deferred.resolve : deferred.reject)(me._value);\n            return;\n          }\n          var ret;\n          try {\n            ret = cb(me._value);\n          } catch (e) {\n            deferred.reject(e);\n            return;\n          }\n          deferred.resolve(ret);\n        });\n      }\n      function resolve(newValue) {\n        try {\n          if (newValue === this) {\n            throw new TypeError('A promise cannot be resolved with itself.');\n          }\n          if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n            var then = newValue.then;\n            if (typeof then === 'function') {\n              doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n              return;\n            }\n          }\n          this._state = true;\n          this._value = newValue;\n          finale.call(this);\n        } catch (e) {\n          reject.call(this, e);\n        }\n      }\n      function reject(newValue) {\n        this._state = false;\n        this._value = newValue;\n        finale.call(this);\n      }\n      function finale() {\n        for (var _i = 0, _a = this._deferreds; _i < _a.length; _i++) {\n          var deferred = _a[_i];\n          handle.call(this, deferred);\n        }\n        this._deferreds = [];\n      }\n      function Handler(onFulfilled, onRejected, resolve, reject) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n      }\n      function doResolve(fn, onFulfilled, onRejected) {\n        var done = false;\n        try {\n          fn(function (value) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onFulfilled(value);\n          }, function (reason) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onRejected(reason);\n          });\n        } catch (ex) {\n          if (done) {\n            return;\n          }\n          done = true;\n          onRejected(ex);\n        }\n      }\n      Promise.prototype.catch = function (onRejected) {\n        return this.then(null, onRejected);\n      };\n      Promise.prototype.then = function (onFulfilled, onRejected) {\n        var me = this;\n        return new Promise(function (resolve, reject) {\n          handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n        });\n      };\n      Promise.all = function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        var args = Array.prototype.slice.call(values.length === 1 && isArray(values[0]) ? values[0] : values);\n        return new Promise(function (resolve, reject) {\n          if (args.length === 0) {\n            return resolve([]);\n          }\n          var remaining = args.length;\n          function res(i, val) {\n            try {\n              if (val && (typeof val === 'object' || typeof val === 'function')) {\n                var then = val.then;\n                if (typeof then === 'function') {\n                  then.call(val, function (val) {\n                    res(i, val);\n                  }, reject);\n                  return;\n                }\n              }\n              args[i] = val;\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            } catch (ex) {\n              reject(ex);\n            }\n          }\n          for (var i = 0; i < args.length; i++) {\n            res(i, args[i]);\n          }\n        });\n      };\n      Promise.resolve = function (value) {\n        if (value && typeof value === 'object' && value.constructor === Promise) {\n          return value;\n        }\n        return new Promise(function (resolve) {\n          resolve(value);\n        });\n      };\n      Promise.reject = function (reason) {\n        return new Promise(function (resolve, reject) {\n          reject(reason);\n        });\n      };\n      Promise.race = function (values) {\n        return new Promise(function (resolve, reject) {\n          for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {\n            var value = values_1[_i];\n            value.then(resolve, reject);\n          }\n        });\n      };\n      return Promise;\n    };\n    var Promise = window.Promise ? window.Promise : promise();\n\n    function imageToBlob(image) {\n      var src = image.src;\n      if (src.indexOf('data:') === 0) {\n        return dataUriToBlob(src);\n      }\n      return anyUriToBlob(src);\n    }\n    function blobToImage(blob) {\n      return new Promise(function (resolve, reject) {\n        var blobUrl = domGlobals.URL.createObjectURL(blob);\n        var image = new domGlobals.Image();\n        var removeListeners = function () {\n          image.removeEventListener('load', loaded);\n          image.removeEventListener('error', error);\n        };\n        function loaded() {\n          removeListeners();\n          resolve(image);\n        }\n        function error() {\n          removeListeners();\n          reject('Unable to load data of type ' + blob.type + ': ' + blobUrl);\n        }\n        image.addEventListener('load', loaded);\n        image.addEventListener('error', error);\n        image.src = blobUrl;\n        if (image.complete) {\n          loaded();\n        }\n      });\n    }\n    function anyUriToBlob(url) {\n      return new Promise(function (resolve, reject) {\n        var xhr = new domGlobals.XMLHttpRequest();\n        xhr.open('GET', url, true);\n        xhr.responseType = 'blob';\n        xhr.onload = function () {\n          if (this.status === 200) {\n            resolve(this.response);\n          }\n        };\n        xhr.onerror = function () {\n          var _this = this;\n          var corsError = function () {\n            var obj = new Error('No access to download image');\n            obj.code = 18;\n            obj.name = 'SecurityError';\n            return obj;\n          };\n          var genericError = function () {\n            return new Error('Error ' + _this.status + ' downloading image');\n          };\n          reject(this.status === 0 ? corsError() : genericError());\n        };\n        xhr.send();\n      });\n    }\n    function dataUriToBlobSync(uri) {\n      var data = uri.split(',');\n      var matches = /data:([^;]+)/.exec(data[0]);\n      if (!matches) {\n        return Option.none();\n      }\n      var mimetype = matches[1];\n      var base64 = data[1];\n      var sliceSize = 1024;\n      var byteCharacters = domGlobals.atob(base64);\n      var bytesLength = byteCharacters.length;\n      var slicesCount = Math.ceil(bytesLength / sliceSize);\n      var byteArrays = new Array(slicesCount);\n      for (var sliceIndex = 0; sliceIndex < slicesCount; ++sliceIndex) {\n        var begin = sliceIndex * sliceSize;\n        var end = Math.min(begin + sliceSize, bytesLength);\n        var bytes = new Array(end - begin);\n        for (var offset = begin, i = 0; offset < end; ++i, ++offset) {\n          bytes[i] = byteCharacters[offset].charCodeAt(0);\n        }\n        byteArrays[sliceIndex] = new Uint8Array(bytes);\n      }\n      return Option.some(new domGlobals.Blob(byteArrays, { type: mimetype }));\n    }\n    function dataUriToBlob(uri) {\n      return new Promise(function (resolve, reject) {\n        dataUriToBlobSync(uri).fold(function () {\n          reject('uri is not base64: ' + uri);\n        }, resolve);\n      });\n    }\n    function canvasToBlob(canvas, type, quality) {\n      type = type || 'image/png';\n      if (domGlobals.HTMLCanvasElement.prototype.toBlob) {\n        return new Promise(function (resolve, reject) {\n          canvas.toBlob(function (blob) {\n            if (blob) {\n              resolve(blob);\n            } else {\n              reject();\n            }\n          }, type, quality);\n        });\n      } else {\n        return dataUriToBlob(canvas.toDataURL(type, quality));\n      }\n    }\n    function canvasToDataURL(canvas, type, quality) {\n      type = type || 'image/png';\n      return canvas.toDataURL(type, quality);\n    }\n    function blobToCanvas(blob) {\n      return blobToImage(blob).then(function (image) {\n        revokeImageUrl(image);\n        var canvas = create(getWidth(image), getHeight(image));\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0);\n        return canvas;\n      });\n    }\n    function blobToDataUri(blob) {\n      return new Promise(function (resolve) {\n        var reader = new domGlobals.FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    }\n    function revokeImageUrl(image) {\n      domGlobals.URL.revokeObjectURL(image.src);\n    }\n\n    var blobToImage$1 = function (blob) {\n      return blobToImage(blob);\n    };\n    var imageToBlob$1 = function (image) {\n      return imageToBlob(image);\n    };\n\n    function create$1(getCanvas, blob, uri) {\n      var initialType = blob.type;\n      var getType = constant(initialType);\n      function toBlob() {\n        return Promise.resolve(blob);\n      }\n      function toDataURL() {\n        return uri;\n      }\n      function toBase64() {\n        return uri.split(',')[1];\n      }\n      function toAdjustedBlob(type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToBlob(canvas, type, quality);\n        });\n      }\n      function toAdjustedDataURL(type, quality) {\n        return getCanvas.then(function (canvas) {\n          return canvasToDataURL(canvas, type, quality);\n        });\n      }\n      function toAdjustedBase64(type, quality) {\n        return toAdjustedDataURL(type, quality).then(function (dataurl) {\n          return dataurl.split(',')[1];\n        });\n      }\n      function toCanvas() {\n        return getCanvas.then(clone);\n      }\n      return {\n        getType: getType,\n        toBlob: toBlob,\n        toDataURL: toDataURL,\n        toBase64: toBase64,\n        toAdjustedBlob: toAdjustedBlob,\n        toAdjustedDataURL: toAdjustedDataURL,\n        toAdjustedBase64: toAdjustedBase64,\n        toCanvas: toCanvas\n      };\n    }\n    function fromBlob(blob) {\n      return blobToDataUri(blob).then(function (uri) {\n        return create$1(blobToCanvas(blob), blob, uri);\n      });\n    }\n    function fromCanvas(canvas, type) {\n      return canvasToBlob(canvas, type).then(function (blob) {\n        return create$1(Promise.resolve(canvas), blob, canvas.toDataURL());\n      });\n    }\n\n    function clamp(value, min, max) {\n      var parsedValue = typeof value === 'string' ? parseFloat(value) : value;\n      if (parsedValue > max) {\n        parsedValue = max;\n      } else if (parsedValue < min) {\n        parsedValue = min;\n      }\n      return parsedValue;\n    }\n    function identity() {\n      return [\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ];\n    }\n    var DELTA_INDEX = [\n      0,\n      0.01,\n      0.02,\n      0.04,\n      0.05,\n      0.06,\n      0.07,\n      0.08,\n      0.1,\n      0.11,\n      0.12,\n      0.14,\n      0.15,\n      0.16,\n      0.17,\n      0.18,\n      0.2,\n      0.21,\n      0.22,\n      0.24,\n      0.25,\n      0.27,\n      0.28,\n      0.3,\n      0.32,\n      0.34,\n      0.36,\n      0.38,\n      0.4,\n      0.42,\n      0.44,\n      0.46,\n      0.48,\n      0.5,\n      0.53,\n      0.56,\n      0.59,\n      0.62,\n      0.65,\n      0.68,\n      0.71,\n      0.74,\n      0.77,\n      0.8,\n      0.83,\n      0.86,\n      0.89,\n      0.92,\n      0.95,\n      0.98,\n      1,\n      1.06,\n      1.12,\n      1.18,\n      1.24,\n      1.3,\n      1.36,\n      1.42,\n      1.48,\n      1.54,\n      1.6,\n      1.66,\n      1.72,\n      1.78,\n      1.84,\n      1.9,\n      1.96,\n      2,\n      2.12,\n      2.25,\n      2.37,\n      2.5,\n      2.62,\n      2.75,\n      2.87,\n      3,\n      3.2,\n      3.4,\n      3.6,\n      3.8,\n      4,\n      4.3,\n      4.7,\n      4.9,\n      5,\n      5.5,\n      6,\n      6.5,\n      6.8,\n      7,\n      7.3,\n      7.5,\n      7.8,\n      8,\n      8.4,\n      8.7,\n      9,\n      9.4,\n      9.6,\n      9.8,\n      10\n    ];\n    function multiply(matrix1, matrix2) {\n      var col = [];\n      var out = new Array(25);\n      var val;\n      for (var i = 0; i < 5; i++) {\n        for (var j = 0; j < 5; j++) {\n          col[j] = matrix2[j + i * 5];\n        }\n        for (var j = 0; j < 5; j++) {\n          val = 0;\n          for (var k = 0; k < 5; k++) {\n            val += matrix1[j + k * 5] * col[k];\n          }\n          out[j + i * 5] = val;\n        }\n      }\n      return out;\n    }\n    function adjust(matrix, adjustValue) {\n      adjustValue = clamp(adjustValue, 0, 1);\n      return matrix.map(function (value, index) {\n        if (index % 6 === 0) {\n          value = 1 - (1 - value) * adjustValue;\n        } else {\n          value *= adjustValue;\n        }\n        return clamp(value, 0, 1);\n      });\n    }\n    function adjustContrast(matrix, value) {\n      var x;\n      value = clamp(value, -1, 1);\n      value *= 100;\n      if (value < 0) {\n        x = 127 + value / 100 * 127;\n      } else {\n        x = value % 1;\n        if (x === 0) {\n          x = DELTA_INDEX[value];\n        } else {\n          x = DELTA_INDEX[Math.floor(value)] * (1 - x) + DELTA_INDEX[Math.floor(value) + 1] * x;\n        }\n        x = x * 127 + 127;\n      }\n      return multiply(matrix, [\n        x / 127,\n        0,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        x / 127,\n        0,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        x / 127,\n        0,\n        0.5 * (127 - x),\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustSaturation(matrix, value) {\n      value = clamp(value, -1, 1);\n      var x = 1 + (value > 0 ? 3 * value : value);\n      var lumR = 0.3086;\n      var lumG = 0.6094;\n      var lumB = 0.082;\n      return multiply(matrix, [\n        lumR * (1 - x) + x,\n        lumG * (1 - x),\n        lumB * (1 - x),\n        0,\n        0,\n        lumR * (1 - x),\n        lumG * (1 - x) + x,\n        lumB * (1 - x),\n        0,\n        0,\n        lumR * (1 - x),\n        lumG * (1 - x),\n        lumB * (1 - x) + x,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustHue(matrix, angle) {\n      angle = clamp(angle, -180, 180) / 180 * Math.PI;\n      var cosVal = Math.cos(angle);\n      var sinVal = Math.sin(angle);\n      var lumR = 0.213;\n      var lumG = 0.715;\n      var lumB = 0.072;\n      return multiply(matrix, [\n        lumR + cosVal * (1 - lumR) + sinVal * -lumR,\n        lumG + cosVal * -lumG + sinVal * -lumG,\n        lumB + cosVal * -lumB + sinVal * (1 - lumB),\n        0,\n        0,\n        lumR + cosVal * -lumR + sinVal * 0.143,\n        lumG + cosVal * (1 - lumG) + sinVal * 0.14,\n        lumB + cosVal * -lumB + sinVal * -0.283,\n        0,\n        0,\n        lumR + cosVal * -lumR + sinVal * -(1 - lumR),\n        lumG + cosVal * -lumG + sinVal * lumG,\n        lumB + cosVal * (1 - lumB) + sinVal * lumB,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustBrightness(matrix, value) {\n      value = clamp(255 * value, -255, 255);\n      return multiply(matrix, [\n        1,\n        0,\n        0,\n        0,\n        value,\n        0,\n        1,\n        0,\n        0,\n        value,\n        0,\n        0,\n        1,\n        0,\n        value,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustColors(matrix, adjustR, adjustG, adjustB) {\n      adjustR = clamp(adjustR, 0, 2);\n      adjustG = clamp(adjustG, 0, 2);\n      adjustB = clamp(adjustB, 0, 2);\n      return multiply(matrix, [\n        adjustR,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustG,\n        0,\n        0,\n        0,\n        0,\n        0,\n        adjustB,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n    }\n    function adjustSepia(matrix, value) {\n      value = clamp(value, 0, 1);\n      return multiply(matrix, adjust([\n        0.393,\n        0.769,\n        0.189,\n        0,\n        0,\n        0.349,\n        0.686,\n        0.168,\n        0,\n        0,\n        0.272,\n        0.534,\n        0.131,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ], value));\n    }\n    function adjustGrayscale(matrix, value) {\n      value = clamp(value, 0, 1);\n      return multiply(matrix, adjust([\n        0.33,\n        0.34,\n        0.33,\n        0,\n        0,\n        0.33,\n        0.34,\n        0.33,\n        0,\n        0,\n        0.33,\n        0.34,\n        0.33,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        0,\n        1\n      ], value));\n    }\n\n    function colorFilter(ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyColorFilter(canvas, ir.getType(), matrix);\n      });\n    }\n    function applyColorFilter(canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      function applyMatrix(pixelsData, m) {\n        var r, g, b, a;\n        var data = pixelsData.data, m0 = m[0], m1 = m[1], m2 = m[2], m3 = m[3], m4 = m[4], m5 = m[5], m6 = m[6], m7 = m[7], m8 = m[8], m9 = m[9], m10 = m[10], m11 = m[11], m12 = m[12], m13 = m[13], m14 = m[14], m15 = m[15], m16 = m[16], m17 = m[17], m18 = m[18], m19 = m[19];\n        for (var i = 0; i < data.length; i += 4) {\n          r = data[i];\n          g = data[i + 1];\n          b = data[i + 2];\n          a = data[i + 3];\n          data[i] = r * m0 + g * m1 + b * m2 + a * m3 + m4;\n          data[i + 1] = r * m5 + g * m6 + b * m7 + a * m8 + m9;\n          data[i + 2] = r * m10 + g * m11 + b * m12 + a * m13 + m14;\n          data[i + 3] = r * m15 + g * m16 + b * m17 + a * m18 + m19;\n        }\n        return pixelsData;\n      }\n      var pixels = applyMatrix(context.getImageData(0, 0, canvas.width, canvas.height), matrix);\n      context.putImageData(pixels, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function convoluteFilter(ir, matrix) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyConvoluteFilter(canvas, ir.getType(), matrix);\n      });\n    }\n    function applyConvoluteFilter(canvas, type, matrix) {\n      var context = get2dContext(canvas);\n      function applyMatrix(pIn, pOut, aMatrix) {\n        function clamp(value, min, max) {\n          if (value > max) {\n            value = max;\n          } else if (value < min) {\n            value = min;\n          }\n          return value;\n        }\n        var side = Math.round(Math.sqrt(aMatrix.length));\n        var halfSide = Math.floor(side / 2);\n        var rgba = pIn.data;\n        var drgba = pOut.data;\n        var w = pIn.width;\n        var h = pIn.height;\n        for (var y = 0; y < h; y++) {\n          for (var x = 0; x < w; x++) {\n            var r = 0;\n            var g = 0;\n            var b = 0;\n            for (var cy = 0; cy < side; cy++) {\n              for (var cx = 0; cx < side; cx++) {\n                var scx = clamp(x + cx - halfSide, 0, w - 1);\n                var scy = clamp(y + cy - halfSide, 0, h - 1);\n                var innerOffset = (scy * w + scx) * 4;\n                var wt = aMatrix[cy * side + cx];\n                r += rgba[innerOffset] * wt;\n                g += rgba[innerOffset + 1] * wt;\n                b += rgba[innerOffset + 2] * wt;\n              }\n            }\n            var offset = (y * w + x) * 4;\n            drgba[offset] = clamp(r, 0, 255);\n            drgba[offset + 1] = clamp(g, 0, 255);\n            drgba[offset + 2] = clamp(b, 0, 255);\n          }\n        }\n        return pOut;\n      }\n      var pixelsIn = context.getImageData(0, 0, canvas.width, canvas.height);\n      var pixelsOut = context.getImageData(0, 0, canvas.width, canvas.height);\n      pixelsOut = applyMatrix(pixelsIn, pixelsOut, matrix);\n      context.putImageData(pixelsOut, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function functionColorFilter(colorFn) {\n      var filterImpl = function (canvas, type, value) {\n        var context = get2dContext(canvas);\n        var lookup = new Array(256);\n        function applyLookup(pixelsData, lookupData) {\n          var data = pixelsData.data;\n          for (var i = 0; i < data.length; i += 4) {\n            data[i] = lookupData[data[i]];\n            data[i + 1] = lookupData[data[i + 1]];\n            data[i + 2] = lookupData[data[i + 2]];\n          }\n          return pixelsData;\n        }\n        for (var i = 0; i < lookup.length; i++) {\n          lookup[i] = colorFn(i, value);\n        }\n        var pixels = applyLookup(context.getImageData(0, 0, canvas.width, canvas.height), lookup);\n        context.putImageData(pixels, 0, 0);\n        return fromCanvas(canvas, type);\n      };\n      return function (ir, value) {\n        return ir.toCanvas().then(function (canvas) {\n          return filterImpl(canvas, ir.getType(), value);\n        });\n      };\n    }\n    function complexAdjustableColorFilter(matrixAdjustFn) {\n      return function (ir, adjust) {\n        return colorFilter(ir, matrixAdjustFn(identity(), adjust));\n      };\n    }\n    function basicColorFilter(matrix) {\n      return function (ir) {\n        return colorFilter(ir, matrix);\n      };\n    }\n    function basicConvolutionFilter(kernel) {\n      return function (ir) {\n        return convoluteFilter(ir, kernel);\n      };\n    }\n    var invert = basicColorFilter([\n      -1,\n      0,\n      0,\n      0,\n      255,\n      0,\n      -1,\n      0,\n      0,\n      255,\n      0,\n      0,\n      -1,\n      0,\n      255,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      1\n    ]);\n    var brightness = complexAdjustableColorFilter(adjustBrightness);\n    var hue = complexAdjustableColorFilter(adjustHue);\n    var saturate = complexAdjustableColorFilter(adjustSaturation);\n    var contrast = complexAdjustableColorFilter(adjustContrast);\n    var grayscale = complexAdjustableColorFilter(adjustGrayscale);\n    var sepia = complexAdjustableColorFilter(adjustSepia);\n    var colorize = function (ir, adjustR, adjustG, adjustB) {\n      return colorFilter(ir, adjustColors(identity(), adjustR, adjustG, adjustB));\n    };\n    var sharpen = basicConvolutionFilter([\n      0,\n      -1,\n      0,\n      -1,\n      5,\n      -1,\n      0,\n      -1,\n      0\n    ]);\n    var emboss = basicConvolutionFilter([\n      -2,\n      -1,\n      0,\n      -1,\n      1,\n      1,\n      0,\n      1,\n      2\n    ]);\n    var gamma = functionColorFilter(function (color, value) {\n      return Math.pow(color / 255, 1 - value) * 255;\n    });\n    var exposure = functionColorFilter(function (color, value) {\n      return 255 * (1 - Math.exp(-(color / 255) * value));\n    });\n\n    function scale(image, dW, dH) {\n      var sW = getWidth(image);\n      var sH = getHeight(image);\n      var wRatio = dW / sW;\n      var hRatio = dH / sH;\n      var scaleCapped = false;\n      if (wRatio < 0.5 || wRatio > 2) {\n        wRatio = wRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      if (hRatio < 0.5 || hRatio > 2) {\n        hRatio = hRatio < 0.5 ? 0.5 : 2;\n        scaleCapped = true;\n      }\n      var scaled = _scale(image, wRatio, hRatio);\n      return !scaleCapped ? scaled : scaled.then(function (tCanvas) {\n        return scale(tCanvas, dW, dH);\n      });\n    }\n    function _scale(image, wRatio, hRatio) {\n      return new Promise(function (resolve) {\n        var sW = getWidth(image);\n        var sH = getHeight(image);\n        var dW = Math.floor(sW * wRatio);\n        var dH = Math.floor(sH * hRatio);\n        var canvas = create(dW, dH);\n        var context = get2dContext(canvas);\n        context.drawImage(image, 0, 0, sW, sH, 0, 0, dW, dH);\n        resolve(canvas);\n      });\n    }\n\n    function rotate(ir, angle) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyRotate(canvas, ir.getType(), angle);\n      });\n    }\n    function applyRotate(image, type, angle) {\n      var canvas = create(image.width, image.height);\n      var context = get2dContext(canvas);\n      var translateX = 0;\n      var translateY = 0;\n      angle = angle < 0 ? 360 + angle : angle;\n      if (angle === 90 || angle === 270) {\n        resize(canvas, canvas.height, canvas.width);\n      }\n      if (angle === 90 || angle === 180) {\n        translateX = canvas.width;\n      }\n      if (angle === 270 || angle === 180) {\n        translateY = canvas.height;\n      }\n      context.translate(translateX, translateY);\n      context.rotate(angle * Math.PI / 180);\n      context.drawImage(image, 0, 0);\n      return fromCanvas(canvas, type);\n    }\n    function flip(ir, axis) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyFlip(canvas, ir.getType(), axis);\n      });\n    }\n    function applyFlip(image, type, axis) {\n      var canvas = create(image.width, image.height);\n      var context = get2dContext(canvas);\n      if (axis === 'v') {\n        context.scale(1, -1);\n        context.drawImage(image, 0, -canvas.height);\n      } else {\n        context.scale(-1, 1);\n        context.drawImage(image, -canvas.width, 0);\n      }\n      return fromCanvas(canvas, type);\n    }\n    function crop(ir, x, y, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return applyCrop(canvas, ir.getType(), x, y, w, h);\n      });\n    }\n    function applyCrop(image, type, x, y, w, h) {\n      var canvas = create(w, h);\n      var context = get2dContext(canvas);\n      context.drawImage(image, -x, -y);\n      return fromCanvas(canvas, type);\n    }\n    function resize$1(ir, w, h) {\n      return ir.toCanvas().then(function (canvas) {\n        return scale(canvas, w, h).then(function (newCanvas) {\n          return fromCanvas(newCanvas, ir.getType());\n        });\n      });\n    }\n\n    var invert$1 = function (ir) {\n      return invert(ir);\n    };\n    var sharpen$1 = function (ir) {\n      return sharpen(ir);\n    };\n    var emboss$1 = function (ir) {\n      return emboss(ir);\n    };\n    var gamma$1 = function (ir, value) {\n      return gamma(ir, value);\n    };\n    var exposure$1 = function (ir, value) {\n      return exposure(ir, value);\n    };\n    var colorize$1 = function (ir, adjustR, adjustG, adjustB) {\n      return colorize(ir, adjustR, adjustG, adjustB);\n    };\n    var brightness$1 = function (ir, adjust) {\n      return brightness(ir, adjust);\n    };\n    var hue$1 = function (ir, adjust) {\n      return hue(ir, adjust);\n    };\n    var saturate$1 = function (ir, adjust) {\n      return saturate(ir, adjust);\n    };\n    var contrast$1 = function (ir, adjust) {\n      return contrast(ir, adjust);\n    };\n    var grayscale$1 = function (ir, adjust) {\n      return grayscale(ir, adjust);\n    };\n    var sepia$1 = function (ir, adjust) {\n      return sepia(ir, adjust);\n    };\n    var flip$1 = function (ir, axis) {\n      return flip(ir, axis);\n    };\n    var crop$1 = function (ir, x, y, w, h) {\n      return crop(ir, x, y, w, h);\n    };\n    var resize$2 = function (ir, w, h) {\n      return resize$1(ir, w, h);\n    };\n    var rotate$1 = function (ir, angle) {\n      return rotate(ir, angle);\n    };\n\n    var blobToImageResult = function (blob) {\n      return fromBlob(blob);\n    };\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n    var Global$1 = { getOrDie: getOrDie };\n\n    var url = function () {\n      return Global$1.getOrDie('URL');\n    };\n    var createObjectURL = function (blob) {\n      return url().createObjectURL(blob);\n    };\n    var revokeObjectURL = function (u) {\n      url().revokeObjectURL(u);\n    };\n    var URL = {\n      createObjectURL: createObjectURL,\n      revokeObjectURL: revokeObjectURL\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var getToolbarItems = function (editor) {\n      return editor.getParam('imagetools_toolbar', 'rotateleft rotateright | flipv fliph | crop editimage imageoptions');\n    };\n    var getProxyUrl = function (editor) {\n      return editor.getParam('imagetools_proxy');\n    };\n    var getCorsHosts = function (editor) {\n      return editor.getParam('imagetools_cors_hosts', [], 'string[]');\n    };\n    var getCredentialsHosts = function (editor) {\n      return editor.getParam('imagetools_credentials_hosts', [], 'string[]');\n    };\n    var getApiKey = function (editor) {\n      return editor.getParam('api_key', editor.getParam('imagetools_api_key', '', 'string'), 'string');\n    };\n    var getUploadTimeout = function (editor) {\n      return editor.getParam('images_upload_timeout', 30000, 'number');\n    };\n    var shouldReuseFilename = function (editor) {\n      return editor.getParam('images_reuse_filename', false, 'boolean');\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.ui.Factory');\n\n    function UndoStack () {\n      var data = [];\n      var index = -1;\n      function add(state) {\n        var removed;\n        removed = data.splice(++index);\n        data.push(state);\n        return {\n          state: state,\n          removed: removed\n        };\n      }\n      function undo() {\n        if (canUndo()) {\n          return data[--index];\n        }\n      }\n      function redo() {\n        if (canRedo()) {\n          return data[++index];\n        }\n      }\n      function canUndo() {\n        return index > 0;\n      }\n      function canRedo() {\n        return index !== -1 && index < data.length - 1;\n      }\n      return {\n        data: data,\n        add: add,\n        undo: undo,\n        redo: redo,\n        canUndo: canUndo,\n        canRedo: canRedo\n      };\n    }\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.geom.Rect');\n\n    var loadImage = function (image) {\n      return new global$3(function (resolve) {\n        var loaded = function () {\n          image.removeEventListener('load', loaded);\n          resolve(image);\n        };\n        if (image.complete) {\n          resolve(image);\n        } else {\n          image.addEventListener('load', loaded);\n        }\n      });\n    };\n    var LoadImage = { loadImage: loadImage };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.util.Observable');\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var count = 0;\n    function CropRect (currentRect, viewPortRect, clampRect, containerElm, action) {\n      var instance;\n      var handles;\n      var dragHelpers;\n      var blockers;\n      var prefix = 'mce-';\n      var id = prefix + 'crid-' + count++;\n      handles = [\n        {\n          name: 'move',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: 0,\n          deltaH: 0,\n          label: 'Crop Mask'\n        },\n        {\n          name: 'nw',\n          xMul: 0,\n          yMul: 0,\n          deltaX: 1,\n          deltaY: 1,\n          deltaW: -1,\n          deltaH: -1,\n          label: 'Top Left Crop Handle'\n        },\n        {\n          name: 'ne',\n          xMul: 1,\n          yMul: 0,\n          deltaX: 0,\n          deltaY: 1,\n          deltaW: 1,\n          deltaH: -1,\n          label: 'Top Right Crop Handle'\n        },\n        {\n          name: 'sw',\n          xMul: 0,\n          yMul: 1,\n          deltaX: 1,\n          deltaY: 0,\n          deltaW: -1,\n          deltaH: 1,\n          label: 'Bottom Left Crop Handle'\n        },\n        {\n          name: 'se',\n          xMul: 1,\n          yMul: 1,\n          deltaX: 0,\n          deltaY: 0,\n          deltaW: 1,\n          deltaH: 1,\n          label: 'Bottom Right Crop Handle'\n        }\n      ];\n      blockers = [\n        'top',\n        'right',\n        'bottom',\n        'left'\n      ];\n      function getAbsoluteRect(outerRect, relativeRect) {\n        return {\n          x: relativeRect.x + outerRect.x,\n          y: relativeRect.y + outerRect.y,\n          w: relativeRect.w,\n          h: relativeRect.h\n        };\n      }\n      function getRelativeRect(outerRect, innerRect) {\n        return {\n          x: innerRect.x - outerRect.x,\n          y: innerRect.y - outerRect.y,\n          w: innerRect.w,\n          h: innerRect.h\n        };\n      }\n      function getInnerRect() {\n        return getRelativeRect(clampRect, currentRect);\n      }\n      function moveRect(handle, startRect, deltaX, deltaY) {\n        var x, y, w, h, rect;\n        x = startRect.x;\n        y = startRect.y;\n        w = startRect.w;\n        h = startRect.h;\n        x += deltaX * handle.deltaX;\n        y += deltaY * handle.deltaY;\n        w += deltaX * handle.deltaW;\n        h += deltaY * handle.deltaH;\n        if (w < 20) {\n          w = 20;\n        }\n        if (h < 20) {\n          h = 20;\n        }\n        rect = currentRect = global$7.clamp({\n          x: x,\n          y: y,\n          w: w,\n          h: h\n        }, clampRect, handle.name === 'move');\n        rect = getRelativeRect(clampRect, rect);\n        instance.fire('updateRect', { rect: rect });\n        setInnerRect(rect);\n      }\n      function render() {\n        function createDragHelper(handle) {\n          var startRect;\n          var DragHelper = global$6.get('DragHelper');\n          return new DragHelper(id, {\n            document: containerElm.ownerDocument,\n            handle: id + '-' + handle.name,\n            start: function () {\n              startRect = currentRect;\n            },\n            drag: function (e) {\n              moveRect(handle, startRect, e.deltaX, e.deltaY);\n            }\n          });\n        }\n        global$8('<div id=\"' + id + '\" class=\"' + prefix + 'croprect-container\"' + ' role=\"grid\" aria-dropeffect=\"execute\">').appendTo(containerElm);\n        global$1.each(blockers, function (blocker) {\n          global$8('#' + id, containerElm).append('<div id=\"' + id + '-' + blocker + '\"class=\"' + prefix + 'croprect-block\" style=\"display: none\" data-mce-bogus=\"all\">');\n        });\n        global$1.each(handles, function (handle) {\n          global$8('#' + id, containerElm).append('<div id=\"' + id + '-' + handle.name + '\" class=\"' + prefix + 'croprect-handle ' + prefix + 'croprect-handle-' + handle.name + '\"' + 'style=\"display: none\" data-mce-bogus=\"all\" role=\"gridcell\" tabindex=\"-1\"' + ' aria-label=\"' + handle.label + '\" aria-grabbed=\"false\">');\n        });\n        dragHelpers = global$1.map(handles, createDragHelper);\n        repaint(currentRect);\n        global$8(containerElm).on('focusin focusout', function (e) {\n          global$8(e.target).attr('aria-grabbed', e.type === 'focus');\n        });\n        global$8(containerElm).on('keydown', function (e) {\n          var activeHandle;\n          global$1.each(handles, function (handle) {\n            if (e.target.id === id + '-' + handle.name) {\n              activeHandle = handle;\n              return false;\n            }\n          });\n          function moveAndBlock(evt, handle, startRect, deltaX, deltaY) {\n            evt.stopPropagation();\n            evt.preventDefault();\n            moveRect(activeHandle, startRect, deltaX, deltaY);\n          }\n          switch (e.keyCode) {\n          case global$a.LEFT:\n            moveAndBlock(e, activeHandle, currentRect, -10, 0);\n            break;\n          case global$a.RIGHT:\n            moveAndBlock(e, activeHandle, currentRect, 10, 0);\n            break;\n          case global$a.UP:\n            moveAndBlock(e, activeHandle, currentRect, 0, -10);\n            break;\n          case global$a.DOWN:\n            moveAndBlock(e, activeHandle, currentRect, 0, 10);\n            break;\n          case global$a.ENTER:\n          case global$a.SPACEBAR:\n            e.preventDefault();\n            action();\n            break;\n          }\n        });\n      }\n      function toggleVisibility(state) {\n        var selectors;\n        selectors = global$1.map(handles, function (handle) {\n          return '#' + id + '-' + handle.name;\n        }).concat(global$1.map(blockers, function (blocker) {\n          return '#' + id + '-' + blocker;\n        })).join(',');\n        if (state) {\n          global$8(selectors, containerElm).show();\n        } else {\n          global$8(selectors, containerElm).hide();\n        }\n      }\n      function repaint(rect) {\n        function updateElementRect(name, rect) {\n          if (rect.h < 0) {\n            rect.h = 0;\n          }\n          if (rect.w < 0) {\n            rect.w = 0;\n          }\n          global$8('#' + id + '-' + name, containerElm).css({\n            left: rect.x,\n            top: rect.y,\n            width: rect.w,\n            height: rect.h\n          });\n        }\n        global$1.each(handles, function (handle) {\n          global$8('#' + id + '-' + handle.name, containerElm).css({\n            left: rect.w * handle.xMul + rect.x,\n            top: rect.h * handle.yMul + rect.y\n          });\n        });\n        updateElementRect('top', {\n          x: viewPortRect.x,\n          y: viewPortRect.y,\n          w: viewPortRect.w,\n          h: rect.y - viewPortRect.y\n        });\n        updateElementRect('right', {\n          x: rect.x + rect.w,\n          y: rect.y,\n          w: viewPortRect.w - rect.x - rect.w + viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('bottom', {\n          x: viewPortRect.x,\n          y: rect.y + rect.h,\n          w: viewPortRect.w,\n          h: viewPortRect.h - rect.y - rect.h + viewPortRect.y\n        });\n        updateElementRect('left', {\n          x: viewPortRect.x,\n          y: rect.y,\n          w: rect.x - viewPortRect.x,\n          h: rect.h\n        });\n        updateElementRect('move', rect);\n      }\n      function setRect(rect) {\n        currentRect = rect;\n        repaint(currentRect);\n      }\n      function setViewPortRect(rect) {\n        viewPortRect = rect;\n        repaint(currentRect);\n      }\n      function setInnerRect(rect) {\n        setRect(getAbsoluteRect(clampRect, rect));\n      }\n      function setClampRect(rect) {\n        clampRect = rect;\n        repaint(currentRect);\n      }\n      function destroy() {\n        global$1.each(dragHelpers, function (helper) {\n          helper.destroy();\n        });\n        dragHelpers = [];\n      }\n      render();\n      instance = global$1.extend({\n        toggleVisibility: toggleVisibility,\n        setClampRect: setClampRect,\n        setRect: setRect,\n        getInnerRect: getInnerRect,\n        setInnerRect: setInnerRect,\n        setViewPortRect: setViewPortRect,\n        destroy: destroy\n      }, global$9);\n      return instance;\n    }\n\n    var create$2 = function (settings) {\n      var Control = global$6.get('Control');\n      var ImagePanel = Control.extend({\n        Defaults: { classes: 'imagepanel' },\n        selection: function (rect) {\n          if (arguments.length) {\n            this.state.set('rect', rect);\n            return this;\n          }\n          return this.state.get('rect');\n        },\n        imageSize: function () {\n          var viewRect = this.state.get('viewRect');\n          return {\n            w: viewRect.w,\n            h: viewRect.h\n          };\n        },\n        toggleCropRect: function (state) {\n          this.state.set('cropEnabled', state);\n        },\n        imageSrc: function (url) {\n          var self = this, img = new domGlobals.Image();\n          img.src = url;\n          LoadImage.loadImage(img).then(function () {\n            var rect, $img;\n            var lastRect = self.state.get('viewRect');\n            $img = self.$el.find('img');\n            if ($img[0]) {\n              $img.replaceWith(img);\n            } else {\n              var bg = domGlobals.document.createElement('div');\n              bg.className = 'mce-imagepanel-bg';\n              self.getEl().appendChild(bg);\n              self.getEl().appendChild(img);\n            }\n            rect = {\n              x: 0,\n              y: 0,\n              w: img.naturalWidth,\n              h: img.naturalHeight\n            };\n            self.state.set('viewRect', rect);\n            self.state.set('rect', global$7.inflate(rect, -20, -20));\n            if (!lastRect || lastRect.w !== rect.w || lastRect.h !== rect.h) {\n              self.zoomFit();\n            }\n            self.repaintImage();\n            self.fire('load');\n          });\n        },\n        zoom: function (value) {\n          if (arguments.length) {\n            this.state.set('zoom', value);\n            return this;\n          }\n          return this.state.get('zoom');\n        },\n        postRender: function () {\n          this.imageSrc(this.settings.imageSrc);\n          return this._super();\n        },\n        zoomFit: function () {\n          var self = this;\n          var $img, pw, ph, w, h, zoom, padding;\n          padding = 10;\n          $img = self.$el.find('img');\n          pw = self.getEl().clientWidth;\n          ph = self.getEl().clientHeight;\n          w = $img[0].naturalWidth;\n          h = $img[0].naturalHeight;\n          zoom = Math.min((pw - padding) / w, (ph - padding) / h);\n          if (zoom >= 1) {\n            zoom = 1;\n          }\n          self.zoom(zoom);\n        },\n        repaintImage: function () {\n          var x, y, w, h, pw, ph, $img, $bg, zoom, rect, elm;\n          elm = this.getEl();\n          zoom = this.zoom();\n          rect = this.state.get('rect');\n          $img = this.$el.find('img');\n          $bg = this.$el.find('.mce-imagepanel-bg');\n          pw = elm.offsetWidth;\n          ph = elm.offsetHeight;\n          w = $img[0].naturalWidth * zoom;\n          h = $img[0].naturalHeight * zoom;\n          x = Math.max(0, pw / 2 - w / 2);\n          y = Math.max(0, ph / 2 - h / 2);\n          $img.css({\n            left: x,\n            top: y,\n            width: w,\n            height: h\n          });\n          $bg.css({\n            left: x,\n            top: y,\n            width: w,\n            height: h\n          });\n          if (this.cropRect) {\n            this.cropRect.setRect({\n              x: rect.x * zoom + x,\n              y: rect.y * zoom + y,\n              w: rect.w * zoom,\n              h: rect.h * zoom\n            });\n            this.cropRect.setClampRect({\n              x: x,\n              y: y,\n              w: w,\n              h: h\n            });\n            this.cropRect.setViewPortRect({\n              x: 0,\n              y: 0,\n              w: pw,\n              h: ph\n            });\n          }\n        },\n        bindStates: function () {\n          var self = this;\n          function setupCropRect(rect) {\n            self.cropRect = CropRect(rect, self.state.get('viewRect'), self.state.get('viewRect'), self.getEl(), function () {\n              self.fire('crop');\n            });\n            self.cropRect.on('updateRect', function (e) {\n              var rect = e.rect;\n              var zoom = self.zoom();\n              rect = {\n                x: Math.round(rect.x / zoom),\n                y: Math.round(rect.y / zoom),\n                w: Math.round(rect.w / zoom),\n                h: Math.round(rect.h / zoom)\n              };\n              self.state.set('rect', rect);\n            });\n            self.on('remove', self.cropRect.destroy);\n          }\n          self.state.on('change:cropEnabled', function (e) {\n            self.cropRect.toggleVisibility(e.value);\n            self.repaintImage();\n          });\n          self.state.on('change:zoom', function () {\n            self.repaintImage();\n          });\n          self.state.on('change:rect', function (e) {\n            var rect = e.value;\n            if (!self.cropRect) {\n              setupCropRect(rect);\n            }\n            self.cropRect.setRect(rect);\n          });\n        }\n      });\n      return new ImagePanel(settings);\n    };\n    var ImagePanel = { create: create$2 };\n\n    function createState(blob) {\n      return {\n        blob: blob,\n        url: URL.createObjectURL(blob)\n      };\n    }\n    function destroyState(state) {\n      if (state) {\n        URL.revokeObjectURL(state.url);\n      }\n    }\n    function destroyStates(states) {\n      global$1.each(states, destroyState);\n    }\n    function open(editor, currentState, resolve, reject) {\n      var win, undoStack = UndoStack(), mainPanel, filtersPanel, tempState, cropPanel, resizePanel, flipRotatePanel, imagePanel, sidePanel, mainViewContainer, invertPanel, brightnessPanel, huePanel, saturatePanel, contrastPanel, grayscalePanel, sepiaPanel, colorizePanel, sharpenPanel, embossPanel, gammaPanel, exposurePanel, panels, width, height, ratioW, ratioH;\n      var reverseIfRtl = function (items) {\n        return editor.rtl ? items.reverse() : items;\n      };\n      function recalcSize(e) {\n        var widthCtrl, heightCtrl, newWidth, newHeight;\n        widthCtrl = win.find('#w')[0];\n        heightCtrl = win.find('#h')[0];\n        newWidth = parseInt(widthCtrl.value(), 10);\n        newHeight = parseInt(heightCtrl.value(), 10);\n        if (win.find('#constrain')[0].checked() && width && height && newWidth && newHeight) {\n          if (e.control.settings.name === 'w') {\n            newHeight = Math.round(newWidth * ratioW);\n            heightCtrl.value(newHeight);\n          } else {\n            newWidth = Math.round(newHeight * ratioH);\n            widthCtrl.value(newWidth);\n          }\n        }\n        width = newWidth;\n        height = newHeight;\n      }\n      function floatToPercent(value) {\n        return Math.round(value * 100) + '%';\n      }\n      function updateButtonUndoStates() {\n        win.find('#undo').disabled(!undoStack.canUndo());\n        win.find('#redo').disabled(!undoStack.canRedo());\n        win.statusbar.find('#save').disabled(!undoStack.canUndo());\n      }\n      function disableUndoRedo() {\n        win.find('#undo').disabled(true);\n        win.find('#redo').disabled(true);\n      }\n      function displayState(state) {\n        if (state) {\n          imagePanel.imageSrc(state.url);\n        }\n      }\n      function switchPanel(targetPanel) {\n        return function () {\n          var hidePanels = global$1.grep(panels, function (panel) {\n            return panel.settings.name !== targetPanel;\n          });\n          global$1.each(hidePanels, function (panel) {\n            panel.hide();\n          });\n          targetPanel.show();\n          targetPanel.focus();\n        };\n      }\n      function addTempState(blob) {\n        tempState = createState(blob);\n        displayState(tempState);\n      }\n      function addBlobState(blob) {\n        currentState = createState(blob);\n        displayState(currentState);\n        destroyStates(undoStack.add(currentState).removed);\n        updateButtonUndoStates();\n      }\n      function crop() {\n        var rect = imagePanel.selection();\n        blobToImageResult(currentState.blob).then(function (ir) {\n          crop$1(ir, rect.x, rect.y, rect.w, rect.h).then(imageResultToBlob).then(function (blob) {\n            addBlobState(blob);\n            cancel();\n          });\n        });\n      }\n      var tempAction = function (fn) {\n        var args = [].slice.call(arguments, 1);\n        return function () {\n          var state = tempState || currentState;\n          blobToImageResult(state.blob).then(function (ir) {\n            fn.apply(this, [ir].concat(args)).then(imageResultToBlob).then(addTempState);\n          });\n        };\n      };\n      function action(fn) {\n        var arg = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          arg[_i - 1] = arguments[_i];\n        }\n        var args = [].slice.call(arguments, 1);\n        return function () {\n          blobToImageResult(currentState.blob).then(function (ir) {\n            fn.apply(this, [ir].concat(args)).then(imageResultToBlob).then(addBlobState);\n          });\n        };\n      }\n      function cancel() {\n        displayState(currentState);\n        destroyState(tempState);\n        switchPanel(mainPanel)();\n        updateButtonUndoStates();\n      }\n      function waitForTempState(times, applyCall) {\n        if (tempState) {\n          applyCall();\n        } else {\n          setTimeout(function () {\n            if (times-- > 0) {\n              waitForTempState(times, applyCall);\n            } else {\n              editor.windowManager.alert('Error: failed to apply image operation.');\n            }\n          }, 10);\n        }\n      }\n      function applyTempState() {\n        if (tempState) {\n          addBlobState(tempState.blob);\n          cancel();\n        } else {\n          waitForTempState(100, applyTempState);\n        }\n      }\n      function zoomIn() {\n        var zoom = imagePanel.zoom();\n        if (zoom < 2) {\n          zoom += 0.1;\n        }\n        imagePanel.zoom(zoom);\n      }\n      function zoomOut() {\n        var zoom = imagePanel.zoom();\n        if (zoom > 0.1) {\n          zoom -= 0.1;\n        }\n        imagePanel.zoom(zoom);\n      }\n      function undo() {\n        currentState = undoStack.undo();\n        displayState(currentState);\n        updateButtonUndoStates();\n      }\n      function redo() {\n        currentState = undoStack.redo();\n        displayState(currentState);\n        updateButtonUndoStates();\n      }\n      function save() {\n        resolve(currentState.blob);\n        win.close();\n      }\n      function createPanel(items) {\n        return global$6.create('Form', {\n          layout: 'flex',\n          direction: 'row',\n          labelGap: 5,\n          border: '0 0 1 0',\n          align: 'center',\n          pack: 'center',\n          padding: '0 10 0 10',\n          spacing: 5,\n          flex: 0,\n          minHeight: 60,\n          defaults: {\n            classes: 'imagetool',\n            type: 'button'\n          },\n          items: items\n        });\n      }\n      var imageResultToBlob = function (ir) {\n        return ir.toBlob();\n      };\n      function createFilterPanel(title, filter) {\n        return createPanel(reverseIfRtl([\n          {\n            text: 'Back',\n            onclick: cancel\n          },\n          {\n            type: 'spacer',\n            flex: 1\n          },\n          {\n            text: 'Apply',\n            subtype: 'primary',\n            onclick: applyTempState\n          }\n        ])).hide().on('show', function () {\n          disableUndoRedo();\n          blobToImageResult(currentState.blob).then(function (ir) {\n            return filter(ir);\n          }).then(imageResultToBlob).then(function (blob) {\n            var newTempState = createState(blob);\n            displayState(newTempState);\n            destroyState(tempState);\n            tempState = newTempState;\n          });\n        });\n      }\n      function createVariableFilterPanel(title, filter, value, min, max) {\n        function update(value) {\n          blobToImageResult(currentState.blob).then(function (ir) {\n            return filter(ir, value);\n          }).then(imageResultToBlob).then(function (blob) {\n            var newTempState = createState(blob);\n            displayState(newTempState);\n            destroyState(tempState);\n            tempState = newTempState;\n          });\n        }\n        return createPanel(reverseIfRtl([\n          {\n            text: 'Back',\n            onclick: cancel\n          },\n          {\n            type: 'spacer',\n            flex: 1\n          },\n          {\n            type: 'slider',\n            flex: 1,\n            ondragend: function (e) {\n              update(e.value);\n            },\n            minValue: editor.rtl ? max : min,\n            maxValue: editor.rtl ? min : max,\n            value: value,\n            previewFilter: floatToPercent\n          },\n          {\n            type: 'spacer',\n            flex: 1\n          },\n          {\n            text: 'Apply',\n            subtype: 'primary',\n            onclick: applyTempState\n          }\n        ])).hide().on('show', function () {\n          this.find('slider').value(value);\n          disableUndoRedo();\n        });\n      }\n      function createRgbFilterPanel(title, filter) {\n        function update() {\n          var r, g, b;\n          r = win.find('#r')[0].value();\n          g = win.find('#g')[0].value();\n          b = win.find('#b')[0].value();\n          blobToImageResult(currentState.blob).then(function (ir) {\n            return filter(ir, r, g, b);\n          }).then(imageResultToBlob).then(function (blob) {\n            var newTempState = createState(blob);\n            displayState(newTempState);\n            destroyState(tempState);\n            tempState = newTempState;\n          });\n        }\n        var min = editor.rtl ? 2 : 0;\n        var max = editor.rtl ? 0 : 2;\n        return createPanel(reverseIfRtl([\n          {\n            text: 'Back',\n            onclick: cancel\n          },\n          {\n            type: 'spacer',\n            flex: 1\n          },\n          {\n            type: 'slider',\n            label: 'R',\n            name: 'r',\n            minValue: min,\n            value: 1,\n            maxValue: max,\n            ondragend: update,\n            previewFilter: floatToPercent\n          },\n          {\n            type: 'slider',\n            label: 'G',\n            name: 'g',\n            minValue: min,\n            value: 1,\n            maxValue: max,\n            ondragend: update,\n            previewFilter: floatToPercent\n          },\n          {\n            type: 'slider',\n            label: 'B',\n            name: 'b',\n            minValue: min,\n            value: 1,\n            maxValue: max,\n            ondragend: update,\n            previewFilter: floatToPercent\n          },\n          {\n            type: 'spacer',\n            flex: 1\n          },\n          {\n            text: 'Apply',\n            subtype: 'primary',\n            onclick: applyTempState\n          }\n        ])).hide().on('show', function () {\n          win.find('#r,#g,#b').value(1);\n          disableUndoRedo();\n        });\n      }\n      cropPanel = createPanel(reverseIfRtl([\n        {\n          text: 'Back',\n          onclick: cancel\n        },\n        {\n          type: 'spacer',\n          flex: 1\n        },\n        {\n          text: 'Apply',\n          subtype: 'primary',\n          onclick: crop\n        }\n      ])).hide().on('show hide', function (e) {\n        imagePanel.toggleCropRect(e.type === 'show');\n      }).on('show', disableUndoRedo);\n      function toggleConstrain(e) {\n        if (e.control.value() === true) {\n          ratioW = height / width;\n          ratioH = width / height;\n        }\n      }\n      resizePanel = createPanel(reverseIfRtl([\n        {\n          text: 'Back',\n          onclick: cancel\n        },\n        {\n          type: 'spacer',\n          flex: 1\n        },\n        {\n          type: 'textbox',\n          name: 'w',\n          label: 'Width',\n          size: 4,\n          onkeyup: recalcSize\n        },\n        {\n          type: 'textbox',\n          name: 'h',\n          label: 'Height',\n          size: 4,\n          onkeyup: recalcSize\n        },\n        {\n          type: 'checkbox',\n          name: 'constrain',\n          text: 'Constrain proportions',\n          checked: true,\n          onchange: toggleConstrain\n        },\n        {\n          type: 'spacer',\n          flex: 1\n        },\n        {\n          text: 'Apply',\n          subtype: 'primary',\n          onclick: 'submit'\n        }\n      ])).hide().on('submit', function (e) {\n        var width = parseInt(win.find('#w').value(), 10), height = parseInt(win.find('#h').value(), 10);\n        e.preventDefault();\n        action(resize$2, width, height)();\n        cancel();\n      }).on('show', disableUndoRedo);\n      flipRotatePanel = createPanel(reverseIfRtl([\n        {\n          text: 'Back',\n          onclick: cancel\n        },\n        {\n          type: 'spacer',\n          flex: 1\n        },\n        {\n          icon: 'fliph',\n          tooltip: 'Flip horizontally',\n          onclick: tempAction(flip$1, 'h')\n        },\n        {\n          icon: 'flipv',\n          tooltip: 'Flip vertically',\n          onclick: tempAction(flip$1, 'v')\n        },\n        {\n          icon: 'rotateleft',\n          tooltip: 'Rotate counterclockwise',\n          onclick: tempAction(rotate$1, -90)\n        },\n        {\n          icon: 'rotateright',\n          tooltip: 'Rotate clockwise',\n          onclick: tempAction(rotate$1, 90)\n        },\n        {\n          type: 'spacer',\n          flex: 1\n        },\n        {\n          text: 'Apply',\n          subtype: 'primary',\n          onclick: applyTempState\n        }\n      ])).hide().on('show', disableUndoRedo);\n      invertPanel = createFilterPanel('Invert', invert$1);\n      sharpenPanel = createFilterPanel('Sharpen', sharpen$1);\n      embossPanel = createFilterPanel('Emboss', emboss$1);\n      brightnessPanel = createVariableFilterPanel('Brightness', brightness$1, 0, -1, 1);\n      huePanel = createVariableFilterPanel('Hue', hue$1, 180, 0, 360);\n      saturatePanel = createVariableFilterPanel('Saturate', saturate$1, 0, -1, 1);\n      contrastPanel = createVariableFilterPanel('Contrast', contrast$1, 0, -1, 1);\n      grayscalePanel = createVariableFilterPanel('Grayscale', grayscale$1, 0, 0, 1);\n      sepiaPanel = createVariableFilterPanel('Sepia', sepia$1, 0, 0, 1);\n      colorizePanel = createRgbFilterPanel('Colorize', colorize$1);\n      gammaPanel = createVariableFilterPanel('Gamma', gamma$1, 0, -1, 1);\n      exposurePanel = createVariableFilterPanel('Exposure', exposure$1, 1, 0, 2);\n      filtersPanel = createPanel(reverseIfRtl([\n        {\n          text: 'Back',\n          onclick: cancel\n        },\n        {\n          type: 'spacer',\n          flex: 1\n        },\n        {\n          text: 'hue',\n          icon: 'hue',\n          onclick: switchPanel(huePanel)\n        },\n        {\n          text: 'saturate',\n          icon: 'saturate',\n          onclick: switchPanel(saturatePanel)\n        },\n        {\n          text: 'sepia',\n          icon: 'sepia',\n          onclick: switchPanel(sepiaPanel)\n        },\n        {\n          text: 'emboss',\n          icon: 'emboss',\n          onclick: switchPanel(embossPanel)\n        },\n        {\n          text: 'exposure',\n          icon: 'exposure',\n          onclick: switchPanel(exposurePanel)\n        },\n        {\n          type: 'spacer',\n          flex: 1\n        }\n      ])).hide();\n      mainPanel = createPanel(reverseIfRtl([\n        {\n          tooltip: 'Crop',\n          icon: 'crop',\n          onclick: switchPanel(cropPanel)\n        },\n        {\n          tooltip: 'Resize',\n          icon: 'resize2',\n          onclick: switchPanel(resizePanel)\n        },\n        {\n          tooltip: 'Orientation',\n          icon: 'orientation',\n          onclick: switchPanel(flipRotatePanel)\n        },\n        {\n          tooltip: 'Brightness',\n          icon: 'sun',\n          onclick: switchPanel(brightnessPanel)\n        },\n        {\n          tooltip: 'Sharpen',\n          icon: 'sharpen',\n          onclick: switchPanel(sharpenPanel)\n        },\n        {\n          tooltip: 'Contrast',\n          icon: 'contrast',\n          onclick: switchPanel(contrastPanel)\n        },\n        {\n          tooltip: 'Color levels',\n          icon: 'drop',\n          onclick: switchPanel(colorizePanel)\n        },\n        {\n          tooltip: 'Gamma',\n          icon: 'gamma',\n          onclick: switchPanel(gammaPanel)\n        },\n        {\n          tooltip: 'Invert',\n          icon: 'invert',\n          onclick: switchPanel(invertPanel)\n        }\n      ]));\n      imagePanel = ImagePanel.create({\n        flex: 1,\n        imageSrc: currentState.url\n      });\n      sidePanel = global$6.create('Container', {\n        layout: 'flex',\n        direction: 'column',\n        pack: 'start',\n        border: '0 1 0 0',\n        padding: 5,\n        spacing: 5,\n        items: [\n          {\n            type: 'button',\n            icon: 'undo',\n            tooltip: 'Undo',\n            name: 'undo',\n            onclick: undo\n          },\n          {\n            type: 'button',\n            icon: 'redo',\n            tooltip: 'Redo',\n            name: 'redo',\n            onclick: redo\n          },\n          {\n            type: 'button',\n            icon: 'zoomin',\n            tooltip: 'Zoom in',\n            onclick: zoomIn\n          },\n          {\n            type: 'button',\n            icon: 'zoomout',\n            tooltip: 'Zoom out',\n            onclick: zoomOut\n          }\n        ]\n      });\n      mainViewContainer = global$6.create('Container', {\n        type: 'container',\n        layout: 'flex',\n        direction: 'row',\n        align: 'stretch',\n        flex: 1,\n        items: reverseIfRtl([\n          sidePanel,\n          imagePanel\n        ])\n      });\n      panels = [\n        mainPanel,\n        cropPanel,\n        resizePanel,\n        flipRotatePanel,\n        filtersPanel,\n        invertPanel,\n        brightnessPanel,\n        huePanel,\n        saturatePanel,\n        contrastPanel,\n        grayscalePanel,\n        sepiaPanel,\n        colorizePanel,\n        sharpenPanel,\n        embossPanel,\n        gammaPanel,\n        exposurePanel\n      ];\n      win = editor.windowManager.open({\n        layout: 'flex',\n        direction: 'column',\n        align: 'stretch',\n        minWidth: Math.min(global$5.DOM.getViewPort().w, 800),\n        minHeight: Math.min(global$5.DOM.getViewPort().h, 650),\n        title: 'Edit image',\n        items: panels.concat([mainViewContainer]),\n        buttons: reverseIfRtl([\n          {\n            text: 'Save',\n            name: 'save',\n            subtype: 'primary',\n            onclick: save\n          },\n          {\n            text: 'Cancel',\n            onclick: 'close'\n          }\n        ])\n      });\n      win.on('close', function () {\n        reject();\n        destroyStates(undoStack.data);\n        undoStack = null;\n        tempState = null;\n      });\n      undoStack.add(currentState);\n      updateButtonUndoStates();\n      imagePanel.on('load', function () {\n        width = imagePanel.imageSize().w;\n        height = imagePanel.imageSize().h;\n        ratioW = height / width;\n        ratioH = width / height;\n        win.find('#w').value(width);\n        win.find('#h').value(height);\n      });\n      imagePanel.on('crop', crop);\n    }\n    function edit(editor, imageResult) {\n      return new global$3(function (resolve, reject) {\n        return imageResult.toBlob().then(function (blob) {\n          open(editor, createState(blob), resolve, reject);\n        });\n      });\n    }\n    var Dialog = { edit: edit };\n\n    function getImageSize(img) {\n      var width, height;\n      function isPxValue(value) {\n        return /^[0-9\\.]+px$/.test(value);\n      }\n      width = img.style.width;\n      height = img.style.height;\n      if (width || height) {\n        if (isPxValue(width) && isPxValue(height)) {\n          return {\n            w: parseInt(width, 10),\n            h: parseInt(height, 10)\n          };\n        }\n        return null;\n      }\n      width = img.width;\n      height = img.height;\n      if (width && height) {\n        return {\n          w: parseInt(width, 10),\n          h: parseInt(height, 10)\n        };\n      }\n      return null;\n    }\n    function setImageSize(img, size) {\n      var width, height;\n      if (size) {\n        width = img.style.width;\n        height = img.style.height;\n        if (width || height) {\n          img.style.width = size.w + 'px';\n          img.style.height = size.h + 'px';\n          img.removeAttribute('data-mce-style');\n        }\n        width = img.width;\n        height = img.height;\n        if (width || height) {\n          img.setAttribute('width', size.w);\n          img.setAttribute('height', size.h);\n        }\n      }\n    }\n    function getNaturalImageSize(img) {\n      return {\n        w: img.naturalWidth,\n        h: img.naturalHeight\n      };\n    }\n    var ImageSize = {\n      getImageSize: getImageSize,\n      setImageSize: setImageSize,\n      getNaturalImageSize: getNaturalImageSize\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isFunction = isType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    function FileReader () {\n      var f = Global$1.getOrDie('FileReader');\n      return new f();\n    }\n\n    function XMLHttpRequest () {\n      var f = Global$1.getOrDie('XMLHttpRequest');\n      return new f();\n    }\n\n    var isValue = function (obj) {\n      return obj !== null && obj !== undefined;\n    };\n    var traverse = function (json, path) {\n      var value;\n      value = path.reduce(function (result, key) {\n        return isValue(result) ? result[key] : undefined;\n      }, json);\n      return isValue(value) ? value : null;\n    };\n    var requestUrlAsBlob = function (url, headers, withCredentials) {\n      return new global$3(function (resolve) {\n        var xhr;\n        xhr = XMLHttpRequest();\n        xhr.onreadystatechange = function () {\n          if (xhr.readyState === 4) {\n            resolve({\n              status: xhr.status,\n              blob: this.response\n            });\n          }\n        };\n        xhr.open('GET', url, true);\n        xhr.withCredentials = withCredentials;\n        global$1.each(headers, function (value, key) {\n          xhr.setRequestHeader(key, value);\n        });\n        xhr.responseType = 'blob';\n        xhr.send();\n      });\n    };\n    var readBlob = function (blob) {\n      return new global$3(function (resolve) {\n        var fr = FileReader();\n        fr.onload = function (e) {\n          var data = e.target;\n          resolve(data.result);\n        };\n        fr.readAsText(blob);\n      });\n    };\n    var parseJson = function (text) {\n      var json;\n      try {\n        json = JSON.parse(text);\n      } catch (ex) {\n      }\n      return json;\n    };\n    var Utils = {\n      traverse: traverse,\n      readBlob: readBlob,\n      requestUrlAsBlob: requestUrlAsBlob,\n      parseJson: parseJson\n    };\n\n    var friendlyHttpErrors = [\n      {\n        code: 404,\n        message: 'Could not find Image Proxy'\n      },\n      {\n        code: 403,\n        message: 'Rejected request'\n      },\n      {\n        code: 0,\n        message: 'Incorrect Image Proxy URL'\n      }\n    ];\n    var friendlyServiceErrors = [\n      {\n        type: 'key_missing',\n        message: 'The request did not include an api key.'\n      },\n      {\n        type: 'key_not_found',\n        message: 'The provided api key could not be found.'\n      },\n      {\n        type: 'domain_not_trusted',\n        message: 'The api key is not valid for the request origins.'\n      }\n    ];\n    var isServiceErrorCode = function (code) {\n      return code === 400 || code === 403 || code === 500;\n    };\n    var getHttpErrorMsg = function (status) {\n      var message = find(friendlyHttpErrors, function (error) {\n        return status === error.code;\n      }).fold(constant('Unknown ImageProxy error'), function (error) {\n        return error.message;\n      });\n      return 'ImageProxy HTTP error: ' + message;\n    };\n    var handleHttpError = function (status) {\n      var message = getHttpErrorMsg(status);\n      return global$3.reject(message);\n    };\n    var getServiceErrorMsg = function (type) {\n      return find(friendlyServiceErrors, function (error) {\n        return error.type === type;\n      }).fold(constant('Unknown service error'), function (error) {\n        return error.message;\n      });\n    };\n    var getServiceError = function (text) {\n      var serviceError = Utils.parseJson(text);\n      var errorType = Utils.traverse(serviceError, [\n        'error',\n        'type'\n      ]);\n      var errorMsg = errorType ? getServiceErrorMsg(errorType) : 'Invalid JSON in service error message';\n      return 'ImageProxy Service error: ' + errorMsg;\n    };\n    var handleServiceError = function (status, blob) {\n      return Utils.readBlob(blob).then(function (text) {\n        var serviceError = getServiceError(text);\n        return global$3.reject(serviceError);\n      });\n    };\n    var handleServiceErrorResponse = function (status, blob) {\n      return isServiceErrorCode(status) ? handleServiceError(status, blob) : handleHttpError(status);\n    };\n    var Errors = {\n      handleServiceErrorResponse: handleServiceErrorResponse,\n      handleHttpError: handleHttpError,\n      getHttpErrorMsg: getHttpErrorMsg,\n      getServiceErrorMsg: getServiceErrorMsg\n    };\n\n    var appendApiKey = function (url, apiKey) {\n      var separator = url.indexOf('?') === -1 ? '?' : '&';\n      if (/[?&]apiKey=/.test(url) || !apiKey) {\n        return url;\n      } else {\n        return url + separator + 'apiKey=' + encodeURIComponent(apiKey);\n      }\n    };\n    var requestServiceBlob = function (url, apiKey) {\n      var headers = {\n        'Content-Type': 'application/json;charset=UTF-8',\n        'tiny-api-key': apiKey\n      };\n      return Utils.requestUrlAsBlob(appendApiKey(url, apiKey), headers, false).then(function (result) {\n        return result.status < 200 || result.status >= 300 ? Errors.handleServiceErrorResponse(result.status, result.blob) : global$3.resolve(result.blob);\n      });\n    };\n    function requestBlob(url, withCredentials) {\n      return Utils.requestUrlAsBlob(url, {}, withCredentials).then(function (result) {\n        return result.status < 200 || result.status >= 300 ? Errors.handleHttpError(result.status) : global$3.resolve(result.blob);\n      });\n    }\n    var getUrl = function (url, apiKey, withCredentials) {\n      return apiKey ? requestServiceBlob(url, apiKey) : requestBlob(url, withCredentials);\n    };\n    var Proxy = { getUrl: getUrl };\n\n    var count$1 = 0;\n    var isEditableImage = function (editor, img) {\n      var selectorMatched = editor.dom.is(img, 'img:not([data-mce-object],[data-mce-placeholder])');\n      return selectorMatched && (isLocalImage(editor, img) || isCorsImage(editor, img) || editor.settings.imagetools_proxy);\n    };\n    var displayError = function (editor, error) {\n      editor.notificationManager.open({\n        text: error,\n        type: 'error'\n      });\n    };\n    var getSelectedImage = function (editor) {\n      return editor.selection.getNode();\n    };\n    var extractFilename = function (editor, url) {\n      var m = url.match(/\\/([^\\/\\?]+)?\\.(?:jpeg|jpg|png|gif)(?:\\?|$)/i);\n      if (m) {\n        return editor.dom.encode(m[1]);\n      }\n      return null;\n    };\n    var createId = function () {\n      return 'imagetools' + count$1++;\n    };\n    var isLocalImage = function (editor, img) {\n      var url = img.src;\n      return url.indexOf('data:') === 0 || url.indexOf('blob:') === 0 || new global$4(url).host === editor.documentBaseURI.host;\n    };\n    var isCorsImage = function (editor, img) {\n      return global$1.inArray(getCorsHosts(editor), new global$4(img.src).host) !== -1;\n    };\n    var isCorsWithCredentialsImage = function (editor, img) {\n      return global$1.inArray(getCredentialsHosts(editor), new global$4(img.src).host) !== -1;\n    };\n    var imageToBlob$2 = function (editor, img) {\n      var src = img.src, apiKey;\n      if (isCorsImage(editor, img)) {\n        return Proxy.getUrl(img.src, null, isCorsWithCredentialsImage(editor, img));\n      }\n      if (!isLocalImage(editor, img)) {\n        src = getProxyUrl(editor);\n        src += (src.indexOf('?') === -1 ? '?' : '&') + 'url=' + encodeURIComponent(img.src);\n        apiKey = getApiKey(editor);\n        return Proxy.getUrl(src, apiKey, false);\n      }\n      return imageToBlob$1(img);\n    };\n    var findSelectedBlob = function (editor) {\n      var blobInfo;\n      blobInfo = editor.editorUpload.blobCache.getByUri(getSelectedImage(editor).src);\n      if (blobInfo) {\n        return global$3.resolve(blobInfo.blob());\n      }\n      return imageToBlob$2(editor, getSelectedImage(editor));\n    };\n    var startTimedUpload = function (editor, imageUploadTimerState) {\n      var imageUploadTimer = global$2.setEditorTimeout(editor, function () {\n        editor.editorUpload.uploadImagesAuto();\n      }, getUploadTimeout(editor));\n      imageUploadTimerState.set(imageUploadTimer);\n    };\n    var cancelTimedUpload = function (imageUploadTimerState) {\n      clearTimeout(imageUploadTimerState.get());\n    };\n    var updateSelectedImage = function (editor, ir, uploadImmediately, imageUploadTimerState, size) {\n      return ir.toBlob().then(function (blob) {\n        var uri, name, blobCache, blobInfo, selectedImage;\n        blobCache = editor.editorUpload.blobCache;\n        selectedImage = getSelectedImage(editor);\n        uri = selectedImage.src;\n        if (shouldReuseFilename(editor)) {\n          blobInfo = blobCache.getByUri(uri);\n          if (blobInfo) {\n            uri = blobInfo.uri();\n            name = blobInfo.name();\n          } else {\n            name = extractFilename(editor, uri);\n          }\n        }\n        blobInfo = blobCache.create({\n          id: createId(),\n          blob: blob,\n          base64: ir.toBase64(),\n          uri: uri,\n          name: name\n        });\n        blobCache.add(blobInfo);\n        editor.undoManager.transact(function () {\n          function imageLoadedHandler() {\n            editor.$(selectedImage).off('load', imageLoadedHandler);\n            editor.nodeChanged();\n            if (uploadImmediately) {\n              editor.editorUpload.uploadImagesAuto();\n            } else {\n              cancelTimedUpload(imageUploadTimerState);\n              startTimedUpload(editor, imageUploadTimerState);\n            }\n          }\n          editor.$(selectedImage).on('load', imageLoadedHandler);\n          if (size) {\n            editor.$(selectedImage).attr({\n              width: size.w,\n              height: size.h\n            });\n          }\n          editor.$(selectedImage).attr({ src: blobInfo.blobUri() }).removeAttr('data-mce-src');\n        });\n        return blobInfo;\n      });\n    };\n    var selectedImageOperation = function (editor, imageUploadTimerState, fn, size) {\n      return function () {\n        return editor._scanForImages().then(curry(findSelectedBlob, editor)).then(blobToImageResult).then(fn).then(function (imageResult) {\n          return updateSelectedImage(editor, imageResult, false, imageUploadTimerState, size);\n        }, function (error) {\n          displayError(editor, error);\n        });\n      };\n    };\n    var rotate$2 = function (editor, imageUploadTimerState, angle) {\n      return function () {\n        var size = ImageSize.getImageSize(getSelectedImage(editor));\n        var flippedSize = size ? {\n          w: size.h,\n          h: size.w\n        } : null;\n        return selectedImageOperation(editor, imageUploadTimerState, function (imageResult) {\n          return rotate$1(imageResult, angle);\n        }, flippedSize)();\n      };\n    };\n    var flip$2 = function (editor, imageUploadTimerState, axis) {\n      return function () {\n        return selectedImageOperation(editor, imageUploadTimerState, function (imageResult) {\n          return flip$1(imageResult, axis);\n        })();\n      };\n    };\n    var editImageDialog = function (editor, imageUploadTimerState) {\n      return function () {\n        var img = getSelectedImage(editor), originalSize = ImageSize.getNaturalImageSize(img);\n        var handleDialogBlob = function (blob) {\n          return new global$3(function (resolve) {\n            blobToImage$1(blob).then(function (newImage) {\n              var newSize = ImageSize.getNaturalImageSize(newImage);\n              if (originalSize.w !== newSize.w || originalSize.h !== newSize.h) {\n                if (ImageSize.getImageSize(img)) {\n                  ImageSize.setImageSize(img, newSize);\n                }\n              }\n              URL.revokeObjectURL(newImage.src);\n              resolve(blob);\n            });\n          });\n        };\n        var openDialog = function (editor, imageResult) {\n          return Dialog.edit(editor, imageResult).then(handleDialogBlob).then(blobToImageResult).then(function (imageResult) {\n            return updateSelectedImage(editor, imageResult, true, imageUploadTimerState);\n          }, function () {\n          });\n        };\n        findSelectedBlob(editor).then(blobToImageResult).then(curry(openDialog, editor), function (error) {\n          displayError(editor, error);\n        });\n      };\n    };\n    var Actions = {\n      rotate: rotate$2,\n      flip: flip$2,\n      editImageDialog: editImageDialog,\n      isEditableImage: isEditableImage,\n      cancelTimedUpload: cancelTimedUpload\n    };\n\n    var register = function (editor, imageUploadTimerState) {\n      global$1.each({\n        mceImageRotateLeft: Actions.rotate(editor, imageUploadTimerState, -90),\n        mceImageRotateRight: Actions.rotate(editor, imageUploadTimerState, 90),\n        mceImageFlipVertical: Actions.flip(editor, imageUploadTimerState, 'v'),\n        mceImageFlipHorizontal: Actions.flip(editor, imageUploadTimerState, 'h'),\n        mceEditImage: Actions.editImageDialog(editor, imageUploadTimerState)\n      }, function (fn, cmd) {\n        editor.addCommand(cmd, fn);\n      });\n    };\n    var Commands = { register: register };\n\n    var setup = function (editor, imageUploadTimerState, lastSelectedImageState) {\n      editor.on('NodeChange', function (e) {\n        var lastSelectedImage = lastSelectedImageState.get();\n        if (lastSelectedImage && lastSelectedImage.src !== e.element.src) {\n          Actions.cancelTimedUpload(imageUploadTimerState);\n          editor.editorUpload.uploadImagesAuto();\n          lastSelectedImageState.set(null);\n        }\n        if (Actions.isEditableImage(editor, e.element)) {\n          lastSelectedImageState.set(e.element);\n        }\n      });\n    };\n    var UploadSelectedImage = { setup: setup };\n\n    var register$1 = function (editor) {\n      editor.addButton('rotateleft', {\n        title: 'Rotate counterclockwise',\n        cmd: 'mceImageRotateLeft'\n      });\n      editor.addButton('rotateright', {\n        title: 'Rotate clockwise',\n        cmd: 'mceImageRotateRight'\n      });\n      editor.addButton('flipv', {\n        title: 'Flip vertically',\n        cmd: 'mceImageFlipVertical'\n      });\n      editor.addButton('fliph', {\n        title: 'Flip horizontally',\n        cmd: 'mceImageFlipHorizontal'\n      });\n      editor.addButton('editimage', {\n        title: 'Edit image',\n        cmd: 'mceEditImage'\n      });\n      editor.addButton('imageoptions', {\n        title: 'Image options',\n        icon: 'options',\n        cmd: 'mceImage'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    var register$2 = function (editor) {\n      editor.addContextToolbar(curry(Actions.isEditableImage, editor), getToolbarItems(editor));\n    };\n    var ContextToolbar = { register: register$2 };\n\n    global.add('imagetools', function (editor) {\n      var imageUploadTimerState = Cell(0);\n      var lastSelectedImageState = Cell(null);\n      Commands.register(editor, imageUploadTimerState);\n      Buttons.register(editor);\n      ContextToolbar.register(editor);\n      UploadSelectedImage.setup(editor, imageUploadTimerState, lastSelectedImageState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","(function () {\nvar insertdatetime = (function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var getDateFormat = function (editor) {\n      return editor.getParam('insertdatetime_dateformat', editor.translate('%Y-%m-%d'));\n    };\n    var getTimeFormat = function (editor) {\n      return editor.getParam('insertdatetime_timeformat', editor.translate('%H:%M:%S'));\n    };\n    var getFormats = function (editor) {\n      return editor.getParam('insertdatetime_formats', [\n        '%H:%M:%S',\n        '%Y-%m-%d',\n        '%I:%M:%S %p',\n        '%D'\n      ]);\n    };\n    var getDefaultDateTime = function (editor) {\n      var formats = getFormats(editor);\n      return formats.length > 0 ? formats[0] : getTimeFormat(editor);\n    };\n    var shouldInsertTimeElement = function (editor) {\n      return editor.getParam('insertdatetime_element', false);\n    };\n    var Settings = {\n      getDateFormat: getDateFormat,\n      getTimeFormat: getTimeFormat,\n      getFormats: getFormats,\n      getDefaultDateTime: getDefaultDateTime,\n      shouldInsertTimeElement: shouldInsertTimeElement\n    };\n\n    var daysShort = 'Sun Mon Tue Wed Thu Fri Sat Sun'.split(' ');\n    var daysLong = 'Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday'.split(' ');\n    var monthsShort = 'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec'.split(' ');\n    var monthsLong = 'January February March April May June July August September October November December'.split(' ');\n    var addZeros = function (value, len) {\n      value = '' + value;\n      if (value.length < len) {\n        for (var i = 0; i < len - value.length; i++) {\n          value = '0' + value;\n        }\n      }\n      return value;\n    };\n    var getDateTime = function (editor, fmt, date) {\n      date = date || new Date();\n      fmt = fmt.replace('%D', '%m/%d/%Y');\n      fmt = fmt.replace('%r', '%I:%M:%S %p');\n      fmt = fmt.replace('%Y', '' + date.getFullYear());\n      fmt = fmt.replace('%y', '' + date.getYear());\n      fmt = fmt.replace('%m', addZeros(date.getMonth() + 1, 2));\n      fmt = fmt.replace('%d', addZeros(date.getDate(), 2));\n      fmt = fmt.replace('%H', '' + addZeros(date.getHours(), 2));\n      fmt = fmt.replace('%M', '' + addZeros(date.getMinutes(), 2));\n      fmt = fmt.replace('%S', '' + addZeros(date.getSeconds(), 2));\n      fmt = fmt.replace('%I', '' + ((date.getHours() + 11) % 12 + 1));\n      fmt = fmt.replace('%p', '' + (date.getHours() < 12 ? 'AM' : 'PM'));\n      fmt = fmt.replace('%B', '' + editor.translate(monthsLong[date.getMonth()]));\n      fmt = fmt.replace('%b', '' + editor.translate(monthsShort[date.getMonth()]));\n      fmt = fmt.replace('%A', '' + editor.translate(daysLong[date.getDay()]));\n      fmt = fmt.replace('%a', '' + editor.translate(daysShort[date.getDay()]));\n      fmt = fmt.replace('%%', '%');\n      return fmt;\n    };\n    var updateElement = function (editor, timeElm, computerTime, userTime) {\n      var newTimeElm = editor.dom.create('time', { datetime: computerTime }, userTime);\n      timeElm.parentNode.insertBefore(newTimeElm, timeElm);\n      editor.dom.remove(timeElm);\n      editor.selection.select(newTimeElm, true);\n      editor.selection.collapse(false);\n    };\n    var insertDateTime = function (editor, format) {\n      if (Settings.shouldInsertTimeElement(editor)) {\n        var userTime = getDateTime(editor, format);\n        var computerTime = void 0;\n        if (/%[HMSIp]/.test(format)) {\n          computerTime = getDateTime(editor, '%Y-%m-%dT%H:%M');\n        } else {\n          computerTime = getDateTime(editor, '%Y-%m-%d');\n        }\n        var timeElm = editor.dom.getParent(editor.selection.getStart(), 'time');\n        if (timeElm) {\n          updateElement(editor, timeElm, computerTime, userTime);\n        } else {\n          editor.insertContent('<time datetime=\"' + computerTime + '\">' + userTime + '</time>');\n        }\n      } else {\n        editor.insertContent(getDateTime(editor, format));\n      }\n    };\n    var Actions = {\n      insertDateTime: insertDateTime,\n      getDateTime: getDateTime\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceInsertDate', function () {\n        Actions.insertDateTime(editor, Settings.getDateFormat(editor));\n      });\n      editor.addCommand('mceInsertTime', function () {\n        Actions.insertDateTime(editor, Settings.getTimeFormat(editor));\n      });\n    };\n    var Commands = { register: register };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var createMenuItems = function (editor, lastFormatState) {\n      var formats = Settings.getFormats(editor);\n      return global$1.map(formats, function (fmt) {\n        return {\n          text: Actions.getDateTime(editor, fmt),\n          onclick: function () {\n            lastFormatState.set(fmt);\n            Actions.insertDateTime(editor, fmt);\n          }\n        };\n      });\n    };\n    var register$1 = function (editor, lastFormatState) {\n      var menuItems = createMenuItems(editor, lastFormatState);\n      editor.addButton('insertdatetime', {\n        type: 'splitbutton',\n        title: 'Insert date/time',\n        menu: menuItems,\n        onclick: function () {\n          var lastFormat = lastFormatState.get();\n          Actions.insertDateTime(editor, lastFormat ? lastFormat : Settings.getDefaultDateTime(editor));\n        }\n      });\n      editor.addMenuItem('insertdatetime', {\n        icon: 'date',\n        text: 'Date/time',\n        menu: menuItems,\n        context: 'insert'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('insertdatetime', function (editor) {\n      var lastFormatState = Cell(null);\n      Commands.register(editor);\n      Buttons.register(editor, lastFormatState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"bbcode\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/bbcode')\n//   ES2015:\n//     import 'tinymce/plugins/bbcode'\nrequire('./plugin.js');","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","(function () {\nvar codesample = (function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var getContentCss = function (editor) {\n      return editor.settings.codesample_content_css;\n    };\n    var getLanguages = function (editor) {\n      return editor.settings.codesample_languages;\n    };\n    var getDialogMinWidth = function (editor) {\n      return Math.min(global$1.DOM.getViewPort().w, editor.getParam('codesample_dialog_width', 800));\n    };\n    var getDialogMinHeight = function (editor) {\n      return Math.min(global$1.DOM.getViewPort().w, editor.getParam('codesample_dialog_height', 650));\n    };\n    var Settings = {\n      getContentCss: getContentCss,\n      getLanguages: getLanguages,\n      getDialogMinWidth: getDialogMinWidth,\n      getDialogMinHeight: getDialogMinHeight\n    };\n\n    var window = {};\n    var global$2 = window;\n    var _self = typeof window !== 'undefined' ? window : typeof WorkerGlobalScope !== 'undefined' && domGlobals.self instanceof WorkerGlobalScope ? domGlobals.self : {};\n    var Prism = function () {\n      var lang = /\\blang(?:uage)?-(?!\\*)(\\w+)\\b/i;\n      var _ = _self.Prism = {\n        util: {\n          encode: function (tokens) {\n            if (tokens instanceof Token) {\n              return new Token(tokens.type, _.util.encode(tokens.content), tokens.alias);\n            } else if (_.util.type(tokens) === 'Array') {\n              return tokens.map(_.util.encode);\n            } else {\n              return tokens.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/\\u00a0/g, ' ');\n            }\n          },\n          type: function (o) {\n            return Object.prototype.toString.call(o).match(/\\[object (\\w+)\\]/)[1];\n          },\n          clone: function (o) {\n            var type = _.util.type(o);\n            switch (type) {\n            case 'Object':\n              var clone = {};\n              for (var key in o) {\n                if (o.hasOwnProperty(key)) {\n                  clone[key] = _.util.clone(o[key]);\n                }\n              }\n              return clone;\n            case 'Array':\n              return o.map && o.map(function (v) {\n                return _.util.clone(v);\n              });\n            }\n            return o;\n          }\n        },\n        languages: {\n          extend: function (id, redef) {\n            var lang = _.util.clone(_.languages[id]);\n            for (var key in redef) {\n              lang[key] = redef[key];\n            }\n            return lang;\n          },\n          insertBefore: function (inside, before, insert, root) {\n            root = root || _.languages;\n            var grammar = root[inside];\n            if (arguments.length === 2) {\n              insert = arguments[1];\n              for (var newToken in insert) {\n                if (insert.hasOwnProperty(newToken)) {\n                  grammar[newToken] = insert[newToken];\n                }\n              }\n              return grammar;\n            }\n            var ret = {};\n            for (var token in grammar) {\n              if (grammar.hasOwnProperty(token)) {\n                if (token === before) {\n                  for (var newToken in insert) {\n                    if (insert.hasOwnProperty(newToken)) {\n                      ret[newToken] = insert[newToken];\n                    }\n                  }\n                }\n                ret[token] = grammar[token];\n              }\n            }\n            _.languages.DFS(_.languages, function (key, value) {\n              if (value === root[inside] && key !== inside) {\n                this[key] = ret;\n              }\n            });\n            return root[inside] = ret;\n          },\n          DFS: function (o, callback, type) {\n            for (var i in o) {\n              if (o.hasOwnProperty(i)) {\n                callback.call(o, i, o[i], type || i);\n                if (_.util.type(o[i]) === 'Object') {\n                  _.languages.DFS(o[i], callback);\n                } else if (_.util.type(o[i]) === 'Array') {\n                  _.languages.DFS(o[i], callback, i);\n                }\n              }\n            }\n          }\n        },\n        plugins: {},\n        highlightAll: function (async, callback) {\n          var elements = domGlobals.document.querySelectorAll('code[class*=\"language-\"], [class*=\"language-\"] code, code[class*=\"lang-\"], [class*=\"lang-\"] code');\n          for (var i = 0, element = void 0; element = elements[i++];) {\n            _.highlightElement(element, async === true, callback);\n          }\n        },\n        highlightElement: function (element, async, callback) {\n          var language, grammar, parent = element;\n          while (parent && !lang.test(parent.className)) {\n            parent = parent.parentNode;\n          }\n          if (parent) {\n            language = (parent.className.match(lang) || [\n              ,\n              ''\n            ])[1];\n            grammar = _.languages[language];\n          }\n          element.className = element.className.replace(lang, '').replace(/\\s+/g, ' ') + ' language-' + language;\n          parent = element.parentNode;\n          if (/pre/i.test(parent.nodeName)) {\n            parent.className = parent.className.replace(lang, '').replace(/\\s+/g, ' ') + ' language-' + language;\n          }\n          var code = element.textContent;\n          var env = {\n            element: element,\n            language: language,\n            grammar: grammar,\n            code: code\n          };\n          if (!code || !grammar) {\n            _.hooks.run('complete', env);\n            return;\n          }\n          _.hooks.run('before-highlight', env);\n          if (async && _self.Worker) {\n            var worker = new domGlobals.Worker(_.filename);\n            worker.onmessage = function (evt) {\n              env.highlightedCode = evt.data;\n              _.hooks.run('before-insert', env);\n              env.element.innerHTML = env.highlightedCode;\n              if (callback) {\n                callback.call(env.element);\n              }\n              _.hooks.run('after-highlight', env);\n              _.hooks.run('complete', env);\n            };\n            worker.postMessage(JSON.stringify({\n              language: env.language,\n              code: env.code,\n              immediateClose: true\n            }));\n          } else {\n            env.highlightedCode = _.highlight(env.code, env.grammar, env.language);\n            _.hooks.run('before-insert', env);\n            env.element.innerHTML = env.highlightedCode;\n            if (callback) {\n              callback.call(element);\n            }\n            _.hooks.run('after-highlight', env);\n            _.hooks.run('complete', env);\n          }\n        },\n        highlight: function (text, grammar, language) {\n          var tokens = _.tokenize(text, grammar);\n          return Token.stringify(_.util.encode(tokens), language);\n        },\n        tokenize: function (text, grammar, language) {\n          var Token = _.Token;\n          var strarr = [text];\n          var rest = grammar.rest;\n          if (rest) {\n            for (var token in rest) {\n              grammar[token] = rest[token];\n            }\n            delete grammar.rest;\n          }\n          tokenloop:\n            for (var token in grammar) {\n              if (!grammar.hasOwnProperty(token) || !grammar[token]) {\n                continue;\n              }\n              var patterns = grammar[token];\n              patterns = _.util.type(patterns) === 'Array' ? patterns : [patterns];\n              for (var j = 0; j < patterns.length; ++j) {\n                var pattern = patterns[j];\n                var inside = pattern.inside;\n                var lookbehind = !!pattern.lookbehind;\n                var lookbehindLength = 0;\n                var alias = pattern.alias;\n                pattern = pattern.pattern || pattern;\n                for (var i = 0; i < strarr.length; i++) {\n                  var str = strarr[i];\n                  if (strarr.length > text.length) {\n                    break tokenloop;\n                  }\n                  if (str instanceof Token) {\n                    continue;\n                  }\n                  pattern.lastIndex = 0;\n                  var match = pattern.exec(str);\n                  if (match) {\n                    if (lookbehind) {\n                      lookbehindLength = match[1].length;\n                    }\n                    var from = match.index - 1 + lookbehindLength;\n                    match = match[0].slice(lookbehindLength);\n                    var len = match.length, to = from + len, before = str.slice(0, from + 1), after = str.slice(to + 1);\n                    var args = [\n                      i,\n                      1\n                    ];\n                    if (before) {\n                      args.push(before);\n                    }\n                    var wrapped = new Token(token, inside ? _.tokenize(match, inside) : match, alias);\n                    args.push(wrapped);\n                    if (after) {\n                      args.push(after);\n                    }\n                    Array.prototype.splice.apply(strarr, args);\n                  }\n                }\n              }\n            }\n          return strarr;\n        },\n        hooks: {\n          all: {},\n          add: function (name, callback) {\n            var hooks = _.hooks.all;\n            hooks[name] = hooks[name] || [];\n            hooks[name].push(callback);\n          },\n          run: function (name, env) {\n            var callbacks = _.hooks.all[name];\n            if (!callbacks || !callbacks.length) {\n              return;\n            }\n            for (var i = 0, callback = void 0; callback = callbacks[i++];) {\n              callback(env);\n            }\n          }\n        }\n      };\n      var Token = _.Token = function (type, content, alias) {\n        this.type = type;\n        this.content = content;\n        this.alias = alias;\n      };\n      Token.stringify = function (o, language, parent) {\n        if (typeof o === 'string') {\n          return o;\n        }\n        if (_.util.type(o) === 'Array') {\n          return o.map(function (element) {\n            return Token.stringify(element, language, o);\n          }).join('');\n        }\n        var env = {\n          type: o.type,\n          content: Token.stringify(o.content, language, parent),\n          tag: 'span',\n          classes: [\n            'token',\n            o.type\n          ],\n          attributes: {},\n          language: language,\n          parent: parent\n        };\n        if (env.type === 'comment') {\n          env.attributes.spellcheck = 'true';\n        }\n        if (o.alias) {\n          var aliases = _.util.type(o.alias) === 'Array' ? o.alias : [o.alias];\n          Array.prototype.push.apply(env.classes, aliases);\n        }\n        _.hooks.run('wrap', env);\n        var attributes = '';\n        for (var name in env.attributes) {\n          attributes += (attributes ? ' ' : '') + name + '=\"' + (env.attributes[name] || '') + '\"';\n        }\n        return '<' + env.tag + ' class=\"' + env.classes.join(' ') + '\" ' + attributes + '>' + env.content + '</' + env.tag + '>';\n      };\n      if (!_self.document) {\n        if (!_self.addEventListener) {\n          return _self.Prism;\n        }\n        _self.addEventListener('message', function (evt) {\n          var message = JSON.parse(evt.data), lang = message.language, code = message.code, immediateClose = message.immediateClose;\n          _self.postMessage(_.highlight(code, _.languages[lang], lang));\n          if (immediateClose) {\n            _self.close();\n          }\n        }, false);\n        return _self.Prism;\n      }\n    }();\n    if (typeof global$2 !== 'undefined') {\n      global$2.Prism = Prism;\n    }\n    Prism.languages.markup = {\n      comment: /<!--[\\w\\W]*?-->/,\n      prolog: /<\\?[\\w\\W]+?\\?>/,\n      doctype: /<!DOCTYPE[\\w\\W]+?>/,\n      cdata: /<!\\[CDATA\\[[\\w\\W]*?]]>/i,\n      tag: {\n        pattern: /<\\/?[^\\s>\\/=.]+(?:\\s+[^\\s>\\/=]+(?:=(?:(\"|')(?:\\\\\\1|\\\\?(?!\\1)[\\w\\W])*\\1|[^\\s'\">=]+))?)*\\s*\\/?>/i,\n        inside: {\n          'tag': {\n            pattern: /^<\\/?[^\\s>\\/]+/i,\n            inside: {\n              punctuation: /^<\\/?/,\n              namespace: /^[^\\s>\\/:]+:/\n            }\n          },\n          'attr-value': {\n            pattern: /=(?:('|\")[\\w\\W]*?(\\1)|[^\\s>]+)/i,\n            inside: { punctuation: /[=>\"']/ }\n          },\n          'punctuation': /\\/?>/,\n          'attr-name': {\n            pattern: /[^\\s>\\/]+/,\n            inside: { namespace: /^[^\\s>\\/:]+:/ }\n          }\n        }\n      },\n      entity: /&#?[\\da-z]{1,8};/i\n    };\n    Prism.hooks.add('wrap', function (env) {\n      if (env.type === 'entity') {\n        env.attributes.title = env.content.replace(/&amp;/, '&');\n      }\n    });\n    Prism.languages.xml = Prism.languages.markup;\n    Prism.languages.html = Prism.languages.markup;\n    Prism.languages.mathml = Prism.languages.markup;\n    Prism.languages.svg = Prism.languages.markup;\n    Prism.languages.css = {\n      comment: /\\/\\*[\\w\\W]*?\\*\\//,\n      atrule: {\n        pattern: /@[\\w-]+?.*?(;|(?=\\s*\\{))/i,\n        inside: { rule: /@[\\w-]+/ }\n      },\n      url: /url\\((?:([\"'])(\\\\(?:\\r\\n|[\\w\\W])|(?!\\1)[^\\\\\\r\\n])*\\1|.*?)\\)/i,\n      selector: /[^\\{\\}\\s][^\\{\\};]*?(?=\\s*\\{)/,\n      string: /(\"|')(\\\\(?:\\r\\n|[\\w\\W])|(?!\\1)[^\\\\\\r\\n])*\\1/,\n      property: /(\\b|\\B)[\\w-]+(?=\\s*:)/i,\n      important: /\\B!important\\b/i,\n      function: /[-a-z0-9]+(?=\\()/i,\n      punctuation: /[(){};:]/\n    };\n    Prism.languages.css.atrule.inside.rest = Prism.util.clone(Prism.languages.css);\n    if (Prism.languages.markup) {\n      Prism.languages.insertBefore('markup', 'tag', {\n        style: {\n          pattern: /<style[\\w\\W]*?>[\\w\\W]*?<\\/style>/i,\n          inside: {\n            tag: {\n              pattern: /<style[\\w\\W]*?>|<\\/style>/i,\n              inside: Prism.languages.markup.tag.inside\n            },\n            rest: Prism.languages.css\n          },\n          alias: 'language-css'\n        }\n      });\n      Prism.languages.insertBefore('inside', 'attr-value', {\n        'style-attr': {\n          pattern: /\\s*style=(\"|').*?\\1/i,\n          inside: {\n            'attr-name': {\n              pattern: /^\\s*style/i,\n              inside: Prism.languages.markup.tag.inside\n            },\n            'punctuation': /^\\s*=\\s*['\"]|['\"]\\s*$/,\n            'attr-value': {\n              pattern: /.+/i,\n              inside: Prism.languages.css\n            }\n          },\n          alias: 'language-css'\n        }\n      }, Prism.languages.markup.tag);\n    }\n    Prism.languages.clike = {\n      'comment': [\n        {\n          pattern: /(^|[^\\\\])\\/\\*[\\w\\W]*?\\*\\//,\n          lookbehind: true\n        },\n        {\n          pattern: /(^|[^\\\\:])\\/\\/.*/,\n          lookbehind: true\n        }\n      ],\n      'string': /([\"'])(\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1/,\n      'class-name': {\n        pattern: /((?:\\b(?:class|interface|extends|implements|trait|instanceof|new)\\s+)|(?:catch\\s+\\())[a-z0-9_\\.\\\\]+/i,\n        lookbehind: true,\n        inside: { punctuation: /(\\.|\\\\)/ }\n      },\n      'keyword': /\\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\\b/,\n      'boolean': /\\b(true|false)\\b/,\n      'function': /[a-z0-9_]+(?=\\()/i,\n      'number': /\\b-?(?:0x[\\da-f]+|\\d*\\.?\\d+(?:e[+-]?\\d+)?)\\b/i,\n      'operator': /--?|\\+\\+?|!=?=?|<=?|>=?|==?=?|&&?|\\|\\|?|\\?|\\*|\\/|~|\\^|%/,\n      'punctuation': /[{}[\\];(),.:]/\n    };\n    Prism.languages.javascript = Prism.languages.extend('clike', {\n      keyword: /\\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\\b/,\n      number: /\\b-?(0x[\\dA-Fa-f]+|0b[01]+|0o[0-7]+|\\d*\\.?\\d+([Ee][+-]?\\d+)?|NaN|Infinity)\\b/,\n      function: /[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*(?=\\()/i\n    });\n    Prism.languages.insertBefore('javascript', 'keyword', {\n      regex: {\n        pattern: /(^|[^/])\\/(?!\\/)(\\[.+?]|\\\\.|[^/\\\\\\r\\n])+\\/[gimyu]{0,5}(?=\\s*($|[\\r\\n,.;})]))/,\n        lookbehind: true\n      }\n    });\n    Prism.languages.insertBefore('javascript', 'class-name', {\n      'template-string': {\n        pattern: /`(?:\\\\`|\\\\?[^`])*`/,\n        inside: {\n          interpolation: {\n            pattern: /\\$\\{[^}]+\\}/,\n            inside: {\n              'interpolation-punctuation': {\n                pattern: /^\\$\\{|\\}$/,\n                alias: 'punctuation'\n              },\n              'rest': Prism.languages.javascript\n            }\n          },\n          string: /[\\s\\S]+/\n        }\n      }\n    });\n    if (Prism.languages.markup) {\n      Prism.languages.insertBefore('markup', 'tag', {\n        script: {\n          pattern: /<script[\\w\\W]*?>[\\w\\W]*?<\\/script>/i,\n          inside: {\n            tag: {\n              pattern: /<script[\\w\\W]*?>|<\\/script>/i,\n              inside: Prism.languages.markup.tag.inside\n            },\n            rest: Prism.languages.javascript\n          },\n          alias: 'language-javascript'\n        }\n      });\n    }\n    Prism.languages.js = Prism.languages.javascript;\n    Prism.languages.c = Prism.languages.extend('clike', {\n      keyword: /\\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\\b/,\n      operator: /\\-[>-]?|\\+\\+?|!=?|<<?=?|>>?=?|==?|&&?|\\|?\\||[~^%?*\\/]/,\n      number: /\\b-?(?:0x[\\da-f]+|\\d*\\.?\\d+(?:e[+-]?\\d+)?)[ful]*\\b/i\n    });\n    Prism.languages.insertBefore('c', 'string', {\n      macro: {\n        pattern: /(^\\s*)#\\s*[a-z]+([^\\r\\n\\\\]|\\\\.|\\\\(?:\\r\\n?|\\n))*/im,\n        lookbehind: true,\n        alias: 'property',\n        inside: {\n          string: {\n            pattern: /(#\\s*include\\s*)(<.+?>|(\"|')(\\\\?.)+?\\3)/,\n            lookbehind: true\n          }\n        }\n      }\n    });\n    delete Prism.languages.c['class-name'];\n    delete Prism.languages.c.boolean;\n    Prism.languages.csharp = Prism.languages.extend('clike', {\n      keyword: /\\b(abstract|as|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\\b/,\n      string: [\n        /@(\"|')(\\1\\1|\\\\\\1|\\\\?(?!\\1)[\\s\\S])*\\1/,\n        /(\"|')(\\\\?.)*?\\1/\n      ],\n      number: /\\b-?(0x[\\da-f]+|\\d*\\.?\\d+)\\b/i\n    });\n    Prism.languages.insertBefore('csharp', 'keyword', {\n      preprocessor: {\n        pattern: /(^\\s*)#.*/m,\n        lookbehind: true\n      }\n    });\n    Prism.languages.cpp = Prism.languages.extend('c', {\n      keyword: /\\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\\b/,\n      boolean: /\\b(true|false)\\b/,\n      operator: /[-+]{1,2}|!=?|<{1,2}=?|>{1,2}=?|\\->|:{1,2}|={1,2}|\\^|~|%|&{1,2}|\\|?\\||\\?|\\*|\\/|\\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\\b/\n    });\n    Prism.languages.insertBefore('cpp', 'keyword', {\n      'class-name': {\n        pattern: /(class\\s+)[a-z0-9_]+/i,\n        lookbehind: true\n      }\n    });\n    Prism.languages.java = Prism.languages.extend('clike', {\n      keyword: /\\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\\b/,\n      number: /\\b0b[01]+\\b|\\b0x[\\da-f]*\\.?[\\da-fp\\-]+\\b|\\b\\d*\\.?\\d+(?:e[+-]?\\d+)?[df]?\\b/i,\n      operator: {\n        pattern: /(^|[^.])(?:\\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\\|[|=]?|\\*=?|\\/=?|%=?|\\^=?|[?:~])/m,\n        lookbehind: true\n      }\n    });\n    Prism.languages.php = Prism.languages.extend('clike', {\n      keyword: /\\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\\b/i,\n      constant: /\\b[A-Z0-9_]{2,}\\b/,\n      comment: {\n        pattern: /(^|[^\\\\])(?:\\/\\*[\\w\\W]*?\\*\\/|\\/\\/.*)/,\n        lookbehind: true\n      }\n    });\n    Prism.languages.insertBefore('php', 'class-name', {\n      'shell-comment': {\n        pattern: /(^|[^\\\\])#.*/,\n        lookbehind: true,\n        alias: 'comment'\n      }\n    });\n    Prism.languages.insertBefore('php', 'keyword', {\n      delimiter: /\\?>|<\\?(?:php)?/i,\n      variable: /\\$\\w+\\b/i,\n      package: {\n        pattern: /(\\\\|namespace\\s+|use\\s+)[\\w\\\\]+/,\n        lookbehind: true,\n        inside: { punctuation: /\\\\/ }\n      }\n    });\n    Prism.languages.insertBefore('php', 'operator', {\n      property: {\n        pattern: /(->)[\\w]+/,\n        lookbehind: true\n      }\n    });\n    if (Prism.languages.markup) {\n      Prism.hooks.add('before-highlight', function (env) {\n        if (env.language !== 'php') {\n          return;\n        }\n        env.tokenStack = [];\n        env.backupCode = env.code;\n        env.code = env.code.replace(/(?:<\\?php|<\\?)[\\w\\W]*?(?:\\?>)/ig, function (match) {\n          env.tokenStack.push(match);\n          return '{{{PHP' + env.tokenStack.length + '}}}';\n        });\n      });\n      Prism.hooks.add('before-insert', function (env) {\n        if (env.language === 'php') {\n          env.code = env.backupCode;\n          delete env.backupCode;\n        }\n      });\n      Prism.hooks.add('after-highlight', function (env) {\n        if (env.language !== 'php') {\n          return;\n        }\n        for (var i = 0, t = void 0; t = env.tokenStack[i]; i++) {\n          env.highlightedCode = env.highlightedCode.replace('{{{PHP' + (i + 1) + '}}}', Prism.highlight(t, env.grammar, 'php').replace(/\\$/g, '$$$$'));\n        }\n        env.element.innerHTML = env.highlightedCode;\n      });\n      Prism.hooks.add('wrap', function (env) {\n        if (env.language === 'php' && env.type === 'markup') {\n          env.content = env.content.replace(/(\\{\\{\\{PHP[0-9]+\\}\\}\\})/g, '<span class=\"token php\">$1</span>');\n        }\n      });\n      Prism.languages.insertBefore('php', 'comment', {\n        markup: {\n          pattern: /<[^?]\\/?(.*?)>/,\n          inside: Prism.languages.markup\n        },\n        php: /\\{\\{\\{PHP[0-9]+\\}\\}\\}/\n      });\n    }\n    Prism.languages.python = {\n      'comment': {\n        pattern: /(^|[^\\\\])#.*/,\n        lookbehind: true\n      },\n      'string': /\"\"\"[\\s\\S]+?\"\"\"|'''[\\s\\S]+?'''|(\"|')(?:\\\\?.)*?\\1/,\n      'function': {\n        pattern: /((?:^|\\s)def[ \\t]+)[a-zA-Z_][a-zA-Z0-9_]*(?=\\()/g,\n        lookbehind: true\n      },\n      'class-name': {\n        pattern: /(\\bclass\\s+)[a-z0-9_]+/i,\n        lookbehind: true\n      },\n      'keyword': /\\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\\b/,\n      'boolean': /\\b(?:True|False)\\b/,\n      'number': /\\b-?(?:0[bo])?(?:(?:\\d|0x[\\da-f])[\\da-f]*\\.?\\d*|\\.\\d+)(?:e[+-]?\\d+)?j?\\b/i,\n      'operator': /[-+%=]=?|!=|\\*\\*?=?|\\/\\/?=?|<[<=>]?|>[=>]?|[&|^~]|\\b(?:or|and|not)\\b/,\n      'punctuation': /[{}[\\];(),.:]/\n    };\n    (function (Prism) {\n      Prism.languages.ruby = Prism.languages.extend('clike', {\n        comment: /#(?!\\{[^\\r\\n]*?\\}).*/,\n        keyword: /\\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\\b/\n      });\n      var interpolation = {\n        pattern: /#\\{[^}]+\\}/,\n        inside: {\n          delimiter: {\n            pattern: /^#\\{|\\}$/,\n            alias: 'tag'\n          },\n          rest: Prism.util.clone(Prism.languages.ruby)\n        }\n      };\n      Prism.languages.insertBefore('ruby', 'keyword', {\n        regex: [\n          {\n            pattern: /%r([^a-zA-Z0-9\\s\\{\\(\\[<])(?:[^\\\\]|\\\\[\\s\\S])*?\\1[gim]{0,3}/,\n            inside: { interpolation: interpolation }\n          },\n          {\n            pattern: /%r\\((?:[^()\\\\]|\\\\[\\s\\S])*\\)[gim]{0,3}/,\n            inside: { interpolation: interpolation }\n          },\n          {\n            pattern: /%r\\{(?:[^#{}\\\\]|#(?:\\{[^}]+\\})?|\\\\[\\s\\S])*\\}[gim]{0,3}/,\n            inside: { interpolation: interpolation }\n          },\n          {\n            pattern: /%r\\[(?:[^\\[\\]\\\\]|\\\\[\\s\\S])*\\][gim]{0,3}/,\n            inside: { interpolation: interpolation }\n          },\n          {\n            pattern: /%r<(?:[^<>\\\\]|\\\\[\\s\\S])*>[gim]{0,3}/,\n            inside: { interpolation: interpolation }\n          },\n          {\n            pattern: /(^|[^/])\\/(?!\\/)(\\[.+?]|\\\\.|[^/\\r\\n])+\\/[gim]{0,3}(?=\\s*($|[\\r\\n,.;})]))/,\n            lookbehind: true\n          }\n        ],\n        variable: /[@$]+[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\\b)/,\n        symbol: /:[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\\b)/\n      });\n      Prism.languages.insertBefore('ruby', 'number', {\n        builtin: /\\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\\b/,\n        constant: /\\b[A-Z][a-zA-Z_0-9]*(?:[?!]|\\b)/\n      });\n      Prism.languages.ruby.string = [\n        {\n          pattern: /%[qQiIwWxs]?([^a-zA-Z0-9\\s\\{\\(\\[<])(?:[^\\\\]|\\\\[\\s\\S])*?\\1/,\n          inside: { interpolation: interpolation }\n        },\n        {\n          pattern: /%[qQiIwWxs]?\\((?:[^()\\\\]|\\\\[\\s\\S])*\\)/,\n          inside: { interpolation: interpolation }\n        },\n        {\n          pattern: /%[qQiIwWxs]?\\{(?:[^#{}\\\\]|#(?:\\{[^}]+\\})?|\\\\[\\s\\S])*\\}/,\n          inside: { interpolation: interpolation }\n        },\n        {\n          pattern: /%[qQiIwWxs]?\\[(?:[^\\[\\]\\\\]|\\\\[\\s\\S])*\\]/,\n          inside: { interpolation: interpolation }\n        },\n        {\n          pattern: /%[qQiIwWxs]?<(?:[^<>\\\\]|\\\\[\\s\\S])*>/,\n          inside: { interpolation: interpolation }\n        },\n        {\n          pattern: /(\"|')(#\\{[^}]+\\}|\\\\(?:\\r?\\n|\\r)|\\\\?.)*?\\1/,\n          inside: { interpolation: interpolation }\n        }\n      ];\n    }(Prism));\n\n    function isCodeSample(elm) {\n      return elm && elm.nodeName === 'PRE' && elm.className.indexOf('language-') !== -1;\n    }\n    function trimArg(predicateFn) {\n      return function (arg1, arg2) {\n        return predicateFn(arg2);\n      };\n    }\n    var Utils = {\n      isCodeSample: isCodeSample,\n      trimArg: trimArg\n    };\n\n    var getSelectedCodeSample = function (editor) {\n      var node = editor.selection.getNode();\n      if (Utils.isCodeSample(node)) {\n        return node;\n      }\n      return null;\n    };\n    var insertCodeSample = function (editor, language, code) {\n      editor.undoManager.transact(function () {\n        var node = getSelectedCodeSample(editor);\n        code = global$1.DOM.encode(code);\n        if (node) {\n          editor.dom.setAttrib(node, 'class', 'language-' + language);\n          node.innerHTML = code;\n          Prism.highlightElement(node);\n          editor.selection.select(node);\n        } else {\n          editor.insertContent('<pre id=\"__new\" class=\"language-' + language + '\">' + code + '</pre>');\n          editor.selection.select(editor.$('#__new').removeAttr('id')[0]);\n        }\n      });\n    };\n    var getCurrentCode = function (editor) {\n      var node = getSelectedCodeSample(editor);\n      if (node) {\n        return node.textContent;\n      }\n      return '';\n    };\n    var CodeSample = {\n      getSelectedCodeSample: getSelectedCodeSample,\n      insertCodeSample: insertCodeSample,\n      getCurrentCode: getCurrentCode\n    };\n\n    var getLanguages$1 = function (editor) {\n      var defaultLanguages = [\n        {\n          text: 'HTML/XML',\n          value: 'markup'\n        },\n        {\n          text: 'JavaScript',\n          value: 'javascript'\n        },\n        {\n          text: 'CSS',\n          value: 'css'\n        },\n        {\n          text: 'PHP',\n          value: 'php'\n        },\n        {\n          text: 'Ruby',\n          value: 'ruby'\n        },\n        {\n          text: 'Python',\n          value: 'python'\n        },\n        {\n          text: 'Java',\n          value: 'java'\n        },\n        {\n          text: 'C',\n          value: 'c'\n        },\n        {\n          text: 'C#',\n          value: 'csharp'\n        },\n        {\n          text: 'C++',\n          value: 'cpp'\n        }\n      ];\n      var customLanguages = Settings.getLanguages(editor);\n      return customLanguages ? customLanguages : defaultLanguages;\n    };\n    var getCurrentLanguage = function (editor) {\n      var matches;\n      var node = CodeSample.getSelectedCodeSample(editor);\n      if (node) {\n        matches = node.className.match(/language-(\\w+)/);\n        return matches ? matches[1] : '';\n      }\n      return '';\n    };\n    var Languages = {\n      getLanguages: getLanguages$1,\n      getCurrentLanguage: getCurrentLanguage\n    };\n\n    var Dialog = {\n      open: function (editor) {\n        var minWidth = Settings.getDialogMinWidth(editor);\n        var minHeight = Settings.getDialogMinHeight(editor);\n        var currentLanguage = Languages.getCurrentLanguage(editor);\n        var currentLanguages = Languages.getLanguages(editor);\n        var currentCode = CodeSample.getCurrentCode(editor);\n        editor.windowManager.open({\n          title: 'Insert/Edit code sample',\n          minWidth: minWidth,\n          minHeight: minHeight,\n          layout: 'flex',\n          direction: 'column',\n          align: 'stretch',\n          body: [\n            {\n              type: 'listbox',\n              name: 'language',\n              label: 'Language',\n              maxWidth: 200,\n              value: currentLanguage,\n              values: currentLanguages\n            },\n            {\n              type: 'textbox',\n              name: 'code',\n              multiline: true,\n              spellcheck: false,\n              ariaLabel: 'Code view',\n              flex: 1,\n              style: 'direction: ltr; text-align: left',\n              classes: 'monospace',\n              value: currentCode,\n              autofocus: true\n            }\n          ],\n          onSubmit: function (e) {\n            CodeSample.insertCodeSample(editor, e.data.language, e.data.code);\n          }\n        });\n      }\n    };\n\n    var register = function (editor) {\n      editor.addCommand('codesample', function () {\n        var node = editor.selection.getNode();\n        if (editor.selection.isCollapsed() || Utils.isCodeSample(node)) {\n          Dialog.open(editor);\n        } else {\n          editor.formatter.toggle('code');\n        }\n      });\n    };\n    var Commands = { register: register };\n\n    var setup = function (editor) {\n      var $ = editor.$;\n      editor.on('PreProcess', function (e) {\n        $('pre[contenteditable=false]', e.node).filter(Utils.trimArg(Utils.isCodeSample)).each(function (idx, elm) {\n          var $elm = $(elm), code = elm.textContent;\n          $elm.attr('class', $.trim($elm.attr('class')));\n          $elm.removeAttr('contentEditable');\n          $elm.empty().append($('<code></code>').each(function () {\n            this.textContent = code;\n          }));\n        });\n      });\n      editor.on('SetContent', function () {\n        var unprocessedCodeSamples = $('pre').filter(Utils.trimArg(Utils.isCodeSample)).filter(function (idx, elm) {\n          return elm.contentEditable !== 'false';\n        });\n        if (unprocessedCodeSamples.length) {\n          editor.undoManager.transact(function () {\n            unprocessedCodeSamples.each(function (idx, elm) {\n              $(elm).find('br').each(function (idx, elm) {\n                elm.parentNode.replaceChild(editor.getDoc().createTextNode('\\n'), elm);\n              });\n              elm.contentEditable = false;\n              elm.innerHTML = editor.dom.encode(elm.textContent);\n              Prism.highlightElement(elm);\n              elm.className = $.trim(elm.className);\n            });\n          });\n        }\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var loadCss = function (editor, pluginUrl, addedInlineCss, addedCss) {\n      var linkElm;\n      var contentCss = Settings.getContentCss(editor);\n      if (editor.inline && addedInlineCss.get()) {\n        return;\n      }\n      if (!editor.inline && addedCss.get()) {\n        return;\n      }\n      if (editor.inline) {\n        addedInlineCss.set(true);\n      } else {\n        addedCss.set(true);\n      }\n      if (contentCss !== false) {\n        linkElm = editor.dom.create('link', {\n          rel: 'stylesheet',\n          href: contentCss ? contentCss : pluginUrl + '/css/prism.css'\n        });\n        editor.getDoc().getElementsByTagName('head')[0].appendChild(linkElm);\n      }\n    };\n    var LoadCss = { loadCss: loadCss };\n\n    var register$1 = function (editor) {\n      editor.addButton('codesample', {\n        cmd: 'codesample',\n        title: 'Insert/Edit code sample'\n      });\n      editor.addMenuItem('codesample', {\n        cmd: 'codesample',\n        text: 'Code sample',\n        icon: 'codesample'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    var addedInlineCss = Cell(false);\n    global.add('codesample', function (editor, pluginUrl) {\n      var addedCss = Cell(false);\n      FilterContent.setup(editor);\n      Buttons.register(editor);\n      Commands.register(editor);\n      editor.on('init', function () {\n        LoadCss.loadCss(editor, pluginUrl, addedInlineCss, addedCss);\n      });\n      editor.on('dblclick', function (ev) {\n        if (Utils.isCodeSample(ev.target)) {\n          Dialog.open(editor);\n        }\n      });\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar hasOwn = require('../internals/has-own-property');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar isSymbol = require('../internals/is-symbol');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar thisNumberValue = require('../internals/this-number-value');\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\nvar TypeError = global.TypeError;\nvar arraySlice = uncurryThis(''.slice);\nvar charCodeAt = uncurryThis(''.charCodeAt);\n\n// `ToNumeric` abstract operation\n// https://tc39.es/ecma262/#sec-tonumeric\nvar toNumeric = function (value) {\n  var primValue = toPrimitive(value, 'number');\n  return typeof primValue == 'bigint' ? primValue : toNumber(primValue);\n};\n\n// `ToNumber` abstract operation\n// https://tc39.es/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, 'number');\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (isSymbol(it)) throw TypeError('Cannot convert a Symbol value to a number');\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = charCodeAt(it, 0);\n    if (first === 43 || first === 45) {\n      third = charCodeAt(it, 2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (charCodeAt(it, 1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = arraySlice(it, 2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = charCodeAt(digits, index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.es/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var n = arguments.length < 1 ? 0 : NativeNumber(toNumeric(value));\n    var dummy = this;\n    // check on 1..constructor(foo) case\n    return isPrototypeOf(NumberPrototype, dummy) && fails(function () { thisNumberValue(dummy); })\n      ? inheritIfRequired(Object(n), dummy, NumberWrapper) : n;\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,' +\n    // ESNext\n    'fromString,range'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (hasOwn(NativeNumber, key = keys[j]) && !hasOwn(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","(function () {\nvar autoresize = (function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var getAutoResizeMinHeight = function (editor) {\n      return parseInt(editor.getParam('autoresize_min_height', editor.getElement().offsetHeight), 10);\n    };\n    var getAutoResizeMaxHeight = function (editor) {\n      return parseInt(editor.getParam('autoresize_max_height', 0), 10);\n    };\n    var getAutoResizeOverflowPadding = function (editor) {\n      return editor.getParam('autoresize_overflow_padding', 1);\n    };\n    var getAutoResizeBottomMargin = function (editor) {\n      return editor.getParam('autoresize_bottom_margin', 50);\n    };\n    var shouldAutoResizeOnInit = function (editor) {\n      return editor.getParam('autoresize_on_init', true);\n    };\n    var Settings = {\n      getAutoResizeMinHeight: getAutoResizeMinHeight,\n      getAutoResizeMaxHeight: getAutoResizeMaxHeight,\n      getAutoResizeOverflowPadding: getAutoResizeOverflowPadding,\n      getAutoResizeBottomMargin: getAutoResizeBottomMargin,\n      shouldAutoResizeOnInit: shouldAutoResizeOnInit\n    };\n\n    var isFullscreen = function (editor) {\n      return editor.plugins.fullscreen && editor.plugins.fullscreen.isFullscreen();\n    };\n    var wait = function (editor, oldSize, times, interval, callback) {\n      global$2.setEditorTimeout(editor, function () {\n        resize(editor, oldSize);\n        if (times--) {\n          wait(editor, oldSize, times, interval, callback);\n        } else if (callback) {\n          callback();\n        }\n      }, interval);\n    };\n    var toggleScrolling = function (editor, state) {\n      var body = editor.getBody();\n      if (body) {\n        body.style.overflowY = state ? '' : 'hidden';\n        if (!state) {\n          body.scrollTop = 0;\n        }\n      }\n    };\n    var resize = function (editor, oldSize) {\n      var deltaSize, doc, body, resizeHeight, myHeight;\n      var marginTop, marginBottom, paddingTop, paddingBottom, borderTop, borderBottom;\n      var dom = editor.dom;\n      doc = editor.getDoc();\n      if (!doc) {\n        return;\n      }\n      if (isFullscreen(editor)) {\n        toggleScrolling(editor, true);\n        return;\n      }\n      body = doc.body;\n      resizeHeight = Settings.getAutoResizeMinHeight(editor);\n      marginTop = dom.getStyle(body, 'margin-top', true);\n      marginBottom = dom.getStyle(body, 'margin-bottom', true);\n      paddingTop = dom.getStyle(body, 'padding-top', true);\n      paddingBottom = dom.getStyle(body, 'padding-bottom', true);\n      borderTop = dom.getStyle(body, 'border-top-width', true);\n      borderBottom = dom.getStyle(body, 'border-bottom-width', true);\n      myHeight = body.offsetHeight + parseInt(marginTop, 10) + parseInt(marginBottom, 10) + parseInt(paddingTop, 10) + parseInt(paddingBottom, 10) + parseInt(borderTop, 10) + parseInt(borderBottom, 10);\n      if (isNaN(myHeight) || myHeight <= 0) {\n        myHeight = global$1.ie ? body.scrollHeight : global$1.webkit && body.clientHeight === 0 ? 0 : body.offsetHeight;\n      }\n      if (myHeight > Settings.getAutoResizeMinHeight(editor)) {\n        resizeHeight = myHeight;\n      }\n      var maxHeight = Settings.getAutoResizeMaxHeight(editor);\n      if (maxHeight && myHeight > maxHeight) {\n        resizeHeight = maxHeight;\n        toggleScrolling(editor, true);\n      } else {\n        toggleScrolling(editor, false);\n      }\n      if (resizeHeight !== oldSize.get()) {\n        deltaSize = resizeHeight - oldSize.get();\n        dom.setStyle(editor.iframeElement, 'height', resizeHeight + 'px');\n        oldSize.set(resizeHeight);\n        if (global$1.webkit && deltaSize < 0) {\n          resize(editor, oldSize);\n        }\n      }\n    };\n    var setup = function (editor, oldSize) {\n      editor.on('init', function () {\n        var overflowPadding, bottomMargin;\n        var dom = editor.dom;\n        overflowPadding = Settings.getAutoResizeOverflowPadding(editor);\n        bottomMargin = Settings.getAutoResizeBottomMargin(editor);\n        if (overflowPadding !== false) {\n          dom.setStyles(editor.getBody(), {\n            paddingLeft: overflowPadding,\n            paddingRight: overflowPadding\n          });\n        }\n        if (bottomMargin !== false) {\n          dom.setStyles(editor.getBody(), { paddingBottom: bottomMargin });\n        }\n      });\n      editor.on('nodechange setcontent keyup FullscreenStateChanged', function (e) {\n        resize(editor, oldSize);\n      });\n      if (Settings.shouldAutoResizeOnInit(editor)) {\n        editor.on('init', function () {\n          wait(editor, oldSize, 20, 100, function () {\n            wait(editor, oldSize, 5, 1000);\n          });\n        });\n      }\n    };\n    var Resize = {\n      setup: setup,\n      resize: resize\n    };\n\n    var register = function (editor, oldSize) {\n      editor.addCommand('mceAutoResize', function () {\n        Resize.resize(editor, oldSize);\n      });\n    };\n    var Commands = { register: register };\n\n    global.add('autoresize', function (editor) {\n      if (!editor.inline) {\n        var oldSize = Cell(0);\n        Commands.register(editor, oldSize);\n        Resize.setup(editor, oldSize);\n      }\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","// Exports the \"paste\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/paste')\n//   ES2015:\n//     import 'tinymce/plugins/paste'\nrequire('./plugin.js');","(function () {\nvar link = (function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var assumeExternalTargets = function (editorSettings) {\n      return typeof editorSettings.link_assume_external_targets === 'boolean' ? editorSettings.link_assume_external_targets : false;\n    };\n    var hasContextToolbar = function (editorSettings) {\n      return typeof editorSettings.link_context_toolbar === 'boolean' ? editorSettings.link_context_toolbar : false;\n    };\n    var getLinkList = function (editorSettings) {\n      return editorSettings.link_list;\n    };\n    var hasDefaultLinkTarget = function (editorSettings) {\n      return typeof editorSettings.default_link_target === 'string';\n    };\n    var getDefaultLinkTarget = function (editorSettings) {\n      return editorSettings.default_link_target;\n    };\n    var getTargetList = function (editorSettings) {\n      return editorSettings.target_list;\n    };\n    var setTargetList = function (editor, list) {\n      editor.settings.target_list = list;\n    };\n    var shouldShowTargetList = function (editorSettings) {\n      return getTargetList(editorSettings) !== false;\n    };\n    var getRelList = function (editorSettings) {\n      return editorSettings.rel_list;\n    };\n    var hasRelList = function (editorSettings) {\n      return getRelList(editorSettings) !== undefined;\n    };\n    var getLinkClassList = function (editorSettings) {\n      return editorSettings.link_class_list;\n    };\n    var hasLinkClassList = function (editorSettings) {\n      return getLinkClassList(editorSettings) !== undefined;\n    };\n    var shouldShowLinkTitle = function (editorSettings) {\n      return editorSettings.link_title !== false;\n    };\n    var allowUnsafeLinkTarget = function (editorSettings) {\n      return typeof editorSettings.allow_unsafe_link_target === 'boolean' ? editorSettings.allow_unsafe_link_target : false;\n    };\n    var Settings = {\n      assumeExternalTargets: assumeExternalTargets,\n      hasContextToolbar: hasContextToolbar,\n      getLinkList: getLinkList,\n      hasDefaultLinkTarget: hasDefaultLinkTarget,\n      getDefaultLinkTarget: getDefaultLinkTarget,\n      getTargetList: getTargetList,\n      setTargetList: setTargetList,\n      shouldShowTargetList: shouldShowTargetList,\n      getRelList: getRelList,\n      hasRelList: hasRelList,\n      getLinkClassList: getLinkClassList,\n      hasLinkClassList: hasLinkClassList,\n      shouldShowLinkTitle: shouldShowLinkTitle,\n      allowUnsafeLinkTarget: allowUnsafeLinkTarget\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var appendClickRemove = function (link, evt) {\n      domGlobals.document.body.appendChild(link);\n      link.dispatchEvent(evt);\n      domGlobals.document.body.removeChild(link);\n    };\n    var open = function (url) {\n      if (!global$3.ie || global$3.ie > 10) {\n        var link = domGlobals.document.createElement('a');\n        link.target = '_blank';\n        link.href = url;\n        link.rel = 'noreferrer noopener';\n        var evt = domGlobals.document.createEvent('MouseEvents');\n        evt.initMouseEvent('click', true, true, domGlobals.window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n        appendClickRemove(link, evt);\n      } else {\n        var win = domGlobals.window.open('', '_blank');\n        if (win) {\n          win.opener = null;\n          var doc = win.document;\n          doc.open();\n          doc.write('<meta http-equiv=\"refresh\" content=\"0; url=' + global$2.DOM.encode(url) + '\">');\n          doc.close();\n        }\n      }\n    };\n    var OpenUrl = { open: open };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var toggleTargetRules = function (rel, isUnsafe) {\n      var rules = ['noopener'];\n      var newRel = rel ? rel.split(/\\s+/) : [];\n      var toString = function (rel) {\n        return global$4.trim(rel.sort().join(' '));\n      };\n      var addTargetRules = function (rel) {\n        rel = removeTargetRules(rel);\n        return rel.length ? rel.concat(rules) : rules;\n      };\n      var removeTargetRules = function (rel) {\n        return rel.filter(function (val) {\n          return global$4.inArray(rules, val) === -1;\n        });\n      };\n      newRel = isUnsafe ? addTargetRules(newRel) : removeTargetRules(newRel);\n      return newRel.length ? toString(newRel) : null;\n    };\n    var trimCaretContainers = function (text) {\n      return text.replace(/\\uFEFF/g, '');\n    };\n    var getAnchorElement = function (editor, selectedElm) {\n      selectedElm = selectedElm || editor.selection.getNode();\n      if (isImageFigure(selectedElm)) {\n        return editor.dom.select('a[href]', selectedElm)[0];\n      } else {\n        return editor.dom.getParent(selectedElm, 'a[href]');\n      }\n    };\n    var getAnchorText = function (selection, anchorElm) {\n      var text = anchorElm ? anchorElm.innerText || anchorElm.textContent : selection.getContent({ format: 'text' });\n      return trimCaretContainers(text);\n    };\n    var isLink = function (elm) {\n      return elm && elm.nodeName === 'A' && elm.href;\n    };\n    var hasLinks = function (elements) {\n      return global$4.grep(elements, isLink).length > 0;\n    };\n    var isOnlyTextSelected = function (html) {\n      if (/</.test(html) && (!/^<a [^>]+>[^<]+<\\/a>$/.test(html) || html.indexOf('href=') === -1)) {\n        return false;\n      }\n      return true;\n    };\n    var isImageFigure = function (node) {\n      return node && node.nodeName === 'FIGURE' && /\\bimage\\b/i.test(node.className);\n    };\n    var link = function (editor, attachState) {\n      return function (data) {\n        editor.undoManager.transact(function () {\n          var selectedElm = editor.selection.getNode();\n          var anchorElm = getAnchorElement(editor, selectedElm);\n          var linkAttrs = {\n            href: data.href,\n            target: data.target ? data.target : null,\n            rel: data.rel ? data.rel : null,\n            class: data.class ? data.class : null,\n            title: data.title ? data.title : null\n          };\n          if (!Settings.hasRelList(editor.settings) && Settings.allowUnsafeLinkTarget(editor.settings) === false) {\n            linkAttrs.rel = toggleTargetRules(linkAttrs.rel, linkAttrs.target === '_blank');\n          }\n          if (data.href === attachState.href) {\n            attachState.attach();\n            attachState = {};\n          }\n          if (anchorElm) {\n            editor.focus();\n            if (data.hasOwnProperty('text')) {\n              if ('innerText' in anchorElm) {\n                anchorElm.innerText = data.text;\n              } else {\n                anchorElm.textContent = data.text;\n              }\n            }\n            editor.dom.setAttribs(anchorElm, linkAttrs);\n            editor.selection.select(anchorElm);\n            editor.undoManager.add();\n          } else {\n            if (isImageFigure(selectedElm)) {\n              linkImageFigure(editor, selectedElm, linkAttrs);\n            } else if (data.hasOwnProperty('text')) {\n              editor.insertContent(editor.dom.createHTML('a', linkAttrs, editor.dom.encode(data.text)));\n            } else {\n              editor.execCommand('mceInsertLink', false, linkAttrs);\n            }\n          }\n        });\n      };\n    };\n    var unlink = function (editor) {\n      return function () {\n        editor.undoManager.transact(function () {\n          var node = editor.selection.getNode();\n          if (isImageFigure(node)) {\n            unlinkImageFigure(editor, node);\n          } else {\n            editor.execCommand('unlink');\n          }\n        });\n      };\n    };\n    var unlinkImageFigure = function (editor, fig) {\n      var a, img;\n      img = editor.dom.select('img', fig)[0];\n      if (img) {\n        a = editor.dom.getParents(img, 'a[href]', fig)[0];\n        if (a) {\n          a.parentNode.insertBefore(img, a);\n          editor.dom.remove(a);\n        }\n      }\n    };\n    var linkImageFigure = function (editor, fig, attrs) {\n      var a, img;\n      img = editor.dom.select('img', fig)[0];\n      if (img) {\n        a = editor.dom.create('a', attrs);\n        img.parentNode.insertBefore(a, img);\n        a.appendChild(img);\n      }\n    };\n    var Utils = {\n      link: link,\n      unlink: unlink,\n      isLink: isLink,\n      hasLinks: hasLinks,\n      isOnlyTextSelected: isOnlyTextSelected,\n      getAnchorElement: getAnchorElement,\n      getAnchorText: getAnchorText,\n      toggleTargetRules: toggleTargetRules\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var attachState = {};\n    var createLinkList = function (editor, callback) {\n      var linkList = Settings.getLinkList(editor.settings);\n      if (typeof linkList === 'string') {\n        global$6.send({\n          url: linkList,\n          success: function (text) {\n            callback(editor, JSON.parse(text));\n          }\n        });\n      } else if (typeof linkList === 'function') {\n        linkList(function (list) {\n          callback(editor, list);\n        });\n      } else {\n        callback(editor, linkList);\n      }\n    };\n    var buildListItems = function (inputList, itemCallback, startItems) {\n      var appendItems = function (values, output) {\n        output = output || [];\n        global$4.each(values, function (item) {\n          var menuItem = { text: item.text || item.title };\n          if (item.menu) {\n            menuItem.menu = appendItems(item.menu);\n          } else {\n            menuItem.value = item.value;\n            if (itemCallback) {\n              itemCallback(menuItem);\n            }\n          }\n          output.push(menuItem);\n        });\n        return output;\n      };\n      return appendItems(inputList, startItems || []);\n    };\n    var delayedConfirm = function (editor, message, callback) {\n      var rng = editor.selection.getRng();\n      global$5.setEditorTimeout(editor, function () {\n        editor.windowManager.confirm(message, function (state) {\n          editor.selection.setRng(rng);\n          callback(state);\n        });\n      });\n    };\n    var showDialog = function (editor, linkList) {\n      var data = {};\n      var selection = editor.selection;\n      var dom = editor.dom;\n      var anchorElm, initialText;\n      var win, onlyText, textListCtrl, linkListCtrl, relListCtrl, targetListCtrl, classListCtrl, linkTitleCtrl, value;\n      var linkListChangeHandler = function (e) {\n        var textCtrl = win.find('#text');\n        if (!textCtrl.value() || e.lastControl && textCtrl.value() === e.lastControl.text()) {\n          textCtrl.value(e.control.text());\n        }\n        win.find('#href').value(e.control.value());\n      };\n      var buildAnchorListControl = function (url) {\n        var anchorList = [];\n        global$4.each(editor.dom.select('a:not([href])'), function (anchor) {\n          var id = anchor.name || anchor.id;\n          if (id) {\n            anchorList.push({\n              text: id,\n              value: '#' + id,\n              selected: url.indexOf('#' + id) !== -1\n            });\n          }\n        });\n        if (anchorList.length) {\n          anchorList.unshift({\n            text: 'None',\n            value: ''\n          });\n          return {\n            name: 'anchor',\n            type: 'listbox',\n            label: 'Anchors',\n            values: anchorList,\n            onselect: linkListChangeHandler\n          };\n        }\n      };\n      var updateText = function () {\n        if (!initialText && onlyText && !data.text) {\n          this.parent().parent().find('#text')[0].value(this.value());\n        }\n      };\n      var urlChange = function (e) {\n        var meta = e.meta || {};\n        if (linkListCtrl) {\n          linkListCtrl.value(editor.convertURL(this.value(), 'href'));\n        }\n        global$4.each(e.meta, function (value, key) {\n          var inp = win.find('#' + key);\n          if (key === 'text') {\n            if (initialText.length === 0) {\n              inp.value(value);\n              data.text = value;\n            }\n          } else {\n            inp.value(value);\n          }\n        });\n        if (meta.attach) {\n          attachState = {\n            href: this.value(),\n            attach: meta.attach\n          };\n        }\n        if (!meta.text) {\n          updateText.call(this);\n        }\n      };\n      var onBeforeCall = function (e) {\n        e.meta = win.toJSON();\n      };\n      onlyText = Utils.isOnlyTextSelected(selection.getContent());\n      anchorElm = Utils.getAnchorElement(editor);\n      data.text = initialText = Utils.getAnchorText(editor.selection, anchorElm);\n      data.href = anchorElm ? dom.getAttrib(anchorElm, 'href') : '';\n      if (anchorElm) {\n        data.target = dom.getAttrib(anchorElm, 'target');\n      } else if (Settings.hasDefaultLinkTarget(editor.settings)) {\n        data.target = Settings.getDefaultLinkTarget(editor.settings);\n      }\n      if (value = dom.getAttrib(anchorElm, 'rel')) {\n        data.rel = value;\n      }\n      if (value = dom.getAttrib(anchorElm, 'class')) {\n        data.class = value;\n      }\n      if (value = dom.getAttrib(anchorElm, 'title')) {\n        data.title = value;\n      }\n      if (onlyText) {\n        textListCtrl = {\n          name: 'text',\n          type: 'textbox',\n          size: 40,\n          label: 'Text to display',\n          onchange: function () {\n            data.text = this.value();\n          }\n        };\n      }\n      if (linkList) {\n        linkListCtrl = {\n          type: 'listbox',\n          label: 'Link list',\n          values: buildListItems(linkList, function (item) {\n            item.value = editor.convertURL(item.value || item.url, 'href');\n          }, [{\n              text: 'None',\n              value: ''\n            }]),\n          onselect: linkListChangeHandler,\n          value: editor.convertURL(data.href, 'href'),\n          onPostRender: function () {\n            linkListCtrl = this;\n          }\n        };\n      }\n      if (Settings.shouldShowTargetList(editor.settings)) {\n        if (Settings.getTargetList(editor.settings) === undefined) {\n          Settings.setTargetList(editor, [\n            {\n              text: 'None',\n              value: ''\n            },\n            {\n              text: 'New window',\n              value: '_blank'\n            }\n          ]);\n        }\n        targetListCtrl = {\n          name: 'target',\n          type: 'listbox',\n          label: 'Target',\n          values: buildListItems(Settings.getTargetList(editor.settings))\n        };\n      }\n      if (Settings.hasRelList(editor.settings)) {\n        relListCtrl = {\n          name: 'rel',\n          type: 'listbox',\n          label: 'Rel',\n          values: buildListItems(Settings.getRelList(editor.settings), function (item) {\n            if (Settings.allowUnsafeLinkTarget(editor.settings) === false) {\n              item.value = Utils.toggleTargetRules(item.value, data.target === '_blank');\n            }\n          })\n        };\n      }\n      if (Settings.hasLinkClassList(editor.settings)) {\n        classListCtrl = {\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          values: buildListItems(Settings.getLinkClassList(editor.settings), function (item) {\n            if (item.value) {\n              item.textStyle = function () {\n                return editor.formatter.getCssText({\n                  inline: 'a',\n                  classes: [item.value]\n                });\n              };\n            }\n          })\n        };\n      }\n      if (Settings.shouldShowLinkTitle(editor.settings)) {\n        linkTitleCtrl = {\n          name: 'title',\n          type: 'textbox',\n          label: 'Title',\n          value: data.title\n        };\n      }\n      win = editor.windowManager.open({\n        title: 'Insert link',\n        data: data,\n        body: [\n          {\n            name: 'href',\n            type: 'filepicker',\n            filetype: 'file',\n            size: 40,\n            autofocus: true,\n            label: 'Url',\n            onchange: urlChange,\n            onkeyup: updateText,\n            onpaste: updateText,\n            onbeforecall: onBeforeCall\n          },\n          textListCtrl,\n          linkTitleCtrl,\n          buildAnchorListControl(data.href),\n          linkListCtrl,\n          relListCtrl,\n          targetListCtrl,\n          classListCtrl\n        ],\n        onSubmit: function (e) {\n          var assumeExternalTargets = Settings.assumeExternalTargets(editor.settings);\n          var insertLink = Utils.link(editor, attachState);\n          var removeLink = Utils.unlink(editor);\n          var resultData = global$4.extend({}, data, e.data);\n          var href = resultData.href;\n          if (!href) {\n            removeLink();\n            return;\n          }\n          if (!onlyText || resultData.text === initialText) {\n            delete resultData.text;\n          }\n          if (href.indexOf('@') > 0 && href.indexOf('//') === -1 && href.indexOf('mailto:') === -1) {\n            delayedConfirm(editor, 'The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?', function (state) {\n              if (state) {\n                resultData.href = 'mailto:' + href;\n              }\n              insertLink(resultData);\n            });\n            return;\n          }\n          if (assumeExternalTargets === true && !/^\\w+:/i.test(href) || assumeExternalTargets === false && /^\\s*www[\\.|\\d\\.]/i.test(href)) {\n            delayedConfirm(editor, 'The URL you entered seems to be an external link. Do you want to add the required http:// prefix?', function (state) {\n              if (state) {\n                resultData.href = 'http://' + href;\n              }\n              insertLink(resultData);\n            });\n            return;\n          }\n          insertLink(resultData);\n        }\n      });\n    };\n    var open$1 = function (editor) {\n      createLinkList(editor, showDialog);\n    };\n    var Dialog = { open: open$1 };\n\n    var getLink = function (editor, elm) {\n      return editor.dom.getParent(elm, 'a[href]');\n    };\n    var getSelectedLink = function (editor) {\n      return getLink(editor, editor.selection.getStart());\n    };\n    var getHref = function (elm) {\n      var href = elm.getAttribute('data-mce-href');\n      return href ? href : elm.getAttribute('href');\n    };\n    var isContextMenuVisible = function (editor) {\n      var contextmenu = editor.plugins.contextmenu;\n      return contextmenu ? contextmenu.isContextMenuVisible() : false;\n    };\n    var hasOnlyAltModifier = function (e) {\n      return e.altKey === true && e.shiftKey === false && e.ctrlKey === false && e.metaKey === false;\n    };\n    var gotoLink = function (editor, a) {\n      if (a) {\n        var href = getHref(a);\n        if (/^#/.test(href)) {\n          var targetEl = editor.$(href);\n          if (targetEl.length) {\n            editor.selection.scrollIntoView(targetEl[0], true);\n          }\n        } else {\n          OpenUrl.open(a.href);\n        }\n      }\n    };\n    var openDialog = function (editor) {\n      return function () {\n        Dialog.open(editor);\n      };\n    };\n    var gotoSelectedLink = function (editor) {\n      return function () {\n        gotoLink(editor, getSelectedLink(editor));\n      };\n    };\n    var leftClickedOnAHref = function (editor) {\n      return function (elm) {\n        var sel, rng, node;\n        if (Settings.hasContextToolbar(editor.settings) && !isContextMenuVisible(editor) && Utils.isLink(elm)) {\n          sel = editor.selection;\n          rng = sel.getRng();\n          node = rng.startContainer;\n          if (node.nodeType === 3 && sel.isCollapsed() && rng.startOffset > 0 && rng.startOffset < node.data.length) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var setupGotoLinks = function (editor) {\n      editor.on('click', function (e) {\n        var link = getLink(editor, e.target);\n        if (link && global$1.metaKeyPressed(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n      editor.on('keydown', function (e) {\n        var link = getSelectedLink(editor);\n        if (link && e.keyCode === 13 && hasOnlyAltModifier(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n    };\n    var toggleActiveState = function (editor) {\n      return function () {\n        var self = this;\n        editor.on('nodechange', function (e) {\n          self.active(!editor.readonly && !!Utils.getAnchorElement(editor, e.element));\n        });\n      };\n    };\n    var toggleViewLinkState = function (editor) {\n      return function () {\n        var self = this;\n        var toggleVisibility = function (e) {\n          if (Utils.hasLinks(e.parents)) {\n            self.show();\n          } else {\n            self.hide();\n          }\n        };\n        if (!Utils.hasLinks(editor.dom.getParents(editor.selection.getStart()))) {\n          self.hide();\n        }\n        editor.on('nodechange', toggleVisibility);\n        self.on('remove', function () {\n          editor.off('nodechange', toggleVisibility);\n        });\n      };\n    };\n    var Actions = {\n      openDialog: openDialog,\n      gotoSelectedLink: gotoSelectedLink,\n      leftClickedOnAHref: leftClickedOnAHref,\n      setupGotoLinks: setupGotoLinks,\n      toggleActiveState: toggleActiveState,\n      toggleViewLinkState: toggleViewLinkState\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceLink', Actions.openDialog(editor));\n    };\n    var Commands = { register: register };\n\n    var setup = function (editor) {\n      editor.addShortcut('Meta+K', '', Actions.openDialog(editor));\n    };\n    var Keyboard = { setup: setup };\n\n    var setupButtons = function (editor) {\n      editor.addButton('link', {\n        active: false,\n        icon: 'link',\n        tooltip: 'Insert/edit link',\n        onclick: Actions.openDialog(editor),\n        onpostrender: Actions.toggleActiveState(editor)\n      });\n      editor.addButton('unlink', {\n        active: false,\n        icon: 'unlink',\n        tooltip: 'Remove link',\n        onclick: Utils.unlink(editor),\n        onpostrender: Actions.toggleActiveState(editor)\n      });\n      if (editor.addContextToolbar) {\n        editor.addButton('openlink', {\n          icon: 'newtab',\n          tooltip: 'Open link',\n          onclick: Actions.gotoSelectedLink(editor)\n        });\n      }\n    };\n    var setupMenuItems = function (editor) {\n      editor.addMenuItem('openlink', {\n        text: 'Open link',\n        icon: 'newtab',\n        onclick: Actions.gotoSelectedLink(editor),\n        onPostRender: Actions.toggleViewLinkState(editor),\n        prependToContext: true\n      });\n      editor.addMenuItem('link', {\n        icon: 'link',\n        text: 'Link',\n        shortcut: 'Meta+K',\n        onclick: Actions.openDialog(editor),\n        stateSelector: 'a[href]',\n        context: 'insert',\n        prependToContext: true\n      });\n      editor.addMenuItem('unlink', {\n        icon: 'unlink',\n        text: 'Remove link',\n        onclick: Utils.unlink(editor),\n        stateSelector: 'a[href]'\n      });\n    };\n    var setupContextToolbars = function (editor) {\n      if (editor.addContextToolbar) {\n        editor.addContextToolbar(Actions.leftClickedOnAHref(editor), 'openlink | link unlink');\n      }\n    };\n    var Controls = {\n      setupButtons: setupButtons,\n      setupMenuItems: setupMenuItems,\n      setupContextToolbars: setupContextToolbars\n    };\n\n    global.add('link', function (editor) {\n      Controls.setupButtons(editor);\n      Controls.setupMenuItems(editor);\n      Controls.setupContextToolbars(editor);\n      Actions.setupGotoLinks(editor);\n      Commands.register(editor);\n      Keyboard.setup(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneDataView = require('./_cloneDataView'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","(function () {\nvar nonbreaking = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var stringRepeat = function (string, repeats) {\n      var str = '';\n      for (var index = 0; index < repeats; index++) {\n        str += string;\n      }\n      return str;\n    };\n    var isVisualCharsEnabled = function (editor) {\n      return editor.plugins.visualchars ? editor.plugins.visualchars.isEnabled() : false;\n    };\n    var insertNbsp = function (editor, times) {\n      var nbsp = isVisualCharsEnabled(editor) ? '<span class=\"mce-nbsp\">&nbsp;</span>' : '&nbsp;';\n      editor.insertContent(stringRepeat(nbsp, times));\n      editor.dom.setAttrib(editor.dom.select('span.mce-nbsp'), 'data-mce-bogus', '1');\n    };\n    var Actions = { insertNbsp: insertNbsp };\n\n    var register = function (editor) {\n      editor.addCommand('mceNonBreaking', function () {\n        Actions.insertNbsp(editor, 1);\n      });\n    };\n    var Commands = { register: register };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var getKeyboardSpaces = function (editor) {\n      var spaces = editor.getParam('nonbreaking_force_tab', 0);\n      if (typeof spaces === 'boolean') {\n        return spaces === true ? 3 : 0;\n      } else {\n        return spaces;\n      }\n    };\n    var Settings = { getKeyboardSpaces: getKeyboardSpaces };\n\n    var setup = function (editor) {\n      var spaces = Settings.getKeyboardSpaces(editor);\n      if (spaces > 0) {\n        editor.on('keydown', function (e) {\n          if (e.keyCode === global$1.TAB && !e.isDefaultPrevented()) {\n            if (e.shiftKey) {\n              return;\n            }\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            Actions.insertNbsp(editor, spaces);\n          }\n        });\n      }\n    };\n    var Keyboard = { setup: setup };\n\n    var register$1 = function (editor) {\n      editor.addButton('nonbreaking', {\n        title: 'Nonbreaking space',\n        cmd: 'mceNonBreaking'\n      });\n      editor.addMenuItem('nonbreaking', {\n        icon: 'nonbreaking',\n        text: 'Nonbreaking space',\n        cmd: 'mceNonBreaking',\n        context: 'insert'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('nonbreaking', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n      Keyboard.setup(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"charmap\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/charmap')\n//   ES2015:\n//     import 'tinymce/plugins/charmap'\nrequire('./plugin.js');","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nmodule.exports = baseIsSet;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var baseIsMap = require('./_baseIsMap'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nmodule.exports = isMap;\n","(function () {\nvar image = (function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var hasDimensions = function (editor) {\n      return editor.settings.image_dimensions === false ? false : true;\n    };\n    var hasAdvTab = function (editor) {\n      return editor.settings.image_advtab === true ? true : false;\n    };\n    var getPrependUrl = function (editor) {\n      return editor.getParam('image_prepend_url', '');\n    };\n    var getClassList = function (editor) {\n      return editor.getParam('image_class_list');\n    };\n    var hasDescription = function (editor) {\n      return editor.settings.image_description === false ? false : true;\n    };\n    var hasImageTitle = function (editor) {\n      return editor.settings.image_title === true ? true : false;\n    };\n    var hasImageCaption = function (editor) {\n      return editor.settings.image_caption === true ? true : false;\n    };\n    var getImageList = function (editor) {\n      return editor.getParam('image_list', false);\n    };\n    var hasUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url', false);\n    };\n    var hasUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler', false);\n    };\n    var getUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url');\n    };\n    var getUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler');\n    };\n    var getUploadBasePath = function (editor) {\n      return editor.getParam('images_upload_base_path');\n    };\n    var getUploadCredentials = function (editor) {\n      return editor.getParam('images_upload_credentials');\n    };\n    var Settings = {\n      hasDimensions: hasDimensions,\n      hasAdvTab: hasAdvTab,\n      getPrependUrl: getPrependUrl,\n      getClassList: getClassList,\n      hasDescription: hasDescription,\n      hasImageTitle: hasImageTitle,\n      hasImageCaption: hasImageCaption,\n      getImageList: getImageList,\n      hasUploadUrl: hasUploadUrl,\n      hasUploadHandler: hasUploadHandler,\n      getUploadUrl: getUploadUrl,\n      getUploadHandler: getUploadHandler,\n      getUploadBasePath: getUploadBasePath,\n      getUploadCredentials: getUploadCredentials\n    };\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n    var Global$1 = { getOrDie: getOrDie };\n\n    function FileReader () {\n      var f = Global$1.getOrDie('FileReader');\n      return new f();\n    }\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var parseIntAndGetMax = function (val1, val2) {\n      return Math.max(parseInt(val1, 10), parseInt(val2, 10));\n    };\n    var getImageSize = function (url, callback) {\n      var img = domGlobals.document.createElement('img');\n      function done(width, height) {\n        if (img.parentNode) {\n          img.parentNode.removeChild(img);\n        }\n        callback({\n          width: width,\n          height: height\n        });\n      }\n      img.onload = function () {\n        var width = parseIntAndGetMax(img.width, img.clientWidth);\n        var height = parseIntAndGetMax(img.height, img.clientHeight);\n        done(width, height);\n      };\n      img.onerror = function () {\n        done(0, 0);\n      };\n      var style = img.style;\n      style.visibility = 'hidden';\n      style.position = 'fixed';\n      style.bottom = style.left = '0px';\n      style.width = style.height = 'auto';\n      domGlobals.document.body.appendChild(img);\n      img.src = url;\n    };\n    var buildListItems = function (inputList, itemCallback, startItems) {\n      function appendItems(values, output) {\n        output = output || [];\n        global$2.each(values, function (item) {\n          var menuItem = { text: item.text || item.title };\n          if (item.menu) {\n            menuItem.menu = appendItems(item.menu);\n          } else {\n            menuItem.value = item.value;\n            itemCallback(menuItem);\n          }\n          output.push(menuItem);\n        });\n        return output;\n      }\n      return appendItems(inputList, startItems || []);\n    };\n    var removePixelSuffix = function (value) {\n      if (value) {\n        value = value.replace(/px$/, '');\n      }\n      return value;\n    };\n    var addPixelSuffix = function (value) {\n      if (value.length > 0 && /^[0-9]+$/.test(value)) {\n        value += 'px';\n      }\n      return value;\n    };\n    var mergeMargins = function (css) {\n      if (css.margin) {\n        var splitMargin = css.margin.split(' ');\n        switch (splitMargin.length) {\n        case 1:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[0];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[0];\n          css['margin-left'] = css['margin-left'] || splitMargin[0];\n          break;\n        case 2:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[0];\n          css['margin-left'] = css['margin-left'] || splitMargin[1];\n          break;\n        case 3:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[2];\n          css['margin-left'] = css['margin-left'] || splitMargin[1];\n          break;\n        case 4:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[2];\n          css['margin-left'] = css['margin-left'] || splitMargin[3];\n        }\n        delete css.margin;\n      }\n      return css;\n    };\n    var createImageList = function (editor, callback) {\n      var imageList = Settings.getImageList(editor);\n      if (typeof imageList === 'string') {\n        global$3.send({\n          url: imageList,\n          success: function (text) {\n            callback(JSON.parse(text));\n          }\n        });\n      } else if (typeof imageList === 'function') {\n        imageList(callback);\n      } else {\n        callback(imageList);\n      }\n    };\n    var waitLoadImage = function (editor, data, imgElm) {\n      function selectImage() {\n        imgElm.onload = imgElm.onerror = null;\n        if (editor.selection) {\n          editor.selection.select(imgElm);\n          editor.nodeChanged();\n        }\n      }\n      imgElm.onload = function () {\n        if (!data.width && !data.height && Settings.hasDimensions(editor)) {\n          editor.dom.setAttribs(imgElm, {\n            width: imgElm.clientWidth,\n            height: imgElm.clientHeight\n          });\n        }\n        selectImage();\n      };\n      imgElm.onerror = selectImage;\n    };\n    var blobToDataUri = function (blob) {\n      return new global$1(function (resolve, reject) {\n        var reader = FileReader();\n        reader.onload = function () {\n          resolve(reader.result);\n        };\n        reader.onerror = function () {\n          reject(reader.error.message);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n    var Utils = {\n      getImageSize: getImageSize,\n      buildListItems: buildListItems,\n      removePixelSuffix: removePixelSuffix,\n      addPixelSuffix: addPixelSuffix,\n      mergeMargins: mergeMargins,\n      createImageList: createImageList,\n      waitLoadImage: waitLoadImage,\n      blobToDataUri: blobToDataUri\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var merge = baseMerge(shallow);\n\n    var DOM = global$4.DOM;\n    var getHspace = function (image) {\n      if (image.style.marginLeft && image.style.marginRight && image.style.marginLeft === image.style.marginRight) {\n        return Utils.removePixelSuffix(image.style.marginLeft);\n      } else {\n        return '';\n      }\n    };\n    var getVspace = function (image) {\n      if (image.style.marginTop && image.style.marginBottom && image.style.marginTop === image.style.marginBottom) {\n        return Utils.removePixelSuffix(image.style.marginTop);\n      } else {\n        return '';\n      }\n    };\n    var getBorder = function (image) {\n      if (image.style.borderWidth) {\n        return Utils.removePixelSuffix(image.style.borderWidth);\n      } else {\n        return '';\n      }\n    };\n    var getAttrib = function (image, name) {\n      if (image.hasAttribute(name)) {\n        return image.getAttribute(name);\n      } else {\n        return '';\n      }\n    };\n    var getStyle = function (image, name) {\n      return image.style[name] ? image.style[name] : '';\n    };\n    var hasCaption = function (image) {\n      return image.parentNode !== null && image.parentNode.nodeName === 'FIGURE';\n    };\n    var setAttrib = function (image, name, value) {\n      image.setAttribute(name, value);\n    };\n    var wrapInFigure = function (image) {\n      var figureElm = DOM.create('figure', { class: 'image' });\n      DOM.insertAfter(figureElm, image);\n      figureElm.appendChild(image);\n      figureElm.appendChild(DOM.create('figcaption', { contentEditable: true }, 'Caption'));\n      figureElm.contentEditable = 'false';\n    };\n    var removeFigure = function (image) {\n      var figureElm = image.parentNode;\n      DOM.insertAfter(image, figureElm);\n      DOM.remove(figureElm);\n    };\n    var toggleCaption = function (image) {\n      if (hasCaption(image)) {\n        removeFigure(image);\n      } else {\n        wrapInFigure(image);\n      }\n    };\n    var normalizeStyle = function (image, normalizeCss) {\n      var attrValue = image.getAttribute('style');\n      var value = normalizeCss(attrValue !== null ? attrValue : '');\n      if (value.length > 0) {\n        image.setAttribute('style', value);\n        image.setAttribute('data-mce-style', value);\n      } else {\n        image.removeAttribute('style');\n      }\n    };\n    var setSize = function (name, normalizeCss) {\n      return function (image, name, value) {\n        if (image.style[name]) {\n          image.style[name] = Utils.addPixelSuffix(value);\n          normalizeStyle(image, normalizeCss);\n        } else {\n          setAttrib(image, name, value);\n        }\n      };\n    };\n    var getSize = function (image, name) {\n      if (image.style[name]) {\n        return Utils.removePixelSuffix(image.style[name]);\n      } else {\n        return getAttrib(image, name);\n      }\n    };\n    var setHspace = function (image, value) {\n      var pxValue = Utils.addPixelSuffix(value);\n      image.style.marginLeft = pxValue;\n      image.style.marginRight = pxValue;\n    };\n    var setVspace = function (image, value) {\n      var pxValue = Utils.addPixelSuffix(value);\n      image.style.marginTop = pxValue;\n      image.style.marginBottom = pxValue;\n    };\n    var setBorder = function (image, value) {\n      var pxValue = Utils.addPixelSuffix(value);\n      image.style.borderWidth = pxValue;\n    };\n    var setBorderStyle = function (image, value) {\n      image.style.borderStyle = value;\n    };\n    var getBorderStyle = function (image) {\n      return getStyle(image, 'borderStyle');\n    };\n    var isFigure = function (elm) {\n      return elm.nodeName === 'FIGURE';\n    };\n    var defaultData = function () {\n      return {\n        src: '',\n        alt: '',\n        title: '',\n        width: '',\n        height: '',\n        class: '',\n        style: '',\n        caption: false,\n        hspace: '',\n        vspace: '',\n        border: '',\n        borderStyle: ''\n      };\n    };\n    var getStyleValue = function (normalizeCss, data) {\n      var image = domGlobals.document.createElement('img');\n      setAttrib(image, 'style', data.style);\n      if (getHspace(image) || data.hspace !== '') {\n        setHspace(image, data.hspace);\n      }\n      if (getVspace(image) || data.vspace !== '') {\n        setVspace(image, data.vspace);\n      }\n      if (getBorder(image) || data.border !== '') {\n        setBorder(image, data.border);\n      }\n      if (getBorderStyle(image) || data.borderStyle !== '') {\n        setBorderStyle(image, data.borderStyle);\n      }\n      return normalizeCss(image.getAttribute('style'));\n    };\n    var create = function (normalizeCss, data) {\n      var image = domGlobals.document.createElement('img');\n      write(normalizeCss, merge(data, { caption: false }), image);\n      setAttrib(image, 'alt', data.alt);\n      if (data.caption) {\n        var figure = DOM.create('figure', { class: 'image' });\n        figure.appendChild(image);\n        figure.appendChild(DOM.create('figcaption', { contentEditable: true }, 'Caption'));\n        figure.contentEditable = 'false';\n        return figure;\n      } else {\n        return image;\n      }\n    };\n    var read = function (normalizeCss, image) {\n      return {\n        src: getAttrib(image, 'src'),\n        alt: getAttrib(image, 'alt'),\n        title: getAttrib(image, 'title'),\n        width: getSize(image, 'width'),\n        height: getSize(image, 'height'),\n        class: getAttrib(image, 'class'),\n        style: normalizeCss(getAttrib(image, 'style')),\n        caption: hasCaption(image),\n        hspace: getHspace(image),\n        vspace: getVspace(image),\n        border: getBorder(image),\n        borderStyle: getStyle(image, 'borderStyle')\n      };\n    };\n    var updateProp = function (image, oldData, newData, name, set) {\n      if (newData[name] !== oldData[name]) {\n        set(image, name, newData[name]);\n      }\n    };\n    var normalized = function (set, normalizeCss) {\n      return function (image, name, value) {\n        set(image, value);\n        normalizeStyle(image, normalizeCss);\n      };\n    };\n    var write = function (normalizeCss, newData, image) {\n      var oldData = read(normalizeCss, image);\n      updateProp(image, oldData, newData, 'caption', function (image, _name, _value) {\n        return toggleCaption(image);\n      });\n      updateProp(image, oldData, newData, 'src', setAttrib);\n      updateProp(image, oldData, newData, 'alt', setAttrib);\n      updateProp(image, oldData, newData, 'title', setAttrib);\n      updateProp(image, oldData, newData, 'width', setSize('width', normalizeCss));\n      updateProp(image, oldData, newData, 'height', setSize('height', normalizeCss));\n      updateProp(image, oldData, newData, 'class', setAttrib);\n      updateProp(image, oldData, newData, 'style', normalized(function (image, value) {\n        return setAttrib(image, 'style', value);\n      }, normalizeCss));\n      updateProp(image, oldData, newData, 'hspace', normalized(setHspace, normalizeCss));\n      updateProp(image, oldData, newData, 'vspace', normalized(setVspace, normalizeCss));\n      updateProp(image, oldData, newData, 'border', normalized(setBorder, normalizeCss));\n      updateProp(image, oldData, newData, 'borderStyle', normalized(setBorderStyle, normalizeCss));\n    };\n\n    var normalizeCss = function (editor, cssText) {\n      var css = editor.dom.styles.parse(cssText);\n      var mergedCss = Utils.mergeMargins(css);\n      var compressed = editor.dom.styles.parse(editor.dom.styles.serialize(mergedCss));\n      return editor.dom.styles.serialize(compressed);\n    };\n    var getSelectedImage = function (editor) {\n      var imgElm = editor.selection.getNode();\n      var figureElm = editor.dom.getParent(imgElm, 'figure.image');\n      if (figureElm) {\n        return editor.dom.select('img', figureElm)[0];\n      }\n      if (imgElm && (imgElm.nodeName !== 'IMG' || imgElm.getAttribute('data-mce-object') || imgElm.getAttribute('data-mce-placeholder'))) {\n        return null;\n      }\n      return imgElm;\n    };\n    var splitTextBlock = function (editor, figure) {\n      var dom = editor.dom;\n      var textBlock = dom.getParent(figure.parentNode, function (node) {\n        return editor.schema.getTextBlockElements()[node.nodeName];\n      }, editor.getBody());\n      if (textBlock) {\n        return dom.split(textBlock, figure);\n      } else {\n        return figure;\n      }\n    };\n    var readImageDataFromSelection = function (editor) {\n      var image = getSelectedImage(editor);\n      return image ? read(function (css) {\n        return normalizeCss(editor, css);\n      }, image) : defaultData();\n    };\n    var insertImageAtCaret = function (editor, data) {\n      var elm = create(function (css) {\n        return normalizeCss(editor, css);\n      }, data);\n      editor.dom.setAttrib(elm, 'data-mce-id', '__mcenew');\n      editor.focus();\n      editor.selection.setContent(elm.outerHTML);\n      var insertedElm = editor.dom.select('*[data-mce-id=\"__mcenew\"]')[0];\n      editor.dom.setAttrib(insertedElm, 'data-mce-id', null);\n      if (isFigure(insertedElm)) {\n        var figure = splitTextBlock(editor, insertedElm);\n        editor.selection.select(figure);\n      } else {\n        editor.selection.select(insertedElm);\n      }\n    };\n    var syncSrcAttr = function (editor, image) {\n      editor.dom.setAttrib(image, 'src', image.getAttribute('src'));\n    };\n    var deleteImage = function (editor, image) {\n      if (image) {\n        var elm = editor.dom.is(image.parentNode, 'figure.image') ? image.parentNode : image;\n        editor.dom.remove(elm);\n        editor.focus();\n        editor.nodeChanged();\n        if (editor.dom.isEmpty(editor.getBody())) {\n          editor.setContent('');\n          editor.selection.setCursorLocation();\n        }\n      }\n    };\n    var writeImageDataToSelection = function (editor, data) {\n      var image = getSelectedImage(editor);\n      write(function (css) {\n        return normalizeCss(editor, css);\n      }, data, image);\n      syncSrcAttr(editor, image);\n      if (isFigure(image.parentNode)) {\n        var figure = image.parentNode;\n        splitTextBlock(editor, figure);\n        editor.selection.select(image.parentNode);\n      } else {\n        editor.selection.select(image);\n        Utils.waitLoadImage(editor, data, image);\n      }\n    };\n    var insertOrUpdateImage = function (editor, data) {\n      var image = getSelectedImage(editor);\n      if (image) {\n        if (data.src) {\n          writeImageDataToSelection(editor, data);\n        } else {\n          deleteImage(editor, image);\n        }\n      } else if (data.src) {\n        insertImageAtCaret(editor, data);\n      }\n    };\n\n    var updateVSpaceHSpaceBorder = function (editor) {\n      return function (evt) {\n        var dom = editor.dom;\n        var rootControl = evt.control.rootControl;\n        if (!Settings.hasAdvTab(editor)) {\n          return;\n        }\n        var data = rootControl.toJSON();\n        var css = dom.parseStyle(data.style);\n        rootControl.find('#vspace').value('');\n        rootControl.find('#hspace').value('');\n        css = Utils.mergeMargins(css);\n        if (css['margin-top'] && css['margin-bottom'] || css['margin-right'] && css['margin-left']) {\n          if (css['margin-top'] === css['margin-bottom']) {\n            rootControl.find('#vspace').value(Utils.removePixelSuffix(css['margin-top']));\n          } else {\n            rootControl.find('#vspace').value('');\n          }\n          if (css['margin-right'] === css['margin-left']) {\n            rootControl.find('#hspace').value(Utils.removePixelSuffix(css['margin-right']));\n          } else {\n            rootControl.find('#hspace').value('');\n          }\n        }\n        if (css['border-width']) {\n          rootControl.find('#border').value(Utils.removePixelSuffix(css['border-width']));\n        } else {\n          rootControl.find('#border').value('');\n        }\n        if (css['border-style']) {\n          rootControl.find('#borderStyle').value(css['border-style']);\n        } else {\n          rootControl.find('#borderStyle').value('');\n        }\n        rootControl.find('#style').value(dom.serializeStyle(dom.parseStyle(dom.serializeStyle(css))));\n      };\n    };\n    var updateStyle = function (editor, win) {\n      win.find('#style').each(function (ctrl) {\n        var value = getStyleValue(function (css) {\n          return normalizeCss(editor, css);\n        }, merge(defaultData(), win.toJSON()));\n        ctrl.value(value);\n      });\n    };\n    var makeTab = function (editor) {\n      return {\n        title: 'Advanced',\n        type: 'form',\n        pack: 'start',\n        items: [\n          {\n            label: 'Style',\n            name: 'style',\n            type: 'textbox',\n            onchange: updateVSpaceHSpaceBorder(editor)\n          },\n          {\n            type: 'form',\n            layout: 'grid',\n            packV: 'start',\n            columns: 2,\n            padding: 0,\n            defaults: {\n              type: 'textbox',\n              maxWidth: 50,\n              onchange: function (evt) {\n                updateStyle(editor, evt.control.rootControl);\n              }\n            },\n            items: [\n              {\n                label: 'Vertical space',\n                name: 'vspace'\n              },\n              {\n                label: 'Border width',\n                name: 'border'\n              },\n              {\n                label: 'Horizontal space',\n                name: 'hspace'\n              },\n              {\n                label: 'Border style',\n                type: 'listbox',\n                name: 'borderStyle',\n                width: 90,\n                maxWidth: 90,\n                onselect: function (evt) {\n                  updateStyle(editor, evt.control.rootControl);\n                },\n                values: [\n                  {\n                    text: 'Select...',\n                    value: ''\n                  },\n                  {\n                    text: 'Solid',\n                    value: 'solid'\n                  },\n                  {\n                    text: 'Dotted',\n                    value: 'dotted'\n                  },\n                  {\n                    text: 'Dashed',\n                    value: 'dashed'\n                  },\n                  {\n                    text: 'Double',\n                    value: 'double'\n                  },\n                  {\n                    text: 'Groove',\n                    value: 'groove'\n                  },\n                  {\n                    text: 'Ridge',\n                    value: 'ridge'\n                  },\n                  {\n                    text: 'Inset',\n                    value: 'inset'\n                  },\n                  {\n                    text: 'Outset',\n                    value: 'outset'\n                  },\n                  {\n                    text: 'None',\n                    value: 'none'\n                  },\n                  {\n                    text: 'Hidden',\n                    value: 'hidden'\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      };\n    };\n    var AdvTab = { makeTab: makeTab };\n\n    var doSyncSize = function (widthCtrl, heightCtrl) {\n      widthCtrl.state.set('oldVal', widthCtrl.value());\n      heightCtrl.state.set('oldVal', heightCtrl.value());\n    };\n    var doSizeControls = function (win, f) {\n      var widthCtrl = win.find('#width')[0];\n      var heightCtrl = win.find('#height')[0];\n      var constrained = win.find('#constrain')[0];\n      if (widthCtrl && heightCtrl && constrained) {\n        f(widthCtrl, heightCtrl, constrained.checked());\n      }\n    };\n    var doUpdateSize = function (widthCtrl, heightCtrl, isContrained) {\n      var oldWidth = widthCtrl.state.get('oldVal');\n      var oldHeight = heightCtrl.state.get('oldVal');\n      var newWidth = widthCtrl.value();\n      var newHeight = heightCtrl.value();\n      if (isContrained && oldWidth && oldHeight && newWidth && newHeight) {\n        if (newWidth !== oldWidth) {\n          newHeight = Math.round(newWidth / oldWidth * newHeight);\n          if (!isNaN(newHeight)) {\n            heightCtrl.value(newHeight);\n          }\n        } else {\n          newWidth = Math.round(newHeight / oldHeight * newWidth);\n          if (!isNaN(newWidth)) {\n            widthCtrl.value(newWidth);\n          }\n        }\n      }\n      doSyncSize(widthCtrl, heightCtrl);\n    };\n    var syncSize = function (win) {\n      doSizeControls(win, doSyncSize);\n    };\n    var updateSize = function (win) {\n      doSizeControls(win, doUpdateSize);\n    };\n    var createUi = function () {\n      var recalcSize = function (evt) {\n        updateSize(evt.control.rootControl);\n      };\n      return {\n        type: 'container',\n        label: 'Dimensions',\n        layout: 'flex',\n        align: 'center',\n        spacing: 5,\n        items: [\n          {\n            name: 'width',\n            type: 'textbox',\n            maxLength: 5,\n            size: 5,\n            onchange: recalcSize,\n            ariaLabel: 'Width'\n          },\n          {\n            type: 'label',\n            text: 'x'\n          },\n          {\n            name: 'height',\n            type: 'textbox',\n            maxLength: 5,\n            size: 5,\n            onchange: recalcSize,\n            ariaLabel: 'Height'\n          },\n          {\n            name: 'constrain',\n            type: 'checkbox',\n            checked: true,\n            text: 'Constrain proportions'\n          }\n        ]\n      };\n    };\n    var SizeManager = {\n      createUi: createUi,\n      syncSize: syncSize,\n      updateSize: updateSize\n    };\n\n    var onSrcChange = function (evt, editor) {\n      var srcURL, prependURL, absoluteURLPattern;\n      var meta = evt.meta || {};\n      var control = evt.control;\n      var rootControl = control.rootControl;\n      var imageListCtrl = rootControl.find('#image-list')[0];\n      if (imageListCtrl) {\n        imageListCtrl.value(editor.convertURL(control.value(), 'src'));\n      }\n      global$2.each(meta, function (value, key) {\n        rootControl.find('#' + key).value(value);\n      });\n      if (!meta.width && !meta.height) {\n        srcURL = editor.convertURL(control.value(), 'src');\n        prependURL = Settings.getPrependUrl(editor);\n        absoluteURLPattern = new RegExp('^(?:[a-z]+:)?//', 'i');\n        if (prependURL && !absoluteURLPattern.test(srcURL) && srcURL.substring(0, prependURL.length) !== prependURL) {\n          srcURL = prependURL + srcURL;\n        }\n        control.value(srcURL);\n        Utils.getImageSize(editor.documentBaseURI.toAbsolute(control.value()), function (data) {\n          if (data.width && data.height && Settings.hasDimensions(editor)) {\n            rootControl.find('#width').value(data.width);\n            rootControl.find('#height').value(data.height);\n            SizeManager.syncSize(rootControl);\n          }\n        });\n      }\n    };\n    var onBeforeCall = function (evt) {\n      evt.meta = evt.control.rootControl.toJSON();\n    };\n    var getGeneralItems = function (editor, imageListCtrl) {\n      var generalFormItems = [\n        {\n          name: 'src',\n          type: 'filepicker',\n          filetype: 'image',\n          label: 'Source',\n          autofocus: true,\n          onchange: function (evt) {\n            onSrcChange(evt, editor);\n          },\n          onbeforecall: onBeforeCall\n        },\n        imageListCtrl\n      ];\n      if (Settings.hasDescription(editor)) {\n        generalFormItems.push({\n          name: 'alt',\n          type: 'textbox',\n          label: 'Image description'\n        });\n      }\n      if (Settings.hasImageTitle(editor)) {\n        generalFormItems.push({\n          name: 'title',\n          type: 'textbox',\n          label: 'Image Title'\n        });\n      }\n      if (Settings.hasDimensions(editor)) {\n        generalFormItems.push(SizeManager.createUi());\n      }\n      if (Settings.getClassList(editor)) {\n        generalFormItems.push({\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          values: Utils.buildListItems(Settings.getClassList(editor), function (item) {\n            if (item.value) {\n              item.textStyle = function () {\n                return editor.formatter.getCssText({\n                  inline: 'img',\n                  classes: [item.value]\n                });\n              };\n            }\n          })\n        });\n      }\n      if (Settings.hasImageCaption(editor)) {\n        generalFormItems.push({\n          name: 'caption',\n          type: 'checkbox',\n          label: 'Caption'\n        });\n      }\n      return generalFormItems;\n    };\n    var makeTab$1 = function (editor, imageListCtrl) {\n      return {\n        title: 'General',\n        type: 'form',\n        items: getGeneralItems(editor, imageListCtrl)\n      };\n    };\n    var MainTab = {\n      makeTab: makeTab$1,\n      getGeneralItems: getGeneralItems\n    };\n\n    var url = function () {\n      return Global$1.getOrDie('URL');\n    };\n    var createObjectURL = function (blob) {\n      return url().createObjectURL(blob);\n    };\n    var revokeObjectURL = function (u) {\n      url().revokeObjectURL(u);\n    };\n    var URL = {\n      createObjectURL: createObjectURL,\n      revokeObjectURL: revokeObjectURL\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.ui.Factory');\n\n    function XMLHttpRequest () {\n      var f = Global$1.getOrDie('XMLHttpRequest');\n      return new f();\n    }\n\n    var noop = function () {\n    };\n    var pathJoin = function (path1, path2) {\n      if (path1) {\n        return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n      }\n      return path2;\n    };\n    function Uploader (settings) {\n      var defaultHandler = function (blobInfo, success, failure, progress) {\n        var xhr, formData;\n        xhr = XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = function (e) {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = function () {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = function () {\n          var json;\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          json = JSON.parse(xhr.responseText);\n          if (!json || typeof json.location !== 'string') {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        formData = new domGlobals.FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      };\n      var uploadBlob = function (blobInfo, handler) {\n        return new global$1(function (resolve, reject) {\n          try {\n            handler(blobInfo, resolve, reject, noop);\n          } catch (ex) {\n            reject(ex.message);\n          }\n        });\n      };\n      var isDefaultHandler = function (handler) {\n        return handler === defaultHandler;\n      };\n      var upload = function (blobInfo) {\n        return !settings.url && isDefaultHandler(settings.handler) ? global$1.reject('Upload url missing from the settings.') : uploadBlob(blobInfo, settings.handler);\n      };\n      settings = global$2.extend({\n        credentials: false,\n        handler: defaultHandler\n      }, settings);\n      return { upload: upload };\n    }\n\n    var onFileInput = function (editor) {\n      return function (evt) {\n        var Throbber = global$5.get('Throbber');\n        var rootControl = evt.control.rootControl;\n        var throbber = new Throbber(rootControl.getEl());\n        var file = evt.control.value();\n        var blobUri = URL.createObjectURL(file);\n        var uploader = Uploader({\n          url: Settings.getUploadUrl(editor),\n          basePath: Settings.getUploadBasePath(editor),\n          credentials: Settings.getUploadCredentials(editor),\n          handler: Settings.getUploadHandler(editor)\n        });\n        var finalize = function () {\n          throbber.hide();\n          URL.revokeObjectURL(blobUri);\n        };\n        throbber.show();\n        return Utils.blobToDataUri(file).then(function (dataUrl) {\n          var blobInfo = editor.editorUpload.blobCache.create({\n            blob: file,\n            blobUri: blobUri,\n            name: file.name ? file.name.replace(/\\.[^\\.]+$/, '') : null,\n            base64: dataUrl.split(',')[1]\n          });\n          return uploader.upload(blobInfo).then(function (url) {\n            var src = rootControl.find('#src');\n            src.value(url);\n            rootControl.find('tabpanel')[0].activateTab(0);\n            src.fire('change');\n            finalize();\n            return url;\n          });\n        }).catch(function (err) {\n          editor.windowManager.alert(err);\n          finalize();\n        });\n      };\n    };\n    var acceptExts = '.jpg,.jpeg,.png,.gif';\n    var makeTab$2 = function (editor) {\n      return {\n        title: 'Upload',\n        type: 'form',\n        layout: 'flex',\n        direction: 'column',\n        align: 'stretch',\n        padding: '20 20 20 20',\n        items: [\n          {\n            type: 'container',\n            layout: 'flex',\n            direction: 'column',\n            align: 'center',\n            spacing: 10,\n            items: [\n              {\n                text: 'Browse for an image',\n                type: 'browsebutton',\n                accept: acceptExts,\n                onchange: onFileInput(editor)\n              },\n              {\n                text: 'OR',\n                type: 'label'\n              }\n            ]\n          },\n          {\n            text: 'Drop an image here',\n            type: 'dropzone',\n            accept: acceptExts,\n            height: 100,\n            onchange: onFileInput(editor)\n          }\n        ]\n      };\n    };\n    var UploadTab = { makeTab: makeTab$2 };\n\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n\n    var submitForm = function (editor, evt) {\n      var win = evt.control.getRoot();\n      SizeManager.updateSize(win);\n      editor.undoManager.transact(function () {\n        var data = merge(readImageDataFromSelection(editor), win.toJSON());\n        insertOrUpdateImage(editor, data);\n      });\n      editor.editorUpload.uploadImagesAuto();\n    };\n    function Dialog (editor) {\n      function showDialog(imageList) {\n        var data = readImageDataFromSelection(editor);\n        var win, imageListCtrl;\n        if (imageList) {\n          imageListCtrl = {\n            type: 'listbox',\n            label: 'Image list',\n            name: 'image-list',\n            values: Utils.buildListItems(imageList, function (item) {\n              item.value = editor.convertURL(item.value || item.url, 'src');\n            }, [{\n                text: 'None',\n                value: ''\n              }]),\n            value: data.src && editor.convertURL(data.src, 'src'),\n            onselect: function (e) {\n              var altCtrl = win.find('#alt');\n              if (!altCtrl.value() || e.lastControl && altCtrl.value() === e.lastControl.text()) {\n                altCtrl.value(e.control.text());\n              }\n              win.find('#src').value(e.control.value()).fire('change');\n            },\n            onPostRender: function () {\n              imageListCtrl = this;\n            }\n          };\n        }\n        if (Settings.hasAdvTab(editor) || Settings.hasUploadUrl(editor) || Settings.hasUploadHandler(editor)) {\n          var body = [MainTab.makeTab(editor, imageListCtrl)];\n          if (Settings.hasAdvTab(editor)) {\n            body.push(AdvTab.makeTab(editor));\n          }\n          if (Settings.hasUploadUrl(editor) || Settings.hasUploadHandler(editor)) {\n            body.push(UploadTab.makeTab(editor));\n          }\n          win = editor.windowManager.open({\n            title: 'Insert/edit image',\n            data: data,\n            bodyType: 'tabpanel',\n            body: body,\n            onSubmit: curry(submitForm, editor)\n          });\n        } else {\n          win = editor.windowManager.open({\n            title: 'Insert/edit image',\n            data: data,\n            body: MainTab.getGeneralItems(editor, imageListCtrl),\n            onSubmit: curry(submitForm, editor)\n          });\n        }\n        SizeManager.syncSize(win);\n      }\n      function open() {\n        Utils.createImageList(editor, showDialog);\n      }\n      return { open: open };\n    }\n\n    var register = function (editor) {\n      editor.addCommand('mceImage', Dialog(editor).open);\n    };\n    var Commands = { register: register };\n\n    var hasImageClass = function (node) {\n      var className = node.attr('class');\n      return className && /\\bimage\\b/.test(className);\n    };\n    var toggleContentEditableState = function (state) {\n      return function (nodes) {\n        var i = nodes.length, node;\n        var toggleContentEditable = function (node) {\n          node.attr('contenteditable', state ? 'true' : null);\n        };\n        while (i--) {\n          node = nodes[i];\n          if (hasImageClass(node)) {\n            node.attr('contenteditable', state ? 'false' : null);\n            global$2.each(node.getAll('figcaption'), toggleContentEditable);\n          }\n        }\n      };\n    };\n    var setup = function (editor) {\n      editor.on('preInit', function () {\n        editor.parser.addNodeFilter('figure', toggleContentEditableState(true));\n        editor.serializer.addNodeFilter('figure', toggleContentEditableState(false));\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var register$1 = function (editor) {\n      editor.addButton('image', {\n        icon: 'image',\n        tooltip: 'Insert/edit image',\n        onclick: Dialog(editor).open,\n        stateSelector: 'img:not([data-mce-object],[data-mce-placeholder]),figure.image'\n      });\n      editor.addMenuItem('image', {\n        icon: 'image',\n        text: 'Image',\n        onclick: Dialog(editor).open,\n        context: 'insert',\n        prependToContext: true\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('image', function (editor) {\n      FilterContent.setup(editor);\n      Buttons.register(editor);\n      Commands.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","(function () {\nvar visualchars = (function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var get = function (toggleState) {\n      var isEnabled = function () {\n        return toggleState.get();\n      };\n      return { isEnabled: isEnabled };\n    };\n    var Api = { get: get };\n\n    var fireVisualChars = function (editor, state) {\n      return editor.fire('VisualChars', { state: state });\n    };\n    var Events = { fireVisualChars: fireVisualChars };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isFunction = isType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var value = function (element) {\n      return element.dom().nodeValue;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isText = isType$1(TEXT);\n\n    var charMap = {\n      '\\xA0': 'nbsp',\n      '\\xAD': 'shy'\n    };\n    var charMapToRegExp = function (charMap, global) {\n      var key, regExp = '';\n      for (key in charMap) {\n        regExp += key;\n      }\n      return new RegExp('[' + regExp + ']', global ? 'g' : '');\n    };\n    var charMapToSelector = function (charMap) {\n      var key, selector = '';\n      for (key in charMap) {\n        if (selector) {\n          selector += ',';\n        }\n        selector += 'span.mce-' + charMap[key];\n      }\n      return selector;\n    };\n    var Data = {\n      charMap: charMap,\n      regExp: charMapToRegExp(charMap),\n      regExpGlobal: charMapToRegExp(charMap, true),\n      selector: charMapToSelector(charMap),\n      charMapToRegExp: charMapToRegExp,\n      charMapToSelector: charMapToSelector\n    };\n\n    var wrapCharWithSpan = function (value) {\n      return '<span data-mce-bogus=\"1\" class=\"mce-' + Data.charMap[value] + '\">' + value + '</span>';\n    };\n    var Html = { wrapCharWithSpan: wrapCharWithSpan };\n\n    var isMatch = function (n) {\n      var value$1 = value(n);\n      return isText(n) && value$1 !== undefined && Data.regExp.test(value$1);\n    };\n    var filterDescendants = function (scope, predicate) {\n      var result = [];\n      var dom = scope.dom();\n      var children = map(dom.childNodes, Element.fromDom);\n      each(children, function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(filterDescendants(x, predicate));\n      });\n      return result;\n    };\n    var findParentElm = function (elm, rootElm) {\n      while (elm.parentNode) {\n        if (elm.parentNode === rootElm) {\n          return elm;\n        }\n        elm = elm.parentNode;\n      }\n    };\n    var replaceWithSpans = function (text) {\n      return text.replace(Data.regExpGlobal, Html.wrapCharWithSpan);\n    };\n    var Nodes = {\n      isMatch: isMatch,\n      filterDescendants: filterDescendants,\n      findParentElm: findParentElm,\n      replaceWithSpans: replaceWithSpans\n    };\n\n    var show = function (editor, rootElm) {\n      var node, div;\n      var nodeList = Nodes.filterDescendants(Element.fromDom(rootElm), Nodes.isMatch);\n      each(nodeList, function (n) {\n        var withSpans = Nodes.replaceWithSpans(editor.dom.encode(value(n)));\n        div = editor.dom.create('div', null, withSpans);\n        while (node = div.lastChild) {\n          editor.dom.insertAfter(node, n.dom());\n        }\n        editor.dom.remove(n.dom());\n      });\n    };\n    var hide = function (editor, body) {\n      var nodeList = editor.dom.select(Data.selector, body);\n      each(nodeList, function (node) {\n        editor.dom.remove(node, 1);\n      });\n    };\n    var toggle = function (editor) {\n      var body = editor.getBody();\n      var bookmark = editor.selection.getBookmark();\n      var parentNode = Nodes.findParentElm(editor.selection.getNode(), body);\n      parentNode = parentNode !== undefined ? parentNode : body;\n      hide(editor, parentNode);\n      show(editor, parentNode);\n      editor.selection.moveToBookmark(bookmark);\n    };\n    var VisualChars = {\n      show: show,\n      hide: hide,\n      toggle: toggle\n    };\n\n    var toggleVisualChars = function (editor, toggleState) {\n      var body = editor.getBody();\n      var selection = editor.selection;\n      var bookmark;\n      toggleState.set(!toggleState.get());\n      Events.fireVisualChars(editor, toggleState.get());\n      bookmark = selection.getBookmark();\n      if (toggleState.get() === true) {\n        VisualChars.show(editor, body);\n      } else {\n        VisualChars.hide(editor, body);\n      }\n      selection.moveToBookmark(bookmark);\n    };\n    var Actions = { toggleVisualChars: toggleVisualChars };\n\n    var register = function (editor, toggleState) {\n      editor.addCommand('mceVisualChars', function () {\n        Actions.toggleVisualChars(editor, toggleState);\n      });\n    };\n    var Commands = { register: register };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var setup = function (editor, toggleState) {\n      var debouncedToggle = global$1.debounce(function () {\n        VisualChars.toggle(editor);\n      }, 300);\n      if (editor.settings.forced_root_block !== false) {\n        editor.on('keydown', function (e) {\n          if (toggleState.get() === true) {\n            e.keyCode === 13 ? VisualChars.toggle(editor) : debouncedToggle();\n          }\n        });\n      }\n    };\n    var Keyboard = { setup: setup };\n\n    var isEnabledByDefault = function (editor) {\n      return editor.getParam('visualchars_default_state', false);\n    };\n    var Settings = { isEnabledByDefault: isEnabledByDefault };\n\n    var setup$1 = function (editor, toggleState) {\n      editor.on('init', function () {\n        var valueForToggling = !Settings.isEnabledByDefault(editor);\n        toggleState.set(valueForToggling);\n        Actions.toggleVisualChars(editor, toggleState);\n      });\n    };\n    var Bindings = { setup: setup$1 };\n\n    var toggleActiveState = function (editor) {\n      return function (e) {\n        var ctrl = e.control;\n        editor.on('VisualChars', function (e) {\n          ctrl.active(e.state);\n        });\n      };\n    };\n    var register$1 = function (editor) {\n      editor.addButton('visualchars', {\n        active: false,\n        title: 'Show invisible characters',\n        cmd: 'mceVisualChars',\n        onPostRender: toggleActiveState(editor)\n      });\n      editor.addMenuItem('visualchars', {\n        text: 'Show invisible characters',\n        cmd: 'mceVisualChars',\n        onPostRender: toggleActiveState(editor),\n        selectable: true,\n        context: 'view',\n        prependToContext: true\n      });\n    };\n\n    global.add('visualchars', function (editor) {\n      var toggleState = Cell(false);\n      Commands.register(editor, toggleState);\n      register$1(editor);\n      Keyboard.setup(editor, toggleState);\n      Bindings.setup(editor, toggleState);\n      return Api.get(toggleState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","// Exports the \"noneditable\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/noneditable')\n//   ES2015:\n//     import 'tinymce/plugins/noneditable'\nrequire('./plugin.js');","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","(function () {\nvar emoticons = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var emoticons = [\n      [\n        'cool',\n        'cry',\n        'embarassed',\n        'foot-in-mouth'\n      ],\n      [\n        'frown',\n        'innocent',\n        'kiss',\n        'laughing'\n      ],\n      [\n        'money-mouth',\n        'sealed',\n        'smile',\n        'surprised'\n      ],\n      [\n        'tongue-out',\n        'undecided',\n        'wink',\n        'yell'\n      ]\n    ];\n    var getHtml = function (pluginUrl) {\n      var emoticonsHtml;\n      emoticonsHtml = '<table role=\"list\" class=\"mce-grid\">';\n      global$1.each(emoticons, function (row) {\n        emoticonsHtml += '<tr>';\n        global$1.each(row, function (icon) {\n          var emoticonUrl = pluginUrl + '/img/smiley-' + icon + '.gif';\n          emoticonsHtml += '<td><a href=\"#\" data-mce-url=\"' + emoticonUrl + '\" data-mce-alt=\"' + icon + '\" tabindex=\"-1\" ' + 'role=\"option\" aria-label=\"' + icon + '\"><img src=\"' + emoticonUrl + '\" style=\"width: 18px; height: 18px\" role=\"presentation\" /></a></td>';\n        });\n        emoticonsHtml += '</tr>';\n      });\n      emoticonsHtml += '</table>';\n      return emoticonsHtml;\n    };\n    var PanelHtml = { getHtml: getHtml };\n\n    var insertEmoticon = function (editor, src, alt) {\n      editor.insertContent(editor.dom.createHTML('img', {\n        src: src,\n        alt: alt\n      }));\n    };\n    var register = function (editor, pluginUrl) {\n      var panelHtml = PanelHtml.getHtml(pluginUrl);\n      editor.addButton('emoticons', {\n        type: 'panelbutton',\n        panel: {\n          role: 'application',\n          autohide: true,\n          html: panelHtml,\n          onclick: function (e) {\n            var linkElm = editor.dom.getParent(e.target, 'a');\n            if (linkElm) {\n              insertEmoticon(editor, linkElm.getAttribute('data-mce-url'), linkElm.getAttribute('data-mce-alt'));\n              this.hide();\n            }\n          }\n        },\n        tooltip: 'Emoticons'\n      });\n    };\n    var Buttons = { register: register };\n\n    global.add('emoticons', function (editor, pluginUrl) {\n      Buttons.register(editor, pluginUrl);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"anchor\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/anchor')\n//   ES2015:\n//     import 'tinymce/plugins/anchor'\nrequire('./plugin.js');","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","(function () {\nvar print = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var register = function (editor) {\n      editor.addCommand('mcePrint', function () {\n        if (global$1.ie && global$1.ie <= 11) {\n          editor.getDoc().execCommand('print', false, null);\n        } else {\n          editor.getWin().print();\n        }\n      });\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor) {\n      editor.addButton('print', {\n        title: 'Print',\n        cmd: 'mcePrint'\n      });\n      editor.addMenuItem('print', {\n        text: 'Print',\n        cmd: 'mcePrint',\n        icon: 'print'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('print', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n      editor.addShortcut('Meta+P', '', 'mcePrint');\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","var baseIsSet = require('./_baseIsSet'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nmodule.exports = isSet;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","(function () {\nvar hr = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var register = function (editor) {\n      editor.addCommand('InsertHorizontalRule', function () {\n        editor.execCommand('mceInsertContent', false, '<hr />');\n      });\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor) {\n      editor.addButton('hr', {\n        icon: 'hr',\n        tooltip: 'Horizontal line',\n        cmd: 'InsertHorizontalRule'\n      });\n      editor.addMenuItem('hr', {\n        icon: 'hr',\n        text: 'Horizontal line',\n        cmd: 'InsertHorizontalRule',\n        context: 'insert'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('hr', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","// Exports the \"spellchecker\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/spellchecker')\n//   ES2015:\n//     import 'tinymce/plugins/spellchecker'\nrequire('./plugin.js');","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","(function () {\nvar directionality = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var setDir = function (editor, dir) {\n      var dom = editor.dom;\n      var curDir;\n      var blocks = editor.selection.getSelectedBlocks();\n      if (blocks.length) {\n        curDir = dom.getAttrib(blocks[0], 'dir');\n        global$1.each(blocks, function (block) {\n          if (!dom.getParent(block.parentNode, '*[dir=\"' + dir + '\"]', dom.getRoot())) {\n            dom.setAttrib(block, 'dir', curDir !== dir ? dir : null);\n          }\n        });\n        editor.nodeChanged();\n      }\n    };\n    var Direction = { setDir: setDir };\n\n    var register = function (editor) {\n      editor.addCommand('mceDirectionLTR', function () {\n        Direction.setDir(editor, 'ltr');\n      });\n      editor.addCommand('mceDirectionRTL', function () {\n        Direction.setDir(editor, 'rtl');\n      });\n    };\n    var Commands = { register: register };\n\n    var generateSelector = function (dir) {\n      var selector = [];\n      global$1.each('h1 h2 h3 h4 h5 h6 div p'.split(' '), function (name) {\n        selector.push(name + '[dir=' + dir + ']');\n      });\n      return selector.join(',');\n    };\n    var register$1 = function (editor) {\n      editor.addButton('ltr', {\n        title: 'Left to right',\n        cmd: 'mceDirectionLTR',\n        stateSelector: generateSelector('ltr')\n      });\n      editor.addButton('rtl', {\n        title: 'Right to left',\n        cmd: 'mceDirectionRTL',\n        stateSelector: generateSelector('rtl')\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('directionality', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"fullpage\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/fullpage')\n//   ES2015:\n//     import 'tinymce/plugins/fullpage'\nrequire('./plugin.js');","var root = require('./_root');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n","// 4.9.11 (2020-07-13)\n(function () {\n(function (domGlobals) {\n    'use strict';\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return !f.apply(null, args);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isNull = isType('null');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativeIndexOf = Array.prototype.indexOf;\n    var nativePush = Array.prototype.push;\n    var rawIndexOf = function (ts, t) {\n      return nativeIndexOf.call(ts, t);\n    };\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Option.none() : Option.some(r);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(i);\n        }\n      }\n      return Option.none();\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = nativeSlice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter(a1, function (x) {\n        return !contains(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var sort = function (xs, comparator) {\n      var copy = nativeSlice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var head = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[0]);\n    };\n    var last = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n    var Global$1 = { getOrDie: getOrDie };\n\n    var url = function () {\n      return Global$1.getOrDie('URL');\n    };\n    var createObjectURL = function (blob) {\n      return url().createObjectURL(blob);\n    };\n    var revokeObjectURL = function (u) {\n      url().revokeObjectURL(u);\n    };\n    var URL = {\n      createObjectURL: createObjectURL,\n      revokeObjectURL: revokeObjectURL\n    };\n\n    var nav = domGlobals.navigator, userAgent = nav.userAgent;\n    var opera, webkit, ie, ie11, ie12, gecko, mac, iDevice, android, fileApi, phone, tablet, windowsPhone;\n    var matchMediaQuery = function (query) {\n      return 'matchMedia' in domGlobals.window ? domGlobals.matchMedia(query).matches : false;\n    };\n    opera = false;\n    android = /Android/.test(userAgent);\n    webkit = /WebKit/.test(userAgent);\n    ie = !webkit && !opera && /MSIE/gi.test(userAgent) && /Explorer/gi.test(nav.appName);\n    ie = ie && /MSIE (\\w+)\\./.exec(userAgent)[1];\n    ie11 = userAgent.indexOf('Trident/') !== -1 && (userAgent.indexOf('rv:') !== -1 || nav.appName.indexOf('Netscape') !== -1) ? 11 : false;\n    ie12 = userAgent.indexOf('Edge/') !== -1 && !ie && !ie11 ? 12 : false;\n    ie = ie || ie11 || ie12;\n    gecko = !webkit && !ie11 && /Gecko/.test(userAgent);\n    mac = userAgent.indexOf('Mac') !== -1;\n    iDevice = /(iPad|iPhone)/.test(userAgent);\n    fileApi = 'FormData' in domGlobals.window && 'FileReader' in domGlobals.window && 'URL' in domGlobals.window && !!URL.createObjectURL;\n    phone = matchMediaQuery('only screen and (max-device-width: 480px)') && (android || iDevice);\n    tablet = matchMediaQuery('only screen and (min-width: 800px)') && (android || iDevice);\n    windowsPhone = userAgent.indexOf('Windows Phone') !== -1;\n    if (ie12) {\n      webkit = false;\n    }\n    var contentEditable = !iDevice || fileApi || parseInt(userAgent.match(/AppleWebKit\\/(\\d*)/)[1], 10) >= 534;\n    var Env = {\n      opera: opera,\n      webkit: webkit,\n      ie: ie,\n      gecko: gecko,\n      mac: mac,\n      iOS: iDevice,\n      android: android,\n      contentEditable: contentEditable,\n      transparentSrc: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n      caretAfter: ie !== 8,\n      range: domGlobals.window.getSelection && 'Range' in domGlobals.window,\n      documentMode: ie && !ie12 ? domGlobals.document.documentMode || 7 : 10,\n      fileApi: fileApi,\n      ceFalse: ie === false || ie > 8,\n      cacheSuffix: null,\n      container: null,\n      overrideViewPort: null,\n      experimentalShadowDom: false,\n      canHaveCSP: ie === false || ie > 11,\n      desktop: !phone && !tablet,\n      windowsPhone: windowsPhone\n    };\n\n    var promise = function () {\n      function bind(fn, thisArg) {\n        return function () {\n          fn.apply(thisArg, arguments);\n        };\n      }\n      var isArray = Array.isArray || function (value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n      };\n      var Promise = function (fn) {\n        if (typeof this !== 'object') {\n          throw new TypeError('Promises must be constructed via new');\n        }\n        if (typeof fn !== 'function') {\n          throw new TypeError('not a function');\n        }\n        this._state = null;\n        this._value = null;\n        this._deferreds = [];\n        doResolve(fn, bind(resolve, this), bind(reject, this));\n      };\n      var asap = Promise.immediateFn || typeof setImmediate === 'function' && setImmediate || function (fn) {\n        setTimeout(fn, 1);\n      };\n      function handle(deferred) {\n        var me = this;\n        if (this._state === null) {\n          this._deferreds.push(deferred);\n          return;\n        }\n        asap(function () {\n          var cb = me._state ? deferred.onFulfilled : deferred.onRejected;\n          if (cb === null) {\n            (me._state ? deferred.resolve : deferred.reject)(me._value);\n            return;\n          }\n          var ret;\n          try {\n            ret = cb(me._value);\n          } catch (e) {\n            deferred.reject(e);\n            return;\n          }\n          deferred.resolve(ret);\n        });\n      }\n      function resolve(newValue) {\n        try {\n          if (newValue === this) {\n            throw new TypeError('A promise cannot be resolved with itself.');\n          }\n          if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n            var then = newValue.then;\n            if (typeof then === 'function') {\n              doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n              return;\n            }\n          }\n          this._state = true;\n          this._value = newValue;\n          finale.call(this);\n        } catch (e) {\n          reject.call(this, e);\n        }\n      }\n      function reject(newValue) {\n        this._state = false;\n        this._value = newValue;\n        finale.call(this);\n      }\n      function finale() {\n        for (var i = 0, len = this._deferreds.length; i < len; i++) {\n          handle.call(this, this._deferreds[i]);\n        }\n        this._deferreds = null;\n      }\n      function Handler(onFulfilled, onRejected, resolve, reject) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n      }\n      function doResolve(fn, onFulfilled, onRejected) {\n        var done = false;\n        try {\n          fn(function (value) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onFulfilled(value);\n          }, function (reason) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onRejected(reason);\n          });\n        } catch (ex) {\n          if (done) {\n            return;\n          }\n          done = true;\n          onRejected(ex);\n        }\n      }\n      Promise.prototype.catch = function (onRejected) {\n        return this.then(null, onRejected);\n      };\n      Promise.prototype.then = function (onFulfilled, onRejected) {\n        var me = this;\n        return new Promise(function (resolve, reject) {\n          handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n        });\n      };\n      Promise.all = function () {\n        var args = Array.prototype.slice.call(arguments.length === 1 && isArray(arguments[0]) ? arguments[0] : arguments);\n        return new Promise(function (resolve, reject) {\n          if (args.length === 0) {\n            return resolve([]);\n          }\n          var remaining = args.length;\n          function res(i, val) {\n            try {\n              if (val && (typeof val === 'object' || typeof val === 'function')) {\n                var then = val.then;\n                if (typeof then === 'function') {\n                  then.call(val, function (val) {\n                    res(i, val);\n                  }, reject);\n                  return;\n                }\n              }\n              args[i] = val;\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            } catch (ex) {\n              reject(ex);\n            }\n          }\n          for (var i = 0; i < args.length; i++) {\n            res(i, args[i]);\n          }\n        });\n      };\n      Promise.resolve = function (value) {\n        if (value && typeof value === 'object' && value.constructor === Promise) {\n          return value;\n        }\n        return new Promise(function (resolve) {\n          resolve(value);\n        });\n      };\n      Promise.reject = function (value) {\n        return new Promise(function (resolve, reject) {\n          reject(value);\n        });\n      };\n      Promise.race = function (values) {\n        return new Promise(function (resolve, reject) {\n          for (var i = 0, len = values.length; i < len; i++) {\n            values[i].then(resolve, reject);\n          }\n        });\n      };\n      return Promise;\n    };\n    var promiseObj = window.Promise ? window.Promise : promise();\n\n    var requestAnimationFramePromise;\n    var requestAnimationFrame = function (callback, element) {\n      var i, requestAnimationFrameFunc = domGlobals.window.requestAnimationFrame;\n      var vendors = [\n        'ms',\n        'moz',\n        'webkit'\n      ];\n      var featurefill = function (callback) {\n        domGlobals.window.setTimeout(callback, 0);\n      };\n      for (i = 0; i < vendors.length && !requestAnimationFrameFunc; i++) {\n        requestAnimationFrameFunc = domGlobals.window[vendors[i] + 'RequestAnimationFrame'];\n      }\n      if (!requestAnimationFrameFunc) {\n        requestAnimationFrameFunc = featurefill;\n      }\n      requestAnimationFrameFunc(callback, element);\n    };\n    var wrappedSetTimeout = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 0;\n      }\n      return setTimeout(callback, time);\n    };\n    var wrappedSetInterval = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 1;\n      }\n      return setInterval(callback, time);\n    };\n    var wrappedClearTimeout = function (id) {\n      return clearTimeout(id);\n    };\n    var wrappedClearInterval = function (id) {\n      return clearInterval(id);\n    };\n    var debounce = function (callback, time) {\n      var timer, func;\n      func = function () {\n        var args = arguments;\n        clearTimeout(timer);\n        timer = wrappedSetTimeout(function () {\n          callback.apply(this, args);\n        }, time);\n      };\n      func.stop = function () {\n        clearTimeout(timer);\n      };\n      return func;\n    };\n    var Delay = {\n      requestAnimationFrame: function (callback, element) {\n        if (requestAnimationFramePromise) {\n          requestAnimationFramePromise.then(callback);\n          return;\n        }\n        requestAnimationFramePromise = new promiseObj(function (resolve) {\n          if (!element) {\n            element = domGlobals.document.body;\n          }\n          requestAnimationFrame(resolve, element);\n        }).then(callback);\n      },\n      setTimeout: wrappedSetTimeout,\n      setInterval: wrappedSetInterval,\n      setEditorTimeout: function (editor, callback, time) {\n        return wrappedSetTimeout(function () {\n          if (!editor.removed) {\n            callback();\n          }\n        }, time);\n      },\n      setEditorInterval: function (editor, callback, time) {\n        var timer;\n        timer = wrappedSetInterval(function () {\n          if (!editor.removed) {\n            callback();\n          } else {\n            clearInterval(timer);\n          }\n        }, time);\n        return timer;\n      },\n      debounce: debounce,\n      throttle: debounce,\n      clearInterval: wrappedClearInterval,\n      clearTimeout: wrappedClearTimeout\n    };\n\n    var eventExpandoPrefix = 'mce-data-';\n    var mouseEventRe = /^(?:mouse|contextmenu)|click/;\n    var deprecated = {\n      keyLocation: 1,\n      layerX: 1,\n      layerY: 1,\n      returnValue: 1,\n      webkitMovementX: 1,\n      webkitMovementY: 1,\n      keyIdentifier: 1\n    };\n    var hasIsDefaultPrevented = function (event) {\n      return event.isDefaultPrevented === returnTrue || event.isDefaultPrevented === returnFalse;\n    };\n    var returnFalse = function () {\n      return false;\n    };\n    var returnTrue = function () {\n      return true;\n    };\n    var addEvent = function (target, name, callback, capture) {\n      if (target.addEventListener) {\n        target.addEventListener(name, callback, capture || false);\n      } else if (target.attachEvent) {\n        target.attachEvent('on' + name, callback);\n      }\n    };\n    var removeEvent = function (target, name, callback, capture) {\n      if (target.removeEventListener) {\n        target.removeEventListener(name, callback, capture || false);\n      } else if (target.detachEvent) {\n        target.detachEvent('on' + name, callback);\n      }\n    };\n    var getTargetFromShadowDom = function (event, defaultTarget) {\n      if (event.composedPath) {\n        var composedPath = event.composedPath();\n        if (composedPath && composedPath.length > 0) {\n          return composedPath[0];\n        }\n      }\n      return defaultTarget;\n    };\n    var fix = function (originalEvent, data) {\n      var name;\n      var event = data || {};\n      for (name in originalEvent) {\n        if (!deprecated[name]) {\n          event[name] = originalEvent[name];\n        }\n      }\n      if (!event.target) {\n        event.target = event.srcElement || domGlobals.document;\n      }\n      if (Env.experimentalShadowDom) {\n        event.target = getTargetFromShadowDom(originalEvent, event.target);\n      }\n      if (originalEvent && mouseEventRe.test(originalEvent.type) && originalEvent.pageX === undefined && originalEvent.clientX !== undefined) {\n        var eventDoc = event.target.ownerDocument || domGlobals.document;\n        var doc = eventDoc.documentElement;\n        var body = eventDoc.body;\n        event.pageX = originalEvent.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n        event.pageY = originalEvent.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n      }\n      event.preventDefault = function () {\n        event.isDefaultPrevented = returnTrue;\n        if (originalEvent) {\n          if (originalEvent.preventDefault) {\n            originalEvent.preventDefault();\n          } else {\n            originalEvent.returnValue = false;\n          }\n        }\n      };\n      event.stopPropagation = function () {\n        event.isPropagationStopped = returnTrue;\n        if (originalEvent) {\n          if (originalEvent.stopPropagation) {\n            originalEvent.stopPropagation();\n          } else {\n            originalEvent.cancelBubble = true;\n          }\n        }\n      };\n      event.stopImmediatePropagation = function () {\n        event.isImmediatePropagationStopped = returnTrue;\n        event.stopPropagation();\n      };\n      if (hasIsDefaultPrevented(event) === false) {\n        event.isDefaultPrevented = returnFalse;\n        event.isPropagationStopped = returnFalse;\n        event.isImmediatePropagationStopped = returnFalse;\n      }\n      if (typeof event.metaKey === 'undefined') {\n        event.metaKey = false;\n      }\n      return event;\n    };\n    var bindOnReady = function (win, callback, eventUtils) {\n      var doc = win.document, event = { type: 'ready' };\n      if (eventUtils.domLoaded) {\n        callback(event);\n        return;\n      }\n      var isDocReady = function () {\n        return doc.readyState === 'complete' || doc.readyState === 'interactive' && doc.body;\n      };\n      var readyHandler = function () {\n        if (!eventUtils.domLoaded) {\n          eventUtils.domLoaded = true;\n          callback(event);\n        }\n      };\n      var waitForDomLoaded = function () {\n        if (isDocReady()) {\n          removeEvent(doc, 'readystatechange', waitForDomLoaded);\n          readyHandler();\n        }\n      };\n      var tryScroll = function () {\n        try {\n          doc.documentElement.doScroll('left');\n        } catch (ex) {\n          Delay.setTimeout(tryScroll);\n          return;\n        }\n        readyHandler();\n      };\n      if (doc.addEventListener && !(Env.ie && Env.ie < 11)) {\n        if (isDocReady()) {\n          readyHandler();\n        } else {\n          addEvent(win, 'DOMContentLoaded', readyHandler);\n        }\n      } else {\n        addEvent(doc, 'readystatechange', waitForDomLoaded);\n        if (doc.documentElement.doScroll && win.self === win.top) {\n          tryScroll();\n        }\n      }\n      addEvent(win, 'load', readyHandler);\n    };\n    var EventUtils = function () {\n      var self = this;\n      var events = {}, count, expando, hasFocusIn, hasMouseEnterLeave, mouseEnterLeave;\n      expando = eventExpandoPrefix + (+new Date()).toString(32);\n      hasMouseEnterLeave = 'onmouseenter' in domGlobals.document.documentElement;\n      hasFocusIn = 'onfocusin' in domGlobals.document.documentElement;\n      mouseEnterLeave = {\n        mouseenter: 'mouseover',\n        mouseleave: 'mouseout'\n      };\n      count = 1;\n      self.domLoaded = false;\n      self.events = events;\n      var executeHandlers = function (evt, id) {\n        var callbackList, i, l, callback;\n        var container = events[id];\n        callbackList = container && container[evt.type];\n        if (callbackList) {\n          for (i = 0, l = callbackList.length; i < l; i++) {\n            callback = callbackList[i];\n            if (callback && callback.func.call(callback.scope, evt) === false) {\n              evt.preventDefault();\n            }\n            if (evt.isImmediatePropagationStopped()) {\n              return;\n            }\n          }\n        }\n      };\n      self.bind = function (target, names, callback, scope) {\n        var id, callbackList, i, name, fakeName, nativeHandler, capture;\n        var win = domGlobals.window;\n        var defaultNativeHandler = function (evt) {\n          executeHandlers(fix(evt || win.event), id);\n        };\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return;\n        }\n        if (!target[expando]) {\n          id = count++;\n          target[expando] = id;\n          events[id] = {};\n        } else {\n          id = target[expando];\n        }\n        scope = scope || target;\n        names = names.split(' ');\n        i = names.length;\n        while (i--) {\n          name = names[i];\n          nativeHandler = defaultNativeHandler;\n          fakeName = capture = false;\n          if (name === 'DOMContentLoaded') {\n            name = 'ready';\n          }\n          if (self.domLoaded && name === 'ready' && target.readyState === 'complete') {\n            callback.call(scope, fix({ type: name }));\n            continue;\n          }\n          if (!hasMouseEnterLeave) {\n            fakeName = mouseEnterLeave[name];\n            if (fakeName) {\n              nativeHandler = function (evt) {\n                var current, related;\n                current = evt.currentTarget;\n                related = evt.relatedTarget;\n                if (related && current.contains) {\n                  related = current.contains(related);\n                } else {\n                  while (related && related !== current) {\n                    related = related.parentNode;\n                  }\n                }\n                if (!related) {\n                  evt = fix(evt || win.event);\n                  evt.type = evt.type === 'mouseout' ? 'mouseleave' : 'mouseenter';\n                  evt.target = current;\n                  executeHandlers(evt, id);\n                }\n              };\n            }\n          }\n          if (!hasFocusIn && (name === 'focusin' || name === 'focusout')) {\n            capture = true;\n            fakeName = name === 'focusin' ? 'focus' : 'blur';\n            nativeHandler = function (evt) {\n              evt = fix(evt || win.event);\n              evt.type = evt.type === 'focus' ? 'focusin' : 'focusout';\n              executeHandlers(evt, id);\n            };\n          }\n          callbackList = events[id][name];\n          if (!callbackList) {\n            events[id][name] = callbackList = [{\n                func: callback,\n                scope: scope\n              }];\n            callbackList.fakeName = fakeName;\n            callbackList.capture = capture;\n            callbackList.nativeHandler = nativeHandler;\n            if (name === 'ready') {\n              bindOnReady(target, nativeHandler, self);\n            } else {\n              addEvent(target, fakeName || name, nativeHandler, capture);\n            }\n          } else {\n            if (name === 'ready' && self.domLoaded) {\n              callback({ type: name });\n            } else {\n              callbackList.push({\n                func: callback,\n                scope: scope\n              });\n            }\n          }\n        }\n        target = callbackList = 0;\n        return callback;\n      };\n      self.unbind = function (target, names, callback) {\n        var id, callbackList, i, ci, name, eventMap;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return self;\n        }\n        id = target[expando];\n        if (id) {\n          eventMap = events[id];\n          if (names) {\n            names = names.split(' ');\n            i = names.length;\n            while (i--) {\n              name = names[i];\n              callbackList = eventMap[name];\n              if (callbackList) {\n                if (callback) {\n                  ci = callbackList.length;\n                  while (ci--) {\n                    if (callbackList[ci].func === callback) {\n                      var nativeHandler = callbackList.nativeHandler;\n                      var fakeName = callbackList.fakeName, capture = callbackList.capture;\n                      callbackList = callbackList.slice(0, ci).concat(callbackList.slice(ci + 1));\n                      callbackList.nativeHandler = nativeHandler;\n                      callbackList.fakeName = fakeName;\n                      callbackList.capture = capture;\n                      eventMap[name] = callbackList;\n                    }\n                  }\n                }\n                if (!callback || callbackList.length === 0) {\n                  delete eventMap[name];\n                  removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n                }\n              }\n            }\n          } else {\n            for (name in eventMap) {\n              callbackList = eventMap[name];\n              removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n            }\n            eventMap = {};\n          }\n          for (name in eventMap) {\n            return self;\n          }\n          delete events[id];\n          try {\n            delete target[expando];\n          } catch (ex) {\n            target[expando] = null;\n          }\n        }\n        return self;\n      };\n      self.fire = function (target, name, args) {\n        var id;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return self;\n        }\n        args = fix(null, args);\n        args.type = name;\n        args.target = target;\n        do {\n          id = target[expando];\n          if (id) {\n            executeHandlers(args, id);\n          }\n          target = target.parentNode || target.ownerDocument || target.defaultView || target.parentWindow;\n        } while (target && !args.isPropagationStopped());\n        return self;\n      };\n      self.clean = function (target) {\n        var i, children;\n        var unbind = self.unbind;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return self;\n        }\n        if (target[expando]) {\n          unbind(target);\n        }\n        if (!target.getElementsByTagName) {\n          target = target.document;\n        }\n        if (target && target.getElementsByTagName) {\n          unbind(target);\n          children = target.getElementsByTagName('*');\n          i = children.length;\n          while (i--) {\n            target = children[i];\n            if (target[expando]) {\n              unbind(target);\n            }\n          }\n        }\n        return self;\n      };\n      self.destroy = function () {\n        events = {};\n      };\n      self.cancel = function (e) {\n        if (e) {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n        return false;\n      };\n    };\n    EventUtils.Event = new EventUtils();\n    EventUtils.Event.bind(domGlobals.window, 'ready', function () {\n    });\n\n    var i, support, Expr, getText, isXML, tokenize, compile, select, outermostContext, sortInput, hasDuplicate, setDocument, document, docElem, documentIsHTML, rbuggyQSA, rbuggyMatches, matches, contains$1, expando = 'sizzle' + -new Date(), preferredDoc = domGlobals.window.document, dirruns = 0, done = 0, classCache = createCache(), tokenCache = createCache(), compilerCache = createCache(), sortOrder = function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n        }\n        return 0;\n      }, strundefined = typeof undefined, MAX_NEGATIVE = 1 << 31, hasOwn = {}.hasOwnProperty, arr = [], pop = arr.pop, push_native = arr.push, push = arr.push, slice = arr.slice, indexOf$1 = arr.indexOf || function (elem) {\n        var i = 0, len = this.length;\n        for (; i < len; i++) {\n          if (this[i] === elem) {\n            return i;\n          }\n        }\n        return -1;\n      }, booleans = 'checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped', whitespace = '[\\\\x20\\\\t\\\\r\\\\n\\\\f]', identifier = '(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+', attributes = '\\\\[' + whitespace + '*(' + identifier + ')(?:' + whitespace + '*([*^$|!~]?=)' + whitespace + '*(?:\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\"|(' + identifier + '))|)' + whitespace + '*\\\\]', pseudos = ':(' + identifier + ')(?:\\\\((' + '(\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\")|' + '((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|' + attributes + ')*)|' + '.*' + ')\\\\)|)', rtrim = new RegExp('^' + whitespace + '+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)' + whitespace + '+$', 'g'), rcomma = new RegExp('^' + whitespace + '*,' + whitespace + '*'), rcombinators = new RegExp('^' + whitespace + '*([>+~]|' + whitespace + ')' + whitespace + '*'), rattributeQuotes = new RegExp('=' + whitespace + '*([^\\\\]\\'\"]*?)' + whitespace + '*\\\\]', 'g'), rpseudo = new RegExp(pseudos), ridentifier = new RegExp('^' + identifier + '$'), matchExpr = {\n        ID: new RegExp('^#(' + identifier + ')'),\n        CLASS: new RegExp('^\\\\.(' + identifier + ')'),\n        TAG: new RegExp('^(' + identifier + '|[*])'),\n        ATTR: new RegExp('^' + attributes),\n        PSEUDO: new RegExp('^' + pseudos),\n        CHILD: new RegExp('^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(' + whitespace + '*(even|odd|(([+-]|)(\\\\d*)n|)' + whitespace + '*(?:([+-]|)' + whitespace + '*(\\\\d+)|))' + whitespace + '*\\\\)|)', 'i'),\n        bool: new RegExp('^(?:' + booleans + ')$', 'i'),\n        needsContext: new RegExp('^' + whitespace + '*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(' + whitespace + '*((?:-\\\\d)?\\\\d*)' + whitespace + '*\\\\)|)(?=[^-]|$)', 'i')\n      }, rinputs = /^(?:input|select|textarea|button)$/i, rheader = /^h\\d$/i, rnative = /^[^{]+\\{\\s*\\[native \\w/, rquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/, rsibling = /[+~]/, rescape = /'|\\\\/g, runescape = new RegExp('\\\\\\\\([\\\\da-f]{1,6}' + whitespace + '?|(' + whitespace + ')|.)', 'ig'), funescape = function (_, escaped, escapedWhitespace) {\n        var high = '0x' + escaped - 65536;\n        return high !== high || escapedWhitespace ? escaped : high < 0 ? String.fromCharCode(high + 65536) : String.fromCharCode(high >> 10 | 55296, high & 1023 | 56320);\n      };\n    try {\n      push.apply(arr = slice.call(preferredDoc.childNodes), preferredDoc.childNodes);\n      arr[preferredDoc.childNodes.length].nodeType;\n    } catch (e) {\n      push = {\n        apply: arr.length ? function (target, els) {\n          push_native.apply(target, slice.call(els));\n        } : function (target, els) {\n          var j = target.length, i = 0;\n          while (target[j++] = els[i++]) {\n          }\n          target.length = j - 1;\n        }\n      };\n    }\n    var Sizzle = function (selector, context, results, seed) {\n      var match, elem, m, nodeType, i, groups, old, nid, newContext, newSelector;\n      if ((context ? context.ownerDocument || context : preferredDoc) !== document) {\n        setDocument(context);\n      }\n      context = context || document;\n      results = results || [];\n      if (!selector || typeof selector !== 'string') {\n        return results;\n      }\n      if ((nodeType = context.nodeType) !== 1 && nodeType !== 9) {\n        return [];\n      }\n      if (documentIsHTML && !seed) {\n        if (match = rquickExpr.exec(selector)) {\n          if (m = match[1]) {\n            if (nodeType === 9) {\n              elem = context.getElementById(m);\n              if (elem && elem.parentNode) {\n                if (elem.id === m) {\n                  results.push(elem);\n                  return results;\n                }\n              } else {\n                return results;\n              }\n            } else {\n              if (context.ownerDocument && (elem = context.ownerDocument.getElementById(m)) && contains$1(context, elem) && elem.id === m) {\n                results.push(elem);\n                return results;\n              }\n            }\n          } else if (match[2]) {\n            push.apply(results, context.getElementsByTagName(selector));\n            return results;\n          } else if ((m = match[3]) && support.getElementsByClassName) {\n            push.apply(results, context.getElementsByClassName(m));\n            return results;\n          }\n        }\n        if (support.qsa && (!rbuggyQSA || !rbuggyQSA.test(selector))) {\n          nid = old = expando;\n          newContext = context;\n          newSelector = nodeType === 9 && selector;\n          if (nodeType === 1 && context.nodeName.toLowerCase() !== 'object') {\n            groups = tokenize(selector);\n            if (old = context.getAttribute('id')) {\n              nid = old.replace(rescape, '\\\\$&');\n            } else {\n              context.setAttribute('id', nid);\n            }\n            nid = '[id=\\'' + nid + '\\'] ';\n            i = groups.length;\n            while (i--) {\n              groups[i] = nid + toSelector(groups[i]);\n            }\n            newContext = rsibling.test(selector) && testContext(context.parentNode) || context;\n            newSelector = groups.join(',');\n          }\n          if (newSelector) {\n            try {\n              push.apply(results, newContext.querySelectorAll(newSelector));\n              return results;\n            } catch (qsaError) {\n            } finally {\n              if (!old) {\n                context.removeAttribute('id');\n              }\n            }\n          }\n        }\n      }\n      return select(selector.replace(rtrim, '$1'), context, results, seed);\n    };\n    function createCache() {\n      var keys = [];\n      function cache(key, value) {\n        if (keys.push(key + ' ') > Expr.cacheLength) {\n          delete cache[keys.shift()];\n        }\n        return cache[key + ' '] = value;\n      }\n      return cache;\n    }\n    function markFunction(fn) {\n      fn[expando] = true;\n      return fn;\n    }\n    function siblingCheck(a, b) {\n      var cur = b && a, diff = cur && a.nodeType === 1 && b.nodeType === 1 && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE);\n      if (diff) {\n        return diff;\n      }\n      if (cur) {\n        while (cur = cur.nextSibling) {\n          if (cur === b) {\n            return -1;\n          }\n        }\n      }\n      return a ? 1 : -1;\n    }\n    function createInputPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return name === 'input' && elem.type === type;\n      };\n    }\n    function createButtonPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return (name === 'input' || name === 'button') && elem.type === type;\n      };\n    }\n    function createPositionalPseudo(fn) {\n      return markFunction(function (argument) {\n        argument = +argument;\n        return markFunction(function (seed, matches) {\n          var j, matchIndexes = fn([], seed.length, argument), i = matchIndexes.length;\n          while (i--) {\n            if (seed[j = matchIndexes[i]]) {\n              seed[j] = !(matches[j] = seed[j]);\n            }\n          }\n        });\n      });\n    }\n    function testContext(context) {\n      return context && typeof context.getElementsByTagName !== strundefined && context;\n    }\n    support = Sizzle.support = {};\n    isXML = Sizzle.isXML = function (elem) {\n      var documentElement = elem && (elem.ownerDocument || elem).documentElement;\n      return documentElement ? documentElement.nodeName !== 'HTML' : false;\n    };\n    setDocument = Sizzle.setDocument = function (node) {\n      var hasCompare, doc = node ? node.ownerDocument || node : preferredDoc, parent = doc.defaultView;\n      function getTop(win) {\n        try {\n          return win.top;\n        } catch (ex) {\n        }\n        return null;\n      }\n      if (doc === document || doc.nodeType !== 9 || !doc.documentElement) {\n        return document;\n      }\n      document = doc;\n      docElem = doc.documentElement;\n      documentIsHTML = !isXML(doc);\n      if (parent && parent !== getTop(parent)) {\n        if (parent.addEventListener) {\n          parent.addEventListener('unload', function () {\n            setDocument();\n          }, false);\n        } else if (parent.attachEvent) {\n          parent.attachEvent('onunload', function () {\n            setDocument();\n          });\n        }\n      }\n      support.attributes = true;\n      support.getElementsByTagName = true;\n      support.getElementsByClassName = rnative.test(doc.getElementsByClassName);\n      support.getById = true;\n      Expr.find.ID = function (id, context) {\n        if (typeof context.getElementById !== strundefined && documentIsHTML) {\n          var m = context.getElementById(id);\n          return m && m.parentNode ? [m] : [];\n        }\n      };\n      Expr.filter.ID = function (id) {\n        var attrId = id.replace(runescape, funescape);\n        return function (elem) {\n          return elem.getAttribute('id') === attrId;\n        };\n      };\n      Expr.find.TAG = support.getElementsByTagName ? function (tag, context) {\n        if (typeof context.getElementsByTagName !== strundefined) {\n          return context.getElementsByTagName(tag);\n        }\n      } : function (tag, context) {\n        var elem, tmp = [], i = 0, results = context.getElementsByTagName(tag);\n        if (tag === '*') {\n          while (elem = results[i++]) {\n            if (elem.nodeType === 1) {\n              tmp.push(elem);\n            }\n          }\n          return tmp;\n        }\n        return results;\n      };\n      Expr.find.CLASS = support.getElementsByClassName && function (className, context) {\n        if (documentIsHTML) {\n          return context.getElementsByClassName(className);\n        }\n      };\n      rbuggyMatches = [];\n      rbuggyQSA = [];\n      support.disconnectedMatch = true;\n      rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join('|'));\n      rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join('|'));\n      hasCompare = rnative.test(docElem.compareDocumentPosition);\n      contains$1 = hasCompare || rnative.test(docElem.contains) ? function (a, b) {\n        var adown = a.nodeType === 9 ? a.documentElement : a, bup = b && b.parentNode;\n        return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));\n      } : function (a, b) {\n        if (b) {\n          while (b = b.parentNode) {\n            if (b === a) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n      sortOrder = hasCompare ? function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n        if (compare) {\n          return compare;\n        }\n        compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1;\n        if (compare & 1 || !support.sortDetached && b.compareDocumentPosition(a) === compare) {\n          if (a === doc || a.ownerDocument === preferredDoc && contains$1(preferredDoc, a)) {\n            return -1;\n          }\n          if (b === doc || b.ownerDocument === preferredDoc && contains$1(preferredDoc, b)) {\n            return 1;\n          }\n          return sortInput ? indexOf$1.call(sortInput, a) - indexOf$1.call(sortInput, b) : 0;\n        }\n        return compare & 4 ? -1 : 1;\n      } : function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var cur, i = 0, aup = a.parentNode, bup = b.parentNode, ap = [a], bp = [b];\n        if (!aup || !bup) {\n          return a === doc ? -1 : b === doc ? 1 : aup ? -1 : bup ? 1 : sortInput ? indexOf$1.call(sortInput, a) - indexOf$1.call(sortInput, b) : 0;\n        } else if (aup === bup) {\n          return siblingCheck(a, b);\n        }\n        cur = a;\n        while (cur = cur.parentNode) {\n          ap.unshift(cur);\n        }\n        cur = b;\n        while (cur = cur.parentNode) {\n          bp.unshift(cur);\n        }\n        while (ap[i] === bp[i]) {\n          i++;\n        }\n        return i ? siblingCheck(ap[i], bp[i]) : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0;\n      };\n      return doc;\n    };\n    Sizzle.matches = function (expr, elements) {\n      return Sizzle(expr, null, null, elements);\n    };\n    Sizzle.matchesSelector = function (elem, expr) {\n      if ((elem.ownerDocument || elem) !== document) {\n        setDocument(elem);\n      }\n      expr = expr.replace(rattributeQuotes, '=\\'$1\\']');\n      if (support.matchesSelector && documentIsHTML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) {\n        try {\n          var ret = matches.call(elem, expr);\n          if (ret || support.disconnectedMatch || elem.document && elem.document.nodeType !== 11) {\n            return ret;\n          }\n        } catch (e) {\n        }\n      }\n      return Sizzle(expr, document, null, [elem]).length > 0;\n    };\n    Sizzle.contains = function (context, elem) {\n      if ((context.ownerDocument || context) !== document) {\n        setDocument(context);\n      }\n      return contains$1(context, elem);\n    };\n    Sizzle.attr = function (elem, name) {\n      if ((elem.ownerDocument || elem) !== document) {\n        setDocument(elem);\n      }\n      var fn = Expr.attrHandle[name.toLowerCase()], val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : undefined;\n      return val !== undefined ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;\n    };\n    Sizzle.error = function (msg) {\n      throw new Error('Syntax error, unrecognized expression: ' + msg);\n    };\n    Sizzle.uniqueSort = function (results) {\n      var elem, duplicates = [], j = 0, i = 0;\n      hasDuplicate = !support.detectDuplicates;\n      sortInput = !support.sortStable && results.slice(0);\n      results.sort(sortOrder);\n      if (hasDuplicate) {\n        while (elem = results[i++]) {\n          if (elem === results[i]) {\n            j = duplicates.push(i);\n          }\n        }\n        while (j--) {\n          results.splice(duplicates[j], 1);\n        }\n      }\n      sortInput = null;\n      return results;\n    };\n    getText = Sizzle.getText = function (elem) {\n      var node, ret = '', i = 0, nodeType = elem.nodeType;\n      if (!nodeType) {\n        while (node = elem[i++]) {\n          ret += getText(node);\n        }\n      } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {\n        if (typeof elem.textContent === 'string') {\n          return elem.textContent;\n        } else {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            ret += getText(elem);\n          }\n        }\n      } else if (nodeType === 3 || nodeType === 4) {\n        return elem.nodeValue;\n      }\n      return ret;\n    };\n    Expr = Sizzle.selectors = {\n      cacheLength: 50,\n      createPseudo: markFunction,\n      match: matchExpr,\n      attrHandle: {},\n      find: {},\n      relative: {\n        '>': {\n          dir: 'parentNode',\n          first: true\n        },\n        ' ': { dir: 'parentNode' },\n        '+': {\n          dir: 'previousSibling',\n          first: true\n        },\n        '~': { dir: 'previousSibling' }\n      },\n      preFilter: {\n        ATTR: function (match) {\n          match[1] = match[1].replace(runescape, funescape);\n          match[3] = (match[3] || match[4] || match[5] || '').replace(runescape, funescape);\n          if (match[2] === '~=') {\n            match[3] = ' ' + match[3] + ' ';\n          }\n          return match.slice(0, 4);\n        },\n        CHILD: function (match) {\n          match[1] = match[1].toLowerCase();\n          if (match[1].slice(0, 3) === 'nth') {\n            if (!match[3]) {\n              Sizzle.error(match[0]);\n            }\n            match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === 'even' || match[3] === 'odd'));\n            match[5] = +(match[7] + match[8] || match[3] === 'odd');\n          } else if (match[3]) {\n            Sizzle.error(match[0]);\n          }\n          return match;\n        },\n        PSEUDO: function (match) {\n          var excess, unquoted = !match[6] && match[2];\n          if (matchExpr.CHILD.test(match[0])) {\n            return null;\n          }\n          if (match[3]) {\n            match[2] = match[4] || match[5] || '';\n          } else if (unquoted && rpseudo.test(unquoted) && (excess = tokenize(unquoted, true)) && (excess = unquoted.indexOf(')', unquoted.length - excess) - unquoted.length)) {\n            match[0] = match[0].slice(0, excess);\n            match[2] = unquoted.slice(0, excess);\n          }\n          return match.slice(0, 3);\n        }\n      },\n      filter: {\n        TAG: function (nodeNameSelector) {\n          var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();\n          return nodeNameSelector === '*' ? function () {\n            return true;\n          } : function (elem) {\n            return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n          };\n        },\n        CLASS: function (className) {\n          var pattern = classCache[className + ' '];\n          return pattern || (pattern = new RegExp('(^|' + whitespace + ')' + className + '(' + whitespace + '|$)')) && classCache(className, function (elem) {\n            return pattern.test(typeof elem.className === 'string' && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute('class') || '');\n          });\n        },\n        ATTR: function (name, operator, check) {\n          return function (elem) {\n            var result = Sizzle.attr(elem, name);\n            if (result == null) {\n              return operator === '!=';\n            }\n            if (!operator) {\n              return true;\n            }\n            result += '';\n            return operator === '=' ? result === check : operator === '!=' ? result !== check : operator === '^=' ? check && result.indexOf(check) === 0 : operator === '*=' ? check && result.indexOf(check) > -1 : operator === '$=' ? check && result.slice(-check.length) === check : operator === '~=' ? (' ' + result + ' ').indexOf(check) > -1 : operator === '|=' ? result === check || result.slice(0, check.length + 1) === check + '-' : false;\n          };\n        },\n        CHILD: function (type, what, argument, first, last) {\n          var simple = type.slice(0, 3) !== 'nth', forward = type.slice(-4) !== 'last', ofType = what === 'of-type';\n          return first === 1 && last === 0 ? function (elem) {\n            return !!elem.parentNode;\n          } : function (elem, context, xml) {\n            var cache, outerCache, node, diff, nodeIndex, start, dir = simple !== forward ? 'nextSibling' : 'previousSibling', parent = elem.parentNode, name = ofType && elem.nodeName.toLowerCase(), useCache = !xml && !ofType;\n            if (parent) {\n              if (simple) {\n                while (dir) {\n                  node = elem;\n                  while (node = node[dir]) {\n                    if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {\n                      return false;\n                    }\n                  }\n                  start = dir = type === 'only' && !start && 'nextSibling';\n                }\n                return true;\n              }\n              start = [forward ? parent.firstChild : parent.lastChild];\n              if (forward && useCache) {\n                outerCache = parent[expando] || (parent[expando] = {});\n                cache = outerCache[type] || [];\n                nodeIndex = cache[0] === dirruns && cache[1];\n                diff = cache[0] === dirruns && cache[2];\n                node = nodeIndex && parent.childNodes[nodeIndex];\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if (node.nodeType === 1 && ++diff && node === elem) {\n                    outerCache[type] = [\n                      dirruns,\n                      nodeIndex,\n                      diff\n                    ];\n                    break;\n                  }\n                }\n              } else if (useCache && (cache = (elem[expando] || (elem[expando] = {}))[type]) && cache[0] === dirruns) {\n                diff = cache[1];\n              } else {\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {\n                    if (useCache) {\n                      (node[expando] || (node[expando] = {}))[type] = [\n                        dirruns,\n                        diff\n                      ];\n                    }\n                    if (node === elem) {\n                      break;\n                    }\n                  }\n                }\n              }\n              diff -= last;\n              return diff === first || diff % first === 0 && diff / first >= 0;\n            }\n          };\n        },\n        PSEUDO: function (pseudo, argument) {\n          var args, fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error('unsupported pseudo: ' + pseudo);\n          if (fn[expando]) {\n            return fn(argument);\n          }\n          if (fn.length > 1) {\n            args = [\n              pseudo,\n              pseudo,\n              '',\n              argument\n            ];\n            return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function (seed, matches) {\n              var idx, matched = fn(seed, argument), i = matched.length;\n              while (i--) {\n                idx = indexOf$1.call(seed, matched[i]);\n                seed[idx] = !(matches[idx] = matched[i]);\n              }\n            }) : function (elem) {\n              return fn(elem, 0, args);\n            };\n          }\n          return fn;\n        }\n      },\n      pseudos: {\n        not: markFunction(function (selector) {\n          var input = [], results = [], matcher = compile(selector.replace(rtrim, '$1'));\n          return matcher[expando] ? markFunction(function (seed, matches, context, xml) {\n            var elem, unmatched = matcher(seed, null, xml, []), i = seed.length;\n            while (i--) {\n              if (elem = unmatched[i]) {\n                seed[i] = !(matches[i] = elem);\n              }\n            }\n          }) : function (elem, context, xml) {\n            input[0] = elem;\n            matcher(input, null, xml, results);\n            return !results.pop();\n          };\n        }),\n        has: markFunction(function (selector) {\n          return function (elem) {\n            return Sizzle(selector, elem).length > 0;\n          };\n        }),\n        contains: markFunction(function (text) {\n          text = text.replace(runescape, funescape);\n          return function (elem) {\n            return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;\n          };\n        }),\n        lang: markFunction(function (lang) {\n          if (!ridentifier.test(lang || '')) {\n            Sizzle.error('unsupported lang: ' + lang);\n          }\n          lang = lang.replace(runescape, funescape).toLowerCase();\n          return function (elem) {\n            var elemLang;\n            do {\n              if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute('xml:lang') || elem.getAttribute('lang')) {\n                elemLang = elemLang.toLowerCase();\n                return elemLang === lang || elemLang.indexOf(lang + '-') === 0;\n              }\n            } while ((elem = elem.parentNode) && elem.nodeType === 1);\n            return false;\n          };\n        }),\n        target: function (elem) {\n          var hash = domGlobals.window.location && domGlobals.window.location.hash;\n          return hash && hash.slice(1) === elem.id;\n        },\n        root: function (elem) {\n          return elem === docElem;\n        },\n        focus: function (elem) {\n          return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n        },\n        enabled: function (elem) {\n          return elem.disabled === false;\n        },\n        disabled: function (elem) {\n          return elem.disabled === true;\n        },\n        checked: function (elem) {\n          var nodeName = elem.nodeName.toLowerCase();\n          return nodeName === 'input' && !!elem.checked || nodeName === 'option' && !!elem.selected;\n        },\n        selected: function (elem) {\n          if (elem.parentNode) {\n            elem.parentNode.selectedIndex;\n          }\n          return elem.selected === true;\n        },\n        empty: function (elem) {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            if (elem.nodeType < 6) {\n              return false;\n            }\n          }\n          return true;\n        },\n        parent: function (elem) {\n          return !Expr.pseudos.empty(elem);\n        },\n        header: function (elem) {\n          return rheader.test(elem.nodeName);\n        },\n        input: function (elem) {\n          return rinputs.test(elem.nodeName);\n        },\n        button: function (elem) {\n          var name = elem.nodeName.toLowerCase();\n          return name === 'input' && elem.type === 'button' || name === 'button';\n        },\n        text: function (elem) {\n          var attr;\n          return elem.nodeName.toLowerCase() === 'input' && elem.type === 'text' && ((attr = elem.getAttribute('type')) == null || attr.toLowerCase() === 'text');\n        },\n        first: createPositionalPseudo(function () {\n          return [0];\n        }),\n        last: createPositionalPseudo(function (matchIndexes, length) {\n          return [length - 1];\n        }),\n        eq: createPositionalPseudo(function (matchIndexes, length, argument) {\n          return [argument < 0 ? argument + length : argument];\n        }),\n        even: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 0;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        odd: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 1;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        lt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; --i >= 0;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        gt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; ++i < length;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        })\n      }\n    };\n    Expr.pseudos.nth = Expr.pseudos.eq;\n    for (i in {\n        radio: true,\n        checkbox: true,\n        file: true,\n        password: true,\n        image: true\n      }) {\n      Expr.pseudos[i] = createInputPseudo(i);\n    }\n    for (i in {\n        submit: true,\n        reset: true\n      }) {\n      Expr.pseudos[i] = createButtonPseudo(i);\n    }\n    function setFilters() {\n    }\n    setFilters.prototype = Expr.filters = Expr.pseudos;\n    Expr.setFilters = new setFilters();\n    tokenize = Sizzle.tokenize = function (selector, parseOnly) {\n      var matched, match, tokens, type, soFar, groups, preFilters, cached = tokenCache[selector + ' '];\n      if (cached) {\n        return parseOnly ? 0 : cached.slice(0);\n      }\n      soFar = selector;\n      groups = [];\n      preFilters = Expr.preFilter;\n      while (soFar) {\n        if (!matched || (match = rcomma.exec(soFar))) {\n          if (match) {\n            soFar = soFar.slice(match[0].length) || soFar;\n          }\n          groups.push(tokens = []);\n        }\n        matched = false;\n        if (match = rcombinators.exec(soFar)) {\n          matched = match.shift();\n          tokens.push({\n            value: matched,\n            type: match[0].replace(rtrim, ' ')\n          });\n          soFar = soFar.slice(matched.length);\n        }\n        for (type in Expr.filter) {\n          if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))) {\n            matched = match.shift();\n            tokens.push({\n              value: matched,\n              type: type,\n              matches: match\n            });\n            soFar = soFar.slice(matched.length);\n          }\n        }\n        if (!matched) {\n          break;\n        }\n      }\n      return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : tokenCache(selector, groups).slice(0);\n    };\n    function toSelector(tokens) {\n      var i = 0, len = tokens.length, selector = '';\n      for (; i < len; i++) {\n        selector += tokens[i].value;\n      }\n      return selector;\n    }\n    function addCombinator(matcher, combinator, base) {\n      var dir = combinator.dir, checkNonElements = base && dir === 'parentNode', doneName = done++;\n      return combinator.first ? function (elem, context, xml) {\n        while (elem = elem[dir]) {\n          if (elem.nodeType === 1 || checkNonElements) {\n            return matcher(elem, context, xml);\n          }\n        }\n      } : function (elem, context, xml) {\n        var oldCache, outerCache, newCache = [\n            dirruns,\n            doneName\n          ];\n        if (xml) {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              if (matcher(elem, context, xml)) {\n                return true;\n              }\n            }\n          }\n        } else {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              outerCache = elem[expando] || (elem[expando] = {});\n              if ((oldCache = outerCache[dir]) && oldCache[0] === dirruns && oldCache[1] === doneName) {\n                return newCache[2] = oldCache[2];\n              } else {\n                outerCache[dir] = newCache;\n                if (newCache[2] = matcher(elem, context, xml)) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n      };\n    }\n    function elementMatcher(matchers) {\n      return matchers.length > 1 ? function (elem, context, xml) {\n        var i = matchers.length;\n        while (i--) {\n          if (!matchers[i](elem, context, xml)) {\n            return false;\n          }\n        }\n        return true;\n      } : matchers[0];\n    }\n    function multipleContexts(selector, contexts, results) {\n      var i = 0, len = contexts.length;\n      for (; i < len; i++) {\n        Sizzle(selector, contexts[i], results);\n      }\n      return results;\n    }\n    function condense(unmatched, map, filter, context, xml) {\n      var elem, newUnmatched = [], i = 0, len = unmatched.length, mapped = map != null;\n      for (; i < len; i++) {\n        if (elem = unmatched[i]) {\n          if (!filter || filter(elem, context, xml)) {\n            newUnmatched.push(elem);\n            if (mapped) {\n              map.push(i);\n            }\n          }\n        }\n      }\n      return newUnmatched;\n    }\n    function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {\n      if (postFilter && !postFilter[expando]) {\n        postFilter = setMatcher(postFilter);\n      }\n      if (postFinder && !postFinder[expando]) {\n        postFinder = setMatcher(postFinder, postSelector);\n      }\n      return markFunction(function (seed, results, context, xml) {\n        var temp, i, elem, preMap = [], postMap = [], preexisting = results.length, elems = seed || multipleContexts(selector || '*', context.nodeType ? [context] : context, []), matcherIn = preFilter && (seed || !selector) ? condense(elems, preMap, preFilter, context, xml) : elems, matcherOut = matcher ? postFinder || (seed ? preFilter : preexisting || postFilter) ? [] : results : matcherIn;\n        if (matcher) {\n          matcher(matcherIn, matcherOut, context, xml);\n        }\n        if (postFilter) {\n          temp = condense(matcherOut, postMap);\n          postFilter(temp, [], context, xml);\n          i = temp.length;\n          while (i--) {\n            if (elem = temp[i]) {\n              matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);\n            }\n          }\n        }\n        if (seed) {\n          if (postFinder || preFilter) {\n            if (postFinder) {\n              temp = [];\n              i = matcherOut.length;\n              while (i--) {\n                if (elem = matcherOut[i]) {\n                  temp.push(matcherIn[i] = elem);\n                }\n              }\n              postFinder(null, matcherOut = [], temp, xml);\n            }\n            i = matcherOut.length;\n            while (i--) {\n              if ((elem = matcherOut[i]) && (temp = postFinder ? indexOf$1.call(seed, elem) : preMap[i]) > -1) {\n                seed[temp] = !(results[temp] = elem);\n              }\n            }\n          }\n        } else {\n          matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut);\n          if (postFinder) {\n            postFinder(null, results, matcherOut, xml);\n          } else {\n            push.apply(results, matcherOut);\n          }\n        }\n      });\n    }\n    function matcherFromTokens(tokens) {\n      var checkContext, matcher, j, len = tokens.length, leadingRelative = Expr.relative[tokens[0].type], implicitRelative = leadingRelative || Expr.relative[' '], i = leadingRelative ? 1 : 0, matchContext = addCombinator(function (elem) {\n          return elem === checkContext;\n        }, implicitRelative, true), matchAnyContext = addCombinator(function (elem) {\n          return indexOf$1.call(checkContext, elem) > -1;\n        }, implicitRelative, true), matchers = [function (elem, context, xml) {\n            return !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));\n          }];\n      for (; i < len; i++) {\n        if (matcher = Expr.relative[tokens[i].type]) {\n          matchers = [addCombinator(elementMatcher(matchers), matcher)];\n        } else {\n          matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);\n          if (matcher[expando]) {\n            j = ++i;\n            for (; j < len; j++) {\n              if (Expr.relative[tokens[j].type]) {\n                break;\n              }\n            }\n            return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1).concat({ value: tokens[i - 2].type === ' ' ? '*' : '' })).replace(rtrim, '$1'), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens));\n          }\n          matchers.push(matcher);\n        }\n      }\n      return elementMatcher(matchers);\n    }\n    function matcherFromGroupMatchers(elementMatchers, setMatchers) {\n      var bySet = setMatchers.length > 0, byElement = elementMatchers.length > 0, superMatcher = function (seed, context, xml, results, outermost) {\n          var elem, j, matcher, matchedCount = 0, i = '0', unmatched = seed && [], setMatched = [], contextBackup = outermostContext, elems = seed || byElement && Expr.find.TAG('*', outermost), dirrunsUnique = dirruns += contextBackup == null ? 1 : Math.random() || 0.1, len = elems.length;\n          if (outermost) {\n            outermostContext = context !== document && context;\n          }\n          for (; i !== len && (elem = elems[i]) != null; i++) {\n            if (byElement && elem) {\n              j = 0;\n              while (matcher = elementMatchers[j++]) {\n                if (matcher(elem, context, xml)) {\n                  results.push(elem);\n                  break;\n                }\n              }\n              if (outermost) {\n                dirruns = dirrunsUnique;\n              }\n            }\n            if (bySet) {\n              if (elem = !matcher && elem) {\n                matchedCount--;\n              }\n              if (seed) {\n                unmatched.push(elem);\n              }\n            }\n          }\n          matchedCount += i;\n          if (bySet && i !== matchedCount) {\n            j = 0;\n            while (matcher = setMatchers[j++]) {\n              matcher(unmatched, setMatched, context, xml);\n            }\n            if (seed) {\n              if (matchedCount > 0) {\n                while (i--) {\n                  if (!(unmatched[i] || setMatched[i])) {\n                    setMatched[i] = pop.call(results);\n                  }\n                }\n              }\n              setMatched = condense(setMatched);\n            }\n            push.apply(results, setMatched);\n            if (outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1) {\n              Sizzle.uniqueSort(results);\n            }\n          }\n          if (outermost) {\n            dirruns = dirrunsUnique;\n            outermostContext = contextBackup;\n          }\n          return unmatched;\n        };\n      return bySet ? markFunction(superMatcher) : superMatcher;\n    }\n    compile = Sizzle.compile = function (selector, match) {\n      var i, setMatchers = [], elementMatchers = [], cached = compilerCache[selector + ' '];\n      if (!cached) {\n        if (!match) {\n          match = tokenize(selector);\n        }\n        i = match.length;\n        while (i--) {\n          cached = matcherFromTokens(match[i]);\n          if (cached[expando]) {\n            setMatchers.push(cached);\n          } else {\n            elementMatchers.push(cached);\n          }\n        }\n        cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers));\n        cached.selector = selector;\n      }\n      return cached;\n    };\n    select = Sizzle.select = function (selector, context, results, seed) {\n      var i, tokens, token, type, find, compiled = typeof selector === 'function' && selector, match = !seed && tokenize(selector = compiled.selector || selector);\n      results = results || [];\n      if (match.length === 1) {\n        tokens = match[0] = match[0].slice(0);\n        if (tokens.length > 2 && (token = tokens[0]).type === 'ID' && support.getById && context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]) {\n          context = (Expr.find.ID(token.matches[0].replace(runescape, funescape), context) || [])[0];\n          if (!context) {\n            return results;\n          } else if (compiled) {\n            context = context.parentNode;\n          }\n          selector = selector.slice(tokens.shift().value.length);\n        }\n        i = matchExpr.needsContext.test(selector) ? 0 : tokens.length;\n        while (i--) {\n          token = tokens[i];\n          if (Expr.relative[type = token.type]) {\n            break;\n          }\n          if (find = Expr.find[type]) {\n            if (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context)) {\n              tokens.splice(i, 1);\n              selector = seed.length && toSelector(tokens);\n              if (!selector) {\n                push.apply(results, seed);\n                return results;\n              }\n              break;\n            }\n          }\n        }\n      }\n      (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, rsibling.test(selector) && testContext(context.parentNode) || context);\n      return results;\n    };\n    support.sortStable = expando.split('').sort(sortOrder).join('') === expando;\n    support.detectDuplicates = !!hasDuplicate;\n    setDocument();\n    support.sortDetached = true;\n\n    var isArray$1 = Array.isArray;\n    var toArray = function (obj) {\n      var array = obj, i, l;\n      if (!isArray$1(obj)) {\n        array = [];\n        for (i = 0, l = obj.length; i < l; i++) {\n          array[i] = obj[i];\n        }\n      }\n      return array;\n    };\n    var each$1 = function (o, cb, s) {\n      var n, l;\n      if (!o) {\n        return 0;\n      }\n      s = s || o;\n      if (o.length !== undefined) {\n        for (n = 0, l = o.length; n < l; n++) {\n          if (cb.call(s, o[n], n, o) === false) {\n            return 0;\n          }\n        }\n      } else {\n        for (n in o) {\n          if (o.hasOwnProperty(n)) {\n            if (cb.call(s, o[n], n, o) === false) {\n              return 0;\n            }\n          }\n        }\n      }\n      return 1;\n    };\n    var map$1 = function (array, callback) {\n      var out = [];\n      each$1(array, function (item, index) {\n        out.push(callback(item, index, array));\n      });\n      return out;\n    };\n    var filter$1 = function (a, f) {\n      var o = [];\n      each$1(a, function (v, index) {\n        if (!f || f(v, index, a)) {\n          o.push(v);\n        }\n      });\n      return o;\n    };\n    var indexOf$2 = function (a, v) {\n      var i, l;\n      if (a) {\n        for (i = 0, l = a.length; i < l; i++) {\n          if (a[i] === v) {\n            return i;\n          }\n        }\n      }\n      return -1;\n    };\n    var reduce = function (collection, iteratee, accumulator, thisArg) {\n      var i = 0;\n      if (arguments.length < 3) {\n        accumulator = collection[0];\n      }\n      for (; i < collection.length; i++) {\n        accumulator = iteratee.call(thisArg, accumulator, collection[i], i);\n      }\n      return accumulator;\n    };\n    var findIndex$1 = function (array, predicate, thisArg) {\n      var i, l;\n      for (i = 0, l = array.length; i < l; i++) {\n        if (predicate.call(thisArg, array[i], i, array)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var find$1 = function (array, predicate, thisArg) {\n      var idx = findIndex$1(array, predicate, thisArg);\n      if (idx !== -1) {\n        return array[idx];\n      }\n      return undefined;\n    };\n    var last$1 = function (collection) {\n      return collection[collection.length - 1];\n    };\n    var ArrUtils = {\n      isArray: isArray$1,\n      toArray: toArray,\n      each: each$1,\n      map: map$1,\n      filter: filter$1,\n      indexOf: indexOf$2,\n      reduce: reduce,\n      findIndex: findIndex$1,\n      find: find$1,\n      last: last$1\n    };\n\n    var whiteSpaceRegExp = /^\\s*|\\s*$/g;\n    var trim = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp, '');\n    };\n    var is = function (obj, type) {\n      if (!type) {\n        return obj !== undefined;\n      }\n      if (type === 'array' && ArrUtils.isArray(obj)) {\n        return true;\n      }\n      return typeof obj === type;\n    };\n    var makeMap = function (items, delim, map) {\n      var i;\n      items = items || [];\n      delim = delim || ',';\n      if (typeof items === 'string') {\n        items = items.split(delim);\n      }\n      map = map || {};\n      i = items.length;\n      while (i--) {\n        map[items[i]] = {};\n      }\n      return map;\n    };\n    var hasOwnProperty = function (obj, prop) {\n      return Object.prototype.hasOwnProperty.call(obj, prop);\n    };\n    var create = function (s, p, root) {\n      var self = this;\n      var sp, ns, cn, scn, c, de = 0;\n      s = /^((static) )?([\\w.]+)(:([\\w.]+))?/.exec(s);\n      cn = s[3].match(/(^|\\.)(\\w+)$/i)[2];\n      ns = self.createNS(s[3].replace(/\\.\\w+$/, ''), root);\n      if (ns[cn]) {\n        return;\n      }\n      if (s[2] === 'static') {\n        ns[cn] = p;\n        if (this.onCreate) {\n          this.onCreate(s[2], s[3], ns[cn]);\n        }\n        return;\n      }\n      if (!p[cn]) {\n        p[cn] = function () {\n        };\n        de = 1;\n      }\n      ns[cn] = p[cn];\n      self.extend(ns[cn].prototype, p);\n      if (s[5]) {\n        sp = self.resolve(s[5]).prototype;\n        scn = s[5].match(/\\.(\\w+)$/i)[1];\n        c = ns[cn];\n        if (de) {\n          ns[cn] = function () {\n            return sp[scn].apply(this, arguments);\n          };\n        } else {\n          ns[cn] = function () {\n            this.parent = sp[scn];\n            return c.apply(this, arguments);\n          };\n        }\n        ns[cn].prototype[cn] = ns[cn];\n        self.each(sp, function (f, n) {\n          ns[cn].prototype[n] = sp[n];\n        });\n        self.each(p, function (f, n) {\n          if (sp[n]) {\n            ns[cn].prototype[n] = function () {\n              this.parent = sp[n];\n              return f.apply(this, arguments);\n            };\n          } else {\n            if (n !== cn) {\n              ns[cn].prototype[n] = f;\n            }\n          }\n        });\n      }\n      self.each(p.static, function (f, n) {\n        ns[cn][n] = f;\n      });\n    };\n    var extend = function (obj, ext) {\n      var x = [];\n      for (var _i = 2; _i < arguments.length; _i++) {\n        x[_i - 2] = arguments[_i];\n      }\n      var i, l, name;\n      var args = arguments;\n      var value;\n      for (i = 1, l = args.length; i < l; i++) {\n        ext = args[i];\n        for (name in ext) {\n          if (ext.hasOwnProperty(name)) {\n            value = ext[name];\n            if (value !== undefined) {\n              obj[name] = value;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var walk = function (o, f, n, s) {\n      s = s || this;\n      if (o) {\n        if (n) {\n          o = o[n];\n        }\n        ArrUtils.each(o, function (o, i) {\n          if (f.call(s, o, i, n) === false) {\n            return false;\n          }\n          walk(o, f, n, s);\n        });\n      }\n    };\n    var createNS = function (n, o) {\n      var i, v;\n      o = o || domGlobals.window;\n      n = n.split('.');\n      for (i = 0; i < n.length; i++) {\n        v = n[i];\n        if (!o[v]) {\n          o[v] = {};\n        }\n        o = o[v];\n      }\n      return o;\n    };\n    var resolve$1 = function (n, o) {\n      var i, l;\n      o = o || domGlobals.window;\n      n = n.split('.');\n      for (i = 0, l = n.length; i < l; i++) {\n        o = o[n[i]];\n        if (!o) {\n          break;\n        }\n      }\n      return o;\n    };\n    var explode = function (s, d) {\n      if (!s || is(s, 'array')) {\n        return s;\n      }\n      return ArrUtils.map(s.split(d || ','), trim);\n    };\n    var _addCacheSuffix = function (url) {\n      var cacheSuffix = Env.cacheSuffix;\n      if (cacheSuffix) {\n        url += (url.indexOf('?') === -1 ? '?' : '&') + cacheSuffix;\n      }\n      return url;\n    };\n    var Tools = {\n      trim: trim,\n      isArray: ArrUtils.isArray,\n      is: is,\n      toArray: ArrUtils.toArray,\n      makeMap: makeMap,\n      each: ArrUtils.each,\n      map: ArrUtils.map,\n      grep: ArrUtils.filter,\n      inArray: ArrUtils.indexOf,\n      hasOwn: hasOwnProperty,\n      extend: extend,\n      create: create,\n      walk: walk,\n      createNS: createNS,\n      resolve: resolve$1,\n      explode: explode,\n      _addCacheSuffix: _addCacheSuffix\n    };\n\n    var doc = domGlobals.document, push$1 = Array.prototype.push, slice$1 = Array.prototype.slice;\n    var rquickExpr$1 = /^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/;\n    var Event = EventUtils.Event;\n    var skipUniques = Tools.makeMap('children,contents,next,prev');\n    var isDefined = function (obj) {\n      return typeof obj !== 'undefined';\n    };\n    var isString$1 = function (obj) {\n      return typeof obj === 'string';\n    };\n    var isWindow = function (obj) {\n      return obj && obj === obj.window;\n    };\n    var createFragment = function (html, fragDoc) {\n      var frag, node, container;\n      fragDoc = fragDoc || doc;\n      container = fragDoc.createElement('div');\n      frag = fragDoc.createDocumentFragment();\n      container.innerHTML = html;\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var domManipulate = function (targetNodes, sourceItem, callback, reverse) {\n      var i;\n      if (isString$1(sourceItem)) {\n        sourceItem = createFragment(sourceItem, getElementDocument(targetNodes[0]));\n      } else if (sourceItem.length && !sourceItem.nodeType) {\n        sourceItem = DomQuery.makeArray(sourceItem);\n        if (reverse) {\n          for (i = sourceItem.length - 1; i >= 0; i--) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        } else {\n          for (i = 0; i < sourceItem.length; i++) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        }\n        return targetNodes;\n      }\n      if (sourceItem.nodeType) {\n        i = targetNodes.length;\n        while (i--) {\n          callback.call(targetNodes[i], sourceItem);\n        }\n      }\n      return targetNodes;\n    };\n    var hasClass = function (node, className) {\n      return node && className && (' ' + node.className + ' ').indexOf(' ' + className + ' ') !== -1;\n    };\n    var wrap = function (elements, wrapper, all) {\n      var lastParent, newWrapper;\n      wrapper = DomQuery(wrapper)[0];\n      elements.each(function () {\n        var self = this;\n        if (!all || lastParent !== self.parentNode) {\n          lastParent = self.parentNode;\n          newWrapper = wrapper.cloneNode(false);\n          self.parentNode.insertBefore(newWrapper, self);\n          newWrapper.appendChild(self);\n        } else {\n          newWrapper.appendChild(self);\n        }\n      });\n      return elements;\n    };\n    var numericCssMap = Tools.makeMap('fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom', ' ');\n    var booleanMap = Tools.makeMap('checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected', ' ');\n    var propFix = {\n      for: 'htmlFor',\n      class: 'className',\n      readonly: 'readOnly'\n    };\n    var cssFix = { float: 'cssFloat' };\n    var attrHooks = {}, cssHooks = {};\n    var DomQuery = function (selector, context) {\n      return new DomQuery.fn.init(selector, context);\n    };\n    var inArray = function (item, array) {\n      var i;\n      if (array.indexOf) {\n        return array.indexOf(item);\n      }\n      i = array.length;\n      while (i--) {\n        if (array[i] === item) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var whiteSpaceRegExp$1 = /^\\s*|\\s*$/g;\n    var trim$1 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp$1, '');\n    };\n    var each$2 = function (obj, callback) {\n      var length, key, i, value;\n      if (obj) {\n        length = obj.length;\n        if (length === undefined) {\n          for (key in obj) {\n            if (obj.hasOwnProperty(key)) {\n              value = obj[key];\n              if (callback.call(value, key, value) === false) {\n                break;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < length; i++) {\n            value = obj[i];\n            if (callback.call(value, i, value) === false) {\n              break;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var grep = function (array, callback) {\n      var out = [];\n      each$2(array, function (i, item) {\n        if (callback(item, i)) {\n          out.push(item);\n        }\n      });\n      return out;\n    };\n    var getElementDocument = function (element) {\n      if (!element) {\n        return doc;\n      }\n      if (element.nodeType === 9) {\n        return element;\n      }\n      return element.ownerDocument;\n    };\n    DomQuery.fn = DomQuery.prototype = {\n      constructor: DomQuery,\n      selector: '',\n      context: null,\n      length: 0,\n      init: function (selector, context) {\n        var self = this;\n        var match, node;\n        if (!selector) {\n          return self;\n        }\n        if (selector.nodeType) {\n          self.context = self[0] = selector;\n          self.length = 1;\n          return self;\n        }\n        if (context && context.nodeType) {\n          self.context = context;\n        } else {\n          if (context) {\n            return DomQuery(selector).attr(context);\n          }\n          self.context = context = domGlobals.document;\n        }\n        if (isString$1(selector)) {\n          self.selector = selector;\n          if (selector.charAt(0) === '<' && selector.charAt(selector.length - 1) === '>' && selector.length >= 3) {\n            match = [\n              null,\n              selector,\n              null\n            ];\n          } else {\n            match = rquickExpr$1.exec(selector);\n          }\n          if (match) {\n            if (match[1]) {\n              node = createFragment(selector, getElementDocument(context)).firstChild;\n              while (node) {\n                push$1.call(self, node);\n                node = node.nextSibling;\n              }\n            } else {\n              node = getElementDocument(context).getElementById(match[2]);\n              if (!node) {\n                return self;\n              }\n              if (node.id !== match[2]) {\n                return self.find(selector);\n              }\n              self.length = 1;\n              self[0] = node;\n            }\n          } else {\n            return DomQuery(context).find(selector);\n          }\n        } else {\n          this.add(selector, false);\n        }\n        return self;\n      },\n      toArray: function () {\n        return Tools.toArray(this);\n      },\n      add: function (items, sort) {\n        var self = this;\n        var nodes, i;\n        if (isString$1(items)) {\n          return self.add(DomQuery(items));\n        }\n        if (sort !== false) {\n          nodes = DomQuery.unique(self.toArray().concat(DomQuery.makeArray(items)));\n          self.length = nodes.length;\n          for (i = 0; i < nodes.length; i++) {\n            self[i] = nodes[i];\n          }\n        } else {\n          push$1.apply(self, DomQuery.makeArray(items));\n        }\n        return self;\n      },\n      attr: function (name, value) {\n        var self = this;\n        var hook;\n        if (typeof name === 'object') {\n          each$2(name, function (name, value) {\n            self.attr(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            var hook;\n            if (this.nodeType === 1) {\n              hook = attrHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              if (value === null) {\n                this.removeAttribute(name, 2);\n              } else {\n                this.setAttribute(name, value, 2);\n              }\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType === 1) {\n            hook = attrHooks[name];\n            if (hook && hook.get) {\n              return hook.get(self[0], name);\n            }\n            if (booleanMap[name]) {\n              return self.prop(name) ? name : undefined;\n            }\n            value = self[0].getAttribute(name, 2);\n            if (value === null) {\n              value = undefined;\n            }\n          }\n          return value;\n        }\n        return self;\n      },\n      removeAttr: function (name) {\n        return this.attr(name, null);\n      },\n      prop: function (name, value) {\n        var self = this;\n        name = propFix[name] || name;\n        if (typeof name === 'object') {\n          each$2(name, function (name, value) {\n            self.prop(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            if (this.nodeType === 1) {\n              this[name] = value;\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType && name in self[0]) {\n            return self[0][name];\n          }\n          return value;\n        }\n        return self;\n      },\n      css: function (name, value) {\n        var self = this;\n        var elm, hook;\n        var camel = function (name) {\n          return name.replace(/-(\\D)/g, function (a, b) {\n            return b.toUpperCase();\n          });\n        };\n        var dashed = function (name) {\n          return name.replace(/[A-Z]/g, function (a) {\n            return '-' + a;\n          });\n        };\n        if (typeof name === 'object') {\n          each$2(name, function (name, value) {\n            self.css(name, value);\n          });\n        } else {\n          if (isDefined(value)) {\n            name = camel(name);\n            if (typeof value === 'number' && !numericCssMap[name]) {\n              value = value.toString() + 'px';\n            }\n            self.each(function () {\n              var style = this.style;\n              hook = cssHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              try {\n                this.style[cssFix[name] || name] = value;\n              } catch (ex) {\n              }\n              if (value === null || value === '') {\n                if (style.removeProperty) {\n                  style.removeProperty(dashed(name));\n                } else {\n                  style.removeAttribute(name);\n                }\n              }\n            });\n          } else {\n            elm = self[0];\n            hook = cssHooks[name];\n            if (hook && hook.get) {\n              return hook.get(elm);\n            }\n            if (elm.ownerDocument.defaultView) {\n              try {\n                return elm.ownerDocument.defaultView.getComputedStyle(elm, null).getPropertyValue(dashed(name));\n              } catch (ex) {\n                return undefined;\n              }\n            } else if (elm.currentStyle) {\n              return elm.currentStyle[camel(name)];\n            } else {\n              return '';\n            }\n          }\n        }\n        return self;\n      },\n      remove: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          Event.clean(node);\n          if (node.parentNode) {\n            node.parentNode.removeChild(node);\n          }\n        }\n        return this;\n      },\n      empty: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          while (node.firstChild) {\n            node.removeChild(node.firstChild);\n          }\n        }\n        return this;\n      },\n      html: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          try {\n            while (i--) {\n              self[i].innerHTML = value;\n            }\n          } catch (ex) {\n            DomQuery(self[i]).empty().append(value);\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerHTML : '';\n      },\n      text: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          while (i--) {\n            if ('innerText' in self[i]) {\n              self[i].innerText = value;\n            } else {\n              self[0].textContent = value;\n            }\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerText || self[0].textContent : '';\n      },\n      append: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.appendChild(node);\n          }\n        });\n      },\n      prepend: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.insertBefore(node, this.firstChild);\n          }\n        }, true);\n      },\n      before: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this);\n          });\n        }\n        return self;\n      },\n      after: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this.nextSibling);\n          }, true);\n        }\n        return self;\n      },\n      appendTo: function (val) {\n        DomQuery(val).append(this);\n        return this;\n      },\n      prependTo: function (val) {\n        DomQuery(val).prepend(this);\n        return this;\n      },\n      replaceWith: function (content) {\n        return this.before(content).remove();\n      },\n      wrap: function (content) {\n        return wrap(this, content);\n      },\n      wrapAll: function (content) {\n        return wrap(this, content, true);\n      },\n      wrapInner: function (content) {\n        this.each(function () {\n          DomQuery(this).contents().wrapAll(content);\n        });\n        return this;\n      },\n      unwrap: function () {\n        return this.parent().each(function () {\n          DomQuery(this).replaceWith(this.childNodes);\n        });\n      },\n      clone: function () {\n        var result = [];\n        this.each(function () {\n          result.push(this.cloneNode(true));\n        });\n        return DomQuery(result);\n      },\n      addClass: function (className) {\n        return this.toggleClass(className, true);\n      },\n      removeClass: function (className) {\n        return this.toggleClass(className, false);\n      },\n      toggleClass: function (className, state) {\n        var self = this;\n        if (typeof className !== 'string') {\n          return self;\n        }\n        if (className.indexOf(' ') !== -1) {\n          each$2(className.split(' '), function () {\n            self.toggleClass(this, state);\n          });\n        } else {\n          self.each(function (index, node) {\n            var existingClassName, classState;\n            classState = hasClass(node, className);\n            if (classState !== state) {\n              existingClassName = node.className;\n              if (classState) {\n                node.className = trim$1((' ' + existingClassName + ' ').replace(' ' + className + ' ', ' '));\n              } else {\n                node.className += existingClassName ? ' ' + className : className;\n              }\n            }\n          });\n        }\n        return self;\n      },\n      hasClass: function (className) {\n        return hasClass(this[0], className);\n      },\n      each: function (callback) {\n        return each$2(this, callback);\n      },\n      on: function (name, callback) {\n        return this.each(function () {\n          Event.bind(this, name, callback);\n        });\n      },\n      off: function (name, callback) {\n        return this.each(function () {\n          Event.unbind(this, name, callback);\n        });\n      },\n      trigger: function (name) {\n        return this.each(function () {\n          if (typeof name === 'object') {\n            Event.fire(this, name.type, name);\n          } else {\n            Event.fire(this, name);\n          }\n        });\n      },\n      show: function () {\n        return this.css('display', '');\n      },\n      hide: function () {\n        return this.css('display', 'none');\n      },\n      slice: function () {\n        return new DomQuery(slice$1.apply(this, arguments));\n      },\n      eq: function (index) {\n        return index === -1 ? this.slice(index) : this.slice(index, +index + 1);\n      },\n      first: function () {\n        return this.eq(0);\n      },\n      last: function () {\n        return this.eq(-1);\n      },\n      find: function (selector) {\n        var i, l;\n        var ret = [];\n        for (i = 0, l = this.length; i < l; i++) {\n          DomQuery.find(selector, this[i], ret);\n        }\n        return DomQuery(ret);\n      },\n      filter: function (selector) {\n        if (typeof selector === 'function') {\n          return DomQuery(grep(this.toArray(), function (item, i) {\n            return selector(i, item);\n          }));\n        }\n        return DomQuery(DomQuery.filter(selector, this.toArray()));\n      },\n      closest: function (selector) {\n        var result = [];\n        if (selector instanceof DomQuery) {\n          selector = selector[0];\n        }\n        this.each(function (i, node) {\n          while (node) {\n            if (typeof selector === 'string' && DomQuery(node).is(selector)) {\n              result.push(node);\n              break;\n            } else if (node === selector) {\n              result.push(node);\n              break;\n            }\n            node = node.parentNode;\n          }\n        });\n        return DomQuery(result);\n      },\n      offset: function (offset) {\n        var elm, doc, docElm;\n        var x = 0, y = 0, pos;\n        if (!offset) {\n          elm = this[0];\n          if (elm) {\n            doc = elm.ownerDocument;\n            docElm = doc.documentElement;\n            if (elm.getBoundingClientRect) {\n              pos = elm.getBoundingClientRect();\n              x = pos.left + (docElm.scrollLeft || doc.body.scrollLeft) - docElm.clientLeft;\n              y = pos.top + (docElm.scrollTop || doc.body.scrollTop) - docElm.clientTop;\n            }\n          }\n          return {\n            left: x,\n            top: y\n          };\n        }\n        return this.css(offset);\n      },\n      push: push$1,\n      sort: [].sort,\n      splice: [].splice\n    };\n    Tools.extend(DomQuery, {\n      extend: Tools.extend,\n      makeArray: function (object) {\n        if (isWindow(object) || object.nodeType) {\n          return [object];\n        }\n        return Tools.toArray(object);\n      },\n      inArray: inArray,\n      isArray: Tools.isArray,\n      each: each$2,\n      trim: trim$1,\n      grep: grep,\n      find: Sizzle,\n      expr: Sizzle.selectors,\n      unique: Sizzle.uniqueSort,\n      text: Sizzle.getText,\n      contains: Sizzle.contains,\n      filter: function (expr, elems, not) {\n        var i = elems.length;\n        if (not) {\n          expr = ':not(' + expr + ')';\n        }\n        while (i--) {\n          if (elems[i].nodeType !== 1) {\n            elems.splice(i, 1);\n          }\n        }\n        if (elems.length === 1) {\n          elems = DomQuery.find.matchesSelector(elems[0], expr) ? [elems[0]] : [];\n        } else {\n          elems = DomQuery.find.matches(expr, elems);\n        }\n        return elems;\n      }\n    });\n    var dir = function (el, prop, until) {\n      var matched = [];\n      var cur = el[prop];\n      if (typeof until !== 'string' && until instanceof DomQuery) {\n        until = until[0];\n      }\n      while (cur && cur.nodeType !== 9) {\n        if (until !== undefined) {\n          if (cur === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(cur).is(until)) {\n            break;\n          }\n        }\n        if (cur.nodeType === 1) {\n          matched.push(cur);\n        }\n        cur = cur[prop];\n      }\n      return matched;\n    };\n    var sibling = function (node, siblingName, nodeType, until) {\n      var result = [];\n      if (until instanceof DomQuery) {\n        until = until[0];\n      }\n      for (; node; node = node[siblingName]) {\n        if (nodeType && node.nodeType !== nodeType) {\n          continue;\n        }\n        if (until !== undefined) {\n          if (node === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(node).is(until)) {\n            break;\n          }\n        }\n        result.push(node);\n      }\n      return result;\n    };\n    var firstSibling = function (node, siblingName, nodeType) {\n      for (node = node[siblingName]; node; node = node[siblingName]) {\n        if (node.nodeType === nodeType) {\n          return node;\n        }\n      }\n      return null;\n    };\n    each$2({\n      parent: function (node) {\n        var parent = node.parentNode;\n        return parent && parent.nodeType !== 11 ? parent : null;\n      },\n      parents: function (node) {\n        return dir(node, 'parentNode');\n      },\n      next: function (node) {\n        return firstSibling(node, 'nextSibling', 1);\n      },\n      prev: function (node) {\n        return firstSibling(node, 'previousSibling', 1);\n      },\n      children: function (node) {\n        return sibling(node.firstChild, 'nextSibling', 1);\n      },\n      contents: function (node) {\n        return Tools.toArray((node.nodeName === 'iframe' ? node.contentDocument || node.contentWindow.document : node).childNodes);\n      }\n    }, function (name, fn) {\n      DomQuery.fn[name] = function (selector) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          if (!skipUniques[name]) {\n            result = DomQuery.unique(result);\n          }\n          if (name.indexOf('parents') === 0) {\n            result = result.reverse();\n          }\n        }\n        result = DomQuery(result);\n        if (selector) {\n          return result.filter(selector);\n        }\n        return result;\n      };\n    });\n    each$2({\n      parentsUntil: function (node, until) {\n        return dir(node, 'parentNode', until);\n      },\n      nextUntil: function (node, until) {\n        return sibling(node, 'nextSibling', 1, until).slice(1);\n      },\n      prevUntil: function (node, until) {\n        return sibling(node, 'previousSibling', 1, until).slice(1);\n      }\n    }, function (name, fn) {\n      DomQuery.fn[name] = function (selector, filter) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          result = DomQuery.unique(result);\n          if (name.indexOf('parents') === 0 || name === 'prevUntil') {\n            result = result.reverse();\n          }\n        }\n        result = DomQuery(result);\n        if (filter) {\n          return result.filter(filter);\n        }\n        return result;\n      };\n    });\n    DomQuery.fn.is = function (selector) {\n      return !!selector && this.filter(selector).length > 0;\n    };\n    DomQuery.fn.init.prototype = DomQuery.fn;\n    DomQuery.overrideDefaults = function (callback) {\n      var defaults;\n      var sub = function (selector, context) {\n        defaults = defaults || callback();\n        if (arguments.length === 0) {\n          selector = defaults.element;\n        }\n        if (!context) {\n          context = defaults.context;\n        }\n        return new sub.fn.init(selector, context);\n      };\n      DomQuery.extend(sub, this);\n      return sub;\n    };\n    var appendHooks = function (targetHooks, prop, hooks) {\n      each$2(hooks, function (name, func) {\n        targetHooks[name] = targetHooks[name] || {};\n        targetHooks[name][prop] = func;\n      });\n    };\n    if (Env.ie && Env.ie < 8) {\n      appendHooks(attrHooks, 'get', {\n        maxlength: function (elm) {\n          var value = elm.maxLength;\n          if (value === 2147483647) {\n            return undefined;\n          }\n          return value;\n        },\n        size: function (elm) {\n          var value = elm.size;\n          if (value === 20) {\n            return undefined;\n          }\n          return value;\n        },\n        class: function (elm) {\n          return elm.className;\n        },\n        style: function (elm) {\n          var value = elm.style.cssText;\n          if (value.length === 0) {\n            return undefined;\n          }\n          return value;\n        }\n      });\n      appendHooks(attrHooks, 'set', {\n        class: function (elm, value) {\n          elm.className = value;\n        },\n        style: function (elm, value) {\n          elm.style.cssText = value;\n        }\n      });\n    }\n    if (Env.ie && Env.ie < 9) {\n      cssFix.float = 'styleFloat';\n      appendHooks(cssHooks, 'set', {\n        opacity: function (elm, value) {\n          var style = elm.style;\n          if (value === null || value === '') {\n            style.removeAttribute('filter');\n          } else {\n            style.zoom = 1;\n            style.filter = 'alpha(opacity=' + value * 100 + ')';\n          }\n        }\n      });\n    }\n    DomQuery.attrHooks = attrHooks;\n    DomQuery.cssHooks = cssHooks;\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$2 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$2(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie$1 = 'IE';\n    var opera$1 = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie$1, current),\n        isOpera: isBrowser(opera$1, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie$1),\n      opera: constant(opera$1),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android$1 = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android$1, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android$1),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isAndroid3 = os.isAndroid() && os.version.major === 3;\n      var isAndroid4 = os.isAndroid() && os.version.major === 4;\n      var isTablet = isiPad || isAndroid3 || isAndroid4 && /mobile/i.test(userAgent) === true;\n      var isTouch = os.isiOS() || os.isAndroid();\n      var isPhone = isTouch && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var contains$2 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var trim$2 = function (str) {\n      return str.replace(/^\\s+|\\s+$/g, '');\n    };\n    var lTrim = function (str) {\n      return str.replace(/^\\s+/g, '');\n    };\n    var rTrim = function (str) {\n      return str.replace(/\\s+$/g, '');\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$2(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$2(uastring, 'edge/') && contains$2(uastring, 'chrome') && contains$2(uastring, 'safari') && contains$2(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'chrome') && !contains$2(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'msie') || contains$2(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$2(uastring, 'safari') || contains$2(uastring, 'mobile/')) && contains$2(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$2(uastring, 'iphone') || contains$2(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var detect$3 = cached(function () {\n      var userAgent = domGlobals.navigator.userAgent;\n      return PlatformDetection.detect(userAgent);\n    });\n    var PlatformDetection$1 = { detect: detect$3 };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var name = function (element) {\n      var r = element.dom().nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n\n    var keys = Object.keys;\n    var hasOwnProperty$1 = Object.hasOwnProperty;\n    var each$3 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i);\n      }\n    };\n    var map$2 = function (obj, f) {\n      return tupleMap(obj, function (x, i) {\n        return {\n          k: i,\n          v: f(x, i)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$3(obj, function (x, i) {\n        var tuple = f(x, i);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var bifilter = function (obj, pred) {\n      var t = {};\n      var f = {};\n      each$3(obj, function (x, i) {\n        var branch = pred(x, i) ? t : f;\n        branch[i] = x;\n      });\n      return {\n        t: t,\n        f: f\n      };\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty$1.call(obj, key);\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom().parentNode : element.dom();\n      return dom !== undefined && dom !== null && dom.ownerDocument.body.contains(dom);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        domGlobals.console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom(), key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom();\n      each$3(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get = function (element, key) {\n      var v = element.dom().getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom();\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove = function (element, key) {\n      element.dom().removeAttribute(key);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        domGlobals.console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom();\n      each$3(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$1 = function (element, property) {\n      var dom = element.dom();\n      var styles = domGlobals.window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      var v = r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n      return v === null ? undefined : v;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom();\n      var raw = getUnsafeProperty(dom, property);\n      return Option.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var getAllRaw = function (element) {\n      var css = {};\n      var dom = element.dom();\n      if (isSupported(dom)) {\n        for (var i = 0; i < dom.style.length; i++) {\n          var ruleName = dom.style.item(i);\n          css[ruleName] = dom.style[ruleName];\n        }\n      }\n      return css;\n    };\n\n    var Immutable = function () {\n      var fields = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n      return function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var toArray$1 = function (target, f) {\n      var r = [];\n      var recurse = function (e) {\n        r.push(e);\n        return f(e);\n      };\n      var cur = f(target);\n      do {\n        cur = cur.bind(recurse);\n      } while (cur.isSome());\n      return r;\n    };\n    var Recurse = { toArray: toArray$1 };\n\n    var node = function () {\n      var f = Global$1.getOrDie('Node');\n      return f;\n    };\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var ELEMENT$1 = ELEMENT;\n    var DOCUMENT$1 = DOCUMENT;\n    var is$1 = function (element, selector) {\n      var dom = element.dom();\n      if (dom.nodeType !== ELEMENT$1) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT$1 && dom.nodeType !== DOCUMENT$1 || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), Element.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? Option.none() : Option.from(base.querySelector(selector)).map(Element.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom() === e2.dom();\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = PlatformDetection$1.detect().browser;\n    var contains$3 = browser.isIE() ? ieContains : regularContains;\n\n    var owner = function (element) {\n      return Element.fromDom(element.dom().ownerDocument);\n    };\n    var documentElement = function (element) {\n      return Element.fromDom(element.dom().ownerDocument.documentElement);\n    };\n    var defaultView = function (element) {\n      return Element.fromDom(element.dom().ownerDocument.defaultView);\n    };\n    var parent = function (element) {\n      return Option.from(element.dom().parentNode).map(Element.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom();\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = Element.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var prevSibling = function (element) {\n      return Option.from(element.dom().previousSibling).map(Element.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Option.from(element.dom().nextSibling).map(Element.fromDom);\n    };\n    var prevSiblings = function (element) {\n      return reverse(Recurse.toArray(element, prevSibling));\n    };\n    var nextSiblings = function (element) {\n      return Recurse.toArray(element, nextSibling);\n    };\n    var children = function (element) {\n      return map(element.dom().childNodes, Element.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom().childNodes;\n      return Option.from(cs[index]).map(Element.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var lastChild = function (element) {\n      return child(element, element.dom().childNodes.length - 1);\n    };\n    var childNodesCount = function (element) {\n      return element.dom().childNodes.length;\n    };\n    var spot = Immutable('element', 'offset');\n\n    var browser$1 = PlatformDetection$1.detect().browser;\n    var firstElement = function (nodes) {\n      return find(nodes, isElement);\n    };\n    var getTableCaptionDeltaY = function (elm) {\n      if (browser$1.isFirefox() && name(elm) === 'table') {\n        return firstElement(children(elm)).filter(function (elm) {\n          return name(elm) === 'caption';\n        }).bind(function (caption) {\n          return firstElement(nextSiblings(caption)).map(function (body) {\n            var bodyTop = body.dom().offsetTop;\n            var captionTop = caption.dom().offsetTop;\n            var captionHeight = caption.dom().offsetHeight;\n            return bodyTop <= captionTop ? -captionHeight : 0;\n          });\n        }).getOr(0);\n      } else {\n        return 0;\n      }\n    };\n    var getPos = function (body, elm, rootElm) {\n      var x = 0, y = 0, offsetParent;\n      var doc = body.ownerDocument;\n      var pos;\n      rootElm = rootElm ? rootElm : body;\n      if (elm) {\n        if (rootElm === body && elm.getBoundingClientRect && get$1(Element.fromDom(body), 'position') === 'static') {\n          pos = elm.getBoundingClientRect();\n          x = pos.left + (doc.documentElement.scrollLeft || body.scrollLeft) - doc.documentElement.clientLeft;\n          y = pos.top + (doc.documentElement.scrollTop || body.scrollTop) - doc.documentElement.clientTop;\n          return {\n            x: x,\n            y: y\n          };\n        }\n        offsetParent = elm;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType) {\n          x += offsetParent.offsetLeft || 0;\n          y += offsetParent.offsetTop || 0;\n          offsetParent = offsetParent.offsetParent;\n        }\n        offsetParent = elm.parentNode;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType) {\n          x -= offsetParent.scrollLeft || 0;\n          y -= offsetParent.scrollTop || 0;\n          offsetParent = offsetParent.parentNode;\n        }\n        y += getTableCaptionDeltaY(Element.fromDom(elm));\n      }\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var Position = { getPos: getPos };\n\n    var exports$1 = {}, module$1 = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module$1, undefined));\n    var Promise = module$1.exports.boltExport;\n\n    var nu$3 = function (baseFn) {\n      var data = Option.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$3(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        data = Option.some(x);\n        run(callbacks);\n        callbacks = [];\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          domGlobals.setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu$3(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$3,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      domGlobals.setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$4 = function (baseFn) {\n      return make(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$4,\n      pure: pure$1\n    };\n\n    var par = function (asyncValues, nu) {\n      return nu(function (callback) {\n        var r = [];\n        var count = 0;\n        var cb = function (i) {\n          return function (value) {\n            r[i] = value;\n            count++;\n            if (count >= asyncValues.length) {\n              callback(r);\n            }\n          };\n        };\n        if (asyncValues.length === 0) {\n          callback([]);\n        } else {\n          each(asyncValues, function (asyncValue, i) {\n            asyncValue.get(cb(i));\n          });\n        }\n      });\n    };\n\n    var par$1 = function (futures) {\n      return par(futures, Future.nu);\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (opt) {\n        return value(o);\n      };\n      var orThunk = function (f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOption = function () {\n        return Option.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOption: toOption\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOption: Option.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    function StyleSheetLoader(document, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var idCount = 0;\n      var loadedStates = {};\n      var maxLoadTime;\n      maxLoadTime = settings.maxLoadTime || 5000;\n      var appendToHead = function (node) {\n        document.getElementsByTagName('head')[0].appendChild(node);\n      };\n      var load = function (url, loadedCallback, errorCallback) {\n        var link, style, startTime, state;\n        var passed = function () {\n          var callbacks = state.passed;\n          var i = callbacks.length;\n          while (i--) {\n            callbacks[i]();\n          }\n          state.status = 2;\n          state.passed = [];\n          state.failed = [];\n        };\n        var failed = function () {\n          var callbacks = state.failed;\n          var i = callbacks.length;\n          while (i--) {\n            callbacks[i]();\n          }\n          state.status = 3;\n          state.passed = [];\n          state.failed = [];\n        };\n        var isOldWebKit = function () {\n          var webKitChunks = domGlobals.navigator.userAgent.match(/WebKit\\/(\\d*)/);\n          return !!(webKitChunks && parseInt(webKitChunks[1], 10) < 536);\n        };\n        var wait = function (testCallback, waitCallback) {\n          if (!testCallback()) {\n            if (new Date().getTime() - startTime < maxLoadTime) {\n              Delay.setTimeout(waitCallback);\n            } else {\n              failed();\n            }\n          }\n        };\n        var waitForWebKitLinkLoaded = function () {\n          wait(function () {\n            var styleSheets = document.styleSheets;\n            var styleSheet, i = styleSheets.length, owner;\n            while (i--) {\n              styleSheet = styleSheets[i];\n              owner = styleSheet.ownerNode ? styleSheet.ownerNode : styleSheet.owningElement;\n              if (owner && owner.id === link.id) {\n                passed();\n                return true;\n              }\n            }\n          }, waitForWebKitLinkLoaded);\n        };\n        var waitForGeckoLinkLoaded = function () {\n          wait(function () {\n            try {\n              var cssRules = style.sheet.cssRules;\n              passed();\n              return !!cssRules;\n            } catch (ex) {\n            }\n          }, waitForGeckoLinkLoaded);\n        };\n        url = Tools._addCacheSuffix(url);\n        if (!loadedStates[url]) {\n          state = {\n            passed: [],\n            failed: []\n          };\n          loadedStates[url] = state;\n        } else {\n          state = loadedStates[url];\n        }\n        if (loadedCallback) {\n          state.passed.push(loadedCallback);\n        }\n        if (errorCallback) {\n          state.failed.push(errorCallback);\n        }\n        if (state.status === 1) {\n          return;\n        }\n        if (state.status === 2) {\n          passed();\n          return;\n        }\n        if (state.status === 3) {\n          failed();\n          return;\n        }\n        state.status = 1;\n        link = document.createElement('link');\n        link.rel = 'stylesheet';\n        link.type = 'text/css';\n        link.id = 'u' + idCount++;\n        link.async = false;\n        link.defer = false;\n        startTime = new Date().getTime();\n        if (settings.contentCssCors) {\n          link.crossOrigin = 'anonymous';\n        }\n        if ('onload' in link && !isOldWebKit()) {\n          link.onload = waitForWebKitLinkLoaded;\n          link.onerror = failed;\n        } else {\n          if (domGlobals.navigator.userAgent.indexOf('Firefox') > 0) {\n            style = document.createElement('style');\n            style.textContent = '@import \"' + url + '\"';\n            waitForGeckoLinkLoaded();\n            appendToHead(style);\n            return;\n          }\n          waitForWebKitLinkLoaded();\n        }\n        appendToHead(link);\n        link.href = url;\n      };\n      var loadF = function (url) {\n        return Future.nu(function (resolve) {\n          load(url, compose(resolve, constant(Result.value(url))), compose(resolve, constant(Result.error(url))));\n        });\n      };\n      var unbox = function (result) {\n        return result.fold(identity, identity);\n      };\n      var loadAll = function (urls, success, failure) {\n        par$1(map(urls, loadF)).get(function (result) {\n          var parts = partition(result, function (r) {\n            return r.isValue();\n          });\n          if (parts.fail.length > 0) {\n            failure(parts.fail.map(unbox));\n          } else {\n            success(parts.pass.map(unbox));\n          }\n        });\n      };\n      return {\n        load: load,\n        loadAll: loadAll\n      };\n    }\n\n    function TreeWalker (startNode, rootNode) {\n      var node = startNode;\n      var findSibling = function (node, startName, siblingName, shallow) {\n        var sibling, parent;\n        if (node) {\n          if (!shallow && node[startName]) {\n            return node[startName];\n          }\n          if (node !== rootNode) {\n            sibling = node[siblingName];\n            if (sibling) {\n              return sibling;\n            }\n            for (parent = node.parentNode; parent && parent !== rootNode; parent = parent.parentNode) {\n              sibling = parent[siblingName];\n              if (sibling) {\n                return sibling;\n              }\n            }\n          }\n        }\n      };\n      var findPreviousNode = function (node, startName, siblingName, shallow) {\n        var sibling, parent, child;\n        if (node) {\n          sibling = node[siblingName];\n          if (rootNode && sibling === rootNode) {\n            return;\n          }\n          if (sibling) {\n            if (!shallow) {\n              for (child = sibling[startName]; child; child = child[startName]) {\n                if (!child[startName]) {\n                  return child;\n                }\n              }\n            }\n            return sibling;\n          }\n          parent = node.parentNode;\n          if (parent && parent !== rootNode) {\n            return parent;\n          }\n        }\n      };\n      this.current = function () {\n        return node;\n      };\n      this.next = function (shallow) {\n        node = findSibling(node, 'firstChild', 'nextSibling', shallow);\n        return node;\n      };\n      this.prev = function (shallow) {\n        node = findSibling(node, 'lastChild', 'previousSibling', shallow);\n        return node;\n      };\n      this.prev2 = function (shallow) {\n        node = findPreviousNode(node, 'lastChild', 'previousSibling', shallow);\n        return node;\n      };\n    }\n\n    var blocks = [\n      'article',\n      'aside',\n      'details',\n      'div',\n      'dt',\n      'figcaption',\n      'footer',\n      'form',\n      'fieldset',\n      'header',\n      'hgroup',\n      'html',\n      'main',\n      'nav',\n      'section',\n      'summary',\n      'body',\n      'p',\n      'dl',\n      'multicol',\n      'dd',\n      'figure',\n      'address',\n      'center',\n      'blockquote',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'listing',\n      'xmp',\n      'pre',\n      'plaintext',\n      'menu',\n      'dir',\n      'ul',\n      'ol',\n      'li',\n      'hr',\n      'table',\n      'tbody',\n      'thead',\n      'tfoot',\n      'th',\n      'tr',\n      'td',\n      'caption'\n    ];\n    var voids = [\n      'area',\n      'base',\n      'basefont',\n      'br',\n      'col',\n      'frame',\n      'hr',\n      'img',\n      'input',\n      'isindex',\n      'link',\n      'meta',\n      'param',\n      'embed',\n      'source',\n      'wbr',\n      'track'\n    ];\n    var tableCells = [\n      'td',\n      'th'\n    ];\n    var tableSections = [\n      'thead',\n      'tbody',\n      'tfoot'\n    ];\n    var textBlocks = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'p',\n      'div',\n      'address',\n      'pre',\n      'form',\n      'blockquote',\n      'center',\n      'dir',\n      'fieldset',\n      'header',\n      'footer',\n      'article',\n      'section',\n      'hgroup',\n      'aside',\n      'nav',\n      'figure'\n    ];\n    var headings = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6'\n    ];\n    var listItems = [\n      'li',\n      'dd',\n      'dt'\n    ];\n    var lists = [\n      'ul',\n      'ol',\n      'dl'\n    ];\n    var wsElements = [\n      'pre',\n      'script',\n      'textarea',\n      'style'\n    ];\n    var lazyLookup = function (items) {\n      var lookup;\n      return function (node) {\n        lookup = lookup ? lookup : mapToObject(items, constant(true));\n        return lookup.hasOwnProperty(name(node));\n      };\n    };\n    var isHeading = lazyLookup(headings);\n    var isBlock = lazyLookup(blocks);\n    var isInline = function (node) {\n      return isElement(node) && !isBlock(node);\n    };\n    var isBr = function (node) {\n      return isElement(node) && name(node) === 'br';\n    };\n    var isTextBlock = lazyLookup(textBlocks);\n    var isList = lazyLookup(lists);\n    var isListItem = lazyLookup(listItems);\n    var isVoid = lazyLookup(voids);\n    var isTableSection = lazyLookup(tableSections);\n    var isTableCell = lazyLookup(tableCells);\n    var isWsPreserveElement = lazyLookup(wsElements);\n\n    var isNodeType = function (type) {\n      return function (node) {\n        return !!node && node.nodeType === type;\n      };\n    };\n    var isRestrictedNode = function (node) {\n      return !!node && !Object.getPrototypeOf(node);\n    };\n    var isElement$1 = isNodeType(1);\n    var matchNodeNames = function (names) {\n      var items = names.toLowerCase().split(' ');\n      return function (node) {\n        var i, name;\n        if (node && node.nodeType) {\n          name = node.nodeName.toLowerCase();\n          for (i = 0; i < items.length; i++) {\n            if (name === items[i]) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n    };\n    var matchStyleValues = function (name, values) {\n      var items = values.toLowerCase().split(' ');\n      return function (node) {\n        var i, cssValue;\n        if (isElement$1(node)) {\n          for (i = 0; i < items.length; i++) {\n            var computed = node.ownerDocument.defaultView.getComputedStyle(node, null);\n            cssValue = computed ? computed.getPropertyValue(name) : null;\n            if (cssValue === items[i]) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n    };\n    var hasPropValue = function (propName, propValue) {\n      return function (node) {\n        return isElement$1(node) && node[propName] === propValue;\n      };\n    };\n    var hasAttribute = function (attrName, attrValue) {\n      return function (node) {\n        return isElement$1(node) && node.hasAttribute(attrName);\n      };\n    };\n    var hasAttributeValue = function (attrName, attrValue) {\n      return function (node) {\n        return isElement$1(node) && node.getAttribute(attrName) === attrValue;\n      };\n    };\n    var isBogus = function (node) {\n      return isElement$1(node) && node.hasAttribute('data-mce-bogus');\n    };\n    var isBogusAll = function (node) {\n      return isElement$1(node) && node.getAttribute('data-mce-bogus') === 'all';\n    };\n    var isTable = function (node) {\n      return isElement$1(node) && node.tagName === 'TABLE';\n    };\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement$1(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isText$1 = isNodeType(3);\n    var isComment = isNodeType(8);\n    var isDocument = isNodeType(9);\n    var isDocumentFragment = isNodeType(11);\n    var isBr$1 = matchNodeNames('br');\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var NodeType = {\n      isText: isText$1,\n      isElement: isElement$1,\n      isComment: isComment,\n      isDocument: isDocument,\n      isDocumentFragment: isDocumentFragment,\n      isBr: isBr$1,\n      isContentEditableTrue: isContentEditableTrue,\n      isContentEditableFalse: isContentEditableFalse,\n      isRestrictedNode: isRestrictedNode,\n      matchNodeNames: matchNodeNames,\n      hasPropValue: hasPropValue,\n      hasAttribute: hasAttribute,\n      hasAttributeValue: hasAttributeValue,\n      matchStyleValues: matchStyleValues,\n      isBogus: isBogus,\n      isBogusAll: isBogusAll,\n      isTable: isTable\n    };\n\n    var surroundedBySpans = function (node) {\n      var previousIsSpan = node.previousSibling && node.previousSibling.nodeName === 'SPAN';\n      var nextIsSpan = node.nextSibling && node.nextSibling.nodeName === 'SPAN';\n      return previousIsSpan && nextIsSpan;\n    };\n    var isBookmarkNode = function (node) {\n      return node && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n    var trimNode = function (dom, node) {\n      var i, children = node.childNodes;\n      if (NodeType.isElement(node) && isBookmarkNode(node)) {\n        return;\n      }\n      for (i = children.length - 1; i >= 0; i--) {\n        trimNode(dom, children[i]);\n      }\n      if (NodeType.isDocument(node) === false) {\n        if (NodeType.isText(node) && node.nodeValue.length > 0) {\n          var trimmedLength = Tools.trim(node.nodeValue).length;\n          if (dom.isBlock(node.parentNode) || trimmedLength > 0) {\n            return;\n          }\n          if (trimmedLength === 0 && surroundedBySpans(node)) {\n            return;\n          }\n        } else if (NodeType.isElement(node)) {\n          children = node.childNodes;\n          if (children.length === 1 && isBookmarkNode(children[0])) {\n            node.parentNode.insertBefore(children[0], node);\n          }\n          if (children.length || isVoid(Element.fromDom(node))) {\n            return;\n          }\n        }\n        dom.remove(node);\n      }\n      return node;\n    };\n    var TrimNode = { trimNode: trimNode };\n\n    var makeMap$1 = Tools.makeMap;\n    var namedEntities, baseEntities, reverseEntities;\n    var attrsCharsRegExp = /[&<>\\\"\\u0060\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var textCharsRegExp = /[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var rawCharsRegExp = /[<>&\\\"\\']/g;\n    var entityRegExp = /&#([a-z0-9]+);?|&([a-z0-9]+);/gi;\n    var asciiMap = {\n      128: '\\u20AC',\n      130: '\\u201A',\n      131: '\\u0192',\n      132: '\\u201E',\n      133: '\\u2026',\n      134: '\\u2020',\n      135: '\\u2021',\n      136: '\\u02c6',\n      137: '\\u2030',\n      138: '\\u0160',\n      139: '\\u2039',\n      140: '\\u0152',\n      142: '\\u017d',\n      145: '\\u2018',\n      146: '\\u2019',\n      147: '\\u201C',\n      148: '\\u201D',\n      149: '\\u2022',\n      150: '\\u2013',\n      151: '\\u2014',\n      152: '\\u02DC',\n      153: '\\u2122',\n      154: '\\u0161',\n      155: '\\u203A',\n      156: '\\u0153',\n      158: '\\u017e',\n      159: '\\u0178'\n    };\n    baseEntities = {\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '`': '&#96;'\n    };\n    reverseEntities = {\n      '&lt;': '<',\n      '&gt;': '>',\n      '&amp;': '&',\n      '&quot;': '\"',\n      '&apos;': '\\''\n    };\n    var nativeDecode = function (text) {\n      var elm;\n      elm = Element.fromTag('div').dom();\n      elm.innerHTML = text;\n      return elm.textContent || elm.innerText || text;\n    };\n    var buildEntitiesLookup = function (items, radix) {\n      var i, chr, entity;\n      var lookup = {};\n      if (items) {\n        items = items.split(',');\n        radix = radix || 10;\n        for (i = 0; i < items.length; i += 2) {\n          chr = String.fromCharCode(parseInt(items[i], radix));\n          if (!baseEntities[chr]) {\n            entity = '&' + items[i + 1] + ';';\n            lookup[chr] = entity;\n            lookup[entity] = chr;\n          }\n        }\n        return lookup;\n      }\n    };\n    namedEntities = buildEntitiesLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' + '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' + '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' + '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' + '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' + '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' + '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' + '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' + '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' + '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' + 'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' + 'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' + 't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' + 'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' + 'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' + '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' + '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' + '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' + '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' + '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' + 'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' + 'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' + 'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' + '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' + '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);\n    var encodeRaw = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeAllRaw = function (text) {\n      return ('' + text).replace(rawCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeNumeric = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        if (chr.length > 1) {\n          return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n        }\n        return baseEntities[chr] || '&#' + chr.charCodeAt(0) + ';';\n      });\n    };\n    var encodeNamed = function (text, attr, entities) {\n      entities = entities || namedEntities;\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || entities[chr] || chr;\n      });\n    };\n    var getEncodeFunc = function (name, entities) {\n      var entitiesMap = buildEntitiesLookup(entities) || namedEntities;\n      var encodeNamedAndNumeric = function (text, attr) {\n        return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n          if (baseEntities[chr] !== undefined) {\n            return baseEntities[chr];\n          }\n          if (entitiesMap[chr] !== undefined) {\n            return entitiesMap[chr];\n          }\n          if (chr.length > 1) {\n            return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n          }\n          return '&#' + chr.charCodeAt(0) + ';';\n        });\n      };\n      var encodeCustomNamed = function (text, attr) {\n        return encodeNamed(text, attr, entitiesMap);\n      };\n      var nameMap = makeMap$1(name.replace(/\\+/g, ','));\n      if (nameMap.named && nameMap.numeric) {\n        return encodeNamedAndNumeric;\n      }\n      if (nameMap.named) {\n        if (entities) {\n          return encodeCustomNamed;\n        }\n        return encodeNamed;\n      }\n      if (nameMap.numeric) {\n        return encodeNumeric;\n      }\n      return encodeRaw;\n    };\n    var decode = function (text) {\n      return text.replace(entityRegExp, function (all, numeric) {\n        if (numeric) {\n          if (numeric.charAt(0).toLowerCase() === 'x') {\n            numeric = parseInt(numeric.substr(1), 16);\n          } else {\n            numeric = parseInt(numeric, 10);\n          }\n          if (numeric > 65535) {\n            numeric -= 65536;\n            return String.fromCharCode(55296 + (numeric >> 10), 56320 + (numeric & 1023));\n          }\n          return asciiMap[numeric] || String.fromCharCode(numeric);\n        }\n        return reverseEntities[all] || namedEntities[all] || nativeDecode(all);\n      });\n    };\n    var Entities = {\n      encodeRaw: encodeRaw,\n      encodeAllRaw: encodeAllRaw,\n      encodeNumeric: encodeNumeric,\n      encodeNamed: encodeNamed,\n      getEncodeFunc: getEncodeFunc,\n      decode: decode\n    };\n\n    var mapCache = {}, dummyObj = {};\n    var makeMap$2 = Tools.makeMap, each$4 = Tools.each, extend$1 = Tools.extend, explode$1 = Tools.explode, inArray$1 = Tools.inArray;\n    var split = function (items, delim) {\n      items = Tools.trim(items);\n      return items ? items.split(delim || ' ') : [];\n    };\n    var compileSchema = function (type) {\n      var schema = {};\n      var globalAttributes, blockContent;\n      var phrasingContent, flowContent, html4BlockContent, html4PhrasingContent;\n      var add = function (name, attributes, children) {\n        var ni, attributesOrder, element;\n        var arrayToMap = function (array, obj) {\n          var map = {};\n          var i, l;\n          for (i = 0, l = array.length; i < l; i++) {\n            map[array[i]] = obj || {};\n          }\n          return map;\n        };\n        children = children || [];\n        attributes = attributes || '';\n        if (typeof children === 'string') {\n          children = split(children);\n        }\n        name = split(name);\n        ni = name.length;\n        while (ni--) {\n          attributesOrder = split([\n            globalAttributes,\n            attributes\n          ].join(' '));\n          element = {\n            attributes: arrayToMap(attributesOrder),\n            attributesOrder: attributesOrder,\n            children: arrayToMap(children, dummyObj)\n          };\n          schema[name[ni]] = element;\n        }\n      };\n      var addAttrs = function (name, attributes) {\n        var ni, schemaItem, i, l;\n        name = split(name);\n        ni = name.length;\n        attributes = split(attributes);\n        while (ni--) {\n          schemaItem = schema[name[ni]];\n          for (i = 0, l = attributes.length; i < l; i++) {\n            schemaItem.attributes[attributes[i]] = {};\n            schemaItem.attributesOrder.push(attributes[i]);\n          }\n        }\n      };\n      if (mapCache[type]) {\n        return mapCache[type];\n      }\n      globalAttributes = 'id accesskey class dir lang style tabindex title role';\n      blockContent = 'address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul';\n      phrasingContent = 'a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd ' + 'label map noscript object q s samp script select small span strong sub sup ' + 'textarea u var #text #comment';\n      if (type !== 'html4') {\n        globalAttributes += ' contenteditable contextmenu draggable dropzone ' + 'hidden spellcheck translate';\n        blockContent += ' article aside details dialog figure main header footer hgroup section nav';\n        phrasingContent += ' audio canvas command datalist mark meter output picture ' + 'progress time wbr video ruby bdi keygen';\n      }\n      if (type !== 'html5-strict') {\n        globalAttributes += ' xml:lang';\n        html4PhrasingContent = 'acronym applet basefont big font strike tt';\n        phrasingContent = [\n          phrasingContent,\n          html4PhrasingContent\n        ].join(' ');\n        each$4(split(html4PhrasingContent), function (name) {\n          add(name, '', phrasingContent);\n        });\n        html4BlockContent = 'center dir isindex noframes';\n        blockContent = [\n          blockContent,\n          html4BlockContent\n        ].join(' ');\n        flowContent = [\n          blockContent,\n          phrasingContent\n        ].join(' ');\n        each$4(split(html4BlockContent), function (name) {\n          add(name, '', flowContent);\n        });\n      }\n      flowContent = flowContent || [\n        blockContent,\n        phrasingContent\n      ].join(' ');\n      add('html', 'manifest', 'head body');\n      add('head', '', 'base command link meta noscript script style title');\n      add('title hr noscript br');\n      add('base', 'href target');\n      add('link', 'href rel media hreflang type sizes hreflang');\n      add('meta', 'name http-equiv content charset');\n      add('style', 'media type scoped');\n      add('script', 'src async defer type charset');\n      add('body', 'onafterprint onbeforeprint onbeforeunload onblur onerror onfocus ' + 'onhashchange onload onmessage onoffline ononline onpagehide onpageshow ' + 'onpopstate onresize onscroll onstorage onunload', flowContent);\n      add('address dt dd div caption', '', flowContent);\n      add('h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn', '', phrasingContent);\n      add('blockquote', 'cite', flowContent);\n      add('ol', 'reversed start type', 'li');\n      add('ul', '', 'li');\n      add('li', 'value', flowContent);\n      add('dl', '', 'dt dd');\n      add('a', 'href target rel media hreflang type', phrasingContent);\n      add('q', 'cite', phrasingContent);\n      add('ins del', 'cite datetime', flowContent);\n      add('img', 'src sizes srcset alt usemap ismap width height');\n      add('iframe', 'src name width height', flowContent);\n      add('embed', 'src type width height');\n      add('object', 'data type typemustmatch name usemap form width height', [\n        flowContent,\n        'param'\n      ].join(' '));\n      add('param', 'name value');\n      add('map', 'name', [\n        flowContent,\n        'area'\n      ].join(' '));\n      add('area', 'alt coords shape href target rel media hreflang type');\n      add('table', 'border', 'caption colgroup thead tfoot tbody tr' + (type === 'html4' ? ' col' : ''));\n      add('colgroup', 'span', 'col');\n      add('col', 'span');\n      add('tbody thead tfoot', '', 'tr');\n      add('tr', '', 'td th');\n      add('td', 'colspan rowspan headers', flowContent);\n      add('th', 'colspan rowspan headers scope abbr', flowContent);\n      add('form', 'accept-charset action autocomplete enctype method name novalidate target', flowContent);\n      add('fieldset', 'disabled form name', [\n        flowContent,\n        'legend'\n      ].join(' '));\n      add('label', 'form for', phrasingContent);\n      add('input', 'accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate ' + 'formtarget height list max maxlength min multiple name pattern readonly required size src step type value width');\n      add('button', 'disabled form formaction formenctype formmethod formnovalidate formtarget name type value', type === 'html4' ? flowContent : phrasingContent);\n      add('select', 'disabled form multiple name required size', 'option optgroup');\n      add('optgroup', 'disabled label', 'option');\n      add('option', 'disabled label selected value');\n      add('textarea', 'cols dirname disabled form maxlength name readonly required rows wrap');\n      add('menu', 'type label', [\n        flowContent,\n        'li'\n      ].join(' '));\n      add('noscript', '', flowContent);\n      if (type !== 'html4') {\n        add('wbr');\n        add('ruby', '', [\n          phrasingContent,\n          'rt rp'\n        ].join(' '));\n        add('figcaption', '', flowContent);\n        add('mark rt rp summary bdi', '', phrasingContent);\n        add('canvas', 'width height', flowContent);\n        add('video', 'src crossorigin poster preload autoplay mediagroup loop ' + 'muted controls width height buffered', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('audio', 'src crossorigin preload autoplay mediagroup loop muted controls ' + 'buffered volume', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('picture', '', 'img source');\n        add('source', 'src srcset type media sizes');\n        add('track', 'kind src srclang label default');\n        add('datalist', '', [\n          phrasingContent,\n          'option'\n        ].join(' '));\n        add('article section nav aside main header footer', '', flowContent);\n        add('hgroup', '', 'h1 h2 h3 h4 h5 h6');\n        add('figure', '', [\n          flowContent,\n          'figcaption'\n        ].join(' '));\n        add('time', 'datetime', phrasingContent);\n        add('dialog', 'open', flowContent);\n        add('command', 'type label icon disabled checked radiogroup command');\n        add('output', 'for form name', phrasingContent);\n        add('progress', 'value max', phrasingContent);\n        add('meter', 'value min max low high optimum', phrasingContent);\n        add('details', 'open', [\n          flowContent,\n          'summary'\n        ].join(' '));\n        add('keygen', 'autofocus challenge disabled form keytype name');\n      }\n      if (type !== 'html5-strict') {\n        addAttrs('script', 'language xml:space');\n        addAttrs('style', 'xml:space');\n        addAttrs('object', 'declare classid code codebase codetype archive standby align border hspace vspace');\n        addAttrs('embed', 'align name hspace vspace');\n        addAttrs('param', 'valuetype type');\n        addAttrs('a', 'charset name rev shape coords');\n        addAttrs('br', 'clear');\n        addAttrs('applet', 'codebase archive code object alt name width height align hspace vspace');\n        addAttrs('img', 'name longdesc align border hspace vspace');\n        addAttrs('iframe', 'longdesc frameborder marginwidth marginheight scrolling align');\n        addAttrs('font basefont', 'size color face');\n        addAttrs('input', 'usemap align');\n        addAttrs('select', 'onchange');\n        addAttrs('textarea');\n        addAttrs('h1 h2 h3 h4 h5 h6 div p legend caption', 'align');\n        addAttrs('ul', 'type compact');\n        addAttrs('li', 'type');\n        addAttrs('ol dl menu dir', 'compact');\n        addAttrs('pre', 'width xml:space');\n        addAttrs('hr', 'align noshade size width');\n        addAttrs('isindex', 'prompt');\n        addAttrs('table', 'summary width frame rules cellspacing cellpadding align bgcolor');\n        addAttrs('col', 'width align char charoff valign');\n        addAttrs('colgroup', 'width align char charoff valign');\n        addAttrs('thead', 'align char charoff valign');\n        addAttrs('tr', 'align char charoff valign bgcolor');\n        addAttrs('th', 'axis align char charoff valign nowrap bgcolor width height');\n        addAttrs('form', 'accept');\n        addAttrs('td', 'abbr axis scope align char charoff valign nowrap bgcolor width height');\n        addAttrs('tfoot', 'align char charoff valign');\n        addAttrs('tbody', 'align char charoff valign');\n        addAttrs('area', 'nohref');\n        addAttrs('body', 'background bgcolor text link vlink alink');\n      }\n      if (type !== 'html4') {\n        addAttrs('input button select textarea', 'autofocus');\n        addAttrs('input textarea', 'placeholder');\n        addAttrs('a', 'download');\n        addAttrs('link script img', 'crossorigin');\n        addAttrs('iframe', 'sandbox seamless allowfullscreen');\n      }\n      each$4(split('a form meter progress dfn'), function (name) {\n        if (schema[name]) {\n          delete schema[name].children[name];\n        }\n      });\n      delete schema.caption.children.table;\n      delete schema.script;\n      mapCache[type] = schema;\n      return schema;\n    };\n    var compileElementMap = function (value, mode) {\n      var styles;\n      if (value) {\n        styles = {};\n        if (typeof value === 'string') {\n          value = { '*': value };\n        }\n        each$4(value, function (value, key) {\n          styles[key] = styles[key.toUpperCase()] = mode === 'map' ? makeMap$2(value, /[, ]/) : explode$1(value, /[, ]/);\n        });\n      }\n      return styles;\n    };\n    function Schema(settings) {\n      var elements = {};\n      var children = {};\n      var patternElements = [];\n      var validStyles;\n      var invalidStyles;\n      var schemaItems;\n      var whiteSpaceElementsMap, selfClosingElementsMap, shortEndedElementsMap, boolAttrMap, validClasses;\n      var blockElementsMap, nonEmptyElementsMap, moveCaretBeforeOnEnterElementsMap, textBlockElementsMap, textInlineElementsMap;\n      var customElementsMap = {}, specialElements = {};\n      var createLookupTable = function (option, defaultValue, extendWith) {\n        var value = settings[option];\n        if (!value) {\n          value = mapCache[option];\n          if (!value) {\n            value = makeMap$2(defaultValue, ' ', makeMap$2(defaultValue.toUpperCase(), ' '));\n            value = extend$1(value, extendWith);\n            mapCache[option] = value;\n          }\n        } else {\n          value = makeMap$2(value, /[, ]/, makeMap$2(value.toUpperCase(), /[, ]/));\n        }\n        return value;\n      };\n      settings = settings || {};\n      schemaItems = compileSchema(settings.schema);\n      if (settings.verify_html === false) {\n        settings.valid_elements = '*[*]';\n      }\n      validStyles = compileElementMap(settings.valid_styles);\n      invalidStyles = compileElementMap(settings.invalid_styles, 'map');\n      validClasses = compileElementMap(settings.valid_classes, 'map');\n      whiteSpaceElementsMap = createLookupTable('whitespace_elements', 'pre script noscript style textarea video audio iframe object code');\n      selfClosingElementsMap = createLookupTable('self_closing_elements', 'colgroup dd dt li option p td tfoot th thead tr');\n      shortEndedElementsMap = createLookupTable('short_ended_elements', 'area base basefont br col frame hr img input isindex link ' + 'meta param embed source wbr track');\n      boolAttrMap = createLookupTable('boolean_attributes', 'checked compact declare defer disabled ismap multiple nohref noresize ' + 'noshade nowrap readonly selected autoplay loop controls');\n      nonEmptyElementsMap = createLookupTable('non_empty_elements', 'td th iframe video audio object ' + 'script pre code', shortEndedElementsMap);\n      moveCaretBeforeOnEnterElementsMap = createLookupTable('move_caret_before_on_enter_elements', 'table', nonEmptyElementsMap);\n      textBlockElementsMap = createLookupTable('text_block_elements', 'h1 h2 h3 h4 h5 h6 p div address pre form ' + 'blockquote center dir fieldset header footer article section hgroup aside main nav figure');\n      blockElementsMap = createLookupTable('block_elements', 'hr table tbody thead tfoot ' + 'th tr td li ol ul caption dl dt dd noscript menu isindex option ' + 'datalist select optgroup figcaption details summary', textBlockElementsMap);\n      textInlineElementsMap = createLookupTable('text_inline_elements', 'span strong b em i font strike u var cite ' + 'dfn code mark q sup sub samp');\n      each$4((settings.special || 'script noscript iframe noframes noembed title style textarea xmp').split(' '), function (name) {\n        specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n      });\n      var patternToRegExp = function (str) {\n        return new RegExp('^' + str.replace(/([?+*])/g, '.$1') + '$');\n      };\n      var addValidElements = function (validElements) {\n        var ei, el, ai, al, matches, element, attr, attrData, elementName, attrName, attrType, attributes, attributesOrder, prefix, outputName, globalAttributes, globalAttributesOrder, key, value;\n        var elementRuleRegExp = /^([#+\\-])?([^\\[!\\/]+)(?:\\/([^\\[!]+))?(?:(!?)\\[([^\\]]+)\\])?$/, attrRuleRegExp = /^([!\\-])?(\\w+[\\\\:]:\\w+|[^=:<]+)?(?:([=:<])(.*))?$/, hasPatternsRegExp = /[*?+]/;\n        if (validElements) {\n          validElements = split(validElements, ',');\n          if (elements['@']) {\n            globalAttributes = elements['@'].attributes;\n            globalAttributesOrder = elements['@'].attributesOrder;\n          }\n          for (ei = 0, el = validElements.length; ei < el; ei++) {\n            matches = elementRuleRegExp.exec(validElements[ei]);\n            if (matches) {\n              prefix = matches[1];\n              elementName = matches[2];\n              outputName = matches[3];\n              attrData = matches[5];\n              attributes = {};\n              attributesOrder = [];\n              element = {\n                attributes: attributes,\n                attributesOrder: attributesOrder\n              };\n              if (prefix === '#') {\n                element.paddEmpty = true;\n              }\n              if (prefix === '-') {\n                element.removeEmpty = true;\n              }\n              if (matches[4] === '!') {\n                element.removeEmptyAttrs = true;\n              }\n              if (globalAttributes) {\n                for (key in globalAttributes) {\n                  attributes[key] = globalAttributes[key];\n                }\n                attributesOrder.push.apply(attributesOrder, globalAttributesOrder);\n              }\n              if (attrData) {\n                attrData = split(attrData, '|');\n                for (ai = 0, al = attrData.length; ai < al; ai++) {\n                  matches = attrRuleRegExp.exec(attrData[ai]);\n                  if (matches) {\n                    attr = {};\n                    attrType = matches[1];\n                    attrName = matches[2].replace(/[\\\\:]:/g, ':');\n                    prefix = matches[3];\n                    value = matches[4];\n                    if (attrType === '!') {\n                      element.attributesRequired = element.attributesRequired || [];\n                      element.attributesRequired.push(attrName);\n                      attr.required = true;\n                    }\n                    if (attrType === '-') {\n                      delete attributes[attrName];\n                      attributesOrder.splice(inArray$1(attributesOrder, attrName), 1);\n                      continue;\n                    }\n                    if (prefix) {\n                      if (prefix === '=') {\n                        element.attributesDefault = element.attributesDefault || [];\n                        element.attributesDefault.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.defaultValue = value;\n                      }\n                      if (prefix === ':') {\n                        element.attributesForced = element.attributesForced || [];\n                        element.attributesForced.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.forcedValue = value;\n                      }\n                      if (prefix === '<') {\n                        attr.validValues = makeMap$2(value, '?');\n                      }\n                    }\n                    if (hasPatternsRegExp.test(attrName)) {\n                      element.attributePatterns = element.attributePatterns || [];\n                      attr.pattern = patternToRegExp(attrName);\n                      element.attributePatterns.push(attr);\n                    } else {\n                      if (!attributes[attrName]) {\n                        attributesOrder.push(attrName);\n                      }\n                      attributes[attrName] = attr;\n                    }\n                  }\n                }\n              }\n              if (!globalAttributes && elementName === '@') {\n                globalAttributes = attributes;\n                globalAttributesOrder = attributesOrder;\n              }\n              if (outputName) {\n                element.outputName = elementName;\n                elements[outputName] = element;\n              }\n              if (hasPatternsRegExp.test(elementName)) {\n                element.pattern = patternToRegExp(elementName);\n                patternElements.push(element);\n              } else {\n                elements[elementName] = element;\n              }\n            }\n          }\n        }\n      };\n      var setValidElements = function (validElements) {\n        elements = {};\n        patternElements = [];\n        addValidElements(validElements);\n        each$4(schemaItems, function (element, name) {\n          children[name] = element.children;\n        });\n      };\n      var addCustomElements = function (customElements) {\n        var customElementRegExp = /^(~)?(.+)$/;\n        if (customElements) {\n          mapCache.text_block_elements = mapCache.block_elements = null;\n          each$4(split(customElements, ','), function (rule) {\n            var matches = customElementRegExp.exec(rule), inline = matches[1] === '~', cloneName = inline ? 'span' : 'div', name = matches[2];\n            children[name] = children[cloneName];\n            customElementsMap[name] = cloneName;\n            if (!inline) {\n              blockElementsMap[name.toUpperCase()] = {};\n              blockElementsMap[name] = {};\n            }\n            if (!elements[name]) {\n              var customRule = elements[cloneName];\n              customRule = extend$1({}, customRule);\n              delete customRule.removeEmptyAttrs;\n              delete customRule.removeEmpty;\n              elements[name] = customRule;\n            }\n            each$4(children, function (element, elmName) {\n              if (element[cloneName]) {\n                children[elmName] = element = extend$1({}, children[elmName]);\n                element[name] = element[cloneName];\n              }\n            });\n          });\n        }\n      };\n      var addValidChildren = function (validChildren) {\n        var childRuleRegExp = /^([+\\-]?)(\\w+)\\[([^\\]]+)\\]$/;\n        mapCache[settings.schema] = null;\n        if (validChildren) {\n          each$4(split(validChildren, ','), function (rule) {\n            var matches = childRuleRegExp.exec(rule);\n            var parent, prefix;\n            if (matches) {\n              prefix = matches[1];\n              if (prefix) {\n                parent = children[matches[2]];\n              } else {\n                parent = children[matches[2]] = { '#comment': {} };\n              }\n              parent = children[matches[2]];\n              each$4(split(matches[3], '|'), function (child) {\n                if (prefix === '-') {\n                  delete parent[child];\n                } else {\n                  parent[child] = {};\n                }\n              });\n            }\n          });\n        }\n      };\n      var getElementRule = function (name) {\n        var element = elements[name], i;\n        if (element) {\n          return element;\n        }\n        i = patternElements.length;\n        while (i--) {\n          element = patternElements[i];\n          if (element.pattern.test(name)) {\n            return element;\n          }\n        }\n      };\n      if (!settings.valid_elements) {\n        each$4(schemaItems, function (element, name) {\n          elements[name] = {\n            attributes: element.attributes,\n            attributesOrder: element.attributesOrder\n          };\n          children[name] = element.children;\n        });\n        if (settings.schema !== 'html5') {\n          each$4(split('strong/b em/i'), function (item) {\n            item = split(item, '/');\n            elements[item[1]].outputName = item[0];\n          });\n        }\n        each$4(split('ol ul sub sup blockquote span font a table tbody tr strong em b i'), function (name) {\n          if (elements[name]) {\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$4(split('p h1 h2 h3 h4 h5 h6 th td pre div address caption li'), function (name) {\n          elements[name].paddEmpty = true;\n        });\n        each$4(split('span'), function (name) {\n          elements[name].removeEmptyAttrs = true;\n        });\n      } else {\n        setValidElements(settings.valid_elements);\n      }\n      addCustomElements(settings.custom_elements);\n      addValidChildren(settings.valid_children);\n      addValidElements(settings.extended_valid_elements);\n      addValidChildren('+ol[ul|ol],+ul[ul|ol]');\n      each$4({\n        dd: 'dl',\n        dt: 'dl',\n        li: 'ul ol',\n        td: 'tr',\n        th: 'tr',\n        tr: 'tbody thead tfoot',\n        tbody: 'table',\n        thead: 'table',\n        tfoot: 'table',\n        legend: 'fieldset',\n        area: 'map',\n        param: 'video audio object'\n      }, function (parents, item) {\n        if (elements[item]) {\n          elements[item].parentsRequired = split(parents);\n        }\n      });\n      if (settings.invalid_elements) {\n        each$4(explode$1(settings.invalid_elements), function (item) {\n          if (elements[item]) {\n            delete elements[item];\n          }\n        });\n      }\n      if (!getElementRule('span')) {\n        addValidElements('span[!data-mce-type|*]');\n      }\n      var getValidStyles = function () {\n        return validStyles;\n      };\n      var getInvalidStyles = function () {\n        return invalidStyles;\n      };\n      var getValidClasses = function () {\n        return validClasses;\n      };\n      var getBoolAttrs = function () {\n        return boolAttrMap;\n      };\n      var getBlockElements = function () {\n        return blockElementsMap;\n      };\n      var getTextBlockElements = function () {\n        return textBlockElementsMap;\n      };\n      var getTextInlineElements = function () {\n        return textInlineElementsMap;\n      };\n      var getShortEndedElements = function () {\n        return shortEndedElementsMap;\n      };\n      var getSelfClosingElements = function () {\n        return selfClosingElementsMap;\n      };\n      var getNonEmptyElements = function () {\n        return nonEmptyElementsMap;\n      };\n      var getMoveCaretBeforeOnEnterElements = function () {\n        return moveCaretBeforeOnEnterElementsMap;\n      };\n      var getWhiteSpaceElements = function () {\n        return whiteSpaceElementsMap;\n      };\n      var getSpecialElements = function () {\n        return specialElements;\n      };\n      var isValidChild = function (name, child) {\n        var parent = children[name.toLowerCase()];\n        return !!(parent && parent[child.toLowerCase()]);\n      };\n      var isValid = function (name, attr) {\n        var attrPatterns, i;\n        var rule = getElementRule(name);\n        if (rule) {\n          if (attr) {\n            if (rule.attributes[attr]) {\n              return true;\n            }\n            attrPatterns = rule.attributePatterns;\n            if (attrPatterns) {\n              i = attrPatterns.length;\n              while (i--) {\n                if (attrPatterns[i].pattern.test(name)) {\n                  return true;\n                }\n              }\n            }\n          } else {\n            return true;\n          }\n        }\n        return false;\n      };\n      var getCustomElements = function () {\n        return customElementsMap;\n      };\n      return {\n        children: children,\n        elements: elements,\n        getValidStyles: getValidStyles,\n        getValidClasses: getValidClasses,\n        getBlockElements: getBlockElements,\n        getInvalidStyles: getInvalidStyles,\n        getShortEndedElements: getShortEndedElements,\n        getTextBlockElements: getTextBlockElements,\n        getTextInlineElements: getTextInlineElements,\n        getBoolAttrs: getBoolAttrs,\n        getElementRule: getElementRule,\n        getSelfClosingElements: getSelfClosingElements,\n        getNonEmptyElements: getNonEmptyElements,\n        getMoveCaretBeforeOnEnterElements: getMoveCaretBeforeOnEnterElements,\n        getWhiteSpaceElements: getWhiteSpaceElements,\n        getSpecialElements: getSpecialElements,\n        isValidChild: isValidChild,\n        isValid: isValid,\n        getCustomElements: getCustomElements,\n        addValidElements: addValidElements,\n        setValidElements: setValidElements,\n        addCustomElements: addCustomElements,\n        addValidChildren: addValidChildren\n      };\n    }\n\n    var toHex = function (match, r, g, b) {\n      var hex = function (val) {\n        val = parseInt(val, 10).toString(16);\n        return val.length > 1 ? val : '0' + val;\n      };\n      return '#' + hex(r) + hex(g) + hex(b);\n    };\n    function Styles(settings, schema) {\n      var rgbRegExp = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi;\n      var urlOrStrRegExp = /(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi;\n      var styleRegExp = /\\s*([^:]+):\\s*([^;]+);?/g;\n      var trimRightRegExp = /\\s+$/;\n      var i;\n      var encodingLookup = {};\n      var encodingItems;\n      var validStyles;\n      var invalidStyles;\n      var invisibleChar = '\\uFEFF';\n      settings = settings || {};\n      if (schema) {\n        validStyles = schema.getValidStyles();\n        invalidStyles = schema.getInvalidStyles();\n      }\n      encodingItems = ('\\\\\" \\\\\\' \\\\; \\\\: ; : ' + invisibleChar).split(' ');\n      for (i = 0; i < encodingItems.length; i++) {\n        encodingLookup[encodingItems[i]] = invisibleChar + i;\n        encodingLookup[invisibleChar + i] = encodingItems[i];\n      }\n      return {\n        toHex: function (color) {\n          return color.replace(rgbRegExp, toHex);\n        },\n        parse: function (css) {\n          var styles = {};\n          var matches, name, value, isEncoded;\n          var urlConverter = settings.url_converter;\n          var urlConverterScope = settings.url_converter_scope || this;\n          var compress = function (prefix, suffix, noJoin) {\n            var top, right, bottom, left;\n            top = styles[prefix + '-top' + suffix];\n            if (!top) {\n              return;\n            }\n            right = styles[prefix + '-right' + suffix];\n            if (!right) {\n              return;\n            }\n            bottom = styles[prefix + '-bottom' + suffix];\n            if (!bottom) {\n              return;\n            }\n            left = styles[prefix + '-left' + suffix];\n            if (!left) {\n              return;\n            }\n            var box = [\n              top,\n              right,\n              bottom,\n              left\n            ];\n            i = box.length - 1;\n            while (i--) {\n              if (box[i] !== box[i + 1]) {\n                break;\n              }\n            }\n            if (i > -1 && noJoin) {\n              return;\n            }\n            styles[prefix + suffix] = i === -1 ? box[0] : box.join(' ');\n            delete styles[prefix + '-top' + suffix];\n            delete styles[prefix + '-right' + suffix];\n            delete styles[prefix + '-bottom' + suffix];\n            delete styles[prefix + '-left' + suffix];\n          };\n          var canCompress = function (key) {\n            var value = styles[key], i;\n            if (!value) {\n              return;\n            }\n            value = value.split(' ');\n            i = value.length;\n            while (i--) {\n              if (value[i] !== value[0]) {\n                return false;\n              }\n            }\n            styles[key] = value[0];\n            return true;\n          };\n          var compress2 = function (target, a, b, c) {\n            if (!canCompress(a)) {\n              return;\n            }\n            if (!canCompress(b)) {\n              return;\n            }\n            if (!canCompress(c)) {\n              return;\n            }\n            styles[target] = styles[a] + ' ' + styles[b] + ' ' + styles[c];\n            delete styles[a];\n            delete styles[b];\n            delete styles[c];\n          };\n          var encode = function (str) {\n            isEncoded = true;\n            return encodingLookup[str];\n          };\n          var decode = function (str, keepSlashes) {\n            if (isEncoded) {\n              str = str.replace(/\\uFEFF[0-9]/g, function (str) {\n                return encodingLookup[str];\n              });\n            }\n            if (!keepSlashes) {\n              str = str.replace(/\\\\([\\'\\\";:])/g, '$1');\n            }\n            return str;\n          };\n          var decodeSingleHexSequence = function (escSeq) {\n            return String.fromCharCode(parseInt(escSeq.slice(1), 16));\n          };\n          var decodeHexSequences = function (value) {\n            return value.replace(/\\\\[0-9a-f]+/gi, decodeSingleHexSequence);\n          };\n          var processUrl = function (match, url, url2, url3, str, str2) {\n            str = str || str2;\n            if (str) {\n              str = decode(str);\n              return '\\'' + str.replace(/\\'/g, '\\\\\\'') + '\\'';\n            }\n            url = decode(url || url2 || url3);\n            if (!settings.allow_script_urls) {\n              var scriptUrl = url.replace(/[\\s\\r\\n]+/g, '');\n              if (/(java|vb)script:/i.test(scriptUrl)) {\n                return '';\n              }\n              if (!settings.allow_svg_data_urls && /^data:image\\/svg/i.test(scriptUrl)) {\n                return '';\n              }\n            }\n            if (urlConverter) {\n              url = urlConverter.call(urlConverterScope, url, 'style');\n            }\n            return 'url(\\'' + url.replace(/\\'/g, '\\\\\\'') + '\\')';\n          };\n          if (css) {\n            css = css.replace(/[\\u0000-\\u001F]/g, '');\n            css = css.replace(/\\\\[\\\"\\';:\\uFEFF]/g, encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g, function (str) {\n              return str.replace(/[;:]/g, encode);\n            });\n            while (matches = styleRegExp.exec(css)) {\n              styleRegExp.lastIndex = matches.index + matches[0].length;\n              name = matches[1].replace(trimRightRegExp, '').toLowerCase();\n              value = matches[2].replace(trimRightRegExp, '');\n              if (name && value) {\n                name = decodeHexSequences(name);\n                value = decodeHexSequences(value);\n                if (name.indexOf(invisibleChar) !== -1 || name.indexOf('\"') !== -1) {\n                  continue;\n                }\n                if (!settings.allow_script_urls && (name === 'behavior' || /expression\\s*\\(|\\/\\*|\\*\\//.test(value))) {\n                  continue;\n                }\n                if (name === 'font-weight' && value === '700') {\n                  value = 'bold';\n                } else if (name === 'color' || name === 'background-color') {\n                  value = value.toLowerCase();\n                }\n                value = value.replace(rgbRegExp, toHex);\n                value = value.replace(urlOrStrRegExp, processUrl);\n                styles[name] = isEncoded ? decode(value, true) : value;\n              }\n            }\n            compress('border', '', true);\n            compress('border', '-width');\n            compress('border', '-color');\n            compress('border', '-style');\n            compress('padding', '');\n            compress('margin', '');\n            compress2('border', 'border-width', 'border-style', 'border-color');\n            if (styles.border === 'medium none') {\n              delete styles.border;\n            }\n            if (styles['border-image'] === 'none') {\n              delete styles['border-image'];\n            }\n          }\n          return styles;\n        },\n        serialize: function (styles, elementName) {\n          var css = '', name, value;\n          var serializeStyles = function (name) {\n            var styleList, i, l, value;\n            styleList = validStyles[name];\n            if (styleList) {\n              for (i = 0, l = styleList.length; i < l; i++) {\n                name = styleList[i];\n                value = styles[name];\n                if (value) {\n                  css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n                }\n              }\n            }\n          };\n          var isValid = function (name, elementName) {\n            var styleMap;\n            styleMap = invalidStyles['*'];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            styleMap = invalidStyles[elementName];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            return true;\n          };\n          if (elementName && validStyles) {\n            serializeStyles('*');\n            serializeStyles(elementName);\n          } else {\n            for (name in styles) {\n              value = styles[name];\n              if (value && (!invalidStyles || isValid(name, elementName))) {\n                css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n              }\n            }\n          }\n          return css;\n        }\n      };\n    }\n\n    var each$5 = Tools.each;\n    var grep$1 = Tools.grep;\n    var isIE = Env.ie;\n    var simpleSelectorRe = /^([a-z0-9],?)+$/i;\n    var whiteSpaceRegExp$2 = /^[ \\t\\r\\n]*$/;\n    var setupAttrHooks = function (styles, settings, getContext) {\n      var attrHooks = {};\n      var keepValues = settings.keep_values;\n      var keepUrlHook = {\n        set: function ($elm, value, name) {\n          if (settings.url_converter) {\n            value = settings.url_converter.call(settings.url_converter_scope || getContext(), value, name, $elm[0]);\n          }\n          $elm.attr('data-mce-' + name, value).attr(name, value);\n        },\n        get: function ($elm, name) {\n          return $elm.attr('data-mce-' + name) || $elm.attr(name);\n        }\n      };\n      attrHooks = {\n        style: {\n          set: function ($elm, value) {\n            if (value !== null && typeof value === 'object') {\n              $elm.css(value);\n              return;\n            }\n            if (keepValues) {\n              $elm.attr('data-mce-style', value);\n            }\n            $elm.attr('style', value);\n          },\n          get: function ($elm) {\n            var value = $elm.attr('data-mce-style') || $elm.attr('style');\n            value = styles.serialize(styles.parse(value), $elm[0].nodeName);\n            return value;\n          }\n        }\n      };\n      if (keepValues) {\n        attrHooks.href = attrHooks.src = keepUrlHook;\n      }\n      return attrHooks;\n    };\n    var updateInternalStyleAttr = function (styles, $elm) {\n      var rawValue = $elm.attr('style');\n      var value = styles.serialize(styles.parse(rawValue), $elm[0].nodeName);\n      if (!value) {\n        value = null;\n      }\n      $elm.attr('data-mce-style', value);\n    };\n    var findNodeIndex = function (node, normalized) {\n      var idx = 0, lastNodeType, nodeType;\n      if (node) {\n        for (lastNodeType = node.nodeType, node = node.previousSibling; node; node = node.previousSibling) {\n          nodeType = node.nodeType;\n          if (normalized && nodeType === 3) {\n            if (nodeType === lastNodeType || !node.nodeValue.length) {\n              continue;\n            }\n          }\n          idx++;\n          lastNodeType = nodeType;\n        }\n      }\n      return idx;\n    };\n    function DOMUtils(doc, settings) {\n      var _this = this;\n      if (settings === void 0) {\n        settings = {};\n      }\n      var attrHooks;\n      var addedStyles = {};\n      var win = domGlobals.window;\n      var files = {};\n      var counter = 0;\n      var stdMode = true;\n      var boxModel = true;\n      var styleSheetLoader = StyleSheetLoader(doc, { contentCssCors: settings.contentCssCors });\n      var boundEvents = [];\n      var schema = settings.schema ? settings.schema : Schema({});\n      var styles = Styles({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope\n      }, settings.schema);\n      var events = settings.ownEvents ? new EventUtils(settings.proxy) : EventUtils.Event;\n      var blockElementsMap = schema.getBlockElements();\n      var $ = DomQuery.overrideDefaults(function () {\n        return {\n          context: doc,\n          element: self.getRoot()\n        };\n      });\n      var isBlock = function (node) {\n        if (typeof node === 'string') {\n          return !!blockElementsMap[node];\n        } else if (node) {\n          var type = node.nodeType;\n          if (type) {\n            return !!(type === 1 && blockElementsMap[node.nodeName]);\n          }\n        }\n        return false;\n      };\n      var get = function (elm) {\n        if (elm && doc && typeof elm === 'string') {\n          var node = doc.getElementById(elm);\n          if (node && node.id !== elm) {\n            return doc.getElementsByName(elm)[1];\n          } else {\n            return node;\n          }\n        }\n        return elm;\n      };\n      var $$ = function (elm) {\n        if (typeof elm === 'string') {\n          elm = get(elm);\n        }\n        return $(elm);\n      };\n      var getAttrib = function (elm, name, defaultVal) {\n        var hook, value;\n        var $elm = $$(elm);\n        if ($elm.length) {\n          hook = attrHooks[name];\n          if (hook && hook.get) {\n            value = hook.get($elm, name);\n          } else {\n            value = $elm.attr(name);\n          }\n        }\n        if (typeof value === 'undefined') {\n          value = defaultVal || '';\n        }\n        return value;\n      };\n      var getAttribs = function (elm) {\n        var node = get(elm);\n        if (!node) {\n          return [];\n        }\n        return node.attributes;\n      };\n      var setAttrib = function (elm, name, value) {\n        var originalValue, hook;\n        if (value === '') {\n          value = null;\n        }\n        var $elm = $$(elm);\n        originalValue = $elm.attr(name);\n        if (!$elm.length) {\n          return;\n        }\n        hook = attrHooks[name];\n        if (hook && hook.set) {\n          hook.set($elm, value, name);\n        } else {\n          $elm.attr(name, value);\n        }\n        if (originalValue !== value && settings.onSetAttrib) {\n          settings.onSetAttrib({\n            attrElm: $elm,\n            attrName: name,\n            attrValue: value\n          });\n        }\n      };\n      var clone = function (node, deep) {\n        if (!isIE || node.nodeType !== 1 || deep) {\n          return node.cloneNode(deep);\n        }\n        if (!deep) {\n          var clone_1 = doc.createElement(node.nodeName);\n          each$5(getAttribs(node), function (attr) {\n            setAttrib(clone_1, attr.nodeName, getAttrib(node, attr.nodeName));\n          });\n          return clone_1;\n        }\n        return null;\n      };\n      var getRoot = function () {\n        return settings.root_element || doc.body;\n      };\n      var getViewPort = function (argWin) {\n        var actWin = !argWin ? win : argWin;\n        var doc = actWin.document;\n        var rootElm =  doc.documentElement ;\n        return {\n          x: actWin.pageXOffset || rootElm.scrollLeft,\n          y: actWin.pageYOffset || rootElm.scrollTop,\n          w: actWin.innerWidth || rootElm.clientWidth,\n          h: actWin.innerHeight || rootElm.clientHeight\n        };\n      };\n      var getPos = function (elm, rootElm) {\n        return Position.getPos(doc.body, get(elm), rootElm);\n      };\n      var setStyle = function (elm, name, value) {\n        var $elm = $$(elm).css(name, value);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var setStyles = function (elm, stylesArg) {\n        var $elm = $$(elm).css(stylesArg);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var getStyle = function (elm, name, computed) {\n        var $elm = $$(elm);\n        if (computed) {\n          return $elm.css(name);\n        }\n        name = name.replace(/-(\\D)/g, function (a, b) {\n          return b.toUpperCase();\n        });\n        if (name === 'float') {\n          name = Env.ie && Env.ie < 12 ? 'styleFloat' : 'cssFloat';\n        }\n        return $elm[0] && $elm[0].style ? $elm[0].style[name] : undefined;\n      };\n      var getSize = function (elm) {\n        var w, h;\n        elm = get(elm);\n        w = getStyle(elm, 'width');\n        h = getStyle(elm, 'height');\n        if (w.indexOf('px') === -1) {\n          w = 0;\n        }\n        if (h.indexOf('px') === -1) {\n          h = 0;\n        }\n        return {\n          w: parseInt(w, 10) || elm.offsetWidth || elm.clientWidth,\n          h: parseInt(h, 10) || elm.offsetHeight || elm.clientHeight\n        };\n      };\n      var getRect = function (elm) {\n        var pos, size;\n        elm = get(elm);\n        pos = getPos(elm);\n        size = getSize(elm);\n        return {\n          x: pos.x,\n          y: pos.y,\n          w: size.w,\n          h: size.h\n        };\n      };\n      var is = function (elm, selector) {\n        var i;\n        if (!elm) {\n          return false;\n        }\n        if (!Array.isArray(elm)) {\n          if (selector === '*') {\n            return elm.nodeType === 1;\n          }\n          if (simpleSelectorRe.test(selector)) {\n            var selectors = selector.toLowerCase().split(/,/);\n            var elmName = elm.nodeName.toLowerCase();\n            for (i = selectors.length - 1; i >= 0; i--) {\n              if (selectors[i] === elmName) {\n                return true;\n              }\n            }\n            return false;\n          }\n          if (elm.nodeType && elm.nodeType !== 1) {\n            return false;\n          }\n        }\n        var elms = !Array.isArray(elm) ? [elm] : elm;\n        return Sizzle(selector, elms[0].ownerDocument || elms[0], null, elms).length > 0;\n      };\n      var getParents = function (elm, selector, root, collect) {\n        var result = [];\n        var selectorVal;\n        var node = get(elm);\n        collect = collect === undefined;\n        root = root || (getRoot().nodeName !== 'BODY' ? getRoot().parentNode : null);\n        if (Tools.is(selector, 'string')) {\n          selectorVal = selector;\n          if (selector === '*') {\n            selector = function (node) {\n              return node.nodeType === 1;\n            };\n          } else {\n            selector = function (node) {\n              return is(node, selectorVal);\n            };\n          }\n        }\n        while (node) {\n          if (node === root || !node.nodeType || node.nodeType === 9) {\n            break;\n          }\n          if (!selector || typeof selector === 'function' && selector(node)) {\n            if (collect) {\n              result.push(node);\n            } else {\n              return [node];\n            }\n          }\n          node = node.parentNode;\n        }\n        return collect ? result : null;\n      };\n      var getParent = function (node, selector, root) {\n        var parents = getParents(node, selector, root, false);\n        return parents && parents.length > 0 ? parents[0] : null;\n      };\n      var _findSib = function (node, selector, name) {\n        var func = selector;\n        if (node) {\n          if (typeof selector === 'string') {\n            func = function (node) {\n              return is(node, selector);\n            };\n          }\n          for (node = node[name]; node; node = node[name]) {\n            if (typeof func === 'function' && func(node)) {\n              return node;\n            }\n          }\n        }\n        return null;\n      };\n      var getNext = function (node, selector) {\n        return _findSib(node, selector, 'nextSibling');\n      };\n      var getPrev = function (node, selector) {\n        return _findSib(node, selector, 'previousSibling');\n      };\n      var select = function (selector, scope) {\n        return Sizzle(selector, get(scope) || settings.root_element || doc, []);\n      };\n      var run = function (elm, func, scope) {\n        var result;\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        if (!node) {\n          return false;\n        }\n        if (Tools.isArray(node) && (node.length || node.length === 0)) {\n          result = [];\n          each$5(node, function (elm, i) {\n            if (elm) {\n              if (typeof elm === 'string') {\n                elm = get(elm);\n              }\n              result.push(func.call(scope, elm, i));\n            }\n          });\n          return result;\n        }\n        var context = scope ? scope : _this;\n        return func.call(context, node);\n      };\n      var setAttribs = function (elm, attrs) {\n        $$(elm).each(function (i, node) {\n          each$5(attrs, function (value, name) {\n            setAttrib(node, name, value);\n          });\n        });\n      };\n      var setHTML = function (elm, html) {\n        var $elm = $$(elm);\n        if (isIE) {\n          $elm.each(function (i, target) {\n            if (target.canHaveHTML === false) {\n              return;\n            }\n            while (target.firstChild) {\n              target.removeChild(target.firstChild);\n            }\n            try {\n              target.innerHTML = '<br>' + html;\n              target.removeChild(target.firstChild);\n            } catch (ex) {\n              DomQuery('<div></div>').html('<br>' + html).contents().slice(1).appendTo(target);\n            }\n            return html;\n          });\n        } else {\n          $elm.html(html);\n        }\n      };\n      var add = function (parentElm, name, attrs, html, create) {\n        return run(parentElm, function (parentElm) {\n          var newElm = typeof name === 'string' ? doc.createElement(name) : name;\n          setAttribs(newElm, attrs);\n          if (html) {\n            if (typeof html !== 'string' && html.nodeType) {\n              newElm.appendChild(html);\n            } else if (typeof html === 'string') {\n              setHTML(newElm, html);\n            }\n          }\n          return !create ? parentElm.appendChild(newElm) : newElm;\n        });\n      };\n      var create = function (name, attrs, html) {\n        return add(doc.createElement(name), name, attrs, html, true);\n      };\n      var decode = Entities.decode;\n      var encode = Entities.encodeAllRaw;\n      var createHTML = function (name, attrs, html) {\n        var outHtml = '', key;\n        outHtml += '<' + name;\n        for (key in attrs) {\n          if (attrs.hasOwnProperty(key) && attrs[key] !== null && typeof attrs[key] !== 'undefined') {\n            outHtml += ' ' + key + '=\"' + encode(attrs[key]) + '\"';\n          }\n        }\n        if (typeof html !== 'undefined') {\n          return outHtml + '>' + html + '</' + name + '>';\n        }\n        return outHtml + ' />';\n      };\n      var createFragment = function (html) {\n        var node;\n        var container = doc.createElement('div');\n        var frag = doc.createDocumentFragment();\n        frag.appendChild(container);\n        if (html) {\n          container.innerHTML = html;\n        }\n        while (node = container.firstChild) {\n          frag.appendChild(node);\n        }\n        frag.removeChild(container);\n        return frag;\n      };\n      var remove = function (node, keepChildren) {\n        var $node = $$(node);\n        if (keepChildren) {\n          $node.each(function () {\n            var child;\n            while (child = this.firstChild) {\n              if (child.nodeType === 3 && child.data.length === 0) {\n                this.removeChild(child);\n              } else {\n                this.parentNode.insertBefore(child, this);\n              }\n            }\n          }).remove();\n        } else {\n          $node.remove();\n        }\n        return $node.length > 1 ? $node.toArray() : $node[0];\n      };\n      var removeAllAttribs = function (e) {\n        return run(e, function (e) {\n          var i;\n          var attrs = e.attributes;\n          for (i = attrs.length - 1; i >= 0; i--) {\n            e.removeAttributeNode(attrs.item(i));\n          }\n        });\n      };\n      var parseStyle = function (cssText) {\n        return styles.parse(cssText);\n      };\n      var serializeStyle = function (stylesArg, name) {\n        return styles.serialize(stylesArg, name);\n      };\n      var addStyle = function (cssText) {\n        var head, styleElm;\n        if (self !== DOMUtils.DOM && doc === domGlobals.document) {\n          if (addedStyles[cssText]) {\n            return;\n          }\n          addedStyles[cssText] = true;\n        }\n        styleElm = doc.getElementById('mceDefaultStyles');\n        if (!styleElm) {\n          styleElm = doc.createElement('style');\n          styleElm.id = 'mceDefaultStyles';\n          styleElm.type = 'text/css';\n          head = doc.getElementsByTagName('head')[0];\n          if (head.firstChild) {\n            head.insertBefore(styleElm, head.firstChild);\n          } else {\n            head.appendChild(styleElm);\n          }\n        }\n        if (styleElm.styleSheet) {\n          styleElm.styleSheet.cssText += cssText;\n        } else {\n          styleElm.appendChild(doc.createTextNode(cssText));\n        }\n      };\n      var loadCSS = function (url) {\n        var head;\n        if (self !== DOMUtils.DOM && doc === domGlobals.document) {\n          DOMUtils.DOM.loadCSS(url);\n          return;\n        }\n        if (!url) {\n          url = '';\n        }\n        head = doc.getElementsByTagName('head')[0];\n        each$5(url.split(','), function (url) {\n          var link;\n          url = Tools._addCacheSuffix(url);\n          if (files[url]) {\n            return;\n          }\n          files[url] = true;\n          link = create('link', {\n            rel: 'stylesheet',\n            href: url\n          });\n          head.appendChild(link);\n        });\n      };\n      var toggleClass = function (elm, cls, state) {\n        $$(elm).toggleClass(cls, state).each(function () {\n          if (this.className === '') {\n            DomQuery(this).attr('class', null);\n          }\n        });\n      };\n      var addClass = function (elm, cls) {\n        $$(elm).addClass(cls);\n      };\n      var removeClass = function (elm, cls) {\n        toggleClass(elm, cls, false);\n      };\n      var hasClass = function (elm, cls) {\n        return $$(elm).hasClass(cls);\n      };\n      var show = function (elm) {\n        $$(elm).show();\n      };\n      var hide = function (elm) {\n        $$(elm).hide();\n      };\n      var isHidden = function (elm) {\n        return $$(elm).css('display') === 'none';\n      };\n      var uniqueId = function (prefix) {\n        return (!prefix ? 'mce_' : prefix) + counter++;\n      };\n      var getOuterHTML = function (elm) {\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        return NodeType.isElement(node) ? node.outerHTML : DomQuery('<div></div>').append(DomQuery(node).clone()).html();\n      };\n      var setOuterHTML = function (elm, html) {\n        $$(elm).each(function () {\n          try {\n            if ('outerHTML' in this) {\n              this.outerHTML = html;\n              return;\n            }\n          } catch (ex) {\n          }\n          remove(DomQuery(this).html(html), true);\n        });\n      };\n      var insertAfter = function (node, reference) {\n        var referenceNode = get(reference);\n        return run(node, function (node) {\n          var parent, nextSibling;\n          parent = referenceNode.parentNode;\n          nextSibling = referenceNode.nextSibling;\n          if (nextSibling) {\n            parent.insertBefore(node, nextSibling);\n          } else {\n            parent.appendChild(node);\n          }\n          return node;\n        });\n      };\n      var replace = function (newElm, oldElm, keepChildren) {\n        return run(oldElm, function (oldElm) {\n          if (Tools.is(oldElm, 'array')) {\n            newElm = newElm.cloneNode(true);\n          }\n          if (keepChildren) {\n            each$5(grep$1(oldElm.childNodes), function (node) {\n              newElm.appendChild(node);\n            });\n          }\n          return oldElm.parentNode.replaceChild(newElm, oldElm);\n        });\n      };\n      var rename = function (elm, name) {\n        var newElm;\n        if (elm.nodeName !== name.toUpperCase()) {\n          newElm = create(name);\n          each$5(getAttribs(elm), function (attrNode) {\n            setAttrib(newElm, attrNode.nodeName, getAttrib(elm, attrNode.nodeName));\n          });\n          replace(newElm, elm, true);\n        }\n        return newElm || elm;\n      };\n      var findCommonAncestor = function (a, b) {\n        var ps = a, pe;\n        while (ps) {\n          pe = b;\n          while (pe && ps !== pe) {\n            pe = pe.parentNode;\n          }\n          if (ps === pe) {\n            break;\n          }\n          ps = ps.parentNode;\n        }\n        if (!ps && a.ownerDocument) {\n          return a.ownerDocument.documentElement;\n        }\n        return ps;\n      };\n      var toHex = function (rgbVal) {\n        return styles.toHex(Tools.trim(rgbVal));\n      };\n      var isEmpty = function (node, elements) {\n        var i, attributes, type, whitespace, walker, name, brCount = 0;\n        node = node.firstChild;\n        if (node) {\n          walker = new TreeWalker(node, node.parentNode);\n          elements = elements || (schema ? schema.getNonEmptyElements() : null);\n          whitespace = schema ? schema.getWhiteSpaceElements() : {};\n          do {\n            type = node.nodeType;\n            if (NodeType.isElement(node)) {\n              var bogusVal = node.getAttribute('data-mce-bogus');\n              if (bogusVal) {\n                node = walker.next(bogusVal === 'all');\n                continue;\n              }\n              name = node.nodeName.toLowerCase();\n              if (elements && elements[name]) {\n                if (name === 'br') {\n                  brCount++;\n                  node = walker.next();\n                  continue;\n                }\n                return false;\n              }\n              attributes = getAttribs(node);\n              i = attributes.length;\n              while (i--) {\n                name = attributes[i].nodeName;\n                if (name === 'name' || name === 'data-mce-bookmark') {\n                  return false;\n                }\n              }\n            }\n            if (type === 8) {\n              return false;\n            }\n            if (type === 3 && !whiteSpaceRegExp$2.test(node.nodeValue)) {\n              return false;\n            }\n            if (type === 3 && node.parentNode && whitespace[node.parentNode.nodeName] && whiteSpaceRegExp$2.test(node.nodeValue)) {\n              return false;\n            }\n            node = walker.next();\n          } while (node);\n        }\n        return brCount <= 1;\n      };\n      var createRng = function () {\n        return doc.createRange();\n      };\n      var split = function (parentElm, splitElm, replacementElm) {\n        var r = createRng(), bef, aft, pa;\n        if (parentElm && splitElm) {\n          r.setStart(parentElm.parentNode, findNodeIndex(parentElm));\n          r.setEnd(splitElm.parentNode, findNodeIndex(splitElm));\n          bef = r.extractContents();\n          r = createRng();\n          r.setStart(splitElm.parentNode, findNodeIndex(splitElm) + 1);\n          r.setEnd(parentElm.parentNode, findNodeIndex(parentElm) + 1);\n          aft = r.extractContents();\n          pa = parentElm.parentNode;\n          pa.insertBefore(TrimNode.trimNode(self, bef), parentElm);\n          if (replacementElm) {\n            pa.insertBefore(replacementElm, parentElm);\n          } else {\n            pa.insertBefore(splitElm, parentElm);\n          }\n          pa.insertBefore(TrimNode.trimNode(self, aft), parentElm);\n          remove(parentElm);\n          return replacementElm || splitElm;\n        }\n      };\n      var bind = function (target, name, func, scope) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          while (i--) {\n            target[i] = bind(target[i], name, func, scope);\n          }\n          return target;\n        }\n        if (settings.collect && (target === doc || target === win)) {\n          boundEvents.push([\n            target,\n            name,\n            func,\n            scope\n          ]);\n        }\n        return events.bind(target, name, func, scope || self);\n      };\n      var unbind = function (target, name, func) {\n        var i;\n        if (Tools.isArray(target)) {\n          i = target.length;\n          while (i--) {\n            target[i] = unbind(target[i], name, func);\n          }\n          return target;\n        }\n        if (boundEvents && (target === doc || target === win)) {\n          i = boundEvents.length;\n          while (i--) {\n            var item = boundEvents[i];\n            if (target === item[0] && (!name || name === item[1]) && (!func || func === item[2])) {\n              events.unbind(item[0], item[1], item[2]);\n            }\n          }\n        }\n        return events.unbind(target, name, func);\n      };\n      var fire = function (target, name, evt) {\n        return events.fire(target, name, evt);\n      };\n      var getContentEditable = function (node) {\n        if (node && NodeType.isElement(node)) {\n          var contentEditable = node.getAttribute('data-mce-contenteditable');\n          if (contentEditable && contentEditable !== 'inherit') {\n            return contentEditable;\n          }\n          return node.contentEditable !== 'inherit' ? node.contentEditable : null;\n        } else {\n          return null;\n        }\n      };\n      var getContentEditableParent = function (node) {\n        var root = getRoot();\n        var state = null;\n        for (; node && node !== root; node = node.parentNode) {\n          state = getContentEditable(node);\n          if (state !== null) {\n            break;\n          }\n        }\n        return state;\n      };\n      var destroy = function () {\n        if (boundEvents) {\n          var i = boundEvents.length;\n          while (i--) {\n            var item = boundEvents[i];\n            events.unbind(item[0], item[1], item[2]);\n          }\n        }\n        if (Sizzle.setDocument) {\n          Sizzle.setDocument();\n        }\n      };\n      var isChildOf = function (node, parent) {\n        while (node) {\n          if (parent === node) {\n            return true;\n          }\n          node = node.parentNode;\n        }\n        return false;\n      };\n      var dumpRng = function (r) {\n        return 'startContainer: ' + r.startContainer.nodeName + ', startOffset: ' + r.startOffset + ', endContainer: ' + r.endContainer.nodeName + ', endOffset: ' + r.endOffset;\n      };\n      var self = {\n        doc: doc,\n        settings: settings,\n        win: win,\n        files: files,\n        stdMode: stdMode,\n        boxModel: boxModel,\n        styleSheetLoader: styleSheetLoader,\n        boundEvents: boundEvents,\n        styles: styles,\n        schema: schema,\n        events: events,\n        isBlock: isBlock,\n        $: $,\n        $$: $$,\n        root: null,\n        clone: clone,\n        getRoot: getRoot,\n        getViewPort: getViewPort,\n        getRect: getRect,\n        getSize: getSize,\n        getParent: getParent,\n        getParents: getParents,\n        get: get,\n        getNext: getNext,\n        getPrev: getPrev,\n        select: select,\n        is: is,\n        add: add,\n        create: create,\n        createHTML: createHTML,\n        createFragment: createFragment,\n        remove: remove,\n        setStyle: setStyle,\n        getStyle: getStyle,\n        setStyles: setStyles,\n        removeAllAttribs: removeAllAttribs,\n        setAttrib: setAttrib,\n        setAttribs: setAttribs,\n        getAttrib: getAttrib,\n        getPos: getPos,\n        parseStyle: parseStyle,\n        serializeStyle: serializeStyle,\n        addStyle: addStyle,\n        loadCSS: loadCSS,\n        addClass: addClass,\n        removeClass: removeClass,\n        hasClass: hasClass,\n        toggleClass: toggleClass,\n        show: show,\n        hide: hide,\n        isHidden: isHidden,\n        uniqueId: uniqueId,\n        setHTML: setHTML,\n        getOuterHTML: getOuterHTML,\n        setOuterHTML: setOuterHTML,\n        decode: decode,\n        encode: encode,\n        insertAfter: insertAfter,\n        replace: replace,\n        rename: rename,\n        findCommonAncestor: findCommonAncestor,\n        toHex: toHex,\n        run: run,\n        getAttribs: getAttribs,\n        isEmpty: isEmpty,\n        createRng: createRng,\n        nodeIndex: findNodeIndex,\n        split: split,\n        bind: bind,\n        unbind: unbind,\n        fire: fire,\n        getContentEditable: getContentEditable,\n        getContentEditableParent: getContentEditableParent,\n        destroy: destroy,\n        isChildOf: isChildOf,\n        dumpRng: dumpRng\n      };\n      attrHooks = setupAttrHooks(styles, settings, function () {\n        return self;\n      });\n      return self;\n    }\n    (function (DOMUtils) {\n      DOMUtils.DOM = DOMUtils(domGlobals.document);\n      DOMUtils.nodeIndex = findNodeIndex;\n    }(DOMUtils || (DOMUtils = {})));\n    var DOMUtils$1 = DOMUtils;\n\n    var DOM = DOMUtils$1.DOM;\n    var each$6 = Tools.each, grep$2 = Tools.grep;\n    var isFunction$1 = function (f) {\n      return typeof f === 'function';\n    };\n    var ScriptLoader = function () {\n      var QUEUED = 0;\n      var LOADING = 1;\n      var LOADED = 2;\n      var FAILED = 3;\n      var states = {};\n      var queue = [];\n      var scriptLoadedCallbacks = {};\n      var queueLoadedCallbacks = [];\n      var loading = 0;\n      var loadScript = function (url, success, failure) {\n        var dom = DOM;\n        var elm, id;\n        var done = function () {\n          dom.remove(id);\n          if (elm) {\n            elm.onreadystatechange = elm.onload = elm = null;\n          }\n          success();\n        };\n        var error = function () {\n          if (isFunction$1(failure)) {\n            failure();\n          } else {\n            if (typeof console !== 'undefined' && console.log) {\n              console.log('Failed to load script: ' + url);\n            }\n          }\n        };\n        id = dom.uniqueId();\n        elm = domGlobals.document.createElement('script');\n        elm.id = id;\n        elm.type = 'text/javascript';\n        elm.src = Tools._addCacheSuffix(url);\n        elm.onload = done;\n        elm.onerror = error;\n        (domGlobals.document.getElementsByTagName('head')[0] || domGlobals.document.body).appendChild(elm);\n      };\n      this.isDone = function (url) {\n        return states[url] === LOADED;\n      };\n      this.markDone = function (url) {\n        states[url] = LOADED;\n      };\n      this.add = this.load = function (url, success, scope, failure) {\n        var state = states[url];\n        if (state === undefined) {\n          queue.push(url);\n          states[url] = QUEUED;\n        }\n        if (success) {\n          if (!scriptLoadedCallbacks[url]) {\n            scriptLoadedCallbacks[url] = [];\n          }\n          scriptLoadedCallbacks[url].push({\n            success: success,\n            failure: failure,\n            scope: scope || this\n          });\n        }\n      };\n      this.remove = function (url) {\n        delete states[url];\n        delete scriptLoadedCallbacks[url];\n      };\n      this.loadQueue = function (success, scope, failure) {\n        this.loadScripts(queue, success, scope, failure);\n      };\n      this.loadScripts = function (scripts, success, scope, failure) {\n        var loadScripts;\n        var failures = [];\n        var execCallbacks = function (name, url) {\n          each$6(scriptLoadedCallbacks[url], function (callback) {\n            if (isFunction$1(callback[name])) {\n              callback[name].call(callback.scope);\n            }\n          });\n          scriptLoadedCallbacks[url] = undefined;\n        };\n        queueLoadedCallbacks.push({\n          success: success,\n          failure: failure,\n          scope: scope || this\n        });\n        loadScripts = function () {\n          var loadingScripts = grep$2(scripts);\n          scripts.length = 0;\n          each$6(loadingScripts, function (url) {\n            if (states[url] === LOADED) {\n              execCallbacks('success', url);\n              return;\n            }\n            if (states[url] === FAILED) {\n              execCallbacks('failure', url);\n              return;\n            }\n            if (states[url] !== LOADING) {\n              states[url] = LOADING;\n              loading++;\n              loadScript(url, function () {\n                states[url] = LOADED;\n                loading--;\n                execCallbacks('success', url);\n                loadScripts();\n              }, function () {\n                states[url] = FAILED;\n                loading--;\n                failures.push(url);\n                execCallbacks('failure', url);\n                loadScripts();\n              });\n            }\n          });\n          if (!loading) {\n            var notifyCallbacks = queueLoadedCallbacks.slice(0);\n            queueLoadedCallbacks.length = 0;\n            each$6(notifyCallbacks, function (callback) {\n              if (failures.length === 0) {\n                if (isFunction$1(callback.success)) {\n                  callback.success.call(callback.scope);\n                }\n              } else {\n                if (isFunction$1(callback.failure)) {\n                  callback.failure.call(callback.scope, failures);\n                }\n              }\n            });\n          }\n        };\n        loadScripts();\n      };\n    };\n    ScriptLoader.ScriptLoader = new ScriptLoader();\n\n    var each$7 = Tools.each;\n    function AddOnManager() {\n      var _this = this;\n      var items = [];\n      var urls = {};\n      var lookup = {};\n      var _listeners = [];\n      var get = function (name) {\n        if (lookup[name]) {\n          return lookup[name].instance;\n        }\n        return undefined;\n      };\n      var dependencies = function (name) {\n        var result;\n        if (lookup[name]) {\n          result = lookup[name].dependencies;\n        }\n        return result || [];\n      };\n      var requireLangPack = function (name, languages) {\n        var language = AddOnManager.language;\n        if (language && AddOnManager.languageLoad !== false) {\n          if (languages) {\n            languages = ',' + languages + ',';\n            if (languages.indexOf(',' + language.substr(0, 2) + ',') !== -1) {\n              language = language.substr(0, 2);\n            } else if (languages.indexOf(',' + language + ',') === -1) {\n              return;\n            }\n          }\n          ScriptLoader.ScriptLoader.add(urls[name] + '/langs/' + language + '.js');\n        }\n      };\n      var add = function (id, addOn, dependencies) {\n        items.push(addOn);\n        lookup[id] = {\n          instance: addOn,\n          dependencies: dependencies\n        };\n        var result = partition(_listeners, function (listener) {\n          return listener.name === id;\n        });\n        _listeners = result.fail;\n        each$7(result.pass, function (listener) {\n          listener.callback();\n        });\n        return addOn;\n      };\n      var remove = function (name) {\n        delete urls[name];\n        delete lookup[name];\n      };\n      var createUrl = function (baseUrl, dep) {\n        if (typeof dep === 'object') {\n          return dep;\n        }\n        return typeof baseUrl === 'string' ? {\n          prefix: '',\n          resource: dep,\n          suffix: ''\n        } : {\n          prefix: baseUrl.prefix,\n          resource: dep,\n          suffix: baseUrl.suffix\n        };\n      };\n      var addComponents = function (pluginName, scripts) {\n        var pluginUrl = _this.urls[pluginName];\n        each$7(scripts, function (script) {\n          ScriptLoader.ScriptLoader.add(pluginUrl + '/' + script);\n        });\n      };\n      var loadDependencies = function (name, addOnUrl, success, scope) {\n        var deps = dependencies(name);\n        each$7(deps, function (dep) {\n          var newUrl = createUrl(addOnUrl, dep);\n          load(newUrl.resource, newUrl, undefined, undefined);\n        });\n        if (success) {\n          if (scope) {\n            success.call(scope);\n          } else {\n            success.call(ScriptLoader);\n          }\n        }\n      };\n      var load = function (name, addOnUrl, success, scope, failure) {\n        if (urls[name]) {\n          return;\n        }\n        var urlString = typeof addOnUrl === 'string' ? addOnUrl : addOnUrl.prefix + addOnUrl.resource + addOnUrl.suffix;\n        if (urlString.indexOf('/') !== 0 && urlString.indexOf('://') === -1) {\n          urlString = AddOnManager.baseURL + '/' + urlString;\n        }\n        urls[name] = urlString.substring(0, urlString.lastIndexOf('/'));\n        if (lookup[name]) {\n          loadDependencies(name, addOnUrl, success, scope);\n        } else {\n          ScriptLoader.ScriptLoader.add(urlString, function () {\n            return loadDependencies(name, addOnUrl, success, scope);\n          }, scope, failure);\n        }\n      };\n      var waitFor = function (name, callback) {\n        if (lookup.hasOwnProperty(name)) {\n          callback();\n        } else {\n          _listeners.push({\n            name: name,\n            callback: callback\n          });\n        }\n      };\n      return {\n        items: items,\n        urls: urls,\n        lookup: lookup,\n        _listeners: _listeners,\n        get: get,\n        dependencies: dependencies,\n        requireLangPack: requireLangPack,\n        add: add,\n        remove: remove,\n        createUrl: createUrl,\n        addComponents: addComponents,\n        load: load,\n        waitFor: waitFor\n      };\n    }\n    (function (AddOnManager) {\n      AddOnManager.PluginManager = AddOnManager();\n      AddOnManager.ThemeManager = AddOnManager();\n    }(AddOnManager || (AddOnManager = {})));\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom().insertBefore(element.dom(), marker.dom());\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom().insertBefore(element.dom(), v.dom());\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom().appendChild(element.dom());\n    };\n    var wrap$1 = function (element, wrapper) {\n      before(element, wrapper);\n      append(wrapper, element);\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom().textContent = '';\n      each(children(element), function (rogue) {\n        remove$1(rogue);\n      });\n    };\n    var remove$1 = function (element) {\n      var dom = element.dom();\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove$1(wrapper);\n    };\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer === null) {\n          timer = domGlobals.setTimeout(function () {\n            fn.apply(null, args);\n            timer = null;\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n        }\n        timer = domGlobals.setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var read = function (element, attr) {\n      var value = get(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$2 = function (element, attr, id) {\n      var nu = filter(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set(element, attr, nu.join(' '));\n      } else {\n        remove(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom().classList !== undefined;\n    };\n    var get$2 = function (element) {\n      return read(element, 'class');\n    };\n    var add$1 = function (element, clazz) {\n      return add(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$2(element, 'class', clazz);\n    };\n\n    var add$2 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom().classList.add(clazz);\n      } else {\n        add$1(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom().classList : get$2(element);\n      if (classList.length === 0) {\n        remove(element, 'class');\n      }\n    };\n    var remove$4 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom().classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$2 = function (element, clazz) {\n      return supports(element) && element.dom().classList.contains(clazz);\n    };\n\n    var descendants = function (scope, predicate) {\n      var result = [];\n      each(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants(x, predicate));\n      });\n      return result;\n    };\n\n    var descendants$1 = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      return is(scope, a) ? Option.some(scope) : isFunction(isRoot) && isRoot(scope) ? Option.none() : ancestor(scope, a, isRoot);\n    }\n\n    var ancestor = function (scope, predicate, isRoot) {\n      var element = scope.dom();\n      var stop = isFunction(isRoot) ? isRoot : constant(false);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = Element.fromDom(element);\n        if (predicate(el)) {\n          return Option.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var closest = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor(scope, function (e) {\n        return is$1(e, selector);\n      }, isRoot);\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      return ClosestOrAncestor(is$1, ancestor$1, scope, selector, isRoot);\n    };\n\n    var annotation = constant('mce-annotation');\n    var dataAnnotation = constant('data-mce-annotation');\n    var dataAnnotationId = constant('data-mce-annotation-uid');\n\n    var identify = function (editor, annotationName) {\n      var rng = editor.selection.getRng();\n      var start = Element.fromDom(rng.startContainer);\n      var root = Element.fromDom(editor.getBody());\n      var selector = annotationName.fold(function () {\n        return '.' + annotation();\n      }, function (an) {\n        return '[' + dataAnnotation() + '=\"' + an + '\"]';\n      });\n      var newStart = child(start, rng.startOffset).getOr(start);\n      var closest = closest$1(newStart, selector, function (n) {\n        return eq(n, root);\n      });\n      var getAttr = function (c, property) {\n        if (has$1(c, property)) {\n          return Option.some(get(c, property));\n        } else {\n          return Option.none();\n        }\n      };\n      return closest.bind(function (c) {\n        return getAttr(c, '' + dataAnnotationId()).bind(function (uid) {\n          return getAttr(c, '' + dataAnnotation()).map(function (name) {\n            var elements = findMarkers(editor, uid);\n            return {\n              uid: uid,\n              name: name,\n              elements: elements\n            };\n          });\n        });\n      });\n    };\n    var isAnnotation = function (elem) {\n      return isElement(elem) && has$2(elem, annotation());\n    };\n    var findMarkers = function (editor, uid) {\n      var body = Element.fromDom(editor.getBody());\n      return descendants$1(body, '[' + dataAnnotationId() + '=\"' + uid + '\"]');\n    };\n    var findAll = function (editor, name) {\n      var body = Element.fromDom(editor.getBody());\n      var markers = descendants$1(body, '[' + dataAnnotation() + '=\"' + name + '\"]');\n      var directory = {};\n      each(markers, function (m) {\n        var uid = get(m, dataAnnotationId());\n        var nodesAlready = directory.hasOwnProperty(uid) ? directory[uid] : [];\n        directory[uid] = nodesAlready.concat([m]);\n      });\n      return directory;\n    };\n\n    var setup = function (editor, registry) {\n      var changeCallbacks = Cell({});\n      var initData = function () {\n        return {\n          listeners: [],\n          previous: Cell(Option.none())\n        };\n      };\n      var withCallbacks = function (name, f) {\n        updateCallbacks(name, function (data) {\n          f(data);\n          return data;\n        });\n      };\n      var updateCallbacks = function (name, f) {\n        var callbackMap = changeCallbacks.get();\n        var data = callbackMap.hasOwnProperty(name) ? callbackMap[name] : initData();\n        var outputData = f(data);\n        callbackMap[name] = outputData;\n        changeCallbacks.set(callbackMap);\n      };\n      var fireCallbacks = function (name, uid, elements) {\n        withCallbacks(name, function (data) {\n          each(data.listeners, function (f) {\n            return f(true, name, {\n              uid: uid,\n              nodes: map(elements, function (elem) {\n                return elem.dom();\n              })\n            });\n          });\n        });\n      };\n      var fireNoAnnotation = function (name) {\n        withCallbacks(name, function (data) {\n          each(data.listeners, function (f) {\n            return f(false, name);\n          });\n        });\n      };\n      var onNodeChange = last$2(function () {\n        var callbackMap = changeCallbacks.get();\n        var annotations = sort(keys(callbackMap));\n        each(annotations, function (name) {\n          updateCallbacks(name, function (data) {\n            var prev = data.previous.get();\n            identify(editor, Option.some(name)).fold(function () {\n              if (prev.isSome()) {\n                fireNoAnnotation(name);\n                data.previous.set(Option.none());\n              }\n            }, function (_a) {\n              var uid = _a.uid, name = _a.name, elements = _a.elements;\n              if (!prev.is(uid)) {\n                fireCallbacks(name, uid, elements);\n                data.previous.set(Option.some(uid));\n              }\n            });\n            return {\n              previous: data.previous,\n              listeners: data.listeners\n            };\n          });\n        });\n      }, 30);\n      editor.on('remove', function () {\n        onNodeChange.cancel();\n      });\n      editor.on('nodeChange', function () {\n        onNodeChange.throttle();\n      });\n      var addListener = function (name, f) {\n        updateCallbacks(name, function (data) {\n          return {\n            previous: data.previous,\n            listeners: data.listeners.concat([f])\n          };\n        });\n      };\n      return { addListener: addListener };\n    };\n\n    var setup$1 = function (editor, registry) {\n      var identifyParserNode = function (span) {\n        var optAnnotation = Option.from(span.attributes.map[dataAnnotation()]);\n        return optAnnotation.bind(registry.lookup);\n      };\n      editor.on('init', function () {\n        editor.serializer.addNodeFilter('span', function (spans) {\n          each(spans, function (span) {\n            identifyParserNode(span).each(function (settings) {\n              if (settings.persistent === false) {\n                span.unwrap();\n              }\n            });\n          });\n        });\n      });\n    };\n\n    var create$1 = function () {\n      var annotations = {};\n      var register = function (name, settings) {\n        annotations[name] = {\n          name: name,\n          settings: settings\n        };\n      };\n      var lookup = function (name) {\n        return annotations.hasOwnProperty(name) ? Option.from(annotations[name]).map(function (a) {\n          return a.settings;\n        }) : Option.none();\n      };\n      return {\n        register: register,\n        lookup: lookup\n      };\n    };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n    function __spreadArrays() {\n      for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n        s += arguments[i].length;\n      for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n      return r;\n    }\n\n    var unique = 0;\n    var generate = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var add$3 = function (element, classes) {\n      each(classes, function (x) {\n        add$2(element, x);\n      });\n    };\n\n    var clone = function (original, isDeep) {\n      return Element.fromDom(original.dom().cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone(original, false);\n    };\n    var deep = function (original) {\n      return clone(original, true);\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(Element.fromDom(div));\n    };\n\n    var get$3 = function (element) {\n      return element.dom().innerHTML;\n    };\n    var set$1 = function (element, content) {\n      var owner$1 = owner(element);\n      var docDom = owner$1.dom();\n      var fragment = Element.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append(element, fragment);\n    };\n\n    var ZWSP = '\\uFEFF';\n    var isZwsp = function (chr) {\n      return chr === ZWSP;\n    };\n    var trim$3 = function (text) {\n      return text.replace(new RegExp(ZWSP, 'g'), '');\n    };\n    var Zwsp = {\n      isZwsp: isZwsp,\n      ZWSP: ZWSP,\n      trim: trim$3\n    };\n\n    var isElement$2 = NodeType.isElement;\n    var isText$2 = NodeType.isText;\n    var isCaretContainerBlock = function (node) {\n      if (isText$2(node)) {\n        node = node.parentNode;\n      }\n      return isElement$2(node) && node.hasAttribute('data-mce-caret');\n    };\n    var isCaretContainerInline = function (node) {\n      return isText$2(node) && Zwsp.isZwsp(node.data);\n    };\n    var isCaretContainer = function (node) {\n      return isCaretContainerBlock(node) || isCaretContainerInline(node);\n    };\n    var hasContent = function (node) {\n      return node.firstChild !== node.lastChild || !NodeType.isBr(node.firstChild);\n    };\n    var insertInline = function (node, before) {\n      var doc, sibling, textNode, parentNode;\n      doc = node.ownerDocument;\n      textNode = doc.createTextNode(Zwsp.ZWSP);\n      parentNode = node.parentNode;\n      if (!before) {\n        sibling = node.nextSibling;\n        if (isText$2(sibling)) {\n          if (isCaretContainer(sibling)) {\n            return sibling;\n          }\n          if (startsWithCaretContainer(sibling)) {\n            sibling.splitText(1);\n            return sibling;\n          }\n        }\n        if (node.nextSibling) {\n          parentNode.insertBefore(textNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(textNode);\n        }\n      } else {\n        sibling = node.previousSibling;\n        if (isText$2(sibling)) {\n          if (isCaretContainer(sibling)) {\n            return sibling;\n          }\n          if (endsWithCaretContainer(sibling)) {\n            return sibling.splitText(sibling.data.length - 1);\n          }\n        }\n        parentNode.insertBefore(textNode, node);\n      }\n      return textNode;\n    };\n    var isBeforeInline = function (pos) {\n      var container = pos.container();\n      if (!pos || !NodeType.isText(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset()) === Zwsp.ZWSP || pos.isAtStart() && isCaretContainerInline(container.previousSibling);\n    };\n    var isAfterInline = function (pos) {\n      var container = pos.container();\n      if (!pos || !NodeType.isText(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset() - 1) === Zwsp.ZWSP || pos.isAtEnd() && isCaretContainerInline(container.nextSibling);\n    };\n    var createBogusBr = function () {\n      var br = domGlobals.document.createElement('br');\n      br.setAttribute('data-mce-bogus', '1');\n      return br;\n    };\n    var insertBlock = function (blockName, node, before) {\n      var doc, blockNode, parentNode;\n      doc = node.ownerDocument;\n      blockNode = doc.createElement(blockName);\n      blockNode.setAttribute('data-mce-caret', before ? 'before' : 'after');\n      blockNode.setAttribute('data-mce-bogus', 'all');\n      blockNode.appendChild(createBogusBr());\n      parentNode = node.parentNode;\n      if (!before) {\n        if (node.nextSibling) {\n          parentNode.insertBefore(blockNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(blockNode);\n        }\n      } else {\n        parentNode.insertBefore(blockNode, node);\n      }\n      return blockNode;\n    };\n    var startsWithCaretContainer = function (node) {\n      return isText$2(node) && node.data[0] === Zwsp.ZWSP;\n    };\n    var endsWithCaretContainer = function (node) {\n      return isText$2(node) && node.data[node.data.length - 1] === Zwsp.ZWSP;\n    };\n    var trimBogusBr = function (elm) {\n      var brs = elm.getElementsByTagName('br');\n      var lastBr = brs[brs.length - 1];\n      if (NodeType.isBogus(lastBr)) {\n        lastBr.parentNode.removeChild(lastBr);\n      }\n    };\n    var showCaretContainerBlock = function (caretContainer) {\n      if (caretContainer && caretContainer.hasAttribute('data-mce-caret')) {\n        trimBogusBr(caretContainer);\n        caretContainer.removeAttribute('data-mce-caret');\n        caretContainer.removeAttribute('data-mce-bogus');\n        caretContainer.removeAttribute('style');\n        caretContainer.removeAttribute('_moz_abspos');\n        return caretContainer;\n      }\n      return null;\n    };\n    var isRangeInCaretContainerBlock = function (range) {\n      return isCaretContainerBlock(range.startContainer);\n    };\n\n    var isContentEditableTrue$1 = NodeType.isContentEditableTrue;\n    var isContentEditableFalse$1 = NodeType.isContentEditableFalse;\n    var isBr$2 = NodeType.isBr;\n    var isText$3 = NodeType.isText;\n    var isInvalidTextElement = NodeType.matchNodeNames('script style textarea');\n    var isAtomicInline = NodeType.matchNodeNames('img input textarea hr iframe video audio object');\n    var isTable$1 = NodeType.matchNodeNames('table');\n    var isCaretContainer$1 = isCaretContainer;\n    var isCaretCandidate = function (node) {\n      if (isCaretContainer$1(node)) {\n        return false;\n      }\n      if (isText$3(node)) {\n        if (isInvalidTextElement(node.parentNode)) {\n          return false;\n        }\n        return true;\n      }\n      return isAtomicInline(node) || isBr$2(node) || isTable$1(node) || isNonUiContentEditableFalse(node);\n    };\n    var isUnselectable = function (node) {\n      return NodeType.isElement(node) && node.getAttribute('unselectable') === 'true';\n    };\n    var isNonUiContentEditableFalse = function (node) {\n      return isUnselectable(node) === false && isContentEditableFalse$1(node);\n    };\n    var isInEditable = function (node, root) {\n      for (node = node.parentNode; node && node !== root; node = node.parentNode) {\n        if (isNonUiContentEditableFalse(node)) {\n          return false;\n        }\n        if (isContentEditableTrue$1(node)) {\n          return true;\n        }\n      }\n      return true;\n    };\n    var isAtomicContentEditableFalse = function (node) {\n      if (!isNonUiContentEditableFalse(node)) {\n        return false;\n      }\n      return foldl(from$1(node.getElementsByTagName('*')), function (result, elm) {\n        return result || isContentEditableTrue$1(elm);\n      }, false) !== true;\n    };\n    var isAtomic = function (node) {\n      return isAtomicInline(node) || isAtomicContentEditableFalse(node);\n    };\n    var isEditableCaretCandidate = function (node, root) {\n      return isCaretCandidate(node) && isInEditable(node, root);\n    };\n\n    var round = Math.round;\n    var clone$1 = function (rect) {\n      if (!rect) {\n        return {\n          left: 0,\n          top: 0,\n          bottom: 0,\n          right: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      return {\n        left: round(rect.left),\n        top: round(rect.top),\n        bottom: round(rect.bottom),\n        right: round(rect.right),\n        width: round(rect.width),\n        height: round(rect.height)\n      };\n    };\n    var collapse = function (rect, toStart) {\n      rect = clone$1(rect);\n      if (toStart) {\n        rect.right = rect.left;\n      } else {\n        rect.left = rect.left + rect.width;\n        rect.right = rect.left;\n      }\n      rect.width = 0;\n      return rect;\n    };\n    var isEqual = function (rect1, rect2) {\n      return rect1.left === rect2.left && rect1.top === rect2.top && rect1.bottom === rect2.bottom && rect1.right === rect2.right;\n    };\n    var isValidOverflow = function (overflowY, rect1, rect2) {\n      return overflowY >= 0 && overflowY <= Math.min(rect1.height, rect2.height) / 2;\n    };\n    var isAbove = function (rect1, rect2) {\n      var halfHeight = Math.min(rect2.height / 2, rect1.height / 2);\n      if (rect1.bottom - halfHeight < rect2.top) {\n        return true;\n      }\n      if (rect1.top > rect2.bottom) {\n        return false;\n      }\n      return isValidOverflow(rect2.top - rect1.bottom, rect1, rect2);\n    };\n    var isBelow = function (rect1, rect2) {\n      if (rect1.top > rect2.bottom) {\n        return true;\n      }\n      if (rect1.bottom < rect2.top) {\n        return false;\n      }\n      return isValidOverflow(rect2.bottom - rect1.top, rect1, rect2);\n    };\n    var containsXY = function (rect, clientX, clientY) {\n      return clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom;\n    };\n    var overflowX = function (outer, inner) {\n      if (inner.left > outer.left && inner.right < outer.right) {\n        return 0;\n      } else {\n        return inner.left < outer.left ? inner.left - outer.left : inner.right - outer.right;\n      }\n    };\n    var overflowY = function (outer, inner) {\n      if (inner.top > outer.top && inner.bottom < outer.bottom) {\n        return 0;\n      } else {\n        return inner.top < outer.top ? inner.top - outer.top : inner.bottom - outer.bottom;\n      }\n    };\n    var getOverflow = function (outer, inner) {\n      return {\n        x: overflowX(outer, inner),\n        y: overflowY(outer, inner)\n      };\n    };\n\n    var getSelectedNode = function (range) {\n      var startContainer = range.startContainer, startOffset = range.startOffset;\n      if (startContainer.hasChildNodes() && range.endOffset === startOffset + 1) {\n        return startContainer.childNodes[startOffset];\n      }\n      return null;\n    };\n    var getNode = function (container, offset) {\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        if (offset >= container.childNodes.length) {\n          offset = container.childNodes.length - 1;\n        }\n        container = container.childNodes[offset];\n      }\n      return container;\n    };\n\n    var extendingChars = new RegExp('[\\u0300-\\u036f\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a' + '\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0' + '\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e3-\\u0902\\u093a\\u093c' + '\\u0941-\\u0948\\u094d\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2-\\u09e3' + '\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc' + '\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57' + '\\u0b62-\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c00\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56' + '\\u0c62-\\u0c63\\u0c81\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc-\\u0ccd\\u0cd5-\\u0cd6\\u0ce2-\\u0ce3\\u0d01\\u0d3e\\u0d41-\\u0d44' + '\\u0d4d\\u0d57\\u0d62-\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9' + '\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97' + '\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074' + '\\u1082\\u1085-\\u1086\\u108d\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b4-\\u17b5' + '\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18' + '\\u1a1b\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1ab0-\\u1abd\\u1ABE\\u1b00-\\u1b03\\u1b34' + '\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1bab-\\u1bad\\u1be6\\u1be8-\\u1be9' + '\\u1bed\\u1bef-\\u1bf1\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1cf4\\u1cf8-\\u1cf9' + '\\u1dc0-\\u1df5\\u1dfc-\\u1dff\\u200c-\\u200d\\u20d0-\\u20dc\\u20DD-\\u20E0\\u20e1\\u20E2-\\u20E4\\u20e5-\\u20f0\\u2cef-\\u2cf1' + '\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302d\\u302e-\\u302f\\u3099-\\u309a\\ua66f\\uA670-\\uA672\\ua674-\\ua67d\\ua69e-\\ua69f\\ua6f0-\\ua6f1' + '\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc' + '\\ua9e5\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\uaa7c\\uaab0\\uaab2-\\uaab4\\uaab7-\\uaab8\\uaabe-\\uaabf\\uaac1' + '\\uaaec-\\uaaed\\uaaf6\\uabe5\\uabe8\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\uff9e-\\uff9f]');\n    var isExtendingChar = function (ch) {\n      return typeof ch === 'string' && ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n    };\n\n    var lift2 = function (oa, ob, f) {\n      return oa.isSome() && ob.isSome() ? Option.some(f(oa.getOrDie(), ob.getOrDie())) : Option.none();\n    };\n    var lift3 = function (oa, ob, oc, f) {\n      return oa.isSome() && ob.isSome() && oc.isSome() ? Option.some(f(oa.getOrDie(), ob.getOrDie(), oc.getOrDie())) : Option.none();\n    };\n\n    var slice$2 = [].slice;\n    var or = function () {\n      var x = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        x[_i] = arguments[_i];\n      }\n      var args = slice$2.call(arguments);\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (args[i](x)) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var and = function () {\n      var x = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        x[_i] = arguments[_i];\n      }\n      var args = slice$2.call(arguments);\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (!args[i](x)) {\n            return false;\n          }\n        }\n        return true;\n      };\n    };\n    var Predicate = {\n      and: and,\n      or: or\n    };\n\n    var isElement$3 = NodeType.isElement;\n    var isCaretCandidate$1 = isCaretCandidate;\n    var isBlock$1 = NodeType.matchStyleValues('display', 'block table');\n    var isFloated = NodeType.matchStyleValues('float', 'left right');\n    var isValidElementCaretCandidate = Predicate.and(isElement$3, isCaretCandidate$1, not(isFloated));\n    var isNotPre = not(NodeType.matchStyleValues('white-space', 'pre pre-line pre-wrap'));\n    var isText$4 = NodeType.isText;\n    var isBr$3 = NodeType.isBr;\n    var nodeIndex = DOMUtils$1.nodeIndex;\n    var resolveIndex = getNode;\n    var createRange = function (doc) {\n      return 'createRange' in doc ? doc.createRange() : DOMUtils$1.DOM.createRng();\n    };\n    var isWhiteSpace = function (chr) {\n      return chr && /[\\r\\n\\t ]/.test(chr);\n    };\n    var isRange = function (rng) {\n      return !!rng.setStart && !!rng.setEnd;\n    };\n    var isHiddenWhiteSpaceRange = function (range) {\n      var container = range.startContainer;\n      var offset = range.startOffset;\n      var text;\n      if (isWhiteSpace(range.toString()) && isNotPre(container.parentNode) && NodeType.isText(container)) {\n        text = container.data;\n        if (isWhiteSpace(text[offset - 1]) || isWhiteSpace(text[offset + 1])) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var getBrClientRect = function (brNode) {\n      var doc = brNode.ownerDocument;\n      var rng = createRange(doc);\n      var nbsp = doc.createTextNode('\\xA0');\n      var parentNode = brNode.parentNode;\n      var clientRect;\n      parentNode.insertBefore(nbsp, brNode);\n      rng.setStart(nbsp, 0);\n      rng.setEnd(nbsp, 1);\n      clientRect = clone$1(rng.getBoundingClientRect());\n      parentNode.removeChild(nbsp);\n      return clientRect;\n    };\n    var getBoundingClientRectWebKitText = function (rng) {\n      var sc = rng.startContainer;\n      var ec = rng.endContainer;\n      var so = rng.startOffset;\n      var eo = rng.endOffset;\n      if (sc === ec && NodeType.isText(ec) && so === 0 && eo === 1) {\n        var newRng = rng.cloneRange();\n        newRng.setEndAfter(ec);\n        return getBoundingClientRect(newRng);\n      } else {\n        return null;\n      }\n    };\n    var isZeroRect = function (r) {\n      return r.left === 0 && r.right === 0 && r.top === 0 && r.bottom === 0;\n    };\n    var getBoundingClientRect = function (item) {\n      var clientRect, clientRects;\n      clientRects = item.getClientRects();\n      if (clientRects.length > 0) {\n        clientRect = clone$1(clientRects[0]);\n      } else {\n        clientRect = clone$1(item.getBoundingClientRect());\n      }\n      if (!isRange(item) && isBr$3(item) && isZeroRect(clientRect)) {\n        return getBrClientRect(item);\n      }\n      if (isZeroRect(clientRect) && isRange(item)) {\n        return getBoundingClientRectWebKitText(item);\n      }\n      return clientRect;\n    };\n    var collapseAndInflateWidth = function (clientRect, toStart) {\n      var newClientRect = collapse(clientRect, toStart);\n      newClientRect.width = 1;\n      newClientRect.right = newClientRect.left + 1;\n      return newClientRect;\n    };\n    var getCaretPositionClientRects = function (caretPosition) {\n      var clientRects = [];\n      var beforeNode, node;\n      var addUniqueAndValidRect = function (clientRect) {\n        if (clientRect.height === 0) {\n          return;\n        }\n        if (clientRects.length > 0) {\n          if (isEqual(clientRect, clientRects[clientRects.length - 1])) {\n            return;\n          }\n        }\n        clientRects.push(clientRect);\n      };\n      var addCharacterOffset = function (container, offset) {\n        var range = createRange(container.ownerDocument);\n        if (offset < container.data.length) {\n          if (isExtendingChar(container.data[offset])) {\n            return clientRects;\n          }\n          if (isExtendingChar(container.data[offset - 1])) {\n            range.setStart(container, offset);\n            range.setEnd(container, offset + 1);\n            if (!isHiddenWhiteSpaceRange(range)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), false));\n              return clientRects;\n            }\n          }\n        }\n        if (offset > 0) {\n          range.setStart(container, offset - 1);\n          range.setEnd(container, offset);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), false));\n          }\n        }\n        if (offset < container.data.length) {\n          range.setStart(container, offset);\n          range.setEnd(container, offset + 1);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), true));\n          }\n        }\n      };\n      if (isText$4(caretPosition.container())) {\n        addCharacterOffset(caretPosition.container(), caretPosition.offset());\n        return clientRects;\n      }\n      if (isElement$3(caretPosition.container())) {\n        if (caretPosition.isAtEnd()) {\n          node = resolveIndex(caretPosition.container(), caretPosition.offset());\n          if (isText$4(node)) {\n            addCharacterOffset(node, node.data.length);\n          }\n          if (isValidElementCaretCandidate(node) && !isBr$3(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), false));\n          }\n        } else {\n          node = resolveIndex(caretPosition.container(), caretPosition.offset());\n          if (isText$4(node)) {\n            addCharacterOffset(node, 0);\n          }\n          if (isValidElementCaretCandidate(node) && caretPosition.isAtEnd()) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), false));\n            return clientRects;\n          }\n          beforeNode = resolveIndex(caretPosition.container(), caretPosition.offset() - 1);\n          if (isValidElementCaretCandidate(beforeNode) && !isBr$3(beforeNode)) {\n            if (isBlock$1(beforeNode) || isBlock$1(node) || !isValidElementCaretCandidate(node)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(beforeNode), false));\n            }\n          }\n          if (isValidElementCaretCandidate(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), true));\n          }\n        }\n      }\n      return clientRects;\n    };\n    function CaretPosition(container, offset, clientRects) {\n      var isAtStart = function () {\n        if (isText$4(container)) {\n          return offset === 0;\n        }\n        return offset === 0;\n      };\n      var isAtEnd = function () {\n        if (isText$4(container)) {\n          return offset >= container.data.length;\n        }\n        return offset >= container.childNodes.length;\n      };\n      var toRange = function () {\n        var range;\n        range = createRange(container.ownerDocument);\n        range.setStart(container, offset);\n        range.setEnd(container, offset);\n        return range;\n      };\n      var getClientRects = function () {\n        if (!clientRects) {\n          clientRects = getCaretPositionClientRects(CaretPosition(container, offset));\n        }\n        return clientRects;\n      };\n      var isVisible = function () {\n        return getClientRects().length > 0;\n      };\n      var isEqual = function (caretPosition) {\n        return caretPosition && container === caretPosition.container() && offset === caretPosition.offset();\n      };\n      var getNode = function (before) {\n        return resolveIndex(container, before ? offset - 1 : offset);\n      };\n      return {\n        container: constant(container),\n        offset: constant(offset),\n        toRange: toRange,\n        getClientRects: getClientRects,\n        isVisible: isVisible,\n        isAtStart: isAtStart,\n        isAtEnd: isAtEnd,\n        isEqual: isEqual,\n        getNode: getNode\n      };\n    }\n    (function (CaretPosition) {\n      CaretPosition.fromRangeStart = function (range) {\n        return CaretPosition(range.startContainer, range.startOffset);\n      };\n      CaretPosition.fromRangeEnd = function (range) {\n        return CaretPosition(range.endContainer, range.endOffset);\n      };\n      CaretPosition.after = function (node) {\n        return CaretPosition(node.parentNode, nodeIndex(node) + 1);\n      };\n      CaretPosition.before = function (node) {\n        return CaretPosition(node.parentNode, nodeIndex(node));\n      };\n      CaretPosition.isAbove = function (pos1, pos2) {\n        return lift2(head(pos2.getClientRects()), last(pos1.getClientRects()), isAbove).getOr(false);\n      };\n      CaretPosition.isBelow = function (pos1, pos2) {\n        return lift2(last(pos2.getClientRects()), head(pos1.getClientRects()), isBelow).getOr(false);\n      };\n      CaretPosition.isAtStart = function (pos) {\n        return pos ? pos.isAtStart() : false;\n      };\n      CaretPosition.isAtEnd = function (pos) {\n        return pos ? pos.isAtEnd() : false;\n      };\n      CaretPosition.isTextPosition = function (pos) {\n        return pos ? NodeType.isText(pos.container()) : false;\n      };\n      CaretPosition.isElementPosition = function (pos) {\n        return CaretPosition.isTextPosition(pos) === false;\n      };\n    }(CaretPosition || (CaretPosition = {})));\n    var CaretPosition$1 = CaretPosition;\n\n    var isText$5 = NodeType.isText;\n    var isBogus$1 = NodeType.isBogus;\n    var nodeIndex$1 = DOMUtils$1.nodeIndex;\n    var normalizedParent = function (node) {\n      var parentNode = node.parentNode;\n      if (isBogus$1(parentNode)) {\n        return normalizedParent(parentNode);\n      }\n      return parentNode;\n    };\n    var getChildNodes = function (node) {\n      if (!node) {\n        return [];\n      }\n      return ArrUtils.reduce(node.childNodes, function (result, node) {\n        if (isBogus$1(node) && node.nodeName !== 'BR') {\n          result = result.concat(getChildNodes(node));\n        } else {\n          result.push(node);\n        }\n        return result;\n      }, []);\n    };\n    var normalizedTextOffset = function (node, offset) {\n      while (node = node.previousSibling) {\n        if (!isText$5(node)) {\n          break;\n        }\n        offset += node.data.length;\n      }\n      return offset;\n    };\n    var equal = function (a) {\n      return function (b) {\n        return a === b;\n      };\n    };\n    var normalizedNodeIndex = function (node) {\n      var nodes, index, numTextFragments;\n      nodes = getChildNodes(normalizedParent(node));\n      index = ArrUtils.findIndex(nodes, equal(node), node);\n      nodes = nodes.slice(0, index + 1);\n      numTextFragments = ArrUtils.reduce(nodes, function (result, node, i) {\n        if (isText$5(node) && isText$5(nodes[i - 1])) {\n          result++;\n        }\n        return result;\n      }, 0);\n      nodes = ArrUtils.filter(nodes, NodeType.matchNodeNames(node.nodeName));\n      index = ArrUtils.findIndex(nodes, equal(node), node);\n      return index - numTextFragments;\n    };\n    var createPathItem = function (node) {\n      var name;\n      if (isText$5(node)) {\n        name = 'text()';\n      } else {\n        name = node.nodeName.toLowerCase();\n      }\n      return name + '[' + normalizedNodeIndex(node) + ']';\n    };\n    var parentsUntil = function (root, node, predicate) {\n      var parents = [];\n      for (node = node.parentNode; node !== root; node = node.parentNode) {\n        if (predicate && predicate(node)) {\n          break;\n        }\n        parents.push(node);\n      }\n      return parents;\n    };\n    var create$2 = function (root, caretPosition) {\n      var container, offset, path = [], outputOffset, childNodes, parents;\n      container = caretPosition.container();\n      offset = caretPosition.offset();\n      if (isText$5(container)) {\n        outputOffset = normalizedTextOffset(container, offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length) {\n          outputOffset = 'after';\n          offset = childNodes.length - 1;\n        } else {\n          outputOffset = 'before';\n        }\n        container = childNodes[offset];\n      }\n      path.push(createPathItem(container));\n      parents = parentsUntil(root, container);\n      parents = ArrUtils.filter(parents, not(NodeType.isBogus));\n      path = path.concat(ArrUtils.map(parents, function (node) {\n        return createPathItem(node);\n      }));\n      return path.reverse().join('/') + ',' + outputOffset;\n    };\n    var resolvePathItem = function (node, name, index) {\n      var nodes = getChildNodes(node);\n      nodes = ArrUtils.filter(nodes, function (node, index) {\n        return !isText$5(node) || !isText$5(nodes[index - 1]);\n      });\n      nodes = ArrUtils.filter(nodes, NodeType.matchNodeNames(name));\n      return nodes[index];\n    };\n    var findTextPosition = function (container, offset) {\n      var node = container, targetOffset = 0, dataLen;\n      while (isText$5(node)) {\n        dataLen = node.data.length;\n        if (offset >= targetOffset && offset <= targetOffset + dataLen) {\n          container = node;\n          offset = offset - targetOffset;\n          break;\n        }\n        if (!isText$5(node.nextSibling)) {\n          container = node;\n          offset = dataLen;\n          break;\n        }\n        targetOffset += dataLen;\n        node = node.nextSibling;\n      }\n      if (isText$5(container) && offset > container.data.length) {\n        offset = container.data.length;\n      }\n      return CaretPosition$1(container, offset);\n    };\n    var resolve$2 = function (root, path) {\n      var parts, container, offset;\n      if (!path) {\n        return null;\n      }\n      parts = path.split(',');\n      path = parts[0].split('/');\n      offset = parts.length > 1 ? parts[1] : 'before';\n      container = ArrUtils.reduce(path, function (result, value) {\n        value = /([\\w\\-\\(\\)]+)\\[([0-9]+)\\]/.exec(value);\n        if (!value) {\n          return null;\n        }\n        if (value[1] === 'text()') {\n          value[1] = '#text';\n        }\n        return resolvePathItem(result, value[1], parseInt(value[2], 10));\n      }, root);\n      if (!container) {\n        return null;\n      }\n      if (!isText$5(container)) {\n        if (offset === 'after') {\n          offset = nodeIndex$1(container) + 1;\n        } else {\n          offset = nodeIndex$1(container);\n        }\n        return CaretPosition$1(container.parentNode, offset);\n      }\n      return findTextPosition(container, parseInt(offset, 10));\n    };\n\n    var trimEmptyTextNode = function (dom, node) {\n      if (NodeType.isText(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var insertNode = function (dom, rng, node) {\n      rng.insertNode(node);\n      trimEmptyTextNode(dom, node.previousSibling);\n      trimEmptyTextNode(dom, node.nextSibling);\n    };\n    var insertFragment = function (dom, rng, frag) {\n      var firstChild = Option.from(frag.firstChild);\n      var lastChild = Option.from(frag.lastChild);\n      rng.insertNode(frag);\n      firstChild.each(function (child) {\n        return trimEmptyTextNode(dom, child.previousSibling);\n      });\n      lastChild.each(function (child) {\n        return trimEmptyTextNode(dom, child.nextSibling);\n      });\n    };\n    var rangeInsertNode = function (dom, rng, node) {\n      if (NodeType.isDocumentFragment(node)) {\n        insertFragment(dom, rng, node);\n      } else {\n        insertNode(dom, rng, node);\n      }\n    };\n\n    var isContentEditableFalse$2 = NodeType.isContentEditableFalse;\n    var getNormalizedTextOffset = function (trim, container, offset) {\n      var node, trimmedOffset;\n      trimmedOffset = trim(container.data.slice(0, offset)).length;\n      for (node = container.previousSibling; node && NodeType.isText(node); node = node.previousSibling) {\n        trimmedOffset += trim(node.data).length;\n      }\n      return trimmedOffset;\n    };\n    var getPoint = function (dom, trim, normalized, rng, start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      var point = [];\n      var childNodes, after = 0;\n      var root = dom.getRoot();\n      if (NodeType.isText(container)) {\n        point.push(normalized ? getNormalizedTextOffset(trim, container, offset) : offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length && childNodes.length) {\n          after = 1;\n          offset = Math.max(0, childNodes.length - 1);\n        }\n        point.push(dom.nodeIndex(childNodes[offset], normalized) + after);\n      }\n      for (; container && container !== root; container = container.parentNode) {\n        point.push(dom.nodeIndex(container, normalized));\n      }\n      return point;\n    };\n    var getLocation = function (trim, selection, normalized, rng) {\n      var dom = selection.dom, bookmark = {};\n      bookmark.start = getPoint(dom, trim, normalized, rng, true);\n      if (!selection.isCollapsed()) {\n        bookmark.end = getPoint(dom, trim, normalized, rng, false);\n      }\n      return bookmark;\n    };\n    var findIndex$2 = function (dom, name, element) {\n      var count = 0;\n      Tools.each(dom.select(name), function (node) {\n        if (node.getAttribute('data-mce-bogus') === 'all') {\n          return;\n        }\n        if (node === element) {\n          return false;\n        }\n        count++;\n      });\n      return count;\n    };\n    var moveEndPoint = function (rng, start) {\n      var container, offset, childNodes;\n      var prefix = start ? 'start' : 'end';\n      container = rng[prefix + 'Container'];\n      offset = rng[prefix + 'Offset'];\n      if (NodeType.isElement(container) && container.nodeName === 'TR') {\n        childNodes = container.childNodes;\n        container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];\n        if (container) {\n          offset = start ? 0 : container.childNodes.length;\n          rng['set' + (start ? 'Start' : 'End')](container, offset);\n        }\n      }\n    };\n    var normalizeTableCellSelection = function (rng) {\n      moveEndPoint(rng, true);\n      moveEndPoint(rng, false);\n      return rng;\n    };\n    var findSibling = function (node, offset) {\n      var sibling;\n      if (NodeType.isElement(node)) {\n        node = getNode(node, offset);\n        if (isContentEditableFalse$2(node)) {\n          return node;\n        }\n      }\n      if (isCaretContainer(node)) {\n        if (NodeType.isText(node) && isCaretContainerBlock(node)) {\n          node = node.parentNode;\n        }\n        sibling = node.previousSibling;\n        if (isContentEditableFalse$2(sibling)) {\n          return sibling;\n        }\n        sibling = node.nextSibling;\n        if (isContentEditableFalse$2(sibling)) {\n          return sibling;\n        }\n      }\n    };\n    var findAdjacentContentEditableFalseElm = function (rng) {\n      return findSibling(rng.startContainer, rng.startOffset) || findSibling(rng.endContainer, rng.endOffset);\n    };\n    var getOffsetBookmark = function (trim, normalized, selection) {\n      var element = selection.getNode();\n      var name = element ? element.nodeName : null;\n      var rng = selection.getRng();\n      if (isContentEditableFalse$2(element) || name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex$2(selection.dom, name, element)\n        };\n      }\n      var sibling = findAdjacentContentEditableFalseElm(rng);\n      if (sibling) {\n        name = sibling.tagName;\n        return {\n          name: name,\n          index: findIndex$2(selection.dom, name, sibling)\n        };\n      }\n      return getLocation(trim, selection, normalized, rng);\n    };\n    var getCaretBookmark = function (selection) {\n      var rng = selection.getRng();\n      return {\n        start: create$2(selection.dom.getRoot(), CaretPosition$1.fromRangeStart(rng)),\n        end: create$2(selection.dom.getRoot(), CaretPosition$1.fromRangeEnd(rng))\n      };\n    };\n    var getRangeBookmark = function (selection) {\n      return { rng: selection.getRng() };\n    };\n    var createBookmarkSpan = function (dom, id, filled) {\n      var args = {\n        'data-mce-type': 'bookmark',\n        'id': id,\n        'style': 'overflow:hidden;line-height:0px'\n      };\n      return filled ? dom.create('span', args, '&#xFEFF;') : dom.create('span', args);\n    };\n    var getPersistentBookmark = function (selection, filled) {\n      var dom = selection.dom;\n      var rng = selection.getRng();\n      var id = dom.uniqueId();\n      var collapsed = selection.isCollapsed();\n      var element = selection.getNode();\n      var name = element.nodeName;\n      if (name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex$2(dom, name, element)\n        };\n      }\n      var rng2 = normalizeTableCellSelection(rng.cloneRange());\n      if (!collapsed) {\n        rng2.collapse(false);\n        var endBookmarkNode = createBookmarkSpan(dom, id + '_end', filled);\n        rangeInsertNode(dom, rng2, endBookmarkNode);\n      }\n      rng = normalizeTableCellSelection(rng);\n      rng.collapse(true);\n      var startBookmarkNode = createBookmarkSpan(dom, id + '_start', filled);\n      rangeInsertNode(dom, rng, startBookmarkNode);\n      selection.moveToBookmark({\n        id: id,\n        keep: 1\n      });\n      return { id: id };\n    };\n    var getBookmark = function (selection, type, normalized) {\n      if (type === 2) {\n        return getOffsetBookmark(Zwsp.trim, normalized, selection);\n      } else if (type === 3) {\n        return getCaretBookmark(selection);\n      } else if (type) {\n        return getRangeBookmark(selection);\n      } else {\n        return getPersistentBookmark(selection, false);\n      }\n    };\n    var GetBookmark = {\n      getBookmark: getBookmark,\n      getUndoBookmark: curry(getOffsetBookmark, identity, true),\n      getPersistentBookmark: getPersistentBookmark\n    };\n\n    var CARET_ID = '_mce_caret';\n    var isCaretNode = function (node) {\n      return NodeType.isElement(node) && node.id === CARET_ID;\n    };\n    var getParentCaretContainer = function (body, node) {\n      while (node && node !== body) {\n        if (node.id === CARET_ID) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isElement$4 = NodeType.isElement;\n    var isText$6 = NodeType.isText;\n    var removeNode = function (node) {\n      var parentNode = node.parentNode;\n      if (parentNode) {\n        parentNode.removeChild(node);\n      }\n    };\n    var getNodeValue = function (node) {\n      try {\n        return node.nodeValue;\n      } catch (ex) {\n        return '';\n      }\n    };\n    var setNodeValue = function (node, text) {\n      if (text.length === 0) {\n        removeNode(node);\n      } else {\n        node.nodeValue = text;\n      }\n    };\n    var trimCount = function (text) {\n      var trimmedText = Zwsp.trim(text);\n      return {\n        count: text.length - trimmedText.length,\n        text: trimmedText\n      };\n    };\n    var removeUnchanged = function (caretContainer, pos) {\n      remove$5(caretContainer);\n      return pos;\n    };\n    var removeTextAndReposition = function (caretContainer, pos) {\n      var before = trimCount(caretContainer.data.substr(0, pos.offset()));\n      var after = trimCount(caretContainer.data.substr(pos.offset()));\n      var text = before.text + after.text;\n      if (text.length > 0) {\n        setNodeValue(caretContainer, text);\n        return CaretPosition$1(caretContainer, pos.offset() - before.count);\n      } else {\n        return pos;\n      }\n    };\n    var removeElementAndReposition = function (caretContainer, pos) {\n      var parentNode = pos.container();\n      var newPosition = indexOf(from$1(parentNode.childNodes), caretContainer).map(function (index) {\n        return index < pos.offset() ? CaretPosition$1(parentNode, pos.offset() - 1) : pos;\n      }).getOr(pos);\n      remove$5(caretContainer);\n      return newPosition;\n    };\n    var removeTextCaretContainer = function (caretContainer, pos) {\n      return isText$6(caretContainer) && pos.container() === caretContainer ? removeTextAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeElementCaretContainer = function (caretContainer, pos) {\n      return pos.container() === caretContainer.parentNode ? removeElementAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeAndReposition = function (container, pos) {\n      return CaretPosition$1.isTextPosition(pos) ? removeTextCaretContainer(container, pos) : removeElementCaretContainer(container, pos);\n    };\n    var remove$5 = function (caretContainerNode) {\n      if (isElement$4(caretContainerNode) && isCaretContainer(caretContainerNode)) {\n        if (hasContent(caretContainerNode)) {\n          caretContainerNode.removeAttribute('data-mce-caret');\n        } else {\n          removeNode(caretContainerNode);\n        }\n      }\n      if (isText$6(caretContainerNode)) {\n        var text = Zwsp.trim(getNodeValue(caretContainerNode));\n        setNodeValue(caretContainerNode, text);\n      }\n    };\n    var CaretContainerRemove = {\n      removeAndReposition: removeAndReposition,\n      remove: remove$5\n    };\n\n    var browser$2 = PlatformDetection$1.detect().browser;\n    var isContentEditableFalse$3 = NodeType.isContentEditableFalse;\n    var isTableCell$1 = function (node) {\n      return NodeType.isElement(node) && /^(TD|TH)$/i.test(node.tagName);\n    };\n    var getAbsoluteClientRect = function (root, element, before) {\n      var clientRect = collapse(element.getBoundingClientRect(), before);\n      var docElm, scrollX, scrollY, margin, rootRect;\n      if (root.tagName === 'BODY') {\n        docElm = root.ownerDocument.documentElement;\n        scrollX = root.scrollLeft || docElm.scrollLeft;\n        scrollY = root.scrollTop || docElm.scrollTop;\n      } else {\n        rootRect = root.getBoundingClientRect();\n        scrollX = root.scrollLeft - rootRect.left;\n        scrollY = root.scrollTop - rootRect.top;\n      }\n      clientRect.left += scrollX;\n      clientRect.right += scrollX;\n      clientRect.top += scrollY;\n      clientRect.bottom += scrollY;\n      clientRect.width = 1;\n      margin = element.offsetWidth - element.clientWidth;\n      if (margin > 0) {\n        if (before) {\n          margin *= -1;\n        }\n        clientRect.left += margin;\n        clientRect.right += margin;\n      }\n      return clientRect;\n    };\n    var trimInlineCaretContainers = function (root) {\n      var contentEditableFalseNodes, node, sibling, i, data;\n      contentEditableFalseNodes = DomQuery('*[contentEditable=false]', root);\n      for (i = 0; i < contentEditableFalseNodes.length; i++) {\n        node = contentEditableFalseNodes[i];\n        sibling = node.previousSibling;\n        if (endsWithCaretContainer(sibling)) {\n          data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(data.length - 1, 1);\n          }\n        }\n        sibling = node.nextSibling;\n        if (startsWithCaretContainer(sibling)) {\n          data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(0, 1);\n          }\n        }\n      }\n    };\n    var FakeCaret = function (root, isBlock, hasFocus) {\n      var lastVisualCaret = Cell(Option.none());\n      var cursorInterval, caretContainerNode;\n      var show = function (before, element) {\n        var clientRect, rng;\n        hide();\n        if (isTableCell$1(element)) {\n          return null;\n        }\n        if (isBlock(element)) {\n          caretContainerNode = insertBlock('p', element, before);\n          clientRect = getAbsoluteClientRect(root, element, before);\n          DomQuery(caretContainerNode).css('top', clientRect.top);\n          var caret = DomQuery('<div class=\"mce-visual-caret\" data-mce-bogus=\"all\"></div>').css(clientRect).appendTo(root)[0];\n          lastVisualCaret.set(Option.some({\n            caret: caret,\n            element: element,\n            before: before\n          }));\n          lastVisualCaret.get().each(function (caretState) {\n            if (before) {\n              DomQuery(caretState.caret).addClass('mce-visual-caret-before');\n            }\n          });\n          startBlink();\n          rng = element.ownerDocument.createRange();\n          rng.setStart(caretContainerNode, 0);\n          rng.setEnd(caretContainerNode, 0);\n        } else {\n          caretContainerNode = insertInline(element, before);\n          rng = element.ownerDocument.createRange();\n          if (isContentEditableFalse$3(caretContainerNode.nextSibling)) {\n            rng.setStart(caretContainerNode, 0);\n            rng.setEnd(caretContainerNode, 0);\n          } else {\n            rng.setStart(caretContainerNode, 1);\n            rng.setEnd(caretContainerNode, 1);\n          }\n          return rng;\n        }\n        return rng;\n      };\n      var hide = function () {\n        trimInlineCaretContainers(root);\n        if (caretContainerNode) {\n          CaretContainerRemove.remove(caretContainerNode);\n          caretContainerNode = null;\n        }\n        lastVisualCaret.get().each(function (caretState) {\n          DomQuery(caretState.caret).remove();\n          lastVisualCaret.set(Option.none());\n        });\n        clearInterval(cursorInterval);\n      };\n      var startBlink = function () {\n        cursorInterval = Delay.setInterval(function () {\n          if (hasFocus()) {\n            DomQuery('div.mce-visual-caret', root).toggleClass('mce-visual-caret-hidden');\n          } else {\n            DomQuery('div.mce-visual-caret', root).addClass('mce-visual-caret-hidden');\n          }\n        }, 500);\n      };\n      var reposition = function () {\n        lastVisualCaret.get().each(function (caretState) {\n          var clientRect = getAbsoluteClientRect(root, caretState.element, caretState.before);\n          DomQuery(caretState.caret).css(clientRect);\n        });\n      };\n      var destroy = function () {\n        return Delay.clearInterval(cursorInterval);\n      };\n      var getCss = function () {\n        return '.mce-visual-caret {' + 'position: absolute;' + 'background-color: black;' + 'background-color: currentcolor;' + '}' + '.mce-visual-caret-hidden {' + 'display: none;' + '}' + '*[data-mce-caret] {' + 'position: absolute;' + 'left: -1000px;' + 'right: auto;' + 'top: 0;' + 'margin: 0;' + 'padding: 0;' + '}';\n      };\n      return {\n        show: show,\n        hide: hide,\n        getCss: getCss,\n        reposition: reposition,\n        destroy: destroy\n      };\n    };\n    var isFakeCaretTableBrowser = function () {\n      return browser$2.isIE() || browser$2.isEdge() || browser$2.isFirefox();\n    };\n    var isFakeCaretTarget = function (node) {\n      return isContentEditableFalse$3(node) || NodeType.isTable(node) && isFakeCaretTableBrowser();\n    };\n\n    var isContentEditableFalse$4 = NodeType.isContentEditableFalse;\n    var isBlockLike = NodeType.matchStyleValues('display', 'block table table-cell table-caption list-item');\n    var isCaretContainer$2 = isCaretContainer;\n    var isCaretContainerBlock$1 = isCaretContainerBlock;\n    var isElement$5 = NodeType.isElement;\n    var isCaretCandidate$2 = isCaretCandidate;\n    var isForwards = function (direction) {\n      return direction > 0;\n    };\n    var isBackwards = function (direction) {\n      return direction < 0;\n    };\n    var skipCaretContainers = function (walk, shallow) {\n      var node;\n      while (node = walk(shallow)) {\n        if (!isCaretContainerBlock$1(node)) {\n          return node;\n        }\n      }\n      return null;\n    };\n    var findNode = function (node, direction, predicateFn, rootNode, shallow) {\n      var walker = new TreeWalker(node, rootNode);\n      if (isBackwards(direction)) {\n        if (isContentEditableFalse$4(node) || isCaretContainerBlock$1(node)) {\n          node = skipCaretContainers(walker.prev, true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.prev, shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      if (isForwards(direction)) {\n        if (isContentEditableFalse$4(node) || isCaretContainerBlock$1(node)) {\n          node = skipCaretContainers(walker.next, true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.next, shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var getParentBlock = function (node, rootNode) {\n      while (node && node !== rootNode) {\n        if (isBlockLike(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var isInSameBlock = function (caretPosition1, caretPosition2, rootNode) {\n      return getParentBlock(caretPosition1.container(), rootNode) === getParentBlock(caretPosition2.container(), rootNode);\n    };\n    var getChildNodeAtRelativeOffset = function (relativeOffset, caretPosition) {\n      var container, offset;\n      if (!caretPosition) {\n        return null;\n      }\n      container = caretPosition.container();\n      offset = caretPosition.offset();\n      if (!isElement$5(container)) {\n        return null;\n      }\n      return container.childNodes[offset + relativeOffset];\n    };\n    var beforeAfter = function (before, node) {\n      var range = node.ownerDocument.createRange();\n      if (before) {\n        range.setStartBefore(node);\n        range.setEndBefore(node);\n      } else {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n      return range;\n    };\n    var isNodesInSameBlock = function (root, node1, node2) {\n      return getParentBlock(node1, root) === getParentBlock(node2, root);\n    };\n    var lean = function (left, root, node) {\n      var sibling, siblingName;\n      if (left) {\n        siblingName = 'previousSibling';\n      } else {\n        siblingName = 'nextSibling';\n      }\n      while (node && node !== root) {\n        sibling = node[siblingName];\n        if (isCaretContainer$2(sibling)) {\n          sibling = sibling[siblingName];\n        }\n        if (isContentEditableFalse$4(sibling)) {\n          if (isNodesInSameBlock(root, sibling, node)) {\n            return sibling;\n          }\n          break;\n        }\n        if (isCaretCandidate$2(sibling)) {\n          break;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var before$2 = curry(beforeAfter, true);\n    var after$1 = curry(beforeAfter, false);\n    var normalizeRange = function (direction, root, range) {\n      var node, container, offset, location;\n      var leanLeft = curry(lean, true, root);\n      var leanRight = curry(lean, false, root);\n      container = range.startContainer;\n      offset = range.startOffset;\n      if (isCaretContainerBlock(container)) {\n        if (!isElement$5(container)) {\n          container = container.parentNode;\n        }\n        location = container.getAttribute('data-mce-caret');\n        if (location === 'before') {\n          node = container.nextSibling;\n          if (isFakeCaretTarget(node)) {\n            return before$2(node);\n          }\n        }\n        if (location === 'after') {\n          node = container.previousSibling;\n          if (isFakeCaretTarget(node)) {\n            return after$1(node);\n          }\n        }\n      }\n      if (!range.collapsed) {\n        return range;\n      }\n      if (NodeType.isText(container)) {\n        if (isCaretContainer$2(container)) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n          }\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (endsWithCaretContainer(container) && offset >= container.data.length - 1) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (startsWithCaretContainer(container) && offset <= 1) {\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n          }\n          return range;\n        }\n        if (offset === container.data.length) {\n          node = leanRight(container);\n          if (node) {\n            return before$2(node);\n          }\n          return range;\n        }\n        if (offset === 0) {\n          node = leanLeft(container);\n          if (node) {\n            return after$1(node);\n          }\n          return range;\n        }\n      }\n      return range;\n    };\n    var getRelativeCefElm = function (forward, caretPosition) {\n      return Option.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, caretPosition)).filter(isContentEditableFalse$4);\n    };\n    var getNormalizedRangeEndPoint = function (direction, root, range) {\n      var normalizedRange = normalizeRange(direction, root, range);\n      if (direction === -1) {\n        return CaretPosition.fromRangeStart(normalizedRange);\n      }\n      return CaretPosition.fromRangeEnd(normalizedRange);\n    };\n    var getElementFromPosition = function (pos) {\n      return Option.from(pos.getNode()).map(Element.fromDom);\n    };\n    var getElementFromPrevPosition = function (pos) {\n      return Option.from(pos.getNode(true)).map(Element.fromDom);\n    };\n    var getVisualCaretPosition = function (walkFn, caretPosition) {\n      while (caretPosition = walkFn(caretPosition)) {\n        if (caretPosition.isVisible()) {\n          return caretPosition;\n        }\n      }\n      return caretPosition;\n    };\n    var isMoveInsideSameBlock = function (from, to) {\n      var inSameBlock = isInSameBlock(from, to);\n      if (!inSameBlock && NodeType.isBr(from.getNode())) {\n        return true;\n      }\n      return inSameBlock;\n    };\n\n    var HDirection;\n    (function (HDirection) {\n      HDirection[HDirection['Backwards'] = -1] = 'Backwards';\n      HDirection[HDirection['Forwards'] = 1] = 'Forwards';\n    }(HDirection || (HDirection = {})));\n    var isContentEditableFalse$5 = NodeType.isContentEditableFalse;\n    var isText$7 = NodeType.isText;\n    var isElement$6 = NodeType.isElement;\n    var isBr$4 = NodeType.isBr;\n    var isCaretCandidate$3 = isCaretCandidate;\n    var isAtomic$1 = isAtomic;\n    var isEditableCaretCandidate$1 = isEditableCaretCandidate;\n    var getParents = function (node, root) {\n      var parents = [];\n      while (node && node !== root) {\n        parents.push(node);\n        node = node.parentNode;\n      }\n      return parents;\n    };\n    var nodeAtIndex = function (container, offset) {\n      if (container.hasChildNodes() && offset < container.childNodes.length) {\n        return container.childNodes[offset];\n      }\n      return null;\n    };\n    var getCaretCandidatePosition = function (direction, node) {\n      if (isForwards(direction)) {\n        if (isCaretCandidate$3(node.previousSibling) && !isText$7(node.previousSibling)) {\n          return CaretPosition$1.before(node);\n        }\n        if (isText$7(node)) {\n          return CaretPosition$1(node, 0);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isCaretCandidate$3(node.nextSibling) && !isText$7(node.nextSibling)) {\n          return CaretPosition$1.after(node);\n        }\n        if (isText$7(node)) {\n          return CaretPosition$1(node, node.data.length);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isBr$4(node)) {\n          return CaretPosition$1.before(node);\n        }\n        return CaretPosition$1.after(node);\n      }\n      return CaretPosition$1.before(node);\n    };\n    var moveForwardFromBr = function (root, nextNode) {\n      var nextSibling = nextNode.nextSibling;\n      if (nextSibling && isCaretCandidate$3(nextSibling)) {\n        if (isText$7(nextSibling)) {\n          return CaretPosition$1(nextSibling, 0);\n        } else {\n          return CaretPosition$1.before(nextSibling);\n        }\n      } else {\n        return findCaretPosition(HDirection.Forwards, CaretPosition$1.after(nextNode), root);\n      }\n    };\n    var findCaretPosition = function (direction, startPos, root) {\n      var node, nextNode, innerNode;\n      var rootContentEditableFalseElm, caretPosition;\n      if (!isElement$6(root) || !startPos) {\n        return null;\n      }\n      if (startPos.isEqual(CaretPosition$1.after(root)) && root.lastChild) {\n        caretPosition = CaretPosition$1.after(root.lastChild);\n        if (isBackwards(direction) && isCaretCandidate$3(root.lastChild) && isElement$6(root.lastChild)) {\n          return isBr$4(root.lastChild) ? CaretPosition$1.before(root.lastChild) : caretPosition;\n        }\n      } else {\n        caretPosition = startPos;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (isText$7(container)) {\n        if (isBackwards(direction) && offset > 0) {\n          return CaretPosition$1(container, --offset);\n        }\n        if (isForwards(direction) && offset < container.length) {\n          return CaretPosition$1(container, ++offset);\n        }\n        node = container;\n      } else {\n        if (isBackwards(direction) && offset > 0) {\n          nextNode = nodeAtIndex(container, offset - 1);\n          if (isCaretCandidate$3(nextNode)) {\n            if (!isAtomic$1(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate$1, nextNode);\n              if (innerNode) {\n                if (isText$7(innerNode)) {\n                  return CaretPosition$1(innerNode, innerNode.data.length);\n                }\n                return CaretPosition$1.after(innerNode);\n              }\n            }\n            if (isText$7(nextNode)) {\n              return CaretPosition$1(nextNode, nextNode.data.length);\n            }\n            return CaretPosition$1.before(nextNode);\n          }\n        }\n        if (isForwards(direction) && offset < container.childNodes.length) {\n          nextNode = nodeAtIndex(container, offset);\n          if (isCaretCandidate$3(nextNode)) {\n            if (isBr$4(nextNode)) {\n              return moveForwardFromBr(root, nextNode);\n            }\n            if (!isAtomic$1(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate$1, nextNode);\n              if (innerNode) {\n                if (isText$7(innerNode)) {\n                  return CaretPosition$1(innerNode, 0);\n                }\n                return CaretPosition$1.before(innerNode);\n              }\n            }\n            if (isText$7(nextNode)) {\n              return CaretPosition$1(nextNode, 0);\n            }\n            return CaretPosition$1.after(nextNode);\n          }\n        }\n        node = nextNode ? nextNode : caretPosition.getNode();\n      }\n      if (isForwards(direction) && caretPosition.isAtEnd() || isBackwards(direction) && caretPosition.isAtStart()) {\n        node = findNode(node, direction, constant(true), root, true);\n        if (isEditableCaretCandidate$1(node, root)) {\n          return getCaretCandidatePosition(direction, node);\n        }\n      }\n      nextNode = findNode(node, direction, isEditableCaretCandidate$1, root);\n      rootContentEditableFalseElm = ArrUtils.last(filter(getParents(container, root), isContentEditableFalse$5));\n      if (rootContentEditableFalseElm && (!nextNode || !rootContentEditableFalseElm.contains(nextNode))) {\n        if (isForwards(direction)) {\n          caretPosition = CaretPosition$1.after(rootContentEditableFalseElm);\n        } else {\n          caretPosition = CaretPosition$1.before(rootContentEditableFalseElm);\n        }\n        return caretPosition;\n      }\n      if (nextNode) {\n        return getCaretCandidatePosition(direction, nextNode);\n      }\n      return null;\n    };\n    var CaretWalker = function (root) {\n      return {\n        next: function (caretPosition) {\n          return findCaretPosition(HDirection.Forwards, caretPosition, root);\n        },\n        prev: function (caretPosition) {\n          return findCaretPosition(HDirection.Backwards, caretPosition, root);\n        }\n      };\n    };\n\n    var walkToPositionIn = function (forward, root, start) {\n      var position = forward ? CaretPosition$1.before(start) : CaretPosition$1.after(start);\n      return fromPosition(forward, root, position);\n    };\n    var afterElement = function (node) {\n      return NodeType.isBr(node) ? CaretPosition$1.before(node) : CaretPosition$1.after(node);\n    };\n    var isBeforeOrStart = function (position) {\n      if (CaretPosition$1.isTextPosition(position)) {\n        return position.offset() === 0;\n      } else {\n        return isCaretCandidate(position.getNode());\n      }\n    };\n    var isAfterOrEnd = function (position) {\n      if (CaretPosition$1.isTextPosition(position)) {\n        var container = position.container();\n        return position.offset() === container.data.length;\n      } else {\n        return isCaretCandidate(position.getNode(true));\n      }\n    };\n    var isBeforeAfterSameElement = function (from, to) {\n      return !CaretPosition$1.isTextPosition(from) && !CaretPosition$1.isTextPosition(to) && from.getNode() === to.getNode(true);\n    };\n    var isAtBr = function (position) {\n      return !CaretPosition$1.isTextPosition(position) && NodeType.isBr(position.getNode());\n    };\n    var shouldSkipPosition = function (forward, from, to) {\n      if (forward) {\n        return !isBeforeAfterSameElement(from, to) && !isAtBr(from) && isAfterOrEnd(from) && isBeforeOrStart(to);\n      } else {\n        return !isBeforeAfterSameElement(to, from) && isBeforeOrStart(from) && isAfterOrEnd(to);\n      }\n    };\n    var fromPosition = function (forward, root, pos) {\n      var walker = CaretWalker(root);\n      return Option.from(forward ? walker.next(pos) : walker.prev(pos));\n    };\n    var navigate = function (forward, root, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isInSameBlock(from, to, root) && shouldSkipPosition(forward, from, to)) {\n          return fromPosition(forward, root, to);\n        } else {\n          return Option.some(to);\n        }\n      });\n    };\n    var navigateIgnore = function (forward, root, from, ignoreFilter) {\n      return navigate(forward, root, from).bind(function (pos) {\n        return ignoreFilter(pos) ? navigateIgnore(forward, root, pos, ignoreFilter) : Option.some(pos);\n      });\n    };\n    var positionIn = function (forward, element) {\n      var startNode = forward ? element.firstChild : element.lastChild;\n      if (NodeType.isText(startNode)) {\n        return Option.some(CaretPosition$1(startNode, forward ? 0 : startNode.data.length));\n      } else if (startNode) {\n        if (isCaretCandidate(startNode)) {\n          return Option.some(forward ? CaretPosition$1.before(startNode) : afterElement(startNode));\n        } else {\n          return walkToPositionIn(forward, element, startNode);\n        }\n      } else {\n        return Option.none();\n      }\n    };\n    var nextPosition = curry(fromPosition, true);\n    var prevPosition = curry(fromPosition, false);\n    var CaretFinder = {\n      fromPosition: fromPosition,\n      nextPosition: nextPosition,\n      prevPosition: prevPosition,\n      navigate: navigate,\n      navigateIgnore: navigateIgnore,\n      positionIn: positionIn,\n      firstPositionIn: curry(positionIn, true),\n      lastPositionIn: curry(positionIn, false)\n    };\n\n    var isStringPathBookmark = function (bookmark) {\n      return typeof bookmark.start === 'string';\n    };\n    var isRangeBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('rng');\n    };\n    var isIdBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('id');\n    };\n    var isIndexBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('name');\n    };\n    var isPathBookmark = function (bookmark) {\n      return Tools.isArray(bookmark.start);\n    };\n\n    var addBogus = function (dom, node) {\n      if (NodeType.isElement(node) && dom.isBlock(node) && !node.innerHTML && !Env.ie) {\n        node.innerHTML = '<br data-mce-bogus=\"1\" />';\n      }\n      return node;\n    };\n    var resolveCaretPositionBookmark = function (dom, bookmark) {\n      var rng, pos;\n      rng = dom.createRng();\n      pos = resolve$2(dom.getRoot(), bookmark.start);\n      rng.setStart(pos.container(), pos.offset());\n      pos = resolve$2(dom.getRoot(), bookmark.end);\n      rng.setEnd(pos.container(), pos.offset());\n      return rng;\n    };\n    var insertZwsp = function (node, rng) {\n      var textNode = node.ownerDocument.createTextNode(Zwsp.ZWSP);\n      node.appendChild(textNode);\n      rng.setStart(textNode, 0);\n      rng.setEnd(textNode, 0);\n    };\n    var isEmpty = function (node) {\n      return node.hasChildNodes() === false;\n    };\n    var tryFindRangePosition = function (node, rng) {\n      return CaretFinder.lastPositionIn(node).fold(function () {\n        return false;\n      }, function (pos) {\n        rng.setStart(pos.container(), pos.offset());\n        rng.setEnd(pos.container(), pos.offset());\n        return true;\n      });\n    };\n    var padEmptyCaretContainer = function (root, node, rng) {\n      if (isEmpty(node) && getParentCaretContainer(root, node)) {\n        insertZwsp(node, rng);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var setEndPoint = function (dom, start, bookmark, rng) {\n      var point = bookmark[start ? 'start' : 'end'];\n      var i, node, offset, children;\n      var root = dom.getRoot();\n      if (point) {\n        offset = point[0];\n        for (node = root, i = point.length - 1; i >= 1; i--) {\n          children = node.childNodes;\n          if (padEmptyCaretContainer(root, node, rng)) {\n            return true;\n          }\n          if (point[i] > children.length - 1) {\n            if (padEmptyCaretContainer(root, node, rng)) {\n              return true;\n            }\n            return tryFindRangePosition(node, rng);\n          }\n          node = children[point[i]];\n        }\n        if (node.nodeType === 3) {\n          offset = Math.min(point[0], node.nodeValue.length);\n        }\n        if (node.nodeType === 1) {\n          offset = Math.min(point[0], node.childNodes.length);\n        }\n        if (start) {\n          rng.setStart(node, offset);\n        } else {\n          rng.setEnd(node, offset);\n        }\n      }\n      return true;\n    };\n    var isValidTextNode = function (node) {\n      return NodeType.isText(node) && node.data.length > 0;\n    };\n    var restoreEndPoint = function (dom, suffix, bookmark) {\n      var marker = dom.get(bookmark.id + '_' + suffix), node, idx, next, prev;\n      var keep = bookmark.keep;\n      var container, offset;\n      if (marker) {\n        node = marker.parentNode;\n        if (suffix === 'start') {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.nextSibling)) {\n              node = marker.nextSibling;\n              idx = 0;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker) + 1;\n            }\n          }\n          container = node;\n          offset = idx;\n        } else {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker);\n            }\n          }\n          container = node;\n          offset = idx;\n        }\n        if (!keep) {\n          prev = marker.previousSibling;\n          next = marker.nextSibling;\n          Tools.each(Tools.grep(marker.childNodes), function (node) {\n            if (NodeType.isText(node)) {\n              node.nodeValue = node.nodeValue.replace(/\\uFEFF/g, '');\n            }\n          });\n          while (marker = dom.get(bookmark.id + '_' + suffix)) {\n            dom.remove(marker, true);\n          }\n          if (prev && next && prev.nodeType === next.nodeType && NodeType.isText(prev) && !Env.opera) {\n            idx = prev.nodeValue.length;\n            prev.appendData(next.nodeValue);\n            dom.remove(next);\n            if (suffix === 'start') {\n              container = prev;\n              offset = idx;\n            } else {\n              container = prev;\n              offset = idx;\n            }\n          }\n        }\n        return Option.some(CaretPosition$1(container, offset));\n      } else {\n        return Option.none();\n      }\n    };\n    var alt = function (o1, o2) {\n      return o1.isSome() ? o1 : o2;\n    };\n    var resolvePaths = function (dom, bookmark) {\n      var rng = dom.createRng();\n      if (setEndPoint(dom, true, bookmark, rng) && setEndPoint(dom, false, bookmark, rng)) {\n        return Option.some(rng);\n      } else {\n        return Option.none();\n      }\n    };\n    var resolveId = function (dom, bookmark) {\n      var startPos = restoreEndPoint(dom, 'start', bookmark);\n      var endPos = restoreEndPoint(dom, 'end', bookmark);\n      return lift2(startPos, alt(endPos, startPos), function (spos, epos) {\n        var rng = dom.createRng();\n        rng.setStart(addBogus(dom, spos.container()), spos.offset());\n        rng.setEnd(addBogus(dom, epos.container()), epos.offset());\n        return rng;\n      });\n    };\n    var resolveIndex$1 = function (dom, bookmark) {\n      return Option.from(dom.select(bookmark.name)[bookmark.index]).map(function (elm) {\n        var rng = dom.createRng();\n        rng.selectNode(elm);\n        return rng;\n      });\n    };\n    var resolve$3 = function (selection, bookmark) {\n      var dom = selection.dom;\n      if (bookmark) {\n        if (isPathBookmark(bookmark)) {\n          return resolvePaths(dom, bookmark);\n        } else if (isStringPathBookmark(bookmark)) {\n          return Option.some(resolveCaretPositionBookmark(dom, bookmark));\n        } else if (isIdBookmark(bookmark)) {\n          return resolveId(dom, bookmark);\n        } else if (isIndexBookmark(bookmark)) {\n          return resolveIndex$1(dom, bookmark);\n        } else if (isRangeBookmark(bookmark)) {\n          return Option.some(bookmark.rng);\n        }\n      }\n      return Option.none();\n    };\n    var ResolveBookmark = { resolve: resolve$3 };\n\n    var getBookmark$1 = function (selection, type, normalized) {\n      return GetBookmark.getBookmark(selection, type, normalized);\n    };\n    var moveToBookmark = function (selection, bookmark) {\n      ResolveBookmark.resolve(selection, bookmark).each(function (rng) {\n        selection.setRng(rng);\n      });\n    };\n    var isBookmarkNode$1 = function (node) {\n      return NodeType.isElement(node) && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n    var Bookmarks = {\n      getBookmark: getBookmark$1,\n      moveToBookmark: moveToBookmark,\n      isBookmarkNode: isBookmarkNode$1\n    };\n\n    var isInlineBlock = function (node) {\n      return node && /^(IMG)$/.test(node.nodeName);\n    };\n    var moveStart = function (dom, selection, rng) {\n      var offset = rng.startOffset;\n      var container = rng.startContainer, walker, node, nodes;\n      if (rng.startContainer === rng.endContainer) {\n        if (isInlineBlock(rng.startContainer.childNodes[rng.startOffset])) {\n          return;\n        }\n      }\n      if (container.nodeType === 1) {\n        nodes = container.childNodes;\n        if (offset < nodes.length) {\n          container = nodes[offset];\n          walker = new TreeWalker(container, dom.getParent(container, dom.isBlock));\n        } else {\n          container = nodes[nodes.length - 1];\n          walker = new TreeWalker(container, dom.getParent(container, dom.isBlock));\n          walker.next(true);\n        }\n        for (node = walker.current(); node; node = walker.next()) {\n          if (node.nodeType === 3 && !isWhiteSpaceNode(node)) {\n            rng.setStart(node, 0);\n            selection.setRng(rng);\n            return;\n          }\n        }\n      }\n    };\n    var getNonWhiteSpaceSibling = function (node, next, inc) {\n      if (node) {\n        next = next ? 'nextSibling' : 'previousSibling';\n        for (node = inc ? node : node[next]; node; node = node[next]) {\n          if (node.nodeType === 1 || !isWhiteSpaceNode(node)) {\n            return node;\n          }\n        }\n      }\n    };\n    var isTextBlock$1 = function (editor, name) {\n      if (name.nodeType) {\n        name = name.nodeName;\n      }\n      return !!editor.schema.getTextBlockElements()[name.toLowerCase()];\n    };\n    var isValid = function (ed, parent, child) {\n      return ed.schema.isValidChild(parent, child);\n    };\n    var isWhiteSpaceNode = function (node) {\n      return node && node.nodeType === 3 && /^([\\t \\r\\n]+|)$/.test(node.nodeValue);\n    };\n    var replaceVars = function (value, vars) {\n      if (typeof value !== 'string') {\n        value = value(vars);\n      } else if (vars) {\n        value = value.replace(/%(\\w+)/g, function (str, name) {\n          return vars[name] || str;\n        });\n      }\n      return value;\n    };\n    var isEq = function (str1, str2) {\n      str1 = str1 || '';\n      str2 = str2 || '';\n      str1 = '' + (str1.nodeName || str1);\n      str2 = '' + (str2.nodeName || str2);\n      return str1.toLowerCase() === str2.toLowerCase();\n    };\n    var normalizeStyleValue = function (dom, value, name) {\n      if (name === 'color' || name === 'backgroundColor') {\n        value = dom.toHex(value);\n      }\n      if (name === 'fontWeight' && value === 700) {\n        value = 'bold';\n      }\n      if (name === 'fontFamily') {\n        value = value.replace(/[\\'\\\"]/g, '').replace(/,\\s+/g, ',');\n      }\n      return '' + value;\n    };\n    var getStyle = function (dom, node, name) {\n      return normalizeStyleValue(dom, dom.getStyle(node, name), name);\n    };\n    var getTextDecoration = function (dom, node) {\n      var decoration;\n      dom.getParent(node, function (n) {\n        decoration = dom.getStyle(n, 'text-decoration');\n        return decoration && decoration !== 'none';\n      });\n      return decoration;\n    };\n    var getParents$1 = function (dom, node, selector) {\n      return dom.getParents(node, selector, dom.getRoot());\n    };\n    var FormatUtils = {\n      isInlineBlock: isInlineBlock,\n      moveStart: moveStart,\n      getNonWhiteSpaceSibling: getNonWhiteSpaceSibling,\n      isTextBlock: isTextBlock$1,\n      isValid: isValid,\n      isWhiteSpaceNode: isWhiteSpaceNode,\n      replaceVars: replaceVars,\n      isEq: isEq,\n      normalizeStyleValue: normalizeStyleValue,\n      getStyle: getStyle,\n      getTextDecoration: getTextDecoration,\n      getParents: getParents$1\n    };\n\n    var isBookmarkNode$2 = Bookmarks.isBookmarkNode;\n    var getParents$2 = FormatUtils.getParents, isWhiteSpaceNode$1 = FormatUtils.isWhiteSpaceNode, isTextBlock$2 = FormatUtils.isTextBlock;\n    var findLeaf = function (node, offset) {\n      if (typeof offset === 'undefined') {\n        offset = node.nodeType === 3 ? node.length : node.childNodes.length;\n      }\n      while (node && node.hasChildNodes()) {\n        node = node.childNodes[offset];\n        if (node) {\n          offset = node.nodeType === 3 ? node.length : node.childNodes.length;\n        }\n      }\n      return {\n        node: node,\n        offset: offset\n      };\n    };\n    var excludeTrailingWhitespace = function (endContainer, endOffset) {\n      var leaf = findLeaf(endContainer, endOffset);\n      if (leaf.node) {\n        while (leaf.node && leaf.offset === 0 && leaf.node.previousSibling) {\n          leaf = findLeaf(leaf.node.previousSibling);\n        }\n        if (leaf.node && leaf.offset > 0 && leaf.node.nodeType === 3 && leaf.node.nodeValue.charAt(leaf.offset - 1) === ' ') {\n          if (leaf.offset > 1) {\n            endContainer = leaf.node;\n            endContainer.splitText(leaf.offset - 1);\n          }\n        }\n      }\n      return endContainer;\n    };\n    var isBogusBr = function (node) {\n      return node.nodeName === 'BR' && node.getAttribute('data-mce-bogus') && !node.nextSibling;\n    };\n    var findParentContentEditable = function (dom, node) {\n      var parent = node;\n      while (parent) {\n        if (parent.nodeType === 1 && dom.getContentEditable(parent)) {\n          return dom.getContentEditable(parent) === 'false' ? parent : node;\n        }\n        parent = parent.parentNode;\n      }\n      return node;\n    };\n    var findSpace = function (start, remove, node, offset) {\n      var pos, pos2;\n      var str = node.nodeValue;\n      if (typeof offset === 'undefined') {\n        offset = start ? str.length : 0;\n      }\n      if (start) {\n        pos = str.lastIndexOf(' ', offset);\n        pos2 = str.lastIndexOf('\\xA0', offset);\n        pos = pos > pos2 ? pos : pos2;\n        if (pos !== -1 && !remove && (pos < offset || !start) && pos <= str.length) {\n          pos++;\n        }\n      } else {\n        pos = str.indexOf(' ', offset);\n        pos2 = str.indexOf('\\xA0', offset);\n        pos = pos !== -1 && (pos2 === -1 || pos < pos2) ? pos : pos2;\n      }\n      return pos;\n    };\n    var findWordEndPoint = function (dom, body, container, offset, start, remove) {\n      var walker, node, pos, lastTextNode;\n      if (container.nodeType === 3) {\n        pos = findSpace(start, remove, container, offset);\n        if (pos !== -1) {\n          return {\n            container: container,\n            offset: pos\n          };\n        }\n        lastTextNode = container;\n      }\n      walker = new TreeWalker(container, dom.getParent(container, dom.isBlock) || body);\n      while (node = walker[start ? 'prev' : 'next']()) {\n        if (node.nodeType === 3 && !isBookmarkNode$2(node.parentNode)) {\n          lastTextNode = node;\n          pos = findSpace(start, remove, node);\n          if (pos !== -1) {\n            return {\n              container: node,\n              offset: pos\n            };\n          }\n        } else if (dom.isBlock(node) || FormatUtils.isEq(node, 'BR')) {\n          break;\n        }\n      }\n      if (lastTextNode) {\n        if (start) {\n          offset = 0;\n        } else {\n          offset = lastTextNode.length;\n        }\n        return {\n          container: lastTextNode,\n          offset: offset\n        };\n      }\n    };\n    var findSelectorEndPoint = function (dom, format, rng, container, siblingName) {\n      var parents, i, y, curFormat;\n      if (container.nodeType === 3 && container.nodeValue.length === 0 && container[siblingName]) {\n        container = container[siblingName];\n      }\n      parents = getParents$2(dom, container);\n      for (i = 0; i < parents.length; i++) {\n        for (y = 0; y < format.length; y++) {\n          curFormat = format[y];\n          if ('collapsed' in curFormat && curFormat.collapsed !== rng.collapsed) {\n            continue;\n          }\n          if (dom.is(parents[i], curFormat.selector)) {\n            return parents[i];\n          }\n        }\n      }\n      return container;\n    };\n    var findBlockEndPoint = function (editor, format, container, siblingName) {\n      var node;\n      var dom = editor.dom;\n      var root = dom.getRoot();\n      if (!format[0].wrapper) {\n        node = dom.getParent(container, format[0].block, root);\n      }\n      if (!node) {\n        var scopeRoot = dom.getParent(container, 'LI,TD,TH');\n        node = dom.getParent(container.nodeType === 3 ? container.parentNode : container, function (node) {\n          return node !== root && isTextBlock$2(editor, node);\n        }, scopeRoot);\n      }\n      if (node && format[0].wrapper) {\n        node = getParents$2(dom, node, 'ul,ol').reverse()[0] || node;\n      }\n      if (!node) {\n        node = container;\n        while (node[siblingName] && !dom.isBlock(node[siblingName])) {\n          node = node[siblingName];\n          if (FormatUtils.isEq(node, 'br')) {\n            break;\n          }\n        }\n      }\n      return node || container;\n    };\n    var findParentContainer = function (dom, format, startContainer, startOffset, endContainer, endOffset, start) {\n      var container, parent, sibling, siblingName, root;\n      container = parent = start ? startContainer : endContainer;\n      siblingName = start ? 'previousSibling' : 'nextSibling';\n      root = dom.getRoot();\n      if (container.nodeType === 3 && !isWhiteSpaceNode$1(container)) {\n        if (start ? startOffset > 0 : endOffset < container.nodeValue.length) {\n          return container;\n        }\n      }\n      while (true) {\n        if (!format[0].block_expand && dom.isBlock(parent)) {\n          return parent;\n        }\n        for (sibling = parent[siblingName]; sibling; sibling = sibling[siblingName]) {\n          if (!isBookmarkNode$2(sibling) && !isWhiteSpaceNode$1(sibling) && !isBogusBr(sibling)) {\n            return parent;\n          }\n        }\n        if (parent === root || parent.parentNode === root) {\n          container = parent;\n          break;\n        }\n        parent = parent.parentNode;\n      }\n      return container;\n    };\n    var expandRng = function (editor, rng, format, remove) {\n      var endPoint, startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      var dom = editor.dom;\n      if (startContainer.nodeType === 1 && startContainer.hasChildNodes()) {\n        startContainer = getNode(startContainer, startOffset);\n        if (startContainer.nodeType === 3) {\n          startOffset = 0;\n        }\n      }\n      if (endContainer.nodeType === 1 && endContainer.hasChildNodes()) {\n        endContainer = getNode(endContainer, rng.collapsed ? endOffset : endOffset - 1);\n        if (endContainer.nodeType === 3) {\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      startContainer = findParentContentEditable(dom, startContainer);\n      endContainer = findParentContentEditable(dom, endContainer);\n      if (isBookmarkNode$2(startContainer.parentNode) || isBookmarkNode$2(startContainer)) {\n        startContainer = isBookmarkNode$2(startContainer) ? startContainer : startContainer.parentNode;\n        if (rng.collapsed) {\n          startContainer = startContainer.previousSibling || startContainer;\n        } else {\n          startContainer = startContainer.nextSibling || startContainer;\n        }\n        if (startContainer.nodeType === 3) {\n          startOffset = rng.collapsed ? startContainer.length : 0;\n        }\n      }\n      if (isBookmarkNode$2(endContainer.parentNode) || isBookmarkNode$2(endContainer)) {\n        endContainer = isBookmarkNode$2(endContainer) ? endContainer : endContainer.parentNode;\n        if (rng.collapsed) {\n          endContainer = endContainer.nextSibling || endContainer;\n        } else {\n          endContainer = endContainer.previousSibling || endContainer;\n        }\n        if (endContainer.nodeType === 3) {\n          endOffset = rng.collapsed ? 0 : endContainer.length;\n        }\n      }\n      if (rng.collapsed) {\n        endPoint = findWordEndPoint(dom, editor.getBody(), startContainer, startOffset, true, remove);\n        if (endPoint) {\n          startContainer = endPoint.container;\n          startOffset = endPoint.offset;\n        }\n        endPoint = findWordEndPoint(dom, editor.getBody(), endContainer, endOffset, false, remove);\n        if (endPoint) {\n          endContainer = endPoint.container;\n          endOffset = endPoint.offset;\n        }\n      }\n      if (format[0].inline) {\n        endContainer = remove ? endContainer : excludeTrailingWhitespace(endContainer, endOffset);\n      }\n      if (format[0].inline || format[0].block_expand) {\n        if (!format[0].inline || (startContainer.nodeType !== 3 || startOffset === 0)) {\n          startContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, true);\n        }\n        if (!format[0].inline || (endContainer.nodeType !== 3 || endOffset === endContainer.nodeValue.length)) {\n          endContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, false);\n        }\n      }\n      if (format[0].selector && format[0].expand !== false && !format[0].inline) {\n        startContainer = findSelectorEndPoint(dom, format, rng, startContainer, 'previousSibling');\n        endContainer = findSelectorEndPoint(dom, format, rng, endContainer, 'nextSibling');\n      }\n      if (format[0].block || format[0].selector) {\n        startContainer = findBlockEndPoint(editor, format, startContainer, 'previousSibling');\n        endContainer = findBlockEndPoint(editor, format, endContainer, 'nextSibling');\n        if (format[0].block) {\n          if (!dom.isBlock(startContainer)) {\n            startContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, true);\n          }\n          if (!dom.isBlock(endContainer)) {\n            endContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, false);\n          }\n        }\n      }\n      if (startContainer.nodeType === 1) {\n        startOffset = dom.nodeIndex(startContainer);\n        startContainer = startContainer.parentNode;\n      }\n      if (endContainer.nodeType === 1) {\n        endOffset = dom.nodeIndex(endContainer) + 1;\n        endContainer = endContainer.parentNode;\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n    var ExpandRange = { expandRng: expandRng };\n\n    var each$8 = Tools.each;\n    var getEndChild = function (container, index) {\n      var childNodes = container.childNodes;\n      index--;\n      if (index > childNodes.length - 1) {\n        index = childNodes.length - 1;\n      } else if (index < 0) {\n        index = 0;\n      }\n      return childNodes[index] || container;\n    };\n    var walk$1 = function (dom, rng, callback) {\n      var startContainer = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endContainer = rng.endContainer;\n      var endOffset = rng.endOffset;\n      var ancestor;\n      var startPoint;\n      var endPoint;\n      var node;\n      var parent;\n      var siblings;\n      var nodes;\n      nodes = dom.select('td[data-mce-selected],th[data-mce-selected]');\n      if (nodes.length > 0) {\n        each$8(nodes, function (node) {\n          callback([node]);\n        });\n        return;\n      }\n      var exclude = function (nodes) {\n        var node;\n        node = nodes[0];\n        if (node.nodeType === 3 && node === startContainer && startOffset >= node.nodeValue.length) {\n          nodes.splice(0, 1);\n        }\n        node = nodes[nodes.length - 1];\n        if (endOffset === 0 && nodes.length > 0 && node === endContainer && node.nodeType === 3) {\n          nodes.splice(nodes.length - 1, 1);\n        }\n        return nodes;\n      };\n      var collectSiblings = function (node, name, endNode) {\n        var siblings = [];\n        for (; node && node !== endNode; node = node[name]) {\n          siblings.push(node);\n        }\n        return siblings;\n      };\n      var findEndPoint = function (node, root) {\n        do {\n          if (node.parentNode === root) {\n            return node;\n          }\n          node = node.parentNode;\n        } while (node);\n      };\n      var walkBoundary = function (startNode, endNode, next) {\n        var siblingName = next ? 'nextSibling' : 'previousSibling';\n        for (node = startNode, parent = node.parentNode; node && node !== endNode; node = parent) {\n          parent = node.parentNode;\n          siblings = collectSiblings(node === startNode ? node : node[siblingName], siblingName);\n          if (siblings.length) {\n            if (!next) {\n              siblings.reverse();\n            }\n            callback(exclude(siblings));\n          }\n        }\n      };\n      if (startContainer.nodeType === 1 && startContainer.hasChildNodes()) {\n        startContainer = startContainer.childNodes[startOffset];\n      }\n      if (endContainer.nodeType === 1 && endContainer.hasChildNodes()) {\n        endContainer = getEndChild(endContainer, endOffset);\n      }\n      if (startContainer === endContainer) {\n        return callback(exclude([startContainer]));\n      }\n      ancestor = dom.findCommonAncestor(startContainer, endContainer);\n      for (node = startContainer; node; node = node.parentNode) {\n        if (node === endContainer) {\n          return walkBoundary(startContainer, ancestor, true);\n        }\n        if (node === ancestor) {\n          break;\n        }\n      }\n      for (node = endContainer; node; node = node.parentNode) {\n        if (node === startContainer) {\n          return walkBoundary(endContainer, ancestor);\n        }\n        if (node === ancestor) {\n          break;\n        }\n      }\n      startPoint = findEndPoint(startContainer, ancestor) || startContainer;\n      endPoint = findEndPoint(endContainer, ancestor) || endContainer;\n      walkBoundary(startContainer, startPoint, true);\n      siblings = collectSiblings(startPoint === startContainer ? startPoint : startPoint.nextSibling, 'nextSibling', endPoint === endContainer ? endPoint.nextSibling : endPoint);\n      if (siblings.length) {\n        callback(exclude(siblings));\n      }\n      walkBoundary(endContainer, endPoint);\n    };\n    var RangeWalk = { walk: walk$1 };\n\n    var zeroWidth = function () {\n      return '\\uFEFF';\n    };\n\n    function NodeValue (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Option.from(element.dom().nodeValue) : Option.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom().nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    }\n\n    var api = NodeValue(isText, 'text');\n    var get$4 = function (element) {\n      return api.get(element);\n    };\n\n    var isZeroWidth = function (elem) {\n      return isText(elem) && get$4(elem) === zeroWidth();\n    };\n    var context = function (editor, elem, wrapName, nodeName) {\n      return parent(elem).fold(function () {\n        return 'skipping';\n      }, function (parent) {\n        if (nodeName === 'br' || isZeroWidth(elem)) {\n          return 'valid';\n        } else if (isAnnotation(elem)) {\n          return 'existing';\n        } else if (isCaretNode(elem)) {\n          return 'caret';\n        } else if (!FormatUtils.isValid(editor, wrapName, nodeName) || !FormatUtils.isValid(editor, name(parent), wrapName)) {\n          return 'invalid-child';\n        } else {\n          return 'valid';\n        }\n      });\n    };\n\n    var shouldApplyToTrailingSpaces = function (rng) {\n      return rng.startContainer.nodeType === 3 && rng.startContainer.nodeValue.length >= rng.startOffset && rng.startContainer.nodeValue[rng.startOffset] === '\\xA0';\n    };\n    var applyWordGrab = function (editor, rng) {\n      var r = ExpandRange.expandRng(editor, rng, [{ inline: true }], shouldApplyToTrailingSpaces(rng));\n      rng.setStart(r.startContainer, r.startOffset);\n      rng.setEnd(r.endContainer, r.endOffset);\n      editor.selection.setRng(rng);\n    };\n    var makeAnnotation = function (eDoc, _a, annotationName, decorate) {\n      var _b = _a.uid, uid = _b === void 0 ? generate('mce-annotation') : _b, data = __rest(_a, ['uid']);\n      var master = Element.fromTag('span', eDoc);\n      add$2(master, annotation());\n      set(master, '' + dataAnnotationId(), uid);\n      set(master, '' + dataAnnotation(), annotationName);\n      var _c = decorate(uid, data), _d = _c.attributes, attributes = _d === void 0 ? {} : _d, _e = _c.classes, classes = _e === void 0 ? [] : _e;\n      setAll(master, attributes);\n      add$3(master, classes);\n      return master;\n    };\n    var annotate = function (editor, rng, annotationName, decorate, data) {\n      var newWrappers = [];\n      var master = makeAnnotation(editor.getDoc(), data, annotationName, decorate);\n      var wrapper = Cell(Option.none());\n      var finishWrapper = function () {\n        wrapper.set(Option.none());\n      };\n      var getOrOpenWrapper = function () {\n        return wrapper.get().getOrThunk(function () {\n          var nu = shallow(master);\n          newWrappers.push(nu);\n          wrapper.set(Option.some(nu));\n          return nu;\n        });\n      };\n      var processElements = function (elems) {\n        each(elems, processElement);\n      };\n      var processElement = function (elem) {\n        var ctx = context(editor, elem, 'span', name(elem));\n        switch (ctx) {\n        case 'invalid-child': {\n            finishWrapper();\n            var children$1 = children(elem);\n            processElements(children$1);\n            finishWrapper();\n            break;\n          }\n        case 'valid': {\n            var w = getOrOpenWrapper();\n            wrap$1(elem, w);\n            break;\n          }\n        case 'skipping':\n        case 'existing':\n        case 'caret':\n        }\n      };\n      var processNodes = function (nodes) {\n        var elems = map(nodes, Element.fromDom);\n        processElements(elems);\n      };\n      RangeWalk.walk(editor.dom, rng, function (nodes) {\n        finishWrapper();\n        processNodes(nodes);\n      });\n      return newWrappers;\n    };\n    var annotateWithBookmark = function (editor, name, settings, data) {\n      editor.undoManager.transact(function () {\n        var initialRng = editor.selection.getRng();\n        if (initialRng.collapsed) {\n          applyWordGrab(editor, initialRng);\n        }\n        if (editor.selection.getRng().collapsed) {\n          var wrapper = makeAnnotation(editor.getDoc(), data, name, settings.decorate);\n          set$1(wrapper, '\\xA0');\n          editor.selection.getRng().insertNode(wrapper.dom());\n          editor.selection.select(wrapper.dom());\n        } else {\n          var bookmark = GetBookmark.getPersistentBookmark(editor.selection, false);\n          var rng = editor.selection.getRng();\n          annotate(editor, rng, name, settings.decorate, data);\n          editor.selection.moveToBookmark(bookmark);\n        }\n      });\n    };\n\n    function Annotator (editor) {\n      var registry = create$1();\n      setup$1(editor, registry);\n      var changes = setup(editor);\n      return {\n        register: function (name, settings) {\n          registry.register(name, settings);\n        },\n        annotate: function (name, data) {\n          registry.lookup(name).each(function (settings) {\n            annotateWithBookmark(editor, name, settings, data);\n          });\n        },\n        annotationChanged: function (name, callback) {\n          changes.addListener(name, callback);\n        },\n        remove: function (name) {\n          identify(editor, Option.some(name)).each(function (_a) {\n            var elements = _a.elements;\n            each(elements, unwrap);\n          });\n        },\n        getAll: function (name) {\n          var directory = findAll(editor, name);\n          return map$2(directory, function (elems) {\n            return map(elems, function (elem) {\n              return elem.dom();\n            });\n          });\n        }\n      };\n    }\n\n    var hasOnlyOneChild = function (node) {\n      return node.firstChild && node.firstChild === node.lastChild;\n    };\n    var isPaddingNode = function (node) {\n      return node.name === 'br' || node.value === '\\xA0';\n    };\n    var isPaddedEmptyBlock = function (schema, node) {\n      var blockElements = schema.getBlockElements();\n      return blockElements[node.name] && hasOnlyOneChild(node) && isPaddingNode(node.firstChild);\n    };\n    var isEmptyFragmentElement = function (schema, node) {\n      var nonEmptyElements = schema.getNonEmptyElements();\n      return node && (node.isEmpty(nonEmptyElements) || isPaddedEmptyBlock(schema, node));\n    };\n    var isListFragment = function (schema, fragment) {\n      var firstChild = fragment.firstChild;\n      var lastChild = fragment.lastChild;\n      if (firstChild && firstChild.name === 'meta') {\n        firstChild = firstChild.next;\n      }\n      if (lastChild && lastChild.attr('id') === 'mce_marker') {\n        lastChild = lastChild.prev;\n      }\n      if (isEmptyFragmentElement(schema, lastChild)) {\n        lastChild = lastChild.prev;\n      }\n      if (!firstChild || firstChild !== lastChild) {\n        return false;\n      }\n      return firstChild.name === 'ul' || firstChild.name === 'ol';\n    };\n    var cleanupDomFragment = function (domFragment) {\n      var firstChild = domFragment.firstChild;\n      var lastChild = domFragment.lastChild;\n      if (firstChild && firstChild.nodeName === 'META') {\n        firstChild.parentNode.removeChild(firstChild);\n      }\n      if (lastChild && lastChild.id === 'mce_marker') {\n        lastChild.parentNode.removeChild(lastChild);\n      }\n      return domFragment;\n    };\n    var toDomFragment = function (dom, serializer, fragment) {\n      var html = serializer.serialize(fragment);\n      var domFragment = dom.createFragment(html);\n      return cleanupDomFragment(domFragment);\n    };\n    var listItems$1 = function (elm) {\n      return Tools.grep(elm.childNodes, function (child) {\n        return child.nodeName === 'LI';\n      });\n    };\n    var isPadding = function (node) {\n      return node.data === '\\xA0' || NodeType.isBr(node);\n    };\n    var isListItemPadded = function (node) {\n      return node && node.firstChild && node.firstChild === node.lastChild && isPadding(node.firstChild);\n    };\n    var isEmptyOrPadded = function (elm) {\n      return !elm.firstChild || isListItemPadded(elm);\n    };\n    var trimListItems = function (elms) {\n      return elms.length > 0 && isEmptyOrPadded(elms[elms.length - 1]) ? elms.slice(0, -1) : elms;\n    };\n    var getParentLi = function (dom, node) {\n      var parentBlock = dom.getParent(node, dom.isBlock);\n      return parentBlock && parentBlock.nodeName === 'LI' ? parentBlock : null;\n    };\n    var isParentBlockLi = function (dom, node) {\n      return !!getParentLi(dom, node);\n    };\n    var getSplit = function (parentNode, rng) {\n      var beforeRng = rng.cloneRange();\n      var afterRng = rng.cloneRange();\n      beforeRng.setStartBefore(parentNode);\n      afterRng.setEndAfter(parentNode);\n      return [\n        beforeRng.cloneContents(),\n        afterRng.cloneContents()\n      ];\n    };\n    var findFirstIn = function (node, rootNode) {\n      var caretPos = CaretPosition$1.before(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.next(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var findLastOf = function (node, rootNode) {\n      var caretPos = CaretPosition$1.after(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.prev(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var insertMiddle = function (target, elms, rootNode, rng) {\n      var parts = getSplit(target, rng);\n      var parentElm = target.parentNode;\n      parentElm.insertBefore(parts[0], target);\n      Tools.each(elms, function (li) {\n        parentElm.insertBefore(li, target);\n      });\n      parentElm.insertBefore(parts[1], target);\n      parentElm.removeChild(target);\n      return findLastOf(elms[elms.length - 1], rootNode);\n    };\n    var insertBefore = function (target, elms, rootNode) {\n      var parentElm = target.parentNode;\n      Tools.each(elms, function (elm) {\n        parentElm.insertBefore(elm, target);\n      });\n      return findFirstIn(target, rootNode);\n    };\n    var insertAfter = function (target, elms, rootNode, dom) {\n      dom.insertAfter(elms.reverse(), target);\n      return findLastOf(elms[0], rootNode);\n    };\n    var insertAtCaret = function (serializer, dom, rng, fragment) {\n      var domFragment = toDomFragment(dom, serializer, fragment);\n      var liTarget = getParentLi(dom, rng.startContainer);\n      var liElms = trimListItems(listItems$1(domFragment.firstChild));\n      var BEGINNING = 1, END = 2;\n      var rootNode = dom.getRoot();\n      var isAt = function (location) {\n        var caretPos = CaretPosition$1.fromRangeStart(rng);\n        var caretWalker = CaretWalker(dom.getRoot());\n        var newPos = location === BEGINNING ? caretWalker.prev(caretPos) : caretWalker.next(caretPos);\n        return newPos ? getParentLi(dom, newPos.getNode()) !== liTarget : true;\n      };\n      if (isAt(BEGINNING)) {\n        return insertBefore(liTarget, liElms, rootNode);\n      } else if (isAt(END)) {\n        return insertAfter(liTarget, liElms, rootNode, dom);\n      }\n      return insertMiddle(liTarget, liElms, rootNode, rng);\n    };\n    var InsertList = {\n      isListFragment: isListFragment,\n      insertAtCaret: insertAtCaret,\n      isParentBlockLi: isParentBlockLi,\n      trimListItems: trimListItems,\n      listItems: listItems$1\n    };\n\n    var each$9 = Tools.each;\n    var ElementUtils = function (dom) {\n      this.compare = function (node1, node2) {\n        if (node1.nodeName !== node2.nodeName) {\n          return false;\n        }\n        var getAttribs = function (node) {\n          var attribs = {};\n          each$9(dom.getAttribs(node), function (attr) {\n            var name = attr.nodeName.toLowerCase();\n            if (name.indexOf('_') !== 0 && name !== 'style' && name.indexOf('data-') !== 0) {\n              attribs[name] = dom.getAttrib(node, name);\n            }\n          });\n          return attribs;\n        };\n        var compareObjects = function (obj1, obj2) {\n          var value, name;\n          for (name in obj1) {\n            if (obj1.hasOwnProperty(name)) {\n              value = obj2[name];\n              if (typeof value === 'undefined') {\n                return false;\n              }\n              if (obj1[name] !== value) {\n                return false;\n              }\n              delete obj2[name];\n            }\n          }\n          for (name in obj2) {\n            if (obj2.hasOwnProperty(name)) {\n              return false;\n            }\n          }\n          return true;\n        };\n        if (!compareObjects(getAttribs(node1), getAttribs(node2))) {\n          return false;\n        }\n        if (!compareObjects(dom.parseStyle(dom.getAttrib(node1, 'style')), dom.parseStyle(dom.getAttrib(node2, 'style')))) {\n          return false;\n        }\n        return !Bookmarks.isBookmarkNode(node1) && !Bookmarks.isBookmarkNode(node2);\n      };\n    };\n\n    var getLastChildren = function (elm) {\n      var children = [];\n      var rawNode = elm.dom();\n      while (rawNode) {\n        children.push(Element.fromDom(rawNode));\n        rawNode = rawNode.lastChild;\n      }\n      return children;\n    };\n    var removeTrailingBr = function (elm) {\n      var allBrs = descendants$1(elm, 'br');\n      var brs = filter(getLastChildren(elm).slice(-1), isBr);\n      if (allBrs.length === brs.length) {\n        each(brs, remove$1);\n      }\n    };\n    var fillWithPaddingBr = function (elm) {\n      empty(elm);\n      append(elm, Element.fromHtml('<br data-mce-bogus=\"1\">'));\n    };\n    var isPaddingContents = function (elm) {\n      return isText(elm) ? get$4(elm) === '\\xA0' : isBr(elm);\n    };\n    var isPaddedElement = function (elm) {\n      return filter(children(elm), isPaddingContents).length === 1;\n    };\n    var trimBlockTrailingBr = function (elm) {\n      lastChild(elm).each(function (lastChild) {\n        prevSibling(lastChild).each(function (lastChildPrevSibling) {\n          if (isBlock(elm) && isBr(lastChild) && isBlock(lastChildPrevSibling)) {\n            remove$1(lastChild);\n          }\n        });\n      });\n    };\n    var PaddingBr = {\n      removeTrailingBr: removeTrailingBr,\n      fillWithPaddingBr: fillWithPaddingBr,\n      isPaddedElement: isPaddedElement,\n      trimBlockTrailingBr: trimBlockTrailingBr\n    };\n\n    var makeMap$3 = Tools.makeMap;\n    function Writer (settings) {\n      var html = [];\n      var indent, indentBefore, indentAfter, encode, htmlOutput;\n      settings = settings || {};\n      indent = settings.indent;\n      indentBefore = makeMap$3(settings.indent_before || '');\n      indentAfter = makeMap$3(settings.indent_after || '');\n      encode = Entities.getEncodeFunc(settings.entity_encoding || 'raw', settings.entities);\n      htmlOutput = settings.element_format === 'html';\n      return {\n        start: function (name, attrs, empty) {\n          var i, l, attr, value;\n          if (indent && indentBefore[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n          html.push('<', name);\n          if (attrs) {\n            for (i = 0, l = attrs.length; i < l; i++) {\n              attr = attrs[i];\n              html.push(' ', attr.name, '=\"', encode(attr.value, true), '\"');\n            }\n          }\n          if (!empty || htmlOutput) {\n            html[html.length] = '>';\n          } else {\n            html[html.length] = ' />';\n          }\n          if (empty && indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        end: function (name) {\n          var value;\n          html.push('</', name, '>');\n          if (indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        text: function (text, raw) {\n          if (text.length > 0) {\n            html[html.length] = raw ? text : encode(text);\n          }\n        },\n        cdata: function (text) {\n          html.push('<![CDATA[', text, ']]>');\n        },\n        comment: function (text) {\n          html.push('<!--', text, '-->');\n        },\n        pi: function (name, text) {\n          if (text) {\n            html.push('<?', name, ' ', encode(text), '?>');\n          } else {\n            html.push('<?', name, '?>');\n          }\n          if (indent) {\n            html.push('\\n');\n          }\n        },\n        doctype: function (text) {\n          html.push('<!DOCTYPE', text, '>', indent ? '\\n' : '');\n        },\n        reset: function () {\n          html.length = 0;\n        },\n        getContent: function () {\n          return html.join('').replace(/\\n$/, '');\n        }\n      };\n    }\n\n    function HtmlSerializer (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var writer = Writer(settings);\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      var serialize = function (node) {\n        var handlers, validate;\n        validate = settings.validate;\n        handlers = {\n          3: function (node) {\n            writer.text(node.value, node.raw);\n          },\n          8: function (node) {\n            writer.comment(node.value);\n          },\n          7: function (node) {\n            writer.pi(node.name, node.value);\n          },\n          10: function (node) {\n            writer.doctype(node.value);\n          },\n          4: function (node) {\n            writer.cdata(node.value);\n          },\n          11: function (node) {\n            if (node = node.firstChild) {\n              do {\n                walk(node);\n              } while (node = node.next);\n            }\n          }\n        };\n        writer.reset();\n        var walk = function (node) {\n          var handler = handlers[node.type];\n          var name, isEmpty, attrs, attrName, attrValue, sortedAttrs, i, l, elementRule;\n          if (!handler) {\n            name = node.name;\n            isEmpty = node.shortEnded;\n            attrs = node.attributes;\n            if (validate && attrs && attrs.length > 1) {\n              sortedAttrs = [];\n              sortedAttrs.map = {};\n              elementRule = schema.getElementRule(node.name);\n              if (elementRule) {\n                for (i = 0, l = elementRule.attributesOrder.length; i < l; i++) {\n                  attrName = elementRule.attributesOrder[i];\n                  if (attrName in attrs.map) {\n                    attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                for (i = 0, l = attrs.length; i < l; i++) {\n                  attrName = attrs[i].name;\n                  if (!(attrName in sortedAttrs.map)) {\n                    attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                attrs = sortedAttrs;\n              }\n            }\n            writer.start(node.name, attrs, isEmpty);\n            if (!isEmpty) {\n              if (node = node.firstChild) {\n                do {\n                  walk(node);\n                } while (node = node.next);\n              }\n              writer.end(name);\n            }\n          } else {\n            handler(node);\n          }\n        };\n        if (node.type === 1 && !settings.inner) {\n          walk(node);\n        } else {\n          handlers[11](node);\n        }\n        return writer.getContent();\n      };\n      return { serialize: serialize };\n    }\n\n    var createRange$1 = function (sc, so, ec, eo) {\n      var rng = domGlobals.document.createRange();\n      rng.setStart(sc, so);\n      rng.setEnd(ec, eo);\n      return rng;\n    };\n    var normalizeBlockSelectionRange = function (rng) {\n      var startPos = CaretPosition$1.fromRangeStart(rng);\n      var endPos = CaretPosition$1.fromRangeEnd(rng);\n      var rootNode = rng.commonAncestorContainer;\n      return CaretFinder.fromPosition(false, rootNode, endPos).map(function (newEndPos) {\n        if (!isInSameBlock(startPos, endPos, rootNode) && isInSameBlock(startPos, newEndPos, rootNode)) {\n          return createRange$1(startPos.container(), startPos.offset(), newEndPos.container(), newEndPos.offset());\n        } else {\n          return rng;\n        }\n      }).getOr(rng);\n    };\n    var normalize = function (rng) {\n      return rng.collapsed ? rng : normalizeBlockSelectionRange(rng);\n    };\n    var RangeNormalizer = { normalize: normalize };\n\n    var isAfterNbsp = function (container, offset) {\n      return NodeType.isText(container) && container.nodeValue[offset - 1] === '\\xA0';\n    };\n    var trimOrPadLeftRight = function (rng, html) {\n      var container, offset;\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      var hasSiblingText = function (siblingName) {\n        return container[siblingName] && container[siblingName].nodeType === 3;\n      };\n      if (container.nodeType === 3) {\n        if (offset > 0) {\n          html = html.replace(/^&nbsp;/, ' ');\n        } else if (!hasSiblingText('previousSibling')) {\n          html = html.replace(/^ /, '&nbsp;');\n        }\n        if (offset < container.length) {\n          html = html.replace(/&nbsp;(<br>|)$/, ' ');\n        } else if (!hasSiblingText('nextSibling')) {\n          html = html.replace(/(&nbsp;| )(<br>|)$/, '&nbsp;');\n        }\n      }\n      return html;\n    };\n    var trimNbspAfterDeleteAndPadValue = function (rng, value) {\n      var container, offset;\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      if (container.nodeType === 3 && rng.collapsed) {\n        if (container.data[offset] === '\\xA0') {\n          container.deleteData(offset, 1);\n          if (!/[\\u00a0| ]$/.test(value)) {\n            value += ' ';\n          }\n        } else if (container.data[offset - 1] === '\\xA0') {\n          container.deleteData(offset - 1, 1);\n          if (!/[\\u00a0| ]$/.test(value)) {\n            value = ' ' + value;\n          }\n        }\n      }\n      return value;\n    };\n\n    var isTableCell$2 = NodeType.matchNodeNames('td th');\n    var selectionSetContent = function (editor, content) {\n      var rng = editor.selection.getRng();\n      var container = rng.startContainer;\n      var offset = rng.startOffset;\n      if (rng.collapsed && isAfterNbsp(container, offset) && NodeType.isText(container)) {\n        container.insertData(offset - 1, ' ');\n        container.deleteData(offset, 1);\n        rng.setStart(container, offset);\n        rng.setEnd(container, offset);\n        editor.selection.setRng(rng);\n      }\n      editor.selection.setContent(content);\n    };\n    var validInsertion = function (editor, value, parentNode) {\n      if (parentNode.getAttribute('data-mce-bogus') === 'all') {\n        parentNode.parentNode.insertBefore(editor.dom.createFragment(value), parentNode);\n      } else {\n        var node = parentNode.firstChild;\n        var node2 = parentNode.lastChild;\n        if (!node || node === node2 && node.nodeName === 'BR') {\n          editor.dom.setHTML(parentNode, value);\n        } else {\n          selectionSetContent(editor, value);\n        }\n      }\n    };\n    var trimBrsFromTableCell = function (dom, elm) {\n      Option.from(dom.getParent(elm, 'td,th')).map(Element.fromDom).each(PaddingBr.trimBlockTrailingBr);\n    };\n    var reduceInlineTextElements = function (editor, merge) {\n      var textInlineElements = editor.schema.getTextInlineElements();\n      var dom = editor.dom;\n      if (merge) {\n        var root_1 = editor.getBody(), elementUtils_1 = new ElementUtils(dom);\n        Tools.each(dom.select('*[data-mce-fragment]'), function (node) {\n          for (var testNode = node.parentNode; testNode && testNode !== root_1; testNode = testNode.parentNode) {\n            if (textInlineElements[node.nodeName.toLowerCase()] && elementUtils_1.compare(testNode, node)) {\n              dom.remove(node, true);\n            }\n          }\n        });\n      }\n    };\n    var markFragmentElements = function (fragment) {\n      var node = fragment;\n      while (node = node.walk()) {\n        if (node.type === 1) {\n          node.attr('data-mce-fragment', '1');\n        }\n      }\n    };\n    var umarkFragmentElements = function (elm) {\n      Tools.each(elm.getElementsByTagName('*'), function (elm) {\n        elm.removeAttribute('data-mce-fragment');\n      });\n    };\n    var isPartOfFragment = function (node) {\n      return !!node.getAttribute('data-mce-fragment');\n    };\n    var canHaveChildren = function (editor, node) {\n      return node && !editor.schema.getShortEndedElements()[node.nodeName];\n    };\n    var moveSelectionToMarker = function (editor, marker) {\n      var parentEditableFalseElm, parentBlock, nextRng;\n      var dom = editor.dom, selection = editor.selection;\n      var node, node2;\n      var getContentEditableFalseParent = function (node) {\n        var root = editor.getBody();\n        for (; node && node !== root; node = node.parentNode) {\n          if (editor.dom.getContentEditable(node) === 'false') {\n            return node;\n          }\n        }\n        return null;\n      };\n      if (!marker) {\n        return;\n      }\n      editor.selection.scrollIntoView(marker);\n      parentEditableFalseElm = getContentEditableFalseParent(marker);\n      if (parentEditableFalseElm) {\n        dom.remove(marker);\n        selection.select(parentEditableFalseElm);\n        return;\n      }\n      var rng = dom.createRng();\n      node = marker.previousSibling;\n      if (node && node.nodeType === 3) {\n        rng.setStart(node, node.nodeValue.length);\n        if (!Env.ie) {\n          node2 = marker.nextSibling;\n          if (node2 && node2.nodeType === 3) {\n            node.appendData(node2.data);\n            node2.parentNode.removeChild(node2);\n          }\n        }\n      } else {\n        rng.setStartBefore(marker);\n        rng.setEndBefore(marker);\n      }\n      var findNextCaretRng = function (rng) {\n        var caretPos = CaretPosition$1.fromRangeStart(rng);\n        var caretWalker = CaretWalker(editor.getBody());\n        caretPos = caretWalker.next(caretPos);\n        if (caretPos) {\n          return caretPos.toRange();\n        }\n      };\n      parentBlock = dom.getParent(marker, dom.isBlock);\n      dom.remove(marker);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        editor.$(parentBlock).empty();\n        rng.setStart(parentBlock, 0);\n        rng.setEnd(parentBlock, 0);\n        if (!isTableCell$2(parentBlock) && !isPartOfFragment(parentBlock) && (nextRng = findNextCaretRng(rng))) {\n          rng = nextRng;\n          dom.remove(parentBlock);\n        } else {\n          dom.add(parentBlock, dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      selection.setRng(rng);\n    };\n    var insertHtmlAtCaret = function (editor, value, details) {\n      var parser, serializer, parentNode, rootNode, fragment, args;\n      var marker, rng, node, bookmarkHtml, merge;\n      var selection = editor.selection, dom = editor.dom;\n      if (/^ | $/.test(value)) {\n        value = trimOrPadLeftRight(selection.getRng(), value);\n      }\n      parser = editor.parser;\n      merge = details.merge;\n      serializer = HtmlSerializer({ validate: editor.settings.validate }, editor.schema);\n      bookmarkHtml = '<span id=\"mce_marker\" data-mce-type=\"bookmark\">&#xFEFF;&#x200B;</span>';\n      args = {\n        content: value,\n        format: 'html',\n        selection: true,\n        paste: details.paste\n      };\n      args = editor.fire('BeforeSetContent', args);\n      if (args.isDefaultPrevented()) {\n        editor.fire('SetContent', {\n          content: args.content,\n          format: 'html',\n          selection: true,\n          paste: details.paste\n        });\n        return;\n      }\n      value = args.content;\n      if (value.indexOf('{$caret}') === -1) {\n        value += '{$caret}';\n      }\n      value = value.replace(/\\{\\$caret\\}/, bookmarkHtml);\n      rng = selection.getRng();\n      var caretElement = rng.startContainer || (rng.parentElement ? rng.parentElement() : null);\n      var body = editor.getBody();\n      if (caretElement === body && selection.isCollapsed()) {\n        if (dom.isBlock(body.firstChild) && canHaveChildren(editor, body.firstChild) && dom.isEmpty(body.firstChild)) {\n          rng = dom.createRng();\n          rng.setStart(body.firstChild, 0);\n          rng.setEnd(body.firstChild, 0);\n          selection.setRng(rng);\n        }\n      }\n      if (!selection.isCollapsed()) {\n        editor.selection.setRng(RangeNormalizer.normalize(editor.selection.getRng()));\n        editor.getDoc().execCommand('Delete', false, null);\n        value = trimNbspAfterDeleteAndPadValue(editor.selection.getRng(), value);\n      }\n      parentNode = selection.getNode();\n      var parserArgs = {\n        context: parentNode.nodeName.toLowerCase(),\n        data: details.data,\n        insert: true\n      };\n      fragment = parser.parse(value, parserArgs);\n      if (details.paste === true && InsertList.isListFragment(editor.schema, fragment) && InsertList.isParentBlockLi(dom, parentNode)) {\n        rng = InsertList.insertAtCaret(serializer, dom, editor.selection.getRng(), fragment);\n        editor.selection.setRng(rng);\n        editor.fire('SetContent', args);\n        return;\n      }\n      markFragmentElements(fragment);\n      node = fragment.lastChild;\n      if (node.attr('id') === 'mce_marker') {\n        marker = node;\n        for (node = node.prev; node; node = node.walk(true)) {\n          if (node.type === 3 || !dom.isBlock(node.name)) {\n            if (editor.schema.isValidChild(node.parent.name, 'span')) {\n              node.parent.insert(marker, node, node.name === 'br');\n            }\n            break;\n          }\n        }\n      }\n      editor._selectionOverrides.showBlockCaretContainer(parentNode);\n      if (!parserArgs.invalid) {\n        value = serializer.serialize(fragment);\n        validInsertion(editor, value, parentNode);\n      } else {\n        selectionSetContent(editor, bookmarkHtml);\n        parentNode = selection.getNode();\n        rootNode = editor.getBody();\n        if (parentNode.nodeType === 9) {\n          parentNode = node = rootNode;\n        } else {\n          node = parentNode;\n        }\n        while (node !== rootNode) {\n          parentNode = node;\n          node = node.parentNode;\n        }\n        value = parentNode === rootNode ? rootNode.innerHTML : dom.getOuterHTML(parentNode);\n        value = serializer.serialize(parser.parse(value.replace(/<span (id=\"mce_marker\"|id=mce_marker).+?<\\/span>/i, function () {\n          return serializer.serialize(fragment);\n        })));\n        if (parentNode === rootNode) {\n          dom.setHTML(rootNode, value);\n        } else {\n          dom.setOuterHTML(parentNode, value);\n        }\n      }\n      reduceInlineTextElements(editor, merge);\n      moveSelectionToMarker(editor, dom.get('mce_marker'));\n      umarkFragmentElements(editor.getBody());\n      trimBrsFromTableCell(editor.dom, editor.selection.getStart());\n      editor.fire('SetContent', args);\n      editor.addVisual();\n    };\n    var processValue = function (value) {\n      var details;\n      if (typeof value !== 'string') {\n        details = Tools.extend({\n          paste: value.paste,\n          data: { paste: value.paste }\n        }, value);\n        return {\n          content: value.content,\n          details: details\n        };\n      }\n      return {\n        content: value,\n        details: {}\n      };\n    };\n    var insertAtCaret$1 = function (editor, value) {\n      var result = processValue(value);\n      insertHtmlAtCaret(editor, result.content, result.details);\n    };\n    var InsertContent = { insertAtCaret: insertAtCaret$1 };\n\n    var strongRtl = /[\\u0591-\\u07FF\\uFB1D-\\uFDFF\\uFE70-\\uFEFC]/;\n    var hasStrongRtl = function (text) {\n      return strongRtl.test(text);\n    };\n\n    var getBodySetting = function (editor, name, defaultValue) {\n      var value = editor.getParam(name, defaultValue);\n      if (value.indexOf('=') !== -1) {\n        var bodyObj = editor.getParam(name, '', 'hash');\n        return bodyObj.hasOwnProperty(editor.id) ? bodyObj[editor.id] : defaultValue;\n      } else {\n        return value;\n      }\n    };\n    var getIframeAttrs = function (editor) {\n      return editor.getParam('iframe_attrs', {});\n    };\n    var getDocType = function (editor) {\n      return editor.getParam('doctype', '<!DOCTYPE html>');\n    };\n    var getDocumentBaseUrl = function (editor) {\n      return editor.getParam('document_base_url', '');\n    };\n    var getBodyId = function (editor) {\n      return getBodySetting(editor, 'body_id', 'tinymce');\n    };\n    var getBodyClass = function (editor) {\n      return getBodySetting(editor, 'body_class', '');\n    };\n    var getContentSecurityPolicy = function (editor) {\n      return editor.getParam('content_security_policy', '');\n    };\n    var shouldPutBrInPre = function (editor) {\n      return editor.getParam('br_in_pre', true);\n    };\n    var getForcedRootBlock = function (editor) {\n      if (editor.getParam('force_p_newlines', false)) {\n        return 'p';\n      }\n      var block = editor.getParam('forced_root_block', 'p');\n      return block === false ? '' : block;\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs', {});\n    };\n    var getBrNewLineSelector = function (editor) {\n      return editor.getParam('br_newline_selector', '.mce-toc h2,figcaption,caption');\n    };\n    var getNoNewLineSelector = function (editor) {\n      return editor.getParam('no_newline_selector', '');\n    };\n    var shouldKeepStyles = function (editor) {\n      return editor.getParam('keep_styles', true);\n    };\n    var shouldEndContainerOnEmptyBlock = function (editor) {\n      return editor.getParam('end_container_on_empty_block', false);\n    };\n    var getFontStyleValues = function (editor) {\n      return Tools.explode(editor.getParam('font_size_style_values', ''));\n    };\n    var getFontSizeClasses = function (editor) {\n      return Tools.explode(editor.getParam('font_size_classes', ''));\n    };\n    var getImagesDataImgFilter = function (editor) {\n      return editor.getParam('images_dataimg_filter', constant(true), 'function');\n    };\n    var isAutomaticUploadsEnabled = function (editor) {\n      return editor.getParam('automatic_uploads', true, 'boolean');\n    };\n    var shouldReuseFileName = function (editor) {\n      return editor.getParam('images_reuse_filename', false, 'boolean');\n    };\n    var shouldReplaceBlobUris = function (editor) {\n      return editor.getParam('images_replace_blob_uris', true, 'boolean');\n    };\n    var getImageUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url', '', 'string');\n    };\n    var getImageUploadBasePath = function (editor) {\n      return editor.getParam('images_upload_base_path', '', 'string');\n    };\n    var getImagesUploadCredentials = function (editor) {\n      return editor.getParam('images_upload_credentials', false, 'boolean');\n    };\n    var getImagesUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler', null, 'function');\n    };\n    var shouldUseContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors', false, 'boolean');\n    };\n    var getInlineBoundarySelector = function (editor) {\n      return editor.getParam('inline_boundaries_selector', 'a[href],code,.mce-annotation', 'string');\n    };\n    var Settings = {\n      getIframeAttrs: getIframeAttrs,\n      getDocType: getDocType,\n      getDocumentBaseUrl: getDocumentBaseUrl,\n      getBodyId: getBodyId,\n      getBodyClass: getBodyClass,\n      getContentSecurityPolicy: getContentSecurityPolicy,\n      shouldPutBrInPre: shouldPutBrInPre,\n      getForcedRootBlock: getForcedRootBlock,\n      getForcedRootBlockAttrs: getForcedRootBlockAttrs,\n      getBrNewLineSelector: getBrNewLineSelector,\n      getNoNewLineSelector: getNoNewLineSelector,\n      shouldKeepStyles: shouldKeepStyles,\n      shouldEndContainerOnEmptyBlock: shouldEndContainerOnEmptyBlock,\n      getFontStyleValues: getFontStyleValues,\n      getFontSizeClasses: getFontSizeClasses,\n      getImagesDataImgFilter: getImagesDataImgFilter,\n      isAutomaticUploadsEnabled: isAutomaticUploadsEnabled,\n      shouldReuseFileName: shouldReuseFileName,\n      shouldReplaceBlobUris: shouldReplaceBlobUris,\n      getImageUploadUrl: getImageUploadUrl,\n      getImageUploadBasePath: getImageUploadBasePath,\n      getImagesUploadCredentials: getImagesUploadCredentials,\n      getImagesUploadHandler: getImagesUploadHandler,\n      shouldUseContentCssCors: shouldUseContentCssCors,\n      getInlineBoundarySelector: getInlineBoundarySelector\n    };\n\n    var isInlineTarget = function (editor, elm) {\n      return is$1(Element.fromDom(elm), Settings.getInlineBoundarySelector(editor));\n    };\n    var isRtl = function (element) {\n      return DOMUtils$1.DOM.getStyle(element, 'direction', true) === 'rtl' || hasStrongRtl(element.textContent);\n    };\n    var findInlineParents = function (isInlineTarget, rootNode, pos) {\n      return filter(DOMUtils$1.DOM.getParents(pos.container(), '*', rootNode), isInlineTarget);\n    };\n    var findRootInline = function (isInlineTarget, rootNode, pos) {\n      var parents = findInlineParents(isInlineTarget, rootNode, pos);\n      return Option.from(parents[parents.length - 1]);\n    };\n    var hasSameParentBlock = function (rootNode, node1, node2) {\n      var block1 = getParentBlock(node1, rootNode);\n      var block2 = getParentBlock(node2, rootNode);\n      return block1 && block1 === block2;\n    };\n    var isAtZwsp = function (pos) {\n      return isBeforeInline(pos) || isAfterInline(pos);\n    };\n    var normalizePosition = function (forward, pos) {\n      if (!pos) {\n        return pos;\n      }\n      var container = pos.container(), offset = pos.offset();\n      if (forward) {\n        if (isCaretContainerInline(container)) {\n          if (NodeType.isText(container.nextSibling)) {\n            return CaretPosition$1(container.nextSibling, 0);\n          } else {\n            return CaretPosition$1.after(container);\n          }\n        } else {\n          return isBeforeInline(pos) ? CaretPosition$1(container, offset + 1) : pos;\n        }\n      } else {\n        if (isCaretContainerInline(container)) {\n          if (NodeType.isText(container.previousSibling)) {\n            return CaretPosition$1(container.previousSibling, container.previousSibling.data.length);\n          } else {\n            return CaretPosition$1.before(container);\n          }\n        } else {\n          return isAfterInline(pos) ? CaretPosition$1(container, offset - 1) : pos;\n        }\n      }\n    };\n    var normalizeForwards = curry(normalizePosition, true);\n    var normalizeBackwards = curry(normalizePosition, false);\n    var InlineUtils = {\n      isInlineTarget: isInlineTarget,\n      findRootInline: findRootInline,\n      isRtl: isRtl,\n      isAtZwsp: isAtZwsp,\n      normalizePosition: normalizePosition,\n      normalizeForwards: normalizeForwards,\n      normalizeBackwards: normalizeBackwards,\n      hasSameParentBlock: hasSameParentBlock\n    };\n\n    var isBeforeRoot = function (rootNode) {\n      return function (elm) {\n        return eq(rootNode, Element.fromDom(elm.dom().parentNode));\n      };\n    };\n    var getParentBlock$1 = function (rootNode, elm) {\n      return contains$3(rootNode, elm) ? closest(elm, function (element) {\n        return isTextBlock(element) || isListItem(element);\n      }, isBeforeRoot(rootNode)) : Option.none();\n    };\n    var placeCaretInEmptyBody = function (editor) {\n      var body = editor.getBody();\n      var node = body.firstChild && editor.dom.isBlock(body.firstChild) ? body.firstChild : body;\n      editor.selection.setCursorLocation(node, 0);\n    };\n    var paddEmptyBody = function (editor) {\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        placeCaretInEmptyBody(editor);\n      }\n    };\n    var willDeleteLastPositionInElement = function (forward, fromPos, elm) {\n      return lift2(CaretFinder.firstPositionIn(elm), CaretFinder.lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = InlineUtils.normalizePosition(true, firstPos);\n        var normalizedLastPos = InlineUtils.normalizePosition(false, lastPos);\n        var normalizedFromPos = InlineUtils.normalizePosition(false, fromPos);\n        if (forward) {\n          return CaretFinder.nextPosition(elm, normalizedFromPos).map(function (nextPos) {\n            return nextPos.isEqual(normalizedLastPos) && fromPos.isEqual(normalizedFirstPos);\n          }).getOr(false);\n        } else {\n          return CaretFinder.prevPosition(elm, normalizedFromPos).map(function (prevPos) {\n            return prevPos.isEqual(normalizedFirstPos) && fromPos.isEqual(normalizedLastPos);\n          }).getOr(false);\n        }\n      }).getOr(true);\n    };\n    var DeleteUtils = {\n      getParentBlock: getParentBlock$1,\n      paddEmptyBody: paddEmptyBody,\n      willDeleteLastPositionInElement: willDeleteLastPositionInElement\n    };\n\n    var ancestor$2 = function (scope, selector, isRoot) {\n      return ancestor$1(scope, selector, isRoot).isSome();\n    };\n\n    var hasWhitespacePreserveParent = function (rootNode, node) {\n      var rootElement = Element.fromDom(rootNode);\n      var startNode = Element.fromDom(node);\n      return ancestor$2(startNode, 'pre,code', curry(eq, rootElement));\n    };\n    var isWhitespace = function (rootNode, node) {\n      return NodeType.isText(node) && /^[ \\t\\r\\n]*$/.test(node.data) && hasWhitespacePreserveParent(rootNode, node) === false;\n    };\n    var isNamedAnchor = function (node) {\n      return NodeType.isElement(node) && node.nodeName === 'A' && node.hasAttribute('name');\n    };\n    var isContent = function (rootNode, node) {\n      return isCaretCandidate(node) && isWhitespace(rootNode, node) === false || isNamedAnchor(node) || isBookmark(node);\n    };\n    var isBookmark = NodeType.hasAttribute('data-mce-bookmark');\n    var isBogus$2 = NodeType.hasAttribute('data-mce-bogus');\n    var isBogusAll$1 = NodeType.hasAttributeValue('data-mce-bogus', 'all');\n    var isEmptyNode = function (targetNode) {\n      var walker, node, brCount = 0;\n      if (isContent(targetNode, targetNode)) {\n        return false;\n      } else {\n        node = targetNode.firstChild;\n        if (!node) {\n          return true;\n        }\n        walker = new TreeWalker(node, targetNode);\n        do {\n          if (isBogusAll$1(node)) {\n            node = walker.next(true);\n            continue;\n          }\n          if (isBogus$2(node)) {\n            node = walker.next();\n            continue;\n          }\n          if (NodeType.isBr(node)) {\n            brCount++;\n            node = walker.next();\n            continue;\n          }\n          if (isContent(targetNode, node)) {\n            return false;\n          }\n          node = walker.next();\n        } while (node);\n        return brCount <= 1;\n      }\n    };\n    var isEmpty$1 = function (elm) {\n      return isEmptyNode(elm.dom());\n    };\n    var Empty = { isEmpty: isEmpty$1 };\n\n    var BlockPosition = Immutable('block', 'position');\n    var BlockBoundary = Immutable('from', 'to');\n    var getBlockPosition = function (rootNode, pos) {\n      var rootElm = Element.fromDom(rootNode);\n      var containerElm = Element.fromDom(pos.container());\n      return DeleteUtils.getParentBlock(rootElm, containerElm).map(function (block) {\n        return BlockPosition(block, pos);\n      });\n    };\n    var isDifferentBlocks = function (blockBoundary) {\n      return eq(blockBoundary.from().block(), blockBoundary.to().block()) === false;\n    };\n    var hasSameParent = function (blockBoundary) {\n      return parent(blockBoundary.from().block()).bind(function (parent1) {\n        return parent(blockBoundary.to().block()).filter(function (parent2) {\n          return eq(parent1, parent2);\n        });\n      }).isSome();\n    };\n    var isEditable = function (blockBoundary) {\n      return NodeType.isContentEditableFalse(blockBoundary.from().block().dom()) === false && NodeType.isContentEditableFalse(blockBoundary.to().block().dom()) === false;\n    };\n    var skipLastBr = function (rootNode, forward, blockPosition) {\n      if (NodeType.isBr(blockPosition.position().getNode()) && Empty.isEmpty(blockPosition.block()) === false) {\n        return CaretFinder.positionIn(false, blockPosition.block().dom()).bind(function (lastPositionInBlock) {\n          if (lastPositionInBlock.isEqual(blockPosition.position())) {\n            return CaretFinder.fromPosition(forward, rootNode, lastPositionInBlock).bind(function (to) {\n              return getBlockPosition(rootNode, to);\n            });\n          } else {\n            return Option.some(blockPosition);\n          }\n        }).getOr(blockPosition);\n      } else {\n        return blockPosition;\n      }\n    };\n    var readFromRange = function (rootNode, forward, rng) {\n      var fromBlockPos = getBlockPosition(rootNode, CaretPosition$1.fromRangeStart(rng));\n      var toBlockPos = fromBlockPos.bind(function (blockPos) {\n        return CaretFinder.fromPosition(forward, rootNode, blockPos.position()).bind(function (to) {\n          return getBlockPosition(rootNode, to).map(function (blockPos) {\n            return skipLastBr(rootNode, forward, blockPos);\n          });\n        });\n      });\n      return lift2(fromBlockPos, toBlockPos, BlockBoundary).filter(function (blockBoundary) {\n        return isDifferentBlocks(blockBoundary) && hasSameParent(blockBoundary) && isEditable(blockBoundary);\n      });\n    };\n    var read$1 = function (rootNode, forward, rng) {\n      return rng.collapsed ? readFromRange(rootNode, forward, rng) : Option.none();\n    };\n    var BlockMergeBoundary = { read: read$1 };\n\n    var dropLast = function (xs) {\n      return xs.slice(0, -1);\n    };\n    var parentsUntil$1 = function (start, root, predicate) {\n      if (contains$3(root, start)) {\n        return dropLast(parents(start, function (elm) {\n          return predicate(elm) || eq(elm, root);\n        }));\n      } else {\n        return [];\n      }\n    };\n    var parents$1 = function (start, root) {\n      return parentsUntil$1(start, root, constant(false));\n    };\n    var parentsAndSelf = function (start, root) {\n      return [start].concat(parents$1(start, root));\n    };\n    var Parents = {\n      parentsUntil: parentsUntil$1,\n      parents: parents$1,\n      parentsAndSelf: parentsAndSelf\n    };\n\n    var getChildrenUntilBlockBoundary = function (block) {\n      var children$1 = children(block);\n      return findIndex(children$1, isBlock).fold(function () {\n        return children$1;\n      }, function (index) {\n        return children$1.slice(0, index);\n      });\n    };\n    var extractChildren = function (block) {\n      var children = getChildrenUntilBlockBoundary(block);\n      each(children, remove$1);\n      return children;\n    };\n    var removeEmptyRoot = function (rootNode, block) {\n      var parents = Parents.parentsAndSelf(block, rootNode);\n      return find(parents.reverse(), Empty.isEmpty).each(remove$1);\n    };\n    var isEmptyBefore = function (el) {\n      return filter(prevSiblings(el), function (el) {\n        return !Empty.isEmpty(el);\n      }).length === 0;\n    };\n    var nestedBlockMerge = function (rootNode, fromBlock, toBlock, insertionPoint) {\n      if (Empty.isEmpty(toBlock)) {\n        PaddingBr.fillWithPaddingBr(toBlock);\n        return CaretFinder.firstPositionIn(toBlock.dom());\n      }\n      if (isEmptyBefore(insertionPoint) && Empty.isEmpty(fromBlock)) {\n        before(insertionPoint, Element.fromTag('br'));\n      }\n      var position = CaretFinder.prevPosition(toBlock.dom(), CaretPosition$1.before(insertionPoint.dom()));\n      each(extractChildren(fromBlock), function (child) {\n        before(insertionPoint, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var sidelongBlockMerge = function (rootNode, fromBlock, toBlock) {\n      if (Empty.isEmpty(toBlock)) {\n        remove$1(toBlock);\n        if (Empty.isEmpty(fromBlock)) {\n          PaddingBr.fillWithPaddingBr(fromBlock);\n        }\n        return CaretFinder.firstPositionIn(fromBlock.dom());\n      }\n      var position = CaretFinder.lastPositionIn(toBlock.dom());\n      each(extractChildren(fromBlock), function (child) {\n        append(toBlock, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var findInsertionPoint = function (toBlock, block) {\n      var parentsAndSelf = Parents.parentsAndSelf(block, toBlock);\n      return Option.from(parentsAndSelf[parentsAndSelf.length - 1]);\n    };\n    var getInsertionPoint = function (fromBlock, toBlock) {\n      return contains$3(toBlock, fromBlock) ? findInsertionPoint(toBlock, fromBlock) : Option.none();\n    };\n    var trimBr = function (first, block) {\n      CaretFinder.positionIn(first, block.dom()).map(function (position) {\n        return position.getNode();\n      }).map(Element.fromDom).filter(isBr).each(remove$1);\n    };\n    var mergeBlockInto = function (rootNode, fromBlock, toBlock) {\n      trimBr(true, fromBlock);\n      trimBr(false, toBlock);\n      return getInsertionPoint(fromBlock, toBlock).fold(curry(sidelongBlockMerge, rootNode, fromBlock, toBlock), curry(nestedBlockMerge, rootNode, fromBlock, toBlock));\n    };\n    var mergeBlocks = function (rootNode, forward, block1, block2) {\n      return forward ? mergeBlockInto(rootNode, block2, block1) : mergeBlockInto(rootNode, block1, block2);\n    };\n    var MergeBlocks = { mergeBlocks: mergeBlocks };\n\n    var backspaceDelete = function (editor, forward) {\n      var position;\n      var rootNode = Element.fromDom(editor.getBody());\n      position = BlockMergeBoundary.read(rootNode.dom(), forward, editor.selection.getRng()).bind(function (blockBoundary) {\n        return MergeBlocks.mergeBlocks(rootNode, forward, blockBoundary.from().block(), blockBoundary.to().block());\n      });\n      position.each(function (pos) {\n        editor.selection.setRng(pos.toRange());\n      });\n      return position.isSome();\n    };\n    var BlockBoundaryDelete = { backspaceDelete: backspaceDelete };\n\n    var deleteRangeMergeBlocks = function (rootNode, selection) {\n      var rng = selection.getRng();\n      return lift2(DeleteUtils.getParentBlock(rootNode, Element.fromDom(rng.startContainer)), DeleteUtils.getParentBlock(rootNode, Element.fromDom(rng.endContainer)), function (block1, block2) {\n        if (eq(block1, block2) === false) {\n          rng.deleteContents();\n          MergeBlocks.mergeBlocks(rootNode, true, block1, block2).each(function (pos) {\n            selection.setRng(pos.toRange());\n          });\n          return true;\n        } else {\n          return false;\n        }\n      }).getOr(false);\n    };\n    var isRawNodeInTable = function (root, rawNode) {\n      var node = Element.fromDom(rawNode);\n      var isRoot = curry(eq, root);\n      return ancestor(node, isTableCell, isRoot).isSome();\n    };\n    var isSelectionInTable = function (root, rng) {\n      return isRawNodeInTable(root, rng.startContainer) || isRawNodeInTable(root, rng.endContainer);\n    };\n    var isEverythingSelected = function (root, rng) {\n      var noPrevious = CaretFinder.prevPosition(root.dom(), CaretPosition$1.fromRangeStart(rng)).isNone();\n      var noNext = CaretFinder.nextPosition(root.dom(), CaretPosition$1.fromRangeEnd(rng)).isNone();\n      return !isSelectionInTable(root, rng) && noPrevious && noNext;\n    };\n    var emptyEditor = function (editor) {\n      editor.setContent('');\n      editor.selection.setCursorLocation();\n      return true;\n    };\n    var deleteRange = function (editor) {\n      var rootNode = Element.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      return isEverythingSelected(rootNode, rng) ? emptyEditor(editor) : deleteRangeMergeBlocks(rootNode, editor.selection);\n    };\n    var backspaceDelete$1 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? false : deleteRange(editor);\n    };\n    var BlockRangeDelete = { backspaceDelete: backspaceDelete$1 };\n\n    var generate$1 = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var argLength = arguments.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var args = new Array(argLength);\n          for (var i = 0; i < args.length; i++) {\n            args[i] = arguments[i];\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              if (arguments.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n              }\n              var target = arguments[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              domGlobals.console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$1 };\n\n    var isBr$5 = function (pos) {\n      return getElementFromPosition(pos).exists(isBr);\n    };\n    var findBr = function (forward, root, pos) {\n      var parentBlocks = filter(Parents.parentsAndSelf(Element.fromDom(pos.container()), root), isBlock);\n      var scope = head(parentBlocks).getOr(root);\n      return CaretFinder.fromPosition(forward, scope.dom(), pos).filter(isBr$5);\n    };\n    var isBeforeBr = function (root, pos) {\n      return getElementFromPosition(pos).exists(isBr) || findBr(true, root, pos).isSome();\n    };\n    var isAfterBr = function (root, pos) {\n      return getElementFromPrevPosition(pos).exists(isBr) || findBr(false, root, pos).isSome();\n    };\n    var findPreviousBr = curry(findBr, false);\n    var findNextBr = curry(findBr, true);\n\n    var is$2 = function (expected) {\n      return function (actual) {\n        return expected === actual;\n      };\n    };\n    var isNbsp = is$2('\\xA0');\n    var isWhiteSpace$1 = function (chr) {\n      return /^[\\r\\n\\t ]$/.test(chr);\n    };\n    var isContent$1 = function (chr) {\n      return !isWhiteSpace$1(chr) && !isNbsp(chr);\n    };\n\n    var isChar = function (forward, predicate, pos) {\n      return Option.from(pos.container()).filter(NodeType.isText).exists(function (text) {\n        var delta = forward ? 0 : -1;\n        return predicate(text.data.charAt(pos.offset() + delta));\n      });\n    };\n    var isBeforeSpace = curry(isChar, true, isWhiteSpace$1);\n    var isAfterSpace = curry(isChar, false, isWhiteSpace$1);\n    var isEmptyText = function (pos) {\n      var container = pos.container();\n      return NodeType.isText(container) && container.data.length === 0;\n    };\n    var isNextToContentEditableFalse = function (relativeOffset, caretPosition) {\n      var node = getChildNodeAtRelativeOffset(relativeOffset, caretPosition);\n      return NodeType.isContentEditableFalse(node) && !NodeType.isBogusAll(node);\n    };\n    var isBeforeContentEditableFalse = curry(isNextToContentEditableFalse, 0);\n    var isAfterContentEditableFalse = curry(isNextToContentEditableFalse, -1);\n    var isNextToTable = function (relativeOffset, caretPosition) {\n      return NodeType.isTable(getChildNodeAtRelativeOffset(relativeOffset, caretPosition));\n    };\n    var isBeforeTable = curry(isNextToTable, 0);\n    var isAfterTable = curry(isNextToTable, -1);\n\n    var isCompoundElement = function (node) {\n      return isTableCell(Element.fromDom(node)) || isListItem(Element.fromDom(node));\n    };\n    var DeleteAction = Adt.generate([\n      { remove: ['element'] },\n      { moveToElement: ['element'] },\n      { moveToPosition: ['position'] }\n    ]);\n    var isAtContentEditableBlockCaret = function (forward, from) {\n      var elm = from.getNode(forward === false);\n      var caretLocation = forward ? 'after' : 'before';\n      return NodeType.isElement(elm) && elm.getAttribute('data-mce-caret') === caretLocation;\n    };\n    var isDeleteFromCefDifferentBlocks = function (root, forward, from, to) {\n      var inSameBlock = function (elm) {\n        return isInline(Element.fromDom(elm)) && !isInSameBlock(from, to, root);\n      };\n      return getRelativeCefElm(!forward, from).fold(function () {\n        return getRelativeCefElm(forward, to).fold(constant(false), inSameBlock);\n      }, inSameBlock);\n    };\n    var deleteEmptyBlockOrMoveToCef = function (root, forward, from, to) {\n      var toCefElm = to.getNode(forward === false);\n      return DeleteUtils.getParentBlock(Element.fromDom(root), Element.fromDom(from.getNode())).map(function (blockElm) {\n        return Empty.isEmpty(blockElm) ? DeleteAction.remove(blockElm.dom()) : DeleteAction.moveToElement(toCefElm);\n      }).orThunk(function () {\n        return Option.some(DeleteAction.moveToElement(toCefElm));\n      });\n    };\n    var findCefPosition = function (root, forward, from) {\n      return CaretFinder.fromPosition(forward, root, from).bind(function (to) {\n        if (isCompoundElement(to.getNode())) {\n          return Option.none();\n        } else if (isDeleteFromCefDifferentBlocks(root, forward, from, to)) {\n          return Option.none();\n        } else if (forward && NodeType.isContentEditableFalse(to.getNode())) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward === false && NodeType.isContentEditableFalse(to.getNode(true))) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward && isAfterContentEditableFalse(from)) {\n          return Option.some(DeleteAction.moveToPosition(to));\n        } else if (forward === false && isBeforeContentEditableFalse(from)) {\n          return Option.some(DeleteAction.moveToPosition(to));\n        } else {\n          return Option.none();\n        }\n      });\n    };\n    var getContentEditableBlockAction = function (forward, elm) {\n      if (forward && NodeType.isContentEditableFalse(elm.nextSibling)) {\n        return Option.some(DeleteAction.moveToElement(elm.nextSibling));\n      } else if (forward === false && NodeType.isContentEditableFalse(elm.previousSibling)) {\n        return Option.some(DeleteAction.moveToElement(elm.previousSibling));\n      } else {\n        return Option.none();\n      }\n    };\n    var skipMoveToActionFromInlineCefToContent = function (root, from, deleteAction) {\n      return deleteAction.fold(function (elm) {\n        return Option.some(DeleteAction.remove(elm));\n      }, function (elm) {\n        return Option.some(DeleteAction.moveToElement(elm));\n      }, function (to) {\n        if (isInSameBlock(from, to, root)) {\n          return Option.none();\n        } else {\n          return Option.some(DeleteAction.moveToPosition(to));\n        }\n      });\n    };\n    var getContentEditableAction = function (root, forward, from) {\n      if (isAtContentEditableBlockCaret(forward, from)) {\n        return getContentEditableBlockAction(forward, from.getNode(forward === false)).fold(function () {\n          return findCefPosition(root, forward, from);\n        }, Option.some);\n      } else {\n        return findCefPosition(root, forward, from).bind(function (deleteAction) {\n          return skipMoveToActionFromInlineCefToContent(root, from, deleteAction);\n        });\n      }\n    };\n    var read$2 = function (root, forward, rng) {\n      var normalizedRange = normalizeRange(forward ? 1 : -1, root, rng);\n      var from = CaretPosition$1.fromRangeStart(normalizedRange);\n      var rootElement = Element.fromDom(root);\n      if (forward === false && isAfterContentEditableFalse(from)) {\n        return Option.some(DeleteAction.remove(from.getNode(true)));\n      } else if (forward && isBeforeContentEditableFalse(from)) {\n        return Option.some(DeleteAction.remove(from.getNode()));\n      } else if (forward === false && isBeforeContentEditableFalse(from) && isAfterBr(rootElement, from)) {\n        return findPreviousBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else if (forward && isAfterContentEditableFalse(from) && isBeforeBr(rootElement, from)) {\n        return findNextBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else {\n        return getContentEditableAction(root, forward, from);\n      }\n    };\n\n    var isCollapsibleWhitespace = function (c) {\n      return ' \\f\\n\\r\\t\\x0B'.indexOf(c) !== -1;\n    };\n    var normalizeContent = function (content, isStartOfContent, isEndOfContent) {\n      var result = foldl(content.split(''), function (acc, c) {\n        if (isCollapsibleWhitespace(c) || c === '\\xA0') {\n          if (acc.previousCharIsSpace || acc.str === '' && isStartOfContent || acc.str.length === content.length - 1 && isEndOfContent) {\n            return {\n              previousCharIsSpace: false,\n              str: acc.str + '\\xA0'\n            };\n          } else {\n            return {\n              previousCharIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            previousCharIsSpace: false,\n            str: acc.str + c\n          };\n        }\n      }, {\n        previousCharIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n    var normalize$1 = function (node, offset, count) {\n      if (count === 0) {\n        return;\n      }\n      var whitespace = node.data.slice(offset, offset + count);\n      var isEndOfContent = offset + count >= node.data.length;\n      var isStartOfContent = offset === 0;\n      node.replaceData(offset, count, normalizeContent(whitespace, isStartOfContent, isEndOfContent));\n    };\n    var normalizeWhitespaceAfter = function (node, offset) {\n      var content = node.data.slice(offset);\n      var whitespaceCount = content.length - lTrim(content).length;\n      return normalize$1(node, offset, whitespaceCount);\n    };\n    var normalizeWhitespaceBefore = function (node, offset) {\n      var content = node.data.slice(0, offset);\n      var whitespaceCount = content.length - rTrim(content).length;\n      return normalize$1(node, offset - whitespaceCount, whitespaceCount);\n    };\n    var mergeTextNodes = function (prevNode, nextNode, normalizeWhitespace) {\n      var whitespaceOffset = rTrim(prevNode.data).length;\n      prevNode.appendData(nextNode.data);\n      remove$1(Element.fromDom(nextNode));\n      if (normalizeWhitespace) {\n        normalizeWhitespaceAfter(prevNode, whitespaceOffset);\n      }\n      return prevNode;\n    };\n\n    var needsReposition = function (pos, elm) {\n      var container = pos.container();\n      var offset = pos.offset();\n      return CaretPosition$1.isTextPosition(pos) === false && container === elm.parentNode && offset > CaretPosition$1.before(elm).offset();\n    };\n    var reposition = function (elm, pos) {\n      return needsReposition(pos, elm) ? CaretPosition$1(pos.container(), pos.offset() - 1) : pos;\n    };\n    var beforeOrStartOf = function (node) {\n      return NodeType.isText(node) ? CaretPosition$1(node, 0) : CaretPosition$1.before(node);\n    };\n    var afterOrEndOf = function (node) {\n      return NodeType.isText(node) ? CaretPosition$1(node, node.data.length) : CaretPosition$1.after(node);\n    };\n    var getPreviousSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate(elm.previousSibling)) {\n        return Option.some(afterOrEndOf(elm.previousSibling));\n      } else {\n        return elm.previousSibling ? CaretFinder.lastPositionIn(elm.previousSibling) : Option.none();\n      }\n    };\n    var getNextSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate(elm.nextSibling)) {\n        return Option.some(beforeOrStartOf(elm.nextSibling));\n      } else {\n        return elm.nextSibling ? CaretFinder.firstPositionIn(elm.nextSibling) : Option.none();\n      }\n    };\n    var findCaretPositionBackwardsFromElm = function (rootElement, elm) {\n      var startPosition = CaretPosition$1.before(elm.previousSibling ? elm.previousSibling : elm.parentNode);\n      return CaretFinder.prevPosition(rootElement, startPosition).fold(function () {\n        return CaretFinder.nextPosition(rootElement, CaretPosition$1.after(elm));\n      }, Option.some);\n    };\n    var findCaretPositionForwardsFromElm = function (rootElement, elm) {\n      return CaretFinder.nextPosition(rootElement, CaretPosition$1.after(elm)).fold(function () {\n        return CaretFinder.prevPosition(rootElement, CaretPosition$1.before(elm));\n      }, Option.some);\n    };\n    var findCaretPositionBackwards = function (rootElement, elm) {\n      return getPreviousSiblingCaretPosition(elm).orThunk(function () {\n        return getNextSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionBackwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPositionForward = function (rootElement, elm) {\n      return getNextSiblingCaretPosition(elm).orThunk(function () {\n        return getPreviousSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionForwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPosition$1 = function (forward, rootElement, elm) {\n      return forward ? findCaretPositionForward(rootElement, elm) : findCaretPositionBackwards(rootElement, elm);\n    };\n    var findCaretPosOutsideElmAfterDelete = function (forward, rootElement, elm) {\n      return findCaretPosition$1(forward, rootElement, elm).map(curry(reposition, elm));\n    };\n    var setSelection = function (editor, forward, pos) {\n      pos.fold(function () {\n        editor.focus();\n      }, function (pos) {\n        editor.selection.setRng(pos.toRange(), forward);\n      });\n    };\n    var eqRawNode = function (rawNode) {\n      return function (elm) {\n        return elm.dom() === rawNode;\n      };\n    };\n    var isBlock$2 = function (editor, elm) {\n      return elm && editor.schema.getBlockElements().hasOwnProperty(name(elm));\n    };\n    var paddEmptyBlock = function (elm) {\n      if (Empty.isEmpty(elm)) {\n        var br = Element.fromHtml('<br data-mce-bogus=\"1\">');\n        empty(elm);\n        append(elm, br);\n        return Option.some(CaretPosition$1.before(br.dom()));\n      } else {\n        return Option.none();\n      }\n    };\n    var deleteNormalized = function (elm, afterDeletePosOpt, normalizeWhitespace) {\n      var prevTextOpt = prevSibling(elm).filter(isText);\n      var nextTextOpt = nextSibling(elm).filter(isText);\n      remove$1(elm);\n      return lift3(prevTextOpt, nextTextOpt, afterDeletePosOpt, function (prev, next, pos) {\n        var prevNode = prev.dom(), nextNode = next.dom();\n        var offset = prevNode.data.length;\n        mergeTextNodes(prevNode, nextNode, normalizeWhitespace);\n        return pos.container() === nextNode ? CaretPosition$1(prevNode, offset) : pos;\n      }).orThunk(function () {\n        if (normalizeWhitespace) {\n          prevTextOpt.each(function (elm) {\n            return normalizeWhitespaceBefore(elm.dom(), elm.dom().length);\n          });\n          nextTextOpt.each(function (elm) {\n            return normalizeWhitespaceAfter(elm.dom(), 0);\n          });\n        }\n        return afterDeletePosOpt;\n      });\n    };\n    var isInlineElement = function (editor, element) {\n      return has(editor.schema.getTextInlineElements(), name(element));\n    };\n    var deleteElement = function (editor, forward, elm, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var afterDeletePos = findCaretPosOutsideElmAfterDelete(forward, editor.getBody(), elm.dom());\n      var parentBlock = ancestor(elm, curry(isBlock$2, editor), eqRawNode(editor.getBody()));\n      var normalizedAfterDeletePos = deleteNormalized(elm, afterDeletePos, isInlineElement(editor, elm));\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      } else {\n        parentBlock.bind(paddEmptyBlock).fold(function () {\n          if (moveCaret) {\n            setSelection(editor, forward, normalizedAfterDeletePos);\n          }\n        }, function (paddPos) {\n          if (moveCaret) {\n            setSelection(editor, forward, Option.some(paddPos));\n          }\n        });\n      }\n    };\n    var DeleteElement = { deleteElement: deleteElement };\n\n    var deleteElement$1 = function (editor, forward) {\n      return function (element) {\n        editor._selectionOverrides.hideFakeCaret();\n        DeleteElement.deleteElement(editor, forward, Element.fromDom(element));\n        return true;\n      };\n    };\n    var moveToElement = function (editor, forward) {\n      return function (element) {\n        var pos = forward ? CaretPosition$1.before(element) : CaretPosition$1.after(element);\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var moveToPosition = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var backspaceDeleteCaret = function (editor, forward) {\n      var result = read$2(editor.getBody(), forward, editor.selection.getRng()).map(function (deleteAction) {\n        return deleteAction.fold(deleteElement$1(editor, forward), moveToElement(editor, forward), moveToPosition(editor));\n      });\n      return result.getOr(false);\n    };\n    var deleteOffscreenSelection = function (rootElement) {\n      each(descendants$1(rootElement, '.mce-offscreen-selection'), remove$1);\n    };\n    var backspaceDeleteRange = function (editor, forward) {\n      var selectedElement = editor.selection.getNode();\n      if (NodeType.isContentEditableFalse(selectedElement)) {\n        deleteOffscreenSelection(Element.fromDom(editor.getBody()));\n        DeleteElement.deleteElement(editor, forward, Element.fromDom(editor.selection.getNode()));\n        DeleteUtils.paddEmptyBody(editor);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var getContentEditableRoot = function (root, node) {\n      while (node && node !== root) {\n        if (NodeType.isContentEditableTrue(node) || NodeType.isContentEditableFalse(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var paddEmptyElement = function (editor) {\n      var br;\n      var ceRoot = getContentEditableRoot(editor.getBody(), editor.selection.getNode());\n      if (NodeType.isContentEditableTrue(ceRoot) && editor.dom.isBlock(ceRoot) && editor.dom.isEmpty(ceRoot)) {\n        br = editor.dom.create('br', { 'data-mce-bogus': '1' });\n        editor.dom.setHTML(ceRoot, '');\n        ceRoot.appendChild(br);\n        editor.selection.setRng(CaretPosition$1.before(br).toRange());\n      }\n      return true;\n    };\n    var backspaceDelete$2 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return backspaceDeleteCaret(editor, forward);\n      } else {\n        return backspaceDeleteRange(editor, forward);\n      }\n    };\n    var CefDelete = {\n      backspaceDelete: backspaceDelete$2,\n      paddEmptyElement: paddEmptyElement\n    };\n\n    var isText$8 = NodeType.isText;\n    var startsWithCaretContainer$1 = function (node) {\n      return isText$8(node) && node.data[0] === Zwsp.ZWSP;\n    };\n    var endsWithCaretContainer$1 = function (node) {\n      return isText$8(node) && node.data[node.data.length - 1] === Zwsp.ZWSP;\n    };\n    var createZwsp = function (node) {\n      return node.ownerDocument.createTextNode(Zwsp.ZWSP);\n    };\n    var insertBefore$1 = function (node) {\n      if (isText$8(node.previousSibling)) {\n        if (endsWithCaretContainer$1(node.previousSibling)) {\n          return node.previousSibling;\n        } else {\n          node.previousSibling.appendData(Zwsp.ZWSP);\n          return node.previousSibling;\n        }\n      } else if (isText$8(node)) {\n        if (startsWithCaretContainer$1(node)) {\n          return node;\n        } else {\n          node.insertData(0, Zwsp.ZWSP);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        node.parentNode.insertBefore(newNode, node);\n        return newNode;\n      }\n    };\n    var insertAfter$1 = function (node) {\n      if (isText$8(node.nextSibling)) {\n        if (startsWithCaretContainer$1(node.nextSibling)) {\n          return node.nextSibling;\n        } else {\n          node.nextSibling.insertData(0, Zwsp.ZWSP);\n          return node.nextSibling;\n        }\n      } else if (isText$8(node)) {\n        if (endsWithCaretContainer$1(node)) {\n          return node;\n        } else {\n          node.appendData(Zwsp.ZWSP);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        if (node.nextSibling) {\n          node.parentNode.insertBefore(newNode, node.nextSibling);\n        } else {\n          node.parentNode.appendChild(newNode);\n        }\n        return newNode;\n      }\n    };\n    var insertInline$1 = function (before, node) {\n      return before ? insertBefore$1(node) : insertAfter$1(node);\n    };\n    var insertInlineBefore = curry(insertInline$1, true);\n    var insertInlineAfter = curry(insertInline$1, false);\n\n    var insertInlinePos = function (pos, before) {\n      if (NodeType.isText(pos.container())) {\n        return insertInline$1(before, pos.container());\n      } else {\n        return insertInline$1(before, pos.getNode());\n      }\n    };\n    var isPosCaretContainer = function (pos, caret) {\n      var caretNode = caret.get();\n      return caretNode && pos.container() === caretNode && isCaretContainerInline(caretNode);\n    };\n    var renderCaret = function (caret, location) {\n      return location.fold(function (element) {\n        CaretContainerRemove.remove(caret.get());\n        var text = insertInlineBefore(element);\n        caret.set(text);\n        return Option.some(CaretPosition$1(text, text.length - 1));\n      }, function (element) {\n        return CaretFinder.firstPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            CaretContainerRemove.remove(caret.get());\n            var text = insertInlinePos(pos, true);\n            caret.set(text);\n            return CaretPosition$1(text, 1);\n          } else {\n            return CaretPosition$1(caret.get(), 1);\n          }\n        });\n      }, function (element) {\n        return CaretFinder.lastPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            CaretContainerRemove.remove(caret.get());\n            var text = insertInlinePos(pos, false);\n            caret.set(text);\n            return CaretPosition$1(text, text.length - 1);\n          } else {\n            return CaretPosition$1(caret.get(), caret.get().length - 1);\n          }\n        });\n      }, function (element) {\n        CaretContainerRemove.remove(caret.get());\n        var text = insertInlineAfter(element);\n        caret.set(text);\n        return Option.some(CaretPosition$1(text, 1));\n      });\n    };\n    var BoundaryCaret = { renderCaret: renderCaret };\n\n    var evaluateUntil = function (fns, args) {\n      for (var i = 0; i < fns.length; i++) {\n        var result = fns[i].apply(null, args);\n        if (result.isSome()) {\n          return result;\n        }\n      }\n      return Option.none();\n    };\n    var LazyEvaluator = { evaluateUntil: evaluateUntil };\n\n    var Location = Adt.generate([\n      { before: ['element'] },\n      { start: ['element'] },\n      { end: ['element'] },\n      { after: ['element'] }\n    ]);\n    var rescope = function (rootNode, node) {\n      var parentBlock = getParentBlock(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var before$3 = function (isInlineTarget, rootNode, pos) {\n      var nPos = InlineUtils.normalizeForwards(pos);\n      var scope = rescope(rootNode, nPos.container());\n      return InlineUtils.findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return CaretFinder.nextPosition(scope, nPos).bind(curry(InlineUtils.findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.before(inline);\n        });\n      }, Option.none);\n    };\n    var isNotInsideFormatCaretContainer = function (rootNode, elm) {\n      return getParentCaretContainer(rootNode, elm) === null;\n    };\n    var findInsideRootInline = function (isInlineTarget, rootNode, pos) {\n      return InlineUtils.findRootInline(isInlineTarget, rootNode, pos).filter(curry(isNotInsideFormatCaretContainer, rootNode));\n    };\n    var start = function (isInlineTarget, rootNode, pos) {\n      var nPos = InlineUtils.normalizeBackwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var prevPos = CaretFinder.prevPosition(inline, nPos);\n        return prevPos.isNone() ? Option.some(Location.start(inline)) : Option.none();\n      });\n    };\n    var end = function (isInlineTarget, rootNode, pos) {\n      var nPos = InlineUtils.normalizeForwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var nextPos = CaretFinder.nextPosition(inline, nPos);\n        return nextPos.isNone() ? Option.some(Location.end(inline)) : Option.none();\n      });\n    };\n    var after$2 = function (isInlineTarget, rootNode, pos) {\n      var nPos = InlineUtils.normalizeBackwards(pos);\n      var scope = rescope(rootNode, nPos.container());\n      return InlineUtils.findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return CaretFinder.prevPosition(scope, nPos).bind(curry(InlineUtils.findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.after(inline);\n        });\n      }, Option.none);\n    };\n    var isValidLocation = function (location) {\n      return InlineUtils.isRtl(getElement(location)) === false;\n    };\n    var readLocation = function (isInlineTarget, rootNode, pos) {\n      var location = LazyEvaluator.evaluateUntil([\n        before$3,\n        start,\n        end,\n        after$2\n      ], [\n        isInlineTarget,\n        rootNode,\n        pos\n      ]);\n      return location.filter(isValidLocation);\n    };\n    var getElement = function (location) {\n      return location.fold(identity, identity, identity, identity);\n    };\n    var getName = function (location) {\n      return location.fold(constant('before'), constant('start'), constant('end'), constant('after'));\n    };\n    var outside = function (location) {\n      return location.fold(Location.before, Location.before, Location.after, Location.after);\n    };\n    var inside = function (location) {\n      return location.fold(Location.start, Location.start, Location.end, Location.end);\n    };\n    var isEq$1 = function (location1, location2) {\n      return getName(location1) === getName(location2) && getElement(location1) === getElement(location2);\n    };\n    var betweenInlines = function (forward, isInlineTarget, rootNode, from, to, location) {\n      return lift2(InlineUtils.findRootInline(isInlineTarget, rootNode, from), InlineUtils.findRootInline(isInlineTarget, rootNode, to), function (fromInline, toInline) {\n        if (fromInline !== toInline && InlineUtils.hasSameParentBlock(rootNode, fromInline, toInline)) {\n          return Location.after(forward ? fromInline : toInline);\n        } else {\n          return location;\n        }\n      }).getOr(location);\n    };\n    var skipNoMovement = function (fromLocation, toLocation) {\n      return fromLocation.fold(constant(true), function (fromLocation) {\n        return !isEq$1(fromLocation, toLocation);\n      });\n    };\n    var findLocationTraverse = function (forward, isInlineTarget, rootNode, fromLocation, pos) {\n      var from = InlineUtils.normalizePosition(forward, pos);\n      var to = CaretFinder.fromPosition(forward, rootNode, from).map(curry(InlineUtils.normalizePosition, forward));\n      var location = to.fold(function () {\n        return fromLocation.map(outside);\n      }, function (to) {\n        return readLocation(isInlineTarget, rootNode, to).map(curry(betweenInlines, forward, isInlineTarget, rootNode, from, to)).filter(curry(skipNoMovement, fromLocation));\n      });\n      return location.filter(isValidLocation);\n    };\n    var findLocationSimple = function (forward, location) {\n      if (forward) {\n        return location.fold(compose(Option.some, Location.start), Option.none, compose(Option.some, Location.after), Option.none);\n      } else {\n        return location.fold(Option.none, compose(Option.some, Location.before), Option.none, compose(Option.some, Location.end));\n      }\n    };\n    var findLocation = function (forward, isInlineTarget, rootNode, pos) {\n      var from = InlineUtils.normalizePosition(forward, pos);\n      var fromLocation = readLocation(isInlineTarget, rootNode, from);\n      return readLocation(isInlineTarget, rootNode, from).bind(curry(findLocationSimple, forward)).orThunk(function () {\n        return findLocationTraverse(forward, isInlineTarget, rootNode, fromLocation, pos);\n      });\n    };\n    var BoundaryLocation = {\n      readLocation: readLocation,\n      findLocation: findLocation,\n      prevLocation: curry(findLocation, false),\n      nextLocation: curry(findLocation, true),\n      getElement: getElement,\n      outside: outside,\n      inside: inside\n    };\n\n    var hasSelectionModifyApi = function (editor) {\n      return isFunction(editor.selection.getSel().modify);\n    };\n    var moveRel = function (forward, selection, pos) {\n      var delta = forward ? 1 : -1;\n      selection.setRng(CaretPosition$1(pos.container(), pos.offset() + delta).toRange());\n      selection.getSel().modify('move', forward ? 'forward' : 'backward', 'word');\n      return true;\n    };\n    var moveByWord = function (forward, editor) {\n      var rng = editor.selection.getRng();\n      var pos = forward ? CaretPosition$1.fromRangeEnd(rng) : CaretPosition$1.fromRangeStart(rng);\n      if (!hasSelectionModifyApi(editor)) {\n        return false;\n      } else if (forward && isBeforeInline(pos)) {\n        return moveRel(true, editor.selection, pos);\n      } else if (!forward && isAfterInline(pos)) {\n        return moveRel(false, editor.selection, pos);\n      } else {\n        return false;\n      }\n    };\n    var WordSelection = {\n      hasSelectionModifyApi: hasSelectionModifyApi,\n      moveByWord: moveByWord\n    };\n\n    var setCaretPosition = function (editor, pos) {\n      var rng = editor.dom.createRng();\n      rng.setStart(pos.container(), pos.offset());\n      rng.setEnd(pos.container(), pos.offset());\n      editor.selection.setRng(rng);\n    };\n    var isFeatureEnabled = function (editor) {\n      return editor.settings.inline_boundaries !== false;\n    };\n    var setSelected = function (state, elm) {\n      if (state) {\n        elm.setAttribute('data-mce-selected', 'inline-boundary');\n      } else {\n        elm.removeAttribute('data-mce-selected');\n      }\n    };\n    var renderCaretLocation = function (editor, caret, location) {\n      return BoundaryCaret.renderCaret(caret, location).map(function (pos) {\n        setCaretPosition(editor, pos);\n        return location;\n      });\n    };\n    var findLocation$1 = function (editor, caret, forward) {\n      var rootNode = editor.getBody();\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      var location = BoundaryLocation.findLocation(forward, isInlineTarget, rootNode, from);\n      return location.bind(function (location) {\n        return renderCaretLocation(editor, caret, location);\n      });\n    };\n    var toggleInlines = function (isInlineTarget, dom, elms) {\n      var selectedInlines = filter(dom.select('*[data-mce-selected=\"inline-boundary\"]'), isInlineTarget);\n      var targetInlines = filter(elms, isInlineTarget);\n      each(difference(selectedInlines, targetInlines), curry(setSelected, false));\n      each(difference(targetInlines, selectedInlines), curry(setSelected, true));\n    };\n    var safeRemoveCaretContainer = function (editor, caret) {\n      if (editor.selection.isCollapsed() && editor.composing !== true && caret.get()) {\n        var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        if (CaretPosition$1.isTextPosition(pos) && InlineUtils.isAtZwsp(pos) === false) {\n          setCaretPosition(editor, CaretContainerRemove.removeAndReposition(caret.get(), pos));\n          caret.set(null);\n        }\n      }\n    };\n    var renderInsideInlineCaret = function (isInlineTarget, editor, caret, elms) {\n      if (editor.selection.isCollapsed()) {\n        var inlines = filter(elms, isInlineTarget);\n        each(inlines, function (inline) {\n          var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n          BoundaryLocation.readLocation(isInlineTarget, editor.getBody(), pos).bind(function (location) {\n            return renderCaretLocation(editor, caret, location);\n          });\n        });\n      }\n    };\n    var move = function (editor, caret, forward) {\n      return function () {\n        return isFeatureEnabled(editor) ? findLocation$1(editor, caret, forward).isSome() : false;\n      };\n    };\n    var moveWord = function (forward, editor, caret) {\n      return function () {\n        return isFeatureEnabled(editor) ? WordSelection.moveByWord(forward, editor) : false;\n      };\n    };\n    var setupSelectedState = function (editor) {\n      var caret = Cell(null);\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      editor.on('NodeChange', function (e) {\n        if (isFeatureEnabled(editor)) {\n          toggleInlines(isInlineTarget, editor.dom, e.parents);\n          safeRemoveCaretContainer(editor, caret);\n          renderInsideInlineCaret(isInlineTarget, editor, caret, e.parents);\n        }\n      });\n      return caret;\n    };\n    var moveNextWord = curry(moveWord, true);\n    var movePrevWord = curry(moveWord, false);\n    var BoundarySelection = {\n      move: move,\n      moveNextWord: moveNextWord,\n      movePrevWord: movePrevWord,\n      setupSelectedState: setupSelectedState,\n      setCaretPosition: setCaretPosition\n    };\n\n    var isFeatureEnabled$1 = function (editor) {\n      return editor.settings.inline_boundaries !== false;\n    };\n    var rangeFromPositions = function (from, to) {\n      var range = domGlobals.document.createRange();\n      range.setStart(from.container(), from.offset());\n      range.setEnd(to.container(), to.offset());\n      return range;\n    };\n    var hasOnlyTwoOrLessPositionsLeft = function (elm) {\n      return lift2(CaretFinder.firstPositionIn(elm), CaretFinder.lastPositionIn(elm), function (firstPos, lastPos) {\n        var normalizedFirstPos = InlineUtils.normalizePosition(true, firstPos);\n        var normalizedLastPos = InlineUtils.normalizePosition(false, lastPos);\n        return CaretFinder.nextPosition(elm, normalizedFirstPos).map(function (pos) {\n          return pos.isEqual(normalizedLastPos);\n        }).getOr(true);\n      }).getOr(true);\n    };\n    var setCaretLocation = function (editor, caret) {\n      return function (location) {\n        return BoundaryCaret.renderCaret(caret, location).map(function (pos) {\n          BoundarySelection.setCaretPosition(editor, pos);\n          return true;\n        }).getOr(false);\n      };\n    };\n    var deleteFromTo = function (editor, caret, from, to) {\n      var rootNode = editor.getBody();\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      editor.undoManager.ignore(function () {\n        editor.selection.setRng(rangeFromPositions(from, to));\n        editor.execCommand('Delete');\n        BoundaryLocation.readLocation(isInlineTarget, rootNode, CaretPosition$1.fromRangeStart(editor.selection.getRng())).map(BoundaryLocation.inside).map(setCaretLocation(editor, caret));\n      });\n      editor.nodeChanged();\n    };\n    var rescope$1 = function (rootNode, node) {\n      var parentBlock = getParentBlock(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var backspaceDeleteCollapsed = function (editor, caret, forward, from) {\n      var rootNode = rescope$1(editor.getBody(), from.container());\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      var fromLocation = BoundaryLocation.readLocation(isInlineTarget, rootNode, from);\n      return fromLocation.bind(function (location) {\n        if (forward) {\n          return location.fold(constant(Option.some(BoundaryLocation.inside(location))), Option.none, constant(Option.some(BoundaryLocation.outside(location))), Option.none);\n        } else {\n          return location.fold(Option.none, constant(Option.some(BoundaryLocation.outside(location))), Option.none, constant(Option.some(BoundaryLocation.inside(location))));\n        }\n      }).map(setCaretLocation(editor, caret)).getOrThunk(function () {\n        var toPosition = CaretFinder.navigate(forward, rootNode, from);\n        var toLocation = toPosition.bind(function (pos) {\n          return BoundaryLocation.readLocation(isInlineTarget, rootNode, pos);\n        });\n        if (fromLocation.isSome() && toLocation.isSome()) {\n          return InlineUtils.findRootInline(isInlineTarget, rootNode, from).map(function (elm) {\n            if (hasOnlyTwoOrLessPositionsLeft(elm)) {\n              DeleteElement.deleteElement(editor, forward, Element.fromDom(elm));\n              return true;\n            } else {\n              return false;\n            }\n          }).getOr(false);\n        } else {\n          return toLocation.bind(function (_) {\n            return toPosition.map(function (to) {\n              if (forward) {\n                deleteFromTo(editor, caret, from, to);\n              } else {\n                deleteFromTo(editor, caret, to, from);\n              }\n              return true;\n            });\n          }).getOr(false);\n        }\n      });\n    };\n    var backspaceDelete$3 = function (editor, caret, forward) {\n      if (editor.selection.isCollapsed() && isFeatureEnabled$1(editor)) {\n        var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        return backspaceDeleteCollapsed(editor, caret, forward, from);\n      }\n      return false;\n    };\n    var InlineBoundaryDelete = { backspaceDelete: backspaceDelete$3 };\n\n    var tableCellRng = Immutable('start', 'end');\n    var tableSelection = Immutable('rng', 'table', 'cells');\n    var deleteAction = Adt.generate([\n      { removeTable: ['element'] },\n      { emptyCells: ['cells'] }\n    ]);\n    var isRootFromElement = function (root) {\n      return curry(eq, root);\n    };\n    var getClosestCell = function (container, isRoot) {\n      return closest$1(Element.fromDom(container), 'td,th', isRoot);\n    };\n    var getClosestTable = function (cell, isRoot) {\n      return ancestor$1(cell, 'table', isRoot);\n    };\n    var isExpandedCellRng = function (cellRng) {\n      return eq(cellRng.start(), cellRng.end()) === false;\n    };\n    var getTableFromCellRng = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start(), isRoot).bind(function (startParentTable) {\n        return getClosestTable(cellRng.end(), isRoot).bind(function (endParentTable) {\n          return eq(startParentTable, endParentTable) ? Option.some(startParentTable) : Option.none();\n        });\n      });\n    };\n    var getTableCells = function (table) {\n      return descendants$1(table, 'td,th');\n    };\n    var getCellRangeFromStartTable = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start(), isRoot).bind(function (table) {\n        return last(getTableCells(table)).map(function (endCell) {\n          return tableCellRng(cellRng.start(), endCell);\n        });\n      });\n    };\n    var partialSelection = function (isRoot, rng) {\n      var startCell = getClosestCell(rng.startContainer, isRoot);\n      var endCell = getClosestCell(rng.endContainer, isRoot);\n      return rng.collapsed ? Option.none() : lift2(startCell, endCell, tableCellRng).fold(function () {\n        return startCell.fold(function () {\n          return endCell.bind(function (endCell) {\n            return getClosestTable(endCell, isRoot).bind(function (table) {\n              return head(getTableCells(table)).map(function (startCell) {\n                return tableCellRng(startCell, endCell);\n              });\n            });\n          });\n        }, function (startCell) {\n          return getClosestTable(startCell, isRoot).bind(function (table) {\n            return last(getTableCells(table)).map(function (endCell) {\n              return tableCellRng(startCell, endCell);\n            });\n          });\n        });\n      }, function (cellRng) {\n        return isWithinSameTable(isRoot, cellRng) ? Option.none() : getCellRangeFromStartTable(cellRng, isRoot);\n      });\n    };\n    var isWithinSameTable = function (isRoot, cellRng) {\n      return getTableFromCellRng(cellRng, isRoot).isSome();\n    };\n    var getCellRng = function (rng, isRoot) {\n      var startCell = getClosestCell(rng.startContainer, isRoot);\n      var endCell = getClosestCell(rng.endContainer, isRoot);\n      return lift2(startCell, endCell, tableCellRng).filter(isExpandedCellRng).filter(function (cellRng) {\n        return isWithinSameTable(isRoot, cellRng);\n      }).orThunk(function () {\n        return partialSelection(isRoot, rng);\n      });\n    };\n    var getTableSelectionFromCellRng = function (cellRng, isRoot) {\n      return getTableFromCellRng(cellRng, isRoot).map(function (table) {\n        return tableSelection(cellRng, table, getTableCells(table));\n      });\n    };\n    var getTableSelectionFromRng = function (root, rng) {\n      var isRoot = isRootFromElement(root);\n      return getCellRng(rng, isRoot).bind(function (cellRng) {\n        return getTableSelectionFromCellRng(cellRng, isRoot);\n      });\n    };\n    var getCellIndex = function (cells, cell) {\n      return findIndex(cells, function (x) {\n        return eq(x, cell);\n      });\n    };\n    var getSelectedCells = function (tableSelection) {\n      return lift2(getCellIndex(tableSelection.cells(), tableSelection.rng().start()), getCellIndex(tableSelection.cells(), tableSelection.rng().end()), function (startIndex, endIndex) {\n        return tableSelection.cells().slice(startIndex, endIndex + 1);\n      });\n    };\n    var getAction = function (tableSelection) {\n      return getSelectedCells(tableSelection).map(function (selected) {\n        var cells = tableSelection.cells();\n        return selected.length === cells.length ? deleteAction.removeTable(tableSelection.table()) : deleteAction.emptyCells(selected);\n      });\n    };\n    var getActionFromCells = function (cells) {\n      return deleteAction.emptyCells(cells);\n    };\n    var getActionFromRange = function (root, rng) {\n      return getTableSelectionFromRng(root, rng).bind(getAction);\n    };\n    var TableDeleteAction = {\n      getActionFromRange: getActionFromRange,\n      getActionFromCells: getActionFromCells\n    };\n\n    var getRanges = function (selection) {\n      var ranges = [];\n      if (selection) {\n        for (var i = 0; i < selection.rangeCount; i++) {\n          ranges.push(selection.getRangeAt(i));\n        }\n      }\n      return ranges;\n    };\n    var getSelectedNodes = function (ranges) {\n      return bind(ranges, function (range) {\n        var node = getSelectedNode(range);\n        return node ? [Element.fromDom(node)] : [];\n      });\n    };\n    var hasMultipleRanges = function (selection) {\n      return getRanges(selection).length > 1;\n    };\n    var MultiRange = {\n      getRanges: getRanges,\n      getSelectedNodes: getSelectedNodes,\n      hasMultipleRanges: hasMultipleRanges\n    };\n\n    var getCellsFromRanges = function (ranges) {\n      return filter(MultiRange.getSelectedNodes(ranges), isTableCell);\n    };\n    var getCellsFromElement = function (elm) {\n      var selectedCells = descendants$1(elm, 'td[data-mce-selected],th[data-mce-selected]');\n      return selectedCells;\n    };\n    var getCellsFromElementOrRanges = function (ranges, element) {\n      var selectedCells = getCellsFromElement(element);\n      var rangeCells = getCellsFromRanges(ranges);\n      return selectedCells.length > 0 ? selectedCells : rangeCells;\n    };\n    var getCellsFromEditor = function (editor) {\n      return getCellsFromElementOrRanges(MultiRange.getRanges(editor.selection.getSel()), Element.fromDom(editor.getBody()));\n    };\n    var TableCellSelection = {\n      getCellsFromRanges: getCellsFromRanges,\n      getCellsFromElement: getCellsFromElement,\n      getCellsFromElementOrRanges: getCellsFromElementOrRanges,\n      getCellsFromEditor: getCellsFromEditor\n    };\n\n    var emptyCells = function (editor, cells) {\n      each(cells, PaddingBr.fillWithPaddingBr);\n      editor.selection.setCursorLocation(cells[0].dom(), 0);\n      return true;\n    };\n    var deleteTableElement = function (editor, table) {\n      DeleteElement.deleteElement(editor, false, table);\n      return true;\n    };\n    var deleteCellRange = function (editor, rootElm, rng) {\n      return TableDeleteAction.getActionFromRange(rootElm, rng).map(function (action) {\n        return action.fold(curry(deleteTableElement, editor), curry(emptyCells, editor));\n      });\n    };\n    var deleteCaptionRange = function (editor, caption) {\n      return emptyElement(editor, caption);\n    };\n    var deleteTableRange = function (editor, rootElm, rng, startElm) {\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCellRange(editor, rootElm, rng);\n      }, function (caption) {\n        return deleteCaptionRange(editor, caption);\n      }).getOr(false);\n    };\n    var deleteRange$1 = function (editor, startElm) {\n      var rootNode = Element.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      var selectedCells = TableCellSelection.getCellsFromEditor(editor);\n      return selectedCells.length !== 0 ? emptyCells(editor, selectedCells) : deleteTableRange(editor, rootNode, rng, startElm);\n    };\n    var getParentCell = function (rootElm, elm) {\n      return find(Parents.parentsAndSelf(elm, rootElm), isTableCell);\n    };\n    var getParentCaption = function (rootElm, elm) {\n      return find(Parents.parentsAndSelf(elm, rootElm), function (elm) {\n        return name(elm) === 'caption';\n      });\n    };\n    var deleteBetweenCells = function (editor, rootElm, forward, fromCell, from) {\n      return CaretFinder.navigate(forward, editor.getBody(), from).bind(function (to) {\n        return getParentCell(rootElm, Element.fromDom(to.getNode())).map(function (toCell) {\n          return eq(toCell, fromCell) === false;\n        });\n      });\n    };\n    var emptyElement = function (editor, elm) {\n      PaddingBr.fillWithPaddingBr(elm);\n      editor.selection.setCursorLocation(elm.dom(), 0);\n      return Option.some(true);\n    };\n    var isDeleteOfLastCharPos = function (fromCaption, forward, from, to) {\n      return CaretFinder.firstPositionIn(fromCaption.dom()).bind(function (first) {\n        return CaretFinder.lastPositionIn(fromCaption.dom()).map(function (last) {\n          return forward ? from.isEqual(first) && to.isEqual(last) : from.isEqual(last) && to.isEqual(first);\n        });\n      }).getOr(true);\n    };\n    var emptyCaretCaption = function (editor, elm) {\n      return emptyElement(editor, elm);\n    };\n    var validateCaretCaption = function (rootElm, fromCaption, to) {\n      return getParentCaption(rootElm, Element.fromDom(to.getNode())).map(function (toCaption) {\n        return eq(toCaption, fromCaption) === false;\n      });\n    };\n    var deleteCaretInsideCaption = function (editor, rootElm, forward, fromCaption, from) {\n      return CaretFinder.navigate(forward, editor.getBody(), from).bind(function (to) {\n        return isDeleteOfLastCharPos(fromCaption, forward, from, to) ? emptyCaretCaption(editor, fromCaption) : validateCaretCaption(rootElm, fromCaption, to);\n      }).or(Option.some(true));\n    };\n    var deleteCaretCells = function (editor, forward, rootElm, startElm) {\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return getParentCell(rootElm, startElm).bind(function (fromCell) {\n        return Empty.isEmpty(fromCell) ? emptyElement(editor, fromCell) : deleteBetweenCells(editor, rootElm, forward, fromCell, from);\n      });\n    };\n    var deleteCaretCaption = function (editor, forward, rootElm, fromCaption) {\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return Empty.isEmpty(fromCaption) ? emptyElement(editor, fromCaption) : deleteCaretInsideCaption(editor, rootElm, forward, fromCaption, from);\n    };\n    var deleteCaret = function (editor, forward, startElm) {\n      var rootElm = Element.fromDom(editor.getBody());\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCaretCells(editor, forward, rootElm, startElm);\n      }, function (fromCaption) {\n        return deleteCaretCaption(editor, forward, rootElm, fromCaption);\n      }).getOr(false);\n    };\n    var backspaceDelete$4 = function (editor, forward) {\n      var startElm = Element.fromDom(editor.selection.getStart(true));\n      var cells = TableCellSelection.getCellsFromEditor(editor);\n      return editor.selection.isCollapsed() && cells.length === 0 ? deleteCaret(editor, forward, startElm) : deleteRange$1(editor, startElm);\n    };\n    var TableDelete = { backspaceDelete: backspaceDelete$4 };\n\n    var isEq$2 = FormatUtils.isEq;\n    var matchesUnInheritedFormatSelector = function (ed, node, name) {\n      var formatList = ed.formatter.get(name);\n      if (formatList) {\n        for (var i = 0; i < formatList.length; i++) {\n          if (formatList[i].inherit === false && ed.dom.is(node, formatList[i].selector)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var matchParents = function (editor, node, name, vars) {\n      var root = editor.dom.getRoot();\n      if (node === root) {\n        return false;\n      }\n      node = editor.dom.getParent(node, function (node) {\n        if (matchesUnInheritedFormatSelector(editor, node, name)) {\n          return true;\n        }\n        return node.parentNode === root || !!matchNode(editor, node, name, vars, true);\n      });\n      return matchNode(editor, node, name, vars);\n    };\n    var matchName = function (dom, node, format) {\n      if (isEq$2(node, format.inline)) {\n        return true;\n      }\n      if (isEq$2(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return node.nodeType === 1 && dom.is(node, format.selector);\n      }\n    };\n    var matchItems = function (dom, node, format, itemName, similar, vars) {\n      var key, value;\n      var items = format[itemName];\n      var i;\n      if (format.onmatch) {\n        return format.onmatch(node, format, itemName);\n      }\n      if (items) {\n        if (typeof items.length === 'undefined') {\n          for (key in items) {\n            if (items.hasOwnProperty(key)) {\n              if (itemName === 'attributes') {\n                value = dom.getAttrib(node, key);\n              } else {\n                value = FormatUtils.getStyle(dom, node, key);\n              }\n              if (similar && !value && !format.exact) {\n                return;\n              }\n              if ((!similar || format.exact) && !isEq$2(value, FormatUtils.normalizeStyleValue(dom, FormatUtils.replaceVars(items[key], vars), key))) {\n                return;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < items.length; i++) {\n            if (itemName === 'attributes' ? dom.getAttrib(node, items[i]) : FormatUtils.getStyle(dom, node, items[i])) {\n              return format;\n            }\n          }\n        }\n      }\n      return format;\n    };\n    var matchNode = function (ed, node, name, vars, similar) {\n      var formatList = ed.formatter.get(name);\n      var format, i, x, classes;\n      var dom = ed.dom;\n      if (formatList && node) {\n        for (i = 0; i < formatList.length; i++) {\n          format = formatList[i];\n          if (matchName(ed.dom, node, format) && matchItems(dom, node, format, 'attributes', similar, vars) && matchItems(dom, node, format, 'styles', similar, vars)) {\n            if (classes = format.classes) {\n              for (x = 0; x < classes.length; x++) {\n                if (!ed.dom.hasClass(node, classes[x])) {\n                  return;\n                }\n              }\n            }\n            return format;\n          }\n        }\n      }\n    };\n    var match = function (editor, name, vars, node) {\n      var startNode;\n      if (node) {\n        return matchParents(editor, node, name, vars);\n      }\n      node = editor.selection.getNode();\n      if (matchParents(editor, node, name, vars)) {\n        return true;\n      }\n      startNode = editor.selection.getStart();\n      if (startNode !== node) {\n        if (matchParents(editor, startNode, name, vars)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var matchAll = function (editor, names, vars) {\n      var startElement;\n      var matchedFormatNames = [];\n      var checkedMap = {};\n      startElement = editor.selection.getStart();\n      editor.dom.getParent(startElement, function (node) {\n        var i, name;\n        for (i = 0; i < names.length; i++) {\n          name = names[i];\n          if (!checkedMap[name] && matchNode(editor, node, name, vars)) {\n            checkedMap[name] = true;\n            matchedFormatNames.push(name);\n          }\n        }\n      }, editor.dom.getRoot());\n      return matchedFormatNames;\n    };\n    var canApply = function (editor, name) {\n      var formatList = editor.formatter.get(name);\n      var startNode, parents, i, x, selector;\n      var dom = editor.dom;\n      if (formatList) {\n        startNode = editor.selection.getStart();\n        parents = FormatUtils.getParents(dom, startNode);\n        for (x = formatList.length - 1; x >= 0; x--) {\n          selector = formatList[x].selector;\n          if (!selector || formatList[x].defaultBlock) {\n            return true;\n          }\n          for (i = parents.length - 1; i >= 0; i--) {\n            if (dom.is(parents[i], selector)) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    };\n    var MatchFormat = {\n      matchNode: matchNode,\n      matchName: matchName,\n      match: match,\n      matchAll: matchAll,\n      canApply: canApply,\n      matchesUnInheritedFormatSelector: matchesUnInheritedFormatSelector\n    };\n\n    var splitText = function (node, offset) {\n      return node.splitText(offset);\n    };\n    var split$1 = function (rng) {\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      if (startContainer === endContainer && NodeType.isText(startContainer)) {\n        if (startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          endContainer = splitText(startContainer, startOffset);\n          startContainer = endContainer.previousSibling;\n          if (endOffset > startOffset) {\n            endOffset = endOffset - startOffset;\n            startContainer = endContainer = splitText(endContainer, endOffset).previousSibling;\n            endOffset = endContainer.nodeValue.length;\n            startOffset = 0;\n          } else {\n            endOffset = 0;\n          }\n        }\n      } else {\n        if (NodeType.isText(startContainer) && startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          startContainer = splitText(startContainer, startOffset);\n          startOffset = 0;\n        }\n        if (NodeType.isText(endContainer) && endOffset > 0 && endOffset < endContainer.nodeValue.length) {\n          endContainer = splitText(endContainer, endOffset).previousSibling;\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n    var SplitRange = { split: split$1 };\n\n    var ZWSP$1 = Zwsp.ZWSP, CARET_ID$1 = '_mce_caret';\n    var importNode = function (ownerDocument, node) {\n      return ownerDocument.importNode(node, true);\n    };\n    var getEmptyCaretContainers = function (node) {\n      var nodes = [];\n      while (node) {\n        if (node.nodeType === 3 && node.nodeValue !== ZWSP$1 || node.childNodes.length > 1) {\n          return [];\n        }\n        if (node.nodeType === 1) {\n          nodes.push(node);\n        }\n        node = node.firstChild;\n      }\n      return nodes;\n    };\n    var isCaretContainerEmpty = function (node) {\n      return getEmptyCaretContainers(node).length > 0;\n    };\n    var findFirstTextNode = function (node) {\n      var walker;\n      if (node) {\n        walker = new TreeWalker(node, node);\n        for (node = walker.current(); node; node = walker.next()) {\n          if (node.nodeType === 3) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var createCaretContainer = function (fill) {\n      var caretContainer = Element.fromTag('span');\n      setAll(caretContainer, {\n        'id': CARET_ID$1,\n        'data-mce-bogus': '1',\n        'data-mce-type': 'format-caret'\n      });\n      if (fill) {\n        append(caretContainer, Element.fromText(ZWSP$1));\n      }\n      return caretContainer;\n    };\n    var trimZwspFromCaretContainer = function (caretContainerNode) {\n      var textNode = findFirstTextNode(caretContainerNode);\n      if (textNode && textNode.nodeValue.charAt(0) === ZWSP$1) {\n        textNode.deleteData(0, 1);\n      }\n      return textNode;\n    };\n    var removeCaretContainerNode = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (isCaretContainerEmpty(node)) {\n        DeleteElement.deleteElement(editor, false, Element.fromDom(node), moveCaret);\n      } else {\n        var rng = selection.getRng();\n        var block = dom.getParent(node, dom.isBlock);\n        var textNode = trimZwspFromCaretContainer(node);\n        if (rng.startContainer === textNode && rng.startOffset > 0) {\n          rng.setStart(textNode, rng.startOffset - 1);\n        }\n        if (rng.endContainer === textNode && rng.endOffset > 0) {\n          rng.setEnd(textNode, rng.endOffset - 1);\n        }\n        dom.remove(node, true);\n        if (block && dom.isEmpty(block)) {\n          PaddingBr.fillWithPaddingBr(Element.fromDom(block));\n        }\n        selection.setRng(rng);\n      }\n    };\n    var removeCaretContainer = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (!node) {\n        node = getParentCaretContainer(editor.getBody(), selection.getStart());\n        if (!node) {\n          while (node = dom.get(CARET_ID$1)) {\n            removeCaretContainerNode(editor, node, false);\n          }\n        }\n      } else {\n        removeCaretContainerNode(editor, node, moveCaret);\n      }\n    };\n    var insertCaretContainerNode = function (editor, caretContainer, formatNode) {\n      var dom = editor.dom, block = dom.getParent(formatNode, curry(FormatUtils.isTextBlock, editor));\n      if (block && dom.isEmpty(block)) {\n        formatNode.parentNode.replaceChild(caretContainer, formatNode);\n      } else {\n        PaddingBr.removeTrailingBr(Element.fromDom(formatNode));\n        if (dom.isEmpty(formatNode)) {\n          formatNode.parentNode.replaceChild(caretContainer, formatNode);\n        } else {\n          dom.insertAfter(caretContainer, formatNode);\n        }\n      }\n    };\n    var appendNode = function (parentNode, node) {\n      parentNode.appendChild(node);\n      return node;\n    };\n    var insertFormatNodesIntoCaretContainer = function (formatNodes, caretContainer) {\n      var innerMostFormatNode = foldr(formatNodes, function (parentNode, formatNode) {\n        return appendNode(parentNode, formatNode.cloneNode(false));\n      }, caretContainer);\n      return appendNode(innerMostFormatNode, innerMostFormatNode.ownerDocument.createTextNode(ZWSP$1));\n    };\n    var applyCaretFormat = function (editor, name, vars) {\n      var rng, caretContainer, textNode, offset, bookmark, container, text;\n      var selection = editor.selection;\n      rng = selection.getRng(true);\n      offset = rng.startOffset;\n      container = rng.startContainer;\n      text = container.nodeValue;\n      caretContainer = getParentCaretContainer(editor.getBody(), selection.getStart());\n      if (caretContainer) {\n        textNode = findFirstTextNode(caretContainer);\n      }\n      var wordcharRegex = /[^\\s\\u00a0\\u00ad\\u200b\\ufeff]/;\n      if (text && offset > 0 && offset < text.length && wordcharRegex.test(text.charAt(offset)) && wordcharRegex.test(text.charAt(offset - 1))) {\n        bookmark = selection.getBookmark();\n        rng.collapse(true);\n        rng = ExpandRange.expandRng(editor, rng, editor.formatter.get(name));\n        rng = SplitRange.split(rng);\n        editor.formatter.apply(name, vars, rng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        if (!caretContainer || textNode.nodeValue !== ZWSP$1) {\n          caretContainer = importNode(editor.getDoc(), createCaretContainer(true).dom());\n          textNode = caretContainer.firstChild;\n          rng.insertNode(caretContainer);\n          offset = 1;\n          editor.formatter.apply(name, vars, caretContainer);\n        } else {\n          editor.formatter.apply(name, vars, caretContainer);\n        }\n        selection.setCursorLocation(textNode, offset);\n      }\n    };\n    var removeCaretFormat = function (editor, name, vars, similar) {\n      var dom = editor.dom, selection = editor.selection;\n      var container, offset, bookmark;\n      var hasContentAfter, node, formatNode;\n      var parents = [], rng = selection.getRng();\n      var caretContainer;\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      node = container;\n      if (container.nodeType === 3) {\n        if (offset !== container.nodeValue.length) {\n          hasContentAfter = true;\n        }\n        node = node.parentNode;\n      }\n      while (node) {\n        if (MatchFormat.matchNode(editor, node, name, vars, similar)) {\n          formatNode = node;\n          break;\n        }\n        if (node.nextSibling) {\n          hasContentAfter = true;\n        }\n        parents.push(node);\n        node = node.parentNode;\n      }\n      if (!formatNode) {\n        return;\n      }\n      if (hasContentAfter) {\n        bookmark = selection.getBookmark();\n        rng.collapse(true);\n        var expandedRng = ExpandRange.expandRng(editor, rng, editor.formatter.get(name), true);\n        expandedRng = SplitRange.split(expandedRng);\n        editor.formatter.remove(name, vars, expandedRng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        caretContainer = getParentCaretContainer(editor.getBody(), formatNode);\n        var newCaretContainer = createCaretContainer(false).dom();\n        var caretNode = insertFormatNodesIntoCaretContainer(parents, newCaretContainer);\n        if (caretContainer) {\n          insertCaretContainerNode(editor, newCaretContainer, caretContainer);\n        } else {\n          insertCaretContainerNode(editor, newCaretContainer, formatNode);\n        }\n        removeCaretContainerNode(editor, caretContainer, false);\n        selection.setCursorLocation(caretNode, 1);\n        if (dom.isEmpty(formatNode)) {\n          dom.remove(formatNode);\n        }\n      }\n    };\n    var disableCaretContainer = function (editor, keyCode) {\n      var selection = editor.selection, body = editor.getBody();\n      removeCaretContainer(editor, null, false);\n      if ((keyCode === 8 || keyCode === 46) && selection.isCollapsed() && selection.getStart().innerHTML === ZWSP$1) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n      if (keyCode === 37 || keyCode === 39) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n    };\n    var setup$2 = function (editor) {\n      editor.on('mouseup keydown', function (e) {\n        disableCaretContainer(editor, e.keyCode);\n      });\n    };\n    var replaceWithCaretFormat = function (targetNode, formatNodes) {\n      var caretContainer = createCaretContainer(false);\n      var innerMost = insertFormatNodesIntoCaretContainer(formatNodes, caretContainer.dom());\n      before(Element.fromDom(targetNode), caretContainer);\n      remove$1(Element.fromDom(targetNode));\n      return CaretPosition$1(innerMost, 0);\n    };\n    var isFormatElement = function (editor, element) {\n      var inlineElements = editor.schema.getTextInlineElements();\n      return inlineElements.hasOwnProperty(name(element)) && !isCaretNode(element.dom()) && !NodeType.isBogus(element.dom());\n    };\n    var isEmptyCaretFormatElement = function (element) {\n      return isCaretNode(element.dom()) && isCaretContainerEmpty(element.dom());\n    };\n\n    var getParentInlines = function (rootElm, startElm) {\n      var parents = Parents.parentsAndSelf(startElm, rootElm);\n      return findIndex(parents, isBlock).fold(constant(parents), function (index) {\n        return parents.slice(0, index);\n      });\n    };\n    var hasOnlyOneChild$1 = function (elm) {\n      return children(elm).length === 1;\n    };\n    var deleteLastPosition = function (forward, editor, target, parentInlines) {\n      var isFormatElement$1 = curry(isFormatElement, editor);\n      var formatNodes = map(filter(parentInlines, isFormatElement$1), function (elm) {\n        return elm.dom();\n      });\n      if (formatNodes.length === 0) {\n        DeleteElement.deleteElement(editor, forward, target);\n      } else {\n        var pos = replaceWithCaretFormat(target.dom(), formatNodes);\n        editor.selection.setRng(pos.toRange());\n      }\n    };\n    var deleteCaret$1 = function (editor, forward) {\n      var rootElm = Element.fromDom(editor.getBody());\n      var startElm = Element.fromDom(editor.selection.getStart());\n      var parentInlines = filter(getParentInlines(rootElm, startElm), hasOnlyOneChild$1);\n      return last(parentInlines).map(function (target) {\n        var fromPos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        if (DeleteUtils.willDeleteLastPositionInElement(forward, fromPos, target.dom()) && !isEmptyCaretFormatElement(target)) {\n          deleteLastPosition(forward, editor, target, parentInlines);\n          return true;\n        } else {\n          return false;\n        }\n      }).getOr(false);\n    };\n    var backspaceDelete$5 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$1(editor, forward) : false;\n    };\n    var InlineFormatDelete = { backspaceDelete: backspaceDelete$5 };\n\n    var getPos$1 = function (elm) {\n      var x = 0, y = 0;\n      var offsetParent = elm;\n      while (offsetParent && offsetParent.nodeType) {\n        x += offsetParent.offsetLeft || 0;\n        y += offsetParent.offsetTop || 0;\n        offsetParent = offsetParent.offsetParent;\n      }\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var fireScrollIntoViewEvent = function (editor, elm, alignToTop) {\n      var scrollEvent = {\n        elm: elm,\n        alignToTop: alignToTop\n      };\n      editor.fire('scrollIntoView', scrollEvent);\n      return scrollEvent.isDefaultPrevented();\n    };\n    var scrollElementIntoView = function (editor, elm, alignToTop) {\n      var y, viewPort;\n      var dom = editor.dom;\n      var root = dom.getRoot();\n      var viewPortY, viewPortH, offsetY = 0;\n      if (fireScrollIntoViewEvent(editor, elm, alignToTop)) {\n        return;\n      }\n      if (!NodeType.isElement(elm)) {\n        return;\n      }\n      if (alignToTop === false) {\n        offsetY = elm.offsetHeight;\n      }\n      if (root.nodeName !== 'BODY') {\n        var scrollContainer = editor.selection.getScrollContainer();\n        if (scrollContainer) {\n          y = getPos$1(elm).y - getPos$1(scrollContainer).y + offsetY;\n          viewPortH = scrollContainer.clientHeight;\n          viewPortY = scrollContainer.scrollTop;\n          if (y < viewPortY || y + 25 > viewPortY + viewPortH) {\n            scrollContainer.scrollTop = y < viewPortY ? y : y - viewPortH + 25;\n          }\n          return;\n        }\n      }\n      viewPort = dom.getViewPort(editor.getWin());\n      y = dom.getPos(elm).y + offsetY;\n      viewPortY = viewPort.y;\n      viewPortH = viewPort.h;\n      if (y < viewPort.y || y + 25 > viewPortY + viewPortH) {\n        editor.getWin().scrollTo(0, y < viewPortY ? y : y - viewPortH + 25);\n      }\n    };\n    var getViewPortRect = function (editor) {\n      if (editor.inline) {\n        return editor.getBody().getBoundingClientRect();\n      } else {\n        var win = editor.getWin();\n        return {\n          left: 0,\n          right: win.innerWidth,\n          top: 0,\n          bottom: win.innerHeight,\n          width: win.innerWidth,\n          height: win.innerHeight\n        };\n      }\n    };\n    var scrollBy = function (editor, dx, dy) {\n      if (editor.inline) {\n        editor.getBody().scrollLeft += dx;\n        editor.getBody().scrollTop += dy;\n      } else {\n        editor.getWin().scrollBy(dx, dy);\n      }\n    };\n    var scrollRangeIntoView = function (editor, rng) {\n      head(CaretPosition.fromRangeStart(rng).getClientRects()).each(function (rngRect) {\n        var bodyRect = getViewPortRect(editor);\n        var overflow = getOverflow(bodyRect, rngRect);\n        var margin = 4;\n        var dx = overflow.x > 0 ? overflow.x + margin : overflow.x - margin;\n        var dy = overflow.y > 0 ? overflow.y + margin : overflow.y - margin;\n        scrollBy(editor, overflow.x !== 0 ? dx : 0, overflow.y !== 0 ? dy : 0);\n      });\n    };\n    var ScrollIntoView = {\n      scrollElementIntoView: scrollElementIntoView,\n      scrollRangeIntoView: scrollRangeIntoView\n    };\n\n    var isContentEditableTrue$2 = NodeType.isContentEditableTrue;\n    var isContentEditableFalse$6 = NodeType.isContentEditableFalse;\n    var showCaret = function (direction, editor, node, before, scrollIntoView) {\n      return editor._selectionOverrides.showCaret(direction, node, before, scrollIntoView);\n    };\n    var getNodeRange = function (node) {\n      var rng = node.ownerDocument.createRange();\n      rng.selectNode(node);\n      return rng;\n    };\n    var selectNode = function (editor, node) {\n      var e = editor.fire('BeforeObjectSelected', { target: node });\n      if (e.isDefaultPrevented()) {\n        return null;\n      }\n      return getNodeRange(node);\n    };\n    var renderCaretAtRange = function (editor, range, scrollIntoView) {\n      var normalizedRange = normalizeRange(1, editor.getBody(), range);\n      var caretPosition = CaretPosition$1.fromRangeStart(normalizedRange);\n      var caretPositionNode = caretPosition.getNode();\n      if (isContentEditableFalse$6(caretPositionNode)) {\n        return showCaret(1, editor, caretPositionNode, !caretPosition.isAtEnd(), false);\n      }\n      var caretPositionBeforeNode = caretPosition.getNode(true);\n      if (isContentEditableFalse$6(caretPositionBeforeNode)) {\n        return showCaret(1, editor, caretPositionBeforeNode, false, false);\n      }\n      var ceRoot = editor.dom.getParent(caretPosition.getNode(), function (node) {\n        return isContentEditableFalse$6(node) || isContentEditableTrue$2(node);\n      });\n      if (isContentEditableFalse$6(ceRoot)) {\n        return showCaret(1, editor, ceRoot, false, scrollIntoView);\n      }\n      return null;\n    };\n    var renderRangeCaret = function (editor, range, scrollIntoView) {\n      if (!range || !range.collapsed) {\n        return range;\n      }\n      var caretRange = renderCaretAtRange(editor, range, scrollIntoView);\n      if (caretRange) {\n        return caretRange;\n      }\n      return range;\n    };\n    var moveToRange = function (editor, rng) {\n      editor.selection.setRng(rng);\n      ScrollIntoView.scrollRangeIntoView(editor, editor.selection.getRng());\n    };\n\n    var trimEmptyTextNode$1 = function (dom, node) {\n      if (NodeType.isText(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var deleteContentAndShowCaret = function (editor, range, node, direction, forward, peekCaretPosition) {\n      var caretRange = showCaret(direction, editor, peekCaretPosition.getNode(!forward), forward, true);\n      if (range.collapsed) {\n        var deleteRange = range.cloneRange();\n        if (forward) {\n          deleteRange.setEnd(caretRange.startContainer, caretRange.startOffset);\n        } else {\n          deleteRange.setStart(caretRange.endContainer, caretRange.endOffset);\n        }\n        deleteRange.deleteContents();\n      } else {\n        range.deleteContents();\n      }\n      editor.selection.setRng(caretRange);\n      trimEmptyTextNode$1(editor.dom, node);\n      return true;\n    };\n    var deleteCefBoundaryText = function (editor, forward) {\n      var range = editor.selection.getRng();\n      if (!NodeType.isText(range.commonAncestorContainer)) {\n        return false;\n      }\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.next);\n      var getPrevVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.prev);\n      var getNextPosFn = forward ? getNextVisualCaretPosition : getPrevVisualCaretPosition;\n      var isBeforeContentEditableFalseFn = forward ? isBeforeContentEditableFalse : isAfterContentEditableFalse;\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var nextCaretPosition = InlineUtils.normalizePosition(forward, getNextPosFn(caretPosition));\n      if (!nextCaretPosition) {\n        return false;\n      } else if (isBeforeContentEditableFalseFn(nextCaretPosition)) {\n        return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, nextCaretPosition);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeContentEditableFalseFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, peekCaretPosition);\n        }\n      }\n      return false;\n    };\n    var backspaceDelete$6 = function (editor, forward) {\n      return deleteCefBoundaryText(editor, forward);\n    };\n    var CefBoundaryDelete = { backspaceDelete: backspaceDelete$6 };\n\n    var nativeCommand = function (editor, command) {\n      editor.getDoc().execCommand(command, false, null);\n    };\n    var deleteCommand = function (editor) {\n      if (CefDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (CefBoundaryDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (InlineBoundaryDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (BlockBoundaryDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (TableDelete.backspaceDelete(editor)) {\n        return;\n      } else if (BlockRangeDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (InlineFormatDelete.backspaceDelete(editor, false)) {\n        return;\n      } else {\n        nativeCommand(editor, 'Delete');\n        DeleteUtils.paddEmptyBody(editor);\n      }\n    };\n    var forwardDeleteCommand = function (editor) {\n      if (CefDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (CefBoundaryDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (InlineBoundaryDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (BlockBoundaryDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (TableDelete.backspaceDelete(editor)) {\n        return;\n      } else if (BlockRangeDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (InlineFormatDelete.backspaceDelete(editor, true)) {\n        return;\n      } else {\n        nativeCommand(editor, 'ForwardDelete');\n      }\n    };\n    var DeleteCommands = {\n      deleteCommand: deleteCommand,\n      forwardDeleteCommand: forwardDeleteCommand\n    };\n\n    var getSpecifiedFontProp = function (propName, rootElm, elm) {\n      var getProperty = function (elm) {\n        return getRaw(elm, propName);\n      };\n      var isRoot = function (elm) {\n        return eq(Element.fromDom(rootElm), elm);\n      };\n      return closest(Element.fromDom(elm), function (elm) {\n        return getProperty(elm).isSome();\n      }, isRoot).bind(getProperty);\n    };\n    var round$1 = function (number, precision) {\n      var factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    var toPt = function (fontSize, precision) {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round$1(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      }\n      return fontSize;\n    };\n    var normalizeFontFamily = function (fontFamily) {\n      return fontFamily.replace(/[\\'\\\"\\\\]/g, '').replace(/,\\s+/g, ',');\n    };\n    var getComputedFontProp = function (propName, elm) {\n      return Option.from(DOMUtils$1.DOM.getStyle(elm, propName, true));\n    };\n    var getFontProp = function (propName) {\n      return function (rootElm, elm) {\n        return Option.from(elm).map(Element.fromDom).filter(isElement).bind(function (element) {\n          return getSpecifiedFontProp(propName, rootElm, element.dom()).or(getComputedFontProp(propName, element.dom()));\n        }).getOr('');\n      };\n    };\n    var FontInfo = {\n      getFontSize: getFontProp('font-size'),\n      getFontFamily: compose(normalizeFontFamily, getFontProp('font-family')),\n      toPt: toPt\n    };\n\n    var findFirstCaretElement = function (editor) {\n      return CaretFinder.firstPositionIn(editor.getBody()).map(function (caret) {\n        var container = caret.container();\n        return NodeType.isText(container) ? container.parentNode : container;\n      });\n    };\n    var isRangeAtStartOfNode = function (rng, root) {\n      return rng.startContainer === root && rng.startOffset === 0;\n    };\n    var getCaretElement = function (editor) {\n      return Option.from(editor.selection.getRng()).bind(function (rng) {\n        var root = editor.getBody();\n        return isRangeAtStartOfNode(rng, root) ? Option.none() : Option.from(editor.selection.getStart(true));\n      });\n    };\n    var fromFontSizeNumber = function (editor, value) {\n      if (/^[0-9\\.]+$/.test(value)) {\n        var fontSizeNumber = parseInt(value, 10);\n        if (fontSizeNumber >= 1 && fontSizeNumber <= 7) {\n          var fontSizes = Settings.getFontStyleValues(editor);\n          var fontClasses = Settings.getFontSizeClasses(editor);\n          if (fontClasses) {\n            return fontClasses[fontSizeNumber - 1] || value;\n          } else {\n            return fontSizes[fontSizeNumber - 1] || value;\n          }\n        } else {\n          return value;\n        }\n      } else {\n        return value;\n      }\n    };\n    var fontNameAction = function (editor, value) {\n      editor.formatter.toggle('fontname', { value: fromFontSizeNumber(editor, value) });\n      editor.nodeChanged();\n    };\n    var fontNameQuery = function (editor) {\n      return getCaretElement(editor).fold(function () {\n        return findFirstCaretElement(editor).map(function (caretElement) {\n          return FontInfo.getFontFamily(editor.getBody(), caretElement);\n        }).getOr('');\n      }, function (caretElement) {\n        return FontInfo.getFontFamily(editor.getBody(), caretElement);\n      });\n    };\n    var fontSizeAction = function (editor, value) {\n      editor.formatter.toggle('fontsize', { value: fromFontSizeNumber(editor, value) });\n      editor.nodeChanged();\n    };\n    var fontSizeQuery = function (editor) {\n      return getCaretElement(editor).fold(function () {\n        return findFirstCaretElement(editor).map(function (caretElement) {\n          return FontInfo.getFontSize(editor.getBody(), caretElement);\n        }).getOr('');\n      }, function (caretElement) {\n        return FontInfo.getFontSize(editor.getBody(), caretElement);\n      });\n    };\n\n    var isEq$3 = function (rng1, rng2) {\n      return rng1 && rng2 && (rng1.startContainer === rng2.startContainer && rng1.startOffset === rng2.startOffset) && (rng1.endContainer === rng2.endContainer && rng1.endOffset === rng2.endOffset);\n    };\n    var RangeCompare = { isEq: isEq$3 };\n\n    var findParent = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var hasParent = function (node, rootNode, predicate) {\n      return findParent(node, rootNode, predicate) !== null;\n    };\n    var hasParentWithName = function (node, rootNode, name) {\n      return hasParent(node, rootNode, function (node) {\n        return node.nodeName === name;\n      });\n    };\n    var isTable$2 = function (node) {\n      return node && node.nodeName === 'TABLE';\n    };\n    var isTableCell$3 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var isCeFalseCaretContainer = function (node, rootNode) {\n      return isCaretContainer(node) && hasParent(node, rootNode, isCaretNode) === false;\n    };\n    var hasBrBeforeAfter = function (dom, node, left) {\n      var walker = new TreeWalker(node, dom.getParent(node.parentNode, dom.isBlock) || dom.getRoot());\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (NodeType.isBr(node)) {\n          return true;\n        }\n      }\n    };\n    var isPrevNode = function (node, name) {\n      return node.previousSibling && node.previousSibling.nodeName === name;\n    };\n    var hasContentEditableFalseParent = function (body, node) {\n      while (node && node !== body) {\n        if (NodeType.isContentEditableFalse(node)) {\n          return true;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    };\n    var findTextNodeRelative = function (dom, isAfterNode, collapsed, left, startNode) {\n      var walker, lastInlineElement, parentBlockContainer;\n      var body = dom.getRoot();\n      var node;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      parentBlockContainer = dom.getParent(startNode.parentNode, dom.isBlock) || body;\n      if (left && NodeType.isBr(startNode) && isAfterNode && dom.isEmpty(parentBlockContainer)) {\n        return Option.some(CaretPosition(startNode.parentNode, dom.nodeIndex(startNode)));\n      }\n      walker = new TreeWalker(startNode, parentBlockContainer);\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (dom.getContentEditableParent(node) === 'false' || isCeFalseCaretContainer(node, body)) {\n          return Option.none();\n        }\n        if (NodeType.isText(node) && node.nodeValue.length > 0) {\n          if (hasParentWithName(node, body, 'A') === false) {\n            return Option.some(CaretPosition(node, left ? node.nodeValue.length : 0));\n          }\n          return Option.none();\n        }\n        if (dom.isBlock(node) || nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          return Option.none();\n        }\n        lastInlineElement = node;\n      }\n      if (collapsed && lastInlineElement) {\n        return Option.some(CaretPosition(lastInlineElement, 0));\n      }\n      return Option.none();\n    };\n    var normalizeEndPoint = function (dom, collapsed, start, rng) {\n      var container, offset, walker;\n      var body = dom.getRoot();\n      var node, nonEmptyElementsMap;\n      var directionLeft, isAfterNode, normalized = false;\n      container = rng[(start ? 'start' : 'end') + 'Container'];\n      offset = rng[(start ? 'start' : 'end') + 'Offset'];\n      isAfterNode = NodeType.isElement(container) && offset === container.childNodes.length;\n      nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      directionLeft = start;\n      if (isCaretContainer(container)) {\n        return Option.none();\n      }\n      if (NodeType.isElement(container) && offset > container.childNodes.length - 1) {\n        directionLeft = false;\n      }\n      if (NodeType.isDocument(container)) {\n        container = body;\n        offset = 0;\n      }\n      if (container === body) {\n        if (directionLeft) {\n          node = container.childNodes[offset > 0 ? offset - 1 : 0];\n          if (node) {\n            if (isCaretContainer(node)) {\n              return Option.none();\n            }\n            if (nonEmptyElementsMap[node.nodeName] || isTable$2(node)) {\n              return Option.none();\n            }\n          }\n        }\n        if (container.hasChildNodes()) {\n          offset = Math.min(!directionLeft && offset > 0 ? offset - 1 : offset, container.childNodes.length - 1);\n          container = container.childNodes[offset];\n          offset = NodeType.isText(container) && isAfterNode ? container.data.length : 0;\n          if (!collapsed && container === body.lastChild && isTable$2(container)) {\n            return Option.none();\n          }\n          if (hasContentEditableFalseParent(body, container) || isCaretContainer(container)) {\n            return Option.none();\n          }\n          if (container.hasChildNodes() && isTable$2(container) === false) {\n            node = container;\n            walker = new TreeWalker(container, body);\n            do {\n              if (NodeType.isContentEditableFalse(node) || isCaretContainer(node)) {\n                normalized = false;\n                break;\n              }\n              if (NodeType.isText(node) && node.nodeValue.length > 0) {\n                offset = directionLeft ? 0 : node.nodeValue.length;\n                container = node;\n                normalized = true;\n                break;\n              }\n              if (nonEmptyElementsMap[node.nodeName.toLowerCase()] && !isTableCell$3(node)) {\n                offset = dom.nodeIndex(node);\n                container = node.parentNode;\n                if (!directionLeft) {\n                  offset++;\n                }\n                normalized = true;\n                break;\n              }\n            } while (node = directionLeft ? walker.next() : walker.prev());\n          }\n        }\n      }\n      if (collapsed) {\n        if (NodeType.isText(container) && offset === 0) {\n          findTextNodeRelative(dom, isAfterNode, collapsed, true, container).each(function (pos) {\n            container = pos.container();\n            offset = pos.offset();\n            normalized = true;\n          });\n        }\n        if (NodeType.isElement(container)) {\n          node = container.childNodes[offset];\n          if (!node) {\n            node = container.childNodes[offset - 1];\n          }\n          if (node && NodeType.isBr(node) && !isPrevNode(node, 'A') && !hasBrBeforeAfter(dom, node, false) && !hasBrBeforeAfter(dom, node, true)) {\n            findTextNodeRelative(dom, isAfterNode, collapsed, true, node).each(function (pos) {\n              container = pos.container();\n              offset = pos.offset();\n              normalized = true;\n            });\n          }\n        }\n      }\n      if (directionLeft && !collapsed && NodeType.isText(container) && offset === container.nodeValue.length) {\n        findTextNodeRelative(dom, isAfterNode, collapsed, false, container).each(function (pos) {\n          container = pos.container();\n          offset = pos.offset();\n          normalized = true;\n        });\n      }\n      return normalized ? Option.some(CaretPosition(container, offset)) : Option.none();\n    };\n    var normalize$2 = function (dom, rng) {\n      var collapsed = rng.collapsed, normRng = rng.cloneRange();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      normalizeEndPoint(dom, collapsed, true, normRng).each(function (pos) {\n        if (!collapsed || !CaretPosition.isAbove(startPos, pos)) {\n          normRng.setStart(pos.container(), pos.offset());\n        }\n      });\n      if (!collapsed) {\n        normalizeEndPoint(dom, collapsed, false, normRng).each(function (pos) {\n          normRng.setEnd(pos.container(), pos.offset());\n        });\n      }\n      if (collapsed) {\n        normRng.collapse(true);\n      }\n      return RangeCompare.isEq(rng, normRng) ? Option.none() : Option.some(normRng);\n    };\n    var NormalizeRange = { normalize: normalize$2 };\n\n    var hasRightSideContent = function (schema, container, parentBlock) {\n      var walker = new TreeWalker(container, parentBlock);\n      var node;\n      var nonEmptyElementsMap = schema.getNonEmptyElements();\n      while (node = walker.next()) {\n        if (nonEmptyElementsMap[node.nodeName.toLowerCase()] || node.length > 0) {\n          return true;\n        }\n      }\n    };\n    var scrollToBr = function (dom, selection, brElm) {\n      var marker = dom.create('span', {}, '&nbsp;');\n      brElm.parentNode.insertBefore(marker, brElm);\n      selection.scrollIntoView(marker);\n      dom.remove(marker);\n    };\n    var moveSelectionToBr = function (dom, selection, brElm, extraBr) {\n      var rng = dom.createRng();\n      if (!extraBr) {\n        rng.setStartAfter(brElm);\n        rng.setEndAfter(brElm);\n      } else {\n        rng.setStartBefore(brElm);\n        rng.setEndBefore(brElm);\n      }\n      selection.setRng(rng);\n    };\n    var insertBrAtCaret = function (editor, evt) {\n      var selection = editor.selection;\n      var dom = editor.dom;\n      var rng = selection.getRng();\n      var brElm;\n      var extraBr;\n      NormalizeRange.normalize(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      var offset = rng.startOffset;\n      var container = rng.startContainer;\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        var isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && container.nodeType === 3) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var parentBlock = dom.getParent(container, dom.isBlock);\n      var containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      var isControlKey = evt && evt.ctrlKey;\n      if (containerBlockName === 'LI' && !isControlKey) {\n        parentBlock = containerBlock;\n      }\n      if (container && container.nodeType === 3 && offset >= container.nodeValue.length) {\n        if (!hasRightSideContent(editor.schema, container, parentBlock)) {\n          brElm = dom.create('br');\n          rng.insertNode(brElm);\n          rng.setStartAfter(brElm);\n          rng.setEndAfter(brElm);\n          extraBr = true;\n        }\n      }\n      brElm = dom.create('br');\n      rangeInsertNode(dom, rng, brElm);\n      scrollToBr(dom, selection, brElm);\n      moveSelectionToBr(dom, selection, brElm, extraBr);\n      editor.undoManager.add();\n    };\n    var insertBrBefore = function (editor, inline) {\n      var br = Element.fromTag('br');\n      before(Element.fromDom(inline), br);\n      editor.undoManager.add();\n    };\n    var insertBrAfter = function (editor, inline) {\n      if (!hasBrAfter(editor.getBody(), inline)) {\n        after(Element.fromDom(inline), Element.fromTag('br'));\n      }\n      var br = Element.fromTag('br');\n      after(Element.fromDom(inline), br);\n      scrollToBr(editor.dom, editor.selection, br.dom());\n      moveSelectionToBr(editor.dom, editor.selection, br.dom(), false);\n      editor.undoManager.add();\n    };\n    var isBeforeBr$1 = function (pos) {\n      return NodeType.isBr(pos.getNode());\n    };\n    var hasBrAfter = function (rootNode, startNode) {\n      if (isBeforeBr$1(CaretPosition$1.after(startNode))) {\n        return true;\n      } else {\n        return CaretFinder.nextPosition(rootNode, CaretPosition$1.after(startNode)).map(function (pos) {\n          return NodeType.isBr(pos.getNode());\n        }).getOr(false);\n      }\n    };\n    var isAnchorLink = function (elm) {\n      return elm && elm.nodeName === 'A' && 'href' in elm;\n    };\n    var isInsideAnchor = function (location) {\n      return location.fold(constant(false), isAnchorLink, isAnchorLink, constant(false));\n    };\n    var readInlineAnchorLocation = function (editor) {\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      var position = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return BoundaryLocation.readLocation(isInlineTarget, editor.getBody(), position).filter(isInsideAnchor);\n    };\n    var insertBrOutsideAnchor = function (editor, location) {\n      location.fold(noop, curry(insertBrBefore, editor), curry(insertBrAfter, editor), noop);\n    };\n    var insert = function (editor, evt) {\n      var anchorLocation = readInlineAnchorLocation(editor);\n      if (anchorLocation.isSome()) {\n        anchorLocation.each(curry(insertBrOutsideAnchor, editor));\n      } else {\n        insertBrAtCaret(editor, evt);\n      }\n    };\n    var InsertBr = { insert: insert };\n\n    var create$3 = Immutable('start', 'soffset', 'finish', 'foffset');\n    var SimRange = { create: create$3 };\n\n    var adt = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$4 = adt.before;\n    var on = adt.on;\n    var after$3 = adt.after;\n    var Situ = {\n      before: before$4,\n      on: on,\n      after: after$3,\n      cata: cata,\n      getStart: getStart\n    };\n\n    var adt$1 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$1.exact(simRange.start(), simRange.soffset(), simRange.finish(), simRange.foffset());\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return Element.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$1.domRange;\n    var relative = adt$1.relative;\n    var exact = adt$1.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range = SimRange.create;\n    var Selection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range\n    };\n\n    var browser$3 = PlatformDetection$1.detect().browser;\n    var clamp = function (offset, element) {\n      var max = isText(element) ? get$4(element).length : children(element).length + 1;\n      if (offset > max) {\n        return max;\n      } else if (offset < 0) {\n        return 0;\n      }\n      return offset;\n    };\n    var normalizeRng = function (rng) {\n      return Selection.range(rng.start(), clamp(rng.soffset(), rng.start()), rng.finish(), clamp(rng.foffset(), rng.finish()));\n    };\n    var isOrContains = function (root, elm) {\n      return !NodeType.isRestrictedNode(elm.dom()) && (contains$3(root, elm) || eq(root, elm));\n    };\n    var isRngInRoot = function (root) {\n      return function (rng) {\n        return isOrContains(root, rng.start()) && isOrContains(root, rng.finish());\n      };\n    };\n    var shouldStore = function (editor) {\n      return editor.inline === true || browser$3.isIE();\n    };\n    var nativeRangeToSelectionRange = function (r) {\n      return Selection.range(Element.fromDom(r.startContainer), r.startOffset, Element.fromDom(r.endContainer), r.endOffset);\n    };\n    var readRange = function (win) {\n      var selection = win.getSelection();\n      var rng = !selection || selection.rangeCount === 0 ? Option.none() : Option.from(selection.getRangeAt(0));\n      return rng.map(nativeRangeToSelectionRange);\n    };\n    var getBookmark$2 = function (root) {\n      var win = defaultView(root);\n      return readRange(win.dom()).filter(isRngInRoot(root));\n    };\n    var validate = function (root, bookmark) {\n      return Option.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng);\n    };\n    var bookmarkToNativeRng = function (bookmark) {\n      var rng = domGlobals.document.createRange();\n      try {\n        rng.setStart(bookmark.start().dom(), bookmark.soffset());\n        rng.setEnd(bookmark.finish().dom(), bookmark.foffset());\n        return Option.some(rng);\n      } catch (_) {\n        return Option.none();\n      }\n    };\n    var store = function (editor) {\n      var newBookmark = shouldStore(editor) ? getBookmark$2(Element.fromDom(editor.getBody())) : Option.none();\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var storeNative = function (editor, rng) {\n      var root = Element.fromDom(editor.getBody());\n      var range = shouldStore(editor) ? Option.from(rng) : Option.none();\n      var newBookmark = range.map(nativeRangeToSelectionRange).filter(isRngInRoot(root));\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var getRng = function (editor) {\n      var bookmark = editor.bookmark ? editor.bookmark : Option.none();\n      return bookmark.bind(curry(validate, Element.fromDom(editor.getBody()))).bind(bookmarkToNativeRng);\n    };\n    var restore = function (editor) {\n      getRng(editor).each(function (rng) {\n        editor.selection.setRng(rng);\n      });\n    };\n    var SelectionBookmark = {\n      store: store,\n      storeNative: storeNative,\n      readRange: readRange,\n      restore: restore,\n      getRng: getRng,\n      getBookmark: getBookmark$2,\n      validate: validate\n    };\n\n    var indentElement = function (dom, command, useMargin, value, unit, element) {\n      if (dom.getContentEditable(element) === 'false') {\n        return;\n      }\n      var indentStyleName = useMargin ? 'margin' : 'padding';\n      indentStyleName = element.nodeName === 'TABLE' ? 'margin' : indentStyleName;\n      indentStyleName += dom.getStyle(element, 'direction', true) === 'rtl' ? 'Right' : 'Left';\n      if (command === 'outdent') {\n        var styleValue = Math.max(0, parseInt(element.style[indentStyleName] || 0, 10) - value);\n        dom.setStyle(element, indentStyleName, styleValue ? styleValue + unit : '');\n      } else {\n        var styleValue = parseInt(element.style[indentStyleName] || 0, 10) + value + unit;\n        dom.setStyle(element, indentStyleName, styleValue);\n      }\n    };\n    var isListComponent = function (el) {\n      return isList(el) || isListItem(el);\n    };\n    var parentIsListComponent = function (el) {\n      return parent(el).map(isListComponent).getOr(false);\n    };\n    var getBlocksToIndent = function (editor) {\n      return filter(map(editor.selection.getSelectedBlocks(), Element.fromDom), function (el) {\n        return !isListComponent(el) && !parentIsListComponent(el);\n      });\n    };\n    var handle = function (editor, command) {\n      var settings = editor.settings, dom = editor.dom, selection = editor.selection, formatter = editor.formatter;\n      var indentUnit = /[a-z%]+$/i.exec(settings.indentation)[0];\n      var indentValue = parseInt(settings.indentation, 10);\n      var useMargin = editor.getParam('indent_use_margin', false);\n      if (!editor.queryCommandState('InsertUnorderedList') && !editor.queryCommandState('InsertOrderedList')) {\n        if (!settings.forced_root_block && !dom.getParent(selection.getNode(), dom.isBlock)) {\n          formatter.apply('div');\n        }\n      }\n      each(getBlocksToIndent(editor), function (block) {\n        indentElement(dom, command, useMargin, indentValue, indentUnit, block.dom());\n      });\n    };\n\n    var each$a = Tools.each, extend$2 = Tools.extend;\n    var map$3 = Tools.map, inArray$2 = Tools.inArray;\n    function EditorCommands (editor) {\n      var dom, selection, formatter;\n      var commands = {\n        state: {},\n        exec: {},\n        value: {}\n      };\n      var settings = editor.settings, bookmark;\n      editor.on('PreInit', function () {\n        dom = editor.dom;\n        selection = editor.selection;\n        settings = editor.settings;\n        formatter = editor.formatter;\n      });\n      var execCommand = function (command, ui, value, args) {\n        var func, customCommand, state = false;\n        if (editor.removed) {\n          return;\n        }\n        if (!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command) && (!args || !args.skip_focus)) {\n          editor.focus();\n        } else {\n          SelectionBookmark.restore(editor);\n        }\n        args = editor.fire('BeforeExecCommand', {\n          command: command,\n          ui: ui,\n          value: value\n        });\n        if (args.isDefaultPrevented()) {\n          return false;\n        }\n        customCommand = command.toLowerCase();\n        if (func = commands.exec[customCommand]) {\n          func(customCommand, ui, value);\n          editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        each$a(editor.plugins, function (p) {\n          if (p.execCommand && p.execCommand(command, ui, value)) {\n            editor.fire('ExecCommand', {\n              command: command,\n              ui: ui,\n              value: value\n            });\n            state = true;\n            return false;\n          }\n        });\n        if (state) {\n          return state;\n        }\n        if (editor.theme && editor.theme.execCommand && editor.theme.execCommand(command, ui, value)) {\n          editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        try {\n          state = editor.getDoc().execCommand(command, ui, value);\n        } catch (ex) {\n        }\n        if (state) {\n          editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        return false;\n      };\n      var queryCommandState = function (command) {\n        var func;\n        if (editor.quirks.isHidden() || editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = commands.state[command]) {\n          return func(command);\n        }\n        try {\n          return editor.getDoc().queryCommandState(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      var queryCommandValue = function (command) {\n        var func;\n        if (editor.quirks.isHidden() || editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = commands.value[command]) {\n          return func(command);\n        }\n        try {\n          return editor.getDoc().queryCommandValue(command);\n        } catch (ex) {\n        }\n      };\n      var addCommands = function (commandList, type) {\n        type = type || 'exec';\n        each$a(commandList, function (callback, command) {\n          each$a(command.toLowerCase().split(','), function (command) {\n            commands[type][command] = callback;\n          });\n        });\n      };\n      var addCommand = function (command, callback, scope) {\n        command = command.toLowerCase();\n        commands.exec[command] = function (command, ui, value, args) {\n          return callback.call(scope || editor, ui, value, args);\n        };\n      };\n      var queryCommandSupported = function (command) {\n        command = command.toLowerCase();\n        if (commands.exec[command]) {\n          return true;\n        }\n        try {\n          return editor.getDoc().queryCommandSupported(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      var addQueryStateHandler = function (command, callback, scope) {\n        command = command.toLowerCase();\n        commands.state[command] = function () {\n          return callback.call(scope || editor);\n        };\n      };\n      var addQueryValueHandler = function (command, callback, scope) {\n        command = command.toLowerCase();\n        commands.value[command] = function () {\n          return callback.call(scope || editor);\n        };\n      };\n      var hasCustomCommand = function (command) {\n        command = command.toLowerCase();\n        return !!commands.exec[command];\n      };\n      extend$2(this, {\n        execCommand: execCommand,\n        queryCommandState: queryCommandState,\n        queryCommandValue: queryCommandValue,\n        queryCommandSupported: queryCommandSupported,\n        addCommands: addCommands,\n        addCommand: addCommand,\n        addQueryStateHandler: addQueryStateHandler,\n        addQueryValueHandler: addQueryValueHandler,\n        hasCustomCommand: hasCustomCommand\n      });\n      var execNativeCommand = function (command, ui, value) {\n        if (ui === undefined) {\n          ui = false;\n        }\n        if (value === undefined) {\n          value = null;\n        }\n        return editor.getDoc().execCommand(command, ui, value);\n      };\n      var isFormatMatch = function (name) {\n        return formatter.match(name);\n      };\n      var toggleFormat = function (name, value) {\n        formatter.toggle(name, value ? { value: value } : undefined);\n        editor.nodeChanged();\n      };\n      var storeSelection = function (type) {\n        bookmark = selection.getBookmark(type);\n      };\n      var restoreSelection = function () {\n        selection.moveToBookmark(bookmark);\n      };\n      addCommands({\n        'mceResetDesignMode,mceBeginUndoLevel': function () {\n        },\n        'mceEndUndoLevel,mceAddUndoLevel': function () {\n          editor.undoManager.add();\n        },\n        'Cut,Copy,Paste': function (command) {\n          var doc = editor.getDoc();\n          var failed;\n          try {\n            execNativeCommand(command);\n          } catch (ex) {\n            failed = true;\n          }\n          if (command === 'paste' && !doc.queryCommandEnabled(command)) {\n            failed = true;\n          }\n          if (failed || !doc.queryCommandSupported(command)) {\n            var msg = editor.translate('Your browser doesn\\'t support direct access to the clipboard. ' + 'Please use the Ctrl+X/C/V keyboard shortcuts instead.');\n            if (Env.mac) {\n              msg = msg.replace(/Ctrl\\+/g, '\\u2318+');\n            }\n            editor.notificationManager.open({\n              text: msg,\n              type: 'error'\n            });\n          }\n        },\n        'unlink': function () {\n          if (selection.isCollapsed()) {\n            var elm = editor.dom.getParent(editor.selection.getStart(), 'a');\n            if (elm) {\n              editor.dom.remove(elm, true);\n            }\n            return;\n          }\n          formatter.remove('link');\n        },\n        'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone': function (command) {\n          var align = command.substring(7);\n          if (align === 'full') {\n            align = 'justify';\n          }\n          each$a('left,center,right,justify'.split(','), function (name) {\n            if (align !== name) {\n              formatter.remove('align' + name);\n            }\n          });\n          if (align !== 'none') {\n            toggleFormat('align' + align);\n          }\n        },\n        'InsertUnorderedList,InsertOrderedList': function (command) {\n          var listElm, listParent;\n          execNativeCommand(command);\n          listElm = dom.getParent(selection.getNode(), 'ol,ul');\n          if (listElm) {\n            listParent = listElm.parentNode;\n            if (/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)) {\n              storeSelection();\n              dom.split(listParent, listElm);\n              restoreSelection();\n            }\n          }\n        },\n        'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n          toggleFormat(command);\n        },\n        'ForeColor,HiliteColor': function (command, ui, value) {\n          toggleFormat(command, value);\n        },\n        'FontName': function (command, ui, value) {\n          fontNameAction(editor, value);\n        },\n        'FontSize': function (command, ui, value) {\n          fontSizeAction(editor, value);\n        },\n        'RemoveFormat': function (command) {\n          formatter.remove(command);\n        },\n        'mceBlockQuote': function () {\n          toggleFormat('blockquote');\n        },\n        'FormatBlock': function (command, ui, value) {\n          return toggleFormat(value || 'p');\n        },\n        'mceCleanup': function () {\n          var bookmark = selection.getBookmark();\n          editor.setContent(editor.getContent());\n          selection.moveToBookmark(bookmark);\n        },\n        'mceRemoveNode': function (command, ui, value) {\n          var node = value || selection.getNode();\n          if (node !== editor.getBody()) {\n            storeSelection();\n            editor.dom.remove(node, true);\n            restoreSelection();\n          }\n        },\n        'mceSelectNodeDepth': function (command, ui, value) {\n          var counter = 0;\n          dom.getParent(selection.getNode(), function (node) {\n            if (node.nodeType === 1 && counter++ === value) {\n              selection.select(node);\n              return false;\n            }\n          }, editor.getBody());\n        },\n        'mceSelectNode': function (command, ui, value) {\n          selection.select(value);\n        },\n        'mceInsertContent': function (command, ui, value) {\n          InsertContent.insertAtCaret(editor, value);\n        },\n        'mceInsertRawHTML': function (command, ui, value) {\n          selection.setContent('tiny_mce_marker');\n          var content = editor.getContent();\n          editor.setContent(content.replace(/tiny_mce_marker/g, function () {\n            return value;\n          }));\n        },\n        'mceToggleFormat': function (command, ui, value) {\n          toggleFormat(value);\n        },\n        'mceSetContent': function (command, ui, value) {\n          editor.setContent(value);\n        },\n        'Indent,Outdent': function (command) {\n          handle(editor, command);\n        },\n        'mceRepaint': function () {\n        },\n        'InsertHorizontalRule': function () {\n          editor.execCommand('mceInsertContent', false, '<hr />');\n        },\n        'mceToggleVisualAid': function () {\n          editor.hasVisual = !editor.hasVisual;\n          editor.addVisual();\n        },\n        'mceReplaceContent': function (command, ui, value) {\n          editor.execCommand('mceInsertContent', false, value.replace(/\\{\\$selection\\}/g, selection.getContent({ format: 'text' })));\n        },\n        'mceInsertLink': function (command, ui, value) {\n          var anchor;\n          if (typeof value === 'string') {\n            value = { href: value };\n          }\n          anchor = dom.getParent(selection.getNode(), 'a');\n          value.href = value.href.replace(' ', '%20');\n          if (!anchor || !value.href) {\n            formatter.remove('link');\n          }\n          if (value.href) {\n            formatter.apply('link', value, anchor);\n          }\n        },\n        'selectAll': function () {\n          var editingHost = dom.getParent(selection.getStart(), NodeType.isContentEditableTrue);\n          if (editingHost) {\n            var rng = dom.createRng();\n            rng.selectNodeContents(editingHost);\n            selection.setRng(rng);\n          }\n        },\n        'delete': function () {\n          DeleteCommands.deleteCommand(editor);\n        },\n        'forwardDelete': function () {\n          DeleteCommands.forwardDeleteCommand(editor);\n        },\n        'mceNewDocument': function () {\n          editor.setContent('');\n        },\n        'InsertLineBreak': function (command, ui, value) {\n          InsertBr.insert(editor, value);\n          return true;\n        }\n      });\n      var alignStates = function (name) {\n        return function () {\n          var nodes = selection.isCollapsed() ? [dom.getParent(selection.getNode(), dom.isBlock)] : selection.getSelectedBlocks();\n          var matches = map$3(nodes, function (node) {\n            return !!formatter.matchNode(node, name);\n          });\n          return inArray$2(matches, true) !== -1;\n        };\n      };\n      addCommands({\n        'JustifyLeft': alignStates('alignleft'),\n        'JustifyCenter': alignStates('aligncenter'),\n        'JustifyRight': alignStates('alignright'),\n        'JustifyFull': alignStates('alignjustify'),\n        'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n          return isFormatMatch(command);\n        },\n        'mceBlockQuote': function () {\n          return isFormatMatch('blockquote');\n        },\n        'Outdent': function () {\n          var node;\n          if (settings.inline_styles) {\n            if ((node = dom.getParent(selection.getStart(), dom.isBlock)) && parseInt(node.style.paddingLeft, 10) > 0) {\n              return true;\n            }\n            if ((node = dom.getParent(selection.getEnd(), dom.isBlock)) && parseInt(node.style.paddingLeft, 10) > 0) {\n              return true;\n            }\n          }\n          return queryCommandState('InsertUnorderedList') || queryCommandState('InsertOrderedList') || !settings.inline_styles && !!dom.getParent(selection.getNode(), 'BLOCKQUOTE');\n        },\n        'InsertUnorderedList,InsertOrderedList': function (command) {\n          var list = dom.getParent(selection.getNode(), 'ul,ol');\n          return list && (command === 'insertunorderedlist' && list.tagName === 'UL' || command === 'insertorderedlist' && list.tagName === 'OL');\n        }\n      }, 'state');\n      addCommands({\n        Undo: function () {\n          editor.undoManager.undo();\n        },\n        Redo: function () {\n          editor.undoManager.redo();\n        }\n      });\n      addQueryValueHandler('FontName', function () {\n        return fontNameQuery(editor);\n      }, this);\n      addQueryValueHandler('FontSize', function () {\n        return fontSizeQuery(editor);\n      }, this);\n    }\n\n    var nativeEvents = Tools.makeMap('focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange ' + 'mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover ' + 'draggesture dragdrop drop drag submit ' + 'compositionstart compositionend compositionupdate touchstart touchmove touchend', ' ');\n    var Dispatcher = function (settings) {\n      var self = this;\n      var scope, bindings = {}, toggleEvent;\n      var returnFalse = function () {\n        return false;\n      };\n      var returnTrue = function () {\n        return true;\n      };\n      settings = settings || {};\n      scope = settings.scope || self;\n      toggleEvent = settings.toggleEvent || returnFalse;\n      var fire = function (name, args) {\n        var handlers, i, l, callback;\n        name = name.toLowerCase();\n        args = args || {};\n        args.type = name;\n        if (!args.target) {\n          args.target = scope;\n        }\n        if (!args.preventDefault) {\n          args.preventDefault = function () {\n            args.isDefaultPrevented = returnTrue;\n          };\n          args.stopPropagation = function () {\n            args.isPropagationStopped = returnTrue;\n          };\n          args.stopImmediatePropagation = function () {\n            args.isImmediatePropagationStopped = returnTrue;\n          };\n          args.isDefaultPrevented = returnFalse;\n          args.isPropagationStopped = returnFalse;\n          args.isImmediatePropagationStopped = returnFalse;\n        }\n        if (settings.beforeFire) {\n          settings.beforeFire(args);\n        }\n        handlers = bindings[name];\n        if (handlers) {\n          for (i = 0, l = handlers.length; i < l; i++) {\n            callback = handlers[i];\n            if (callback.once) {\n              off(name, callback.func);\n            }\n            if (args.isImmediatePropagationStopped()) {\n              args.stopPropagation();\n              return args;\n            }\n            if (callback.func.call(scope, args) === false) {\n              args.preventDefault();\n              return args;\n            }\n          }\n        }\n        return args;\n      };\n      var on = function (name, callback, prepend, extra) {\n        var handlers, names, i;\n        if (callback === false) {\n          callback = returnFalse;\n        }\n        if (callback) {\n          callback = { func: callback };\n          if (extra) {\n            Tools.extend(callback, extra);\n          }\n          names = name.toLowerCase().split(' ');\n          i = names.length;\n          while (i--) {\n            name = names[i];\n            handlers = bindings[name];\n            if (!handlers) {\n              handlers = bindings[name] = [];\n              toggleEvent(name, true);\n            }\n            if (prepend) {\n              handlers.unshift(callback);\n            } else {\n              handlers.push(callback);\n            }\n          }\n        }\n        return self;\n      };\n      var off = function (name, callback) {\n        var i, handlers, bindingName, names, hi;\n        if (name) {\n          names = name.toLowerCase().split(' ');\n          i = names.length;\n          while (i--) {\n            name = names[i];\n            handlers = bindings[name];\n            if (!name) {\n              for (bindingName in bindings) {\n                toggleEvent(bindingName, false);\n                delete bindings[bindingName];\n              }\n              return self;\n            }\n            if (handlers) {\n              if (!callback) {\n                handlers.length = 0;\n              } else {\n                hi = handlers.length;\n                while (hi--) {\n                  if (handlers[hi].func === callback) {\n                    handlers = handlers.slice(0, hi).concat(handlers.slice(hi + 1));\n                    bindings[name] = handlers;\n                  }\n                }\n              }\n              if (!handlers.length) {\n                toggleEvent(name, false);\n                delete bindings[name];\n              }\n            }\n          }\n        } else {\n          for (name in bindings) {\n            toggleEvent(name, false);\n          }\n          bindings = {};\n        }\n        return self;\n      };\n      var once = function (name, callback, prepend) {\n        return on(name, callback, prepend, { once: true });\n      };\n      var has = function (name) {\n        name = name.toLowerCase();\n        return !(!bindings[name] || bindings[name].length === 0);\n      };\n      self.fire = fire;\n      self.on = on;\n      self.off = off;\n      self.once = once;\n      self.has = has;\n    };\n    Dispatcher.isNative = function (name) {\n      return !!nativeEvents[name.toLowerCase()];\n    };\n\n    var getEventDispatcher = function (obj) {\n      if (!obj._eventDispatcher) {\n        obj._eventDispatcher = new Dispatcher({\n          scope: obj,\n          toggleEvent: function (name, state) {\n            if (Dispatcher.isNative(name) && obj.toggleNativeEvent) {\n              obj.toggleNativeEvent(name, state);\n            }\n          }\n        });\n      }\n      return obj._eventDispatcher;\n    };\n    var Observable = {\n      fire: function (name, args, bubble) {\n        var self = this;\n        if (self.removed && name !== 'remove' && name !== 'detach') {\n          return args;\n        }\n        args = getEventDispatcher(self).fire(name, args, bubble);\n        if (bubble !== false && self.parent) {\n          var parent = self.parent();\n          while (parent && !args.isPropagationStopped()) {\n            parent.fire(name, args, false);\n            parent = parent.parent();\n          }\n        }\n        return args;\n      },\n      on: function (name, callback, prepend) {\n        return getEventDispatcher(this).on(name, callback, prepend);\n      },\n      off: function (name, callback) {\n        return getEventDispatcher(this).off(name, callback);\n      },\n      once: function (name, callback) {\n        return getEventDispatcher(this).once(name, callback);\n      },\n      hasEventListeners: function (name) {\n        return getEventDispatcher(this).has(name);\n      }\n    };\n\n    var firePreProcess = function (editor, args) {\n      return editor.fire('PreProcess', args);\n    };\n    var firePostProcess = function (editor, args) {\n      return editor.fire('PostProcess', args);\n    };\n    var fireRemove = function (editor) {\n      return editor.fire('remove');\n    };\n    var fireDetach = function (editor) {\n      return editor.fire('detach');\n    };\n    var fireSwitchMode = function (editor, mode) {\n      return editor.fire('SwitchMode', { mode: mode });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n    var Events = {\n      firePreProcess: firePreProcess,\n      firePostProcess: firePostProcess,\n      fireRemove: fireRemove,\n      fireDetach: fireDetach,\n      fireSwitchMode: fireSwitchMode,\n      fireObjectResizeStart: fireObjectResizeStart,\n      fireObjectResized: fireObjectResized\n    };\n\n    var setEditorCommandState = function (editor, cmd, state) {\n      try {\n        editor.getDoc().execCommand(cmd, false, state);\n      } catch (ex) {\n      }\n    };\n    var toggleClass = function (elm, cls, state) {\n      if (has$2(elm, cls) && state === false) {\n        remove$4(elm, cls);\n      } else if (state) {\n        add$2(elm, cls);\n      }\n    };\n    var toggleReadOnly = function (editor, state) {\n      toggleClass(Element.fromDom(editor.getBody()), 'mce-content-readonly', state);\n      if (state) {\n        editor.selection.controlSelection.hideResizeRect();\n        editor.readonly = true;\n        editor.getBody().contentEditable = 'false';\n      } else {\n        editor.readonly = false;\n        editor.getBody().contentEditable = 'true';\n        setEditorCommandState(editor, 'StyleWithCSS', false);\n        setEditorCommandState(editor, 'enableInlineTableEditing', false);\n        setEditorCommandState(editor, 'enableObjectResizing', false);\n        editor.focus();\n        editor.nodeChanged();\n      }\n    };\n    var setMode = function (editor, mode) {\n      if (mode === getMode(editor)) {\n        return;\n      }\n      if (editor.initialized) {\n        toggleReadOnly(editor, mode === 'readonly');\n      } else {\n        editor.on('init', function () {\n          toggleReadOnly(editor, mode === 'readonly');\n        });\n      }\n      Events.fireSwitchMode(editor, mode);\n    };\n    var getMode = function (editor) {\n      return editor.readonly ? 'readonly' : 'design';\n    };\n    var isReadOnly = function (editor) {\n      return editor.readonly === true;\n    };\n\n    var DOM$1 = DOMUtils$1.DOM;\n    var customEventRootDelegates;\n    var getEventTarget = function (editor, eventName) {\n      if (eventName === 'selectionchange') {\n        return editor.getDoc();\n      }\n      if (!editor.inline && /^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)) {\n        return editor.getDoc().documentElement;\n      }\n      if (editor.settings.event_root) {\n        if (!editor.eventRoot) {\n          editor.eventRoot = DOM$1.select(editor.settings.event_root)[0];\n        }\n        return editor.eventRoot;\n      }\n      return editor.getBody();\n    };\n    var isListening = function (editor) {\n      return !editor.hidden && !editor.readonly;\n    };\n    var fireEvent = function (editor, eventName, e) {\n      if (isListening(editor)) {\n        editor.fire(eventName, e);\n      } else if (isReadOnly(editor)) {\n        e.preventDefault();\n      }\n    };\n    var bindEventDelegate = function (editor, eventName) {\n      var eventRootElm, delegate;\n      if (!editor.delegates) {\n        editor.delegates = {};\n      }\n      if (editor.delegates[eventName] || editor.removed) {\n        return;\n      }\n      eventRootElm = getEventTarget(editor, eventName);\n      if (editor.settings.event_root) {\n        if (!customEventRootDelegates) {\n          customEventRootDelegates = {};\n          editor.editorManager.on('removeEditor', function () {\n            var name;\n            if (!editor.editorManager.activeEditor) {\n              if (customEventRootDelegates) {\n                for (name in customEventRootDelegates) {\n                  editor.dom.unbind(getEventTarget(editor, name));\n                }\n                customEventRootDelegates = null;\n              }\n            }\n          });\n        }\n        if (customEventRootDelegates[eventName]) {\n          return;\n        }\n        delegate = function (e) {\n          var target = e.target;\n          var editors = editor.editorManager.get();\n          var i = editors.length;\n          while (i--) {\n            var body = editors[i].getBody();\n            if (body === target || DOM$1.isChildOf(target, body)) {\n              fireEvent(editors[i], eventName, e);\n            }\n          }\n        };\n        customEventRootDelegates[eventName] = delegate;\n        DOM$1.bind(eventRootElm, eventName, delegate);\n      } else {\n        delegate = function (e) {\n          fireEvent(editor, eventName, e);\n        };\n        DOM$1.bind(eventRootElm, eventName, delegate);\n        editor.delegates[eventName] = delegate;\n      }\n    };\n    var EditorObservable = {\n      bindPendingEventDelegates: function () {\n        var self = this;\n        Tools.each(self._pendingNativeEvents, function (name) {\n          bindEventDelegate(self, name);\n        });\n      },\n      toggleNativeEvent: function (name, state) {\n        var self = this;\n        if (name === 'focus' || name === 'blur') {\n          return;\n        }\n        if (state) {\n          if (self.initialized) {\n            bindEventDelegate(self, name);\n          } else {\n            if (!self._pendingNativeEvents) {\n              self._pendingNativeEvents = [name];\n            } else {\n              self._pendingNativeEvents.push(name);\n            }\n          }\n        } else if (self.initialized) {\n          self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          delete self.delegates[name];\n        }\n      },\n      unbindAllNativeEvents: function () {\n        var self = this;\n        var body = self.getBody();\n        var dom = self.dom;\n        var name;\n        if (self.delegates) {\n          for (name in self.delegates) {\n            self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          }\n          delete self.delegates;\n        }\n        if (!self.inline && body && dom) {\n          body.onload = null;\n          dom.unbind(self.getWin());\n          dom.unbind(self.getDoc());\n        }\n        if (dom) {\n          dom.unbind(body);\n          dom.unbind(self.getContainer());\n        }\n      }\n    };\n    EditorObservable = Tools.extend({}, Observable, EditorObservable);\n    var EditorObservable$1 = EditorObservable;\n\n    var sectionResult = Immutable('sections', 'settings');\n    var detection = PlatformDetection$1.detect();\n    var isTouch = detection.deviceType.isTouch();\n    var mobilePlugins = [\n      'lists',\n      'autolink',\n      'autosave'\n    ];\n    var defaultMobileSettings = { theme: 'mobile' };\n    var normalizePlugins = function (plugins) {\n      var pluginNames = isArray(plugins) ? plugins.join(' ') : plugins;\n      var trimmedPlugins = map(isString(pluginNames) ? pluginNames.split(' ') : [], trim$2);\n      return filter(trimmedPlugins, function (item) {\n        return item.length > 0;\n      });\n    };\n    var filterMobilePlugins = function (plugins) {\n      return filter(plugins, curry(contains, mobilePlugins));\n    };\n    var extractSections = function (keys, settings) {\n      var result = bifilter(settings, function (value, key) {\n        return contains(keys, key);\n      });\n      return sectionResult(result.t, result.f);\n    };\n    var getSection = function (sectionResult, name, defaults) {\n      var sections = sectionResult.sections();\n      var sectionSettings = sections.hasOwnProperty(name) ? sections[name] : {};\n      return Tools.extend({}, defaults, sectionSettings);\n    };\n    var hasSection = function (sectionResult, name) {\n      return sectionResult.sections().hasOwnProperty(name);\n    };\n    var getDefaultSettings = function (id, documentBaseUrl, editor) {\n      return {\n        id: id,\n        theme: 'modern',\n        delta_width: 0,\n        delta_height: 0,\n        popup_css: '',\n        plugins: '',\n        document_base_url: documentBaseUrl,\n        add_form_submit_trigger: true,\n        submit_patch: true,\n        add_unload_trigger: true,\n        convert_urls: true,\n        relative_urls: true,\n        remove_script_host: true,\n        object_resizing: true,\n        doctype: '<!DOCTYPE html>',\n        visual: true,\n        font_size_style_values: 'xx-small,x-small,small,medium,large,x-large,xx-large',\n        font_size_legacy_values: 'xx-small,small,medium,large,x-large,xx-large,300%',\n        forced_root_block: 'p',\n        hidden_input: true,\n        render_ui: true,\n        indentation: '40px',\n        inline_styles: true,\n        convert_fonts_to_spans: true,\n        indent: 'simple',\n        indent_before: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        indent_after: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        entity_encoding: 'named',\n        url_converter: editor.convertURL,\n        url_converter_scope: editor,\n        ie7_compat: true\n      };\n    };\n    var getExternalPlugins = function (overrideSettings, settings) {\n      var userDefinedExternalPlugins = settings.external_plugins ? settings.external_plugins : {};\n      if (overrideSettings && overrideSettings.external_plugins) {\n        return Tools.extend({}, overrideSettings.external_plugins, userDefinedExternalPlugins);\n      } else {\n        return userDefinedExternalPlugins;\n      }\n    };\n    var combinePlugins = function (forcedPlugins, plugins) {\n      return [].concat(normalizePlugins(forcedPlugins)).concat(normalizePlugins(plugins));\n    };\n    var processPlugins = function (isTouchDevice, sectionResult, defaultOverrideSettings, settings) {\n      var forcedPlugins = normalizePlugins(defaultOverrideSettings.forced_plugins);\n      var plugins = normalizePlugins(settings.plugins);\n      var platformPlugins = isTouchDevice && hasSection(sectionResult, 'mobile') ? filterMobilePlugins(plugins) : plugins;\n      var combinedPlugins = combinePlugins(forcedPlugins, platformPlugins);\n      return Tools.extend(settings, { plugins: combinedPlugins.join(' ') });\n    };\n    var isOnMobile = function (isTouchDevice, sectionResult) {\n      var isInline = sectionResult.settings().inline;\n      return isTouchDevice && hasSection(sectionResult, 'mobile') && !isInline;\n    };\n    var combineSettings = function (isTouchDevice, defaultSettings, defaultOverrideSettings, settings) {\n      var sectionResult = extractSections(['mobile'], settings);\n      var extendedSettings = Tools.extend(defaultSettings, defaultOverrideSettings, sectionResult.settings(), isOnMobile(isTouchDevice, sectionResult) ? getSection(sectionResult, 'mobile', defaultMobileSettings) : {}, {\n        validate: true,\n        content_editable: sectionResult.settings().inline,\n        external_plugins: getExternalPlugins(defaultOverrideSettings, sectionResult.settings())\n      });\n      return processPlugins(isTouchDevice, sectionResult, defaultOverrideSettings, extendedSettings);\n    };\n    var getEditorSettings = function (editor, id, documentBaseUrl, defaultOverrideSettings, settings) {\n      var defaultSettings = getDefaultSettings(id, documentBaseUrl, editor);\n      return combineSettings(isTouch, defaultSettings, defaultOverrideSettings, settings);\n    };\n    var getFiltered = function (predicate, editor, name) {\n      return Option.from(editor.settings[name]).filter(predicate);\n    };\n    var getParamObject = function (value) {\n      var output = {};\n      if (typeof value === 'string') {\n        each(value.indexOf('=') > 0 ? value.split(/[;,](?![^=;,]*(?:[;,]|$))/) : value.split(','), function (val) {\n          var arr = val.split('=');\n          if (arr.length > 1) {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[1]);\n          } else {\n            output[Tools.trim(arr[0])] = Tools.trim(arr);\n          }\n        });\n      } else {\n        output = value;\n      }\n      return output;\n    };\n    var isArrayOf = function (p) {\n      return function (a) {\n        return isArray(a) && forall(a, p);\n      };\n    };\n    var getParam = function (editor, name, defaultVal, type) {\n      var value = name in editor.settings ? editor.settings[name] : defaultVal;\n      if (type === 'hash') {\n        return getParamObject(value);\n      } else if (type === 'string') {\n        return getFiltered(isString, editor, name).getOr(defaultVal);\n      } else if (type === 'number') {\n        return getFiltered(isNumber, editor, name).getOr(defaultVal);\n      } else if (type === 'boolean') {\n        return getFiltered(isBoolean, editor, name).getOr(defaultVal);\n      } else if (type === 'object') {\n        return getFiltered(isObject, editor, name).getOr(defaultVal);\n      } else if (type === 'array') {\n        return getFiltered(isArray, editor, name).getOr(defaultVal);\n      } else if (type === 'string[]') {\n        return getFiltered(isArrayOf(isString), editor, name).getOr(defaultVal);\n      } else if (type === 'function') {\n        return getFiltered(isFunction, editor, name).getOr(defaultVal);\n      } else {\n        return value;\n      }\n    };\n\n    var each$b = Tools.each, explode$2 = Tools.explode;\n    var keyCodeLookup = {\n      f1: 112,\n      f2: 113,\n      f3: 114,\n      f4: 115,\n      f5: 116,\n      f6: 117,\n      f7: 118,\n      f8: 119,\n      f9: 120,\n      f10: 121,\n      f11: 122,\n      f12: 123\n    };\n    var modifierNames = Tools.makeMap('alt,ctrl,shift,meta,access');\n    function Shortcuts (editor) {\n      var self = this;\n      var shortcuts = {};\n      var pendingPatterns = [];\n      var parseShortcut = function (pattern) {\n        var id, key;\n        var shortcut = {};\n        each$b(explode$2(pattern, '+'), function (value) {\n          if (value in modifierNames) {\n            shortcut[value] = true;\n          } else {\n            if (/^[0-9]{2,}$/.test(value)) {\n              shortcut.keyCode = parseInt(value, 10);\n            } else {\n              shortcut.charCode = value.charCodeAt(0);\n              shortcut.keyCode = keyCodeLookup[value] || value.toUpperCase().charCodeAt(0);\n            }\n          }\n        });\n        id = [shortcut.keyCode];\n        for (key in modifierNames) {\n          if (shortcut[key]) {\n            id.push(key);\n          } else {\n            shortcut[key] = false;\n          }\n        }\n        shortcut.id = id.join(',');\n        if (shortcut.access) {\n          shortcut.alt = true;\n          if (Env.mac) {\n            shortcut.ctrl = true;\n          } else {\n            shortcut.shift = true;\n          }\n        }\n        if (shortcut.meta) {\n          if (Env.mac) {\n            shortcut.meta = true;\n          } else {\n            shortcut.ctrl = true;\n            shortcut.meta = false;\n          }\n        }\n        return shortcut;\n      };\n      var createShortcut = function (pattern, desc, cmdFunc, scope) {\n        var shortcuts;\n        shortcuts = Tools.map(explode$2(pattern, '>'), parseShortcut);\n        shortcuts[shortcuts.length - 1] = Tools.extend(shortcuts[shortcuts.length - 1], {\n          func: cmdFunc,\n          scope: scope || editor\n        });\n        return Tools.extend(shortcuts[0], {\n          desc: editor.translate(desc),\n          subpatterns: shortcuts.slice(1)\n        });\n      };\n      var hasModifier = function (e) {\n        return e.altKey || e.ctrlKey || e.metaKey;\n      };\n      var isFunctionKey = function (e) {\n        return e.type === 'keydown' && e.keyCode >= 112 && e.keyCode <= 123;\n      };\n      var matchShortcut = function (e, shortcut) {\n        if (!shortcut) {\n          return false;\n        }\n        if (shortcut.ctrl !== e.ctrlKey || shortcut.meta !== e.metaKey) {\n          return false;\n        }\n        if (shortcut.alt !== e.altKey || shortcut.shift !== e.shiftKey) {\n          return false;\n        }\n        if (e.keyCode === shortcut.keyCode || e.charCode && e.charCode === shortcut.charCode) {\n          e.preventDefault();\n          return true;\n        }\n        return false;\n      };\n      var executeShortcutAction = function (shortcut) {\n        return shortcut.func ? shortcut.func.call(shortcut.scope) : null;\n      };\n      editor.on('keyup keypress keydown', function (e) {\n        if ((hasModifier(e) || isFunctionKey(e)) && !e.isDefaultPrevented()) {\n          each$b(shortcuts, function (shortcut) {\n            if (matchShortcut(e, shortcut)) {\n              pendingPatterns = shortcut.subpatterns.slice(0);\n              if (e.type === 'keydown') {\n                executeShortcutAction(shortcut);\n              }\n              return true;\n            }\n          });\n          if (matchShortcut(e, pendingPatterns[0])) {\n            if (pendingPatterns.length === 1) {\n              if (e.type === 'keydown') {\n                executeShortcutAction(pendingPatterns[0]);\n              }\n            }\n            pendingPatterns.shift();\n          }\n        }\n      });\n      self.add = function (pattern, desc, cmdFunc, scope) {\n        var cmd;\n        cmd = cmdFunc;\n        if (typeof cmdFunc === 'string') {\n          cmdFunc = function () {\n            editor.execCommand(cmd, false, null);\n          };\n        } else if (Tools.isArray(cmd)) {\n          cmdFunc = function () {\n            editor.execCommand(cmd[0], cmd[1], cmd[2]);\n          };\n        }\n        each$b(explode$2(Tools.trim(pattern.toLowerCase())), function (pattern) {\n          var shortcut = createShortcut(pattern, desc, cmdFunc, scope);\n          shortcuts[shortcut.id] = shortcut;\n        });\n        return true;\n      };\n      self.remove = function (pattern) {\n        var shortcut = createShortcut(pattern);\n        if (shortcuts[shortcut.id]) {\n          delete shortcuts[shortcut.id];\n          return true;\n        }\n        return false;\n      };\n    }\n\n    var hasFocus = function (element) {\n      var doc = owner(element).dom();\n      return element.dom() === doc.activeElement;\n    };\n    var active = function (_doc) {\n      var doc = _doc !== undefined ? _doc.dom() : domGlobals.document;\n      return Option.from(doc.activeElement).map(Element.fromDom);\n    };\n    var search = function (element) {\n      return active(owner(element)).filter(function (e) {\n        return element.dom().contains(e.dom());\n      });\n    };\n\n    var getContentEditableHost = function (editor, node) {\n      return editor.dom.getParent(node, function (node) {\n        return editor.dom.getContentEditable(node) === 'true';\n      });\n    };\n    var getCollapsedNode = function (rng) {\n      return rng.collapsed ? Option.from(getNode(rng.startContainer, rng.startOffset)).map(Element.fromDom) : Option.none();\n    };\n    var getFocusInElement = function (root, rng) {\n      return getCollapsedNode(rng).bind(function (node) {\n        if (isTableSection(node)) {\n          return Option.some(node);\n        } else if (contains$3(root, node) === false) {\n          return Option.some(root);\n        } else {\n          return Option.none();\n        }\n      });\n    };\n    var normalizeSelection = function (editor, rng) {\n      getFocusInElement(Element.fromDom(editor.getBody()), rng).bind(function (elm) {\n        return CaretFinder.firstPositionIn(elm.dom());\n      }).fold(function () {\n        editor.selection.normalize();\n        return;\n      }, function (caretPos) {\n        return editor.selection.setRng(caretPos.toRange());\n      });\n    };\n    var focusBody = function (body) {\n      if (body.setActive) {\n        try {\n          body.setActive();\n        } catch (ex) {\n          body.focus();\n        }\n      } else {\n        body.focus();\n      }\n    };\n    var hasElementFocus = function (elm) {\n      return hasFocus(elm) || search(elm).isSome();\n    };\n    var hasIframeFocus = function (editor) {\n      return editor.iframeElement && hasFocus(Element.fromDom(editor.iframeElement));\n    };\n    var hasInlineFocus = function (editor) {\n      var rawBody = editor.getBody();\n      return rawBody && hasElementFocus(Element.fromDom(rawBody));\n    };\n    var hasFocus$1 = function (editor) {\n      return editor.inline ? hasInlineFocus(editor) : hasIframeFocus(editor);\n    };\n    var focusEditor = function (editor) {\n      var selection = editor.selection, contentEditable = editor.settings.content_editable;\n      var body = editor.getBody();\n      var rng = selection.getRng();\n      editor.quirks.refreshContentEditable();\n      var contentEditableHost = getContentEditableHost(editor, selection.getNode());\n      if (editor.$.contains(body, contentEditableHost)) {\n        focusBody(contentEditableHost);\n        normalizeSelection(editor, rng);\n        activateEditor(editor);\n        return;\n      }\n      if (editor.bookmark !== undefined && hasFocus$1(editor) === false) {\n        SelectionBookmark.getRng(editor).each(function (bookmarkRng) {\n          editor.selection.setRng(bookmarkRng);\n          rng = bookmarkRng;\n        });\n      }\n      if (!contentEditable) {\n        if (!Env.opera) {\n          focusBody(body);\n        }\n        editor.getWin().focus();\n      }\n      if (Env.gecko || contentEditable) {\n        focusBody(body);\n        normalizeSelection(editor, rng);\n      }\n      activateEditor(editor);\n    };\n    var activateEditor = function (editor) {\n      return editor.editorManager.setActive(editor);\n    };\n    var focus = function (editor, skipFocus) {\n      if (editor.removed) {\n        return;\n      }\n      skipFocus ? activateEditor(editor) : focusEditor(editor);\n    };\n    var EditorFocus = {\n      focus: focus,\n      hasFocus: hasFocus$1\n    };\n\n    var getProp = function (propName, elm) {\n      var rawElm = elm.dom();\n      return rawElm[propName];\n    };\n    var getComputedSizeProp = function (propName, elm) {\n      return parseInt(get$1(elm, propName), 10);\n    };\n    var getClientWidth = curry(getProp, 'clientWidth');\n    var getClientHeight = curry(getProp, 'clientHeight');\n    var getMarginTop = curry(getComputedSizeProp, 'margin-top');\n    var getMarginLeft = curry(getComputedSizeProp, 'margin-left');\n    var getBoundingClientRect$1 = function (elm) {\n      return elm.dom().getBoundingClientRect();\n    };\n    var isInsideElementContentArea = function (bodyElm, clientX, clientY) {\n      var clientWidth = getClientWidth(bodyElm);\n      var clientHeight = getClientHeight(bodyElm);\n      return clientX >= 0 && clientY >= 0 && clientX <= clientWidth && clientY <= clientHeight;\n    };\n    var transpose = function (inline, elm, clientX, clientY) {\n      var clientRect = getBoundingClientRect$1(elm);\n      var deltaX = inline ? clientRect.left + elm.dom().clientLeft + getMarginLeft(elm) : 0;\n      var deltaY = inline ? clientRect.top + elm.dom().clientTop + getMarginTop(elm) : 0;\n      var x = clientX - deltaX;\n      var y = clientY - deltaY;\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var isXYInContentArea = function (editor, clientX, clientY) {\n      var bodyElm = Element.fromDom(editor.getBody());\n      var targetElm = editor.inline ? bodyElm : documentElement(bodyElm);\n      var transposedPoint = transpose(editor.inline, targetElm, clientX, clientY);\n      return isInsideElementContentArea(targetElm, transposedPoint.x, transposedPoint.y);\n    };\n    var fromDomSafe = function (node) {\n      return Option.from(node).map(Element.fromDom);\n    };\n    var isEditorAttachedToDom = function (editor) {\n      var rawContainer = editor.inline ? editor.getBody() : editor.getContentAreaContainer();\n      return fromDomSafe(rawContainer).map(function (container) {\n        return contains$3(owner(container), container);\n      }).getOr(false);\n    };\n    var EditorView = {\n      isXYInContentArea: isXYInContentArea,\n      isEditorAttachedToDom: isEditorAttachedToDom\n    };\n\n    function NotificationManagerImpl () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a NotificationManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        close: unimplemented,\n        reposition: unimplemented,\n        getArgs: unimplemented\n      };\n    }\n\n    function NotificationManager (editor) {\n      var notifications = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getNotificationManagerImpl ? theme.getNotificationManagerImpl() : NotificationManagerImpl();\n      };\n      var getTopNotification = function () {\n        return Option.from(notifications[0]);\n      };\n      var isEqual = function (a, b) {\n        return a.type === b.type && a.text === b.text && !a.progressBar && !a.timeout && !b.progressBar && !b.timeout;\n      };\n      var reposition = function () {\n        if (notifications.length > 0) {\n          getImplementation().reposition(notifications);\n        }\n      };\n      var addNotification = function (notification) {\n        notifications.push(notification);\n      };\n      var closeNotification = function (notification) {\n        findIndex(notifications, function (otherNotification) {\n          return otherNotification === notification;\n        }).each(function (index) {\n          notifications.splice(index, 1);\n        });\n      };\n      var open = function (args) {\n        if (editor.removed || !EditorView.isEditorAttachedToDom(editor)) {\n          return;\n        }\n        return find(notifications, function (notification) {\n          return isEqual(getImplementation().getArgs(notification), args);\n        }).getOrThunk(function () {\n          editor.editorManager.setActive(editor);\n          var notification = getImplementation().open(args, function () {\n            closeNotification(notification);\n            reposition();\n          });\n          addNotification(notification);\n          reposition();\n          return notification;\n        });\n      };\n      var close = function () {\n        getTopNotification().each(function (notification) {\n          getImplementation().close(notification);\n          closeNotification(notification);\n          reposition();\n        });\n      };\n      var getNotifications = function () {\n        return notifications;\n      };\n      var registerEvents = function (editor) {\n        editor.on('SkinLoaded', function () {\n          var serviceMessage = editor.settings.service_message;\n          if (serviceMessage) {\n            open({\n              text: serviceMessage,\n              type: 'warning',\n              timeout: 0,\n              icon: ''\n            });\n          }\n        });\n        editor.on('ResizeEditor ResizeWindow', function () {\n          Delay.requestAnimationFrame(reposition);\n        });\n        editor.on('remove', function () {\n          each(notifications.slice(), function (notification) {\n            getImplementation().close(notification);\n          });\n        });\n      };\n      registerEvents(editor);\n      return {\n        open: open,\n        close: close,\n        getNotifications: getNotifications\n      };\n    }\n\n    function WindowManagerImpl () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a WindowManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        alert: unimplemented,\n        confirm: unimplemented,\n        close: unimplemented,\n        getParams: unimplemented,\n        setParams: unimplemented\n      };\n    }\n\n    function WindowManager (editor) {\n      var windows = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getWindowManagerImpl ? theme.getWindowManagerImpl() : WindowManagerImpl();\n      };\n      var funcBind = function (scope, f) {\n        return function () {\n          return f ? f.apply(scope, arguments) : undefined;\n        };\n      };\n      var fireOpenEvent = function (win) {\n        editor.fire('OpenWindow', { win: win });\n      };\n      var fireCloseEvent = function (win) {\n        editor.fire('CloseWindow', { win: win });\n      };\n      var addWindow = function (win) {\n        windows.push(win);\n        fireOpenEvent(win);\n      };\n      var closeWindow = function (win) {\n        findIndex(windows, function (otherWindow) {\n          return otherWindow === win;\n        }).each(function (index) {\n          windows.splice(index, 1);\n          fireCloseEvent(win);\n          if (windows.length === 0) {\n            editor.focus();\n          }\n        });\n      };\n      var getTopWindow = function () {\n        return Option.from(windows[windows.length - 1]);\n      };\n      var open = function (args, params) {\n        editor.editorManager.setActive(editor);\n        SelectionBookmark.store(editor);\n        var win = getImplementation().open(args, params, closeWindow);\n        addWindow(win);\n        return win;\n      };\n      var alert = function (message, callback, scope) {\n        var win = getImplementation().alert(message, funcBind(scope ? scope : this, callback), closeWindow);\n        addWindow(win);\n      };\n      var confirm = function (message, callback, scope) {\n        var win = getImplementation().confirm(message, funcBind(scope ? scope : this, callback), closeWindow);\n        addWindow(win);\n      };\n      var close = function () {\n        getTopWindow().each(function (win) {\n          getImplementation().close(win);\n          closeWindow(win);\n        });\n      };\n      var getParams = function () {\n        return getTopWindow().map(getImplementation().getParams).getOr(null);\n      };\n      var setParams = function (params) {\n        getTopWindow().each(function (win) {\n          getImplementation().setParams(win, params);\n        });\n      };\n      var getWindows = function () {\n        return windows;\n      };\n      editor.on('remove', function () {\n        each(windows.slice(0), function (win) {\n          getImplementation().close(win);\n        });\n      });\n      return {\n        windows: windows,\n        open: open,\n        alert: alert,\n        confirm: confirm,\n        close: close,\n        getParams: getParams,\n        setParams: setParams,\n        getWindows: getWindows\n      };\n    }\n\n    var data = {};\n    var code = 'en';\n    var I18n = {\n      setCode: function (newCode) {\n        if (newCode) {\n          code = newCode;\n          this.rtl = this.data[newCode] ? this.data[newCode]._dir === 'rtl' : false;\n        }\n      },\n      getCode: function () {\n        return code;\n      },\n      rtl: false,\n      add: function (code, items) {\n        var langData = data[code];\n        if (!langData) {\n          data[code] = langData = {};\n        }\n        for (var name in items) {\n          langData[name] = items[name];\n        }\n        this.setCode(code);\n      },\n      translate: function (text) {\n        var langData = data[code] || {};\n        var toString = function (obj) {\n          if (Tools.is(obj, 'function')) {\n            return Object.prototype.toString.call(obj);\n          }\n          return !isEmpty(obj) ? '' + obj : '';\n        };\n        var isEmpty = function (text) {\n          return text === '' || text === null || Tools.is(text, 'undefined');\n        };\n        var getLangData = function (text) {\n          text = toString(text);\n          return Tools.hasOwn(langData, text) ? toString(langData[text]) : text;\n        };\n        if (isEmpty(text)) {\n          return '';\n        }\n        if (Tools.is(text, 'object') && Tools.hasOwn(text, 'raw')) {\n          return toString(text.raw);\n        }\n        if (Tools.is(text, 'array')) {\n          var values_1 = text.slice(1);\n          text = getLangData(text[0]).replace(/\\{([0-9]+)\\}/g, function ($1, $2) {\n            return Tools.hasOwn(values_1, $2) ? toString(values_1[$2]) : $1;\n          });\n        }\n        return getLangData(text).replace(/{context:\\w+}$/, '');\n      },\n      data: data\n    };\n\n    var PluginManager = AddOnManager.PluginManager;\n    var resolvePluginName = function (targetUrl, suffix) {\n      for (var name in PluginManager.urls) {\n        var matchUrl = PluginManager.urls[name] + '/plugin' + suffix + '.js';\n        if (matchUrl === targetUrl) {\n          return name;\n        }\n      }\n      return null;\n    };\n    var pluginUrlToMessage = function (editor, url) {\n      var plugin = resolvePluginName(url, editor.suffix);\n      return plugin ? I18n.translate([\n        'Failed to load plugin: {0} from url {1}',\n        plugin,\n        url\n      ]) : I18n.translate([\n        'Failed to load plugin url: {0}',\n        url\n      ]);\n    };\n    var displayNotification = function (editor, message) {\n      editor.notificationManager.open({\n        type: 'error',\n        text: message\n      });\n    };\n    var displayError = function (editor, message) {\n      if (editor._skinLoaded) {\n        displayNotification(editor, message);\n      } else {\n        editor.on('SkinLoaded', function () {\n          displayNotification(editor, message);\n        });\n      }\n    };\n    var uploadError = function (editor, message) {\n      displayError(editor, I18n.translate([\n        'Failed to upload image: {0}',\n        message\n      ]));\n    };\n    var pluginLoadError = function (editor, url) {\n      displayError(editor, pluginUrlToMessage(editor, url));\n    };\n    var pluginInitError = function (editor, name, err) {\n      var message = I18n.translate([\n        'Failed to initialize plugin: {0}',\n        name\n      ]);\n      initError(message, err);\n      displayError(editor, message);\n    };\n    var initError = function (message) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      var console = domGlobals.window.console;\n      if (console) {\n        if (console.error) {\n          console.error.apply(console, arguments);\n        } else {\n          console.log.apply(console, arguments);\n        }\n      }\n    };\n    var ErrorReporter = {\n      pluginLoadError: pluginLoadError,\n      pluginInitError: pluginInitError,\n      uploadError: uploadError,\n      displayError: displayError,\n      initError: initError\n    };\n\n    var PluginManager$1 = AddOnManager.PluginManager;\n\n    var ThemeManager = AddOnManager.ThemeManager;\n\n    function XMLHttpRequest () {\n      var f = Global$1.getOrDie('XMLHttpRequest');\n      return new f();\n    }\n\n    function Uploader (uploadStatus, settings) {\n      var pendingPromises = {};\n      var pathJoin = function (path1, path2) {\n        if (path1) {\n          return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n        }\n        return path2;\n      };\n      var defaultHandler = function (blobInfo, success, failure, progress) {\n        var xhr, formData;\n        xhr = XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = function (e) {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = function () {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = function () {\n          var json;\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          json = JSON.parse(xhr.responseText);\n          if (!json || typeof json.location !== 'string') {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        formData = new domGlobals.FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      };\n      var noUpload = function () {\n        return new promiseObj(function (resolve) {\n          resolve([]);\n        });\n      };\n      var handlerSuccess = function (blobInfo, url) {\n        return {\n          url: url,\n          blobInfo: blobInfo,\n          status: true\n        };\n      };\n      var handlerFailure = function (blobInfo, error) {\n        return {\n          url: '',\n          blobInfo: blobInfo,\n          status: false,\n          error: error\n        };\n      };\n      var resolvePending = function (blobUri, result) {\n        Tools.each(pendingPromises[blobUri], function (resolve) {\n          resolve(result);\n        });\n        delete pendingPromises[blobUri];\n      };\n      var uploadBlobInfo = function (blobInfo, handler, openNotification) {\n        uploadStatus.markPending(blobInfo.blobUri());\n        return new promiseObj(function (resolve) {\n          var notification, progress;\n          var noop = function () {\n          };\n          try {\n            var closeNotification_1 = function () {\n              if (notification) {\n                notification.close();\n                progress = noop;\n              }\n            };\n            var success = function (url) {\n              closeNotification_1();\n              uploadStatus.markUploaded(blobInfo.blobUri(), url);\n              resolvePending(blobInfo.blobUri(), handlerSuccess(blobInfo, url));\n              resolve(handlerSuccess(blobInfo, url));\n            };\n            var failure = function (error) {\n              closeNotification_1();\n              uploadStatus.removeFailed(blobInfo.blobUri());\n              resolvePending(blobInfo.blobUri(), handlerFailure(blobInfo, error));\n              resolve(handlerFailure(blobInfo, error));\n            };\n            progress = function (percent) {\n              if (percent < 0 || percent > 100) {\n                return;\n              }\n              if (!notification) {\n                notification = openNotification();\n              }\n              notification.progressBar.value(percent);\n            };\n            handler(blobInfo, success, failure, progress);\n          } catch (ex) {\n            resolve(handlerFailure(blobInfo, ex.message));\n          }\n        });\n      };\n      var isDefaultHandler = function (handler) {\n        return handler === defaultHandler;\n      };\n      var pendingUploadBlobInfo = function (blobInfo) {\n        var blobUri = blobInfo.blobUri();\n        return new promiseObj(function (resolve) {\n          pendingPromises[blobUri] = pendingPromises[blobUri] || [];\n          pendingPromises[blobUri].push(resolve);\n        });\n      };\n      var uploadBlobs = function (blobInfos, openNotification) {\n        blobInfos = Tools.grep(blobInfos, function (blobInfo) {\n          return !uploadStatus.isUploaded(blobInfo.blobUri());\n        });\n        return promiseObj.all(Tools.map(blobInfos, function (blobInfo) {\n          return uploadStatus.isPending(blobInfo.blobUri()) ? pendingUploadBlobInfo(blobInfo) : uploadBlobInfo(blobInfo, settings.handler, openNotification);\n        }));\n      };\n      var upload = function (blobInfos, openNotification) {\n        return !settings.url && isDefaultHandler(settings.handler) ? noUpload() : uploadBlobs(blobInfos, openNotification);\n      };\n      if (isFunction(settings.handler) === false) {\n        settings.handler = defaultHandler;\n      }\n      return { upload: upload };\n    }\n\n    function FileReader () {\n      var f = Global$1.getOrDie('FileReader');\n      return new f();\n    }\n\n    function Uint8Array (arr) {\n      var f = Global$1.getOrDie('Uint8Array');\n      return new f(arr);\n    }\n\n    var requestAnimationFrame$1 = function (callback) {\n      var f = Global$1.getOrDie('requestAnimationFrame');\n      f(callback);\n    };\n    var atob = function (base64) {\n      var f = Global$1.getOrDie('atob');\n      return f(base64);\n    };\n    var Window = {\n      atob: atob,\n      requestAnimationFrame: requestAnimationFrame$1\n    };\n\n    var blobUriToBlob = function (url) {\n      return new promiseObj(function (resolve, reject) {\n        var rejectWithError = function () {\n          reject('Cannot convert ' + url + ' to Blob. Resource might not exist or is inaccessible.');\n        };\n        try {\n          var xhr = XMLHttpRequest();\n          xhr.open('GET', url, true);\n          xhr.responseType = 'blob';\n          xhr.onload = function () {\n            if (this.status === 200) {\n              resolve(this.response);\n            } else {\n              rejectWithError();\n            }\n          };\n          xhr.onerror = rejectWithError;\n          xhr.send();\n        } catch (ex) {\n          rejectWithError();\n        }\n      });\n    };\n    var parseDataUri = function (uri) {\n      var type, matches;\n      var uriParts = decodeURIComponent(uri).split(',');\n      matches = /data:([^;]+)/.exec(uriParts[0]);\n      if (matches) {\n        type = matches[1];\n      }\n      return {\n        type: type,\n        data: uriParts[1]\n      };\n    };\n    var dataUriToBlob = function (uri) {\n      return new promiseObj(function (resolve) {\n        var str, arr, i;\n        var uriParts = parseDataUri(uri);\n        try {\n          str = Window.atob(uriParts.data);\n        } catch (e) {\n          resolve(new domGlobals.Blob([]));\n          return;\n        }\n        arr = Uint8Array(str.length);\n        for (i = 0; i < arr.length; i++) {\n          arr[i] = str.charCodeAt(i);\n        }\n        resolve(new domGlobals.Blob([arr], { type: uriParts.type }));\n      });\n    };\n    var uriToBlob = function (url) {\n      if (url.indexOf('blob:') === 0) {\n        return blobUriToBlob(url);\n      }\n      if (url.indexOf('data:') === 0) {\n        return dataUriToBlob(url);\n      }\n      return null;\n    };\n    var blobToDataUri = function (blob) {\n      return new promiseObj(function (resolve) {\n        var reader = FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n    var Conversions = {\n      uriToBlob: uriToBlob,\n      blobToDataUri: blobToDataUri,\n      parseDataUri: parseDataUri\n    };\n\n    var count = 0;\n    var uniqueId = function (prefix) {\n      return (prefix || 'blobid') + count++;\n    };\n    var imageToBlobInfo = function (blobCache, img, resolve, reject) {\n      var base64, blobInfo;\n      if (img.src.indexOf('blob:') === 0) {\n        blobInfo = blobCache.getByUri(img.src);\n        if (blobInfo) {\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        } else {\n          Conversions.uriToBlob(img.src).then(function (blob) {\n            Conversions.blobToDataUri(blob).then(function (dataUri) {\n              base64 = Conversions.parseDataUri(dataUri).data;\n              blobInfo = blobCache.create(uniqueId(), blob, base64);\n              blobCache.add(blobInfo);\n              resolve({\n                image: img,\n                blobInfo: blobInfo\n              });\n            });\n          }, function (err) {\n            reject(err);\n          });\n        }\n        return;\n      }\n      base64 = Conversions.parseDataUri(img.src).data;\n      blobInfo = blobCache.findFirst(function (cachedBlobInfo) {\n        return cachedBlobInfo.base64() === base64;\n      });\n      if (blobInfo) {\n        resolve({\n          image: img,\n          blobInfo: blobInfo\n        });\n      } else {\n        Conversions.uriToBlob(img.src).then(function (blob) {\n          blobInfo = blobCache.create(uniqueId(), blob, base64);\n          blobCache.add(blobInfo);\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        }, function (err) {\n          reject(err);\n        });\n      }\n    };\n    var getAllImages = function (elm) {\n      return elm ? from$1(elm.getElementsByTagName('img')) : [];\n    };\n    function ImageScanner (uploadStatus, blobCache) {\n      var cachedPromises = {};\n      var findAll = function (elm, predicate) {\n        var images;\n        if (!predicate) {\n          predicate = constant(true);\n        }\n        images = filter(getAllImages(elm), function (img) {\n          var src = img.src;\n          if (!Env.fileApi) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-bogus')) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-placeholder')) {\n            return false;\n          }\n          if (!src || src === Env.transparentSrc) {\n            return false;\n          }\n          if (src.indexOf('blob:') === 0) {\n            return !uploadStatus.isUploaded(src) && predicate(img);\n          }\n          if (src.indexOf('data:') === 0) {\n            return predicate(img);\n          }\n          return false;\n        });\n        var promises = map(images, function (img) {\n          if (cachedPromises[img.src]) {\n            return new promiseObj(function (resolve) {\n              cachedPromises[img.src].then(function (imageInfo) {\n                if (typeof imageInfo === 'string') {\n                  return imageInfo;\n                }\n                resolve({\n                  image: img,\n                  blobInfo: imageInfo.blobInfo\n                });\n              });\n            });\n          }\n          var newPromise = new promiseObj(function (resolve, reject) {\n            imageToBlobInfo(blobCache, img, resolve, reject);\n          }).then(function (result) {\n            delete cachedPromises[result.image.src];\n            return result;\n          }).catch(function (error) {\n            delete cachedPromises[img.src];\n            return error;\n          });\n          cachedPromises[img.src] = newPromise;\n          return newPromise;\n        });\n        return promiseObj.all(promises);\n      };\n      return { findAll: findAll };\n    }\n\n    var count$1 = 0;\n    var seed = function () {\n      var rnd = function () {\n        return Math.round(Math.random() * 4294967295).toString(36);\n      };\n      var now = new Date().getTime();\n      return 's' + now.toString(36) + rnd() + rnd() + rnd();\n    };\n    var uuid = function (prefix) {\n      return prefix + count$1++ + seed();\n    };\n    var Uuid = { uuid: uuid };\n\n    function BlobCache () {\n      var cache = [];\n      var mimeToExt = function (mime) {\n        var mimes = {\n          'image/jpeg': 'jpg',\n          'image/jpg': 'jpg',\n          'image/gif': 'gif',\n          'image/png': 'png'\n        };\n        return mimes[mime.toLowerCase()] || 'dat';\n      };\n      var create = function (o, blob, base64, filename) {\n        if (isString(o)) {\n          var id = o;\n          return toBlobInfo({\n            id: id,\n            name: filename,\n            blob: blob,\n            base64: base64\n          });\n        } else if (isObject(o)) {\n          return toBlobInfo(o);\n        } else {\n          throw new Error('Unknown input type');\n        }\n      };\n      var toBlobInfo = function (o) {\n        var id, name;\n        if (!o.blob || !o.base64) {\n          throw new Error('blob and base64 representations of the image are required for BlobInfo to be created');\n        }\n        id = o.id || Uuid.uuid('blobid');\n        name = o.name || id;\n        return {\n          id: constant(id),\n          name: constant(name),\n          filename: constant(name + '.' + mimeToExt(o.blob.type)),\n          blob: constant(o.blob),\n          base64: constant(o.base64),\n          blobUri: constant(o.blobUri || URL.createObjectURL(o.blob)),\n          uri: constant(o.uri)\n        };\n      };\n      var add = function (blobInfo) {\n        if (!get(blobInfo.id())) {\n          cache.push(blobInfo);\n        }\n      };\n      var get = function (id) {\n        return findFirst(function (cachedBlobInfo) {\n          return cachedBlobInfo.id() === id;\n        });\n      };\n      var findFirst = function (predicate) {\n        return filter(cache, predicate)[0];\n      };\n      var getByUri = function (blobUri) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.blobUri() === blobUri;\n        });\n      };\n      var removeByUri = function (blobUri) {\n        cache = filter(cache, function (blobInfo) {\n          if (blobInfo.blobUri() === blobUri) {\n            URL.revokeObjectURL(blobInfo.blobUri());\n            return false;\n          }\n          return true;\n        });\n      };\n      var destroy = function () {\n        each(cache, function (cachedBlobInfo) {\n          URL.revokeObjectURL(cachedBlobInfo.blobUri());\n        });\n        cache = [];\n      };\n      return {\n        create: create,\n        add: add,\n        get: get,\n        getByUri: getByUri,\n        findFirst: findFirst,\n        removeByUri: removeByUri,\n        destroy: destroy\n      };\n    }\n\n    function UploadStatus () {\n      var PENDING = 1, UPLOADED = 2;\n      var blobUriStatuses = {};\n      var createStatus = function (status, resultUri) {\n        return {\n          status: status,\n          resultUri: resultUri\n        };\n      };\n      var hasBlobUri = function (blobUri) {\n        return blobUri in blobUriStatuses;\n      };\n      var getResultUri = function (blobUri) {\n        var result = blobUriStatuses[blobUri];\n        return result ? result.resultUri : null;\n      };\n      var isPending = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === PENDING : false;\n      };\n      var isUploaded = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === UPLOADED : false;\n      };\n      var markPending = function (blobUri) {\n        blobUriStatuses[blobUri] = createStatus(PENDING, null);\n      };\n      var markUploaded = function (blobUri, resultUri) {\n        blobUriStatuses[blobUri] = createStatus(UPLOADED, resultUri);\n      };\n      var removeFailed = function (blobUri) {\n        delete blobUriStatuses[blobUri];\n      };\n      var destroy = function () {\n        blobUriStatuses = {};\n      };\n      return {\n        hasBlobUri: hasBlobUri,\n        getResultUri: getResultUri,\n        isPending: isPending,\n        isUploaded: isUploaded,\n        markPending: markPending,\n        markUploaded: markUploaded,\n        removeFailed: removeFailed,\n        destroy: destroy\n      };\n    }\n\n    function EditorUpload (editor) {\n      var blobCache = BlobCache();\n      var uploader, imageScanner;\n      var uploadStatus = UploadStatus();\n      var urlFilters = [];\n      var aliveGuard = function (callback) {\n        return function (result) {\n          if (editor.selection) {\n            return callback(result);\n          }\n          return [];\n        };\n      };\n      var cacheInvalidator = function () {\n        return '?' + new Date().getTime();\n      };\n      var replaceString = function (content, search, replace) {\n        var index = 0;\n        do {\n          index = content.indexOf(search, index);\n          if (index !== -1) {\n            content = content.substring(0, index) + replace + content.substr(index + search.length);\n            index += replace.length - search.length + 1;\n          }\n        } while (index !== -1);\n        return content;\n      };\n      var replaceImageUrl = function (content, targetUrl, replacementUrl) {\n        content = replaceString(content, 'src=\"' + targetUrl + '\"', 'src=\"' + replacementUrl + '\"');\n        content = replaceString(content, 'data-mce-src=\"' + targetUrl + '\"', 'data-mce-src=\"' + replacementUrl + '\"');\n        return content;\n      };\n      var replaceUrlInUndoStack = function (targetUrl, replacementUrl) {\n        each(editor.undoManager.data, function (level) {\n          if (level.type === 'fragmented') {\n            level.fragments = map(level.fragments, function (fragment) {\n              return replaceImageUrl(fragment, targetUrl, replacementUrl);\n            });\n          } else {\n            level.content = replaceImageUrl(level.content, targetUrl, replacementUrl);\n          }\n        });\n      };\n      var openNotification = function () {\n        return editor.notificationManager.open({\n          text: editor.translate('Image uploading...'),\n          type: 'info',\n          timeout: -1,\n          progressBar: true\n        });\n      };\n      var replaceImageUri = function (image, resultUri) {\n        blobCache.removeByUri(image.src);\n        replaceUrlInUndoStack(image.src, resultUri);\n        editor.$(image).attr({\n          'src': Settings.shouldReuseFileName(editor) ? resultUri + cacheInvalidator() : resultUri,\n          'data-mce-src': editor.convertURL(resultUri, 'src')\n        });\n      };\n      var uploadImages = function (callback) {\n        if (!uploader) {\n          uploader = Uploader(uploadStatus, {\n            url: Settings.getImageUploadUrl(editor),\n            basePath: Settings.getImageUploadBasePath(editor),\n            credentials: Settings.getImagesUploadCredentials(editor),\n            handler: Settings.getImagesUploadHandler(editor)\n          });\n        }\n        return scanForImages().then(aliveGuard(function (imageInfos) {\n          var blobInfos;\n          blobInfos = map(imageInfos, function (imageInfo) {\n            return imageInfo.blobInfo;\n          });\n          return uploader.upload(blobInfos, openNotification).then(aliveGuard(function (result) {\n            var filteredResult = map(result, function (uploadInfo, index) {\n              var image = imageInfos[index].image;\n              if (uploadInfo.status && Settings.shouldReplaceBlobUris(editor)) {\n                replaceImageUri(image, uploadInfo.url);\n              } else if (uploadInfo.error) {\n                ErrorReporter.uploadError(editor, uploadInfo.error);\n              }\n              return {\n                element: image,\n                status: uploadInfo.status\n              };\n            });\n            if (callback) {\n              callback(filteredResult);\n            }\n            return filteredResult;\n          }));\n        }));\n      };\n      var uploadImagesAuto = function (callback) {\n        if (Settings.isAutomaticUploadsEnabled(editor)) {\n          return uploadImages(callback);\n        }\n      };\n      var isValidDataUriImage = function (imgElm) {\n        if (forall(urlFilters, function (filter) {\n            return filter(imgElm);\n          }) === false) {\n          return false;\n        }\n        if (imgElm.getAttribute('src').indexOf('data:') === 0) {\n          var dataImgFilter = Settings.getImagesDataImgFilter(editor);\n          return dataImgFilter(imgElm);\n        }\n        return true;\n      };\n      var addFilter = function (filter) {\n        urlFilters.push(filter);\n      };\n      var scanForImages = function () {\n        if (!imageScanner) {\n          imageScanner = ImageScanner(uploadStatus, blobCache);\n        }\n        return imageScanner.findAll(editor.getBody(), isValidDataUriImage).then(aliveGuard(function (result) {\n          result = filter(result, function (resultItem) {\n            if (typeof resultItem === 'string') {\n              ErrorReporter.displayError(editor, resultItem);\n              return false;\n            }\n            return true;\n          });\n          each(result, function (resultItem) {\n            replaceUrlInUndoStack(resultItem.image.src, resultItem.blobInfo.blobUri());\n            resultItem.image.src = resultItem.blobInfo.blobUri();\n            resultItem.image.removeAttribute('data-mce-src');\n          });\n          return result;\n        }));\n      };\n      var destroy = function () {\n        blobCache.destroy();\n        uploadStatus.destroy();\n        imageScanner = uploader = null;\n      };\n      var replaceBlobUris = function (content) {\n        return content.replace(/src=\"(blob:[^\"]+)\"/g, function (match, blobUri) {\n          var resultUri = uploadStatus.getResultUri(blobUri);\n          if (resultUri) {\n            return 'src=\"' + resultUri + '\"';\n          }\n          var blobInfo = blobCache.getByUri(blobUri);\n          if (!blobInfo) {\n            blobInfo = foldl(editor.editorManager.get(), function (result, editor) {\n              return result || editor.editorUpload && editor.editorUpload.blobCache.getByUri(blobUri);\n            }, null);\n          }\n          if (blobInfo) {\n            var blob = blobInfo.blob();\n            return 'src=\"data:' + blob.type + ';base64,' + blobInfo.base64() + '\"';\n          }\n          return match;\n        });\n      };\n      editor.on('setContent', function () {\n        if (Settings.isAutomaticUploadsEnabled(editor)) {\n          uploadImagesAuto();\n        } else {\n          scanForImages();\n        }\n      });\n      editor.on('RawSaveContent', function (e) {\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('getContent', function (e) {\n        if (e.source_view || e.format === 'raw') {\n          return;\n        }\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('PostRender', function () {\n        editor.parser.addNodeFilter('img', function (images) {\n          each(images, function (img) {\n            var src = img.attr('src');\n            if (blobCache.getByUri(src)) {\n              return;\n            }\n            var resultUri = uploadStatus.getResultUri(src);\n            if (resultUri) {\n              img.attr('src', resultUri);\n            }\n          });\n        });\n      });\n      return {\n        blobCache: blobCache,\n        addFilter: addFilter,\n        uploadImages: uploadImages,\n        uploadImagesAuto: uploadImagesAuto,\n        scanForImages: scanForImages,\n        destroy: destroy\n      };\n    }\n\n    var isBlockElement = function (blockElements, node) {\n      return blockElements.hasOwnProperty(node.nodeName);\n    };\n    var isValidTarget = function (blockElements, node) {\n      if (NodeType.isText(node)) {\n        return true;\n      } else if (NodeType.isElement(node)) {\n        return !isBlockElement(blockElements, node) && !Bookmarks.isBookmarkNode(node);\n      } else {\n        return false;\n      }\n    };\n    var hasBlockParent = function (blockElements, root, node) {\n      return exists(Parents.parents(Element.fromDom(node), Element.fromDom(root)), function (elm) {\n        return isBlockElement(blockElements, elm.dom());\n      });\n    };\n    var shouldRemoveTextNode = function (blockElements, node) {\n      if (NodeType.isText(node)) {\n        if (node.nodeValue.length === 0) {\n          return true;\n        } else if (/^\\s+$/.test(node.nodeValue) && (!node.nextSibling || isBlockElement(blockElements, node.nextSibling))) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var addRootBlocks = function (editor) {\n      var settings = editor.settings, dom = editor.dom, selection = editor.selection;\n      var schema = editor.schema, blockElements = schema.getBlockElements();\n      var node = selection.getStart();\n      var rootNode = editor.getBody();\n      var rng;\n      var startContainer, startOffset, endContainer, endOffset, rootBlockNode;\n      var tempNode, wrapped, restoreSelection;\n      var rootNodeName, forcedRootBlock;\n      forcedRootBlock = settings.forced_root_block;\n      if (!node || !NodeType.isElement(node) || !forcedRootBlock) {\n        return;\n      }\n      rootNodeName = rootNode.nodeName.toLowerCase();\n      if (!schema.isValidChild(rootNodeName, forcedRootBlock.toLowerCase()) || hasBlockParent(blockElements, rootNode, node)) {\n        return;\n      }\n      rng = selection.getRng();\n      startContainer = rng.startContainer;\n      startOffset = rng.startOffset;\n      endContainer = rng.endContainer;\n      endOffset = rng.endOffset;\n      restoreSelection = EditorFocus.hasFocus(editor);\n      node = rootNode.firstChild;\n      while (node) {\n        if (isValidTarget(blockElements, node)) {\n          if (shouldRemoveTextNode(blockElements, node)) {\n            tempNode = node;\n            node = node.nextSibling;\n            dom.remove(tempNode);\n            continue;\n          }\n          if (!rootBlockNode) {\n            rootBlockNode = dom.create(forcedRootBlock, editor.settings.forced_root_block_attrs);\n            node.parentNode.insertBefore(rootBlockNode, node);\n            wrapped = true;\n          }\n          tempNode = node;\n          node = node.nextSibling;\n          rootBlockNode.appendChild(tempNode);\n        } else {\n          rootBlockNode = null;\n          node = node.nextSibling;\n        }\n      }\n      if (wrapped && restoreSelection) {\n        rng.setStart(startContainer, startOffset);\n        rng.setEnd(endContainer, endOffset);\n        selection.setRng(rng);\n        editor.nodeChanged();\n      }\n    };\n    var setup$3 = function (editor) {\n      if (editor.settings.forced_root_block) {\n        editor.on('NodeChange', curry(addRootBlocks, editor));\n      }\n    };\n    var ForceBlocks = { setup: setup$3 };\n\n    var getStartNode = function (rng) {\n      var sc = rng.startContainer, so = rng.startOffset;\n      if (NodeType.isText(sc)) {\n        return so === 0 ? Option.some(Element.fromDom(sc)) : Option.none();\n      } else {\n        return Option.from(sc.childNodes[so]).map(Element.fromDom);\n      }\n    };\n    var getEndNode = function (rng) {\n      var ec = rng.endContainer, eo = rng.endOffset;\n      if (NodeType.isText(ec)) {\n        return eo === ec.data.length ? Option.some(Element.fromDom(ec)) : Option.none();\n      } else {\n        return Option.from(ec.childNodes[eo - 1]).map(Element.fromDom);\n      }\n    };\n    var getFirstChildren = function (node) {\n      return firstChild(node).fold(constant([node]), function (child) {\n        return [node].concat(getFirstChildren(child));\n      });\n    };\n    var getLastChildren$1 = function (node) {\n      return lastChild(node).fold(constant([node]), function (child) {\n        if (name(child) === 'br') {\n          return prevSibling(child).map(function (sibling) {\n            return [node].concat(getLastChildren$1(sibling));\n          }).getOr([]);\n        } else {\n          return [node].concat(getLastChildren$1(child));\n        }\n      });\n    };\n    var hasAllContentsSelected = function (elm, rng) {\n      return lift2(getStartNode(rng), getEndNode(rng), function (startNode, endNode) {\n        var start = find(getFirstChildren(elm), curry(eq, startNode));\n        var end = find(getLastChildren$1(elm), curry(eq, endNode));\n        return start.isSome() && end.isSome();\n      }).getOr(false);\n    };\n    var moveEndPoint$1 = function (dom, rng, node, start) {\n      var root = node, walker = new TreeWalker(node, root);\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      do {\n        if (node.nodeType === 3 && Tools.trim(node.nodeValue).length !== 0) {\n          if (start) {\n            rng.setStart(node, 0);\n          } else {\n            rng.setEnd(node, node.nodeValue.length);\n          }\n          return;\n        }\n        if (nonEmptyElementsMap[node.nodeName] && !/^(TD|TH)$/.test(node.nodeName)) {\n          if (start) {\n            rng.setStartBefore(node);\n          } else {\n            if (node.nodeName === 'BR') {\n              rng.setEndBefore(node);\n            } else {\n              rng.setEndAfter(node);\n            }\n          }\n          return;\n        }\n        if (Env.ie && Env.ie < 11 && dom.isBlock(node) && dom.isEmpty(node)) {\n          if (start) {\n            rng.setStart(node, 0);\n          } else {\n            rng.setEnd(node, 0);\n          }\n          return;\n        }\n      } while (node = start ? walker.next() : walker.prev());\n      if (root.nodeName === 'BODY') {\n        if (start) {\n          rng.setStart(root, 0);\n        } else {\n          rng.setEnd(root, root.childNodes.length);\n        }\n      }\n    };\n    var hasAnyRanges = function (editor) {\n      var sel = editor.selection.getSel();\n      return sel && sel.rangeCount > 0;\n    };\n\n    function NodeChange (editor) {\n      var lastRng, lastPath = [];\n      var isSameElementPath = function (startElm) {\n        var i, currentPath;\n        currentPath = editor.$(startElm).parentsUntil(editor.getBody()).add(startElm);\n        if (currentPath.length === lastPath.length) {\n          for (i = currentPath.length; i >= 0; i--) {\n            if (currentPath[i] !== lastPath[i]) {\n              break;\n            }\n          }\n          if (i === -1) {\n            lastPath = currentPath;\n            return true;\n          }\n        }\n        lastPath = currentPath;\n        return false;\n      };\n      if (!('onselectionchange' in editor.getDoc())) {\n        editor.on('NodeChange Click MouseUp KeyUp Focus', function (e) {\n          var nativeRng, fakeRng;\n          nativeRng = editor.selection.getRng();\n          fakeRng = {\n            startContainer: nativeRng.startContainer,\n            startOffset: nativeRng.startOffset,\n            endContainer: nativeRng.endContainer,\n            endOffset: nativeRng.endOffset\n          };\n          if (e.type === 'nodechange' || !RangeCompare.isEq(fakeRng, lastRng)) {\n            editor.fire('SelectionChange');\n          }\n          lastRng = fakeRng;\n        });\n      }\n      editor.on('contextmenu', function () {\n        editor.fire('SelectionChange');\n      });\n      editor.on('SelectionChange', function () {\n        var startElm = editor.selection.getStart(true);\n        if (!startElm || !Env.range && editor.selection.isCollapsed()) {\n          return;\n        }\n        if (hasAnyRanges(editor) && !isSameElementPath(startElm) && editor.dom.isChildOf(startElm, editor.getBody())) {\n          editor.nodeChanged({ selectionChange: true });\n        }\n      });\n      editor.on('MouseUp', function (e) {\n        if (!e.isDefaultPrevented() && hasAnyRanges(editor)) {\n          if (editor.selection.getNode().nodeName === 'IMG') {\n            Delay.setEditorTimeout(editor, function () {\n              editor.nodeChanged();\n            });\n          } else {\n            editor.nodeChanged();\n          }\n        }\n      });\n      this.nodeChanged = function (args) {\n        var selection = editor.selection;\n        var node, parents, root;\n        if (editor.initialized && selection && !editor.settings.disable_nodechange && !editor.readonly) {\n          root = editor.getBody();\n          node = selection.getStart(true) || root;\n          if (node.ownerDocument !== editor.getDoc() || !editor.dom.isChildOf(node, root)) {\n            node = root;\n          }\n          parents = [];\n          editor.dom.getParent(node, function (node) {\n            if (node === root) {\n              return true;\n            }\n            parents.push(node);\n          });\n          args = args || {};\n          args.element = node;\n          args.parents = parents;\n          editor.fire('NodeChange', args);\n        }\n      };\n    }\n\n    var VK = {\n      BACKSPACE: 8,\n      DELETE: 46,\n      DOWN: 40,\n      ENTER: 13,\n      LEFT: 37,\n      RIGHT: 39,\n      SPACEBAR: 32,\n      TAB: 9,\n      UP: 38,\n      END: 35,\n      HOME: 36,\n      modifierPressed: function (e) {\n        return e.shiftKey || e.ctrlKey || e.altKey || this.metaKeyPressed(e);\n      },\n      metaKeyPressed: function (e) {\n        return Env.mac ? e.metaKey : e.ctrlKey && !e.altKey;\n      }\n    };\n\n    var getNodeClientRects = function (node) {\n      var toArrayWithNode = function (clientRects) {\n        return map(clientRects, function (clientRect) {\n          clientRect = clone$1(clientRect);\n          clientRect.node = node;\n          return clientRect;\n        });\n      };\n      if (NodeType.isElement(node)) {\n        return toArrayWithNode(node.getClientRects());\n      }\n      if (NodeType.isText(node)) {\n        var rng = node.ownerDocument.createRange();\n        rng.setStart(node, 0);\n        rng.setEnd(node, node.data.length);\n        return toArrayWithNode(rng.getClientRects());\n      }\n    };\n    var getClientRects = function (node) {\n      return foldl(node, function (result, node) {\n        return result.concat(getNodeClientRects(node));\n      }, []);\n    };\n\n    var VDirection;\n    (function (VDirection) {\n      VDirection[VDirection['Up'] = -1] = 'Up';\n      VDirection[VDirection['Down'] = 1] = 'Down';\n    }(VDirection || (VDirection = {})));\n    var findUntil = function (direction, root, predicateFn, node) {\n      while (node = findNode(node, direction, isEditableCaretCandidate, root)) {\n        if (predicateFn(node)) {\n          return;\n        }\n      }\n    };\n    var walkUntil = function (direction, isAboveFn, isBeflowFn, root, predicateFn, caretPosition) {\n      var line = 0, node;\n      var result = [];\n      var targetClientRect;\n      var add = function (node) {\n        var i, clientRect, clientRects;\n        clientRects = getClientRects([node]);\n        if (direction === -1) {\n          clientRects = clientRects.reverse();\n        }\n        for (i = 0; i < clientRects.length; i++) {\n          clientRect = clientRects[i];\n          if (isBeflowFn(clientRect, targetClientRect)) {\n            continue;\n          }\n          if (result.length > 0 && isAboveFn(clientRect, ArrUtils.last(result))) {\n            line++;\n          }\n          clientRect.line = line;\n          if (predicateFn(clientRect)) {\n            return true;\n          }\n          result.push(clientRect);\n        }\n      };\n      targetClientRect = ArrUtils.last(caretPosition.getClientRects());\n      if (!targetClientRect) {\n        return result;\n      }\n      node = caretPosition.getNode();\n      add(node);\n      findUntil(direction, root, add, node);\n      return result;\n    };\n    var aboveLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line > lineNumber;\n    };\n    var isLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line === lineNumber;\n    };\n    var upUntil = curry(walkUntil, VDirection.Up, isAbove, isBelow);\n    var downUntil = curry(walkUntil, VDirection.Down, isBelow, isAbove);\n    var positionsUntil = function (direction, root, predicateFn, node) {\n      var caretWalker = CaretWalker(root);\n      var walkFn, isBelowFn, isAboveFn, caretPosition;\n      var result = [];\n      var line = 0, clientRect, targetClientRect;\n      var getClientRect = function (caretPosition) {\n        if (direction === 1) {\n          return ArrUtils.last(caretPosition.getClientRects());\n        }\n        return ArrUtils.last(caretPosition.getClientRects());\n      };\n      if (direction === 1) {\n        walkFn = caretWalker.next;\n        isBelowFn = isBelow;\n        isAboveFn = isAbove;\n        caretPosition = CaretPosition$1.after(node);\n      } else {\n        walkFn = caretWalker.prev;\n        isBelowFn = isAbove;\n        isAboveFn = isBelow;\n        caretPosition = CaretPosition$1.before(node);\n      }\n      targetClientRect = getClientRect(caretPosition);\n      do {\n        if (!caretPosition.isVisible()) {\n          continue;\n        }\n        clientRect = getClientRect(caretPosition);\n        if (isAboveFn(clientRect, targetClientRect)) {\n          continue;\n        }\n        if (result.length > 0 && isBelowFn(clientRect, ArrUtils.last(result))) {\n          line++;\n        }\n        clientRect = clone$1(clientRect);\n        clientRect.position = caretPosition;\n        clientRect.line = line;\n        if (predicateFn(clientRect)) {\n          return result;\n        }\n        result.push(clientRect);\n      } while (caretPosition = walkFn(caretPosition));\n      return result;\n    };\n    var isAboveLine = function (lineNumber) {\n      return function (clientRect) {\n        return aboveLineNumber(lineNumber, clientRect);\n      };\n    };\n    var isLine = function (lineNumber) {\n      return function (clientRect) {\n        return isLineNumber(lineNumber, clientRect);\n      };\n    };\n\n    var isContentEditableFalse$7 = NodeType.isContentEditableFalse;\n    var findNode$1 = findNode;\n    var distanceToRectLeft = function (clientRect, clientX) {\n      return Math.abs(clientRect.left - clientX);\n    };\n    var distanceToRectRight = function (clientRect, clientX) {\n      return Math.abs(clientRect.right - clientX);\n    };\n    var isInside = function (clientX, clientRect) {\n      return clientX >= clientRect.left && clientX <= clientRect.right;\n    };\n    var findClosestClientRect = function (clientRects, clientX) {\n      return ArrUtils.reduce(clientRects, function (oldClientRect, clientRect) {\n        var oldDistance, newDistance;\n        oldDistance = Math.min(distanceToRectLeft(oldClientRect, clientX), distanceToRectRight(oldClientRect, clientX));\n        newDistance = Math.min(distanceToRectLeft(clientRect, clientX), distanceToRectRight(clientRect, clientX));\n        if (isInside(clientX, clientRect)) {\n          return clientRect;\n        }\n        if (isInside(clientX, oldClientRect)) {\n          return oldClientRect;\n        }\n        if (newDistance === oldDistance && isContentEditableFalse$7(clientRect.node)) {\n          return clientRect;\n        }\n        if (newDistance < oldDistance) {\n          return clientRect;\n        }\n        return oldClientRect;\n      });\n    };\n    var walkUntil$1 = function (direction, root, predicateFn, node) {\n      while (node = findNode$1(node, direction, isEditableCaretCandidate, root)) {\n        if (predicateFn(node)) {\n          return;\n        }\n      }\n    };\n    var findLineNodeRects = function (root, targetNodeRect) {\n      var clientRects = [];\n      var collect = function (checkPosFn, node) {\n        var lineRects;\n        lineRects = filter(getClientRects([node]), function (clientRect) {\n          return !checkPosFn(clientRect, targetNodeRect);\n        });\n        clientRects = clientRects.concat(lineRects);\n        return lineRects.length === 0;\n      };\n      clientRects.push(targetNodeRect);\n      walkUntil$1(VDirection.Up, root, curry(collect, isAbove), targetNodeRect.node);\n      walkUntil$1(VDirection.Down, root, curry(collect, isBelow), targetNodeRect.node);\n      return clientRects;\n    };\n    var getFakeCaretTargets = function (root) {\n      return filter(from$1(root.getElementsByTagName('*')), isFakeCaretTarget);\n    };\n    var caretInfo = function (clientRect, clientX) {\n      return {\n        node: clientRect.node,\n        before: distanceToRectLeft(clientRect, clientX) < distanceToRectRight(clientRect, clientX)\n      };\n    };\n    var closestCaret = function (root, clientX, clientY) {\n      var closestNodeRect;\n      var contentEditableFalseNodeRects = getClientRects(getFakeCaretTargets(root));\n      var targetNodeRects = filter(contentEditableFalseNodeRects, function (rect) {\n        return clientY >= rect.top && clientY <= rect.bottom;\n      });\n      closestNodeRect = findClosestClientRect(targetNodeRects, clientX);\n      if (closestNodeRect) {\n        closestNodeRect = findClosestClientRect(findLineNodeRects(root, closestNodeRect), clientX);\n        if (closestNodeRect && isFakeCaretTarget(closestNodeRect.node)) {\n          return caretInfo(closestNodeRect, clientX);\n        }\n      }\n      return null;\n    };\n\n    var isXYWithinRange = function (clientX, clientY, range) {\n      if (range.collapsed) {\n        return false;\n      }\n      if (Env.ie && Env.ie <= 11 && range.startOffset === range.endOffset - 1 && range.startContainer === range.endContainer) {\n        var elm = range.startContainer.childNodes[range.startOffset];\n        if (NodeType.isElement(elm)) {\n          return exists(elm.getClientRects(), function (rect) {\n            return containsXY(rect, clientX, clientY);\n          });\n        }\n      }\n      return exists(range.getClientRects(), function (rect) {\n        return containsXY(rect, clientX, clientY);\n      });\n    };\n    var RangePoint = { isXYWithinRange: isXYWithinRange };\n\n    var getAbsolutePosition = function (elm) {\n      var doc, docElem, win, clientRect;\n      clientRect = elm.getBoundingClientRect();\n      doc = elm.ownerDocument;\n      docElem = doc.documentElement;\n      win = doc.defaultView;\n      return {\n        top: clientRect.top + win.pageYOffset - docElem.clientTop,\n        left: clientRect.left + win.pageXOffset - docElem.clientLeft\n      };\n    };\n    var getBodyPosition = function (editor) {\n      return editor.inline ? getAbsolutePosition(editor.getBody()) : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getScrollPosition = function (editor) {\n      var body = editor.getBody();\n      return editor.inline ? {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      } : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getBodyScroll = function (editor) {\n      var body = editor.getBody(), docElm = editor.getDoc().documentElement;\n      var inlineScroll = {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      };\n      var iframeScroll = {\n        left: body.scrollLeft || docElm.scrollLeft,\n        top: body.scrollTop || docElm.scrollTop\n      };\n      return editor.inline ? inlineScroll : iframeScroll;\n    };\n    var getMousePosition = function (editor, event) {\n      if (event.target.ownerDocument !== editor.getDoc()) {\n        var iframePosition = getAbsolutePosition(editor.getContentAreaContainer());\n        var scrollPosition = getBodyScroll(editor);\n        return {\n          left: event.pageX - iframePosition.left + scrollPosition.left,\n          top: event.pageY - iframePosition.top + scrollPosition.top\n        };\n      }\n      return {\n        left: event.pageX,\n        top: event.pageY\n      };\n    };\n    var calculatePosition = function (bodyPosition, scrollPosition, mousePosition) {\n      return {\n        pageX: mousePosition.left - bodyPosition.left + scrollPosition.left,\n        pageY: mousePosition.top - bodyPosition.top + scrollPosition.top\n      };\n    };\n    var calc = function (editor, event) {\n      return calculatePosition(getBodyPosition(editor), getScrollPosition(editor), getMousePosition(editor, event));\n    };\n    var MousePosition = { calc: calc };\n\n    var isContentEditableFalse$8 = NodeType.isContentEditableFalse, isContentEditableTrue$3 = NodeType.isContentEditableTrue;\n    var isDraggable = function (rootElm, elm) {\n      return isContentEditableFalse$8(elm) && elm !== rootElm;\n    };\n    var isValidDropTarget = function (editor, targetElement, dragElement) {\n      if (targetElement === dragElement || editor.dom.isChildOf(targetElement, dragElement)) {\n        return false;\n      }\n      if (isContentEditableFalse$8(targetElement)) {\n        return false;\n      }\n      return true;\n    };\n    var cloneElement = function (elm) {\n      var cloneElm = elm.cloneNode(true);\n      cloneElm.removeAttribute('data-mce-selected');\n      return cloneElm;\n    };\n    var createGhost = function (editor, elm, width, height) {\n      var clonedElm = elm.cloneNode(true);\n      editor.dom.setStyles(clonedElm, {\n        width: width,\n        height: height\n      });\n      editor.dom.setAttrib(clonedElm, 'data-mce-selected', null);\n      var ghostElm = editor.dom.create('div', {\n        'class': 'mce-drag-container',\n        'data-mce-bogus': 'all',\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      });\n      editor.dom.setStyles(ghostElm, {\n        position: 'absolute',\n        opacity: 0.5,\n        overflow: 'hidden',\n        border: 0,\n        padding: 0,\n        margin: 0,\n        width: width,\n        height: height\n      });\n      editor.dom.setStyles(clonedElm, {\n        margin: 0,\n        boxSizing: 'border-box'\n      });\n      ghostElm.appendChild(clonedElm);\n      return ghostElm;\n    };\n    var appendGhostToBody = function (ghostElm, bodyElm) {\n      if (ghostElm.parentNode !== bodyElm) {\n        bodyElm.appendChild(ghostElm);\n      }\n    };\n    var moveGhost = function (ghostElm, position, width, height, maxX, maxY) {\n      var overflowX = 0, overflowY = 0;\n      ghostElm.style.left = position.pageX + 'px';\n      ghostElm.style.top = position.pageY + 'px';\n      if (position.pageX + width > maxX) {\n        overflowX = position.pageX + width - maxX;\n      }\n      if (position.pageY + height > maxY) {\n        overflowY = position.pageY + height - maxY;\n      }\n      ghostElm.style.width = width - overflowX + 'px';\n      ghostElm.style.height = height - overflowY + 'px';\n    };\n    var removeElement = function (elm) {\n      if (elm && elm.parentNode) {\n        elm.parentNode.removeChild(elm);\n      }\n    };\n    var isLeftMouseButtonPressed = function (e) {\n      return e.button === 0;\n    };\n    var hasDraggableElement = function (state) {\n      return state.element;\n    };\n    var applyRelPos = function (state, position) {\n      return {\n        pageX: position.pageX - state.relX,\n        pageY: position.pageY + 5\n      };\n    };\n    var start$1 = function (state, editor) {\n      return function (e) {\n        if (isLeftMouseButtonPressed(e)) {\n          var ceElm = find(editor.dom.getParents(e.target), Predicate.or(isContentEditableFalse$8, isContentEditableTrue$3)).getOr(null);\n          if (isDraggable(editor.getBody(), ceElm)) {\n            var elmPos = editor.dom.getPos(ceElm);\n            var bodyElm = editor.getBody();\n            var docElm = editor.getDoc().documentElement;\n            state.element = ceElm;\n            state.screenX = e.screenX;\n            state.screenY = e.screenY;\n            state.maxX = (editor.inline ? bodyElm.scrollWidth : docElm.offsetWidth) - 2;\n            state.maxY = (editor.inline ? bodyElm.scrollHeight : docElm.offsetHeight) - 2;\n            state.relX = e.pageX - elmPos.x;\n            state.relY = e.pageY - elmPos.y;\n            state.width = ceElm.offsetWidth;\n            state.height = ceElm.offsetHeight;\n            state.ghost = createGhost(editor, ceElm, state.width, state.height);\n          }\n        }\n      };\n    };\n    var move$1 = function (state, editor) {\n      var throttledPlaceCaretAt = Delay.throttle(function (clientX, clientY) {\n        editor._selectionOverrides.hideFakeCaret();\n        editor.selection.placeCaretAt(clientX, clientY);\n      }, 0);\n      return function (e) {\n        var movement = Math.max(Math.abs(e.screenX - state.screenX), Math.abs(e.screenY - state.screenY));\n        if (hasDraggableElement(state) && !state.dragging && movement > 10) {\n          var args = editor.fire('dragstart', { target: state.element });\n          if (args.isDefaultPrevented()) {\n            return;\n          }\n          state.dragging = true;\n          editor.focus();\n        }\n        if (state.dragging) {\n          var targetPos = applyRelPos(state, MousePosition.calc(editor, e));\n          appendGhostToBody(state.ghost, editor.getBody());\n          moveGhost(state.ghost, targetPos, state.width, state.height, state.maxX, state.maxY);\n          throttledPlaceCaretAt(e.clientX, e.clientY);\n        }\n      };\n    };\n    var getRawTarget = function (selection) {\n      var rng = selection.getSel().getRangeAt(0);\n      var startContainer = rng.startContainer;\n      return startContainer.nodeType === 3 ? startContainer.parentNode : startContainer;\n    };\n    var drop = function (state, editor) {\n      return function (e) {\n        if (state.dragging) {\n          if (isValidDropTarget(editor, getRawTarget(editor.selection), state.element)) {\n            var targetClone_1 = cloneElement(state.element);\n            var args = editor.fire('drop', {\n              targetClone: targetClone_1,\n              clientX: e.clientX,\n              clientY: e.clientY\n            });\n            if (!args.isDefaultPrevented()) {\n              targetClone_1 = args.targetClone;\n              editor.undoManager.transact(function () {\n                removeElement(state.element);\n                editor.insertContent(editor.dom.getOuterHTML(targetClone_1));\n                editor._selectionOverrides.hideFakeCaret();\n              });\n            }\n          }\n        }\n        removeDragState(state);\n      };\n    };\n    var stop = function (state, editor) {\n      return function () {\n        if (state.dragging) {\n          editor.fire('dragend');\n        }\n        removeDragState(state);\n      };\n    };\n    var removeDragState = function (state) {\n      state.dragging = false;\n      state.element = null;\n      removeElement(state.ghost);\n    };\n    var bindFakeDragEvents = function (editor) {\n      var state = {};\n      var pageDom, dragStartHandler, dragHandler, dropHandler, dragEndHandler, rootDocument;\n      pageDom = DOMUtils$1.DOM;\n      rootDocument = domGlobals.document;\n      dragStartHandler = start$1(state, editor);\n      dragHandler = move$1(state, editor);\n      dropHandler = drop(state, editor);\n      dragEndHandler = stop(state, editor);\n      editor.on('mousedown', dragStartHandler);\n      editor.on('mousemove', dragHandler);\n      editor.on('mouseup', dropHandler);\n      pageDom.bind(rootDocument, 'mousemove', dragHandler);\n      pageDom.bind(rootDocument, 'mouseup', dragEndHandler);\n      editor.on('remove', function () {\n        pageDom.unbind(rootDocument, 'mousemove', dragHandler);\n        pageDom.unbind(rootDocument, 'mouseup', dragEndHandler);\n      });\n    };\n    var blockIeDrop = function (editor) {\n      editor.on('drop', function (e) {\n        var realTarget = typeof e.clientX !== 'undefined' ? editor.getDoc().elementFromPoint(e.clientX, e.clientY) : null;\n        if (isContentEditableFalse$8(realTarget) || isContentEditableFalse$8(editor.dom.getContentEditableParent(realTarget))) {\n          e.preventDefault();\n        }\n      });\n    };\n    var init = function (editor) {\n      bindFakeDragEvents(editor);\n      blockIeDrop(editor);\n    };\n    var DragDropOverrides = { init: init };\n\n    var setup$4 = function (editor) {\n      var renderFocusCaret = first(function () {\n        if (!editor.removed) {\n          var rng = editor.selection.getRng();\n          if (rng.collapsed) {\n            var caretRange = renderRangeCaret(editor, editor.selection.getRng(), false);\n            editor.selection.setRng(caretRange);\n          }\n        }\n      }, 0);\n      editor.on('focus', function () {\n        renderFocusCaret.throttle();\n      });\n      editor.on('blur', function () {\n        renderFocusCaret.cancel();\n      });\n    };\n    var CefFocus = { setup: setup$4 };\n\n    var isContentEditableTrue$4 = NodeType.isContentEditableTrue;\n    var isContentEditableFalse$9 = NodeType.isContentEditableFalse;\n    var getContentEditableRoot$1 = function (editor, node) {\n      var root = editor.getBody();\n      while (node && node !== root) {\n        if (isContentEditableTrue$4(node) || isContentEditableFalse$9(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var SelectionOverrides = function (editor) {\n      var isBlock = function (node) {\n        return editor.dom.isBlock(node);\n      };\n      var rootNode = editor.getBody();\n      var fakeCaret = FakeCaret(editor.getBody(), isBlock, function () {\n        return EditorFocus.hasFocus(editor);\n      });\n      var realSelectionId = 'sel-' + editor.dom.uniqueId();\n      var selectedContentEditableNode;\n      var isFakeSelectionElement = function (elm) {\n        return editor.dom.hasClass(elm, 'mce-offscreen-selection');\n      };\n      var getRealSelectionElement = function () {\n        var container = editor.dom.get(realSelectionId);\n        return container ? container.getElementsByTagName('*')[0] : container;\n      };\n      var setRange = function (range) {\n        if (range) {\n          editor.selection.setRng(range);\n        }\n      };\n      var getRange = function () {\n        return editor.selection.getRng();\n      };\n      var showCaret = function (direction, node, before, scrollIntoView) {\n        if (scrollIntoView === void 0) {\n          scrollIntoView = true;\n        }\n        var e;\n        e = editor.fire('ShowCaret', {\n          target: node,\n          direction: direction,\n          before: before\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        if (scrollIntoView) {\n          editor.selection.scrollIntoView(node, direction === -1);\n        }\n        return fakeCaret.show(before, node);\n      };\n      var getNormalizedRangeEndPoint = function (direction, range) {\n        range = normalizeRange(direction, rootNode, range);\n        if (direction === -1) {\n          return CaretPosition$1.fromRangeStart(range);\n        }\n        return CaretPosition$1.fromRangeEnd(range);\n      };\n      var showBlockCaretContainer = function (blockCaretContainer) {\n        if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n          showCaretContainerBlock(blockCaretContainer);\n          setRange(getRange());\n          editor.selection.scrollIntoView(blockCaretContainer[0]);\n        }\n      };\n      var registerEvents = function () {\n        editor.on('mouseup', function (e) {\n          var range = getRange();\n          if (range.collapsed && EditorView.isXYInContentArea(editor, e.clientX, e.clientY)) {\n            setRange(renderCaretAtRange(editor, range, false));\n          }\n        });\n        editor.on('click', function (e) {\n          var contentEditableRoot;\n          contentEditableRoot = getContentEditableRoot$1(editor, e.target);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse$9(contentEditableRoot)) {\n              e.preventDefault();\n              editor.focus();\n            }\n            if (isContentEditableTrue$4(contentEditableRoot)) {\n              if (editor.dom.isChildOf(contentEditableRoot, editor.selection.getNode())) {\n                removeContentEditableSelection();\n              }\n            }\n          }\n        });\n        editor.on('blur NewBlock', function () {\n          removeContentEditableSelection();\n        });\n        editor.on('ResizeWindow FullscreenStateChanged', function () {\n          return fakeCaret.reposition();\n        });\n        var handleTouchSelect = function (editor) {\n          var moved = false;\n          editor.on('touchstart', function () {\n            moved = false;\n          });\n          editor.on('touchmove', function () {\n            moved = true;\n          });\n          editor.on('touchend', function (e) {\n            var contentEditableRoot = getContentEditableRoot$1(editor, e.target);\n            if (isContentEditableFalse$9(contentEditableRoot)) {\n              if (!moved) {\n                e.preventDefault();\n                setContentEditableSelection(selectNode(editor, contentEditableRoot));\n              }\n            }\n          });\n        };\n        var hasNormalCaretPosition = function (elm) {\n          var caretWalker = CaretWalker(elm);\n          if (!elm.firstChild) {\n            return false;\n          }\n          var startPos = CaretPosition$1.before(elm.firstChild);\n          var newPos = caretWalker.next(startPos);\n          return newPos && !isBeforeContentEditableFalse(newPos) && !isAfterContentEditableFalse(newPos);\n        };\n        var isInSameBlock = function (node1, node2) {\n          var block1 = editor.dom.getParent(node1, editor.dom.isBlock);\n          var block2 = editor.dom.getParent(node2, editor.dom.isBlock);\n          return block1 === block2;\n        };\n        var hasBetterMouseTarget = function (targetNode, caretNode) {\n          var targetBlock = editor.dom.getParent(targetNode, editor.dom.isBlock);\n          var caretBlock = editor.dom.getParent(caretNode, editor.dom.isBlock);\n          if (targetBlock && editor.dom.isChildOf(targetBlock, caretBlock) && isContentEditableFalse$9(getContentEditableRoot$1(editor, targetBlock)) === false) {\n            return true;\n          }\n          return targetBlock && !isInSameBlock(targetBlock, caretBlock) && hasNormalCaretPosition(targetBlock);\n        };\n        handleTouchSelect(editor);\n        editor.on('mousedown', function (e) {\n          var contentEditableRoot;\n          var targetElm = e.target;\n          if (targetElm !== rootNode && targetElm.nodeName !== 'HTML' && !editor.dom.isChildOf(targetElm, rootNode)) {\n            return;\n          }\n          if (EditorView.isXYInContentArea(editor, e.clientX, e.clientY) === false) {\n            return;\n          }\n          contentEditableRoot = getContentEditableRoot$1(editor, targetElm);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse$9(contentEditableRoot)) {\n              e.preventDefault();\n              setContentEditableSelection(selectNode(editor, contentEditableRoot));\n            } else {\n              removeContentEditableSelection();\n              if (!(isContentEditableTrue$4(contentEditableRoot) && e.shiftKey) && !RangePoint.isXYWithinRange(e.clientX, e.clientY, editor.selection.getRng())) {\n                hideFakeCaret();\n                editor.selection.placeCaretAt(e.clientX, e.clientY);\n              }\n            }\n          } else if (isFakeCaretTarget(targetElm) === false) {\n            removeContentEditableSelection();\n            hideFakeCaret();\n            var caretInfo = closestCaret(rootNode, e.clientX, e.clientY);\n            if (caretInfo) {\n              if (!hasBetterMouseTarget(e.target, caretInfo.node)) {\n                e.preventDefault();\n                var range = showCaret(1, caretInfo.node, caretInfo.before, false);\n                editor.getBody().focus();\n                setRange(range);\n              }\n            }\n          }\n        });\n        editor.on('keypress', function (e) {\n          if (VK.modifierPressed(e)) {\n            return;\n          }\n          switch (e.keyCode) {\n          default:\n            if (isContentEditableFalse$9(editor.selection.getNode())) {\n              e.preventDefault();\n            }\n            break;\n          }\n        });\n        editor.on('getSelectionRange', function (e) {\n          var rng = e.range;\n          if (selectedContentEditableNode) {\n            if (!selectedContentEditableNode.parentNode) {\n              selectedContentEditableNode = null;\n              return;\n            }\n            rng = rng.cloneRange();\n            rng.selectNode(selectedContentEditableNode);\n            e.range = rng;\n          }\n        });\n        editor.on('setSelectionRange', function (e) {\n          e.range = normalizeShortEndedElementSelection(e.range);\n          var rng = setContentEditableSelection(e.range, e.forward);\n          if (rng) {\n            e.range = rng;\n          }\n        });\n        var isPasteBin = function (node) {\n          return node.id === 'mcepastebin';\n        };\n        editor.on('AfterSetSelectionRange', function (e) {\n          var rng = e.range;\n          if (!isRangeInCaretContainer(rng) && !isPasteBin(rng.startContainer.parentNode)) {\n            hideFakeCaret();\n          }\n          if (!isFakeSelectionElement(rng.startContainer.parentNode)) {\n            removeContentEditableSelection();\n          }\n        });\n        editor.on('copy', function (e) {\n          var clipboardData = e.clipboardData;\n          if (!e.isDefaultPrevented() && e.clipboardData && !Env.ie) {\n            var realSelectionElement = getRealSelectionElement();\n            if (realSelectionElement) {\n              e.preventDefault();\n              clipboardData.clearData();\n              clipboardData.setData('text/html', realSelectionElement.outerHTML);\n              clipboardData.setData('text/plain', realSelectionElement.outerText);\n            }\n          }\n        });\n        DragDropOverrides.init(editor);\n        CefFocus.setup(editor);\n      };\n      var addCss = function () {\n        var styles = editor.contentStyles, rootClass = '.mce-content-body';\n        styles.push(fakeCaret.getCss());\n        styles.push(rootClass + ' .mce-offscreen-selection {' + 'position: absolute;' + 'left: -9999999999px;' + 'max-width: 1000000px;' + '}' + rootClass + ' *[contentEditable=false] {' + 'cursor: default;' + '}' + rootClass + ' *[contentEditable=true] {' + 'cursor: text;' + '}');\n      };\n      var isWithinCaretContainer = function (node) {\n        return isCaretContainer(node) || startsWithCaretContainer(node) || endsWithCaretContainer(node);\n      };\n      var isRangeInCaretContainer = function (rng) {\n        return isWithinCaretContainer(rng.startContainer) || isWithinCaretContainer(rng.endContainer);\n      };\n      var normalizeShortEndedElementSelection = function (rng) {\n        var shortEndedElements = editor.schema.getShortEndedElements();\n        var newRng = editor.dom.createRng();\n        var startContainer = rng.startContainer;\n        var startOffset = rng.startOffset;\n        var endContainer = rng.endContainer;\n        var endOffset = rng.endOffset;\n        if (has(shortEndedElements, startContainer.nodeName.toLowerCase())) {\n          if (startOffset === 0) {\n            newRng.setStartBefore(startContainer);\n          } else {\n            newRng.setStartAfter(startContainer);\n          }\n        } else {\n          newRng.setStart(startContainer, startOffset);\n        }\n        if (has(shortEndedElements, endContainer.nodeName.toLowerCase())) {\n          if (endOffset === 0) {\n            newRng.setEndBefore(endContainer);\n          } else {\n            newRng.setEndAfter(endContainer);\n          }\n        } else {\n          newRng.setEnd(endContainer, endOffset);\n        }\n        return newRng;\n      };\n      var setContentEditableSelection = function (range, forward) {\n        var node;\n        var $ = editor.$;\n        var dom = editor.dom;\n        var $realSelectionContainer, sel, startContainer, startOffset, endOffset, e, caretPosition, targetClone, origTargetClone;\n        if (!range) {\n          return null;\n        }\n        if (range.collapsed) {\n          if (!isRangeInCaretContainer(range)) {\n            if (forward === false) {\n              caretPosition = getNormalizedRangeEndPoint(-1, range);\n              if (isFakeCaretTarget(caretPosition.getNode(true))) {\n                return showCaret(-1, caretPosition.getNode(true), false, false);\n              }\n              if (isFakeCaretTarget(caretPosition.getNode())) {\n                return showCaret(-1, caretPosition.getNode(), !caretPosition.isAtEnd(), false);\n              }\n            } else {\n              caretPosition = getNormalizedRangeEndPoint(1, range);\n              if (isFakeCaretTarget(caretPosition.getNode())) {\n                return showCaret(1, caretPosition.getNode(), !caretPosition.isAtEnd(), false);\n              }\n              if (isFakeCaretTarget(caretPosition.getNode(true))) {\n                return showCaret(1, caretPosition.getNode(true), false, false);\n              }\n            }\n          }\n          return null;\n        }\n        startContainer = range.startContainer;\n        startOffset = range.startOffset;\n        endOffset = range.endOffset;\n        if (startContainer.nodeType === 3 && startOffset === 0 && isContentEditableFalse$9(startContainer.parentNode)) {\n          startContainer = startContainer.parentNode;\n          startOffset = dom.nodeIndex(startContainer);\n          startContainer = startContainer.parentNode;\n        }\n        if (startContainer.nodeType !== 1) {\n          return null;\n        }\n        if (endOffset === startOffset + 1 && startContainer === range.endContainer) {\n          node = startContainer.childNodes[startOffset];\n        }\n        if (!isContentEditableFalse$9(node)) {\n          return null;\n        }\n        targetClone = origTargetClone = node.cloneNode(true);\n        e = editor.fire('ObjectSelected', {\n          target: node,\n          targetClone: targetClone\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        $realSelectionContainer = descendant(Element.fromDom(editor.getBody()), '#' + realSelectionId).fold(function () {\n          return $([]);\n        }, function (elm) {\n          return $([elm.dom()]);\n        });\n        targetClone = e.targetClone;\n        if ($realSelectionContainer.length === 0) {\n          $realSelectionContainer = $('<div data-mce-bogus=\"all\" class=\"mce-offscreen-selection\"></div>').attr('id', realSelectionId);\n          $realSelectionContainer.appendTo(editor.getBody());\n        }\n        range = editor.dom.createRng();\n        if (targetClone === origTargetClone && Env.ie) {\n          $realSelectionContainer.empty().append('<p style=\"font-size: 0\" data-mce-bogus=\"all\">\\xA0</p>').append(targetClone);\n          range.setStartAfter($realSelectionContainer[0].firstChild.firstChild);\n          range.setEndAfter(targetClone);\n        } else {\n          $realSelectionContainer.empty().append('\\xA0').append(targetClone).append('\\xA0');\n          range.setStart($realSelectionContainer[0].firstChild, 1);\n          range.setEnd($realSelectionContainer[0].lastChild, 0);\n        }\n        $realSelectionContainer.css({ top: dom.getPos(node, editor.getBody()).y });\n        $realSelectionContainer[0].focus();\n        sel = editor.selection.getSel();\n        sel.removeAllRanges();\n        sel.addRange(range);\n        each(descendants$1(Element.fromDom(editor.getBody()), '*[data-mce-selected]'), function (elm) {\n          remove(elm, 'data-mce-selected');\n        });\n        node.setAttribute('data-mce-selected', '1');\n        selectedContentEditableNode = node;\n        hideFakeCaret();\n        return range;\n      };\n      var removeContentEditableSelection = function () {\n        if (selectedContentEditableNode) {\n          selectedContentEditableNode.removeAttribute('data-mce-selected');\n          descendant(Element.fromDom(editor.getBody()), '#' + realSelectionId).each(remove$1);\n          selectedContentEditableNode = null;\n        }\n        descendant(Element.fromDom(editor.getBody()), '#' + realSelectionId).each(remove$1);\n        selectedContentEditableNode = null;\n      };\n      var destroy = function () {\n        fakeCaret.destroy();\n        selectedContentEditableNode = null;\n      };\n      var hideFakeCaret = function () {\n        fakeCaret.hide();\n      };\n      if (Env.ceFalse) {\n        registerEvents();\n        addCss();\n      }\n      return {\n        showCaret: showCaret,\n        showBlockCaretContainer: showBlockCaretContainer,\n        hideFakeCaret: hideFakeCaret,\n        destroy: destroy\n      };\n    };\n\n    var isValidPrefixAttrName = function (name) {\n      return name.indexOf('data-') === 0 || name.indexOf('aria-') === 0;\n    };\n    var trimComments = function (text) {\n      var sanitizedText = text;\n      while (/<!--|--!?>/g.test(sanitizedText)) {\n        sanitizedText = sanitizedText.replace(/<!--|--!?>/g, '');\n      }\n      return sanitizedText;\n    };\n    var isInvalidUri = function (settings, uri) {\n      if (settings.allow_html_data_urls) {\n        return false;\n      } else if (/^data:image\\//i.test(uri)) {\n        return settings.allow_svg_data_urls === false && /^data:image\\/svg\\+xml/i.test(uri);\n      } else {\n        return /^data:/i.test(uri);\n      }\n    };\n    var findEndTagIndex = function (schema, html, startIndex) {\n      var count = 1, index, matches, tokenRegExp, shortEndedElements;\n      shortEndedElements = schema.getShortEndedElements();\n      tokenRegExp = /<([!?\\/])?([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"\\'>]+(?:(?:\"[^\"]*\")|(?:\\'[^\\']*\\')|[^>]*))*|\\/|\\s+)>/g;\n      tokenRegExp.lastIndex = index = startIndex;\n      while (matches = tokenRegExp.exec(html)) {\n        index = tokenRegExp.lastIndex;\n        if (matches[1] === '/') {\n          count--;\n        } else if (!matches[1]) {\n          if (matches[2] in shortEndedElements) {\n            continue;\n          }\n          count++;\n        }\n        if (count === 0) {\n          break;\n        }\n      }\n      return index;\n    };\n    var checkBogusAttribute = function (regExp, attrString) {\n      var matches = regExp.exec(attrString);\n      if (matches) {\n        var name = matches[1];\n        var value = matches[2];\n        return typeof name === 'string' && name.toLowerCase() === 'data-mce-bogus' ? value : null;\n      } else {\n        return null;\n      }\n    };\n    function SaxParser(settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var noop = function () {\n      };\n      settings = settings || {};\n      if (settings.fix_self_closing !== false) {\n        settings.fix_self_closing = true;\n      }\n      var comment = settings.comment ? settings.comment : noop;\n      var cdata = settings.cdata ? settings.cdata : noop;\n      var text = settings.text ? settings.text : noop;\n      var start = settings.start ? settings.start : noop;\n      var end = settings.end ? settings.end : noop;\n      var pi = settings.pi ? settings.pi : noop;\n      var doctype = settings.doctype ? settings.doctype : noop;\n      var parse = function (html) {\n        var matches, index = 0, value, endRegExp;\n        var stack = [];\n        var attrList, i, textData, name;\n        var isInternalElement, removeInternalElements, shortEndedElements, fillAttrsMap, isShortEnded;\n        var validate, elementRule, isValidElement, attr, attribsValue, validAttributesMap, validAttributePatterns;\n        var attributesRequired, attributesDefault, attributesForced, processHtml;\n        var anyAttributesRequired, selfClosing, tokenRegExp, attrRegExp, specialElements, attrValue, idCount = 0;\n        var decode = Entities.decode;\n        var fixSelfClosing;\n        var filteredUrlAttrs = Tools.makeMap('src,href,data,background,formaction,poster,xlink:href');\n        var scriptUriRegExp = /((java|vb)script|mhtml):/i;\n        var processEndTag = function (name) {\n          var pos, i;\n          pos = stack.length;\n          while (pos--) {\n            if (stack[pos].name === name) {\n              break;\n            }\n          }\n          if (pos >= 0) {\n            for (i = stack.length - 1; i >= pos; i--) {\n              name = stack[i];\n              if (name.valid) {\n                end(name.name);\n              }\n            }\n            stack.length = pos;\n          }\n        };\n        var parseAttribute = function (match, name, value, val2, val3) {\n          var attrRule, i;\n          var trimRegExp = /[\\s\\u0000-\\u001F]+/g;\n          name = name.toLowerCase();\n          value = name in fillAttrsMap ? name : decode(value || val2 || val3 || '');\n          if (validate && !isInternalElement && isValidPrefixAttrName(name) === false) {\n            attrRule = validAttributesMap[name];\n            if (!attrRule && validAttributePatterns) {\n              i = validAttributePatterns.length;\n              while (i--) {\n                attrRule = validAttributePatterns[i];\n                if (attrRule.pattern.test(name)) {\n                  break;\n                }\n              }\n              if (i === -1) {\n                attrRule = null;\n              }\n            }\n            if (!attrRule) {\n              return;\n            }\n            if (attrRule.validValues && !(value in attrRule.validValues)) {\n              return;\n            }\n          }\n          if (filteredUrlAttrs[name] && !settings.allow_script_urls) {\n            var uri = value.replace(trimRegExp, '');\n            try {\n              uri = decodeURIComponent(uri);\n            } catch (ex) {\n              uri = unescape(uri);\n            }\n            if (scriptUriRegExp.test(uri)) {\n              return;\n            }\n            if (isInvalidUri(settings, uri)) {\n              return;\n            }\n          }\n          if (isInternalElement && (name in filteredUrlAttrs || name.indexOf('on') === 0)) {\n            return;\n          }\n          attrList.map[name] = value;\n          attrList.push({\n            name: name,\n            value: value\n          });\n        };\n        tokenRegExp = new RegExp('<(?:' + '(?:!--([\\\\w\\\\W]*?)--!?>)|' + '(?:!\\\\[CDATA\\\\[([\\\\w\\\\W]*?)\\\\]\\\\]>)|' + '(?:!DOCTYPE([\\\\w\\\\W]*?)>)|' + '(?:\\\\?([^\\\\s\\\\/<>]+) ?([\\\\w\\\\W]*?)[?/]>)|' + '(?:\\\\/([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)>)|' + '(?:([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)((?:\\\\s+[^\"\\'>]+(?:(?:\"[^\"]*\")|(?:\\'[^\\']*\\')|[^>]*))*|\\\\/|\\\\s+)>)' + ')', 'g');\n        attrRegExp = /([\\w:\\-]+)(?:\\s*=\\s*(?:(?:\\\"((?:[^\\\"])*)\\\")|(?:\\'((?:[^\\'])*)\\')|([^>\\s]+)))?/g;\n        shortEndedElements = schema.getShortEndedElements();\n        selfClosing = settings.self_closing_elements || schema.getSelfClosingElements();\n        fillAttrsMap = schema.getBoolAttrs();\n        validate = settings.validate;\n        removeInternalElements = settings.remove_internals;\n        fixSelfClosing = settings.fix_self_closing;\n        specialElements = schema.getSpecialElements();\n        processHtml = html + '>';\n        while (matches = tokenRegExp.exec(processHtml)) {\n          if (index < matches.index) {\n            text(decode(html.substr(index, matches.index - index)));\n          }\n          if (value = matches[6]) {\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            processEndTag(value);\n          } else if (value = matches[7]) {\n            if (matches.index + matches[0].length > html.length) {\n              text(decode(html.substr(matches.index)));\n              index = matches.index + matches[0].length;\n              continue;\n            }\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            isShortEnded = value in shortEndedElements;\n            if (fixSelfClosing && selfClosing[value] && stack.length > 0 && stack[stack.length - 1].name === value) {\n              processEndTag(value);\n            }\n            var bogusValue = checkBogusAttribute(attrRegExp, matches[8]);\n            if (bogusValue !== null) {\n              if (bogusValue === 'all') {\n                index = findEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                tokenRegExp.lastIndex = index;\n                continue;\n              }\n              isValidElement = false;\n            }\n            if (!validate || (elementRule = schema.getElementRule(value))) {\n              isValidElement = true;\n              if (validate) {\n                validAttributesMap = elementRule.attributes;\n                validAttributePatterns = elementRule.attributePatterns;\n              }\n              if (attribsValue = matches[8]) {\n                isInternalElement = attribsValue.indexOf('data-mce-type') !== -1;\n                if (isInternalElement && removeInternalElements) {\n                  isValidElement = false;\n                }\n                attrList = [];\n                attrList.map = {};\n                attribsValue.replace(attrRegExp, parseAttribute);\n              } else {\n                attrList = [];\n                attrList.map = {};\n              }\n              if (validate && !isInternalElement) {\n                attributesRequired = elementRule.attributesRequired;\n                attributesDefault = elementRule.attributesDefault;\n                attributesForced = elementRule.attributesForced;\n                anyAttributesRequired = elementRule.removeEmptyAttrs;\n                if (anyAttributesRequired && !attrList.length) {\n                  isValidElement = false;\n                }\n                if (attributesForced) {\n                  i = attributesForced.length;\n                  while (i--) {\n                    attr = attributesForced[i];\n                    name = attr.name;\n                    attrValue = attr.value;\n                    if (attrValue === '{$uid}') {\n                      attrValue = 'mce_' + idCount++;\n                    }\n                    attrList.map[name] = attrValue;\n                    attrList.push({\n                      name: name,\n                      value: attrValue\n                    });\n                  }\n                }\n                if (attributesDefault) {\n                  i = attributesDefault.length;\n                  while (i--) {\n                    attr = attributesDefault[i];\n                    name = attr.name;\n                    if (!(name in attrList.map)) {\n                      attrValue = attr.value;\n                      if (attrValue === '{$uid}') {\n                        attrValue = 'mce_' + idCount++;\n                      }\n                      attrList.map[name] = attrValue;\n                      attrList.push({\n                        name: name,\n                        value: attrValue\n                      });\n                    }\n                  }\n                }\n                if (attributesRequired) {\n                  i = attributesRequired.length;\n                  while (i--) {\n                    if (attributesRequired[i] in attrList.map) {\n                      break;\n                    }\n                  }\n                  if (i === -1) {\n                    isValidElement = false;\n                  }\n                }\n                if (attr = attrList.map['data-mce-bogus']) {\n                  if (attr === 'all') {\n                    index = findEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                    tokenRegExp.lastIndex = index;\n                    continue;\n                  }\n                  isValidElement = false;\n                }\n              }\n              if (isValidElement) {\n                start(value, attrList, isShortEnded);\n              }\n            } else {\n              isValidElement = false;\n            }\n            if (endRegExp = specialElements[value]) {\n              endRegExp.lastIndex = index = matches.index + matches[0].length;\n              if (matches = endRegExp.exec(html)) {\n                if (isValidElement) {\n                  textData = html.substr(index, matches.index - index);\n                }\n                index = matches.index + matches[0].length;\n              } else {\n                textData = html.substr(index);\n                index = html.length;\n              }\n              if (isValidElement) {\n                if (textData.length > 0) {\n                  text(textData, true);\n                }\n                end(value);\n              }\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n            if (!isShortEnded) {\n              if (!attribsValue || attribsValue.indexOf('/') !== attribsValue.length - 1) {\n                stack.push({\n                  name: value,\n                  valid: isValidElement\n                });\n              } else if (isValidElement) {\n                end(value);\n              }\n            }\n          } else if (value = matches[1]) {\n            if (value.charAt(0) === '>') {\n              value = ' ' + value;\n            }\n            if (!settings.allow_conditional_comments && value.substr(0, 3).toLowerCase() === '[if') {\n              value = ' ' + value;\n            }\n            comment(value);\n          } else if (value = matches[2]) {\n            cdata(trimComments(value));\n          } else if (value = matches[3]) {\n            doctype(value);\n          } else if (value = matches[4]) {\n            pi(value, matches[5]);\n          }\n          index = matches.index + matches[0].length;\n        }\n        if (index < html.length) {\n          text(decode(html.substr(index)));\n        }\n        for (i = stack.length - 1; i >= 0; i--) {\n          value = stack[i];\n          if (value.valid) {\n            end(value.name);\n          }\n        }\n      };\n      return { parse: parse };\n    }\n    (function (SaxParser) {\n      SaxParser.findEndTag = findEndTagIndex;\n    }(SaxParser || (SaxParser = {})));\n    var SaxParser$1 = SaxParser;\n\n    var trimHtml = function (tempAttrs, html) {\n      var trimContentRegExp = new RegExp(['\\\\s?(' + tempAttrs.join('|') + ')=\"[^\"]+\"'].join('|'), 'gi');\n      return html.replace(trimContentRegExp, '');\n    };\n    var trimInternal = function (serializer, html) {\n      var content = html;\n      var bogusAllRegExp = /<(\\w+) [^>]*data-mce-bogus=\"all\"[^>]*>/g;\n      var endTagIndex, index, matchLength, matches, shortEndedElements;\n      var schema = serializer.schema;\n      content = trimHtml(serializer.getTempAttrs(), content);\n      shortEndedElements = schema.getShortEndedElements();\n      while (matches = bogusAllRegExp.exec(content)) {\n        index = bogusAllRegExp.lastIndex;\n        matchLength = matches[0].length;\n        if (shortEndedElements[matches[1]]) {\n          endTagIndex = index;\n        } else {\n          endTagIndex = SaxParser$1.findEndTag(schema, content, index);\n        }\n        content = content.substring(0, index - matchLength) + content.substring(endTagIndex);\n        bogusAllRegExp.lastIndex = index - matchLength;\n      }\n      return Zwsp.trim(content);\n    };\n    var trimExternal = trimInternal;\n    var TrimHtml = {\n      trimExternal: trimExternal,\n      trimInternal: trimInternal\n    };\n\n    var KEEP = 0, INSERT = 1, DELETE = 2;\n    var diff = function (left, right) {\n      var size = left.length + right.length + 2;\n      var vDown = new Array(size);\n      var vUp = new Array(size);\n      var snake = function (start, end, diag) {\n        return {\n          start: start,\n          end: end,\n          diag: diag\n        };\n      };\n      var buildScript = function (start1, end1, start2, end2, script) {\n        var middle = getMiddleSnake(start1, end1, start2, end2);\n        if (middle === null || middle.start === end1 && middle.diag === end1 - end2 || middle.end === start1 && middle.diag === start1 - start2) {\n          var i = start1;\n          var j = start2;\n          while (i < end1 || j < end2) {\n            if (i < end1 && j < end2 && left[i] === right[j]) {\n              script.push([\n                KEEP,\n                left[i]\n              ]);\n              ++i;\n              ++j;\n            } else {\n              if (end1 - start1 > end2 - start2) {\n                script.push([\n                  DELETE,\n                  left[i]\n                ]);\n                ++i;\n              } else {\n                script.push([\n                  INSERT,\n                  right[j]\n                ]);\n                ++j;\n              }\n            }\n          }\n        } else {\n          buildScript(start1, middle.start, start2, middle.start - middle.diag, script);\n          for (var i2 = middle.start; i2 < middle.end; ++i2) {\n            script.push([\n              KEEP,\n              left[i2]\n            ]);\n          }\n          buildScript(middle.end, end1, middle.end - middle.diag, end2, script);\n        }\n      };\n      var buildSnake = function (start, diag, end1, end2) {\n        var end = start;\n        while (end - diag < end2 && end < end1 && left[end] === right[end - diag]) {\n          ++end;\n        }\n        return snake(start, end, diag);\n      };\n      var getMiddleSnake = function (start1, end1, start2, end2) {\n        var m = end1 - start1;\n        var n = end2 - start2;\n        if (m === 0 || n === 0) {\n          return null;\n        }\n        var delta = m - n;\n        var sum = n + m;\n        var offset = (sum % 2 === 0 ? sum : sum + 1) / 2;\n        vDown[1 + offset] = start1;\n        vUp[1 + offset] = end1 + 1;\n        var d, k, i, x, y;\n        for (d = 0; d <= offset; ++d) {\n          for (k = -d; k <= d; k += 2) {\n            i = k + offset;\n            if (k === -d || k !== d && vDown[i - 1] < vDown[i + 1]) {\n              vDown[i] = vDown[i + 1];\n            } else {\n              vDown[i] = vDown[i - 1] + 1;\n            }\n            x = vDown[i];\n            y = x - start1 + start2 - k;\n            while (x < end1 && y < end2 && left[x] === right[y]) {\n              vDown[i] = ++x;\n              ++y;\n            }\n            if (delta % 2 !== 0 && delta - d <= k && k <= delta + d) {\n              if (vUp[i - delta] <= vDown[i]) {\n                return buildSnake(vUp[i - delta], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n          for (k = delta - d; k <= delta + d; k += 2) {\n            i = k + offset - delta;\n            if (k === delta - d || k !== delta + d && vUp[i + 1] <= vUp[i - 1]) {\n              vUp[i] = vUp[i + 1] - 1;\n            } else {\n              vUp[i] = vUp[i - 1];\n            }\n            x = vUp[i] - 1;\n            y = x - start1 + start2 - k;\n            while (x >= start1 && y >= start2 && left[x] === right[y]) {\n              vUp[i] = x--;\n              y--;\n            }\n            if (delta % 2 === 0 && -d <= k && k <= d) {\n              if (vUp[i] <= vDown[i + delta]) {\n                return buildSnake(vUp[i], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n        }\n      };\n      var script = [];\n      buildScript(0, left.length, 0, right.length, script);\n      return script;\n    };\n    var Diff = {\n      KEEP: KEEP,\n      DELETE: DELETE,\n      INSERT: INSERT,\n      diff: diff\n    };\n\n    var getOuterHtml = function (elm) {\n      if (NodeType.isElement(elm)) {\n        return elm.outerHTML;\n      } else if (NodeType.isText(elm)) {\n        return Entities.encodeRaw(elm.data, false);\n      } else if (NodeType.isComment(elm)) {\n        return '<!--' + elm.data + '-->';\n      }\n      return '';\n    };\n    var createFragment$1 = function (html) {\n      var frag, node, container;\n      container = domGlobals.document.createElement('div');\n      frag = domGlobals.document.createDocumentFragment();\n      if (html) {\n        container.innerHTML = html;\n      }\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var insertAt = function (elm, html, index) {\n      var fragment = createFragment$1(html);\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.insertBefore(fragment, target);\n      } else {\n        elm.appendChild(fragment);\n      }\n    };\n    var removeAt = function (elm, index) {\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.removeChild(target);\n      }\n    };\n    var applyDiff = function (diff, elm) {\n      var index = 0;\n      each(diff, function (action) {\n        if (action[0] === Diff.KEEP) {\n          index++;\n        } else if (action[0] === Diff.INSERT) {\n          insertAt(elm, action[1], index);\n          index++;\n        } else if (action[0] === Diff.DELETE) {\n          removeAt(elm, index);\n        }\n      });\n    };\n    var read$3 = function (elm) {\n      return filter(map(from$1(elm.childNodes), getOuterHtml), function (item) {\n        return item.length > 0;\n      });\n    };\n    var write = function (fragments, elm) {\n      var currentFragments = map(from$1(elm.childNodes), getOuterHtml);\n      applyDiff(Diff.diff(currentFragments, fragments), elm);\n      return elm;\n    };\n    var Fragments = {\n      read: read$3,\n      write: write\n    };\n\n    var undoLevelDocument = Cell(Option.none());\n    var lazyTempDocument = function () {\n      return undoLevelDocument.get().getOrThunk(function () {\n        var doc = domGlobals.document.implementation.createHTMLDocument('undo');\n        undoLevelDocument.set(Option.some(doc));\n        return doc;\n      });\n    };\n    var hasIframes = function (html) {\n      return html.indexOf('</iframe>') !== -1;\n    };\n    var createFragmentedLevel = function (fragments) {\n      return {\n        type: 'fragmented',\n        fragments: fragments,\n        content: '',\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createCompleteLevel = function (content) {\n      return {\n        type: 'complete',\n        fragments: null,\n        content: content,\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createFromEditor = function (editor) {\n      var fragments, content, trimmedFragments;\n      fragments = Fragments.read(editor.getBody());\n      trimmedFragments = bind(fragments, function (html) {\n        var trimmed = TrimHtml.trimInternal(editor.serializer, html);\n        return trimmed.length > 0 ? [trimmed] : [];\n      });\n      content = trimmedFragments.join('');\n      return hasIframes(content) ? createFragmentedLevel(trimmedFragments) : createCompleteLevel(content);\n    };\n    var applyToEditor = function (editor, level, before) {\n      if (level.type === 'fragmented') {\n        Fragments.write(level.fragments, editor.getBody());\n      } else {\n        editor.setContent(level.content, { format: 'raw' });\n      }\n      editor.selection.moveToBookmark(before ? level.beforeBookmark : level.bookmark);\n    };\n    var getLevelContent = function (level) {\n      return level.type === 'fragmented' ? level.fragments.join('') : level.content;\n    };\n    var getCleanLevelContent = function (level) {\n      var elm = Element.fromTag('body', lazyTempDocument());\n      set$1(elm, getLevelContent(level));\n      each(descendants$1(elm, '*[data-mce-bogus]'), unwrap);\n      return get$3(elm);\n    };\n    var hasEqualContent = function (level1, level2) {\n      return getLevelContent(level1) === getLevelContent(level2);\n    };\n    var hasEqualCleanedContent = function (level1, level2) {\n      return getCleanLevelContent(level1) === getCleanLevelContent(level2);\n    };\n    var isEq$4 = function (level1, level2) {\n      if (!level1 || !level2) {\n        return false;\n      } else if (hasEqualContent(level1, level2)) {\n        return true;\n      } else {\n        return hasEqualCleanedContent(level1, level2);\n      }\n    };\n    var Levels = {\n      createFragmentedLevel: createFragmentedLevel,\n      createCompleteLevel: createCompleteLevel,\n      createFromEditor: createFromEditor,\n      applyToEditor: applyToEditor,\n      isEq: isEq$4\n    };\n\n    function UndoManager (editor) {\n      var self = this, index = 0, data = [], beforeBookmark, isFirstTypedCharacter, locks = 0;\n      var isUnlocked = function () {\n        return locks === 0;\n      };\n      var setTyping = function (typing) {\n        if (isUnlocked()) {\n          self.typing = typing;\n        }\n      };\n      var setDirty = function (state) {\n        editor.setDirty(state);\n      };\n      var addNonTypingUndoLevel = function (e) {\n        setTyping(false);\n        self.add({}, e);\n      };\n      var endTyping = function () {\n        if (self.typing) {\n          setTyping(false);\n          self.add();\n        }\n      };\n      editor.on('init', function () {\n        self.add();\n      });\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command;\n        if (cmd !== 'Undo' && cmd !== 'Redo' && cmd !== 'mceRepaint') {\n          endTyping();\n          self.beforeChange();\n        }\n      });\n      editor.on('ExecCommand', function (e) {\n        var cmd = e.command;\n        if (cmd !== 'Undo' && cmd !== 'Redo' && cmd !== 'mceRepaint') {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('ObjectResizeStart Cut', function () {\n        self.beforeChange();\n      });\n      editor.on('SaveContent ObjectResized blur', addNonTypingUndoLevel);\n      editor.on('DragEnd', addNonTypingUndoLevel);\n      editor.on('KeyUp', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45 || e.ctrlKey) {\n          addNonTypingUndoLevel();\n          editor.nodeChanged();\n        }\n        if (keyCode === 46 || keyCode === 8) {\n          editor.nodeChanged();\n        }\n        if (isFirstTypedCharacter && self.typing && Levels.isEq(Levels.createFromEditor(editor), data[0]) === false) {\n          if (editor.isDirty() === false) {\n            setDirty(true);\n            editor.fire('change', {\n              level: data[0],\n              lastLevel: null\n            });\n          }\n          editor.fire('TypingUndo');\n          isFirstTypedCharacter = false;\n          editor.nodeChanged();\n        }\n      });\n      editor.on('KeyDown', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45) {\n          if (self.typing) {\n            addNonTypingUndoLevel(e);\n          }\n          return;\n        }\n        var modKey = e.ctrlKey && !e.altKey || e.metaKey;\n        if ((keyCode < 16 || keyCode > 20) && keyCode !== 224 && keyCode !== 91 && !self.typing && !modKey) {\n          self.beforeChange();\n          setTyping(true);\n          self.add({}, e);\n          isFirstTypedCharacter = true;\n        }\n      });\n      editor.on('MouseDown', function (e) {\n        if (self.typing) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      var isInsertReplacementText = function (event) {\n        return event.inputType === 'insertReplacementText';\n      };\n      var isInsertTextDataNull = function (event) {\n        return event.inputType === 'insertText' && event.data === null;\n      };\n      editor.on('input', function (e) {\n        if (e.inputType && (isInsertReplacementText(e) || isInsertTextDataNull(e))) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.addShortcut('meta+z', '', 'Undo');\n      editor.addShortcut('meta+y,meta+shift+z', '', 'Redo');\n      editor.on('AddUndo Undo Redo ClearUndos', function (e) {\n        if (!e.isDefaultPrevented()) {\n          editor.nodeChanged();\n        }\n      });\n      self = {\n        data: data,\n        typing: false,\n        beforeChange: function () {\n          if (isUnlocked()) {\n            beforeBookmark = GetBookmark.getUndoBookmark(editor.selection);\n          }\n        },\n        add: function (level, event) {\n          var i;\n          var settings = editor.settings;\n          var lastLevel, currentLevel;\n          currentLevel = Levels.createFromEditor(editor);\n          level = level || {};\n          level = Tools.extend(level, currentLevel);\n          if (isUnlocked() === false || editor.removed) {\n            return null;\n          }\n          lastLevel = data[index];\n          if (editor.fire('BeforeAddUndo', {\n              level: level,\n              lastLevel: lastLevel,\n              originalEvent: event\n            }).isDefaultPrevented()) {\n            return null;\n          }\n          if (lastLevel && Levels.isEq(lastLevel, level)) {\n            return null;\n          }\n          if (data[index]) {\n            data[index].beforeBookmark = beforeBookmark;\n          }\n          if (settings.custom_undo_redo_levels) {\n            if (data.length > settings.custom_undo_redo_levels) {\n              for (i = 0; i < data.length - 1; i++) {\n                data[i] = data[i + 1];\n              }\n              data.length--;\n              index = data.length;\n            }\n          }\n          level.bookmark = GetBookmark.getUndoBookmark(editor.selection);\n          if (index < data.length - 1) {\n            data.length = index + 1;\n          }\n          data.push(level);\n          index = data.length - 1;\n          var args = {\n            level: level,\n            lastLevel: lastLevel,\n            originalEvent: event\n          };\n          editor.fire('AddUndo', args);\n          if (index > 0) {\n            setDirty(true);\n            editor.fire('change', args);\n          }\n          return level;\n        },\n        undo: function () {\n          var level;\n          if (self.typing) {\n            self.add();\n            self.typing = false;\n            setTyping(false);\n          }\n          if (index > 0) {\n            level = data[--index];\n            Levels.applyToEditor(editor, level, true);\n            setDirty(true);\n            editor.fire('undo', { level: level });\n          }\n          return level;\n        },\n        redo: function () {\n          var level;\n          if (index < data.length - 1) {\n            level = data[++index];\n            Levels.applyToEditor(editor, level, false);\n            setDirty(true);\n            editor.fire('redo', { level: level });\n          }\n          return level;\n        },\n        clear: function () {\n          data = [];\n          index = 0;\n          self.typing = false;\n          self.data = data;\n          editor.fire('ClearUndos');\n        },\n        hasUndo: function () {\n          return index > 0 || self.typing && data[0] && !Levels.isEq(Levels.createFromEditor(editor), data[0]);\n        },\n        hasRedo: function () {\n          return index < data.length - 1 && !self.typing;\n        },\n        transact: function (callback) {\n          endTyping();\n          self.beforeChange();\n          self.ignore(callback);\n          return self.add();\n        },\n        ignore: function (callback) {\n          try {\n            locks++;\n            callback();\n          } finally {\n            locks--;\n          }\n        },\n        extra: function (callback1, callback2) {\n          var lastLevel, bookmark;\n          if (self.transact(callback1)) {\n            bookmark = data[index].bookmark;\n            lastLevel = data[index - 1];\n            Levels.applyToEditor(editor, lastLevel, true);\n            if (self.transact(callback2)) {\n              data[index - 1].beforeBookmark = bookmark;\n            }\n          }\n        }\n      };\n      return self;\n    }\n\n    var postProcessHooks = {}, filter$2 = ArrUtils.filter, each$c = ArrUtils.each;\n    var addPostProcessHook = function (name, hook) {\n      var hooks = postProcessHooks[name];\n      if (!hooks) {\n        postProcessHooks[name] = hooks = [];\n      }\n      postProcessHooks[name].push(hook);\n    };\n    var postProcess = function (name, editor) {\n      each$c(postProcessHooks[name], function (hook) {\n        hook(editor);\n      });\n    };\n    addPostProcessHook('pre', function (editor) {\n      var rng = editor.selection.getRng();\n      var isPre, blocks;\n      var hasPreSibling = function (pre) {\n        return isPre(pre.previousSibling) && ArrUtils.indexOf(blocks, pre.previousSibling) !== -1;\n      };\n      var joinPre = function (pre1, pre2) {\n        DomQuery(pre2).remove();\n        DomQuery(pre1).append('<br><br>').append(pre2.childNodes);\n      };\n      isPre = NodeType.matchNodeNames('pre');\n      if (!rng.collapsed) {\n        blocks = editor.selection.getSelectedBlocks();\n        each$c(filter$2(filter$2(blocks, isPre), hasPreSibling), function (pre) {\n          joinPre(pre.previousSibling, pre);\n        });\n      }\n    });\n    var Hooks = { postProcess: postProcess };\n\n    var MCE_ATTR_RE = /^(src|href|style)$/;\n    var each$d = Tools.each;\n    var isEq$5 = FormatUtils.isEq;\n    var isTableCell$4 = function (node) {\n      return /^(TH|TD)$/.test(node.nodeName);\n    };\n    var isChildOfInlineParent = function (dom, node, parent) {\n      return dom.isChildOf(node, parent) && node !== parent && !dom.isBlock(parent);\n    };\n    var getContainer = function (ed, rng, start) {\n      var container, offset, lastIdx;\n      container = rng[start ? 'startContainer' : 'endContainer'];\n      offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (NodeType.isElement(container)) {\n        lastIdx = container.childNodes.length - 1;\n        if (!start && offset) {\n          offset--;\n        }\n        container = container.childNodes[offset > lastIdx ? lastIdx : offset];\n      }\n      if (NodeType.isText(container) && start && offset >= container.nodeValue.length) {\n        container = new TreeWalker(container, ed.getBody()).next() || container;\n      }\n      if (NodeType.isText(container) && !start && offset === 0) {\n        container = new TreeWalker(container, ed.getBody()).prev() || container;\n      }\n      return container;\n    };\n    var wrap$2 = function (dom, node, name, attrs) {\n      var wrapper = dom.create(name, attrs);\n      node.parentNode.insertBefore(wrapper, node);\n      wrapper.appendChild(node);\n      return wrapper;\n    };\n    var wrapWithSiblings = function (dom, node, next, name, attrs) {\n      var start = Element.fromDom(node);\n      var wrapper = Element.fromDom(dom.create(name, attrs));\n      var siblings = next ? nextSiblings(start) : prevSiblings(start);\n      append$1(wrapper, siblings);\n      if (next) {\n        before(start, wrapper);\n        prepend(wrapper, start);\n      } else {\n        after(start, wrapper);\n        append(wrapper, start);\n      }\n      return wrapper.dom();\n    };\n    var matchName$1 = function (dom, node, format) {\n      if (isEq$5(node, format.inline)) {\n        return true;\n      }\n      if (isEq$5(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return NodeType.isElement(node) && dom.is(node, format.selector);\n      }\n    };\n    var isColorFormatAndAnchor = function (node, format) {\n      return format.links && node.tagName === 'A';\n    };\n    var find$3 = function (dom, node, next, inc) {\n      node = FormatUtils.getNonWhiteSpaceSibling(node, next, inc);\n      return !node || (node.nodeName === 'BR' || dom.isBlock(node));\n    };\n    var removeNode$1 = function (ed, node, format) {\n      var parentNode = node.parentNode;\n      var rootBlockElm;\n      var dom = ed.dom, forcedRootBlock = ed.settings.forced_root_block;\n      if (format.block) {\n        if (!forcedRootBlock) {\n          if (dom.isBlock(node) && !dom.isBlock(parentNode)) {\n            if (!find$3(dom, node, false) && !find$3(dom, node.firstChild, true, 1)) {\n              node.insertBefore(dom.create('br'), node.firstChild);\n            }\n            if (!find$3(dom, node, true) && !find$3(dom, node.lastChild, false, 1)) {\n              node.appendChild(dom.create('br'));\n            }\n          }\n        } else {\n          if (parentNode === dom.getRoot()) {\n            if (!format.list_block || !isEq$5(node, format.list_block)) {\n              each$d(Tools.grep(node.childNodes), function (node) {\n                if (FormatUtils.isValid(ed, forcedRootBlock, node.nodeName.toLowerCase())) {\n                  if (!rootBlockElm) {\n                    rootBlockElm = wrap$2(dom, node, forcedRootBlock);\n                    dom.setAttribs(rootBlockElm, ed.settings.forced_root_block_attrs);\n                  } else {\n                    rootBlockElm.appendChild(node);\n                  }\n                } else {\n                  rootBlockElm = 0;\n                }\n              });\n            }\n          }\n        }\n      }\n      if (format.selector && format.inline && !isEq$5(format.inline, node)) {\n        return;\n      }\n      dom.remove(node, 1);\n    };\n    var removeFormat = function (ed, format, vars, node, compareNode) {\n      var i, attrs, stylesModified;\n      var dom = ed.dom;\n      if (!matchName$1(dom, node, format) && !isColorFormatAndAnchor(node, format)) {\n        return false;\n      }\n      if (format.remove !== 'all') {\n        each$d(format.styles, function (value, name) {\n          value = FormatUtils.normalizeStyleValue(dom, FormatUtils.replaceVars(value, vars), name);\n          if (typeof name === 'number') {\n            name = value;\n            compareNode = 0;\n          }\n          if (format.remove_similar || (!compareNode || isEq$5(FormatUtils.getStyle(dom, compareNode, name), value))) {\n            dom.setStyle(node, name, '');\n          }\n          stylesModified = 1;\n        });\n        if (stylesModified && dom.getAttrib(node, 'style') === '') {\n          node.removeAttribute('style');\n          node.removeAttribute('data-mce-style');\n        }\n        each$d(format.attributes, function (value, name) {\n          var valueOut;\n          value = FormatUtils.replaceVars(value, vars);\n          if (typeof name === 'number') {\n            name = value;\n            compareNode = 0;\n          }\n          if (!compareNode || isEq$5(dom.getAttrib(compareNode, name), value)) {\n            if (name === 'class') {\n              value = dom.getAttrib(node, name);\n              if (value) {\n                valueOut = '';\n                each$d(value.split(/\\s+/), function (cls) {\n                  if (/mce\\-\\w+/.test(cls)) {\n                    valueOut += (valueOut ? ' ' : '') + cls;\n                  }\n                });\n                if (valueOut) {\n                  dom.setAttrib(node, name, valueOut);\n                  return;\n                }\n              }\n            }\n            if (name === 'class') {\n              node.removeAttribute('className');\n            }\n            if (MCE_ATTR_RE.test(name)) {\n              node.removeAttribute('data-mce-' + name);\n            }\n            node.removeAttribute(name);\n          }\n        });\n        each$d(format.classes, function (value) {\n          value = FormatUtils.replaceVars(value, vars);\n          if (!compareNode || dom.hasClass(compareNode, value)) {\n            dom.removeClass(node, value);\n          }\n        });\n        attrs = dom.getAttribs(node);\n        for (i = 0; i < attrs.length; i++) {\n          var attrName = attrs[i].nodeName;\n          if (attrName.indexOf('_') !== 0 && attrName.indexOf('data-') !== 0) {\n            return false;\n          }\n        }\n      }\n      if (format.remove !== 'none') {\n        removeNode$1(ed, node, format);\n        return true;\n      }\n    };\n    var findFormatRoot = function (editor, container, name, vars, similar) {\n      var formatRoot;\n      each$d(FormatUtils.getParents(editor.dom, container.parentNode).reverse(), function (parent) {\n        var format;\n        if (!formatRoot && parent.id !== '_start' && parent.id !== '_end') {\n          format = MatchFormat.matchNode(editor, parent, name, vars, similar);\n          if (format && format.split !== false) {\n            formatRoot = parent;\n          }\n        }\n      });\n      return formatRoot;\n    };\n    var wrapAndSplit = function (editor, formatList, formatRoot, container, target, split, format, vars) {\n      var parent, clone, lastClone, firstClone, i, formatRootParent;\n      var dom = editor.dom;\n      if (formatRoot) {\n        formatRootParent = formatRoot.parentNode;\n        for (parent = container.parentNode; parent && parent !== formatRootParent; parent = parent.parentNode) {\n          clone = dom.clone(parent, false);\n          for (i = 0; i < formatList.length; i++) {\n            if (removeFormat(editor, formatList[i], vars, clone, clone)) {\n              clone = 0;\n              break;\n            }\n          }\n          if (clone) {\n            if (lastClone) {\n              clone.appendChild(lastClone);\n            }\n            if (!firstClone) {\n              firstClone = clone;\n            }\n            lastClone = clone;\n          }\n        }\n        if (split && (!format.mixed || !dom.isBlock(formatRoot))) {\n          container = dom.split(formatRoot, container);\n        }\n        if (lastClone) {\n          target.parentNode.insertBefore(lastClone, target);\n          firstClone.appendChild(target);\n        }\n      }\n      return container;\n    };\n    var remove$6 = function (ed, name, vars, node, similar) {\n      var formatList = ed.formatter.get(name), format = formatList[0];\n      var bookmark, rng, contentEditable = true;\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var splitToFormatRoot = function (container) {\n        var formatRoot = findFormatRoot(ed, container, name, vars, similar);\n        return wrapAndSplit(ed, formatList, formatRoot, container, container, true, format, vars);\n      };\n      var isRemoveBookmarkNode = function (node) {\n        return Bookmarks.isBookmarkNode(node) && NodeType.isElement(node) && (node.id === '_start' || node.id === '_end');\n      };\n      var process = function (node) {\n        var children, i, l, lastContentEditable, hasContentEditableState;\n        if (NodeType.isElement(node) && dom.getContentEditable(node)) {\n          lastContentEditable = contentEditable;\n          contentEditable = dom.getContentEditable(node) === 'true';\n          hasContentEditableState = true;\n        }\n        children = Tools.grep(node.childNodes);\n        if (contentEditable && !hasContentEditableState) {\n          for (i = 0, l = formatList.length; i < l; i++) {\n            if (removeFormat(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        if (format.deep) {\n          if (children.length) {\n            for (i = 0, l = children.length; i < l; i++) {\n              process(children[i]);\n            }\n            if (hasContentEditableState) {\n              contentEditable = lastContentEditable;\n            }\n          }\n        }\n      };\n      var unwrap = function (start) {\n        var node = dom.get(start ? '_start' : '_end');\n        var out = node[start ? 'firstChild' : 'lastChild'];\n        if (isRemoveBookmarkNode(out)) {\n          out = out[start ? 'firstChild' : 'lastChild'];\n        }\n        if (NodeType.isText(out) && out.data.length === 0) {\n          out = start ? node.previousSibling || node.nextSibling : node.nextSibling || node.previousSibling;\n        }\n        dom.remove(node, true);\n        return out;\n      };\n      var removeRngStyle = function (rng) {\n        var startContainer, endContainer;\n        var commonAncestorContainer = rng.commonAncestorContainer;\n        rng = ExpandRange.expandRng(ed, rng, formatList, true);\n        if (format.split) {\n          rng = SplitRange.split(rng);\n          startContainer = getContainer(ed, rng, true);\n          endContainer = getContainer(ed, rng);\n          if (startContainer !== endContainer) {\n            if (/^(TR|TH|TD)$/.test(startContainer.nodeName) && startContainer.firstChild) {\n              if (startContainer.nodeName === 'TR') {\n                startContainer = startContainer.firstChild.firstChild || startContainer;\n              } else {\n                startContainer = startContainer.firstChild || startContainer;\n              }\n            }\n            if (commonAncestorContainer && /^T(HEAD|BODY|FOOT|R)$/.test(commonAncestorContainer.nodeName) && isTableCell$4(endContainer) && endContainer.firstChild) {\n              endContainer = endContainer.firstChild || endContainer;\n            }\n            if (isChildOfInlineParent(dom, startContainer, endContainer)) {\n              var marker = Option.from(startContainer.firstChild).getOr(startContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, true, 'span', {\n                'id': '_start',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(true);\n              return;\n            }\n            if (isChildOfInlineParent(dom, endContainer, startContainer)) {\n              var marker = Option.from(endContainer.lastChild).getOr(endContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, false, 'span', {\n                'id': '_end',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(false);\n              return;\n            }\n            startContainer = wrap$2(dom, startContainer, 'span', {\n              'id': '_start',\n              'data-mce-type': 'bookmark'\n            });\n            endContainer = wrap$2(dom, endContainer, 'span', {\n              'id': '_end',\n              'data-mce-type': 'bookmark'\n            });\n            splitToFormatRoot(startContainer);\n            splitToFormatRoot(endContainer);\n            startContainer = unwrap(true);\n            endContainer = unwrap();\n          } else {\n            startContainer = endContainer = splitToFormatRoot(startContainer);\n          }\n          rng.startContainer = startContainer.parentNode ? startContainer.parentNode : startContainer;\n          rng.startOffset = dom.nodeIndex(startContainer);\n          rng.endContainer = endContainer.parentNode ? endContainer.parentNode : endContainer;\n          rng.endOffset = dom.nodeIndex(endContainer) + 1;\n        }\n        RangeWalk.walk(dom, rng, function (nodes) {\n          each$d(nodes, function (node) {\n            process(node);\n            if (NodeType.isElement(node) && ed.dom.getStyle(node, 'text-decoration') === 'underline' && node.parentNode && FormatUtils.getTextDecoration(dom, node.parentNode) === 'underline') {\n              removeFormat(ed, {\n                deep: false,\n                exact: true,\n                inline: 'span',\n                styles: { textDecoration: 'underline' }\n              }, null, node);\n            }\n          });\n        });\n      };\n      if (node) {\n        if (node.nodeType) {\n          rng = dom.createRng();\n          rng.setStartBefore(node);\n          rng.setEndAfter(node);\n          removeRngStyle(rng);\n        } else {\n          removeRngStyle(node);\n        }\n        return;\n      }\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0, l = formatList.length; i < l; i++) {\n          if (formatList[i].ceFalseOverride) {\n            if (removeFormat(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        return;\n      }\n      if (!selection.isCollapsed() || !format.inline || dom.select('td[data-mce-selected],th[data-mce-selected]').length) {\n        bookmark = GetBookmark.getPersistentBookmark(ed.selection, true);\n        removeRngStyle(selection.getRng());\n        selection.moveToBookmark(bookmark);\n        if (format.inline && MatchFormat.match(ed, name, vars, selection.getStart())) {\n          FormatUtils.moveStart(dom, selection, selection.getRng());\n        }\n        ed.nodeChanged();\n      } else {\n        removeCaretFormat(ed, name, vars, similar);\n      }\n    };\n    var RemoveFormat = {\n      removeFormat: removeFormat,\n      remove: remove$6\n    };\n\n    var each$e = Tools.each;\n    var isElementNode = function (node) {\n      return node && node.nodeType === 1 && !Bookmarks.isBookmarkNode(node) && !isCaretNode(node) && !NodeType.isBogus(node);\n    };\n    var findElementSibling = function (node, siblingName) {\n      var sibling;\n      for (sibling = node; sibling; sibling = sibling[siblingName]) {\n        if (sibling.nodeType === 3 && sibling.nodeValue.length !== 0) {\n          return node;\n        }\n        if (sibling.nodeType === 1 && !Bookmarks.isBookmarkNode(sibling)) {\n          return sibling;\n        }\n      }\n      return node;\n    };\n    var mergeSiblingsNodes = function (dom, prev, next) {\n      var sibling, tmpSibling;\n      var elementUtils = new ElementUtils(dom);\n      if (prev && next) {\n        prev = findElementSibling(prev, 'previousSibling');\n        next = findElementSibling(next, 'nextSibling');\n        if (elementUtils.compare(prev, next)) {\n          for (sibling = prev.nextSibling; sibling && sibling !== next;) {\n            tmpSibling = sibling;\n            sibling = sibling.nextSibling;\n            prev.appendChild(tmpSibling);\n          }\n          dom.remove(next);\n          Tools.each(Tools.grep(next.childNodes), function (node) {\n            prev.appendChild(node);\n          });\n          return prev;\n        }\n      }\n      return next;\n    };\n    var processChildElements = function (node, filter, process) {\n      each$e(node.childNodes, function (node) {\n        if (isElementNode(node)) {\n          if (filter(node)) {\n            process(node);\n          }\n          if (node.hasChildNodes()) {\n            processChildElements(node, filter, process);\n          }\n        }\n      });\n    };\n    var hasStyle = function (dom, name) {\n      return curry(function (name, node) {\n        return !!(node && FormatUtils.getStyle(dom, node, name));\n      }, name);\n    };\n    var applyStyle = function (dom, name, value) {\n      return curry(function (name, value, node) {\n        dom.setStyle(node, name, value);\n        if (node.getAttribute('style') === '') {\n          node.removeAttribute('style');\n        }\n        unwrapEmptySpan(dom, node);\n      }, name, value);\n    };\n    var unwrapEmptySpan = function (dom, node) {\n      if (node.nodeName === 'SPAN' && dom.getAttribs(node).length === 0) {\n        dom.remove(node, true);\n      }\n    };\n    var processUnderlineAndColor = function (dom, node) {\n      var textDecoration;\n      if (node.nodeType === 1 && node.parentNode && node.parentNode.nodeType === 1) {\n        textDecoration = FormatUtils.getTextDecoration(dom, node.parentNode);\n        if (dom.getStyle(node, 'color') && textDecoration) {\n          dom.setStyle(node, 'text-decoration', textDecoration);\n        } else if (dom.getStyle(node, 'text-decoration') === textDecoration) {\n          dom.setStyle(node, 'text-decoration', null);\n        }\n      }\n    };\n    var mergeUnderlineAndColor = function (dom, format, vars, node) {\n      if (format.styles.color || format.styles.textDecoration) {\n        Tools.walk(node, curry(processUnderlineAndColor, dom), 'childNodes');\n        processUnderlineAndColor(dom, node);\n      }\n    };\n    var mergeBackgroundColorAndFontSize = function (dom, format, vars, node) {\n      if (format.styles && format.styles.backgroundColor) {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'backgroundColor', FormatUtils.replaceVars(format.styles.backgroundColor, vars)));\n      }\n    };\n    var mergeSubSup = function (dom, format, vars, node) {\n      if (format.inline === 'sub' || format.inline === 'sup') {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'fontSize', ''));\n        dom.remove(dom.select(format.inline === 'sup' ? 'sub' : 'sup', node), true);\n      }\n    };\n    var mergeSiblings = function (dom, format, vars, node) {\n      if (node && format.merge_siblings !== false) {\n        node = mergeSiblingsNodes(dom, FormatUtils.getNonWhiteSpaceSibling(node), node);\n        node = mergeSiblingsNodes(dom, node, FormatUtils.getNonWhiteSpaceSibling(node, true));\n      }\n    };\n    var clearChildStyles = function (dom, format, node) {\n      if (format.clear_child_styles) {\n        var selector = format.links ? '*:not(a)' : '*';\n        each$e(dom.select(selector, node), function (node) {\n          if (isElementNode(node)) {\n            each$e(format.styles, function (value, name) {\n              dom.setStyle(node, name, '');\n            });\n          }\n        });\n      }\n    };\n    var mergeWithChildren = function (editor, formatList, vars, node) {\n      each$e(formatList, function (format) {\n        each$e(editor.dom.select(format.inline, node), function (child) {\n          if (!isElementNode(child)) {\n            return;\n          }\n          RemoveFormat.removeFormat(editor, format, vars, child, format.exact ? child : null);\n        });\n        clearChildStyles(editor.dom, format, node);\n      });\n    };\n    var mergeWithParents = function (editor, format, name, vars, node) {\n      if (MatchFormat.matchNode(editor, node.parentNode, name, vars)) {\n        if (RemoveFormat.removeFormat(editor, format, vars, node)) {\n          return;\n        }\n      }\n      if (format.merge_with_parents) {\n        editor.dom.getParent(node.parentNode, function (parent) {\n          if (MatchFormat.matchNode(editor, parent, name, vars)) {\n            RemoveFormat.removeFormat(editor, format, vars, node);\n            return true;\n          }\n        });\n      }\n    };\n    var MergeFormats = {\n      mergeWithChildren: mergeWithChildren,\n      mergeUnderlineAndColor: mergeUnderlineAndColor,\n      mergeBackgroundColorAndFontSize: mergeBackgroundColorAndFontSize,\n      mergeSubSup: mergeSubSup,\n      mergeSiblings: mergeSiblings,\n      mergeWithParents: mergeWithParents\n    };\n\n    var each$f = Tools.each;\n    var isElementNode$1 = function (node) {\n      return node && node.nodeType === 1 && !Bookmarks.isBookmarkNode(node) && !isCaretNode(node) && !NodeType.isBogus(node);\n    };\n    var applyFormat = function (ed, name, vars, node) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var bookmark, rng;\n      var isCollapsed = !node && ed.selection.isCollapsed();\n      var dom = ed.dom, selection = ed.selection;\n      var setElementFormat = function (elm, fmt) {\n        fmt = fmt || format;\n        if (elm) {\n          if (fmt.onformat) {\n            fmt.onformat(elm, fmt, vars, node);\n          }\n          each$f(fmt.styles, function (value, name) {\n            dom.setStyle(elm, name, FormatUtils.replaceVars(value, vars));\n          });\n          if (fmt.styles) {\n            var styleVal = dom.getAttrib(elm, 'style');\n            if (styleVal) {\n              elm.setAttribute('data-mce-style', styleVal);\n            }\n          }\n          each$f(fmt.attributes, function (value, name) {\n            dom.setAttrib(elm, name, FormatUtils.replaceVars(value, vars));\n          });\n          each$f(fmt.classes, function (value) {\n            value = FormatUtils.replaceVars(value, vars);\n            if (!dom.hasClass(elm, value)) {\n              dom.addClass(elm, value);\n            }\n          });\n        }\n      };\n      var applyNodeStyle = function (formatList, node) {\n        var found = false;\n        if (!format.selector) {\n          return false;\n        }\n        each$f(formatList, function (format) {\n          if ('collapsed' in format && format.collapsed !== isCollapsed) {\n            return;\n          }\n          if (dom.is(node, format.selector) && !isCaretNode(node)) {\n            setElementFormat(node, format);\n            found = true;\n            return false;\n          }\n        });\n        return found;\n      };\n      var applyRngStyle = function (dom, rng, bookmark, nodeSpecific) {\n        var newWrappers = [];\n        var wrapName, wrapElm, contentEditable = true;\n        wrapName = format.inline || format.block;\n        wrapElm = dom.create(wrapName);\n        setElementFormat(wrapElm);\n        RangeWalk.walk(dom, rng, function (nodes) {\n          var currentWrapElm;\n          var process = function (node) {\n            var nodeName, parentName, hasContentEditableState, lastContentEditable;\n            lastContentEditable = contentEditable;\n            nodeName = node.nodeName.toLowerCase();\n            parentName = node.parentNode.nodeName.toLowerCase();\n            if (node.nodeType === 1 && dom.getContentEditable(node)) {\n              lastContentEditable = contentEditable;\n              contentEditable = dom.getContentEditable(node) === 'true';\n              hasContentEditableState = true;\n            }\n            if (FormatUtils.isEq(nodeName, 'br')) {\n              currentWrapElm = 0;\n              if (format.block) {\n                dom.remove(node);\n              }\n              return;\n            }\n            if (format.wrapper && MatchFormat.matchNode(ed, node, name, vars)) {\n              currentWrapElm = 0;\n              return;\n            }\n            if (contentEditable && !hasContentEditableState && format.block && !format.wrapper && FormatUtils.isTextBlock(ed, nodeName) && FormatUtils.isValid(ed, parentName, wrapName)) {\n              node = dom.rename(node, wrapName);\n              setElementFormat(node);\n              newWrappers.push(node);\n              currentWrapElm = 0;\n              return;\n            }\n            if (format.selector) {\n              var found = applyNodeStyle(formatList, node);\n              if (!format.inline || found) {\n                currentWrapElm = 0;\n                return;\n              }\n            }\n            if (contentEditable && !hasContentEditableState && FormatUtils.isValid(ed, wrapName, nodeName) && FormatUtils.isValid(ed, parentName, wrapName) && !(!nodeSpecific && node.nodeType === 3 && node.nodeValue.length === 1 && node.nodeValue.charCodeAt(0) === 65279) && !isCaretNode(node) && (!format.inline || !dom.isBlock(node))) {\n              if (!currentWrapElm) {\n                currentWrapElm = dom.clone(wrapElm, false);\n                node.parentNode.insertBefore(currentWrapElm, node);\n                newWrappers.push(currentWrapElm);\n              }\n              currentWrapElm.appendChild(node);\n            } else {\n              currentWrapElm = 0;\n              each$f(Tools.grep(node.childNodes), process);\n              if (hasContentEditableState) {\n                contentEditable = lastContentEditable;\n              }\n              currentWrapElm = 0;\n            }\n          };\n          each$f(nodes, process);\n        });\n        if (format.links === true) {\n          each$f(newWrappers, function (node) {\n            var process = function (node) {\n              if (node.nodeName === 'A') {\n                setElementFormat(node, format);\n              }\n              each$f(Tools.grep(node.childNodes), process);\n            };\n            process(node);\n          });\n        }\n        each$f(newWrappers, function (node) {\n          var childCount;\n          var getChildCount = function (node) {\n            var count = 0;\n            each$f(node.childNodes, function (node) {\n              if (!FormatUtils.isWhiteSpaceNode(node) && !Bookmarks.isBookmarkNode(node)) {\n                count++;\n              }\n            });\n            return count;\n          };\n          var getChildElementNode = function (root) {\n            var child = false;\n            each$f(root.childNodes, function (node) {\n              if (isElementNode$1(node)) {\n                child = node;\n                return false;\n              }\n            });\n            return child;\n          };\n          var mergeStyles = function (node) {\n            var child, clone;\n            child = getChildElementNode(node);\n            if (child && !Bookmarks.isBookmarkNode(child) && MatchFormat.matchName(dom, child, format)) {\n              clone = dom.clone(child, false);\n              setElementFormat(clone);\n              dom.replace(clone, node, true);\n              dom.remove(child, 1);\n            }\n            return clone || node;\n          };\n          childCount = getChildCount(node);\n          if ((newWrappers.length > 1 || !dom.isBlock(node)) && childCount === 0) {\n            dom.remove(node, 1);\n            return;\n          }\n          if (format.inline || format.wrapper) {\n            if (!format.exact && childCount === 1) {\n              node = mergeStyles(node);\n            }\n            MergeFormats.mergeWithChildren(ed, formatList, vars, node);\n            MergeFormats.mergeWithParents(ed, format, name, vars, node);\n            MergeFormats.mergeBackgroundColorAndFontSize(dom, format, vars, node);\n            MergeFormats.mergeSubSup(dom, format, vars, node);\n            MergeFormats.mergeSiblings(dom, format, vars, node);\n          }\n        });\n      };\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0, l = formatList.length; i < l; i++) {\n          if (formatList[i].ceFalseOverride && dom.is(node, formatList[i].selector)) {\n            setElementFormat(node, formatList[i]);\n            return;\n          }\n        }\n        return;\n      }\n      if (format) {\n        if (node) {\n          if (node.nodeType) {\n            if (!applyNodeStyle(formatList, node)) {\n              rng = dom.createRng();\n              rng.setStartBefore(node);\n              rng.setEndAfter(node);\n              applyRngStyle(dom, ExpandRange.expandRng(ed, rng, formatList), null, true);\n            }\n          } else {\n            applyRngStyle(dom, node, null, true);\n          }\n        } else {\n          if (!isCollapsed || !format.inline || dom.select('td[data-mce-selected],th[data-mce-selected]').length) {\n            var curSelNode = ed.selection.getNode();\n            if (!ed.settings.forced_root_block && formatList[0].defaultBlock && !dom.getParent(curSelNode, dom.isBlock)) {\n              applyFormat(ed, formatList[0].defaultBlock);\n            }\n            ed.selection.setRng(RangeNormalizer.normalize(ed.selection.getRng()));\n            bookmark = GetBookmark.getPersistentBookmark(ed.selection, true);\n            applyRngStyle(dom, ExpandRange.expandRng(ed, selection.getRng(), formatList));\n            if (format.styles) {\n              MergeFormats.mergeUnderlineAndColor(dom, format, vars, curSelNode);\n            }\n            selection.moveToBookmark(bookmark);\n            FormatUtils.moveStart(dom, selection, selection.getRng());\n            ed.nodeChanged();\n          } else {\n            applyCaretFormat(ed, name, vars);\n          }\n        }\n        Hooks.postProcess(name, ed);\n      }\n    };\n    var ApplyFormat = { applyFormat: applyFormat };\n\n    var each$g = Tools.each;\n    var setup$5 = function (formatChangeData, editor) {\n      var currentFormats = {};\n      formatChangeData.set({});\n      editor.on('NodeChange', function (e) {\n        var parents = FormatUtils.getParents(editor.dom, e.element);\n        var matchedFormats = {};\n        parents = Tools.grep(parents, function (node) {\n          return node.nodeType === 1 && !node.getAttribute('data-mce-bogus');\n        });\n        each$g(formatChangeData.get(), function (callbacks, format) {\n          each$g(parents, function (node) {\n            if (editor.formatter.matchNode(node, format, {}, callbacks.similar)) {\n              if (!currentFormats[format]) {\n                each$g(callbacks, function (callback) {\n                  callback(true, {\n                    node: node,\n                    format: format,\n                    parents: parents\n                  });\n                });\n                currentFormats[format] = callbacks;\n              }\n              matchedFormats[format] = callbacks;\n              return false;\n            }\n            if (MatchFormat.matchesUnInheritedFormatSelector(editor, node, format)) {\n              return false;\n            }\n          });\n        });\n        each$g(currentFormats, function (callbacks, format) {\n          if (!matchedFormats[format]) {\n            delete currentFormats[format];\n            each$g(callbacks, function (callback) {\n              callback(false, {\n                node: e.element,\n                format: format,\n                parents: parents\n              });\n            });\n          }\n        });\n      });\n    };\n    var addListeners = function (formatChangeData, formats, callback, similar) {\n      var formatChangeItems = formatChangeData.get();\n      each$g(formats.split(','), function (format) {\n        if (!formatChangeItems[format]) {\n          formatChangeItems[format] = [];\n          formatChangeItems[format].similar = similar;\n        }\n        formatChangeItems[format].push(callback);\n      });\n      formatChangeData.set(formatChangeItems);\n    };\n    var formatChanged = function (editor, formatChangeState, formats, callback, similar) {\n      if (formatChangeState.get() === null) {\n        setup$5(formatChangeState, editor);\n      }\n      addListeners(formatChangeState, formats, callback, similar);\n    };\n    var FormatChanged = { formatChanged: formatChanged };\n\n    var get$5 = function (dom) {\n      var formats = {\n        valigntop: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'top' }\n          }],\n        valignmiddle: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'middle' }\n          }],\n        valignbottom: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'bottom' }\n          }],\n        alignleft: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-left',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'left' },\n            inherit: false,\n            preview: false,\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table',\n            collapsed: false,\n            styles: { float: 'left' },\n            preview: 'font-family font-size'\n          }\n        ],\n        aligncenter: [\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'center' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-center',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'img',\n            collapsed: false,\n            styles: {\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignright: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-right',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'right' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table',\n            collapsed: false,\n            styles: { float: 'right' },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignjustify: [{\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'justify' },\n            inherit: false,\n            defaultBlock: 'div',\n            preview: 'font-family font-size'\n          }],\n        bold: [\n          {\n            inline: 'strong',\n            remove: 'all'\n          },\n          {\n            inline: 'span',\n            styles: { fontWeight: 'bold' }\n          },\n          {\n            inline: 'b',\n            remove: 'all'\n          }\n        ],\n        italic: [\n          {\n            inline: 'em',\n            remove: 'all'\n          },\n          {\n            inline: 'span',\n            styles: { fontStyle: 'italic' }\n          },\n          {\n            inline: 'i',\n            remove: 'all'\n          }\n        ],\n        underline: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'underline' },\n            exact: true\n          },\n          {\n            inline: 'u',\n            remove: 'all'\n          }\n        ],\n        strikethrough: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'line-through' },\n            exact: true\n          },\n          {\n            inline: 'strike',\n            remove: 'all'\n          }\n        ],\n        forecolor: {\n          inline: 'span',\n          styles: { color: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        hilitecolor: {\n          inline: 'span',\n          styles: { backgroundColor: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        fontname: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontFamily: '%value' },\n          clear_child_styles: true\n        },\n        fontsize: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontSize: '%value' },\n          clear_child_styles: true\n        },\n        fontsize_class: {\n          inline: 'span',\n          attributes: { class: '%value' }\n        },\n        blockquote: {\n          block: 'blockquote',\n          wrapper: 1,\n          remove: 'all'\n        },\n        subscript: { inline: 'sub' },\n        superscript: { inline: 'sup' },\n        code: { inline: 'code' },\n        link: {\n          inline: 'a',\n          selector: 'a',\n          remove: 'all',\n          split: true,\n          deep: true,\n          onmatch: function () {\n            return true;\n          },\n          onformat: function (elm, fmt, vars) {\n            Tools.each(vars, function (value, key) {\n              dom.setAttrib(elm, key, value);\n            });\n          }\n        },\n        removeformat: [\n          {\n            selector: 'b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins',\n            remove: 'all',\n            split: true,\n            expand: false,\n            block_expand: true,\n            deep: true\n          },\n          {\n            selector: 'span',\n            attributes: [\n              'style',\n              'class'\n            ],\n            remove: 'empty',\n            split: true,\n            expand: false,\n            deep: true\n          },\n          {\n            selector: '*',\n            attributes: [\n              'style',\n              'class'\n            ],\n            split: false,\n            expand: false,\n            deep: true\n          }\n        ]\n      };\n      Tools.each('p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp'.split(/\\s/), function (name) {\n        formats[name] = {\n          block: name,\n          remove: 'all'\n        };\n      });\n      return formats;\n    };\n    var DefaultFormats = { get: get$5 };\n\n    function FormatRegistry (editor) {\n      var formats = {};\n      var get = function (name) {\n        return name ? formats[name] : formats;\n      };\n      var register = function (name, format) {\n        if (name) {\n          if (typeof name !== 'string') {\n            Tools.each(name, function (format, name) {\n              register(name, format);\n            });\n          } else {\n            format = format.length ? format : [format];\n            Tools.each(format, function (format) {\n              if (typeof format.deep === 'undefined') {\n                format.deep = !format.selector;\n              }\n              if (typeof format.split === 'undefined') {\n                format.split = !format.selector || format.inline;\n              }\n              if (typeof format.remove === 'undefined' && format.selector && !format.inline) {\n                format.remove = 'none';\n              }\n              if (format.selector && format.inline) {\n                format.mixed = true;\n                format.block_expand = true;\n              }\n              if (typeof format.classes === 'string') {\n                format.classes = format.classes.split(/\\s+/);\n              }\n            });\n            formats[name] = format;\n          }\n        }\n      };\n      var unregister = function (name) {\n        if (name && formats[name]) {\n          delete formats[name];\n        }\n        return formats;\n      };\n      register(DefaultFormats.get(editor.dom));\n      register(editor.settings.formats);\n      return {\n        get: get,\n        register: register,\n        unregister: unregister\n      };\n    }\n\n    var each$h = Tools.each;\n    var dom = DOMUtils$1.DOM;\n    var parsedSelectorToHtml = function (ancestry, editor) {\n      var elm, item, fragment;\n      var schema = editor && editor.schema || Schema({});\n      var decorate = function (elm, item) {\n        if (item.classes.length) {\n          dom.addClass(elm, item.classes.join(' '));\n        }\n        dom.setAttribs(elm, item.attrs);\n      };\n      var createElement = function (sItem) {\n        var elm;\n        item = typeof sItem === 'string' ? {\n          name: sItem,\n          classes: [],\n          attrs: {}\n        } : sItem;\n        elm = dom.create(item.name);\n        decorate(elm, item);\n        return elm;\n      };\n      var getRequiredParent = function (elm, candidate) {\n        var name = typeof elm !== 'string' ? elm.nodeName.toLowerCase() : elm;\n        var elmRule = schema.getElementRule(name);\n        var parentsRequired = elmRule && elmRule.parentsRequired;\n        if (parentsRequired && parentsRequired.length) {\n          return candidate && Tools.inArray(parentsRequired, candidate) !== -1 ? candidate : parentsRequired[0];\n        } else {\n          return false;\n        }\n      };\n      var wrapInHtml = function (elm, ancestry, siblings) {\n        var parent, parentCandidate, parentRequired;\n        var ancestor = ancestry.length > 0 && ancestry[0];\n        var ancestorName = ancestor && ancestor.name;\n        parentRequired = getRequiredParent(elm, ancestorName);\n        if (parentRequired) {\n          if (ancestorName === parentRequired) {\n            parentCandidate = ancestry[0];\n            ancestry = ancestry.slice(1);\n          } else {\n            parentCandidate = parentRequired;\n          }\n        } else if (ancestor) {\n          parentCandidate = ancestry[0];\n          ancestry = ancestry.slice(1);\n        } else if (!siblings) {\n          return elm;\n        }\n        if (parentCandidate) {\n          parent = createElement(parentCandidate);\n          parent.appendChild(elm);\n        }\n        if (siblings) {\n          if (!parent) {\n            parent = dom.create('div');\n            parent.appendChild(elm);\n          }\n          Tools.each(siblings, function (sibling) {\n            var siblingElm = createElement(sibling);\n            parent.insertBefore(siblingElm, elm);\n          });\n        }\n        return wrapInHtml(parent, ancestry, parentCandidate && parentCandidate.siblings);\n      };\n      if (ancestry && ancestry.length) {\n        item = ancestry[0];\n        elm = createElement(item);\n        fragment = dom.create('div');\n        fragment.appendChild(wrapInHtml(elm, ancestry.slice(1), item.siblings));\n        return fragment;\n      } else {\n        return '';\n      }\n    };\n    var selectorToHtml = function (selector, editor) {\n      return parsedSelectorToHtml(parseSelector(selector), editor);\n    };\n    var parseSelectorItem = function (item) {\n      var tagName;\n      var obj = {\n        classes: [],\n        attrs: {}\n      };\n      item = obj.selector = Tools.trim(item);\n      if (item !== '*') {\n        tagName = item.replace(/(?:([#\\.]|::?)([\\w\\-]+)|(\\[)([^\\]]+)\\]?)/g, function ($0, $1, $2, $3, $4) {\n          switch ($1) {\n          case '#':\n            obj.attrs.id = $2;\n            break;\n          case '.':\n            obj.classes.push($2);\n            break;\n          case ':':\n            if (Tools.inArray('checked disabled enabled read-only required'.split(' '), $2) !== -1) {\n              obj.attrs[$2] = $2;\n            }\n            break;\n          }\n          if ($3 === '[') {\n            var m = $4.match(/([\\w\\-]+)(?:\\=\\\"([^\\\"]+))?/);\n            if (m) {\n              obj.attrs[m[1]] = m[2];\n            }\n          }\n          return '';\n        });\n      }\n      obj.name = tagName || 'div';\n      return obj;\n    };\n    var parseSelector = function (selector) {\n      if (!selector || typeof selector !== 'string') {\n        return [];\n      }\n      selector = selector.split(/\\s*,\\s*/)[0];\n      selector = selector.replace(/\\s*(~\\+|~|\\+|>)\\s*/g, '$1');\n      return Tools.map(selector.split(/(?:>|\\s+(?![^\\[\\]]+\\]))/), function (item) {\n        var siblings = Tools.map(item.split(/(?:~\\+|~|\\+)/), parseSelectorItem);\n        var obj = siblings.pop();\n        if (siblings.length) {\n          obj.siblings = siblings;\n        }\n        return obj;\n      }).reverse();\n    };\n    var getCssText = function (editor, format) {\n      var name, previewFrag, previewElm, items;\n      var previewCss = '', parentFontSize, previewStyles;\n      previewStyles = editor.settings.preview_styles;\n      if (previewStyles === false) {\n        return '';\n      }\n      if (typeof previewStyles !== 'string') {\n        previewStyles = 'font-family font-size font-weight font-style text-decoration ' + 'text-transform color background-color border border-radius outline text-shadow';\n      }\n      var removeVars = function (val) {\n        return val.replace(/%(\\w+)/g, '');\n      };\n      if (typeof format === 'string') {\n        format = editor.formatter.get(format);\n        if (!format) {\n          return;\n        }\n        format = format[0];\n      }\n      if ('preview' in format) {\n        previewStyles = format.preview;\n        if (previewStyles === false) {\n          return '';\n        }\n      }\n      name = format.block || format.inline || 'span';\n      items = parseSelector(format.selector);\n      if (items.length) {\n        if (!items[0].name) {\n          items[0].name = name;\n        }\n        name = format.selector;\n        previewFrag = parsedSelectorToHtml(items, editor);\n      } else {\n        previewFrag = parsedSelectorToHtml([name], editor);\n      }\n      previewElm = dom.select(name, previewFrag)[0] || previewFrag.firstChild;\n      each$h(format.styles, function (value, name) {\n        value = removeVars(value);\n        if (value) {\n          dom.setStyle(previewElm, name, value);\n        }\n      });\n      each$h(format.attributes, function (value, name) {\n        value = removeVars(value);\n        if (value) {\n          dom.setAttrib(previewElm, name, value);\n        }\n      });\n      each$h(format.classes, function (value) {\n        value = removeVars(value);\n        if (!dom.hasClass(previewElm, value)) {\n          dom.addClass(previewElm, value);\n        }\n      });\n      editor.fire('PreviewFormats');\n      dom.setStyles(previewFrag, {\n        position: 'absolute',\n        left: -65535\n      });\n      editor.getBody().appendChild(previewFrag);\n      parentFontSize = dom.getStyle(editor.getBody(), 'fontSize', true);\n      parentFontSize = /px$/.test(parentFontSize) ? parseInt(parentFontSize, 10) : 0;\n      each$h(previewStyles.split(' '), function (name) {\n        var value = dom.getStyle(previewElm, name, true);\n        if (name === 'background-color' && /transparent|rgba\\s*\\([^)]+,\\s*0\\)/.test(value)) {\n          value = dom.getStyle(editor.getBody(), name, true);\n          if (dom.toHex(value).toLowerCase() === '#ffffff') {\n            return;\n          }\n        }\n        if (name === 'color') {\n          if (dom.toHex(value).toLowerCase() === '#000000') {\n            return;\n          }\n        }\n        if (name === 'font-size') {\n          if (/em|%$/.test(value)) {\n            if (parentFontSize === 0) {\n              return;\n            }\n            var numValue = parseFloat(value) / (/%$/.test(value) ? 100 : 1);\n            value = numValue * parentFontSize + 'px';\n          }\n        }\n        if (name === 'border' && value) {\n          previewCss += 'padding:0 2px;';\n        }\n        previewCss += name + ':' + value + ';';\n      });\n      editor.fire('AfterPreviewFormats');\n      dom.remove(previewFrag);\n      return previewCss;\n    };\n    var Preview = {\n      getCssText: getCssText,\n      parseSelector: parseSelector,\n      selectorToHtml: selectorToHtml\n    };\n\n    var toggle = function (editor, formats, name, vars, node) {\n      var fmt = formats.get(name);\n      if (MatchFormat.match(editor, name, vars, node) && (!('toggle' in fmt[0]) || fmt[0].toggle)) {\n        RemoveFormat.remove(editor, name, vars, node);\n      } else {\n        ApplyFormat.applyFormat(editor, name, vars, node);\n      }\n    };\n    var ToggleFormat = { toggle: toggle };\n\n    var setup$6 = function (editor) {\n      editor.addShortcut('meta+b', '', 'Bold');\n      editor.addShortcut('meta+i', '', 'Italic');\n      editor.addShortcut('meta+u', '', 'Underline');\n      for (var i = 1; i <= 6; i++) {\n        editor.addShortcut('access+' + i, '', [\n          'FormatBlock',\n          false,\n          'h' + i\n        ]);\n      }\n      editor.addShortcut('access+7', '', [\n        'FormatBlock',\n        false,\n        'p'\n      ]);\n      editor.addShortcut('access+8', '', [\n        'FormatBlock',\n        false,\n        'div'\n      ]);\n      editor.addShortcut('access+9', '', [\n        'FormatBlock',\n        false,\n        'address'\n      ]);\n    };\n    var FormatShortcuts = { setup: setup$6 };\n\n    function Formatter (editor) {\n      var formats = FormatRegistry(editor);\n      var formatChangeState = Cell(null);\n      FormatShortcuts.setup(editor);\n      setup$2(editor);\n      return {\n        get: formats.get,\n        register: formats.register,\n        unregister: formats.unregister,\n        apply: curry(ApplyFormat.applyFormat, editor),\n        remove: curry(RemoveFormat.remove, editor),\n        toggle: curry(ToggleFormat.toggle, editor, formats),\n        match: curry(MatchFormat.match, editor),\n        matchAll: curry(MatchFormat.matchAll, editor),\n        matchNode: curry(MatchFormat.matchNode, editor),\n        canApply: curry(MatchFormat.canApply, editor),\n        formatChanged: curry(FormatChanged.formatChanged, editor, formatChangeState),\n        getCssText: curry(Preview.getCssText, editor)\n      };\n    }\n\n    var hasOwnProperty$2 = Object.prototype.hasOwnProperty;\n    var shallow$1 = function (old, nu) {\n      return nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty$2.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var merge = baseMerge(shallow$1);\n\n    var register = function (htmlParser, settings, dom) {\n      htmlParser.addAttributeFilter('data-mce-tabindex', function (nodes, name) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.attr('tabindex', node.attributes.map['data-mce-tabindex']);\n          node.attr(name, null);\n        }\n      });\n      htmlParser.addAttributeFilter('src,href,style', function (nodes, name) {\n        var i = nodes.length, node, value;\n        var internalName = 'data-mce-' + name;\n        var urlConverter = settings.url_converter;\n        var urlConverterScope = settings.url_converter_scope;\n        while (i--) {\n          node = nodes[i];\n          value = node.attributes.map[internalName];\n          if (value !== undefined) {\n            node.attr(name, value.length > 0 ? value : null);\n            node.attr(internalName, null);\n          } else {\n            value = node.attributes.map[name];\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n            } else if (urlConverter) {\n              value = urlConverter.call(urlConverterScope, value, name, node.name);\n            }\n            node.attr(name, value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length, node, value;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr('class');\n          if (value) {\n            value = node.attr('class').replace(/(?:^|\\s)mce-item-\\w+(?!\\S)/g, '');\n            node.attr('class', value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes, name, args) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (node.attributes.map['data-mce-type'] === 'bookmark' && !args.cleanup) {\n            var hasChildren = Option.from(node.firstChild).exists(function (firstChild) {\n              return !Zwsp.isZwsp(firstChild.value);\n            });\n            if (hasChildren) {\n              node.unwrap();\n            } else {\n              node.remove();\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('noscript', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i].firstChild;\n          if (node) {\n            node.value = Entities.decode(node.value);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('script,style', function (nodes, name) {\n        var i = nodes.length, node, value, type;\n        var trim = function (value) {\n          return value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g, '\\n').replace(/^[\\r\\n]*|[\\r\\n]*$/g, '').replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi, '').replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g, '');\n        };\n        while (i--) {\n          node = nodes[i];\n          value = node.firstChild ? node.firstChild.value : '';\n          if (name === 'script') {\n            type = node.attr('type');\n            if (type) {\n              node.attr('type', type === 'mce-no/type' ? null : type.replace(/^mce\\-/, ''));\n            }\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '// <![CDATA[\\n' + trim(value) + '\\n// ]]>';\n            }\n          } else {\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '<!--\\n' + trim(value) + '\\n-->';\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('#comment', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (node.value.indexOf('[CDATA[') === 0) {\n            node.name = '#cdata';\n            node.type = 4;\n            node.value = node.value.replace(/^\\[CDATA\\[|\\]\\]$/g, '');\n          } else if (node.value.indexOf('mce:protected ') === 0) {\n            node.name = '#text';\n            node.type = 3;\n            node.raw = true;\n            node.value = unescape(node.value).substr(14);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('xml:namespace,input', function (nodes, name) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (node.type === 7) {\n            node.remove();\n          } else if (node.type === 1) {\n            if (name === 'input' && !('type' in node.attributes.map)) {\n              node.attr('type', 'text');\n            }\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes) {\n        each(nodes, function (node) {\n          if (node.attr('data-mce-type') === 'format-caret') {\n            if (node.isEmpty(htmlParser.schema.getNonEmptyElements())) {\n              node.remove();\n            } else {\n              node.unwrap();\n            }\n          }\n        });\n      });\n      htmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,' + 'data-mce-selected,data-mce-expando,' + 'data-mce-type,data-mce-resize', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].attr(name, null);\n        }\n      });\n    };\n    var trimTrailingBr = function (rootNode) {\n      var brNode1, brNode2;\n      var isBr = function (node) {\n        return node && node.name === 'br';\n      };\n      brNode1 = rootNode.lastChild;\n      if (isBr(brNode1)) {\n        brNode2 = brNode1.prev;\n        if (isBr(brNode2)) {\n          brNode1.remove();\n          brNode2.remove();\n        }\n      }\n    };\n    var DomSerializerFilters = {\n      register: register,\n      trimTrailingBr: trimTrailingBr\n    };\n\n    var preProcess = function (editor, node, args) {\n      var impl, doc, oldDoc;\n      var dom = editor.dom;\n      node = node.cloneNode(true);\n      impl = domGlobals.document.implementation;\n      if (impl.createHTMLDocument) {\n        doc = impl.createHTMLDocument('');\n        Tools.each(node.nodeName === 'BODY' ? node.childNodes : [node], function (node) {\n          doc.body.appendChild(doc.importNode(node, true));\n        });\n        if (node.nodeName !== 'BODY') {\n          node = doc.body.firstChild;\n        } else {\n          node = doc.body;\n        }\n        oldDoc = dom.doc;\n        dom.doc = doc;\n      }\n      Events.firePreProcess(editor, merge(args, { node: node }));\n      if (oldDoc) {\n        dom.doc = oldDoc;\n      }\n      return node;\n    };\n    var shouldFireEvent = function (editor, args) {\n      return editor && editor.hasEventListeners('PreProcess') && !args.no_events;\n    };\n    var process = function (editor, node, args) {\n      return shouldFireEvent(editor, args) ? preProcess(editor, node, args) : node;\n    };\n    var DomSerializerPreProcess = { process: process };\n\n    var removeAttrs = function (node, names) {\n      each(names, function (name) {\n        node.attr(name, null);\n      });\n    };\n    var addFontToSpansFilter = function (domParser, styles, fontSizes) {\n      domParser.addNodeFilter('font', function (nodes) {\n        each(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          var color = node.attr('color');\n          var face = node.attr('face');\n          var size = node.attr('size');\n          if (color) {\n            props.color = color;\n          }\n          if (face) {\n            props['font-family'] = face;\n          }\n          if (size) {\n            props['font-size'] = fontSizes[parseInt(node.attr('size'), 10) - 1];\n          }\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n          removeAttrs(node, [\n            'color',\n            'face',\n            'size'\n          ]);\n        });\n      });\n    };\n    var addStrikeToSpanFilter = function (domParser, styles) {\n      domParser.addNodeFilter('strike', function (nodes) {\n        each(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          props['text-decoration'] = 'line-through';\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n        });\n      });\n    };\n    var addFilters = function (domParser, settings) {\n      var styles = Styles();\n      if (settings.convert_fonts_to_spans) {\n        addFontToSpansFilter(domParser, styles, Tools.explode(settings.font_size_legacy_values));\n      }\n      addStrikeToSpanFilter(domParser, styles);\n    };\n    var register$1 = function (domParser, settings) {\n      if (settings.inline_styles) {\n        addFilters(domParser, settings);\n      }\n    };\n    var LegacyFilter = { register: register$1 };\n\n    var whiteSpaceRegExp$3 = /^[ \\t\\r\\n]*$/;\n    var typeLookup = {\n      '#text': 3,\n      '#comment': 8,\n      '#cdata': 4,\n      '#pi': 7,\n      '#doctype': 10,\n      '#document-fragment': 11\n    };\n    var walk$2 = function (node, root, prev) {\n      var sibling;\n      var parent;\n      var startName = prev ? 'lastChild' : 'firstChild';\n      var siblingName = prev ? 'prev' : 'next';\n      if (node[startName]) {\n        return node[startName];\n      }\n      if (node !== root) {\n        sibling = node[siblingName];\n        if (sibling) {\n          return sibling;\n        }\n        for (parent = node.parent; parent && parent !== root; parent = parent.parent) {\n          sibling = parent[siblingName];\n          if (sibling) {\n            return sibling;\n          }\n        }\n      }\n    };\n    var Node$1 = function () {\n      function Node(name, type) {\n        this.name = name;\n        this.type = type;\n        if (type === 1) {\n          this.attributes = [];\n          this.attributes.map = {};\n        }\n      }\n      Node.create = function (name, attrs) {\n        var node, attrName;\n        node = new Node(name, typeLookup[name] || 1);\n        if (attrs) {\n          for (attrName in attrs) {\n            node.attr(attrName, attrs[attrName]);\n          }\n        }\n        return node;\n      };\n      Node.prototype.replace = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        self.insert(node, self);\n        self.remove();\n        return self;\n      };\n      Node.prototype.attr = function (name, value) {\n        var self = this;\n        var attrs, i;\n        if (typeof name !== 'string') {\n          for (i in name) {\n            self.attr(i, name[i]);\n          }\n          return self;\n        }\n        if (attrs = self.attributes) {\n          if (value !== undefined) {\n            if (value === null) {\n              if (name in attrs.map) {\n                delete attrs.map[name];\n                i = attrs.length;\n                while (i--) {\n                  if (attrs[i].name === name) {\n                    attrs = attrs.splice(i, 1);\n                    return self;\n                  }\n                }\n              }\n              return self;\n            }\n            if (name in attrs.map) {\n              i = attrs.length;\n              while (i--) {\n                if (attrs[i].name === name) {\n                  attrs[i].value = value;\n                  break;\n                }\n              }\n            } else {\n              attrs.push({\n                name: name,\n                value: value\n              });\n            }\n            attrs.map[name] = value;\n            return self;\n          }\n          return attrs.map[name];\n        }\n      };\n      Node.prototype.clone = function () {\n        var self = this;\n        var clone = new Node(self.name, self.type);\n        var i, l, selfAttrs, selfAttr, cloneAttrs;\n        if (selfAttrs = self.attributes) {\n          cloneAttrs = [];\n          cloneAttrs.map = {};\n          for (i = 0, l = selfAttrs.length; i < l; i++) {\n            selfAttr = selfAttrs[i];\n            if (selfAttr.name !== 'id') {\n              cloneAttrs[cloneAttrs.length] = {\n                name: selfAttr.name,\n                value: selfAttr.value\n              };\n              cloneAttrs.map[selfAttr.name] = selfAttr.value;\n            }\n          }\n          clone.attributes = cloneAttrs;\n        }\n        clone.value = self.value;\n        clone.shortEnded = self.shortEnded;\n        return clone;\n      };\n      Node.prototype.wrap = function (wrapper) {\n        var self = this;\n        self.parent.insert(wrapper, self);\n        wrapper.append(self);\n        return self;\n      };\n      Node.prototype.unwrap = function () {\n        var self = this;\n        var node, next;\n        for (node = self.firstChild; node;) {\n          next = node.next;\n          self.insert(node, self, true);\n          node = next;\n        }\n        self.remove();\n      };\n      Node.prototype.remove = function () {\n        var self = this, parent = self.parent, next = self.next, prev = self.prev;\n        if (parent) {\n          if (parent.firstChild === self) {\n            parent.firstChild = next;\n            if (next) {\n              next.prev = null;\n            }\n          } else {\n            prev.next = next;\n          }\n          if (parent.lastChild === self) {\n            parent.lastChild = prev;\n            if (prev) {\n              prev.next = null;\n            }\n          } else {\n            next.prev = prev;\n          }\n          self.parent = self.next = self.prev = null;\n        }\n        return self;\n      };\n      Node.prototype.append = function (node) {\n        var self = this;\n        var last;\n        if (node.parent) {\n          node.remove();\n        }\n        last = self.lastChild;\n        if (last) {\n          last.next = node;\n          node.prev = last;\n          self.lastChild = node;\n        } else {\n          self.lastChild = self.firstChild = node;\n        }\n        node.parent = self;\n        return node;\n      };\n      Node.prototype.insert = function (node, refNode, before) {\n        var parent;\n        if (node.parent) {\n          node.remove();\n        }\n        parent = refNode.parent || this;\n        if (before) {\n          if (refNode === parent.firstChild) {\n            parent.firstChild = node;\n          } else {\n            refNode.prev.next = node;\n          }\n          node.prev = refNode.prev;\n          node.next = refNode;\n          refNode.prev = node;\n        } else {\n          if (refNode === parent.lastChild) {\n            parent.lastChild = node;\n          } else {\n            refNode.next.prev = node;\n          }\n          node.next = refNode.next;\n          node.prev = refNode;\n          refNode.next = node;\n        }\n        node.parent = parent;\n        return node;\n      };\n      Node.prototype.getAll = function (name) {\n        var self = this;\n        var node;\n        var collection = [];\n        for (node = self.firstChild; node; node = walk$2(node, self)) {\n          if (node.name === name) {\n            collection.push(node);\n          }\n        }\n        return collection;\n      };\n      Node.prototype.empty = function () {\n        var self = this;\n        var nodes, i, node;\n        if (self.firstChild) {\n          nodes = [];\n          for (node = self.firstChild; node; node = walk$2(node, self)) {\n            nodes.push(node);\n          }\n          i = nodes.length;\n          while (i--) {\n            node = nodes[i];\n            node.parent = node.firstChild = node.lastChild = node.next = node.prev = null;\n          }\n        }\n        self.firstChild = self.lastChild = null;\n        return self;\n      };\n      Node.prototype.isEmpty = function (elements, whitespace, predicate) {\n        var self = this;\n        var node = self.firstChild, i, name;\n        whitespace = whitespace || {};\n        if (node) {\n          do {\n            if (node.type === 1) {\n              if (node.attributes.map['data-mce-bogus']) {\n                continue;\n              }\n              if (elements[node.name]) {\n                return false;\n              }\n              i = node.attributes.length;\n              while (i--) {\n                name = node.attributes[i].name;\n                if (name === 'name' || name.indexOf('data-mce-bookmark') === 0) {\n                  return false;\n                }\n              }\n            }\n            if (node.type === 8) {\n              return false;\n            }\n            if (node.type === 3 && !whiteSpaceRegExp$3.test(node.value)) {\n              return false;\n            }\n            if (node.type === 3 && node.parent && whitespace[node.parent.name] && whiteSpaceRegExp$3.test(node.value)) {\n              return false;\n            }\n            if (predicate && predicate(node)) {\n              return false;\n            }\n          } while (node = walk$2(node, self));\n        }\n        return true;\n      };\n      Node.prototype.walk = function (prev) {\n        return walk$2(this, null, prev);\n      };\n      return Node;\n    }();\n\n    var paddEmptyNode = function (settings, args, blockElements, node) {\n      var brPreferred = settings.padd_empty_with_br || args.insert;\n      if (brPreferred && blockElements[node.name]) {\n        node.empty().append(new Node$1('br', 1)).shortEnded = true;\n      } else {\n        node.empty().append(new Node$1('#text', 3)).value = '\\xA0';\n      }\n    };\n    var isPaddedWithNbsp = function (node) {\n      return hasOnlyChild(node, '#text') && node.firstChild.value === '\\xA0';\n    };\n    var hasOnlyChild = function (node, name) {\n      return node && node.firstChild && node.firstChild === node.lastChild && node.firstChild.name === name;\n    };\n    var isPadded = function (schema, node) {\n      var rule = schema.getElementRule(node.name);\n      return rule && rule.paddEmpty;\n    };\n    var isEmpty$2 = function (schema, nonEmptyElements, whitespaceElements, node) {\n      return node.isEmpty(nonEmptyElements, whitespaceElements, function (node) {\n        return isPadded(schema, node);\n      });\n    };\n    var isLineBreakNode = function (node, blockElements) {\n      return node && (blockElements[node.name] || node.name === 'br');\n    };\n\n    var register$2 = function (parser, settings) {\n      var schema = parser.schema;\n      if (settings.remove_trailing_brs) {\n        parser.addNodeFilter('br', function (nodes, _, args) {\n          var i;\n          var l = nodes.length;\n          var node;\n          var blockElements = Tools.extend({}, schema.getBlockElements());\n          var nonEmptyElements = schema.getNonEmptyElements();\n          var parent, lastParent, prev, prevName;\n          var whiteSpaceElements = schema.getWhiteSpaceElements();\n          var elementRule, textNode;\n          blockElements.body = 1;\n          for (i = 0; i < l; i++) {\n            node = nodes[i];\n            parent = node.parent;\n            if (blockElements[node.parent.name] && node === parent.lastChild) {\n              prev = node.prev;\n              while (prev) {\n                prevName = prev.name;\n                if (prevName !== 'span' || prev.attr('data-mce-type') !== 'bookmark') {\n                  if (prevName !== 'br') {\n                    break;\n                  }\n                  if (prevName === 'br') {\n                    node = null;\n                    break;\n                  }\n                }\n                prev = prev.prev;\n              }\n              if (node) {\n                node.remove();\n                if (isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, parent)) {\n                  elementRule = schema.getElementRule(parent.name);\n                  if (elementRule) {\n                    if (elementRule.removeEmpty) {\n                      parent.remove();\n                    } else if (elementRule.paddEmpty) {\n                      paddEmptyNode(settings, args, blockElements, parent);\n                    }\n                  }\n                }\n              }\n            } else {\n              lastParent = node;\n              while (parent && parent.firstChild === lastParent && parent.lastChild === lastParent) {\n                lastParent = parent;\n                if (blockElements[parent.name]) {\n                  break;\n                }\n                parent = parent.parent;\n              }\n              if (lastParent === parent && settings.padd_empty_with_br !== true) {\n                textNode = new Node$1('#text', 3);\n                textNode.value = '\\xA0';\n                node.replace(textNode);\n              }\n            }\n          }\n        });\n      }\n      parser.addAttributeFilter('href', function (nodes) {\n        var i = nodes.length, node;\n        var appendRel = function (rel) {\n          var parts = rel.split(' ').filter(function (p) {\n            return p.length > 0;\n          });\n          return parts.concat(['noopener']).sort().join(' ');\n        };\n        var addNoOpener = function (rel) {\n          var newRel = rel ? Tools.trim(rel) : '';\n          if (!/\\b(noopener)\\b/g.test(newRel)) {\n            return appendRel(newRel);\n          } else {\n            return newRel;\n          }\n        };\n        if (!settings.allow_unsafe_link_target) {\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.attr('target') === '_blank') {\n              node.attr('rel', addNoOpener(node.attr('rel')));\n            }\n          }\n        }\n      });\n      if (!settings.allow_html_in_named_anchor) {\n        parser.addAttributeFilter('id,name', function (nodes) {\n          var i = nodes.length, sibling, prevSibling, parent, node;\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.firstChild && !node.attr('href')) {\n              parent = node.parent;\n              sibling = node.lastChild;\n              do {\n                prevSibling = sibling.prev;\n                parent.insert(sibling, node);\n                sibling = prevSibling;\n              } while (sibling);\n            }\n          }\n        });\n      }\n      if (settings.fix_list_elements) {\n        parser.addNodeFilter('ul,ol', function (nodes) {\n          var i = nodes.length, node, parentNode;\n          while (i--) {\n            node = nodes[i];\n            parentNode = node.parent;\n            if (parentNode.name === 'ul' || parentNode.name === 'ol') {\n              if (node.prev && node.prev.name === 'li') {\n                node.prev.append(node);\n              } else {\n                var li = new Node$1('li', 1);\n                li.attr('style', 'list-style-type: none');\n                node.wrap(li);\n              }\n            }\n          }\n        });\n      }\n      if (settings.validate && schema.getValidClasses()) {\n        parser.addAttributeFilter('class', function (nodes) {\n          var i = nodes.length, node, classList, ci, className, classValue;\n          var validClasses = schema.getValidClasses();\n          var validClassesMap, valid;\n          while (i--) {\n            node = nodes[i];\n            classList = node.attr('class').split(' ');\n            classValue = '';\n            for (ci = 0; ci < classList.length; ci++) {\n              className = classList[ci];\n              valid = false;\n              validClassesMap = validClasses['*'];\n              if (validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              validClassesMap = validClasses[node.name];\n              if (!valid && validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              if (valid) {\n                if (classValue) {\n                  classValue += ' ';\n                }\n                classValue += className;\n              }\n            }\n            if (!classValue.length) {\n              classValue = null;\n            }\n            node.attr('class', classValue);\n          }\n        });\n      }\n    };\n\n    var makeMap$4 = Tools.makeMap, each$i = Tools.each, explode$3 = Tools.explode, extend$3 = Tools.extend;\n    function DomParser (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var nodeFilters = {};\n      var attributeFilters = [];\n      var matchedNodes = {};\n      var matchedAttributes = {};\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      settings.root_name = settings.root_name || 'body';\n      var fixInvalidChildren = function (nodes) {\n        var ni, node, parent, parents, newParent, currentNode, tempNode, childNode, i;\n        var nonEmptyElements, whitespaceElements, nonSplitableElements, textBlockElements, specialElements, sibling, nextNode;\n        nonSplitableElements = makeMap$4('tr,td,th,tbody,thead,tfoot,table');\n        nonEmptyElements = schema.getNonEmptyElements();\n        whitespaceElements = schema.getWhiteSpaceElements();\n        textBlockElements = schema.getTextBlockElements();\n        specialElements = schema.getSpecialElements();\n        for (ni = 0; ni < nodes.length; ni++) {\n          node = nodes[ni];\n          if (!node.parent || node.fixed) {\n            continue;\n          }\n          if (textBlockElements[node.name] && node.parent.name === 'li') {\n            sibling = node.next;\n            while (sibling) {\n              if (textBlockElements[sibling.name]) {\n                sibling.name = 'li';\n                sibling.fixed = true;\n                node.parent.insert(sibling, node.parent);\n              } else {\n                break;\n              }\n              sibling = sibling.next;\n            }\n            node.unwrap(node);\n            continue;\n          }\n          parents = [node];\n          for (parent = node.parent; parent && !schema.isValidChild(parent.name, node.name) && !nonSplitableElements[parent.name]; parent = parent.parent) {\n            parents.push(parent);\n          }\n          if (parent && parents.length > 1) {\n            parents.reverse();\n            newParent = currentNode = filterNode(parents[0].clone());\n            for (i = 0; i < parents.length - 1; i++) {\n              if (schema.isValidChild(currentNode.name, parents[i].name)) {\n                tempNode = filterNode(parents[i].clone());\n                currentNode.append(tempNode);\n              } else {\n                tempNode = currentNode;\n              }\n              for (childNode = parents[i].firstChild; childNode && childNode !== parents[i + 1];) {\n                nextNode = childNode.next;\n                tempNode.append(childNode);\n                childNode = nextNode;\n              }\n              currentNode = tempNode;\n            }\n            if (!isEmpty$2(schema, nonEmptyElements, whitespaceElements, newParent)) {\n              parent.insert(newParent, parents[0], true);\n              parent.insert(node, newParent);\n            } else {\n              parent.insert(node, parents[0], true);\n            }\n            parent = parents[0];\n            if (isEmpty$2(schema, nonEmptyElements, whitespaceElements, parent) || hasOnlyChild(parent, 'br')) {\n              parent.empty().remove();\n            }\n          } else if (node.parent) {\n            if (node.name === 'li') {\n              sibling = node.prev;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ul')) {\n                sibling.append(node);\n                continue;\n              }\n              sibling = node.next;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ul')) {\n                sibling.insert(node, sibling.firstChild, true);\n                continue;\n              }\n              node.wrap(filterNode(new Node$1('ul', 1)));\n              continue;\n            }\n            if (schema.isValidChild(node.parent.name, 'div') && schema.isValidChild('div', node.name)) {\n              node.wrap(filterNode(new Node$1('div', 1)));\n            } else {\n              if (specialElements[node.name]) {\n                node.empty().remove();\n              } else {\n                node.unwrap();\n              }\n            }\n          }\n        }\n      };\n      var filterNode = function (node) {\n        var i, name, list;\n        name = node.name;\n        if (name in nodeFilters) {\n          list = matchedNodes[name];\n          if (list) {\n            list.push(node);\n          } else {\n            matchedNodes[name] = [node];\n          }\n        }\n        i = attributeFilters.length;\n        while (i--) {\n          name = attributeFilters[i].name;\n          if (name in node.attributes.map) {\n            list = matchedAttributes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedAttributes[name] = [node];\n            }\n          }\n        }\n        return node;\n      };\n      var addNodeFilter = function (name, callback) {\n        each$i(explode$3(name), function (name) {\n          var list = nodeFilters[name];\n          if (!list) {\n            nodeFilters[name] = list = [];\n          }\n          list.push(callback);\n        });\n      };\n      var getNodeFilters = function () {\n        var out = [];\n        for (var name in nodeFilters) {\n          if (nodeFilters.hasOwnProperty(name)) {\n            out.push({\n              name: name,\n              callbacks: nodeFilters[name]\n            });\n          }\n        }\n        return out;\n      };\n      var addAttributeFilter = function (name, callback) {\n        each$i(explode$3(name), function (name) {\n          var i;\n          for (i = 0; i < attributeFilters.length; i++) {\n            if (attributeFilters[i].name === name) {\n              attributeFilters[i].callbacks.push(callback);\n              return;\n            }\n          }\n          attributeFilters.push({\n            name: name,\n            callbacks: [callback]\n          });\n        });\n      };\n      var getAttributeFilters = function () {\n        return [].concat(attributeFilters);\n      };\n      var parse = function (html, args) {\n        var parser, nodes, i, l, fi, fl, list, name;\n        var blockElements;\n        var invalidChildren = [];\n        var isInWhiteSpacePreservedElement;\n        var node;\n        args = args || {};\n        matchedNodes = {};\n        matchedAttributes = {};\n        blockElements = extend$3(makeMap$4('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var children = schema.children;\n        var validate = settings.validate;\n        var rootBlockName = 'forced_root_block' in args ? args.forced_root_block : settings.forced_root_block;\n        var whiteSpaceElements = schema.getWhiteSpaceElements();\n        var startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n        var endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n        var allWhiteSpaceRegExp = /[ \\t\\r\\n]+/g;\n        var isAllWhiteSpaceRegExp = /^[ \\t\\r\\n]+$/;\n        isInWhiteSpacePreservedElement = whiteSpaceElements.hasOwnProperty(args.context) || whiteSpaceElements.hasOwnProperty(settings.root_name);\n        var addRootBlocks = function () {\n          var node = rootNode.firstChild, next, rootBlockNode;\n          var trim = function (rootBlockNode) {\n            if (rootBlockNode) {\n              node = rootBlockNode.firstChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(startWhiteSpaceRegExp, '');\n              }\n              node = rootBlockNode.lastChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(endWhiteSpaceRegExp, '');\n              }\n            }\n          };\n          if (!schema.isValidChild(rootNode.name, rootBlockName.toLowerCase())) {\n            return;\n          }\n          while (node) {\n            next = node.next;\n            if (node.type === 3 || node.type === 1 && node.name !== 'p' && !blockElements[node.name] && !node.attr('data-mce-type')) {\n              if (!rootBlockNode) {\n                rootBlockNode = createNode(rootBlockName, 1);\n                rootBlockNode.attr(settings.forced_root_block_attrs);\n                rootNode.insert(rootBlockNode, node);\n                rootBlockNode.append(node);\n              } else {\n                rootBlockNode.append(node);\n              }\n            } else {\n              trim(rootBlockNode);\n              rootBlockNode = null;\n            }\n            node = next;\n          }\n          trim(rootBlockNode);\n        };\n        var createNode = function (name, type) {\n          var node = new Node$1(name, type);\n          var list;\n          if (name in nodeFilters) {\n            list = matchedNodes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedNodes[name] = [node];\n            }\n          }\n          return node;\n        };\n        var removeWhitespaceBefore = function (node) {\n          var textNode, textNodeNext, textVal, sibling;\n          var blockElements = schema.getBlockElements();\n          for (textNode = node.prev; textNode && textNode.type === 3;) {\n            textVal = textNode.value.replace(endWhiteSpaceRegExp, '');\n            if (textVal.length > 0) {\n              textNode.value = textVal;\n              return;\n            }\n            textNodeNext = textNode.next;\n            if (textNodeNext) {\n              if (textNodeNext.type === 3 && textNodeNext.value.length) {\n                textNode = textNode.prev;\n                continue;\n              }\n              if (!blockElements[textNodeNext.name] && textNodeNext.name !== 'script' && textNodeNext.name !== 'style') {\n                textNode = textNode.prev;\n                continue;\n              }\n            }\n            sibling = textNode.prev;\n            textNode.remove();\n            textNode = sibling;\n          }\n        };\n        var cloneAndExcludeBlocks = function (input) {\n          var name;\n          var output = {};\n          for (name in input) {\n            if (name !== 'li' && name !== 'p') {\n              output[name] = input[name];\n            }\n          }\n          return output;\n        };\n        parser = SaxParser$1({\n          validate: validate,\n          allow_script_urls: settings.allow_script_urls,\n          allow_conditional_comments: settings.allow_conditional_comments,\n          self_closing_elements: cloneAndExcludeBlocks(schema.getSelfClosingElements()),\n          cdata: function (text) {\n            node.append(createNode('#cdata', 4)).value = text;\n          },\n          text: function (text, raw) {\n            var textNode;\n            if (!isInWhiteSpacePreservedElement) {\n              text = text.replace(allWhiteSpaceRegExp, ' ');\n              if (isLineBreakNode(node.lastChild, blockElements)) {\n                text = text.replace(startWhiteSpaceRegExp, '');\n              }\n            }\n            if (text.length !== 0) {\n              textNode = createNode('#text', 3);\n              textNode.raw = !!raw;\n              node.append(textNode).value = text;\n            }\n          },\n          comment: function (text) {\n            node.append(createNode('#comment', 8)).value = text;\n          },\n          pi: function (name, text) {\n            node.append(createNode(name, 7)).value = text;\n            removeWhitespaceBefore(node);\n          },\n          doctype: function (text) {\n            var newNode;\n            newNode = node.append(createNode('#doctype', 10));\n            newNode.value = text;\n            removeWhitespaceBefore(node);\n          },\n          start: function (name, attrs, empty) {\n            var newNode, attrFiltersLen, elementRule, attrName, parent;\n            elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              newNode = createNode(elementRule.outputName || name, 1);\n              newNode.attributes = attrs;\n              newNode.shortEnded = empty;\n              node.append(newNode);\n              parent = children[node.name];\n              if (parent && children[newNode.name] && !parent[newNode.name]) {\n                invalidChildren.push(newNode);\n              }\n              attrFiltersLen = attributeFilters.length;\n              while (attrFiltersLen--) {\n                attrName = attributeFilters[attrFiltersLen].name;\n                if (attrName in attrs.map) {\n                  list = matchedAttributes[attrName];\n                  if (list) {\n                    list.push(newNode);\n                  } else {\n                    matchedAttributes[attrName] = [newNode];\n                  }\n                }\n              }\n              if (blockElements[name]) {\n                removeWhitespaceBefore(newNode);\n              }\n              if (!empty) {\n                node = newNode;\n              }\n              if (!isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = true;\n              }\n            }\n          },\n          end: function (name) {\n            var textNode, elementRule, text, sibling, tempNode;\n            elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              if (blockElements[name]) {\n                if (!isInWhiteSpacePreservedElement) {\n                  textNode = node.firstChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(startWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.next;\n                    } else {\n                      sibling = textNode.next;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.next;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                  textNode = node.lastChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(endWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.prev;\n                    } else {\n                      sibling = textNode.prev;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.prev;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                }\n              }\n              if (isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = false;\n              }\n              if (elementRule.removeEmpty && isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, node)) {\n                if (!node.attributes.map.name && !node.attr('id')) {\n                  tempNode = node.parent;\n                  if (blockElements[node.name]) {\n                    node.empty().remove();\n                  } else {\n                    node.unwrap();\n                  }\n                  node = tempNode;\n                  return;\n                }\n              }\n              if (elementRule.paddEmpty && (isPaddedWithNbsp(node) || isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, node))) {\n                paddEmptyNode(settings, args, blockElements, node);\n              }\n              node = node.parent;\n            }\n          }\n        }, schema);\n        var rootNode = node = new Node$1(args.context || settings.root_name, 11);\n        parser.parse(html);\n        if (validate && invalidChildren.length) {\n          if (!args.context) {\n            fixInvalidChildren(invalidChildren);\n          } else {\n            args.invalid = true;\n          }\n        }\n        if (rootBlockName && (rootNode.name === 'body' || args.isRootContent)) {\n          addRootBlocks();\n        }\n        if (!args.invalid) {\n          for (name in matchedNodes) {\n            list = nodeFilters[name];\n            nodes = matchedNodes[name];\n            fi = nodes.length;\n            while (fi--) {\n              if (!nodes[fi].parent) {\n                nodes.splice(fi, 1);\n              }\n            }\n            for (i = 0, l = list.length; i < l; i++) {\n              list[i](nodes, name, args);\n            }\n          }\n          for (i = 0, l = attributeFilters.length; i < l; i++) {\n            list = attributeFilters[i];\n            if (list.name in matchedAttributes) {\n              nodes = matchedAttributes[list.name];\n              fi = nodes.length;\n              while (fi--) {\n                if (!nodes[fi].parent) {\n                  nodes.splice(fi, 1);\n                }\n              }\n              for (fi = 0, fl = list.callbacks.length; fi < fl; fi++) {\n                list.callbacks[fi](nodes, list.name, args);\n              }\n            }\n          }\n        }\n        return rootNode;\n      };\n      var exports = {\n        schema: schema,\n        addAttributeFilter: addAttributeFilter,\n        getAttributeFilters: getAttributeFilters,\n        addNodeFilter: addNodeFilter,\n        getNodeFilters: getNodeFilters,\n        filterNode: filterNode,\n        parse: parse\n      };\n      register$2(exports, settings);\n      LegacyFilter.register(exports, settings);\n      return exports;\n    }\n\n    var addTempAttr = function (htmlParser, tempAttrs, name) {\n      if (Tools.inArray(tempAttrs, name) === -1) {\n        htmlParser.addAttributeFilter(name, function (nodes, name) {\n          var i = nodes.length;\n          while (i--) {\n            nodes[i].attr(name, null);\n          }\n        });\n        tempAttrs.push(name);\n      }\n    };\n    var postProcess$1 = function (editor, args, content) {\n      if (!args.no_events && editor) {\n        var outArgs = Events.firePostProcess(editor, merge(args, { content: content }));\n        return outArgs.content;\n      } else {\n        return content;\n      }\n    };\n    var getHtmlFromNode = function (dom, node, args) {\n      var html = Zwsp.trim(args.getInner ? node.innerHTML : dom.getOuterHTML(node));\n      return args.selection || isWsPreserveElement(Element.fromDom(node)) ? html : Tools.trim(html);\n    };\n    var parseHtml = function (htmlParser, html, args) {\n      var parserArgs = args.selection ? merge({ forced_root_block: false }, args) : args;\n      var rootNode = htmlParser.parse(html, parserArgs);\n      DomSerializerFilters.trimTrailingBr(rootNode);\n      return rootNode;\n    };\n    var serializeNode = function (settings, schema, node) {\n      var htmlSerializer = HtmlSerializer(settings, schema);\n      return htmlSerializer.serialize(node);\n    };\n    var toHtml = function (editor, settings, schema, rootNode, args) {\n      var content = serializeNode(settings, schema, rootNode);\n      return postProcess$1(editor, args, content);\n    };\n    function DomSerializer (settings, editor) {\n      var dom, schema, htmlParser;\n      var tempAttrs = ['data-mce-selected'];\n      dom = editor && editor.dom ? editor.dom : DOMUtils$1.DOM;\n      schema = editor && editor.schema ? editor.schema : Schema(settings);\n      settings.entity_encoding = settings.entity_encoding || 'named';\n      settings.remove_trailing_brs = 'remove_trailing_brs' in settings ? settings.remove_trailing_brs : true;\n      htmlParser = DomParser(settings, schema);\n      DomSerializerFilters.register(htmlParser, settings, dom);\n      var serialize = function (node, parserArgs) {\n        var args = merge({ format: 'html' }, parserArgs ? parserArgs : {});\n        var targetNode = DomSerializerPreProcess.process(editor, node, args);\n        var html = getHtmlFromNode(dom, targetNode, args);\n        var rootNode = parseHtml(htmlParser, html, args);\n        return args.format === 'tree' ? rootNode : toHtml(editor, settings, schema, rootNode, args);\n      };\n      return {\n        schema: schema,\n        addNodeFilter: htmlParser.addNodeFilter,\n        addAttributeFilter: htmlParser.addAttributeFilter,\n        serialize: serialize,\n        addRules: function (rules) {\n          schema.addValidElements(rules);\n        },\n        setRules: function (rules) {\n          schema.setValidElements(rules);\n        },\n        addTempAttr: curry(addTempAttr, htmlParser, tempAttrs),\n        getTempAttrs: function () {\n          return tempAttrs;\n        }\n      };\n    }\n\n    function DomSerializer$1 (settings, editor) {\n      var domSerializer = DomSerializer(settings, editor);\n      return {\n        schema: domSerializer.schema,\n        addNodeFilter: domSerializer.addNodeFilter,\n        addAttributeFilter: domSerializer.addAttributeFilter,\n        serialize: domSerializer.serialize,\n        addRules: domSerializer.addRules,\n        setRules: domSerializer.setRules,\n        addTempAttr: domSerializer.addTempAttr,\n        getTempAttrs: domSerializer.getTempAttrs\n      };\n    }\n\n    function BookmarkManager(selection) {\n      return {\n        getBookmark: curry(Bookmarks.getBookmark, selection),\n        moveToBookmark: curry(Bookmarks.moveToBookmark, selection)\n      };\n    }\n    (function (BookmarkManager) {\n      BookmarkManager.isBookmarkNode = Bookmarks.isBookmarkNode;\n    }(BookmarkManager || (BookmarkManager = {})));\n    var BookmarkManager$1 = BookmarkManager;\n\n    var isContentEditableFalse$a = NodeType.isContentEditableFalse;\n    var isContentEditableTrue$5 = NodeType.isContentEditableTrue;\n    var getContentEditableRoot$2 = function (root, node) {\n      while (node && node !== root) {\n        if (isContentEditableTrue$5(node) || isContentEditableFalse$a(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var ControlSelection = function (selection, editor) {\n      var dom = editor.dom, each = Tools.each;\n      var selectedElm, selectedElmGhost, resizeHelper, resizeHandles, selectedHandle;\n      var startX, startY, selectedElmX, selectedElmY, startW, startH, ratio, resizeStarted;\n      var width, height;\n      var editableDoc = editor.getDoc(), rootDocument = domGlobals.document;\n      var abs = Math.abs, round = Math.round, rootElement = editor.getBody();\n      var startScrollWidth, startScrollHeight;\n      resizeHandles = {\n        nw: [\n          0,\n          0,\n          -1,\n          -1\n        ],\n        ne: [\n          1,\n          0,\n          1,\n          -1\n        ],\n        se: [\n          1,\n          1,\n          1,\n          1\n        ],\n        sw: [\n          0,\n          1,\n          -1,\n          1\n        ]\n      };\n      var rootClass = '.mce-content-body';\n      editor.contentStyles.push(rootClass + ' div.mce-resizehandle {' + 'position: absolute;' + 'border: 1px solid black;' + 'box-sizing: content-box;' + 'background: #FFF;' + 'width: 7px;' + 'height: 7px;' + 'z-index: 10000' + '}' + rootClass + ' .mce-resizehandle:hover {' + 'background: #000' + '}' + rootClass + ' img[data-mce-selected],' + rootClass + ' hr[data-mce-selected] {' + 'outline: 1px solid black;' + 'resize: none' + '}' + rootClass + ' .mce-clonedresizable {' + 'position: absolute;' + (Env.gecko ? '' : 'outline: 1px dashed black;') + 'opacity: .5;' + 'filter: alpha(opacity=50);' + 'z-index: 10000' + '}' + rootClass + ' .mce-resize-helper {' + 'background: #555;' + 'background: rgba(0,0,0,0.75);' + 'border-radius: 3px;' + 'border: 1px;' + 'color: white;' + 'display: none;' + 'font-family: sans-serif;' + 'font-size: 12px;' + 'white-space: nowrap;' + 'line-height: 14px;' + 'margin: 5px 10px;' + 'padding: 5px;' + 'position: absolute;' + 'z-index: 10001' + '}');\n      var isImage = function (elm) {\n        return elm && (elm.nodeName === 'IMG' || editor.dom.is(elm, 'figure.image'));\n      };\n      var isEventOnImageOutsideRange = function (evt, range) {\n        return isImage(evt.target) && !RangePoint.isXYWithinRange(evt.clientX, evt.clientY, range);\n      };\n      var contextMenuSelectImage = function (evt) {\n        var target = evt.target;\n        if (isEventOnImageOutsideRange(evt, editor.selection.getRng()) && !evt.isDefaultPrevented()) {\n          editor.selection.select(target);\n        }\n      };\n      var getResizeTarget = function (elm) {\n        return editor.dom.is(elm, 'figure.image') ? elm.querySelector('img') : elm;\n      };\n      var isResizable = function (elm) {\n        var selector = editor.settings.object_resizing;\n        if (selector === false || Env.iOS) {\n          return false;\n        }\n        if (typeof selector !== 'string') {\n          selector = 'table,img,figure.image,div';\n        }\n        if (elm.getAttribute('data-mce-resize') === 'false') {\n          return false;\n        }\n        if (elm === editor.getBody()) {\n          return false;\n        }\n        return is$1(Element.fromDom(elm), selector);\n      };\n      var resizeGhostElement = function (e) {\n        var deltaX, deltaY, proportional;\n        var resizeHelperX, resizeHelperY;\n        deltaX = e.screenX - startX;\n        deltaY = e.screenY - startY;\n        width = deltaX * selectedHandle[2] + startW;\n        height = deltaY * selectedHandle[3] + startH;\n        width = width < 5 ? 5 : width;\n        height = height < 5 ? 5 : height;\n        if (isImage(selectedElm) && editor.settings.resize_img_proportional !== false) {\n          proportional = !VK.modifierPressed(e);\n        } else {\n          proportional = VK.modifierPressed(e) || isImage(selectedElm) && selectedHandle[2] * selectedHandle[3] !== 0;\n        }\n        if (proportional) {\n          if (abs(deltaX) > abs(deltaY)) {\n            height = round(width * ratio);\n            width = round(height / ratio);\n          } else {\n            width = round(height / ratio);\n            height = round(width * ratio);\n          }\n        }\n        dom.setStyles(getResizeTarget(selectedElmGhost), {\n          width: width,\n          height: height\n        });\n        resizeHelperX = selectedHandle.startPos.x + deltaX;\n        resizeHelperY = selectedHandle.startPos.y + deltaY;\n        resizeHelperX = resizeHelperX > 0 ? resizeHelperX : 0;\n        resizeHelperY = resizeHelperY > 0 ? resizeHelperY : 0;\n        dom.setStyles(resizeHelper, {\n          left: resizeHelperX,\n          top: resizeHelperY,\n          display: 'block'\n        });\n        resizeHelper.innerHTML = width + ' &times; ' + height;\n        if (selectedHandle[2] < 0 && selectedElmGhost.clientWidth <= width) {\n          dom.setStyle(selectedElmGhost, 'left', selectedElmX + (startW - width));\n        }\n        if (selectedHandle[3] < 0 && selectedElmGhost.clientHeight <= height) {\n          dom.setStyle(selectedElmGhost, 'top', selectedElmY + (startH - height));\n        }\n        deltaX = rootElement.scrollWidth - startScrollWidth;\n        deltaY = rootElement.scrollHeight - startScrollHeight;\n        if (deltaX + deltaY !== 0) {\n          dom.setStyles(resizeHelper, {\n            left: resizeHelperX - deltaX,\n            top: resizeHelperY - deltaY\n          });\n        }\n        if (!resizeStarted) {\n          Events.fireObjectResizeStart(editor, selectedElm, startW, startH);\n          resizeStarted = true;\n        }\n      };\n      var endGhostResize = function () {\n        resizeStarted = false;\n        var setSizeProp = function (name, value) {\n          if (value) {\n            if (selectedElm.style[name] || !editor.schema.isValid(selectedElm.nodeName.toLowerCase(), name)) {\n              dom.setStyle(getResizeTarget(selectedElm), name, value);\n            } else {\n              dom.setAttrib(getResizeTarget(selectedElm), name, value);\n            }\n          }\n        };\n        setSizeProp('width', width);\n        setSizeProp('height', height);\n        dom.unbind(editableDoc, 'mousemove', resizeGhostElement);\n        dom.unbind(editableDoc, 'mouseup', endGhostResize);\n        if (rootDocument !== editableDoc) {\n          dom.unbind(rootDocument, 'mousemove', resizeGhostElement);\n          dom.unbind(rootDocument, 'mouseup', endGhostResize);\n        }\n        dom.remove(selectedElmGhost);\n        dom.remove(resizeHelper);\n        showResizeRect(selectedElm);\n        Events.fireObjectResized(editor, selectedElm, width, height);\n        dom.setAttrib(selectedElm, 'style', dom.getAttrib(selectedElm, 'style'));\n        editor.nodeChanged();\n      };\n      var showResizeRect = function (targetElm) {\n        var position, targetWidth, targetHeight, e, rect;\n        hideResizeRect();\n        unbindResizeHandleEvents();\n        position = dom.getPos(targetElm, rootElement);\n        selectedElmX = position.x;\n        selectedElmY = position.y;\n        rect = targetElm.getBoundingClientRect();\n        targetWidth = rect.width || rect.right - rect.left;\n        targetHeight = rect.height || rect.bottom - rect.top;\n        if (selectedElm !== targetElm) {\n          selectedElm = targetElm;\n          width = height = 0;\n        }\n        e = editor.fire('ObjectSelected', { target: targetElm });\n        if (isResizable(targetElm) && !e.isDefaultPrevented()) {\n          each(resizeHandles, function (handle, name) {\n            var handleElm;\n            var startDrag = function (e) {\n              startX = e.screenX;\n              startY = e.screenY;\n              startW = getResizeTarget(selectedElm).clientWidth;\n              startH = getResizeTarget(selectedElm).clientHeight;\n              ratio = startH / startW;\n              selectedHandle = handle;\n              handle.startPos = {\n                x: targetWidth * handle[0] + selectedElmX,\n                y: targetHeight * handle[1] + selectedElmY\n              };\n              startScrollWidth = rootElement.scrollWidth;\n              startScrollHeight = rootElement.scrollHeight;\n              selectedElmGhost = selectedElm.cloneNode(true);\n              dom.addClass(selectedElmGhost, 'mce-clonedresizable');\n              dom.setAttrib(selectedElmGhost, 'data-mce-bogus', 'all');\n              selectedElmGhost.contentEditable = false;\n              selectedElmGhost.unSelectabe = true;\n              dom.setStyles(selectedElmGhost, {\n                left: selectedElmX,\n                top: selectedElmY,\n                margin: 0\n              });\n              selectedElmGhost.removeAttribute('data-mce-selected');\n              rootElement.appendChild(selectedElmGhost);\n              dom.bind(editableDoc, 'mousemove', resizeGhostElement);\n              dom.bind(editableDoc, 'mouseup', endGhostResize);\n              if (rootDocument !== editableDoc) {\n                dom.bind(rootDocument, 'mousemove', resizeGhostElement);\n                dom.bind(rootDocument, 'mouseup', endGhostResize);\n              }\n              resizeHelper = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-helper',\n                'data-mce-bogus': 'all'\n              }, startW + ' &times; ' + startH);\n            };\n            handleElm = dom.get('mceResizeHandle' + name);\n            if (handleElm) {\n              dom.remove(handleElm);\n            }\n            handleElm = dom.add(rootElement, 'div', {\n              'id': 'mceResizeHandle' + name,\n              'data-mce-bogus': 'all',\n              'class': 'mce-resizehandle',\n              'unselectable': true,\n              'style': 'cursor:' + name + '-resize; margin:0; padding:0'\n            });\n            if (Env.ie === 11) {\n              handleElm.contentEditable = false;\n            }\n            dom.bind(handleElm, 'mousedown', function (e) {\n              e.stopImmediatePropagation();\n              e.preventDefault();\n              startDrag(e);\n            });\n            handle.elm = handleElm;\n            dom.setStyles(handleElm, {\n              left: targetWidth * handle[0] + selectedElmX - handleElm.offsetWidth / 2,\n              top: targetHeight * handle[1] + selectedElmY - handleElm.offsetHeight / 2\n            });\n          });\n        } else {\n          hideResizeRect();\n        }\n        selectedElm.setAttribute('data-mce-selected', '1');\n      };\n      var hideResizeRect = function () {\n        var name, handleElm;\n        unbindResizeHandleEvents();\n        if (selectedElm) {\n          selectedElm.removeAttribute('data-mce-selected');\n        }\n        for (name in resizeHandles) {\n          handleElm = dom.get('mceResizeHandle' + name);\n          if (handleElm) {\n            dom.unbind(handleElm);\n            dom.remove(handleElm);\n          }\n        }\n      };\n      var updateResizeRect = function (e) {\n        var startElm, controlElm;\n        var isChildOrEqual = function (node, parent) {\n          if (node) {\n            do {\n              if (node === parent) {\n                return true;\n              }\n            } while (node = node.parentNode);\n          }\n        };\n        if (resizeStarted || editor.removed) {\n          return;\n        }\n        each(dom.select('img[data-mce-selected],hr[data-mce-selected]'), function (img) {\n          img.removeAttribute('data-mce-selected');\n        });\n        controlElm = e.type === 'mousedown' ? e.target : selection.getNode();\n        controlElm = dom.$(controlElm).closest('table,img,figure.image,hr')[0];\n        if (isChildOrEqual(controlElm, rootElement)) {\n          disableGeckoResize();\n          startElm = selection.getStart(true);\n          if (isChildOrEqual(startElm, controlElm) && isChildOrEqual(selection.getEnd(true), controlElm)) {\n            showResizeRect(controlElm);\n            return;\n          }\n        }\n        hideResizeRect();\n      };\n      var isWithinContentEditableFalse = function (elm) {\n        return isContentEditableFalse$a(getContentEditableRoot$2(editor.getBody(), elm));\n      };\n      var unbindResizeHandleEvents = function () {\n        for (var name in resizeHandles) {\n          var handle = resizeHandles[name];\n          if (handle.elm) {\n            dom.unbind(handle.elm);\n            delete handle.elm;\n          }\n        }\n      };\n      var disableGeckoResize = function () {\n        try {\n          editor.getDoc().execCommand('enableObjectResizing', false, false);\n        } catch (ex) {\n        }\n      };\n      editor.on('init', function () {\n        disableGeckoResize();\n        if (Env.ie && Env.ie >= 11) {\n          editor.on('mousedown click', function (e) {\n            var target = e.target, nodeName = target.nodeName;\n            if (!resizeStarted && /^(TABLE|IMG|HR)$/.test(nodeName) && !isWithinContentEditableFalse(target)) {\n              if (e.button !== 2) {\n                editor.selection.select(target, nodeName === 'TABLE');\n              }\n              if (e.type === 'mousedown') {\n                editor.nodeChanged();\n              }\n            }\n          });\n          editor.dom.bind(rootElement, 'mscontrolselect', function (e) {\n            var delayedSelect = function (node) {\n              Delay.setEditorTimeout(editor, function () {\n                editor.selection.select(node);\n              });\n            };\n            if (isWithinContentEditableFalse(e.target)) {\n              e.preventDefault();\n              delayedSelect(e.target);\n              return;\n            }\n            if (/^(TABLE|IMG|HR)$/.test(e.target.nodeName)) {\n              e.preventDefault();\n              if (e.target.tagName === 'IMG') {\n                delayedSelect(e.target);\n              }\n            }\n          });\n        }\n        var throttledUpdateResizeRect = Delay.throttle(function (e) {\n          if (!editor.composing) {\n            updateResizeRect(e);\n          }\n        });\n        editor.on('nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged', throttledUpdateResizeRect);\n        editor.on('keyup compositionend', function (e) {\n          if (selectedElm && selectedElm.nodeName === 'TABLE') {\n            throttledUpdateResizeRect(e);\n          }\n        });\n        editor.on('hide blur', hideResizeRect);\n        editor.on('contextmenu', contextMenuSelectImage);\n      });\n      editor.on('remove', unbindResizeHandleEvents);\n      var destroy = function () {\n        selectedElm = selectedElmGhost = null;\n      };\n      return {\n        isResizable: isResizable,\n        showResizeRect: showResizeRect,\n        hideResizeRect: hideResizeRect,\n        updateResizeRect: updateResizeRect,\n        destroy: destroy\n      };\n    };\n\n    var hasCeProperty = function (node) {\n      return NodeType.isContentEditableTrue(node) || NodeType.isContentEditableFalse(node);\n    };\n    var findParent$1 = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var findClosestIeRange = function (clientX, clientY, doc) {\n      var element, rng, rects;\n      element = doc.elementFromPoint(clientX, clientY);\n      rng = doc.body.createTextRange();\n      if (!element || element.tagName === 'HTML') {\n        element = doc.body;\n      }\n      rng.moveToElementText(element);\n      rects = Tools.toArray(rng.getClientRects());\n      rects = rects.sort(function (a, b) {\n        a = Math.abs(Math.max(a.top - clientY, a.bottom - clientY));\n        b = Math.abs(Math.max(b.top - clientY, b.bottom - clientY));\n        return a - b;\n      });\n      if (rects.length > 0) {\n        clientY = (rects[0].bottom + rects[0].top) / 2;\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n          return rng;\n        } catch (ex) {\n        }\n      }\n      return null;\n    };\n    var moveOutOfContentEditableFalse = function (rng, rootNode) {\n      var parentElement = rng && rng.parentElement ? rng.parentElement() : null;\n      return NodeType.isContentEditableFalse(findParent$1(parentElement, rootNode, hasCeProperty)) ? null : rng;\n    };\n    var fromPoint$1 = function (clientX, clientY, doc) {\n      var rng, point;\n      var pointDoc = doc;\n      if (pointDoc.caretPositionFromPoint) {\n        point = pointDoc.caretPositionFromPoint(clientX, clientY);\n        if (point) {\n          rng = doc.createRange();\n          rng.setStart(point.offsetNode, point.offset);\n          rng.collapse(true);\n        }\n      } else if (doc.caretRangeFromPoint) {\n        rng = doc.caretRangeFromPoint(clientX, clientY);\n      } else if (pointDoc.body.createTextRange) {\n        rng = pointDoc.body.createTextRange();\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n        } catch (ex) {\n          rng = findClosestIeRange(clientX, clientY, doc);\n        }\n        return moveOutOfContentEditableFalse(rng, doc.body);\n      }\n      return rng;\n    };\n    var CaretRangeFromPoint = { fromPoint: fromPoint$1 };\n\n    var processRanges = function (editor, ranges) {\n      return map(ranges, function (range) {\n        var evt = editor.fire('GetSelectionRange', { range: range });\n        return evt.range !== range ? evt.range : range;\n      });\n    };\n    var EventProcessRanges = { processRanges: processRanges };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || domGlobals.document;\n      var fragment = doc.createDocumentFragment();\n      each(elements, function (element) {\n        fragment.appendChild(element.dom());\n      });\n      return Element.fromDom(fragment);\n    };\n\n    var tableModel = Immutable('element', 'width', 'rows');\n    var tableRow = Immutable('element', 'cells');\n    var cellPosition = Immutable('x', 'y');\n    var getSpan = function (td, key) {\n      var value = parseInt(get(td, key), 10);\n      return isNaN(value) ? 1 : value;\n    };\n    var fillout = function (table, x, y, tr, td) {\n      var rowspan = getSpan(td, 'rowspan');\n      var colspan = getSpan(td, 'colspan');\n      var rows = table.rows();\n      for (var y2 = y; y2 < y + rowspan; y2++) {\n        if (!rows[y2]) {\n          rows[y2] = tableRow(deep(tr), []);\n        }\n        for (var x2 = x; x2 < x + colspan; x2++) {\n          var cells = rows[y2].cells();\n          cells[x2] = y2 === y && x2 === x ? td : shallow(td);\n        }\n      }\n    };\n    var cellExists = function (table, x, y) {\n      var rows = table.rows();\n      var cells = rows[y] ? rows[y].cells() : [];\n      return !!cells[x];\n    };\n    var skipCellsX = function (table, x, y) {\n      while (cellExists(table, x, y)) {\n        x++;\n      }\n      return x;\n    };\n    var getWidth = function (rows) {\n      return foldl(rows, function (acc, row) {\n        return row.cells().length > acc ? row.cells().length : acc;\n      }, 0);\n    };\n    var findElementPos = function (table, element) {\n      var rows = table.rows();\n      for (var y = 0; y < rows.length; y++) {\n        var cells = rows[y].cells();\n        for (var x = 0; x < cells.length; x++) {\n          if (eq(cells[x], element)) {\n            return Option.some(cellPosition(x, y));\n          }\n        }\n      }\n      return Option.none();\n    };\n    var extractRows = function (table, sx, sy, ex, ey) {\n      var newRows = [];\n      var rows = table.rows();\n      for (var y = sy; y <= ey; y++) {\n        var cells = rows[y].cells();\n        var slice = sx < ex ? cells.slice(sx, ex + 1) : cells.slice(ex, sx + 1);\n        newRows.push(tableRow(rows[y].element(), slice));\n      }\n      return newRows;\n    };\n    var subTable = function (table, startPos, endPos) {\n      var sx = startPos.x(), sy = startPos.y();\n      var ex = endPos.x(), ey = endPos.y();\n      var newRows = sy < ey ? extractRows(table, sx, sy, ex, ey) : extractRows(table, sx, ey, ex, sy);\n      return tableModel(table.element(), getWidth(newRows), newRows);\n    };\n    var createDomTable = function (table, rows) {\n      var tableElement = shallow(table.element());\n      var tableBody = Element.fromTag('tbody');\n      append$1(tableBody, rows);\n      append(tableElement, tableBody);\n      return tableElement;\n    };\n    var modelRowsToDomRows = function (table) {\n      return map(table.rows(), function (row) {\n        var cells = map(row.cells(), function (cell) {\n          var td = deep(cell);\n          remove(td, 'colspan');\n          remove(td, 'rowspan');\n          return td;\n        });\n        var tr = shallow(row.element());\n        append$1(tr, cells);\n        return tr;\n      });\n    };\n    var fromDom$1 = function (tableElm) {\n      var table = tableModel(shallow(tableElm), 0, []);\n      each(descendants$1(tableElm, 'tr'), function (tr, y) {\n        each(descendants$1(tr, 'td,th'), function (td, x) {\n          fillout(table, skipCellsX(table, x, y), y, tr, td);\n        });\n      });\n      return tableModel(table.element(), getWidth(table.rows()), table.rows());\n    };\n    var toDom = function (table) {\n      return createDomTable(table, modelRowsToDomRows(table));\n    };\n    var subsection = function (table, startElement, endElement) {\n      return findElementPos(table, startElement).bind(function (startPos) {\n        return findElementPos(table, endElement).map(function (endPos) {\n          return subTable(table, startPos, endPos);\n        });\n      });\n    };\n    var SimpleTableModel = {\n      fromDom: fromDom$1,\n      toDom: toDom,\n      subsection: subsection\n    };\n\n    var findParentListContainer = function (parents) {\n      return find(parents, function (elm) {\n        return name(elm) === 'ul' || name(elm) === 'ol';\n      });\n    };\n    var getFullySelectedListWrappers = function (parents, rng) {\n      return find(parents, function (elm) {\n        return name(elm) === 'li' && hasAllContentsSelected(elm, rng);\n      }).fold(constant([]), function (li) {\n        return findParentListContainer(parents).map(function (listCont) {\n          return [\n            Element.fromTag('li'),\n            Element.fromTag(name(listCont))\n          ];\n        }).getOr([]);\n      });\n    };\n    var wrap$3 = function (innerElm, elms) {\n      var wrapped = foldl(elms, function (acc, elm) {\n        append(elm, acc);\n        return elm;\n      }, innerElm);\n      return elms.length > 0 ? fromElements([wrapped]) : wrapped;\n    };\n    var directListWrappers = function (commonAnchorContainer) {\n      if (isListItem(commonAnchorContainer)) {\n        return parent(commonAnchorContainer).filter(isList).fold(constant([]), function (listElm) {\n          return [\n            commonAnchorContainer,\n            listElm\n          ];\n        });\n      } else {\n        return isList(commonAnchorContainer) ? [commonAnchorContainer] : [];\n      }\n    };\n    var getWrapElements = function (rootNode, rng) {\n      var commonAnchorContainer = Element.fromDom(rng.commonAncestorContainer);\n      var parents = Parents.parentsAndSelf(commonAnchorContainer, rootNode);\n      var wrapElements = filter(parents, function (elm) {\n        return isInline(elm) || isHeading(elm);\n      });\n      var listWrappers = getFullySelectedListWrappers(parents, rng);\n      var allWrappers = wrapElements.concat(listWrappers.length ? listWrappers : directListWrappers(commonAnchorContainer));\n      return map(allWrappers, shallow);\n    };\n    var emptyFragment = function () {\n      return fromElements([]);\n    };\n    var getFragmentFromRange = function (rootNode, rng) {\n      return wrap$3(Element.fromDom(rng.cloneContents()), getWrapElements(rootNode, rng));\n    };\n    var getParentTable = function (rootElm, cell) {\n      return ancestor$1(cell, 'table', curry(eq, rootElm));\n    };\n    var getTableFragment = function (rootNode, selectedTableCells) {\n      return getParentTable(rootNode, selectedTableCells[0]).bind(function (tableElm) {\n        var firstCell = selectedTableCells[0];\n        var lastCell = selectedTableCells[selectedTableCells.length - 1];\n        var fullTableModel = SimpleTableModel.fromDom(tableElm);\n        return SimpleTableModel.subsection(fullTableModel, firstCell, lastCell).map(function (sectionedTableModel) {\n          return fromElements([SimpleTableModel.toDom(sectionedTableModel)]);\n        });\n      }).getOrThunk(emptyFragment);\n    };\n    var getSelectionFragment = function (rootNode, ranges) {\n      return ranges.length > 0 && ranges[0].collapsed ? emptyFragment() : getFragmentFromRange(rootNode, ranges[0]);\n    };\n    var read$4 = function (rootNode, ranges) {\n      var selectedCells = TableCellSelection.getCellsFromElementOrRanges(ranges, rootNode);\n      return selectedCells.length > 0 ? getTableFragment(rootNode, selectedCells) : getSelectionFragment(rootNode, ranges);\n    };\n    var FragmentReader = { read: read$4 };\n\n    var getTextContent = function (editor) {\n      return Option.from(editor.selection.getRng()).map(function (rng) {\n        var bin = editor.dom.add(editor.getBody(), 'div', {\n          'data-mce-bogus': 'all',\n          'style': 'overflow: hidden; opacity: 0;'\n        }, rng.cloneContents());\n        var text = Zwsp.trim(bin.innerText);\n        editor.dom.remove(bin);\n        return text;\n      }).getOr('');\n    };\n    var getHtmlContent = function (editor, args) {\n      var rng = editor.selection.getRng(), tmpElm = editor.dom.create('body');\n      var sel = editor.selection.getSel();\n      var fragment;\n      var ranges = EventProcessRanges.processRanges(editor, MultiRange.getRanges(sel));\n      fragment = args.contextual ? FragmentReader.read(Element.fromDom(editor.getBody()), ranges).dom() : rng.cloneContents();\n      if (fragment) {\n        tmpElm.appendChild(fragment);\n      }\n      return editor.selection.serializer.serialize(tmpElm, args);\n    };\n    var getContent = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      args.get = true;\n      args.format = args.format || 'html';\n      args.selection = true;\n      args = editor.fire('BeforeGetContent', args);\n      if (args.isDefaultPrevented()) {\n        editor.fire('GetContent', args);\n        return args.content;\n      }\n      if (args.format === 'text') {\n        return getTextContent(editor);\n      } else {\n        args.getInner = true;\n        var content = getHtmlContent(editor, args);\n        if (args.format === 'tree') {\n          return content;\n        } else {\n          args.content = editor.selection.isCollapsed() ? '' : content;\n          editor.fire('GetContent', args);\n          return args.content;\n        }\n      }\n    };\n    var GetSelectionContent = { getContent: getContent };\n\n    var setupArgs = function (args, content) {\n      return __assign(__assign({ format: 'html' }, args), {\n        set: true,\n        selection: true,\n        content: content\n      });\n    };\n    var cleanContent = function (editor, args) {\n      if (args.format !== 'raw') {\n        var node = editor.parser.parse(args.content, __assign({\n          isRootContent: true,\n          forced_root_block: false\n        }, args));\n        return HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(node);\n      } else {\n        return args.content;\n      }\n    };\n    var setContent = function (editor, content, args) {\n      var contentArgs = setupArgs(args, content);\n      var rng = editor.selection.getRng(), caretNode;\n      var doc = editor.getDoc();\n      var frag, temp;\n      if (!contentArgs.no_events) {\n        contentArgs = editor.fire('BeforeSetContent', contentArgs);\n        if (contentArgs.isDefaultPrevented()) {\n          editor.fire('SetContent', contentArgs);\n          return;\n        }\n      }\n      content = cleanContent(editor, contentArgs);\n      if (rng.insertNode) {\n        content += '<span id=\"__caret\">_</span>';\n        if (rng.startContainer === doc && rng.endContainer === doc) {\n          doc.body.innerHTML = content;\n        } else {\n          rng.deleteContents();\n          if (doc.body.childNodes.length === 0) {\n            doc.body.innerHTML = content;\n          } else {\n            if (rng.createContextualFragment) {\n              rng.insertNode(rng.createContextualFragment(content));\n            } else {\n              frag = doc.createDocumentFragment();\n              temp = doc.createElement('div');\n              frag.appendChild(temp);\n              temp.outerHTML = content;\n              rng.insertNode(frag);\n            }\n          }\n        }\n        caretNode = editor.dom.get('__caret');\n        rng = doc.createRange();\n        rng.setStartBefore(caretNode);\n        rng.setEndBefore(caretNode);\n        editor.selection.setRng(rng);\n        editor.dom.remove('__caret');\n        try {\n          editor.selection.setRng(rng);\n        } catch (ex) {\n        }\n      } else {\n        var anyRng = rng;\n        if (anyRng.item) {\n          doc.execCommand('Delete', false, null);\n          anyRng = editor.selection.getRng();\n        }\n        if (/^\\s+/.test(content)) {\n          anyRng.pasteHTML('<span id=\"__mce_tmp\">_</span>' + content);\n          editor.dom.remove('__mce_tmp');\n        } else {\n          anyRng.pasteHTML(content);\n        }\n      }\n      if (!contentArgs.no_events) {\n        editor.fire('SetContent', contentArgs);\n      }\n    };\n    var SetSelectionContent = { setContent: setContent };\n\n    var getEndpointElement = function (root, rng, start, real, resolve) {\n      var container = start ? rng.startContainer : rng.endContainer;\n      var offset = start ? rng.startOffset : rng.endOffset;\n      return Option.from(container).map(Element.fromDom).map(function (elm) {\n        return !real || !rng.collapsed ? child(elm, resolve(elm, offset)).getOr(elm) : elm;\n      }).bind(function (elm) {\n        return isElement(elm) ? Option.some(elm) : parent(elm);\n      }).map(function (elm) {\n        return elm.dom();\n      }).getOr(root);\n    };\n    var getStart$2 = function (root, rng, real) {\n      return getEndpointElement(root, rng, true, real, function (elm, offset) {\n        return Math.min(childNodesCount(elm), offset);\n      });\n    };\n    var getEnd = function (root, rng, real) {\n      return getEndpointElement(root, rng, false, real, function (elm, offset) {\n        return offset > 0 ? offset - 1 : offset;\n      });\n    };\n    var skipEmptyTextNodes = function (node, forwards) {\n      var orig = node;\n      while (node && NodeType.isText(node) && node.length === 0) {\n        node = forwards ? node.nextSibling : node.previousSibling;\n      }\n      return node || orig;\n    };\n    var getNode$1 = function (root, rng) {\n      var elm, startContainer, endContainer, startOffset, endOffset;\n      if (!rng) {\n        return root;\n      }\n      startContainer = rng.startContainer;\n      endContainer = rng.endContainer;\n      startOffset = rng.startOffset;\n      endOffset = rng.endOffset;\n      elm = rng.commonAncestorContainer;\n      if (!rng.collapsed) {\n        if (startContainer === endContainer) {\n          if (endOffset - startOffset < 2) {\n            if (startContainer.hasChildNodes()) {\n              elm = startContainer.childNodes[startOffset];\n            }\n          }\n        }\n        if (startContainer.nodeType === 3 && endContainer.nodeType === 3) {\n          if (startContainer.length === startOffset) {\n            startContainer = skipEmptyTextNodes(startContainer.nextSibling, true);\n          } else {\n            startContainer = startContainer.parentNode;\n          }\n          if (endOffset === 0) {\n            endContainer = skipEmptyTextNodes(endContainer.previousSibling, false);\n          } else {\n            endContainer = endContainer.parentNode;\n          }\n          if (startContainer && startContainer === endContainer) {\n            return startContainer;\n          }\n        }\n      }\n      if (elm && elm.nodeType === 3) {\n        return elm.parentNode;\n      }\n      return elm;\n    };\n    var getSelectedBlocks = function (dom, rng, startElm, endElm) {\n      var node, root;\n      var selectedBlocks = [];\n      root = dom.getRoot();\n      startElm = dom.getParent(startElm || getStart$2(root, rng, rng.collapsed), dom.isBlock);\n      endElm = dom.getParent(endElm || getEnd(root, rng, rng.collapsed), dom.isBlock);\n      if (startElm && startElm !== root) {\n        selectedBlocks.push(startElm);\n      }\n      if (startElm && endElm && startElm !== endElm) {\n        node = startElm;\n        var walker = new TreeWalker(startElm, root);\n        while ((node = walker.next()) && node !== endElm) {\n          if (dom.isBlock(node)) {\n            selectedBlocks.push(node);\n          }\n        }\n      }\n      if (endElm && startElm !== endElm && endElm !== root) {\n        selectedBlocks.push(endElm);\n      }\n      return selectedBlocks;\n    };\n    var select$1 = function (dom, node, content) {\n      return Option.from(node).map(function (node) {\n        var idx = dom.nodeIndex(node);\n        var rng = dom.createRng();\n        rng.setStart(node.parentNode, idx);\n        rng.setEnd(node.parentNode, idx + 1);\n        if (content) {\n          moveEndPoint$1(dom, rng, node, true);\n          moveEndPoint$1(dom, rng, node, false);\n        }\n        return rng;\n      });\n    };\n\n    var each$j = Tools.each;\n    var isNativeIeSelection = function (rng) {\n      return !!rng.select;\n    };\n    var isAttachedToDom = function (node) {\n      return !!(node && node.ownerDocument) && contains$3(Element.fromDom(node.ownerDocument), Element.fromDom(node));\n    };\n    var isValidRange = function (rng) {\n      if (!rng) {\n        return false;\n      } else if (isNativeIeSelection(rng)) {\n        return true;\n      } else {\n        return isAttachedToDom(rng.startContainer) && isAttachedToDom(rng.endContainer);\n      }\n    };\n    var Selection$1 = function (dom, win, serializer, editor) {\n      var bookmarkManager, controlSelection;\n      var selectedRange, explicitRange, selectorChangedData;\n      var setCursorLocation = function (node, offset) {\n        var rng = dom.createRng();\n        if (!node) {\n          moveEndPoint$1(dom, rng, editor.getBody(), true);\n          setRng(rng);\n        } else {\n          rng.setStart(node, offset);\n          rng.setEnd(node, offset);\n          setRng(rng);\n          collapse(false);\n        }\n      };\n      var getContent = function (args) {\n        return GetSelectionContent.getContent(editor, args);\n      };\n      var setContent = function (content, args) {\n        return SetSelectionContent.setContent(editor, content, args);\n      };\n      var getStart = function (real) {\n        return getStart$2(editor.getBody(), getRng(), real);\n      };\n      var getEnd$1 = function (real) {\n        return getEnd(editor.getBody(), getRng(), real);\n      };\n      var getBookmark = function (type, normalized) {\n        return bookmarkManager.getBookmark(type, normalized);\n      };\n      var moveToBookmark = function (bookmark) {\n        return bookmarkManager.moveToBookmark(bookmark);\n      };\n      var select = function (node, content) {\n        select$1(dom, node, content).each(setRng);\n        return node;\n      };\n      var isCollapsed = function () {\n        var rng = getRng(), sel = getSel();\n        if (!rng || rng.item) {\n          return false;\n        }\n        if (rng.compareEndPoints) {\n          return rng.compareEndPoints('StartToEnd', rng) === 0;\n        }\n        return !sel || rng.collapsed;\n      };\n      var collapse = function (toStart) {\n        var rng = getRng();\n        rng.collapse(!!toStart);\n        setRng(rng);\n      };\n      var getSel = function () {\n        return win.getSelection ? win.getSelection() : win.document.selection;\n      };\n      var getRng = function () {\n        var selection, rng, elm, doc;\n        var tryCompareBoundaryPoints = function (how, sourceRange, destinationRange) {\n          try {\n            return sourceRange.compareBoundaryPoints(how, destinationRange);\n          } catch (ex) {\n            return -1;\n          }\n        };\n        if (!win) {\n          return null;\n        }\n        doc = win.document;\n        if (typeof doc === 'undefined' || doc === null) {\n          return null;\n        }\n        if (editor.bookmark !== undefined && EditorFocus.hasFocus(editor) === false) {\n          var bookmark = SelectionBookmark.getRng(editor);\n          if (bookmark.isSome()) {\n            return bookmark.map(function (r) {\n              return EventProcessRanges.processRanges(editor, [r])[0];\n            }).getOr(doc.createRange());\n          }\n        }\n        try {\n          if ((selection = getSel()) && !NodeType.isRestrictedNode(selection.anchorNode)) {\n            if (selection.rangeCount > 0) {\n              rng = selection.getRangeAt(0);\n            } else {\n              rng = selection.createRange ? selection.createRange() : doc.createRange();\n            }\n          }\n        } catch (ex) {\n        }\n        rng = EventProcessRanges.processRanges(editor, [rng])[0];\n        if (!rng) {\n          rng = doc.createRange ? doc.createRange() : doc.body.createTextRange();\n        }\n        if (rng.setStart && rng.startContainer.nodeType === 9 && rng.collapsed) {\n          elm = dom.getRoot();\n          rng.setStart(elm, 0);\n          rng.setEnd(elm, 0);\n        }\n        if (selectedRange && explicitRange) {\n          if (tryCompareBoundaryPoints(rng.START_TO_START, rng, selectedRange) === 0 && tryCompareBoundaryPoints(rng.END_TO_END, rng, selectedRange) === 0) {\n            rng = explicitRange;\n          } else {\n            selectedRange = null;\n            explicitRange = null;\n          }\n        }\n        return rng;\n      };\n      var setRng = function (rng, forward) {\n        var sel, node, evt;\n        if (!isValidRange(rng)) {\n          return;\n        }\n        var ieRange = isNativeIeSelection(rng) ? rng : null;\n        if (ieRange) {\n          explicitRange = null;\n          try {\n            ieRange.select();\n          } catch (ex) {\n          }\n          return;\n        }\n        sel = getSel();\n        evt = editor.fire('SetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n        rng = evt.range;\n        if (sel) {\n          explicitRange = rng;\n          try {\n            sel.removeAllRanges();\n            sel.addRange(rng);\n          } catch (ex) {\n          }\n          if (forward === false && sel.extend) {\n            sel.collapse(rng.endContainer, rng.endOffset);\n            sel.extend(rng.startContainer, rng.startOffset);\n          }\n          selectedRange = sel.rangeCount > 0 ? sel.getRangeAt(0) : null;\n        }\n        if (!rng.collapsed && rng.startContainer === rng.endContainer && sel.setBaseAndExtent && !Env.ie) {\n          if (rng.endOffset - rng.startOffset < 2) {\n            if (rng.startContainer.hasChildNodes()) {\n              node = rng.startContainer.childNodes[rng.startOffset];\n              if (node && node.tagName === 'IMG') {\n                sel.setBaseAndExtent(rng.startContainer, rng.startOffset, rng.endContainer, rng.endOffset);\n                if (sel.anchorNode !== rng.startContainer || sel.focusNode !== rng.endContainer) {\n                  sel.setBaseAndExtent(node, 0, node, 1);\n                }\n              }\n            }\n          }\n        }\n        editor.fire('AfterSetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n      };\n      var setNode = function (elm) {\n        setContent(dom.getOuterHTML(elm));\n        return elm;\n      };\n      var getNode = function () {\n        return getNode$1(editor.getBody(), getRng());\n      };\n      var getSelectedBlocks$1 = function (startElm, endElm) {\n        return getSelectedBlocks(dom, getRng(), startElm, endElm);\n      };\n      var isForward = function () {\n        var sel = getSel();\n        var anchorRange, focusRange;\n        if (!sel || !sel.anchorNode || !sel.focusNode) {\n          return true;\n        }\n        anchorRange = dom.createRng();\n        anchorRange.setStart(sel.anchorNode, sel.anchorOffset);\n        anchorRange.collapse(true);\n        focusRange = dom.createRng();\n        focusRange.setStart(sel.focusNode, sel.focusOffset);\n        focusRange.collapse(true);\n        return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START, focusRange) <= 0;\n      };\n      var normalize = function () {\n        var rng = getRng();\n        var sel = getSel();\n        if (!MultiRange.hasMultipleRanges(sel) && hasAnyRanges(editor)) {\n          var normRng = NormalizeRange.normalize(dom, rng);\n          normRng.each(function (normRng) {\n            setRng(normRng, isForward());\n          });\n          return normRng.getOr(rng);\n        }\n        return rng;\n      };\n      var selectorChanged = function (selector, callback) {\n        var currentSelectors;\n        if (!selectorChangedData) {\n          selectorChangedData = {};\n          currentSelectors = {};\n          editor.on('NodeChange', function (e) {\n            var node = e.element, parents = dom.getParents(node, null, dom.getRoot()), matchedSelectors = {};\n            each$j(selectorChangedData, function (callbacks, selector) {\n              each$j(parents, function (node) {\n                if (dom.is(node, selector)) {\n                  if (!currentSelectors[selector]) {\n                    each$j(callbacks, function (callback) {\n                      callback(true, {\n                        node: node,\n                        selector: selector,\n                        parents: parents\n                      });\n                    });\n                    currentSelectors[selector] = callbacks;\n                  }\n                  matchedSelectors[selector] = callbacks;\n                  return false;\n                }\n              });\n            });\n            each$j(currentSelectors, function (callbacks, selector) {\n              if (!matchedSelectors[selector]) {\n                delete currentSelectors[selector];\n                each$j(callbacks, function (callback) {\n                  callback(false, {\n                    node: node,\n                    selector: selector,\n                    parents: parents\n                  });\n                });\n              }\n            });\n          });\n        }\n        if (!selectorChangedData[selector]) {\n          selectorChangedData[selector] = [];\n        }\n        selectorChangedData[selector].push(callback);\n        return exports;\n      };\n      var getScrollContainer = function () {\n        var scrollContainer;\n        var node = dom.getRoot();\n        while (node && node.nodeName !== 'BODY') {\n          if (node.scrollHeight > node.clientHeight) {\n            scrollContainer = node;\n            break;\n          }\n          node = node.parentNode;\n        }\n        return scrollContainer;\n      };\n      var scrollIntoView = function (elm, alignToTop) {\n        return ScrollIntoView.scrollElementIntoView(editor, elm, alignToTop);\n      };\n      var placeCaretAt = function (clientX, clientY) {\n        return setRng(CaretRangeFromPoint.fromPoint(clientX, clientY, editor.getDoc()));\n      };\n      var getBoundingClientRect = function () {\n        var rng = getRng();\n        return rng.collapsed ? CaretPosition$1.fromRangeStart(rng).getClientRects()[0] : rng.getBoundingClientRect();\n      };\n      var destroy = function () {\n        win = selectedRange = explicitRange = null;\n        controlSelection.destroy();\n      };\n      var exports = {\n        bookmarkManager: null,\n        controlSelection: null,\n        dom: dom,\n        win: win,\n        serializer: serializer,\n        editor: editor,\n        collapse: collapse,\n        setCursorLocation: setCursorLocation,\n        getContent: getContent,\n        setContent: setContent,\n        getBookmark: getBookmark,\n        moveToBookmark: moveToBookmark,\n        select: select,\n        isCollapsed: isCollapsed,\n        isForward: isForward,\n        setNode: setNode,\n        getNode: getNode,\n        getSel: getSel,\n        setRng: setRng,\n        getRng: getRng,\n        getStart: getStart,\n        getEnd: getEnd$1,\n        getSelectedBlocks: getSelectedBlocks$1,\n        normalize: normalize,\n        selectorChanged: selectorChanged,\n        getScrollContainer: getScrollContainer,\n        scrollIntoView: scrollIntoView,\n        placeCaretAt: placeCaretAt,\n        getBoundingClientRect: getBoundingClientRect,\n        destroy: destroy\n      };\n      bookmarkManager = BookmarkManager$1(exports);\n      controlSelection = ControlSelection(exports, editor);\n      exports.bookmarkManager = bookmarkManager;\n      exports.controlSelection = controlSelection;\n      return exports;\n    };\n\n    var BreakType;\n    (function (BreakType) {\n      BreakType[BreakType['Br'] = 0] = 'Br';\n      BreakType[BreakType['Block'] = 1] = 'Block';\n      BreakType[BreakType['Wrap'] = 2] = 'Wrap';\n      BreakType[BreakType['Eol'] = 3] = 'Eol';\n    }(BreakType || (BreakType = {})));\n    var flip = function (direction, positions) {\n      return direction === HDirection.Backwards ? positions.reverse() : positions;\n    };\n    var walk$3 = function (direction, caretWalker, pos) {\n      return direction === HDirection.Forwards ? caretWalker.next(pos) : caretWalker.prev(pos);\n    };\n    var getBreakType = function (scope, direction, currentPos, nextPos) {\n      if (NodeType.isBr(nextPos.getNode(direction === HDirection.Forwards))) {\n        return BreakType.Br;\n      } else if (isInSameBlock(currentPos, nextPos) === false) {\n        return BreakType.Block;\n      } else {\n        return BreakType.Wrap;\n      }\n    };\n    var getPositionsUntil = function (predicate, direction, scope, start) {\n      var caretWalker = CaretWalker(scope);\n      var currentPos = start, nextPos;\n      var positions = [];\n      while (currentPos) {\n        nextPos = walk$3(direction, caretWalker, currentPos);\n        if (!nextPos) {\n          break;\n        }\n        if (NodeType.isBr(nextPos.getNode(false))) {\n          if (direction === HDirection.Forwards) {\n            return {\n              positions: flip(direction, positions).concat([nextPos]),\n              breakType: BreakType.Br,\n              breakAt: Option.some(nextPos)\n            };\n          } else {\n            return {\n              positions: flip(direction, positions),\n              breakType: BreakType.Br,\n              breakAt: Option.some(nextPos)\n            };\n          }\n        }\n        if (!nextPos.isVisible()) {\n          currentPos = nextPos;\n          continue;\n        }\n        if (predicate(currentPos, nextPos)) {\n          var breakType = getBreakType(scope, direction, currentPos, nextPos);\n          return {\n            positions: flip(direction, positions),\n            breakType: breakType,\n            breakAt: Option.some(nextPos)\n          };\n        }\n        positions.push(nextPos);\n        currentPos = nextPos;\n      }\n      return {\n        positions: flip(direction, positions),\n        breakType: BreakType.Eol,\n        breakAt: Option.none()\n      };\n    };\n    var getAdjacentLinePositions = function (direction, getPositionsUntilBreak, scope, start) {\n      return getPositionsUntilBreak(scope, start).breakAt.map(function (pos) {\n        var positions = getPositionsUntilBreak(scope, pos).positions;\n        return direction === HDirection.Backwards ? positions.concat(pos) : [pos].concat(positions);\n      }).getOr([]);\n    };\n    var findClosestHorizontalPositionFromPoint = function (positions, x) {\n      return foldl(positions, function (acc, newPos) {\n        return acc.fold(function () {\n          return Option.some(newPos);\n        }, function (lastPos) {\n          return lift2(head(lastPos.getClientRects()), head(newPos.getClientRects()), function (lastRect, newRect) {\n            var lastDist = Math.abs(x - lastRect.left);\n            var newDist = Math.abs(x - newRect.left);\n            return newDist <= lastDist ? newPos : lastPos;\n          }).or(acc);\n        });\n      }, Option.none());\n    };\n    var findClosestHorizontalPosition = function (positions, pos) {\n      return head(pos.getClientRects()).bind(function (targetRect) {\n        return findClosestHorizontalPositionFromPoint(positions, targetRect.left);\n      });\n    };\n    var getPositionsUntilPreviousLine = curry(getPositionsUntil, CaretPosition.isAbove, -1);\n    var getPositionsUntilNextLine = curry(getPositionsUntil, CaretPosition.isBelow, 1);\n    var isAtFirstLine = function (scope, pos) {\n      return getPositionsUntilPreviousLine(scope, pos).breakAt.isNone();\n    };\n    var isAtLastLine = function (scope, pos) {\n      return getPositionsUntilNextLine(scope, pos).breakAt.isNone();\n    };\n    var getPositionsAbove = curry(getAdjacentLinePositions, -1, getPositionsUntilPreviousLine);\n    var getPositionsBelow = curry(getAdjacentLinePositions, 1, getPositionsUntilNextLine);\n    var getFirstLinePositions = function (scope) {\n      return CaretFinder.firstPositionIn(scope).map(function (pos) {\n        return [pos].concat(getPositionsUntilNextLine(scope, pos).positions);\n      }).getOr([]);\n    };\n    var getLastLinePositions = function (scope) {\n      return CaretFinder.lastPositionIn(scope).map(function (pos) {\n        return getPositionsUntilPreviousLine(scope, pos).positions.concat(pos);\n      }).getOr([]);\n    };\n\n    var isContentEditableFalse$b = NodeType.isContentEditableFalse;\n    var getSelectedNode$1 = getSelectedNode;\n    var moveToCeFalseHorizontally = function (direction, editor, getNextPosFn, range) {\n      var forwards = direction === HDirection.Forwards;\n      var isBeforeContentEditableFalseFn = forwards ? isBeforeContentEditableFalse : isAfterContentEditableFalse;\n      if (!range.collapsed) {\n        var node = getSelectedNode$1(range);\n        if (isContentEditableFalse$b(node)) {\n          return showCaret(direction, editor, node, direction === HDirection.Backwards, true);\n        }\n      }\n      var rangeIsInContainerBlock = isRangeInCaretContainerBlock(range);\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      if (isBeforeContentEditableFalseFn(caretPosition)) {\n        return selectNode(editor, caretPosition.getNode(!forwards));\n      }\n      var nextCaretPosition = InlineUtils.normalizePosition(forwards, getNextPosFn(caretPosition));\n      if (!nextCaretPosition) {\n        if (rangeIsInContainerBlock) {\n          return range;\n        }\n        return null;\n      }\n      if (isBeforeContentEditableFalseFn(nextCaretPosition)) {\n        return showCaret(direction, editor, nextCaretPosition.getNode(!forwards), forwards, true);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeContentEditableFalseFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return showCaret(direction, editor, peekCaretPosition.getNode(!forwards), forwards, true);\n        }\n      }\n      if (rangeIsInContainerBlock) {\n        return renderRangeCaret(editor, nextCaretPosition.toRange(), true);\n      }\n      return null;\n    };\n    var moveToCeFalseVertically = function (direction, editor, walkerFn, range) {\n      var caretPosition, linePositions, nextLinePositions;\n      var closestNextLineRect, caretClientRect, clientX;\n      var dist1, dist2, contentEditableFalseNode;\n      contentEditableFalseNode = getSelectedNode$1(range);\n      caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      linePositions = walkerFn(editor.getBody(), isAboveLine(1), caretPosition);\n      nextLinePositions = filter(linePositions, isLine(1));\n      caretClientRect = ArrUtils.last(caretPosition.getClientRects());\n      if (isBeforeContentEditableFalse(caretPosition) || isBeforeTable(caretPosition)) {\n        contentEditableFalseNode = caretPosition.getNode();\n      }\n      if (isAfterContentEditableFalse(caretPosition) || isAfterTable(caretPosition)) {\n        contentEditableFalseNode = caretPosition.getNode(true);\n      }\n      if (!caretClientRect) {\n        return null;\n      }\n      clientX = caretClientRect.left;\n      closestNextLineRect = findClosestClientRect(nextLinePositions, clientX);\n      if (closestNextLineRect) {\n        if (isContentEditableFalse$b(closestNextLineRect.node)) {\n          dist1 = Math.abs(clientX - closestNextLineRect.left);\n          dist2 = Math.abs(clientX - closestNextLineRect.right);\n          return showCaret(direction, editor, closestNextLineRect.node, dist1 < dist2, true);\n        }\n      }\n      if (contentEditableFalseNode) {\n        var caretPositions = positionsUntil(direction, editor.getBody(), isAboveLine(1), contentEditableFalseNode);\n        closestNextLineRect = findClosestClientRect(filter(caretPositions, isLine(1)), clientX);\n        if (closestNextLineRect) {\n          return renderRangeCaret(editor, closestNextLineRect.position.toRange(), true);\n        }\n        closestNextLineRect = ArrUtils.last(filter(caretPositions, isLine(0)));\n        if (closestNextLineRect) {\n          return renderRangeCaret(editor, closestNextLineRect.position.toRange(), true);\n        }\n      }\n    };\n    var createTextBlock = function (editor) {\n      var textBlock = editor.dom.create(Settings.getForcedRootBlock(editor));\n      if (!Env.ie || Env.ie >= 11) {\n        textBlock.innerHTML = '<br data-mce-bogus=\"1\">';\n      }\n      return textBlock;\n    };\n    var exitPreBlock = function (editor, direction, range) {\n      var pre, caretPos, newBlock;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.next);\n      var getPrevVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.prev);\n      if (range.collapsed && editor.settings.forced_root_block) {\n        pre = editor.dom.getParent(range.startContainer, 'PRE');\n        if (!pre) {\n          return;\n        }\n        if (direction === 1) {\n          caretPos = getNextVisualCaretPosition(CaretPosition$1.fromRangeStart(range));\n        } else {\n          caretPos = getPrevVisualCaretPosition(CaretPosition$1.fromRangeStart(range));\n        }\n        if (!caretPos) {\n          newBlock = createTextBlock(editor);\n          if (direction === 1) {\n            editor.$(pre).after(newBlock);\n          } else {\n            editor.$(pre).before(newBlock);\n          }\n          editor.selection.select(newBlock, true);\n          editor.selection.collapse();\n        }\n      }\n    };\n    var getHorizontalRange = function (editor, forward) {\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.next);\n      var getPrevVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.prev);\n      var newRange;\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var getNextPosFn = forward ? getNextVisualCaretPosition : getPrevVisualCaretPosition;\n      var range = editor.selection.getRng();\n      newRange = moveToCeFalseHorizontally(direction, editor, getNextPosFn, range);\n      if (newRange) {\n        return newRange;\n      }\n      newRange = exitPreBlock(editor, direction, range);\n      if (newRange) {\n        return newRange;\n      }\n      return null;\n    };\n    var getVerticalRange = function (editor, down) {\n      var newRange;\n      var direction = down ? 1 : -1;\n      var walkerFn = down ? downUntil : upUntil;\n      var range = editor.selection.getRng();\n      newRange = moveToCeFalseVertically(direction, editor, walkerFn, range);\n      if (newRange) {\n        return newRange;\n      }\n      newRange = exitPreBlock(editor, direction, range);\n      if (newRange) {\n        return newRange;\n      }\n      return null;\n    };\n    var moveH = function (editor, forward) {\n      return function () {\n        var newRng = getHorizontalRange(editor, forward);\n        if (newRng) {\n          moveToRange(editor, newRng);\n          return true;\n        } else {\n          return false;\n        }\n      };\n    };\n    var moveV = function (editor, down) {\n      return function () {\n        var newRng = getVerticalRange(editor, down);\n        if (newRng) {\n          moveToRange(editor, newRng);\n          return true;\n        } else {\n          return false;\n        }\n      };\n    };\n    var isCefPosition = function (forward) {\n      return function (pos) {\n        return forward ? isAfterContentEditableFalse(pos) : isBeforeContentEditableFalse(pos);\n      };\n    };\n    var moveToLineEndPoint = function (editor, forward) {\n      return function () {\n        var from = forward ? CaretPosition$1.fromRangeEnd(editor.selection.getRng()) : CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        var result = forward ? getPositionsUntilNextLine(editor.getBody(), from) : getPositionsUntilPreviousLine(editor.getBody(), from);\n        var to = forward ? last(result.positions) : head(result.positions);\n        return to.filter(isCefPosition(forward)).fold(constant(false), function (pos) {\n          editor.selection.setRng(pos.toRange());\n          return true;\n        });\n      };\n    };\n\n    var deflate = function (rect, delta) {\n      return {\n        left: rect.left - delta,\n        top: rect.top - delta,\n        right: rect.right + delta * 2,\n        bottom: rect.bottom + delta * 2,\n        width: rect.width + delta,\n        height: rect.height + delta\n      };\n    };\n    var getCorners = function (getYAxisValue, tds) {\n      return bind(tds, function (td) {\n        var rect = deflate(clone$1(td.getBoundingClientRect()), -1);\n        return [\n          {\n            x: rect.left,\n            y: getYAxisValue(rect),\n            cell: td\n          },\n          {\n            x: rect.right,\n            y: getYAxisValue(rect),\n            cell: td\n          }\n        ];\n      });\n    };\n    var findClosestCorner = function (corners, x, y) {\n      return foldl(corners, function (acc, newCorner) {\n        return acc.fold(function () {\n          return Option.some(newCorner);\n        }, function (oldCorner) {\n          var oldDist = Math.sqrt(Math.abs(oldCorner.x - x) + Math.abs(oldCorner.y - y));\n          var newDist = Math.sqrt(Math.abs(newCorner.x - x) + Math.abs(newCorner.y - y));\n          return Option.some(newDist < oldDist ? newCorner : oldCorner);\n        });\n      }, Option.none());\n    };\n    var getClosestCell$1 = function (getYAxisValue, isTargetCorner, table, x, y) {\n      var cells = descendants$1(Element.fromDom(table), 'td,th,caption').map(function (e) {\n        return e.dom();\n      });\n      var corners = filter(getCorners(getYAxisValue, cells), function (corner) {\n        return isTargetCorner(corner, y);\n      });\n      return findClosestCorner(corners, x, y).map(function (corner) {\n        return corner.cell;\n      });\n    };\n    var getBottomValue = function (rect) {\n      return rect.bottom;\n    };\n    var getTopValue = function (rect) {\n      return rect.top;\n    };\n    var isAbove$1 = function (corner, y) {\n      return corner.y < y;\n    };\n    var isBelow$1 = function (corner, y) {\n      return corner.y > y;\n    };\n    var getClosestCellAbove = curry(getClosestCell$1, getBottomValue, isAbove$1);\n    var getClosestCellBelow = curry(getClosestCell$1, getTopValue, isBelow$1);\n    var findClosestPositionInAboveCell = function (table, pos) {\n      return head(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellAbove(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getLastLinePositions(cell), pos);\n      });\n    };\n    var findClosestPositionInBelowCell = function (table, pos) {\n      return last(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellBelow(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getFirstLinePositions(cell), pos);\n      });\n    };\n\n    var hasNextBreak = function (getPositionsUntil, scope, lineInfo) {\n      return lineInfo.breakAt.map(function (breakPos) {\n        return getPositionsUntil(scope, breakPos).breakAt.isSome();\n      }).getOr(false);\n    };\n    var startsWithWrapBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Wrap && lineInfo.positions.length === 0;\n    };\n    var startsWithBrBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Br && lineInfo.positions.length === 1;\n    };\n    var isAtTableCellLine = function (getPositionsUntil, scope, pos) {\n      var lineInfo = getPositionsUntil(scope, pos);\n      if (startsWithWrapBreak(lineInfo) || !NodeType.isBr(pos.getNode()) && startsWithBrBreak(lineInfo)) {\n        return !hasNextBreak(getPositionsUntil, scope, lineInfo);\n      } else {\n        return lineInfo.breakAt.isNone();\n      }\n    };\n    var isAtFirstTableCellLine = curry(isAtTableCellLine, getPositionsUntilPreviousLine);\n    var isAtLastTableCellLine = curry(isAtTableCellLine, getPositionsUntilNextLine);\n    var isCaretAtStartOrEndOfTable = function (forward, rng, table) {\n      var caretPos = CaretPosition$1.fromRangeStart(rng);\n      return CaretFinder.positionIn(!forward, table).map(function (pos) {\n        return pos.isEqual(caretPos);\n      }).getOr(false);\n    };\n    var navigateHorizontally = function (editor, forward, table, td) {\n      var rng = editor.selection.getRng();\n      var direction = forward ? 1 : -1;\n      if (isFakeCaretTableBrowser() && isCaretAtStartOrEndOfTable(forward, rng, table)) {\n        var newRng = showCaret(direction, editor, table, !forward, true);\n        moveToRange(editor, newRng);\n        return true;\n      }\n      return false;\n    };\n    var getClosestAbovePosition = function (root, table, start) {\n      return findClosestPositionInAboveCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsAbove(root, CaretPosition$1.before(table)), rect.left);\n        });\n      }).getOr(CaretPosition$1.before(table));\n    };\n    var getClosestBelowPosition = function (root, table, start) {\n      return findClosestPositionInBelowCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsBelow(root, CaretPosition$1.after(table)), rect.left);\n        });\n      }).getOr(CaretPosition$1.after(table));\n    };\n    var getTable = function (previous, pos) {\n      var node = pos.getNode(previous);\n      return NodeType.isElement(node) && node.nodeName === 'TABLE' ? Option.some(node) : Option.none();\n    };\n    var renderBlock = function (down, editor, table, pos) {\n      var forcedRootBlock = Settings.getForcedRootBlock(editor);\n      if (forcedRootBlock) {\n        editor.undoManager.transact(function () {\n          var element = Element.fromTag(forcedRootBlock);\n          setAll(element, Settings.getForcedRootBlockAttrs(editor));\n          append(element, Element.fromTag('br'));\n          if (down) {\n            after(Element.fromDom(table), element);\n          } else {\n            before(Element.fromDom(table), element);\n          }\n          var rng = editor.dom.createRng();\n          rng.setStart(element.dom(), 0);\n          rng.setEnd(element.dom(), 0);\n          moveToRange(editor, rng);\n        });\n      } else {\n        moveToRange(editor, pos.toRange());\n      }\n    };\n    var moveCaret = function (editor, down, pos) {\n      var table = down ? getTable(true, pos) : getTable(false, pos);\n      var last = down === false;\n      table.fold(function () {\n        return moveToRange(editor, pos.toRange());\n      }, function (table) {\n        return CaretFinder.positionIn(last, editor.getBody()).filter(function (lastPos) {\n          return lastPos.isEqual(pos);\n        }).fold(function () {\n          return moveToRange(editor, pos.toRange());\n        }, function (_) {\n          return renderBlock(down, editor, table, pos);\n        });\n      });\n    };\n    var navigateVertically = function (editor, down, table, td) {\n      var rng = editor.selection.getRng();\n      var pos = CaretPosition$1.fromRangeStart(rng);\n      var root = editor.getBody();\n      if (!down && isAtFirstTableCellLine(td, pos)) {\n        var newPos = getClosestAbovePosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else if (down && isAtLastTableCellLine(td, pos)) {\n        var newPos = getClosestBelowPosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var moveH$1 = function (editor, forward) {\n      return function () {\n        return Option.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(function (td) {\n          return Option.from(editor.dom.getParent(td, 'table')).map(function (table) {\n            return navigateHorizontally(editor, forward, table);\n          });\n        }).getOr(false);\n      };\n    };\n    var moveV$1 = function (editor, forward) {\n      return function () {\n        return Option.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(function (td) {\n          return Option.from(editor.dom.getParent(td, 'table')).map(function (table) {\n            return navigateVertically(editor, forward, table, td);\n          });\n        }).getOr(false);\n      };\n    };\n\n    var isTarget = function (node) {\n      return contains(['figcaption'], name(node));\n    };\n    var rangeBefore = function (target) {\n      var rng = domGlobals.document.createRange();\n      rng.setStartBefore(target.dom());\n      rng.setEndBefore(target.dom());\n      return rng;\n    };\n    var insertElement = function (root, elm, forward) {\n      if (forward) {\n        append(root, elm);\n      } else {\n        prepend(root, elm);\n      }\n    };\n    var insertBr = function (root, forward) {\n      var br = Element.fromTag('br');\n      insertElement(root, br, forward);\n      return rangeBefore(br);\n    };\n    var insertBlock$1 = function (root, forward, blockName, attrs) {\n      var block = Element.fromTag(blockName);\n      var br = Element.fromTag('br');\n      setAll(block, attrs);\n      append(block, br);\n      insertElement(root, block, forward);\n      return rangeBefore(br);\n    };\n    var insertEmptyLine = function (root, rootBlockName, attrs, forward) {\n      if (rootBlockName === '') {\n        return insertBr(root, forward);\n      } else {\n        return insertBlock$1(root, forward, rootBlockName, attrs);\n      }\n    };\n    var getClosestTargetBlock = function (pos, root) {\n      var isRoot = curry(eq, root);\n      return closest(Element.fromDom(pos.container()), isBlock, isRoot).filter(isTarget);\n    };\n    var isAtFirstOrLastLine = function (root, forward, pos) {\n      return forward ? isAtLastLine(root.dom(), pos) : isAtFirstLine(root.dom(), pos);\n    };\n    var moveCaretToNewEmptyLine = function (editor, forward) {\n      var root = Element.fromDom(editor.getBody());\n      var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var rootBlock = Settings.getForcedRootBlock(editor);\n      var rootBlockAttrs = Settings.getForcedRootBlockAttrs(editor);\n      return getClosestTargetBlock(pos, root).exists(function () {\n        if (isAtFirstOrLastLine(root, forward, pos)) {\n          var rng = insertEmptyLine(root, rootBlock, rootBlockAttrs, forward);\n          editor.selection.setRng(rng);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var moveV$2 = function (editor, forward) {\n      return function () {\n        if (editor.selection.isCollapsed()) {\n          return moveCaretToNewEmptyLine(editor, forward);\n        } else {\n          return false;\n        }\n      };\n    };\n\n    var defaultPatterns = function (patterns) {\n      return map(patterns, function (pattern) {\n        return merge({\n          shiftKey: false,\n          altKey: false,\n          ctrlKey: false,\n          metaKey: false,\n          keyCode: 0,\n          action: noop\n        }, pattern);\n      });\n    };\n    var matchesEvent = function (pattern, evt) {\n      return evt.keyCode === pattern.keyCode && evt.shiftKey === pattern.shiftKey && evt.altKey === pattern.altKey && evt.ctrlKey === pattern.ctrlKey && evt.metaKey === pattern.metaKey;\n    };\n    var match$1 = function (patterns, evt) {\n      return bind(defaultPatterns(patterns), function (pattern) {\n        return matchesEvent(pattern, evt) ? [pattern] : [];\n      });\n    };\n    var action = function (f) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      var args = Array.prototype.slice.call(arguments, 1);\n      return function () {\n        return f.apply(null, args);\n      };\n    };\n    var execute = function (patterns, evt) {\n      return find(match$1(patterns, evt), function (pattern) {\n        return pattern.action();\n      });\n    };\n    var MatchKeys = {\n      match: match$1,\n      action: action,\n      execute: execute\n    };\n\n    var executeKeydownOverride = function (editor, caret, evt) {\n      var os = PlatformDetection$1.detect().os;\n      MatchKeys.execute([\n        {\n          keyCode: VK.RIGHT,\n          action: moveH(editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: moveH(editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: moveV(editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: moveV(editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: moveH$1(editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: moveH$1(editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: moveV$1(editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: moveV$1(editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: BoundarySelection.move(editor, caret, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: BoundarySelection.move(editor, caret, false)\n        },\n        {\n          keyCode: VK.RIGHT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: BoundarySelection.moveNextWord(editor, caret)\n        },\n        {\n          keyCode: VK.LEFT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: BoundarySelection.movePrevWord(editor, caret)\n        },\n        {\n          keyCode: VK.UP,\n          action: moveV$2(editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: moveV$2(editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$7 = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride(editor, caret, evt);\n        }\n      });\n    };\n    var ArrowKeys = { setup: setup$7 };\n\n    var executeKeydownOverride$1 = function (editor, caret, evt) {\n      MatchKeys.execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(CefDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(CefDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(CefBoundaryDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(CefBoundaryDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(InlineBoundaryDelete.backspaceDelete, editor, caret, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(InlineBoundaryDelete.backspaceDelete, editor, caret, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(TableDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(TableDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(BlockRangeDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(BlockRangeDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(BlockBoundaryDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(BlockBoundaryDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(InlineFormatDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(InlineFormatDelete.backspaceDelete, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var executeKeyupOverride = function (editor, evt) {\n      MatchKeys.execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(CefDelete.paddEmptyElement, editor)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(CefDelete.paddEmptyElement, editor)\n        }\n      ], evt);\n    };\n    var setup$8 = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$1(editor, caret, evt);\n        }\n      });\n      editor.on('keyup', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeyupOverride(editor, evt);\n        }\n      });\n    };\n    var DeleteBackspaceKeys = { setup: setup$8 };\n\n    var firstNonWhiteSpaceNodeSibling = function (node) {\n      while (node) {\n        if (node.nodeType === 1 || node.nodeType === 3 && node.data && /[\\r\\n\\s]/.test(node.data)) {\n          return node;\n        }\n        node = node.nextSibling;\n      }\n    };\n    var moveToCaretPosition = function (editor, root) {\n      var walker, node, rng, lastNode = root, tempElm;\n      var dom = editor.dom;\n      var moveCaretBeforeOnEnterElementsMap = editor.schema.getMoveCaretBeforeOnEnterElements();\n      if (!root) {\n        return;\n      }\n      if (/^(LI|DT|DD)$/.test(root.nodeName)) {\n        var firstChild = firstNonWhiteSpaceNodeSibling(root.firstChild);\n        if (firstChild && /^(UL|OL|DL)$/.test(firstChild.nodeName)) {\n          root.insertBefore(dom.doc.createTextNode('\\xA0'), root.firstChild);\n        }\n      }\n      rng = dom.createRng();\n      root.normalize();\n      if (root.hasChildNodes()) {\n        walker = new TreeWalker(root, root);\n        while (node = walker.current()) {\n          if (NodeType.isText(node)) {\n            rng.setStart(node, 0);\n            rng.setEnd(node, 0);\n            break;\n          }\n          if (moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]) {\n            rng.setStartBefore(node);\n            rng.setEndBefore(node);\n            break;\n          }\n          lastNode = node;\n          node = walker.next();\n        }\n        if (!node) {\n          rng.setStart(lastNode, 0);\n          rng.setEnd(lastNode, 0);\n        }\n      } else {\n        if (NodeType.isBr(root)) {\n          if (root.nextSibling && dom.isBlock(root.nextSibling)) {\n            rng.setStartBefore(root);\n            rng.setEndBefore(root);\n          } else {\n            rng.setStartAfter(root);\n            rng.setEndAfter(root);\n          }\n        } else {\n          rng.setStart(root, 0);\n          rng.setEnd(root, 0);\n        }\n      }\n      editor.selection.setRng(rng);\n      dom.remove(tempElm);\n      editor.selection.scrollIntoView(root);\n    };\n    var getEditableRoot = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var getParentBlock$2 = function (editor) {\n      return Option.from(editor.dom.getParent(editor.selection.getStart(true), editor.dom.isBlock));\n    };\n    var getParentBlockName = function (editor) {\n      return getParentBlock$2(editor).fold(constant(''), function (parentBlock) {\n        return parentBlock.nodeName.toUpperCase();\n      });\n    };\n    var isListItemParentBlock = function (editor) {\n      return getParentBlock$2(editor).filter(function (elm) {\n        return isListItem(Element.fromDom(elm));\n      }).isSome();\n    };\n    var NewLineUtils = {\n      moveToCaretPosition: moveToCaretPosition,\n      getEditableRoot: getEditableRoot,\n      getParentBlock: getParentBlock$2,\n      getParentBlockName: getParentBlockName,\n      isListItemParentBlock: isListItemParentBlock\n    };\n\n    var hasFirstChild = function (elm, name) {\n      return elm.firstChild && elm.firstChild.nodeName === name;\n    };\n    var hasParent$1 = function (elm, parentName) {\n      return elm && elm.parentNode && elm.parentNode.nodeName === parentName;\n    };\n    var isListBlock = function (elm) {\n      return elm && /^(OL|UL|LI)$/.test(elm.nodeName);\n    };\n    var isNestedList = function (elm) {\n      return isListBlock(elm) && isListBlock(elm.parentNode);\n    };\n    var getContainerBlock = function (containerBlock) {\n      var containerBlockParent = containerBlock.parentNode;\n      if (/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)) {\n        return containerBlockParent;\n      }\n      return containerBlock;\n    };\n    var isFirstOrLastLi = function (containerBlock, parentBlock, first) {\n      var node = containerBlock[first ? 'firstChild' : 'lastChild'];\n      while (node) {\n        if (NodeType.isElement(node)) {\n          break;\n        }\n        node = node[first ? 'nextSibling' : 'previousSibling'];\n      }\n      return node === parentBlock;\n    };\n    var insert$1 = function (editor, createNewBlock, containerBlock, parentBlock, newBlockName) {\n      var dom = editor.dom;\n      var rng = editor.selection.getRng();\n      if (containerBlock === editor.getBody()) {\n        return;\n      }\n      if (isNestedList(containerBlock)) {\n        newBlockName = 'LI';\n      }\n      var newBlock = newBlockName ? createNewBlock(newBlockName) : dom.create('BR');\n      if (isFirstOrLastLi(containerBlock, parentBlock, true) && isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        if (hasParent$1(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n        } else {\n          dom.replace(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, true)) {\n        if (hasParent$1(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n          newBlock.appendChild(dom.doc.createTextNode(' '));\n          newBlock.appendChild(containerBlock);\n        } else {\n          containerBlock.parentNode.insertBefore(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n      } else {\n        containerBlock = getContainerBlock(containerBlock);\n        var tmpRng = rng.cloneRange();\n        tmpRng.setStartAfter(parentBlock);\n        tmpRng.setEndAfter(containerBlock);\n        var fragment = tmpRng.extractContents();\n        if (newBlockName === 'LI' && hasFirstChild(fragment, 'LI')) {\n          newBlock = fragment.firstChild;\n          dom.insertAfter(fragment, containerBlock);\n        } else {\n          dom.insertAfter(fragment, containerBlock);\n          dom.insertAfter(newBlock, containerBlock);\n        }\n      }\n      dom.remove(parentBlock);\n      NewLineUtils.moveToCaretPosition(editor, newBlock);\n    };\n    var InsertLi = { insert: insert$1 };\n\n    var trimZwsp = function (fragment) {\n      each(descendants(Element.fromDom(fragment), isText), function (text) {\n        var rawNode = text.dom();\n        rawNode.nodeValue = Zwsp.trim(rawNode.nodeValue);\n      });\n    };\n    var isEmptyAnchor = function (dom, elm) {\n      return elm && elm.nodeName === 'A' && dom.isEmpty(elm);\n    };\n    var isTableCell$5 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var emptyBlock = function (elm) {\n      elm.innerHTML = '<br data-mce-bogus=\"1\">';\n    };\n    var containerAndSiblingName = function (container, nodeName) {\n      return container.nodeName === nodeName || container.previousSibling && container.previousSibling.nodeName === nodeName;\n    };\n    var canSplitBlock = function (dom, node) {\n      return node && dom.isBlock(node) && !/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName) && !/^(fixed|absolute)/i.test(node.style.position) && dom.getContentEditable(node) !== 'true';\n    };\n    var trimInlineElementsOnLeftSideOfBlock = function (dom, nonEmptyElementsMap, block) {\n      var node = block;\n      var firstChilds = [];\n      var i;\n      if (!node) {\n        return;\n      }\n      while (node = node.firstChild) {\n        if (dom.isBlock(node)) {\n          return;\n        }\n        if (NodeType.isElement(node) && !nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          firstChilds.push(node);\n        }\n      }\n      i = firstChilds.length;\n      while (i--) {\n        node = firstChilds[i];\n        if (!node.hasChildNodes() || node.firstChild === node.lastChild && node.firstChild.nodeValue === '') {\n          dom.remove(node);\n        } else {\n          if (isEmptyAnchor(dom, node)) {\n            dom.remove(node);\n          }\n        }\n      }\n    };\n    var normalizeZwspOffset = function (start, container, offset) {\n      if (NodeType.isText(container) === false) {\n        return offset;\n      } else if (start) {\n        return offset === 1 && container.data.charAt(offset - 1) === Zwsp.ZWSP ? 0 : offset;\n      } else {\n        return offset === container.data.length - 1 && container.data.charAt(offset) === Zwsp.ZWSP ? container.data.length : offset;\n      }\n    };\n    var includeZwspInRange = function (rng) {\n      var newRng = rng.cloneRange();\n      newRng.setStart(rng.startContainer, normalizeZwspOffset(true, rng.startContainer, rng.startOffset));\n      newRng.setEnd(rng.endContainer, normalizeZwspOffset(false, rng.endContainer, rng.endOffset));\n      return newRng;\n    };\n    var trimLeadingLineBreaks = function (node) {\n      do {\n        if (NodeType.isText(node)) {\n          node.nodeValue = node.nodeValue.replace(/^[\\r\\n]+/, '');\n        }\n        node = node.firstChild;\n      } while (node);\n    };\n    var getEditableRoot$1 = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var applyAttributes = function (editor, node, forcedRootBlockAttrs) {\n      Option.from(forcedRootBlockAttrs.style).map(editor.dom.parseStyle).each(function (attrStyles) {\n        var currentStyles = getAllRaw(Element.fromDom(node));\n        var newStyles = __assign(__assign({}, currentStyles), attrStyles);\n        editor.dom.setStyles(node, newStyles);\n      });\n      var attrClassesOpt = Option.from(forcedRootBlockAttrs.class).map(function (attrClasses) {\n        return attrClasses.split(/\\s+/);\n      });\n      var currentClassesOpt = Option.from(node.className).map(function (currentClasses) {\n        return filter(currentClasses.split(/\\s+/), function (clazz) {\n          return clazz !== '';\n        });\n      });\n      lift2(attrClassesOpt, currentClassesOpt, function (attrClasses, currentClasses) {\n        var filteredClasses = filter(currentClasses, function (clazz) {\n          return !contains(attrClasses, clazz);\n        });\n        var newClasses = __spreadArrays(attrClasses, filteredClasses);\n        editor.dom.setAttrib(node, 'class', newClasses.join(' '));\n      });\n      var appliedAttrs = [\n        'style',\n        'class'\n      ];\n      var remainingAttrs = bifilter(forcedRootBlockAttrs, function (_, attrs) {\n        return !contains(appliedAttrs, attrs);\n      }).t;\n      editor.dom.setAttribs(node, remainingAttrs);\n    };\n    var setForcedBlockAttrs = function (editor, node) {\n      var forcedRootBlockName = Settings.getForcedRootBlock(editor);\n      if (forcedRootBlockName && forcedRootBlockName.toLowerCase() === node.tagName.toLowerCase()) {\n        var forcedRootBlockAttrs = Settings.getForcedRootBlockAttrs(editor);\n        applyAttributes(editor, node, forcedRootBlockAttrs);\n      }\n    };\n    var wrapSelfAndSiblingsInDefaultBlock = function (editor, newBlockName, rng, container, offset) {\n      var newBlock, parentBlock, startNode, node, next, rootBlockName;\n      var blockName = newBlockName || 'P';\n      var dom = editor.dom, editableRoot = getEditableRoot$1(dom, container);\n      parentBlock = dom.getParent(container, dom.isBlock);\n      if (!parentBlock || !canSplitBlock(dom, parentBlock)) {\n        parentBlock = parentBlock || editableRoot;\n        if (parentBlock === editor.getBody() || isTableCell$5(parentBlock)) {\n          rootBlockName = parentBlock.nodeName.toLowerCase();\n        } else {\n          rootBlockName = parentBlock.parentNode.nodeName.toLowerCase();\n        }\n        if (!parentBlock.hasChildNodes()) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          parentBlock.appendChild(newBlock);\n          rng.setStart(newBlock, 0);\n          rng.setEnd(newBlock, 0);\n          return newBlock;\n        }\n        node = container;\n        while (node.parentNode !== parentBlock) {\n          node = node.parentNode;\n        }\n        while (node && !dom.isBlock(node)) {\n          startNode = node;\n          node = node.previousSibling;\n        }\n        if (startNode && editor.schema.isValidChild(rootBlockName, blockName.toLowerCase())) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          startNode.parentNode.insertBefore(newBlock, startNode);\n          node = startNode;\n          while (node && !dom.isBlock(node)) {\n            next = node.nextSibling;\n            newBlock.appendChild(node);\n            node = next;\n          }\n          rng.setStart(container, offset);\n          rng.setEnd(container, offset);\n        }\n      }\n      return container;\n    };\n    var addBrToBlockIfNeeded = function (dom, block) {\n      var lastChild;\n      block.normalize();\n      lastChild = block.lastChild;\n      if (!lastChild || /^(left|right)$/gi.test(dom.getStyle(lastChild, 'float', true))) {\n        dom.add(block, 'br');\n      }\n    };\n    var insert$2 = function (editor, evt) {\n      var tmpRng, editableRoot, container, offset, parentBlock, shiftKey;\n      var newBlock, fragment, containerBlock, parentBlockName, containerBlockName, newBlockName, isAfterLastNodeInContainer;\n      var dom = editor.dom;\n      var schema = editor.schema, nonEmptyElementsMap = schema.getNonEmptyElements();\n      var rng = editor.selection.getRng();\n      var createNewBlock = function (name) {\n        var node = container, block, clonedNode, caretNode;\n        var textInlineElements = schema.getTextInlineElements();\n        if (name || parentBlockName === 'TABLE' || parentBlockName === 'HR') {\n          block = dom.create(name || newBlockName);\n        } else {\n          block = parentBlock.cloneNode(false);\n        }\n        caretNode = block;\n        if (Settings.shouldKeepStyles(editor) === false) {\n          dom.setAttrib(block, 'style', null);\n          dom.setAttrib(block, 'class', null);\n        } else {\n          do {\n            if (textInlineElements[node.nodeName]) {\n              if (isCaretNode(node) || Bookmarks.isBookmarkNode(node)) {\n                continue;\n              }\n              clonedNode = node.cloneNode(false);\n              dom.setAttrib(clonedNode, 'id', '');\n              if (block.hasChildNodes()) {\n                clonedNode.appendChild(block.firstChild);\n                block.appendChild(clonedNode);\n              } else {\n                caretNode = clonedNode;\n                block.appendChild(clonedNode);\n              }\n            }\n          } while ((node = node.parentNode) && node !== editableRoot);\n        }\n        setForcedBlockAttrs(editor, block);\n        emptyBlock(caretNode);\n        return block;\n      };\n      var isCaretAtStartOrEndOfBlock = function (start) {\n        var walker, node, name, normalizedOffset;\n        normalizedOffset = normalizeZwspOffset(start, container, offset);\n        if (NodeType.isText(container) && (start ? normalizedOffset > 0 : normalizedOffset < container.nodeValue.length)) {\n          return false;\n        }\n        if (container.parentNode === parentBlock && isAfterLastNodeInContainer && !start) {\n          return true;\n        }\n        if (start && NodeType.isElement(container) && container === parentBlock.firstChild) {\n          return true;\n        }\n        if (containerAndSiblingName(container, 'TABLE') || containerAndSiblingName(container, 'HR')) {\n          return isAfterLastNodeInContainer && !start || !isAfterLastNodeInContainer && start;\n        }\n        walker = new TreeWalker(container, parentBlock);\n        if (NodeType.isText(container)) {\n          if (start && normalizedOffset === 0) {\n            walker.prev();\n          } else if (!start && normalizedOffset === container.nodeValue.length) {\n            walker.next();\n          }\n        }\n        while (node = walker.current()) {\n          if (NodeType.isElement(node)) {\n            if (!node.getAttribute('data-mce-bogus')) {\n              name = node.nodeName.toLowerCase();\n              if (nonEmptyElementsMap[name] && name !== 'br') {\n                return false;\n              }\n            }\n          } else if (NodeType.isText(node) && !/^[ \\t\\r\\n]*$/.test(node.nodeValue)) {\n            return false;\n          }\n          if (start) {\n            walker.prev();\n          } else {\n            walker.next();\n          }\n        }\n        return true;\n      };\n      var insertNewBlockAfter = function () {\n        if (/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName) && containerBlockName !== 'HGROUP') {\n          newBlock = createNewBlock(newBlockName);\n        } else {\n          newBlock = createNewBlock();\n        }\n        if (Settings.shouldEndContainerOnEmptyBlock(editor) && canSplitBlock(dom, containerBlock) && dom.isEmpty(parentBlock)) {\n          newBlock = dom.split(containerBlock, parentBlock);\n        } else {\n          dom.insertAfter(newBlock, parentBlock);\n        }\n        NewLineUtils.moveToCaretPosition(editor, newBlock);\n      };\n      NormalizeRange.normalize(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      newBlockName = Settings.getForcedRootBlock(editor);\n      shiftKey = evt.shiftKey;\n      if (NodeType.isElement(container) && container.hasChildNodes()) {\n        isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && NodeType.isText(container)) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      editableRoot = getEditableRoot$1(dom, container);\n      if (!editableRoot) {\n        return;\n      }\n      if (newBlockName && !shiftKey || !newBlockName && shiftKey) {\n        container = wrapSelfAndSiblingsInDefaultBlock(editor, newBlockName, rng, container, offset);\n      }\n      parentBlock = dom.getParent(container, dom.isBlock);\n      containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : '';\n      containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      if (containerBlockName === 'LI' && !evt.ctrlKey) {\n        parentBlock = containerBlock;\n        containerBlock = containerBlock.parentNode;\n        parentBlockName = containerBlockName;\n      }\n      if (/^(LI|DT|DD)$/.test(parentBlockName)) {\n        if (dom.isEmpty(parentBlock)) {\n          InsertLi.insert(editor, createNewBlock, containerBlock, parentBlock, newBlockName);\n          return;\n        }\n      }\n      if (newBlockName && parentBlock === editor.getBody()) {\n        return;\n      }\n      newBlockName = newBlockName || 'P';\n      if (isCaretContainerBlock(parentBlock)) {\n        newBlock = showCaretContainerBlock(parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        setForcedBlockAttrs(editor, newBlock);\n        NewLineUtils.moveToCaretPosition(editor, newBlock);\n      } else if (isCaretAtStartOrEndOfBlock()) {\n        insertNewBlockAfter();\n      } else if (isCaretAtStartOrEndOfBlock(true)) {\n        newBlock = parentBlock.parentNode.insertBefore(createNewBlock(), parentBlock);\n        NewLineUtils.moveToCaretPosition(editor, containerAndSiblingName(parentBlock, 'HR') ? newBlock : parentBlock);\n      } else {\n        tmpRng = includeZwspInRange(rng).cloneRange();\n        tmpRng.setEndAfter(parentBlock);\n        fragment = tmpRng.extractContents();\n        trimZwsp(fragment);\n        trimLeadingLineBreaks(fragment);\n        newBlock = fragment.firstChild;\n        dom.insertAfter(fragment, parentBlock);\n        trimInlineElementsOnLeftSideOfBlock(dom, nonEmptyElementsMap, newBlock);\n        addBrToBlockIfNeeded(dom, parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        newBlock.normalize();\n        if (dom.isEmpty(newBlock)) {\n          dom.remove(newBlock);\n          insertNewBlockAfter();\n        } else {\n          setForcedBlockAttrs(editor, newBlock);\n          NewLineUtils.moveToCaretPosition(editor, newBlock);\n        }\n      }\n      dom.setAttrib(newBlock, 'id', '');\n      editor.fire('NewBlock', { newBlock: newBlock });\n    };\n    var InsertBlock = { insert: insert$2 };\n\n    var matchesSelector = function (editor, selector) {\n      return NewLineUtils.getParentBlock(editor).filter(function (parentBlock) {\n        return selector.length > 0 && is$1(Element.fromDom(parentBlock), selector);\n      }).isSome();\n    };\n    var shouldInsertBr = function (editor) {\n      return matchesSelector(editor, Settings.getBrNewLineSelector(editor));\n    };\n    var shouldBlockNewLine = function (editor) {\n      return matchesSelector(editor, Settings.getNoNewLineSelector(editor));\n    };\n    var ContextSelectors = {\n      shouldInsertBr: shouldInsertBr,\n      shouldBlockNewLine: shouldBlockNewLine\n    };\n\n    var newLineAction = Adt.generate([\n      { br: [] },\n      { block: [] },\n      { none: [] }\n    ]);\n    var shouldBlockNewLine$1 = function (editor, shiftKey) {\n      return ContextSelectors.shouldBlockNewLine(editor);\n    };\n    var isBrMode = function (requiredState) {\n      return function (editor, shiftKey) {\n        var brMode = Settings.getForcedRootBlock(editor) === '';\n        return brMode === requiredState;\n      };\n    };\n    var inListBlock = function (requiredState) {\n      return function (editor, shiftKey) {\n        return NewLineUtils.isListItemParentBlock(editor) === requiredState;\n      };\n    };\n    var inBlock = function (blockName, requiredState) {\n      return function (editor, shiftKey) {\n        var state = NewLineUtils.getParentBlockName(editor) === blockName.toUpperCase();\n        return state === requiredState;\n      };\n    };\n    var inPreBlock = function (requiredState) {\n      return inBlock('pre', requiredState);\n    };\n    var inSummaryBlock = function () {\n      return inBlock('summary', true);\n    };\n    var shouldPutBrInPre$1 = function (requiredState) {\n      return function (editor, shiftKey) {\n        return Settings.shouldPutBrInPre(editor) === requiredState;\n      };\n    };\n    var inBrContext = function (editor, shiftKey) {\n      return ContextSelectors.shouldInsertBr(editor);\n    };\n    var hasShiftKey = function (editor, shiftKey) {\n      return shiftKey;\n    };\n    var canInsertIntoEditableRoot = function (editor) {\n      var forcedRootBlock = Settings.getForcedRootBlock(editor);\n      var rootEditable = NewLineUtils.getEditableRoot(editor.dom, editor.selection.getStart());\n      return rootEditable && editor.schema.isValidChild(rootEditable.nodeName, forcedRootBlock ? forcedRootBlock : 'P');\n    };\n    var match$2 = function (predicates, action) {\n      return function (editor, shiftKey) {\n        var isMatch = foldl(predicates, function (res, p) {\n          return res && p(editor, shiftKey);\n        }, true);\n        return isMatch ? Option.some(action) : Option.none();\n      };\n    };\n    var getAction$1 = function (editor, evt) {\n      return LazyEvaluator.evaluateUntil([\n        match$2([shouldBlockNewLine$1], newLineAction.none()),\n        match$2([inSummaryBlock()], newLineAction.br()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(false)\n        ], newLineAction.block()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(true),\n          hasShiftKey\n        ], newLineAction.block()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(true)\n        ], newLineAction.br()),\n        match$2([\n          inListBlock(true),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([inListBlock(true)], newLineAction.block()),\n        match$2([\n          isBrMode(true),\n          hasShiftKey,\n          canInsertIntoEditableRoot\n        ], newLineAction.block()),\n        match$2([isBrMode(true)], newLineAction.br()),\n        match$2([inBrContext], newLineAction.br()),\n        match$2([\n          isBrMode(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([canInsertIntoEditableRoot], newLineAction.block())\n      ], [\n        editor,\n        evt.shiftKey\n      ]).getOr(newLineAction.none());\n    };\n    var NewLineAction = { getAction: getAction$1 };\n\n    var insert$3 = function (editor, evt) {\n      NewLineAction.getAction(editor, evt).fold(function () {\n        InsertBr.insert(editor, evt);\n      }, function () {\n        InsertBlock.insert(editor, evt);\n      }, noop);\n    };\n    var InsertNewLine = { insert: insert$3 };\n\n    var endTypingLevel = function (undoManager) {\n      if (undoManager.typing) {\n        undoManager.typing = false;\n        undoManager.add();\n      }\n    };\n    var handleEnterKeyEvent = function (editor, event) {\n      if (event.isDefaultPrevented()) {\n        return;\n      }\n      event.preventDefault();\n      endTypingLevel(editor.undoManager);\n      editor.undoManager.transact(function () {\n        if (editor.selection.isCollapsed() === false) {\n          editor.execCommand('Delete');\n        }\n        InsertNewLine.insert(editor, event);\n      });\n    };\n    var setup$9 = function (editor) {\n      editor.on('keydown', function (event) {\n        if (event.keyCode === VK.ENTER) {\n          handleEnterKeyEvent(editor, event);\n        }\n      });\n    };\n    var EnterKey = { setup: setup$9 };\n\n    var insertTextAtPosition = function (text, pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (NodeType.isText(container)) {\n        container.insertData(offset, text);\n        return Option.some(CaretPosition(container, offset + text.length));\n      } else {\n        return getElementFromPosition(pos).map(function (elm) {\n          var textNode = Element.fromText(text);\n          if (pos.isAtEnd()) {\n            after(elm, textNode);\n          } else {\n            before(elm, textNode);\n          }\n          return CaretPosition(textNode.dom(), text.length);\n        });\n      }\n    };\n    var insertNbspAtPosition = curry(insertTextAtPosition, '\\xA0');\n    var insertSpaceAtPosition = curry(insertTextAtPosition, ' ');\n\n    var navigateIgnoreEmptyTextNodes = function (forward, root, from) {\n      return CaretFinder.navigateIgnore(forward, root, from, isEmptyText);\n    };\n    var getClosestBlock = function (root, pos) {\n      return find(Parents.parentsAndSelf(Element.fromDom(pos.container()), root), isBlock);\n    };\n    var isAtBeforeAfterBlockBoundary = function (forward, root, pos) {\n      return navigateIgnoreEmptyTextNodes(forward, root.dom(), pos).forall(function (newPos) {\n        return getClosestBlock(root, pos).fold(function () {\n          return isInSameBlock(newPos, pos, root.dom()) === false;\n        }, function (fromBlock) {\n          return isInSameBlock(newPos, pos, root.dom()) === false && contains$3(fromBlock, Element.fromDom(newPos.container()));\n        });\n      });\n    };\n    var isAtBlockBoundary = function (forward, root, pos) {\n      return getClosestBlock(root, pos).fold(function () {\n        return navigateIgnoreEmptyTextNodes(forward, root.dom(), pos).forall(function (newPos) {\n          return isInSameBlock(newPos, pos, root.dom()) === false;\n        });\n      }, function (parent) {\n        return navigateIgnoreEmptyTextNodes(forward, parent.dom(), pos).isNone();\n      });\n    };\n    var isAtStartOfBlock = curry(isAtBlockBoundary, false);\n    var isAtEndOfBlock = curry(isAtBlockBoundary, true);\n    var isBeforeBlock = curry(isAtBeforeAfterBlockBoundary, false);\n    var isAfterBlock = curry(isAtBeforeAfterBlockBoundary, true);\n\n    var nbsp = '\\xA0';\n    var isInMiddleOfText = function (pos) {\n      return CaretPosition.isTextPosition(pos) && !pos.isAtStart() && !pos.isAtEnd();\n    };\n    var getClosestBlock$1 = function (root, pos) {\n      var parentBlocks = filter(Parents.parentsAndSelf(Element.fromDom(pos.container()), root), isBlock);\n      return head(parentBlocks).getOr(root);\n    };\n    var hasSpaceBefore = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isAfterSpace(pos);\n      } else {\n        return isAfterSpace(pos) || CaretFinder.prevPosition(getClosestBlock$1(root, pos).dom(), pos).exists(isAfterSpace);\n      }\n    };\n    var hasSpaceAfter = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isBeforeSpace(pos);\n      } else {\n        return isBeforeSpace(pos) || CaretFinder.nextPosition(getClosestBlock$1(root, pos).dom(), pos).exists(isBeforeSpace);\n      }\n    };\n    var isPreValue = function (value) {\n      return contains([\n        'pre',\n        'pre-wrap'\n      ], value);\n    };\n    var isInPre = function (pos) {\n      return getElementFromPosition(pos).bind(function (elm) {\n        return closest(elm, isElement);\n      }).exists(function (elm) {\n        return isPreValue(get$1(elm, 'white-space'));\n      });\n    };\n    var isAtBeginningOfBody = function (root, pos) {\n      return CaretFinder.prevPosition(root.dom(), pos).isNone();\n    };\n    var isAtEndOfBody = function (root, pos) {\n      return CaretFinder.nextPosition(root.dom(), pos).isNone();\n    };\n    var isAtLineBoundary = function (root, pos) {\n      return isAtBeginningOfBody(root, pos) || isAtEndOfBody(root, pos) || isAtStartOfBlock(root, pos) || isAtEndOfBlock(root, pos) || isAfterBr(root, pos) || isBeforeBr(root, pos);\n    };\n    var needsToHaveNbsp = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtLineBoundary(root, pos) || hasSpaceBefore(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbspLeft = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtStartOfBlock(root, pos) || isBeforeBlock(root, pos) || isAfterBr(root, pos) || hasSpaceBefore(root, pos);\n      }\n    };\n    var leanRight = function (pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (NodeType.isText(container) && offset < container.data.length) {\n        return CaretPosition(container, offset + 1);\n      } else {\n        return pos;\n      }\n    };\n    var needsToBeNbspRight = function (root, pos) {\n      var afterPos = leanRight(pos);\n      if (isInPre(afterPos)) {\n        return false;\n      } else {\n        return isAtEndOfBlock(root, afterPos) || isAfterBlock(root, afterPos) || isBeforeBr(root, afterPos) || hasSpaceAfter(root, afterPos);\n      }\n    };\n    var needsToBeNbsp = function (root, pos) {\n      return needsToBeNbspLeft(root, pos) || needsToBeNbspRight(root, pos);\n    };\n    var isNbspAt = function (text, offset) {\n      return isNbsp(text.charAt(offset));\n    };\n    var hasNbsp = function (pos) {\n      var container = pos.container();\n      return NodeType.isText(container) && contains$2(container.data, nbsp);\n    };\n    var normalizeNbspMiddle = function (text) {\n      var chars = text.split('');\n      return map(chars, function (chr, i) {\n        if (isNbsp(chr) && i > 0 && i < chars.length - 1 && isContent$1(chars[i - 1]) && isContent$1(chars[i + 1])) {\n          return ' ';\n        } else {\n          return chr;\n        }\n      }).join('');\n    };\n    var normalizeNbspAtStart = function (root, node) {\n      var text = node.data;\n      var firstPos = CaretPosition(node, 0);\n      if (isNbspAt(text, 0) && !needsToBeNbsp(root, firstPos)) {\n        node.data = ' ' + text.slice(1);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspInMiddleOfTextNode = function (node) {\n      var text = node.data;\n      var newText = normalizeNbspMiddle(text);\n      if (newText !== text) {\n        node.data = newText;\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspAtEnd = function (root, node) {\n      var text = node.data;\n      var lastPos = CaretPosition(node, text.length - 1);\n      if (isNbspAt(text, text.length - 1) && !needsToBeNbsp(root, lastPos)) {\n        node.data = text.slice(0, -1) + ' ';\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbsps = function (root, pos) {\n      return Option.some(pos).filter(hasNbsp).bind(function (pos) {\n        var container = pos.container();\n        var normalized = normalizeNbspAtStart(root, container) || normalizeNbspInMiddleOfTextNode(container) || normalizeNbspAtEnd(root, container);\n        return normalized ? Option.some(pos) : Option.none();\n      });\n    };\n    var normalizeNbspsInEditor = function (editor) {\n      var root = Element.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        normalizeNbsps(root, CaretPosition.fromRangeStart(editor.selection.getRng())).each(function (pos) {\n          editor.selection.setRng(pos.toRange());\n        });\n      }\n    };\n\n    var locationToCaretPosition = function (root) {\n      return function (location) {\n        return location.fold(function (element) {\n          return CaretFinder.prevPosition(root.dom(), CaretPosition$1.before(element));\n        }, function (element) {\n          return CaretFinder.firstPositionIn(element);\n        }, function (element) {\n          return CaretFinder.lastPositionIn(element);\n        }, function (element) {\n          return CaretFinder.nextPosition(root.dom(), CaretPosition$1.after(element));\n        });\n      };\n    };\n    var insertInlineBoundarySpaceOrNbsp = function (root, pos) {\n      return function (checkPos) {\n        return needsToHaveNbsp(root, checkPos) ? insertNbspAtPosition(pos) : insertSpaceAtPosition(pos);\n      };\n    };\n    var setSelection$1 = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        editor.nodeChanged();\n        return true;\n      };\n    };\n    var insertSpaceOrNbspAtSelection = function (editor) {\n      var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var root = Element.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n        var caretPosition = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        return BoundaryLocation.readLocation(isInlineTarget, editor.getBody(), caretPosition).bind(locationToCaretPosition(root)).bind(insertInlineBoundarySpaceOrNbsp(root, pos)).exists(setSelection$1(editor));\n      } else {\n        return false;\n      }\n    };\n\n    var executeKeydownOverride$2 = function (editor, evt) {\n      MatchKeys.execute([{\n          keyCode: VK.SPACEBAR,\n          action: MatchKeys.action(insertSpaceOrNbspAtSelection, editor)\n        }], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$a = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$2(editor, evt);\n        }\n      });\n    };\n    var SpaceKey = { setup: setup$a };\n\n    var findBlockCaretContainer = function (editor) {\n      return descendant(Element.fromDom(editor.getBody()), '*[data-mce-caret]').fold(constant(null), function (elm) {\n        return elm.dom();\n      });\n    };\n    var removeIeControlRect = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var showBlockCaretContainer = function (editor, blockCaretContainer) {\n      if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n        showCaretContainerBlock(blockCaretContainer);\n        removeIeControlRect(editor);\n        editor.selection.scrollIntoView(blockCaretContainer);\n      }\n    };\n    var handleBlockContainer = function (editor, e) {\n      var blockCaretContainer = findBlockCaretContainer(editor);\n      if (!blockCaretContainer) {\n        return;\n      }\n      if (e.type === 'compositionstart') {\n        e.preventDefault();\n        e.stopPropagation();\n        showBlockCaretContainer(editor, blockCaretContainer);\n        return;\n      }\n      if (hasContent(blockCaretContainer)) {\n        showBlockCaretContainer(editor, blockCaretContainer);\n        editor.undoManager.add();\n      }\n    };\n    var setup$b = function (editor) {\n      editor.on('keyup compositionstart', curry(handleBlockContainer, editor));\n    };\n    var CaretContainerInput = { setup: setup$b };\n\n    var browser$4 = PlatformDetection$1.detect().browser;\n    var setupIeInput = function (editor) {\n      var keypressThrotter = first(function () {\n        if (!editor.composing) {\n          normalizeNbspsInEditor(editor);\n        }\n      }, 0);\n      if (browser$4.isIE()) {\n        editor.on('keypress', function (e) {\n          keypressThrotter.throttle();\n        });\n        editor.on('remove', function (e) {\n          keypressThrotter.cancel();\n        });\n      }\n    };\n    var setup$c = function (editor) {\n      setupIeInput(editor);\n      editor.on('input', function (e) {\n        if (e.isComposing === false) {\n          normalizeNbspsInEditor(editor);\n        }\n      });\n    };\n\n    var executeKeydownOverride$3 = function (editor, evt) {\n      MatchKeys.execute([\n        {\n          keyCode: VK.END,\n          action: moveToLineEndPoint(editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: moveToLineEndPoint(editor, false)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$d = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$3(editor, evt);\n        }\n      });\n    };\n    var HomeEndKeys = { setup: setup$d };\n\n    var setup$e = function (editor) {\n      var caret = BoundarySelection.setupSelectedState(editor);\n      CaretContainerInput.setup(editor);\n      ArrowKeys.setup(editor, caret);\n      DeleteBackspaceKeys.setup(editor, caret);\n      EnterKey.setup(editor);\n      SpaceKey.setup(editor);\n      setup$c(editor);\n      HomeEndKeys.setup(editor);\n    };\n    var KeyboardOverrides = { setup: setup$e };\n\n    function Quirks (editor) {\n      var each = Tools.each;\n      var BACKSPACE = VK.BACKSPACE, DELETE = VK.DELETE, dom = editor.dom, selection = editor.selection, settings = editor.settings, parser = editor.parser;\n      var isGecko = Env.gecko, isIE = Env.ie, isWebKit = Env.webkit;\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      var mceInternalDataType = isIE ? 'Text' : 'URL';\n      var setEditorCommandState = function (cmd, state) {\n        try {\n          editor.getDoc().execCommand(cmd, false, state);\n        } catch (ex) {\n        }\n      };\n      var isDefaultPrevented = function (e) {\n        return e.isDefaultPrevented();\n      };\n      var setMceInternalContent = function (e) {\n        var selectionHtml, internalContent;\n        if (e.dataTransfer) {\n          if (editor.selection.isCollapsed() && e.target.tagName === 'IMG') {\n            selection.select(e.target);\n          }\n          selectionHtml = editor.selection.getContent();\n          if (selectionHtml.length > 0) {\n            internalContent = mceInternalUrlPrefix + escape(editor.id) + ',' + escape(selectionHtml);\n            e.dataTransfer.setData(mceInternalDataType, internalContent);\n          }\n        }\n      };\n      var getMceInternalContent = function (e) {\n        var internalContent;\n        if (e.dataTransfer) {\n          internalContent = e.dataTransfer.getData(mceInternalDataType);\n          if (internalContent && internalContent.indexOf(mceInternalUrlPrefix) >= 0) {\n            internalContent = internalContent.substr(mceInternalUrlPrefix.length).split(',');\n            return {\n              id: unescape(internalContent[0]),\n              html: unescape(internalContent[1])\n            };\n          }\n        }\n        return null;\n      };\n      var insertClipboardContents = function (content, internal) {\n        if (editor.queryCommandSupported('mceInsertClipboardContent')) {\n          editor.execCommand('mceInsertClipboardContent', false, {\n            content: content,\n            internal: internal\n          });\n        } else {\n          editor.execCommand('mceInsertContent', false, content);\n        }\n      };\n      var emptyEditorWhenDeleting = function () {\n        var serializeRng = function (rng) {\n          var body = dom.create('body');\n          var contents = rng.cloneContents();\n          body.appendChild(contents);\n          return selection.serializer.serialize(body, { format: 'html' });\n        };\n        var allContentsSelected = function (rng) {\n          var selection = serializeRng(rng);\n          var allRng = dom.createRng();\n          allRng.selectNode(editor.getBody());\n          var allSelection = serializeRng(allRng);\n          return selection === allSelection;\n        };\n        editor.on('keydown', function (e) {\n          var keyCode = e.keyCode;\n          var isCollapsed, body;\n          if (!isDefaultPrevented(e) && (keyCode === DELETE || keyCode === BACKSPACE)) {\n            isCollapsed = editor.selection.isCollapsed();\n            body = editor.getBody();\n            if (isCollapsed && !dom.isEmpty(body)) {\n              return;\n            }\n            if (!isCollapsed && !allContentsSelected(editor.selection.getRng())) {\n              return;\n            }\n            e.preventDefault();\n            editor.setContent('');\n            if (body.firstChild && dom.isBlock(body.firstChild)) {\n              editor.selection.setCursorLocation(body.firstChild, 0);\n            } else {\n              editor.selection.setCursorLocation(body, 0);\n            }\n            editor.nodeChanged();\n          }\n        });\n      };\n      var selectAll = function () {\n        editor.shortcuts.add('meta+a', null, 'SelectAll');\n      };\n      var inputMethodFocus = function () {\n        if (!editor.settings.content_editable) {\n          dom.bind(editor.getDoc(), 'mousedown mouseup', function (e) {\n            var rng;\n            if (e.target === editor.getDoc().documentElement) {\n              rng = selection.getRng();\n              editor.getBody().focus();\n              if (e.type === 'mousedown') {\n                if (isCaretContainer(rng.startContainer)) {\n                  return;\n                }\n                selection.placeCaretAt(e.clientX, e.clientY);\n              } else {\n                selection.setRng(rng);\n              }\n            }\n          });\n        }\n      };\n      var removeHrOnBackspace = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (!editor.getBody().getElementsByTagName('hr').length) {\n              return;\n            }\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var node = selection.getNode();\n              var previousSibling = node.previousSibling;\n              if (node.nodeName === 'HR') {\n                dom.remove(node);\n                e.preventDefault();\n                return;\n              }\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'hr') {\n                dom.remove(previousSibling);\n                e.preventDefault();\n              }\n            }\n          }\n        });\n      };\n      var focusBody = function () {\n        if (!domGlobals.Range.prototype.getClientRects) {\n          editor.on('mousedown', function (e) {\n            if (!isDefaultPrevented(e) && e.target.nodeName === 'HTML') {\n              var body_1 = editor.getBody();\n              body_1.blur();\n              Delay.setEditorTimeout(editor, function () {\n                body_1.focus();\n              });\n            }\n          });\n        }\n      };\n      var selectControlElements = function () {\n        editor.on('click', function (e) {\n          var target = e.target;\n          if (/^(IMG|HR)$/.test(target.nodeName) && dom.getContentEditableParent(target) !== 'false') {\n            e.preventDefault();\n            editor.selection.select(target);\n            editor.nodeChanged();\n          }\n          if (target.nodeName === 'A' && dom.hasClass(target, 'mce-item-anchor')) {\n            e.preventDefault();\n            selection.select(target);\n          }\n        });\n      };\n      var removeStylesWhenDeletingAcrossBlockElements = function () {\n        var getAttributeApplyFunction = function () {\n          var template = dom.getAttribs(selection.getStart().cloneNode(false));\n          return function () {\n            var target = selection.getStart();\n            if (target !== editor.getBody()) {\n              dom.setAttrib(target, 'style', null);\n              each(template, function (attr) {\n                target.setAttributeNode(attr.cloneNode(true));\n              });\n            }\n          };\n        };\n        var isSelectionAcrossElements = function () {\n          return !selection.isCollapsed() && dom.getParent(selection.getStart(), dom.isBlock) !== dom.getParent(selection.getEnd(), dom.isBlock);\n        };\n        editor.on('keypress', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && (e.keyCode === 8 || e.keyCode === 46) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            editor.getDoc().execCommand('delete', false, null);\n            applyAttributes();\n            e.preventDefault();\n            return false;\n          }\n        });\n        dom.bind(editor.getDoc(), 'cut', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            Delay.setEditorTimeout(editor, function () {\n              applyAttributes();\n            });\n          }\n        });\n      };\n      var disableBackspaceIntoATable = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var previousSibling = selection.getNode().previousSibling;\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'table') {\n                e.preventDefault();\n                return false;\n              }\n            }\n          }\n        });\n      };\n      var removeBlockQuoteOnBackSpace = function () {\n        editor.on('keydown', function (e) {\n          var rng, container, offset, root, parent;\n          if (isDefaultPrevented(e) || e.keyCode !== VK.BACKSPACE) {\n            return;\n          }\n          rng = selection.getRng();\n          container = rng.startContainer;\n          offset = rng.startOffset;\n          root = dom.getRoot();\n          parent = container;\n          if (!rng.collapsed || offset !== 0) {\n            return;\n          }\n          while (parent && parent.parentNode && parent.parentNode.firstChild === parent && parent.parentNode !== root) {\n            parent = parent.parentNode;\n          }\n          if (parent.tagName === 'BLOCKQUOTE') {\n            editor.formatter.toggle('blockquote', null, parent);\n            rng = dom.createRng();\n            rng.setStart(container, 0);\n            rng.setEnd(container, 0);\n            selection.setRng(rng);\n          }\n        });\n      };\n      var setGeckoEditingOptions = function () {\n        var setOpts = function () {\n          setEditorCommandState('StyleWithCSS', false);\n          setEditorCommandState('enableInlineTableEditing', false);\n          if (!settings.object_resizing) {\n            setEditorCommandState('enableObjectResizing', false);\n          }\n        };\n        if (!settings.readonly) {\n          editor.on('BeforeExecCommand MouseDown', setOpts);\n        }\n      };\n      var addBrAfterLastLinks = function () {\n        var fixLinks = function () {\n          each(dom.select('a'), function (node) {\n            var parentNode = node.parentNode;\n            var root = dom.getRoot();\n            if (parentNode.lastChild === node) {\n              while (parentNode && !dom.isBlock(parentNode)) {\n                if (parentNode.parentNode.lastChild !== parentNode || parentNode === root) {\n                  return;\n                }\n                parentNode = parentNode.parentNode;\n              }\n              dom.add(parentNode, 'br', { 'data-mce-bogus': 1 });\n            }\n          });\n        };\n        editor.on('SetContent ExecCommand', function (e) {\n          if (e.type === 'setcontent' || e.command === 'mceInsertLink') {\n            fixLinks();\n          }\n        });\n      };\n      var setDefaultBlockType = function () {\n        if (settings.forced_root_block) {\n          editor.on('init', function () {\n            setEditorCommandState('DefaultParagraphSeparator', settings.forced_root_block);\n          });\n        }\n      };\n      var normalizeSelection = function () {\n        editor.on('keyup focusin mouseup', function (e) {\n          if (!VK.modifierPressed(e)) {\n            selection.normalize();\n          }\n        }, true);\n      };\n      var showBrokenImageIcon = function () {\n        editor.contentStyles.push('img:-moz-broken {' + '-moz-force-broken-image-icon:1;' + 'min-width:24px;' + 'min-height:24px' + '}');\n      };\n      var restoreFocusOnKeyDown = function () {\n        if (!editor.inline) {\n          editor.on('keydown', function () {\n            if (domGlobals.document.activeElement === domGlobals.document.body) {\n              editor.getWin().focus();\n            }\n          });\n        }\n      };\n      var bodyHeight = function () {\n        if (!editor.inline) {\n          editor.contentStyles.push('body {min-height: 150px}');\n          editor.on('click', function (e) {\n            var rng;\n            if (e.target.nodeName === 'HTML') {\n              if (Env.ie > 11) {\n                editor.getBody().focus();\n                return;\n              }\n              rng = editor.selection.getRng();\n              editor.getBody().focus();\n              editor.selection.setRng(rng);\n              editor.selection.normalize();\n              editor.nodeChanged();\n            }\n          });\n        }\n      };\n      var blockCmdArrowNavigation = function () {\n        if (Env.mac) {\n          editor.on('keydown', function (e) {\n            if (VK.metaKeyPressed(e) && !e.shiftKey && (e.keyCode === 37 || e.keyCode === 39)) {\n              e.preventDefault();\n              editor.selection.getSel().modify('move', e.keyCode === 37 ? 'backward' : 'forward', 'lineboundary');\n            }\n          });\n        }\n      };\n      var disableAutoUrlDetect = function () {\n        setEditorCommandState('AutoUrlDetect', false);\n      };\n      var tapLinksAndImages = function () {\n        editor.on('click', function (e) {\n          var elm = e.target;\n          do {\n            if (elm.tagName === 'A') {\n              e.preventDefault();\n              return;\n            }\n          } while (elm = elm.parentNode);\n        });\n        editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');\n      };\n      var blockFormSubmitInsideEditor = function () {\n        editor.on('init', function () {\n          editor.dom.bind(editor.getBody(), 'submit', function (e) {\n            e.preventDefault();\n          });\n        });\n      };\n      var removeAppleInterchangeBrs = function () {\n        parser.addNodeFilter('br', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            if (nodes[i].attr('class') === 'Apple-interchange-newline') {\n              nodes[i].remove();\n            }\n          }\n        });\n      };\n      var ieInternalDragAndDrop = function () {\n        editor.on('dragstart', function (e) {\n          setMceInternalContent(e);\n        });\n        editor.on('drop', function (e) {\n          if (!isDefaultPrevented(e)) {\n            var internalContent = getMceInternalContent(e);\n            if (internalContent && internalContent.id !== editor.id) {\n              e.preventDefault();\n              var rng = CaretRangeFromPoint.fromPoint(e.x, e.y, editor.getDoc());\n              selection.setRng(rng);\n              insertClipboardContents(internalContent.html, true);\n            }\n          }\n        });\n      };\n      var refreshContentEditable = function () {\n      };\n      var isHidden = function () {\n        var sel;\n        if (!isGecko || editor.removed) {\n          return 0;\n        }\n        sel = editor.selection.getSel();\n        return !sel || !sel.rangeCount || sel.rangeCount === 0;\n      };\n      removeBlockQuoteOnBackSpace();\n      emptyEditorWhenDeleting();\n      if (!Env.windowsPhone) {\n        normalizeSelection();\n      }\n      if (isWebKit) {\n        inputMethodFocus();\n        selectControlElements();\n        setDefaultBlockType();\n        blockFormSubmitInsideEditor();\n        disableBackspaceIntoATable();\n        removeAppleInterchangeBrs();\n        if (Env.iOS) {\n          restoreFocusOnKeyDown();\n          bodyHeight();\n          tapLinksAndImages();\n        } else {\n          selectAll();\n        }\n      }\n      if (Env.ie >= 11) {\n        bodyHeight();\n        disableBackspaceIntoATable();\n      }\n      if (Env.ie) {\n        selectAll();\n        disableAutoUrlDetect();\n        ieInternalDragAndDrop();\n      }\n      if (isGecko) {\n        removeHrOnBackspace();\n        focusBody();\n        removeStylesWhenDeletingAcrossBlockElements();\n        setGeckoEditingOptions();\n        addBrAfterLastLinks();\n        showBrokenImageIcon();\n        blockCmdArrowNavigation();\n        disableBackspaceIntoATable();\n      }\n      return {\n        refreshContentEditable: refreshContentEditable,\n        isHidden: isHidden\n      };\n    }\n\n    var isTextBlockNode = function (node) {\n      return NodeType.isElement(node) && isTextBlock(Element.fromDom(node));\n    };\n    var normalizeSelection$1 = function (editor) {\n      var rng = editor.selection.getRng();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      var endPos = CaretPosition.fromRangeEnd(rng);\n      if (CaretPosition.isElementPosition(startPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          CaretFinder.firstPositionIn(container).each(function (pos) {\n            return rng.setStart(pos.container(), pos.offset());\n          });\n        }\n      }\n      if (CaretPosition.isElementPosition(endPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          CaretFinder.lastPositionIn(container).each(function (pos) {\n            return rng.setEnd(pos.container(), pos.offset());\n          });\n        }\n      }\n      editor.selection.setRng(RangeNormalizer.normalize(rng));\n    };\n    var setup$f = function (editor) {\n      editor.on('click', function (e) {\n        if (e.detail >= 3) {\n          normalizeSelection$1(editor);\n        }\n      });\n    };\n\n    var preventSummaryToggle = function (editor) {\n      editor.on('click', function (e) {\n        if (editor.dom.getParent(e.target, 'details')) {\n          e.preventDefault();\n        }\n      });\n    };\n    var filterDetails = function (editor) {\n      editor.parser.addNodeFilter('details', function (elms) {\n        each(elms, function (details) {\n          details.attr('data-mce-open', details.attr('open'));\n          details.attr('open', 'open');\n        });\n      });\n      editor.serializer.addNodeFilter('details', function (elms) {\n        each(elms, function (details) {\n          var open = details.attr('data-mce-open');\n          details.attr('open', isString(open) ? open : null);\n          details.attr('data-mce-open', null);\n        });\n      });\n    };\n    var setup$g = function (editor) {\n      preventSummaryToggle(editor);\n      filterDetails(editor);\n    };\n\n    var DOM$2 = DOMUtils$1.DOM;\n    var appendStyle = function (editor, text) {\n      var head = Element.fromDom(editor.getDoc().head);\n      var tag = Element.fromTag('style');\n      set(tag, 'type', 'text/css');\n      append(tag, Element.fromText(text));\n      append(head, tag);\n    };\n    var createParser = function (editor) {\n      var parser = DomParser(editor.settings, editor.schema);\n      parser.addAttributeFilter('src,href,style,tabindex', function (nodes, name) {\n        var i = nodes.length, node;\n        var dom = editor.dom;\n        var value, internalName;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr(name);\n          internalName = 'data-mce-' + name;\n          if (!node.attributes.map[internalName]) {\n            if (value.indexOf('data:') === 0 || value.indexOf('blob:') === 0) {\n              continue;\n            }\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n              if (!value.length) {\n                value = null;\n              }\n              node.attr(internalName, value);\n              node.attr(name, value);\n            } else if (name === 'tabindex') {\n              node.attr(internalName, value);\n              node.attr(name, null);\n            } else {\n              node.attr(internalName, editor.convertURL(value, name, node.name));\n            }\n          }\n        }\n      });\n      parser.addNodeFilter('script', function (nodes) {\n        var i = nodes.length, node, type;\n        while (i--) {\n          node = nodes[i];\n          type = node.attr('type') || 'no/type';\n          if (type.indexOf('mce-') !== 0) {\n            node.attr('type', 'mce-' + type);\n          }\n        }\n      });\n      parser.addNodeFilter('#cdata', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.type = 8;\n          node.name = '#comment';\n          node.value = '[CDATA[' + node.value + ']]';\n        }\n      });\n      parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div', function (nodes) {\n        var i = nodes.length, node;\n        var nonEmptyElements = editor.schema.getNonEmptyElements();\n        while (i--) {\n          node = nodes[i];\n          if (node.isEmpty(nonEmptyElements) && node.getAll('br').length === 0) {\n            node.append(new Node$1('br', 1)).shortEnded = true;\n          }\n        }\n      });\n      return parser;\n    };\n    var autoFocus = function (editor) {\n      if (editor.settings.auto_focus) {\n        Delay.setEditorTimeout(editor, function () {\n          var focusEditor;\n          if (editor.settings.auto_focus === true) {\n            focusEditor = editor;\n          } else {\n            focusEditor = editor.editorManager.get(editor.settings.auto_focus);\n          }\n          if (!focusEditor.destroyed) {\n            focusEditor.focus();\n          }\n        }, 100);\n      }\n    };\n    var initEditor = function (editor) {\n      editor.bindPendingEventDelegates();\n      editor.initialized = true;\n      editor.fire('init');\n      editor.focus(true);\n      editor.nodeChanged({ initial: true });\n      editor.execCallback('init_instance_callback', editor);\n      autoFocus(editor);\n    };\n    var getStyleSheetLoader = function (editor) {\n      return editor.inline ? DOM$2.styleSheetLoader : editor.dom.styleSheetLoader;\n    };\n    var initContentBody = function (editor, skipWrite) {\n      var settings = editor.settings;\n      var targetElm = editor.getElement();\n      var doc = editor.getDoc(), body, contentCssText;\n      if (!settings.inline) {\n        editor.getElement().style.visibility = editor.orgVisibility;\n      }\n      if (!skipWrite && !settings.content_editable) {\n        doc.open();\n        doc.write(editor.iframeHTML);\n        doc.close();\n      }\n      if (settings.content_editable) {\n        editor.on('remove', function () {\n          var bodyEl = this.getBody();\n          DOM$2.removeClass(bodyEl, 'mce-content-body');\n          DOM$2.removeClass(bodyEl, 'mce-edit-focus');\n          DOM$2.setAttrib(bodyEl, 'contentEditable', null);\n        });\n        DOM$2.addClass(targetElm, 'mce-content-body');\n        editor.contentDocument = doc = settings.content_document || domGlobals.document;\n        editor.contentWindow = settings.content_window || domGlobals.window;\n        editor.bodyElement = targetElm;\n        settings.content_document = settings.content_window = null;\n        settings.root_name = targetElm.nodeName.toLowerCase();\n      }\n      body = editor.getBody();\n      body.disabled = true;\n      editor.readonly = settings.readonly;\n      if (!editor.readonly) {\n        if (editor.inline && DOM$2.getStyle(body, 'position', true) === 'static') {\n          body.style.position = 'relative';\n        }\n        body.contentEditable = editor.getParam('content_editable_state', true);\n      }\n      body.disabled = false;\n      editor.editorUpload = EditorUpload(editor);\n      editor.schema = Schema(settings);\n      editor.dom = DOMUtils$1(doc, {\n        keep_values: true,\n        url_converter: editor.convertURL,\n        url_converter_scope: editor,\n        hex_colors: settings.force_hex_style_colors,\n        class_filter: settings.class_filter,\n        update_styles: true,\n        root_element: editor.inline ? editor.getBody() : null,\n        collect: settings.content_editable,\n        schema: editor.schema,\n        contentCssCors: Settings.shouldUseContentCssCors(editor),\n        onSetAttrib: function (e) {\n          editor.fire('SetAttrib', e);\n        }\n      });\n      editor.parser = createParser(editor);\n      editor.serializer = DomSerializer$1(settings, editor);\n      editor.selection = Selection$1(editor.dom, editor.getWin(), editor.serializer, editor);\n      editor.annotator = Annotator(editor);\n      editor.formatter = Formatter(editor);\n      editor.undoManager = UndoManager(editor);\n      editor._nodeChangeDispatcher = new NodeChange(editor);\n      editor._selectionOverrides = SelectionOverrides(editor);\n      setup$g(editor);\n      setup$f(editor);\n      KeyboardOverrides.setup(editor);\n      ForceBlocks.setup(editor);\n      editor.fire('PreInit');\n      if (!settings.browser_spellcheck && !settings.gecko_spellcheck) {\n        doc.body.spellcheck = false;\n        DOM$2.setAttrib(body, 'spellcheck', 'false');\n      }\n      editor.quirks = Quirks(editor);\n      editor.fire('PostRender');\n      if (settings.directionality) {\n        body.dir = settings.directionality;\n      }\n      if (settings.nowrap) {\n        body.style.whiteSpace = 'nowrap';\n      }\n      if (settings.protect) {\n        editor.on('BeforeSetContent', function (e) {\n          Tools.each(settings.protect, function (pattern) {\n            e.content = e.content.replace(pattern, function (str) {\n              return '<!--mce:protected ' + escape(str) + '-->';\n            });\n          });\n        });\n      }\n      editor.on('SetContent', function () {\n        editor.addVisual(editor.getBody());\n      });\n      editor.load({\n        initial: true,\n        format: 'html'\n      });\n      editor.startContent = editor.getContent({ format: 'raw' });\n      editor.on('compositionstart compositionend', function (e) {\n        editor.composing = e.type === 'compositionstart';\n      });\n      if (editor.contentStyles.length > 0) {\n        contentCssText = '';\n        Tools.each(editor.contentStyles, function (style) {\n          contentCssText += style + '\\r\\n';\n        });\n        editor.dom.addStyle(contentCssText);\n      }\n      getStyleSheetLoader(editor).loadAll(editor.contentCSS, function (_) {\n        initEditor(editor);\n      }, function (urls) {\n        initEditor(editor);\n      });\n      if (settings.content_style) {\n        appendStyle(editor, settings.content_style);\n      }\n    };\n    var InitContentBody = { initContentBody: initContentBody };\n\n    var DOM$3 = DOMUtils$1.DOM;\n    var relaxDomain = function (editor, ifr) {\n      if (domGlobals.document.domain !== domGlobals.window.location.hostname && Env.ie && Env.ie < 12) {\n        var bodyUuid = Uuid.uuid('mce');\n        editor[bodyUuid] = function () {\n          InitContentBody.initContentBody(editor);\n        };\n        var domainRelaxUrl = 'javascript:(function(){' + 'document.open();document.domain=\"' + domGlobals.document.domain + '\";' + 'var ed = window.parent.tinymce.get(\"' + editor.id + '\");document.write(ed.iframeHTML);' + 'document.close();ed.' + bodyUuid + '(true);})()';\n        DOM$3.setAttrib(ifr, 'src', domainRelaxUrl);\n        return true;\n      }\n      return false;\n    };\n    var normalizeHeight = function (height) {\n      var normalizedHeight = typeof height === 'number' ? height + 'px' : height;\n      return normalizedHeight ? normalizedHeight : '';\n    };\n    var createIframeElement = function (id, title, height, customAttrs) {\n      var iframe = Element.fromTag('iframe');\n      setAll(iframe, customAttrs);\n      setAll(iframe, {\n        id: id + '_ifr',\n        frameBorder: '0',\n        allowTransparency: 'true',\n        title: title\n      });\n      setAll$1(iframe, {\n        width: '100%',\n        height: normalizeHeight(height),\n        display: 'block'\n      });\n      return iframe;\n    };\n    var getIframeHtml = function (editor) {\n      var bodyId, bodyClass, iframeHTML;\n      iframeHTML = Settings.getDocType(editor) + '<html><head>';\n      if (Settings.getDocumentBaseUrl(editor) !== editor.documentBaseUrl) {\n        iframeHTML += '<base href=\"' + editor.documentBaseURI.getURI() + '\" />';\n      }\n      iframeHTML += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';\n      bodyId = Settings.getBodyId(editor);\n      bodyClass = Settings.getBodyClass(editor);\n      if (Settings.getContentSecurityPolicy(editor)) {\n        iframeHTML += '<meta http-equiv=\"Content-Security-Policy\" content=\"' + Settings.getContentSecurityPolicy(editor) + '\" />';\n      }\n      iframeHTML += '</head><body id=\"' + bodyId + '\" class=\"mce-content-body ' + bodyClass + '\" data-id=\"' + editor.id + '\"><br></body></html>';\n      return iframeHTML;\n    };\n    var createIframe = function (editor, o) {\n      var title = editor.editorManager.translate('Rich Text Area. Press ALT-F9 for menu. ' + 'Press ALT-F10 for toolbar. Press ALT-0 for help');\n      var ifr = createIframeElement(editor.id, title, o.height, Settings.getIframeAttrs(editor)).dom();\n      ifr.onload = function () {\n        ifr.onload = null;\n        editor.fire('load');\n      };\n      var isDomainRelaxed = relaxDomain(editor, ifr);\n      editor.contentAreaContainer = o.iframeContainer;\n      editor.iframeElement = ifr;\n      editor.iframeHTML = getIframeHtml(editor);\n      DOM$3.add(o.iframeContainer, ifr);\n      return isDomainRelaxed;\n    };\n    var init$1 = function (editor, boxInfo) {\n      var isDomainRelaxed = createIframe(editor, boxInfo);\n      if (boxInfo.editorContainer) {\n        DOM$3.get(boxInfo.editorContainer).style.display = editor.orgDisplay;\n        editor.hidden = DOM$3.isHidden(boxInfo.editorContainer);\n      }\n      editor.getElement().style.display = 'none';\n      DOM$3.setAttrib(editor.id, 'aria-hidden', 'true');\n      if (!isDomainRelaxed) {\n        InitContentBody.initContentBody(editor);\n      }\n    };\n    var InitIframe = { init: init$1 };\n\n    var DOM$4 = DOMUtils$1.DOM;\n    var initPlugin = function (editor, initializedPlugins, plugin) {\n      var Plugin = PluginManager$1.get(plugin);\n      var pluginUrl = PluginManager$1.urls[plugin] || editor.documentBaseUrl.replace(/\\/$/, '');\n      plugin = Tools.trim(plugin);\n      if (Plugin && Tools.inArray(initializedPlugins, plugin) === -1) {\n        Tools.each(PluginManager$1.dependencies(plugin), function (dep) {\n          initPlugin(editor, initializedPlugins, dep);\n        });\n        if (editor.plugins[plugin]) {\n          return;\n        }\n        try {\n          var pluginInstance = new Plugin(editor, pluginUrl, editor.$);\n          editor.plugins[plugin] = pluginInstance;\n          if (pluginInstance.init) {\n            pluginInstance.init(editor, pluginUrl);\n            initializedPlugins.push(plugin);\n          }\n        } catch (e) {\n          ErrorReporter.pluginInitError(editor, plugin, e);\n        }\n      }\n    };\n    var trimLegacyPrefix = function (name) {\n      return name.replace(/^\\-/, '');\n    };\n    var initPlugins = function (editor) {\n      var initializedPlugins = [];\n      Tools.each(editor.settings.plugins.split(/[ ,]/), function (name) {\n        initPlugin(editor, initializedPlugins, trimLegacyPrefix(name));\n      });\n    };\n    var initTheme = function (editor) {\n      var Theme;\n      var theme = editor.settings.theme;\n      if (isString(theme)) {\n        editor.settings.theme = trimLegacyPrefix(theme);\n        Theme = ThemeManager.get(theme);\n        editor.theme = new Theme(editor, ThemeManager.urls[theme]);\n        if (editor.theme.init) {\n          editor.theme.init(editor, ThemeManager.urls[theme] || editor.documentBaseUrl.replace(/\\/$/, ''), editor.$);\n        }\n      } else {\n        editor.theme = {};\n      }\n    };\n    var renderFromLoadedTheme = function (editor) {\n      var w, h, minHeight, re, info;\n      var settings = editor.settings;\n      var elm = editor.getElement();\n      w = settings.width || DOM$4.getStyle(elm, 'width') || '100%';\n      h = settings.height || DOM$4.getStyle(elm, 'height') || elm.offsetHeight;\n      minHeight = settings.min_height || 100;\n      re = /^[0-9\\.]+(|px)$/i;\n      if (re.test('' + w)) {\n        w = Math.max(parseInt(w, 10), 100);\n      }\n      if (re.test('' + h)) {\n        h = Math.max(parseInt(h, 10), minHeight);\n      }\n      info = editor.theme.renderUI({\n        targetNode: elm,\n        width: w,\n        height: h,\n        deltaWidth: settings.delta_width,\n        deltaHeight: settings.delta_height\n      });\n      if (!settings.content_editable) {\n        h = (info.iframeHeight || h) + (typeof h === 'number' ? info.deltaHeight || 0 : '');\n        if (h < minHeight) {\n          h = minHeight;\n        }\n      }\n      info.height = h;\n      return info;\n    };\n    var renderFromThemeFunc = function (editor) {\n      var info;\n      var elm = editor.getElement();\n      info = editor.settings.theme(editor, elm);\n      if (info.editorContainer.nodeType) {\n        info.editorContainer.id = info.editorContainer.id || editor.id + '_parent';\n      }\n      if (info.iframeContainer && info.iframeContainer.nodeType) {\n        info.iframeContainer.id = info.iframeContainer.id || editor.id + '_iframecontainer';\n      }\n      info.height = info.iframeHeight ? info.iframeHeight : elm.offsetHeight;\n      return info;\n    };\n    var createThemeFalseResult = function (element) {\n      return {\n        editorContainer: element,\n        iframeContainer: element\n      };\n    };\n    var renderThemeFalseIframe = function (targetElement) {\n      var iframeContainer = DOM$4.create('div');\n      DOM$4.insertAfter(iframeContainer, targetElement);\n      return createThemeFalseResult(iframeContainer);\n    };\n    var renderThemeFalse = function (editor) {\n      var targetElement = editor.getElement();\n      return editor.inline ? createThemeFalseResult(null) : renderThemeFalseIframe(targetElement);\n    };\n    var renderThemeUi = function (editor) {\n      var settings = editor.settings, elm = editor.getElement();\n      editor.orgDisplay = elm.style.display;\n      if (isString(settings.theme)) {\n        return renderFromLoadedTheme(editor);\n      } else if (isFunction(settings.theme)) {\n        return renderFromThemeFunc(editor);\n      } else {\n        return renderThemeFalse(editor);\n      }\n    };\n    var init$2 = function (editor) {\n      var settings = editor.settings;\n      var elm = editor.getElement();\n      var boxInfo;\n      editor.rtl = settings.rtl_ui || editor.editorManager.i18n.rtl;\n      editor.editorManager.i18n.setCode(settings.language);\n      settings.aria_label = settings.aria_label || DOM$4.getAttrib(elm, 'aria-label', editor.getLang('aria.rich_text_area'));\n      editor.fire('ScriptsLoaded');\n      initTheme(editor);\n      initPlugins(editor);\n      boxInfo = renderThemeUi(editor);\n      editor.editorContainer = boxInfo.editorContainer ? boxInfo.editorContainer : null;\n      if (settings.content_css) {\n        Tools.each(Tools.explode(settings.content_css), function (u) {\n          editor.contentCSS.push(editor.documentBaseURI.toAbsolute(u));\n        });\n      }\n      if (settings.content_editable) {\n        return InitContentBody.initContentBody(editor);\n      } else {\n        return InitIframe.init(editor, boxInfo);\n      }\n    };\n    var Init = { init: init$2 };\n\n    var DOM$5 = DOMUtils$1.DOM;\n    var hasSkipLoadPrefix = function (name) {\n      return name.charAt(0) === '-';\n    };\n    var loadLanguage = function (scriptLoader, editor) {\n      var settings = editor.settings;\n      if (settings.language && settings.language !== 'en' && !settings.language_url) {\n        settings.language_url = editor.editorManager.baseURL + '/langs/' + settings.language + '.js';\n      }\n      if (settings.language_url && !editor.editorManager.i18n.data[settings.language]) {\n        scriptLoader.add(settings.language_url);\n      }\n    };\n    var loadTheme = function (scriptLoader, editor, suffix, callback) {\n      var settings = editor.settings, theme = settings.theme;\n      if (isString(theme)) {\n        if (!hasSkipLoadPrefix(theme) && !ThemeManager.urls.hasOwnProperty(theme)) {\n          var themeUrl = settings.theme_url;\n          if (themeUrl) {\n            ThemeManager.load(theme, editor.documentBaseURI.toAbsolute(themeUrl));\n          } else {\n            ThemeManager.load(theme, 'themes/' + theme + '/theme' + suffix + '.js');\n          }\n        }\n        scriptLoader.loadQueue(function () {\n          ThemeManager.waitFor(theme, callback);\n        });\n      } else {\n        callback();\n      }\n    };\n    var loadPlugins = function (settings, suffix) {\n      if (Tools.isArray(settings.plugins)) {\n        settings.plugins = settings.plugins.join(' ');\n      }\n      Tools.each(settings.external_plugins, function (url, name) {\n        PluginManager$1.load(name, url);\n        settings.plugins += ' ' + name;\n      });\n      Tools.each(settings.plugins.split(/[ ,]/), function (plugin) {\n        plugin = Tools.trim(plugin);\n        if (plugin && !PluginManager$1.urls[plugin]) {\n          if (hasSkipLoadPrefix(plugin)) {\n            plugin = plugin.substr(1, plugin.length);\n            var dependencies = PluginManager$1.dependencies(plugin);\n            Tools.each(dependencies, function (dep) {\n              var defaultSettings = {\n                prefix: 'plugins/',\n                resource: dep,\n                suffix: '/plugin' + suffix + '.js'\n              };\n              dep = PluginManager$1.createUrl(defaultSettings, dep);\n              PluginManager$1.load(dep.resource, dep);\n            });\n          } else {\n            PluginManager$1.load(plugin, {\n              prefix: 'plugins/',\n              resource: plugin,\n              suffix: '/plugin' + suffix + '.js'\n            });\n          }\n        }\n      });\n    };\n    var loadScripts = function (editor, suffix) {\n      var scriptLoader = ScriptLoader.ScriptLoader;\n      loadTheme(scriptLoader, editor, suffix, function () {\n        loadLanguage(scriptLoader, editor);\n        loadPlugins(editor.settings, suffix);\n        scriptLoader.loadQueue(function () {\n          if (!editor.removed) {\n            Init.init(editor);\n          }\n        }, editor, function (urls) {\n          ErrorReporter.pluginLoadError(editor, urls[0]);\n          if (!editor.removed) {\n            Init.init(editor);\n          }\n        });\n      });\n    };\n    var render = function (editor) {\n      var settings = editor.settings, id = editor.id;\n      var readyHandler = function () {\n        DOM$5.unbind(domGlobals.window, 'ready', readyHandler);\n        editor.render();\n      };\n      if (!EventUtils.Event.domLoaded) {\n        DOM$5.bind(domGlobals.window, 'ready', readyHandler);\n        return;\n      }\n      if (!editor.getElement()) {\n        return;\n      }\n      if (!Env.contentEditable) {\n        return;\n      }\n      if (!settings.inline) {\n        editor.orgVisibility = editor.getElement().style.visibility;\n        editor.getElement().style.visibility = 'hidden';\n      } else {\n        editor.inline = true;\n      }\n      var form = editor.getElement().form || DOM$5.getParent(id, 'form');\n      if (form) {\n        editor.formElement = form;\n        if (settings.hidden_input && !/TEXTAREA|INPUT/i.test(editor.getElement().nodeName)) {\n          DOM$5.insertAfter(DOM$5.create('input', {\n            type: 'hidden',\n            name: id\n          }), id);\n          editor.hasHiddenInput = true;\n        }\n        editor.formEventDelegate = function (e) {\n          editor.fire(e.type, e);\n        };\n        DOM$5.bind(form, 'submit reset', editor.formEventDelegate);\n        editor.on('reset', function () {\n          editor.setContent(editor.startContent, { format: 'raw' });\n        });\n        if (settings.submit_patch && !form.submit.nodeType && !form.submit.length && !form._mceOldSubmit) {\n          form._mceOldSubmit = form.submit;\n          form.submit = function () {\n            editor.editorManager.triggerSave();\n            editor.setDirty(false);\n            return form._mceOldSubmit(form);\n          };\n        }\n      }\n      editor.windowManager = WindowManager(editor);\n      editor.notificationManager = NotificationManager(editor);\n      if (settings.encoding === 'xml') {\n        editor.on('GetContent', function (e) {\n          if (e.save) {\n            e.content = DOM$5.encode(e.content);\n          }\n        });\n      }\n      if (settings.add_form_submit_trigger) {\n        editor.on('submit', function () {\n          if (editor.initialized) {\n            editor.save();\n          }\n        });\n      }\n      if (settings.add_unload_trigger) {\n        editor._beforeUnload = function () {\n          if (editor.initialized && !editor.destroyed && !editor.isHidden()) {\n            editor.save({\n              format: 'raw',\n              no_events: true,\n              set_dirty: false\n            });\n          }\n        };\n        editor.editorManager.on('BeforeUnload', editor._beforeUnload);\n      }\n      editor.editorManager.add(editor);\n      loadScripts(editor, editor.suffix);\n    };\n    var Render = { render: render };\n\n    var add$4 = function (editor, name, settings) {\n      var sidebars = editor.sidebars ? editor.sidebars : [];\n      sidebars.push({\n        name: name,\n        settings: settings\n      });\n      editor.sidebars = sidebars;\n    };\n    var Sidebar = { add: add$4 };\n\n    var each$k = Tools.each, trim$4 = Tools.trim;\n    var queryParts = 'source protocol authority userInfo user password host port relative path directory file query anchor'.split(' ');\n    var DEFAULT_PORTS = {\n      ftp: 21,\n      http: 80,\n      https: 443,\n      mailto: 25\n    };\n    var URI = function (url, settings) {\n      var self = this;\n      var baseUri, baseUrl;\n      url = trim$4(url);\n      settings = self.settings = settings || {};\n      baseUri = settings.base_uri;\n      if (/^([\\w\\-]+):([^\\/]{2})/i.test(url) || /^\\s*#/.test(url)) {\n        self.source = url;\n        return;\n      }\n      var isProtocolRelative = url.indexOf('//') === 0;\n      if (url.indexOf('/') === 0 && !isProtocolRelative) {\n        url = (baseUri ? baseUri.protocol || 'http' : 'http') + '://mce_host' + url;\n      }\n      if (!/^[\\w\\-]*:?\\/\\//.test(url)) {\n        baseUrl = settings.base_uri ? settings.base_uri.path : new URI(domGlobals.document.location.href).directory;\n        if (settings.base_uri.protocol == '') {\n          url = '//mce_host' + self.toAbsPath(baseUrl, url);\n        } else {\n          url = /([^#?]*)([#?]?.*)/.exec(url);\n          url = (baseUri && baseUri.protocol || 'http') + '://mce_host' + self.toAbsPath(baseUrl, url[1]) + url[2];\n        }\n      }\n      url = url.replace(/@@/g, '(mce_at)');\n      url = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(url);\n      each$k(queryParts, function (v, i) {\n        var part = url[i];\n        if (part) {\n          part = part.replace(/\\(mce_at\\)/g, '@@');\n        }\n        self[v] = part;\n      });\n      if (baseUri) {\n        if (!self.protocol) {\n          self.protocol = baseUri.protocol;\n        }\n        if (!self.userInfo) {\n          self.userInfo = baseUri.userInfo;\n        }\n        if (!self.port && self.host === 'mce_host') {\n          self.port = baseUri.port;\n        }\n        if (!self.host || self.host === 'mce_host') {\n          self.host = baseUri.host;\n        }\n        self.source = '';\n      }\n      if (isProtocolRelative) {\n        self.protocol = '';\n      }\n    };\n    URI.prototype = {\n      setPath: function (path) {\n        var self = this;\n        path = /^(.*?)\\/?(\\w+)?$/.exec(path);\n        self.path = path[0];\n        self.directory = path[1];\n        self.file = path[2];\n        self.source = '';\n        self.getURI();\n      },\n      toRelative: function (uri) {\n        var self = this;\n        var output;\n        if (uri === './') {\n          return uri;\n        }\n        uri = new URI(uri, { base_uri: self });\n        if (uri.host !== 'mce_host' && self.host !== uri.host && uri.host || self.port !== uri.port || self.protocol !== uri.protocol && uri.protocol !== '') {\n          return uri.getURI();\n        }\n        var tu = self.getURI(), uu = uri.getURI();\n        if (tu === uu || tu.charAt(tu.length - 1) === '/' && tu.substr(0, tu.length - 1) === uu) {\n          return tu;\n        }\n        output = self.toRelPath(self.path, uri.path);\n        if (uri.query) {\n          output += '?' + uri.query;\n        }\n        if (uri.anchor) {\n          output += '#' + uri.anchor;\n        }\n        return output;\n      },\n      toAbsolute: function (uri, noHost) {\n        uri = new URI(uri, { base_uri: this });\n        return uri.getURI(noHost && this.isSameOrigin(uri));\n      },\n      isSameOrigin: function (uri) {\n        if (this.host == uri.host && this.protocol == uri.protocol) {\n          if (this.port == uri.port) {\n            return true;\n          }\n          var defaultPort = DEFAULT_PORTS[this.protocol];\n          if (defaultPort && (this.port || defaultPort) == (uri.port || defaultPort)) {\n            return true;\n          }\n        }\n        return false;\n      },\n      toRelPath: function (base, path) {\n        var items, breakPoint = 0, out = '', i, l;\n        base = base.substring(0, base.lastIndexOf('/'));\n        base = base.split('/');\n        items = path.split('/');\n        if (base.length >= items.length) {\n          for (i = 0, l = base.length; i < l; i++) {\n            if (i >= items.length || base[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (base.length < items.length) {\n          for (i = 0, l = items.length; i < l; i++) {\n            if (i >= base.length || base[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (breakPoint === 1) {\n          return path;\n        }\n        for (i = 0, l = base.length - (breakPoint - 1); i < l; i++) {\n          out += '../';\n        }\n        for (i = breakPoint - 1, l = items.length; i < l; i++) {\n          if (i !== breakPoint - 1) {\n            out += '/' + items[i];\n          } else {\n            out += items[i];\n          }\n        }\n        return out;\n      },\n      toAbsPath: function (base, path) {\n        var i, nb = 0, o = [], tr, outPath;\n        tr = /\\/$/.test(path) ? '/' : '';\n        base = base.split('/');\n        path = path.split('/');\n        each$k(base, function (k) {\n          if (k) {\n            o.push(k);\n          }\n        });\n        base = o;\n        for (i = path.length - 1, o = []; i >= 0; i--) {\n          if (path[i].length === 0 || path[i] === '.') {\n            continue;\n          }\n          if (path[i] === '..') {\n            nb++;\n            continue;\n          }\n          if (nb > 0) {\n            nb--;\n            continue;\n          }\n          o.push(path[i]);\n        }\n        i = base.length - nb;\n        if (i <= 0) {\n          outPath = o.reverse().join('/');\n        } else {\n          outPath = base.slice(0, i).join('/') + '/' + o.reverse().join('/');\n        }\n        if (outPath.indexOf('/') !== 0) {\n          outPath = '/' + outPath;\n        }\n        if (tr && outPath.lastIndexOf('/') !== outPath.length - 1) {\n          outPath += tr;\n        }\n        return outPath;\n      },\n      getURI: function (noProtoHost) {\n        var s;\n        var self = this;\n        if (!self.source || noProtoHost) {\n          s = '';\n          if (!noProtoHost) {\n            if (self.protocol) {\n              s += self.protocol + '://';\n            } else {\n              s += '//';\n            }\n            if (self.userInfo) {\n              s += self.userInfo + '@';\n            }\n            if (self.host) {\n              s += self.host;\n            }\n            if (self.port) {\n              s += ':' + self.port;\n            }\n          }\n          if (self.path) {\n            s += self.path;\n          }\n          if (self.query) {\n            s += '?' + self.query;\n          }\n          if (self.anchor) {\n            s += '#' + self.anchor;\n          }\n          self.source = s;\n        }\n        return self.source;\n      }\n    };\n    URI.parseDataUri = function (uri) {\n      var type, matches;\n      uri = decodeURIComponent(uri).split(',');\n      matches = /data:([^;]+)/.exec(uri[0]);\n      if (matches) {\n        type = matches[1];\n      }\n      return {\n        type: type,\n        data: uri[1]\n      };\n    };\n    URI.getDocumentBaseUrl = function (loc) {\n      var baseUrl;\n      if (loc.protocol.indexOf('http') !== 0 && loc.protocol !== 'file:') {\n        baseUrl = loc.href;\n      } else {\n        baseUrl = loc.protocol + '//' + loc.host + loc.pathname;\n      }\n      if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(baseUrl)) {\n        baseUrl = baseUrl.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n        if (!/[\\/\\\\]$/.test(baseUrl)) {\n          baseUrl += '/';\n        }\n      }\n      return baseUrl;\n    };\n\n    var defaultFormat = 'html';\n    var trimEmptyContents = function (editor, html) {\n      var blockName = Settings.getForcedRootBlock(editor);\n      var emptyRegExp = new RegExp('^(<' + blockName + '[^>]*>(&nbsp;|&#160;|\\\\s|\\xA0|<br \\\\/>|)<\\\\/' + blockName + '>[\\r\\n]*|<br \\\\/>[\\r\\n]*)$');\n      return html.replace(emptyRegExp, '');\n    };\n    var getContentFromBody = function (editor, args, body) {\n      var content;\n      args.format = args.format ? args.format : defaultFormat;\n      args.get = true;\n      args.getInner = true;\n      if (!args.no_events) {\n        editor.fire('BeforeGetContent', args);\n      }\n      if (args.format === 'raw') {\n        content = Tools.trim(TrimHtml.trimExternal(editor.serializer, body.innerHTML));\n      } else if (args.format === 'text') {\n        content = Zwsp.trim(body.innerText || body.textContent);\n      } else if (args.format === 'tree') {\n        return editor.serializer.serialize(body, args);\n      } else {\n        content = trimEmptyContents(editor, editor.serializer.serialize(body, args));\n      }\n      if (args.format !== 'text' && !isWsPreserveElement(Element.fromDom(body))) {\n        args.content = Tools.trim(content);\n      } else {\n        args.content = content;\n      }\n      if (!args.no_events) {\n        editor.fire('GetContent', args);\n      }\n      return args.content;\n    };\n    var getContent$1 = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      return Option.from(editor.getBody()).fold(constant(args.format === 'tree' ? new Node$1('body', 11) : ''), function (body) {\n        return getContentFromBody(editor, args, body);\n      });\n    };\n\n    var traverse = function (node, fn) {\n      fn(node);\n      if (node.firstChild) {\n        traverse(node.firstChild, fn);\n      }\n      if (node.next) {\n        traverse(node.next, fn);\n      }\n    };\n    var findMatchingNodes = function (nodeFilters, attributeFilters, node) {\n      var nodeMatches = {};\n      var attrMatches = {};\n      var matches = [];\n      if (node.firstChild) {\n        traverse(node.firstChild, function (node) {\n          each(nodeFilters, function (filter) {\n            if (filter.name === node.name) {\n              if (nodeMatches[filter.name]) {\n                nodeMatches[filter.name].nodes.push(node);\n              } else {\n                nodeMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n          each(attributeFilters, function (filter) {\n            if (typeof node.attr(filter.name) === 'string') {\n              if (attrMatches[filter.name]) {\n                attrMatches[filter.name].nodes.push(node);\n              } else {\n                attrMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n        });\n      }\n      for (var name in nodeMatches) {\n        if (nodeMatches.hasOwnProperty(name)) {\n          matches.push(nodeMatches[name]);\n        }\n      }\n      for (var name in attrMatches) {\n        if (attrMatches.hasOwnProperty(name)) {\n          matches.push(attrMatches[name]);\n        }\n      }\n      return matches;\n    };\n    var filter$3 = function (nodeFilters, attributeFilters, node) {\n      var matches = findMatchingNodes(nodeFilters, attributeFilters, node);\n      each(matches, function (match) {\n        each(match.filter.callbacks, function (callback) {\n          callback(match.nodes, match.filter.name, {});\n        });\n      });\n    };\n\n    var defaultFormat$1 = 'html';\n    var isTreeNode = function (content) {\n      return content instanceof Node$1;\n    };\n    var moveSelection = function (editor) {\n      if (EditorFocus.hasFocus(editor)) {\n        CaretFinder.firstPositionIn(editor.getBody()).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = NodeType.isTable(node) ? CaretFinder.firstPositionIn(node).getOr(pos) : pos;\n          editor.selection.setRng(caretPos.toRange());\n        });\n      }\n    };\n    var setEditorHtml = function (editor, html) {\n      editor.dom.setHTML(editor.getBody(), html);\n      moveSelection(editor);\n    };\n    var setContentString = function (editor, body, content, args) {\n      var forcedRootBlockName, padd;\n      if (content.length === 0 || /^\\s+$/.test(content)) {\n        padd = '<br data-mce-bogus=\"1\">';\n        if (body.nodeName === 'TABLE') {\n          content = '<tr><td>' + padd + '</td></tr>';\n        } else if (/^(UL|OL)$/.test(body.nodeName)) {\n          content = '<li>' + padd + '</li>';\n        }\n        forcedRootBlockName = Settings.getForcedRootBlock(editor);\n        if (forcedRootBlockName && editor.schema.isValidChild(body.nodeName.toLowerCase(), forcedRootBlockName.toLowerCase())) {\n          content = padd;\n          content = editor.dom.createHTML(forcedRootBlockName, editor.settings.forced_root_block_attrs, content);\n        } else if (!content) {\n          content = '<br data-mce-bogus=\"1\">';\n        }\n        setEditorHtml(editor, content);\n        editor.fire('SetContent', args);\n      } else {\n        if (args.format !== 'raw') {\n          content = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(editor.parser.parse(content, {\n            isRootContent: true,\n            insert: true\n          }));\n        }\n        args.content = isWsPreserveElement(Element.fromDom(body)) ? content : Tools.trim(content);\n        setEditorHtml(editor, args.content);\n        if (!args.no_events) {\n          editor.fire('SetContent', args);\n        }\n      }\n      return args.content;\n    };\n    var setContentTree = function (editor, body, content, args) {\n      filter$3(editor.parser.getNodeFilters(), editor.parser.getAttributeFilters(), content);\n      var html = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(content);\n      args.content = isWsPreserveElement(Element.fromDom(body)) ? html : Tools.trim(html);\n      setEditorHtml(editor, args.content);\n      if (!args.no_events) {\n        editor.fire('SetContent', args);\n      }\n      return content;\n    };\n    var setContent$1 = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      args.format = args.format ? args.format : defaultFormat$1;\n      args.set = true;\n      args.content = isTreeNode(content) ? '' : content;\n      if (!isTreeNode(content) && !args.no_events) {\n        editor.fire('BeforeSetContent', args);\n        content = args.content;\n      }\n      return Option.from(editor.getBody()).fold(constant(content), function (body) {\n        return isTreeNode(content) ? setContentTree(editor, body, content, args) : setContentString(editor, body, content, args);\n      });\n    };\n\n    var DOM$6 = DOMUtils$1.DOM;\n    var restoreOriginalStyles = function (editor) {\n      DOM$6.setStyle(editor.id, 'display', editor.orgDisplay);\n    };\n    var safeDestroy = function (x) {\n      return Option.from(x).each(function (x) {\n        return x.destroy();\n      });\n    };\n    var clearDomReferences = function (editor) {\n      editor.contentAreaContainer = editor.formElement = editor.container = editor.editorContainer = null;\n      editor.bodyElement = editor.contentDocument = editor.contentWindow = null;\n      editor.iframeElement = editor.targetElm = null;\n      if (editor.selection) {\n        editor.selection = editor.selection.win = editor.selection.dom = editor.selection.dom.doc = null;\n      }\n    };\n    var restoreForm = function (editor) {\n      var form = editor.formElement;\n      if (form) {\n        if (form._mceOldSubmit) {\n          form.submit = form._mceOldSubmit;\n          form._mceOldSubmit = null;\n        }\n        DOM$6.unbind(form, 'submit reset', editor.formEventDelegate);\n      }\n    };\n    var remove$7 = function (editor) {\n      if (!editor.removed) {\n        var _selectionOverrides = editor._selectionOverrides, editorUpload = editor.editorUpload;\n        var body = editor.getBody();\n        var element = editor.getElement();\n        if (body) {\n          editor.save({ is_removing: true });\n        }\n        editor.removed = true;\n        editor.unbindAllNativeEvents();\n        if (editor.hasHiddenInput && element) {\n          DOM$6.remove(element.nextSibling);\n        }\n        Events.fireRemove(editor);\n        editor.editorManager.remove(editor);\n        if (!editor.inline && body) {\n          restoreOriginalStyles(editor);\n        }\n        Events.fireDetach(editor);\n        DOM$6.remove(editor.getContainer());\n        safeDestroy(_selectionOverrides);\n        safeDestroy(editorUpload);\n        editor.destroy();\n      }\n    };\n    var destroy = function (editor, automatic) {\n      var selection = editor.selection, dom = editor.dom;\n      if (editor.destroyed) {\n        return;\n      }\n      if (!automatic && !editor.removed) {\n        editor.remove();\n        return;\n      }\n      if (!automatic) {\n        editor.editorManager.off('beforeunload', editor._beforeUnload);\n        if (editor.theme && editor.theme.destroy) {\n          editor.theme.destroy();\n        }\n        safeDestroy(selection);\n        safeDestroy(dom);\n      }\n      restoreForm(editor);\n      clearDomReferences(editor);\n      editor.destroyed = true;\n    };\n\n    var DOM$7 = DOMUtils$1.DOM;\n    var extend$4 = Tools.extend, each$l = Tools.each;\n    var resolve$4 = Tools.resolve;\n    var ie$2 = Env.ie;\n    var Editor = function (id, settings, editorManager) {\n      var self = this;\n      var documentBaseUrl = self.documentBaseUrl = editorManager.documentBaseURL;\n      var baseUri = editorManager.baseURI;\n      settings = getEditorSettings(self, id, documentBaseUrl, editorManager.defaultSettings, settings);\n      self.settings = settings;\n      AddOnManager.language = settings.language || 'en';\n      AddOnManager.languageLoad = settings.language_load;\n      AddOnManager.baseURL = editorManager.baseURL;\n      self.id = id;\n      self.setDirty(false);\n      self.plugins = {};\n      self.documentBaseURI = new URI(settings.document_base_url, { base_uri: baseUri });\n      self.baseURI = baseUri;\n      self.contentCSS = [];\n      self.contentStyles = [];\n      self.shortcuts = new Shortcuts(self);\n      self.loadedCSS = {};\n      self.editorCommands = new EditorCommands(self);\n      self.suffix = editorManager.suffix;\n      self.editorManager = editorManager;\n      self.inline = settings.inline;\n      self.buttons = {};\n      self.menuItems = {};\n      if (settings.cache_suffix) {\n        Env.cacheSuffix = settings.cache_suffix.replace(/^[\\?\\&]+/, '');\n      }\n      if (settings.override_viewport === false) {\n        Env.overrideViewPort = false;\n      }\n      editorManager.fire('SetupEditor', { editor: self });\n      self.execCallback('setup', self);\n      self.$ = DomQuery.overrideDefaults(function () {\n        return {\n          context: self.inline ? self.getBody() : self.getDoc(),\n          element: self.getBody()\n        };\n      });\n    };\n    Editor.prototype = {\n      render: function () {\n        Render.render(this);\n      },\n      focus: function (skipFocus) {\n        EditorFocus.focus(this, skipFocus);\n      },\n      hasFocus: function () {\n        return EditorFocus.hasFocus(this);\n      },\n      execCallback: function (name) {\n        var x = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          x[_i - 1] = arguments[_i];\n        }\n        var self = this;\n        var callback = self.settings[name], scope;\n        if (!callback) {\n          return;\n        }\n        if (self.callbackLookup && (scope = self.callbackLookup[name])) {\n          callback = scope.func;\n          scope = scope.scope;\n        }\n        if (typeof callback === 'string') {\n          scope = callback.replace(/\\.\\w+$/, '');\n          scope = scope ? resolve$4(scope) : 0;\n          callback = resolve$4(callback);\n          self.callbackLookup = self.callbackLookup || {};\n          self.callbackLookup[name] = {\n            func: callback,\n            scope: scope\n          };\n        }\n        return callback.apply(scope || self, Array.prototype.slice.call(arguments, 1));\n      },\n      translate: function (text) {\n        if (text && Tools.is(text, 'string')) {\n          var lang_1 = this.settings.language || 'en', i18n_1 = this.editorManager.i18n;\n          text = i18n_1.data[lang_1 + '.' + text] || text.replace(/\\{\\#([^\\}]+)\\}/g, function (a, b) {\n            return i18n_1.data[lang_1 + '.' + b] || '{#' + b + '}';\n          });\n        }\n        return this.editorManager.translate(text);\n      },\n      getLang: function (name, defaultVal) {\n        return this.editorManager.i18n.data[(this.settings.language || 'en') + '.' + name] || (defaultVal !== undefined ? defaultVal : '{#' + name + '}');\n      },\n      getParam: function (name, defaultVal, type) {\n        return getParam(this, name, defaultVal, type);\n      },\n      nodeChanged: function (args) {\n        this._nodeChangeDispatcher.nodeChanged(args);\n      },\n      addButton: function (name, settings) {\n        var self = this;\n        if (settings.cmd) {\n          settings.onclick = function () {\n            self.execCommand(settings.cmd);\n          };\n        }\n        if (settings.stateSelector && typeof settings.active === 'undefined') {\n          settings.active = false;\n        }\n        if (!settings.text && !settings.icon) {\n          settings.icon = name;\n        }\n        settings.tooltip = settings.tooltip || settings.title;\n        self.buttons[name] = settings;\n      },\n      addSidebar: function (name, settings) {\n        return Sidebar.add(this, name, settings);\n      },\n      addMenuItem: function (name, settings) {\n        var self = this;\n        if (settings.cmd) {\n          settings.onclick = function () {\n            self.execCommand(settings.cmd);\n          };\n        }\n        self.menuItems[name] = settings;\n      },\n      addContextToolbar: function (predicate, items) {\n        var self = this;\n        var selector;\n        self.contextToolbars = self.contextToolbars || [];\n        if (typeof predicate === 'string') {\n          selector = predicate;\n          predicate = function (elm) {\n            return self.dom.is(elm, selector);\n          };\n        }\n        self.contextToolbars.push({\n          id: Uuid.uuid('mcet'),\n          predicate: predicate,\n          items: items\n        });\n      },\n      addCommand: function (name, callback, scope) {\n        this.editorCommands.addCommand(name, callback, scope);\n      },\n      addQueryStateHandler: function (name, callback, scope) {\n        this.editorCommands.addQueryStateHandler(name, callback, scope);\n      },\n      addQueryValueHandler: function (name, callback, scope) {\n        this.editorCommands.addQueryValueHandler(name, callback, scope);\n      },\n      addShortcut: function (pattern, desc, cmdFunc, scope) {\n        this.shortcuts.add(pattern, desc, cmdFunc, scope);\n      },\n      execCommand: function (cmd, ui, value, args) {\n        return this.editorCommands.execCommand(cmd, ui, value, args);\n      },\n      queryCommandState: function (cmd) {\n        return this.editorCommands.queryCommandState(cmd);\n      },\n      queryCommandValue: function (cmd) {\n        return this.editorCommands.queryCommandValue(cmd);\n      },\n      queryCommandSupported: function (cmd) {\n        return this.editorCommands.queryCommandSupported(cmd);\n      },\n      show: function () {\n        var self = this;\n        if (self.hidden) {\n          self.hidden = false;\n          if (self.inline) {\n            self.getBody().contentEditable = true;\n          } else {\n            DOM$7.show(self.getContainer());\n            DOM$7.hide(self.id);\n          }\n          self.load();\n          self.fire('show');\n        }\n      },\n      hide: function () {\n        var self = this, doc = self.getDoc();\n        if (!self.hidden) {\n          if (ie$2 && doc && !self.inline) {\n            doc.execCommand('SelectAll');\n          }\n          self.save();\n          if (self.inline) {\n            self.getBody().contentEditable = false;\n            if (self === self.editorManager.focusedEditor) {\n              self.editorManager.focusedEditor = null;\n            }\n          } else {\n            DOM$7.hide(self.getContainer());\n            DOM$7.setStyle(self.id, 'display', self.orgDisplay);\n          }\n          self.hidden = true;\n          self.fire('hide');\n        }\n      },\n      isHidden: function () {\n        return !!this.hidden;\n      },\n      setProgressState: function (state, time) {\n        this.fire('ProgressState', {\n          state: state,\n          time: time\n        });\n      },\n      load: function (args) {\n        var self = this;\n        var elm = self.getElement(), html;\n        if (self.removed) {\n          return '';\n        }\n        if (elm) {\n          args = args || {};\n          args.load = true;\n          html = self.setContent(elm.value !== undefined ? elm.value : elm.innerHTML, args);\n          args.element = elm;\n          if (!args.no_events) {\n            self.fire('LoadContent', args);\n          }\n          args.element = elm = null;\n          return html;\n        }\n      },\n      save: function (args) {\n        var self = this;\n        var elm = self.getElement(), html, form;\n        if (!elm || !self.initialized || self.removed) {\n          return;\n        }\n        args = args || {};\n        args.save = true;\n        args.element = elm;\n        html = args.content = self.getContent(args);\n        if (!args.no_events) {\n          self.fire('SaveContent', args);\n        }\n        if (args.format === 'raw') {\n          self.fire('RawSaveContent', args);\n        }\n        html = args.content;\n        if (!/TEXTAREA|INPUT/i.test(elm.nodeName)) {\n          if (args.is_removing || !self.inline) {\n            elm.innerHTML = html;\n          }\n          if (form = DOM$7.getParent(self.id, 'form')) {\n            each$l(form.elements, function (elm) {\n              if (elm.name === self.id) {\n                elm.value = html;\n                return false;\n              }\n            });\n          }\n        } else {\n          elm.value = html;\n        }\n        args.element = elm = null;\n        if (args.set_dirty !== false) {\n          self.setDirty(false);\n        }\n        return html;\n      },\n      setContent: function (content, args) {\n        return setContent$1(this, content, args);\n      },\n      getContent: function (args) {\n        return getContent$1(this, args);\n      },\n      insertContent: function (content, args) {\n        if (args) {\n          content = extend$4({ content: content }, args);\n        }\n        this.execCommand('mceInsertContent', false, content);\n      },\n      isDirty: function () {\n        return !this.isNotDirty;\n      },\n      setDirty: function (state) {\n        var oldState = !this.isNotDirty;\n        this.isNotDirty = !state;\n        if (state && state !== oldState) {\n          this.fire('dirty');\n        }\n      },\n      setMode: function (mode) {\n        setMode(this, mode);\n      },\n      getContainer: function () {\n        var self = this;\n        if (!self.container) {\n          self.container = DOM$7.get(self.editorContainer || self.id + '_parent');\n        }\n        return self.container;\n      },\n      getContentAreaContainer: function () {\n        return this.contentAreaContainer;\n      },\n      getElement: function () {\n        if (!this.targetElm) {\n          this.targetElm = DOM$7.get(this.id);\n        }\n        return this.targetElm;\n      },\n      getWin: function () {\n        var self = this;\n        var elm;\n        if (!self.contentWindow) {\n          elm = self.iframeElement;\n          if (elm) {\n            self.contentWindow = elm.contentWindow;\n          }\n        }\n        return self.contentWindow;\n      },\n      getDoc: function () {\n        var self = this;\n        var win;\n        if (!self.contentDocument) {\n          win = self.getWin();\n          if (win) {\n            self.contentDocument = win.document;\n          }\n        }\n        return self.contentDocument;\n      },\n      getBody: function () {\n        var doc = this.getDoc();\n        return this.bodyElement || (doc ? doc.body : null);\n      },\n      convertURL: function (url, name, elm) {\n        var self = this, settings = self.settings;\n        if (settings.urlconverter_callback) {\n          return self.execCallback('urlconverter_callback', url, elm, true, name);\n        }\n        if (!settings.convert_urls || elm && elm.nodeName === 'LINK' || url.indexOf('file:') === 0 || url.length === 0) {\n          return url;\n        }\n        if (settings.relative_urls) {\n          return self.documentBaseURI.toRelative(url);\n        }\n        url = self.documentBaseURI.toAbsolute(url, settings.remove_script_host);\n        return url;\n      },\n      addVisual: function (elm) {\n        var self = this;\n        var settings = self.settings;\n        var dom = self.dom;\n        var cls;\n        elm = elm || self.getBody();\n        if (self.hasVisual === undefined) {\n          self.hasVisual = settings.visual;\n        }\n        each$l(dom.select('table,a', elm), function (elm) {\n          var value;\n          switch (elm.nodeName) {\n          case 'TABLE':\n            cls = settings.visual_table_class || 'mce-item-table';\n            value = dom.getAttrib(elm, 'border');\n            if ((!value || value === '0') && self.hasVisual) {\n              dom.addClass(elm, cls);\n            } else {\n              dom.removeClass(elm, cls);\n            }\n            return;\n          case 'A':\n            if (!dom.getAttrib(elm, 'href')) {\n              value = dom.getAttrib(elm, 'name') || elm.id;\n              cls = settings.visual_anchor_class || 'mce-item-anchor';\n              if (value && self.hasVisual) {\n                dom.addClass(elm, cls);\n              } else {\n                dom.removeClass(elm, cls);\n              }\n            }\n            return;\n          }\n        });\n        self.fire('VisualAid', {\n          element: elm,\n          hasVisual: self.hasVisual\n        });\n      },\n      remove: function () {\n        remove$7(this);\n      },\n      destroy: function (automatic) {\n        destroy(this, automatic);\n      },\n      uploadImages: function (callback) {\n        return this.editorUpload.uploadImages(callback);\n      },\n      _scanForImages: function () {\n        return this.editorUpload.scanForImages();\n      }\n    };\n    extend$4(Editor.prototype, EditorObservable$1);\n\n    var isEditorUIElement = function (elm) {\n      return elm.className.toString().indexOf('mce-') !== -1;\n    };\n    var FocusManager = { isEditorUIElement: isEditorUIElement };\n\n    var isManualNodeChange = function (e) {\n      return e.type === 'nodechange' && e.selectionChange;\n    };\n    var registerPageMouseUp = function (editor, throttledStore) {\n      var mouseUpPage = function () {\n        throttledStore.throttle();\n      };\n      DOMUtils$1.DOM.bind(domGlobals.document, 'mouseup', mouseUpPage);\n      editor.on('remove', function () {\n        DOMUtils$1.DOM.unbind(domGlobals.document, 'mouseup', mouseUpPage);\n      });\n    };\n    var registerFocusOut = function (editor) {\n      editor.on('focusout', function () {\n        SelectionBookmark.store(editor);\n      });\n    };\n    var registerMouseUp = function (editor, throttledStore) {\n      editor.on('mouseup touchend', function (e) {\n        throttledStore.throttle();\n      });\n    };\n    var registerEditorEvents = function (editor, throttledStore) {\n      var browser = PlatformDetection$1.detect().browser;\n      if (browser.isIE()) {\n        registerFocusOut(editor);\n      } else {\n        registerMouseUp(editor, throttledStore);\n      }\n      editor.on('keyup nodechange', function (e) {\n        if (!isManualNodeChange(e)) {\n          SelectionBookmark.store(editor);\n        }\n      });\n    };\n    var register$3 = function (editor) {\n      var throttledStore = first(function () {\n        SelectionBookmark.store(editor);\n      }, 0);\n      if (editor.inline) {\n        registerPageMouseUp(editor, throttledStore);\n      }\n      editor.on('init', function () {\n        registerEditorEvents(editor, throttledStore);\n      });\n      editor.on('remove', function () {\n        throttledStore.cancel();\n      });\n    };\n    var SelectionRestore = { register: register$3 };\n\n    var documentFocusInHandler;\n    var DOM$8 = DOMUtils$1.DOM;\n    var isEditorUIElement$1 = function (elm) {\n      return FocusManager.isEditorUIElement(elm);\n    };\n    var isUIElement = function (editor, elm) {\n      var customSelector = editor ? editor.settings.custom_ui_selector : '';\n      var parent = DOM$8.getParent(elm, function (elm) {\n        return isEditorUIElement$1(elm) || (customSelector ? editor.dom.is(elm, customSelector) : false);\n      });\n      return parent !== null;\n    };\n    var getActiveElement = function () {\n      try {\n        return domGlobals.document.activeElement;\n      } catch (ex) {\n        return domGlobals.document.body;\n      }\n    };\n    var registerEvents = function (editorManager, e) {\n      var editor = e.editor;\n      SelectionRestore.register(editor);\n      editor.on('focusin', function () {\n        var self = this;\n        var focusedEditor = editorManager.focusedEditor;\n        if (focusedEditor !== self) {\n          if (focusedEditor) {\n            focusedEditor.fire('blur', { focusedEditor: self });\n          }\n          editorManager.setActive(self);\n          editorManager.focusedEditor = self;\n          self.fire('focus', { blurredEditor: focusedEditor });\n          self.focus(true);\n        }\n      });\n      editor.on('focusout', function () {\n        var self = this;\n        Delay.setEditorTimeout(self, function () {\n          var focusedEditor = editorManager.focusedEditor;\n          if (!isUIElement(self, getActiveElement()) && focusedEditor === self) {\n            self.fire('blur', { focusedEditor: null });\n            editorManager.focusedEditor = null;\n          }\n        });\n      });\n      if (!documentFocusInHandler) {\n        documentFocusInHandler = function (e) {\n          var activeEditor = editorManager.activeEditor;\n          var target;\n          target = e.target;\n          if (activeEditor && target.ownerDocument === domGlobals.document) {\n            if (target !== domGlobals.document.body && !isUIElement(activeEditor, target) && editorManager.focusedEditor === activeEditor) {\n              activeEditor.fire('blur', { focusedEditor: null });\n              editorManager.focusedEditor = null;\n            }\n          }\n        };\n        DOM$8.bind(domGlobals.document, 'focusin', documentFocusInHandler);\n      }\n    };\n    var unregisterDocumentEvents = function (editorManager, e) {\n      if (editorManager.focusedEditor === e.editor) {\n        editorManager.focusedEditor = null;\n      }\n      if (!editorManager.activeEditor) {\n        DOM$8.unbind(domGlobals.document, 'focusin', documentFocusInHandler);\n        documentFocusInHandler = null;\n      }\n    };\n    var setup$h = function (editorManager) {\n      editorManager.on('AddEditor', curry(registerEvents, editorManager));\n      editorManager.on('RemoveEditor', curry(unregisterDocumentEvents, editorManager));\n    };\n    var FocusController = {\n      setup: setup$h,\n      isEditorUIElement: isEditorUIElement$1,\n      isUIElement: isUIElement\n    };\n\n    var DOM$9 = DOMUtils$1.DOM;\n    var explode$4 = Tools.explode, each$m = Tools.each, extend$5 = Tools.extend;\n    var instanceCounter = 0, beforeUnloadDelegate, EditorManager, boundGlobalEvents = false;\n    var legacyEditors = [];\n    var editors = [];\n    var isValidLegacyKey = function (id) {\n      return id !== 'length';\n    };\n    var globalEventDelegate = function (e) {\n      var type = e.type;\n      each$m(EditorManager.get(), function (editor) {\n        switch (type) {\n        case 'scroll':\n          editor.fire('ScrollWindow', e);\n          break;\n        case 'resize':\n          editor.fire('ResizeWindow', e);\n          break;\n        }\n      });\n    };\n    var toggleGlobalEvents = function (state) {\n      if (state !== boundGlobalEvents) {\n        if (state) {\n          DomQuery(window).on('resize scroll', globalEventDelegate);\n        } else {\n          DomQuery(window).off('resize scroll', globalEventDelegate);\n        }\n        boundGlobalEvents = state;\n      }\n    };\n    var removeEditorFromList = function (targetEditor) {\n      var oldEditors = editors;\n      delete legacyEditors[targetEditor.id];\n      for (var i = 0; i < legacyEditors.length; i++) {\n        if (legacyEditors[i] === targetEditor) {\n          legacyEditors.splice(i, 1);\n          break;\n        }\n      }\n      editors = filter(editors, function (editor) {\n        return targetEditor !== editor;\n      });\n      if (EditorManager.activeEditor === targetEditor) {\n        EditorManager.activeEditor = editors.length > 0 ? editors[0] : null;\n      }\n      if (EditorManager.focusedEditor === targetEditor) {\n        EditorManager.focusedEditor = null;\n      }\n      return oldEditors.length !== editors.length;\n    };\n    var purgeDestroyedEditor = function (editor) {\n      if (editor && editor.initialized && !(editor.getContainer() || editor.getBody()).parentNode) {\n        removeEditorFromList(editor);\n        editor.unbindAllNativeEvents();\n        editor.destroy(true);\n        editor.removed = true;\n        editor = null;\n      }\n      return editor;\n    };\n    EditorManager = {\n      defaultSettings: {},\n      $: DomQuery,\n      majorVersion: '4',\n      minorVersion: '9.11',\n      releaseDate: '2020-07-13',\n      editors: legacyEditors,\n      i18n: I18n,\n      activeEditor: null,\n      settings: {},\n      setup: function () {\n        var self = this;\n        var baseURL, documentBaseURL, suffix = '';\n        documentBaseURL = URI.getDocumentBaseUrl(domGlobals.document.location);\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(documentBaseURL)) {\n          documentBaseURL = documentBaseURL.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(documentBaseURL)) {\n            documentBaseURL += '/';\n          }\n        }\n        var preInit = window.tinymce || window.tinyMCEPreInit;\n        if (preInit) {\n          baseURL = preInit.base || preInit.baseURL;\n          suffix = preInit.suffix;\n        } else {\n          var scripts = domGlobals.document.getElementsByTagName('script');\n          for (var i = 0; i < scripts.length; i++) {\n            var src = scripts[i].src || '';\n            if (src === '') {\n              continue;\n            }\n            var srcScript = src.substring(src.lastIndexOf('/'));\n            if (/tinymce(\\.full|\\.jquery|)(\\.min|\\.dev|)\\.js/.test(src)) {\n              if (srcScript.indexOf('.min') !== -1) {\n                suffix = '.min';\n              }\n              baseURL = src.substring(0, src.lastIndexOf('/'));\n              break;\n            }\n          }\n          if (!baseURL && domGlobals.document.currentScript) {\n            var src = domGlobals.document.currentScript.src;\n            if (src.indexOf('.min') !== -1) {\n              suffix = '.min';\n            }\n            baseURL = src.substring(0, src.lastIndexOf('/'));\n          }\n        }\n        self.baseURL = new URI(documentBaseURL).toAbsolute(baseURL);\n        self.documentBaseURL = documentBaseURL;\n        self.baseURI = new URI(self.baseURL);\n        self.suffix = suffix;\n        FocusController.setup(self);\n      },\n      overrideDefaults: function (defaultSettings) {\n        var baseUrl, suffix;\n        baseUrl = defaultSettings.base_url;\n        if (baseUrl) {\n          this.baseURL = new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\\/+$/, ''));\n          this.baseURI = new URI(this.baseURL);\n        }\n        suffix = defaultSettings.suffix;\n        if (defaultSettings.suffix) {\n          this.suffix = suffix;\n        }\n        this.defaultSettings = defaultSettings;\n        var pluginBaseUrls = defaultSettings.plugin_base_urls;\n        for (var name in pluginBaseUrls) {\n          AddOnManager.PluginManager.urls[name] = pluginBaseUrls[name];\n        }\n      },\n      init: function (settings) {\n        var self = this;\n        var result, invalidInlineTargets;\n        invalidInlineTargets = Tools.makeMap('area base basefont br col frame hr img input isindex link meta param embed source wbr track ' + 'colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu', ' ');\n        var isInvalidInlineTarget = function (settings, elm) {\n          return settings.inline && elm.tagName.toLowerCase() in invalidInlineTargets;\n        };\n        var createId = function (elm) {\n          var id = elm.id;\n          if (!id) {\n            id = elm.name;\n            if (id && !DOM$9.get(id)) {\n              id = elm.name;\n            } else {\n              id = DOM$9.uniqueId();\n            }\n            elm.setAttribute('id', id);\n          }\n          return id;\n        };\n        var execCallback = function (name) {\n          var callback = settings[name];\n          if (!callback) {\n            return;\n          }\n          return callback.apply(self, Array.prototype.slice.call(arguments, 2));\n        };\n        var hasClass = function (elm, className) {\n          return className.constructor === RegExp ? className.test(elm.className) : DOM$9.hasClass(elm, className);\n        };\n        var findTargets = function (settings) {\n          var l, targets = [];\n          if (Env.ie && Env.ie < 11) {\n            ErrorReporter.initError('TinyMCE does not support the browser you are using. For a list of supported' + ' browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/');\n            return [];\n          }\n          if (settings.types) {\n            each$m(settings.types, function (type) {\n              targets = targets.concat(DOM$9.select(type.selector));\n            });\n            return targets;\n          } else if (settings.selector) {\n            return DOM$9.select(settings.selector);\n          } else if (settings.target) {\n            return [settings.target];\n          }\n          switch (settings.mode) {\n          case 'exact':\n            l = settings.elements || '';\n            if (l.length > 0) {\n              each$m(explode$4(l), function (id) {\n                var elm;\n                if (elm = DOM$9.get(id)) {\n                  targets.push(elm);\n                } else {\n                  each$m(domGlobals.document.forms, function (f) {\n                    each$m(f.elements, function (e) {\n                      if (e.name === id) {\n                        id = 'mce_editor_' + instanceCounter++;\n                        DOM$9.setAttrib(e, 'id', id);\n                        targets.push(e);\n                      }\n                    });\n                  });\n                }\n              });\n            }\n            break;\n          case 'textareas':\n          case 'specific_textareas':\n            each$m(DOM$9.select('textarea'), function (elm) {\n              if (settings.editor_deselector && hasClass(elm, settings.editor_deselector)) {\n                return;\n              }\n              if (!settings.editor_selector || hasClass(elm, settings.editor_selector)) {\n                targets.push(elm);\n              }\n            });\n            break;\n          }\n          return targets;\n        };\n        var provideResults = function (editors) {\n          result = editors;\n        };\n        var initEditors = function () {\n          var initCount = 0;\n          var editors = [];\n          var targets;\n          var createEditor = function (id, settings, targetElm) {\n            var editor = new Editor(id, settings, self);\n            editors.push(editor);\n            editor.on('init', function () {\n              if (++initCount === targets.length) {\n                provideResults(editors);\n              }\n            });\n            editor.targetElm = editor.targetElm || targetElm;\n            editor.render();\n          };\n          DOM$9.unbind(window, 'ready', initEditors);\n          execCallback('onpageload');\n          targets = DomQuery.unique(findTargets(settings));\n          if (settings.types) {\n            each$m(settings.types, function (type) {\n              Tools.each(targets, function (elm) {\n                if (DOM$9.is(elm, type.selector)) {\n                  createEditor(createId(elm), extend$5({}, settings, type), elm);\n                  return false;\n                }\n                return true;\n              });\n            });\n            return;\n          }\n          Tools.each(targets, function (elm) {\n            purgeDestroyedEditor(self.get(elm.id));\n          });\n          targets = Tools.grep(targets, function (elm) {\n            return !self.get(elm.id);\n          });\n          if (targets.length === 0) {\n            provideResults([]);\n          } else {\n            each$m(targets, function (elm) {\n              if (isInvalidInlineTarget(settings, elm)) {\n                ErrorReporter.initError('Could not initialize inline editor on invalid inline target element', elm);\n              } else {\n                createEditor(createId(elm), settings, elm);\n              }\n            });\n          }\n        };\n        self.settings = settings;\n        DOM$9.bind(window, 'ready', initEditors);\n        return new promiseObj(function (resolve) {\n          if (result) {\n            resolve(result);\n          } else {\n            provideResults = function (editors) {\n              resolve(editors);\n            };\n          }\n        });\n      },\n      get: function (id) {\n        if (arguments.length === 0) {\n          return editors.slice(0);\n        } else if (isString(id)) {\n          return find(editors, function (editor) {\n            return editor.id === id;\n          }).getOr(null);\n        } else if (isNumber(id)) {\n          return editors[id] ? editors[id] : null;\n        } else {\n          return null;\n        }\n      },\n      add: function (editor) {\n        var self = this;\n        var existingEditor;\n        existingEditor = legacyEditors[editor.id];\n        if (existingEditor === editor) {\n          return editor;\n        }\n        if (self.get(editor.id) === null) {\n          if (isValidLegacyKey(editor.id)) {\n            legacyEditors[editor.id] = editor;\n          }\n          legacyEditors.push(editor);\n          editors.push(editor);\n        }\n        toggleGlobalEvents(true);\n        self.activeEditor = editor;\n        self.fire('AddEditor', { editor: editor });\n        if (!beforeUnloadDelegate) {\n          beforeUnloadDelegate = function () {\n            self.fire('BeforeUnload');\n          };\n          DOM$9.bind(window, 'beforeunload', beforeUnloadDelegate);\n        }\n        return editor;\n      },\n      createEditor: function (id, settings) {\n        return this.add(new Editor(id, settings, this));\n      },\n      remove: function (selector) {\n        var self = this;\n        var i, editor;\n        if (!selector) {\n          for (i = editors.length - 1; i >= 0; i--) {\n            self.remove(editors[i]);\n          }\n          return;\n        }\n        if (isString(selector)) {\n          each$m(DOM$9.select(selector), function (elm) {\n            editor = self.get(elm.id);\n            if (editor) {\n              self.remove(editor);\n            }\n          });\n          return;\n        }\n        editor = selector;\n        if (isNull(self.get(editor.id))) {\n          return null;\n        }\n        if (removeEditorFromList(editor)) {\n          self.fire('RemoveEditor', { editor: editor });\n        }\n        if (editors.length === 0) {\n          DOM$9.unbind(window, 'beforeunload', beforeUnloadDelegate);\n        }\n        editor.remove();\n        toggleGlobalEvents(editors.length > 0);\n        return editor;\n      },\n      execCommand: function (cmd, ui, value) {\n        var self = this, editor = self.get(value);\n        switch (cmd) {\n        case 'mceAddEditor':\n          if (!self.get(value)) {\n            new Editor(value, self.settings, self).render();\n          }\n          return true;\n        case 'mceRemoveEditor':\n          if (editor) {\n            editor.remove();\n          }\n          return true;\n        case 'mceToggleEditor':\n          if (!editor) {\n            self.execCommand('mceAddEditor', 0, value);\n            return true;\n          }\n          if (editor.isHidden()) {\n            editor.show();\n          } else {\n            editor.hide();\n          }\n          return true;\n        }\n        if (self.activeEditor) {\n          return self.activeEditor.execCommand(cmd, ui, value);\n        }\n        return false;\n      },\n      triggerSave: function () {\n        each$m(editors, function (editor) {\n          editor.save();\n        });\n      },\n      addI18n: function (code, items) {\n        I18n.add(code, items);\n      },\n      translate: function (text) {\n        return I18n.translate(text);\n      },\n      setActive: function (editor) {\n        var activeEditor = this.activeEditor;\n        if (this.activeEditor !== editor) {\n          if (activeEditor) {\n            activeEditor.fire('deactivate', { relatedTarget: editor });\n          }\n          editor.fire('activate', { relatedTarget: activeEditor });\n        }\n        this.activeEditor = editor;\n      }\n    };\n    extend$5(EditorManager, Observable);\n    EditorManager.setup();\n    var EditorManager$1 = EditorManager;\n\n    function RangeUtils(dom) {\n      var walk = function (rng, callback) {\n        return RangeWalk.walk(dom, rng, callback);\n      };\n      var split = SplitRange.split;\n      var normalize = function (rng) {\n        return NormalizeRange.normalize(dom, rng).fold(constant(false), function (normalizedRng) {\n          rng.setStart(normalizedRng.startContainer, normalizedRng.startOffset);\n          rng.setEnd(normalizedRng.endContainer, normalizedRng.endOffset);\n          return true;\n        });\n      };\n      return {\n        walk: walk,\n        split: split,\n        normalize: normalize\n      };\n    }\n    (function (RangeUtils) {\n      RangeUtils.compareRanges = RangeCompare.isEq;\n      RangeUtils.getCaretRangeFromPoint = CaretRangeFromPoint.fromPoint;\n      RangeUtils.getSelectedNode = getSelectedNode;\n      RangeUtils.getNode = getNode;\n    }(RangeUtils || (RangeUtils = {})));\n    var RangeUtils$1 = RangeUtils;\n\n    var min = Math.min, max = Math.max, round$2 = Math.round;\n    var relativePosition = function (rect, targetRect, rel) {\n      var x, y, w, h, targetW, targetH;\n      x = targetRect.x;\n      y = targetRect.y;\n      w = rect.w;\n      h = rect.h;\n      targetW = targetRect.w;\n      targetH = targetRect.h;\n      rel = (rel || '').split('');\n      if (rel[0] === 'b') {\n        y += targetH;\n      }\n      if (rel[1] === 'r') {\n        x += targetW;\n      }\n      if (rel[0] === 'c') {\n        y += round$2(targetH / 2);\n      }\n      if (rel[1] === 'c') {\n        x += round$2(targetW / 2);\n      }\n      if (rel[3] === 'b') {\n        y -= h;\n      }\n      if (rel[4] === 'r') {\n        x -= w;\n      }\n      if (rel[3] === 'c') {\n        y -= round$2(h / 2);\n      }\n      if (rel[4] === 'c') {\n        x -= round$2(w / 2);\n      }\n      return create$4(x, y, w, h);\n    };\n    var findBestRelativePosition = function (rect, targetRect, constrainRect, rels) {\n      var pos, i;\n      for (i = 0; i < rels.length; i++) {\n        pos = relativePosition(rect, targetRect, rels[i]);\n        if (pos.x >= constrainRect.x && pos.x + pos.w <= constrainRect.w + constrainRect.x && pos.y >= constrainRect.y && pos.y + pos.h <= constrainRect.h + constrainRect.y) {\n          return rels[i];\n        }\n      }\n      return null;\n    };\n    var inflate = function (rect, w, h) {\n      return create$4(rect.x - w, rect.y - h, rect.w + w * 2, rect.h + h * 2);\n    };\n    var intersect = function (rect, cropRect) {\n      var x1, y1, x2, y2;\n      x1 = max(rect.x, cropRect.x);\n      y1 = max(rect.y, cropRect.y);\n      x2 = min(rect.x + rect.w, cropRect.x + cropRect.w);\n      y2 = min(rect.y + rect.h, cropRect.y + cropRect.h);\n      if (x2 - x1 < 0 || y2 - y1 < 0) {\n        return null;\n      }\n      return create$4(x1, y1, x2 - x1, y2 - y1);\n    };\n    var clamp$1 = function (rect, clampRect, fixedSize) {\n      var underflowX1, underflowY1, overflowX2, overflowY2, x1, y1, x2, y2, cx2, cy2;\n      x1 = rect.x;\n      y1 = rect.y;\n      x2 = rect.x + rect.w;\n      y2 = rect.y + rect.h;\n      cx2 = clampRect.x + clampRect.w;\n      cy2 = clampRect.y + clampRect.h;\n      underflowX1 = max(0, clampRect.x - x1);\n      underflowY1 = max(0, clampRect.y - y1);\n      overflowX2 = max(0, x2 - cx2);\n      overflowY2 = max(0, y2 - cy2);\n      x1 += underflowX1;\n      y1 += underflowY1;\n      if (fixedSize) {\n        x2 += underflowX1;\n        y2 += underflowY1;\n        x1 -= overflowX2;\n        y1 -= overflowY2;\n      }\n      x2 -= overflowX2;\n      y2 -= overflowY2;\n      return create$4(x1, y1, x2 - x1, y2 - y1);\n    };\n    var create$4 = function (x, y, w, h) {\n      return {\n        x: x,\n        y: y,\n        w: w,\n        h: h\n      };\n    };\n    var fromClientRect = function (clientRect) {\n      return create$4(clientRect.left, clientRect.top, clientRect.width, clientRect.height);\n    };\n    var Rect = {\n      inflate: inflate,\n      relativePosition: relativePosition,\n      findBestRelativePosition: findBestRelativePosition,\n      intersect: intersect,\n      clamp: clamp$1,\n      create: create$4,\n      fromClientRect: fromClientRect\n    };\n\n    var types = {};\n    var Factory = {\n      add: function (type, typeClass) {\n        types[type.toLowerCase()] = typeClass;\n      },\n      has: function (type) {\n        return !!types[type.toLowerCase()];\n      },\n      get: function (type) {\n        var lctype = type.toLowerCase();\n        var controlType = types.hasOwnProperty(lctype) ? types[lctype] : null;\n        if (controlType === null) {\n          throw new Error('Could not find module for type: ' + type);\n        }\n        return controlType;\n      },\n      create: function (type, settings) {\n        var ControlType;\n        if (typeof type === 'string') {\n          settings = settings || {};\n          settings.type = type;\n        } else {\n          settings = type;\n          type = settings.type;\n        }\n        type = type.toLowerCase();\n        ControlType = types[type];\n        if (!ControlType) {\n          throw new Error('Could not find control by type: ' + type);\n        }\n        ControlType = new ControlType(settings);\n        ControlType.type = type;\n        return ControlType;\n      }\n    };\n\n    var each$n = Tools.each, extend$6 = Tools.extend;\n    var extendClass, initializing;\n    var Class = function () {\n    };\n    Class.extend = extendClass = function (prop) {\n      var self = this;\n      var _super = self.prototype;\n      var prototype, name, member;\n      var Class = function () {\n        var i, mixins, mixin;\n        var self = this;\n        if (!initializing) {\n          if (self.init) {\n            self.init.apply(self, arguments);\n          }\n          mixins = self.Mixins;\n          if (mixins) {\n            i = mixins.length;\n            while (i--) {\n              mixin = mixins[i];\n              if (mixin.init) {\n                mixin.init.apply(self, arguments);\n              }\n            }\n          }\n        }\n      };\n      var dummy = function () {\n        return this;\n      };\n      var createMethod = function (name, fn) {\n        return function () {\n          var self = this;\n          var tmp = self._super;\n          var ret;\n          self._super = _super[name];\n          ret = fn.apply(self, arguments);\n          self._super = tmp;\n          return ret;\n        };\n      };\n      initializing = true;\n      prototype = new self();\n      initializing = false;\n      if (prop.Mixins) {\n        each$n(prop.Mixins, function (mixin) {\n          for (var name_1 in mixin) {\n            if (name_1 !== 'init') {\n              prop[name_1] = mixin[name_1];\n            }\n          }\n        });\n        if (_super.Mixins) {\n          prop.Mixins = _super.Mixins.concat(prop.Mixins);\n        }\n      }\n      if (prop.Methods) {\n        each$n(prop.Methods.split(','), function (name) {\n          prop[name] = dummy;\n        });\n      }\n      if (prop.Properties) {\n        each$n(prop.Properties.split(','), function (name) {\n          var fieldName = '_' + name;\n          prop[name] = function (value) {\n            var self = this;\n            if (value !== undefined) {\n              self[fieldName] = value;\n              return self;\n            }\n            return self[fieldName];\n          };\n        });\n      }\n      if (prop.Statics) {\n        each$n(prop.Statics, function (func, name) {\n          Class[name] = func;\n        });\n      }\n      if (prop.Defaults && _super.Defaults) {\n        prop.Defaults = extend$6({}, _super.Defaults, prop.Defaults);\n      }\n      for (name in prop) {\n        member = prop[name];\n        if (typeof member === 'function' && _super[name]) {\n          prototype[name] = createMethod(name, member);\n        } else {\n          prototype[name] = member;\n        }\n      }\n      Class.prototype = prototype;\n      Class.constructor = Class;\n      Class.extend = extendClass;\n      return Class;\n    };\n\n    var min$1 = Math.min, max$1 = Math.max, round$3 = Math.round;\n    var Color = function (value) {\n      var self = {};\n      var r = 0, g = 0, b = 0;\n      var rgb2hsv = function (r, g, b) {\n        var h, s, v, d, minRGB, maxRGB;\n        h = 0;\n        s = 0;\n        v = 0;\n        r = r / 255;\n        g = g / 255;\n        b = b / 255;\n        minRGB = min$1(r, min$1(g, b));\n        maxRGB = max$1(r, max$1(g, b));\n        if (minRGB === maxRGB) {\n          v = minRGB;\n          return {\n            h: 0,\n            s: 0,\n            v: v * 100\n          };\n        }\n        d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n        h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n        h = 60 * (h - d / (maxRGB - minRGB));\n        s = (maxRGB - minRGB) / maxRGB;\n        v = maxRGB;\n        return {\n          h: round$3(h),\n          s: round$3(s * 100),\n          v: round$3(v * 100)\n        };\n      };\n      var hsvToRgb = function (hue, saturation, brightness) {\n        var side, chroma, x, match;\n        hue = (parseInt(hue, 10) || 0) % 360;\n        saturation = parseInt(saturation, 10) / 100;\n        brightness = parseInt(brightness, 10) / 100;\n        saturation = max$1(0, min$1(saturation, 1));\n        brightness = max$1(0, min$1(brightness, 1));\n        if (saturation === 0) {\n          r = g = b = round$3(255 * brightness);\n          return;\n        }\n        side = hue / 60;\n        chroma = brightness * saturation;\n        x = chroma * (1 - Math.abs(side % 2 - 1));\n        match = brightness - chroma;\n        switch (Math.floor(side)) {\n        case 0:\n          r = chroma;\n          g = x;\n          b = 0;\n          break;\n        case 1:\n          r = x;\n          g = chroma;\n          b = 0;\n          break;\n        case 2:\n          r = 0;\n          g = chroma;\n          b = x;\n          break;\n        case 3:\n          r = 0;\n          g = x;\n          b = chroma;\n          break;\n        case 4:\n          r = x;\n          g = 0;\n          b = chroma;\n          break;\n        case 5:\n          r = chroma;\n          g = 0;\n          b = x;\n          break;\n        default:\n          r = g = b = 0;\n        }\n        r = round$3(255 * (r + match));\n        g = round$3(255 * (g + match));\n        b = round$3(255 * (b + match));\n      };\n      var toHex = function () {\n        var hex = function (val) {\n          val = parseInt(val, 10).toString(16);\n          return val.length > 1 ? val : '0' + val;\n        };\n        return '#' + hex(r) + hex(g) + hex(b);\n      };\n      var toRgb = function () {\n        return {\n          r: r,\n          g: g,\n          b: b\n        };\n      };\n      var toHsv = function () {\n        return rgb2hsv(r, g, b);\n      };\n      var parse = function (value) {\n        var matches;\n        if (typeof value === 'object') {\n          if ('r' in value) {\n            r = value.r;\n            g = value.g;\n            b = value.b;\n          } else if ('v' in value) {\n            hsvToRgb(value.h, value.s, value.v);\n          }\n        } else {\n          if (matches = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)[^\\)]*\\)/gi.exec(value)) {\n            r = parseInt(matches[1], 10);\n            g = parseInt(matches[2], 10);\n            b = parseInt(matches[3], 10);\n          } else if (matches = /#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value)) {\n            r = parseInt(matches[1], 16);\n            g = parseInt(matches[2], 16);\n            b = parseInt(matches[3], 16);\n          } else if (matches = /#([0-F])([0-F])([0-F])/gi.exec(value)) {\n            r = parseInt(matches[1] + matches[1], 16);\n            g = parseInt(matches[2] + matches[2], 16);\n            b = parseInt(matches[3] + matches[3], 16);\n          }\n        }\n        r = r < 0 ? 0 : r > 255 ? 255 : r;\n        g = g < 0 ? 0 : g > 255 ? 255 : g;\n        b = b < 0 ? 0 : b > 255 ? 255 : b;\n        return self;\n      };\n      if (value) {\n        parse(value);\n      }\n      self.toRgb = toRgb;\n      self.toHsv = toHsv;\n      self.toHex = toHex;\n      self.parse = parse;\n      return self;\n    };\n\n    var serialize = function (o, quote) {\n      var i, v, t, name;\n      quote = quote || '\"';\n      if (o === null) {\n        return 'null';\n      }\n      t = typeof o;\n      if (t === 'string') {\n        v = '\\bb\\tt\\nn\\ff\\rr\"\"\\'\\'\\\\\\\\';\n        return quote + o.replace(/([\\u0080-\\uFFFF\\x00-\\x1f\\\"\\'\\\\])/g, function (a, b) {\n          if (quote === '\"' && a === '\\'') {\n            return a;\n          }\n          i = v.indexOf(b);\n          if (i + 1) {\n            return '\\\\' + v.charAt(i + 1);\n          }\n          a = b.charCodeAt().toString(16);\n          return '\\\\u' + '0000'.substring(a.length) + a;\n        }) + quote;\n      }\n      if (t === 'object') {\n        if (o.hasOwnProperty && Object.prototype.toString.call(o) === '[object Array]') {\n          for (i = 0, v = '['; i < o.length; i++) {\n            v += (i > 0 ? ',' : '') + serialize(o[i], quote);\n          }\n          return v + ']';\n        }\n        v = '{';\n        for (name in o) {\n          if (o.hasOwnProperty(name)) {\n            v += typeof o[name] !== 'function' ? (v.length > 1 ? ',' + quote : quote) + name + quote + ':' + serialize(o[name], quote) : '';\n          }\n        }\n        return v + '}';\n      }\n      return '' + o;\n    };\n    var JSON$1 = {\n      serialize: serialize,\n      parse: function (text) {\n        try {\n          return JSON.parse(text);\n        } catch (ex) {\n        }\n      }\n    };\n\n    var JSONP = {\n      callbacks: {},\n      count: 0,\n      send: function (settings) {\n        var self = this, dom = DOMUtils$1.DOM, count = settings.count !== undefined ? settings.count : self.count;\n        var id = 'tinymce_jsonp_' + count;\n        self.callbacks[count] = function (json) {\n          dom.remove(id);\n          delete self.callbacks[count];\n          settings.callback(json);\n        };\n        dom.add(dom.doc.body, 'script', {\n          id: id,\n          src: settings.url,\n          type: 'text/javascript'\n        });\n        self.count++;\n      }\n    };\n\n    var XHR = {\n      send: function (settings) {\n        var xhr, count = 0;\n        var ready = function () {\n          if (!settings.async || xhr.readyState === 4 || count++ > 10000) {\n            if (settings.success && count < 10000 && xhr.status === 200) {\n              settings.success.call(settings.success_scope, '' + xhr.responseText, xhr, settings);\n            } else if (settings.error) {\n              settings.error.call(settings.error_scope, count > 10000 ? 'TIMED_OUT' : 'GENERAL', xhr, settings);\n            }\n            xhr = null;\n          } else {\n            setTimeout(ready, 10);\n          }\n        };\n        settings.scope = settings.scope || this;\n        settings.success_scope = settings.success_scope || settings.scope;\n        settings.error_scope = settings.error_scope || settings.scope;\n        settings.async = settings.async === false ? false : true;\n        settings.data = settings.data || '';\n        XHR.fire('beforeInitialize', { settings: settings });\n        xhr = XMLHttpRequest();\n        if (xhr) {\n          if (xhr.overrideMimeType) {\n            xhr.overrideMimeType(settings.content_type);\n          }\n          xhr.open(settings.type || (settings.data ? 'POST' : 'GET'), settings.url, settings.async);\n          if (settings.crossDomain) {\n            xhr.withCredentials = true;\n          }\n          if (settings.content_type) {\n            xhr.setRequestHeader('Content-Type', settings.content_type);\n          }\n          if (settings.requestheaders) {\n            Tools.each(settings.requestheaders, function (header) {\n              xhr.setRequestHeader(header.key, header.value);\n            });\n          }\n          xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n          xhr = XHR.fire('beforeSend', {\n            xhr: xhr,\n            settings: settings\n          }).xhr;\n          xhr.send(settings.data);\n          if (!settings.async) {\n            return ready();\n          }\n          setTimeout(ready, 10);\n        }\n      }\n    };\n    Tools.extend(XHR, Observable);\n\n    var extend$7 = Tools.extend;\n    var JSONRequest = function (settings) {\n      this.settings = extend$7({}, settings);\n      this.count = 0;\n    };\n    JSONRequest.sendRPC = function (o) {\n      return new JSONRequest().send(o);\n    };\n    JSONRequest.prototype = {\n      send: function (args) {\n        var ecb = args.error, scb = args.success;\n        args = extend$7(this.settings, args);\n        args.success = function (c, x) {\n          c = JSON$1.parse(c);\n          if (typeof c === 'undefined') {\n            c = { error: 'JSON Parse error.' };\n          }\n          if (c.error) {\n            ecb.call(args.error_scope || args.scope, c.error, x);\n          } else {\n            scb.call(args.success_scope || args.scope, c.result);\n          }\n        };\n        args.error = function (ty, x) {\n          if (ecb) {\n            ecb.call(args.error_scope || args.scope, ty, x);\n          }\n        };\n        args.data = JSON$1.serialize({\n          id: args.id || 'c' + this.count++,\n          method: args.method,\n          params: args.params\n        });\n        args.content_type = 'application/json';\n        XHR.send(args);\n      }\n    };\n\n    var create$5 = function () {\n      return function () {\n        var data = {};\n        var keys = [];\n        var storage = {\n          getItem: function (key) {\n            var item = data[key];\n            return item ? item : null;\n          },\n          setItem: function (key, value) {\n            keys.push(key);\n            data[key] = String(value);\n          },\n          key: function (index) {\n            return keys[index];\n          },\n          removeItem: function (key) {\n            keys = keys.filter(function (k) {\n              return k === key;\n            });\n            delete data[key];\n          },\n          clear: function () {\n            keys = [];\n            data = {};\n          },\n          length: 0\n        };\n        Object.defineProperty(storage, 'length', {\n          get: function () {\n            return keys.length;\n          },\n          configurable: false,\n          enumerable: false\n        });\n        return storage;\n      }();\n    };\n\n    var localStorage;\n    try {\n      localStorage = domGlobals.window.localStorage;\n    } catch (e) {\n      localStorage = create$5();\n    }\n    var LocalStorage = localStorage;\n\n    var tinymce = EditorManager$1;\n    var publicApi = {\n      geom: { Rect: Rect },\n      util: {\n        Promise: promiseObj,\n        Delay: Delay,\n        Tools: Tools,\n        VK: VK,\n        URI: URI,\n        Class: Class,\n        EventDispatcher: Dispatcher,\n        Observable: Observable,\n        I18n: I18n,\n        XHR: XHR,\n        JSON: JSON$1,\n        JSONRequest: JSONRequest,\n        JSONP: JSONP,\n        LocalStorage: LocalStorage,\n        Color: Color\n      },\n      dom: {\n        EventUtils: EventUtils,\n        Sizzle: Sizzle,\n        DomQuery: DomQuery,\n        TreeWalker: TreeWalker,\n        DOMUtils: DOMUtils$1,\n        ScriptLoader: ScriptLoader,\n        RangeUtils: RangeUtils$1,\n        Serializer: DomSerializer$1,\n        ControlSelection: ControlSelection,\n        BookmarkManager: BookmarkManager$1,\n        Selection: Selection$1,\n        Event: EventUtils.Event\n      },\n      html: {\n        Styles: Styles,\n        Entities: Entities,\n        Node: Node$1,\n        Schema: Schema,\n        SaxParser: SaxParser$1,\n        DomParser: DomParser,\n        Writer: Writer,\n        Serializer: HtmlSerializer\n      },\n      ui: { Factory: Factory },\n      Env: Env,\n      AddOnManager: AddOnManager,\n      Annotator: Annotator,\n      Formatter: Formatter,\n      UndoManager: UndoManager,\n      EditorCommands: EditorCommands,\n      WindowManager: WindowManager,\n      NotificationManager: NotificationManager,\n      EditorObservable: EditorObservable$1,\n      Shortcuts: Shortcuts,\n      Editor: Editor,\n      FocusManager: FocusManager,\n      EditorManager: EditorManager$1,\n      DOM: DOMUtils$1.DOM,\n      ScriptLoader: ScriptLoader.ScriptLoader,\n      PluginManager: AddOnManager.PluginManager,\n      ThemeManager: AddOnManager.ThemeManager,\n      trim: Tools.trim,\n      isArray: Tools.isArray,\n      is: Tools.is,\n      toArray: Tools.toArray,\n      makeMap: Tools.makeMap,\n      each: Tools.each,\n      map: Tools.map,\n      grep: Tools.grep,\n      inArray: Tools.inArray,\n      extend: Tools.extend,\n      create: Tools.create,\n      walk: Tools.walk,\n      createNS: Tools.createNS,\n      resolve: Tools.resolve,\n      explode: Tools.explode,\n      _addCacheSuffix: Tools._addCacheSuffix,\n      isOpera: Env.opera,\n      isWebKit: Env.webkit,\n      isIE: Env.ie,\n      isGecko: Env.gecko,\n      isMac: Env.mac\n    };\n    tinymce = Tools.extend(tinymce, publicApi);\n    var Tinymce = tinymce;\n\n    var exportToModuleLoaders = function (tinymce) {\n      if (typeof module === 'object') {\n        try {\n          module.exports = tinymce;\n        } catch (_) {\n        }\n      }\n    };\n    var exportToWindowGlobal = function (tinymce) {\n      window.tinymce = tinymce;\n      window.tinyMCE = tinymce;\n    };\n    exportToWindowGlobal(Tinymce);\n    exportToModuleLoaders(Tinymce);\n\n}(window));\n})();\n","(function () {\nvar spellchecker = (function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var hasProPlugin = function (editor) {\n      if (/(^|[ ,])tinymcespellchecker([, ]|$)/.test(editor.settings.plugins) && global.get('tinymcespellchecker')) {\n        if (typeof domGlobals.window.console !== 'undefined' && domGlobals.window.console.log) {\n          domGlobals.window.console.log('Spell Checker Pro is incompatible with Spell Checker plugin! ' + 'Remove \\'spellchecker\\' from the \\'plugins\\' option.');\n        }\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var DetectProPlugin = { hasProPlugin: hasProPlugin };\n\n    var getLanguages = function (editor) {\n      var defaultLanguages = 'English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv';\n      return editor.getParam('spellchecker_languages', defaultLanguages);\n    };\n    var getLanguage = function (editor) {\n      var defaultLanguage = editor.getParam('language', 'en');\n      return editor.getParam('spellchecker_language', defaultLanguage);\n    };\n    var getRpcUrl = function (editor) {\n      return editor.getParam('spellchecker_rpc_url');\n    };\n    var getSpellcheckerCallback = function (editor) {\n      return editor.getParam('spellchecker_callback');\n    };\n    var getSpellcheckerWordcharPattern = function (editor) {\n      var defaultPattern = new RegExp('[^' + '\\\\s!\"#$%&()*+,-./:;<=>?@[\\\\]^_{|}`' + '\\xA7\\xA9\\xAB\\xAE\\xB1\\xB6\\xB7\\xB8\\xBB' + '\\xBC\\xBD\\xBE\\xBF\\xD7\\xF7\\xA4\\u201D\\u201C\\u201E\\xA0\\u2002\\u2003\\u2009' + ']+', 'g');\n      return editor.getParam('spellchecker_wordchar_pattern', defaultPattern);\n    };\n    var Settings = {\n      getLanguages: getLanguages,\n      getLanguage: getLanguage,\n      getRpcUrl: getRpcUrl,\n      getSpellcheckerCallback: getSpellcheckerCallback,\n      getSpellcheckerWordcharPattern: getSpellcheckerWordcharPattern\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var fireSpellcheckStart = function (editor) {\n      return editor.fire('SpellcheckStart');\n    };\n    var fireSpellcheckEnd = function (editor) {\n      return editor.fire('SpellcheckEnd');\n    };\n    var Events = {\n      fireSpellcheckStart: fireSpellcheckStart,\n      fireSpellcheckEnd: fireSpellcheckEnd\n    };\n\n    function isContentEditableFalse(node) {\n      return node && node.nodeType === 1 && node.contentEditable === 'false';\n    }\n    var DomTextMatcher = function (node, editor) {\n      var m, matches = [], text;\n      var dom = editor.dom;\n      var blockElementsMap, hiddenTextElementsMap, shortEndedElementsMap;\n      blockElementsMap = editor.schema.getBlockElements();\n      hiddenTextElementsMap = editor.schema.getWhiteSpaceElements();\n      shortEndedElementsMap = editor.schema.getShortEndedElements();\n      function createMatch(m, data) {\n        if (!m[0]) {\n          throw new Error('findAndReplaceDOMText cannot handle zero-length matches');\n        }\n        return {\n          start: m.index,\n          end: m.index + m[0].length,\n          text: m[0],\n          data: data\n        };\n      }\n      function getText(node) {\n        var txt;\n        if (node.nodeType === 3) {\n          return node.data;\n        }\n        if (hiddenTextElementsMap[node.nodeName] && !blockElementsMap[node.nodeName]) {\n          return '';\n        }\n        if (isContentEditableFalse(node)) {\n          return '\\n';\n        }\n        txt = '';\n        if (blockElementsMap[node.nodeName] || shortEndedElementsMap[node.nodeName]) {\n          txt += '\\n';\n        }\n        if (node = node.firstChild) {\n          do {\n            txt += getText(node);\n          } while (node = node.nextSibling);\n        }\n        return txt;\n      }\n      function stepThroughMatches(node, matches, replaceFn) {\n        var startNode, endNode, startNodeIndex, endNodeIndex, innerNodes = [], atIndex = 0, curNode = node, matchLocation, matchIndex = 0;\n        matches = matches.slice(0);\n        matches.sort(function (a, b) {\n          return a.start - b.start;\n        });\n        matchLocation = matches.shift();\n        out:\n          while (true) {\n            if (blockElementsMap[curNode.nodeName] || shortEndedElementsMap[curNode.nodeName] || isContentEditableFalse(curNode)) {\n              atIndex++;\n            }\n            if (curNode.nodeType === 3) {\n              if (!endNode && curNode.length + atIndex >= matchLocation.end) {\n                endNode = curNode;\n                endNodeIndex = matchLocation.end - atIndex;\n              } else if (startNode) {\n                innerNodes.push(curNode);\n              }\n              if (!startNode && curNode.length + atIndex > matchLocation.start) {\n                startNode = curNode;\n                startNodeIndex = matchLocation.start - atIndex;\n              }\n              atIndex += curNode.length;\n            }\n            if (startNode && endNode) {\n              curNode = replaceFn({\n                startNode: startNode,\n                startNodeIndex: startNodeIndex,\n                endNode: endNode,\n                endNodeIndex: endNodeIndex,\n                innerNodes: innerNodes,\n                match: matchLocation.text,\n                matchIndex: matchIndex\n              });\n              atIndex -= endNode.length - endNodeIndex;\n              startNode = null;\n              endNode = null;\n              innerNodes = [];\n              matchLocation = matches.shift();\n              matchIndex++;\n              if (!matchLocation) {\n                break;\n              }\n            } else if ((!hiddenTextElementsMap[curNode.nodeName] || blockElementsMap[curNode.nodeName]) && curNode.firstChild) {\n              if (!isContentEditableFalse(curNode)) {\n                curNode = curNode.firstChild;\n                continue;\n              }\n            } else if (curNode.nextSibling) {\n              curNode = curNode.nextSibling;\n              continue;\n            }\n            while (true) {\n              if (curNode.nextSibling) {\n                curNode = curNode.nextSibling;\n                break;\n              } else if (curNode.parentNode !== node) {\n                curNode = curNode.parentNode;\n              } else {\n                break out;\n              }\n            }\n          }\n      }\n      function genReplacer(callback) {\n        function makeReplacementNode(fill, matchIndex) {\n          var match = matches[matchIndex];\n          if (!match.stencil) {\n            match.stencil = callback(match);\n          }\n          var clone = match.stencil.cloneNode(false);\n          clone.setAttribute('data-mce-index', matchIndex);\n          if (fill) {\n            clone.appendChild(dom.doc.createTextNode(fill));\n          }\n          return clone;\n        }\n        return function (range) {\n          var before;\n          var after;\n          var parentNode;\n          var startNode = range.startNode;\n          var endNode = range.endNode;\n          var matchIndex = range.matchIndex;\n          var doc = dom.doc;\n          if (startNode === endNode) {\n            var node_1 = startNode;\n            parentNode = node_1.parentNode;\n            if (range.startNodeIndex > 0) {\n              before = doc.createTextNode(node_1.data.substring(0, range.startNodeIndex));\n              parentNode.insertBefore(before, node_1);\n            }\n            var el = makeReplacementNode(range.match, matchIndex);\n            parentNode.insertBefore(el, node_1);\n            if (range.endNodeIndex < node_1.length) {\n              after = doc.createTextNode(node_1.data.substring(range.endNodeIndex));\n              parentNode.insertBefore(after, node_1);\n            }\n            node_1.parentNode.removeChild(node_1);\n            return el;\n          }\n          before = doc.createTextNode(startNode.data.substring(0, range.startNodeIndex));\n          after = doc.createTextNode(endNode.data.substring(range.endNodeIndex));\n          var elA = makeReplacementNode(startNode.data.substring(range.startNodeIndex), matchIndex);\n          for (var i = 0, l = range.innerNodes.length; i < l; ++i) {\n            var innerNode = range.innerNodes[i];\n            var innerEl = makeReplacementNode(innerNode.data, matchIndex);\n            innerNode.parentNode.replaceChild(innerEl, innerNode);\n          }\n          var elB = makeReplacementNode(endNode.data.substring(0, range.endNodeIndex), matchIndex);\n          parentNode = startNode.parentNode;\n          parentNode.insertBefore(before, startNode);\n          parentNode.insertBefore(elA, startNode);\n          parentNode.removeChild(startNode);\n          parentNode = endNode.parentNode;\n          parentNode.insertBefore(elB, endNode);\n          parentNode.insertBefore(after, endNode);\n          parentNode.removeChild(endNode);\n          return elB;\n        };\n      }\n      function unwrapElement(element) {\n        var parentNode = element.parentNode;\n        parentNode.insertBefore(element.firstChild, element);\n        element.parentNode.removeChild(element);\n      }\n      function hasClass(elm) {\n        return elm.className.indexOf('mce-spellchecker-word') !== -1;\n      }\n      function getWrappersByIndex(index) {\n        var elements = node.getElementsByTagName('*'), wrappers = [];\n        index = typeof index === 'number' ? '' + index : null;\n        for (var i = 0; i < elements.length; i++) {\n          var element = elements[i], dataIndex = element.getAttribute('data-mce-index');\n          if (dataIndex !== null && dataIndex.length && hasClass(element)) {\n            if (dataIndex === index || index === null) {\n              wrappers.push(element);\n            }\n          }\n        }\n        return wrappers;\n      }\n      function indexOf(match) {\n        var i = matches.length;\n        while (i--) {\n          if (matches[i] === match) {\n            return i;\n          }\n        }\n        return -1;\n      }\n      function filter(callback) {\n        var filteredMatches = [];\n        each(function (match, i) {\n          if (callback(match, i)) {\n            filteredMatches.push(match);\n          }\n        });\n        matches = filteredMatches;\n        return this;\n      }\n      function each(callback) {\n        for (var i = 0, l = matches.length; i < l; i++) {\n          if (callback(matches[i], i) === false) {\n            break;\n          }\n        }\n        return this;\n      }\n      function wrap(callback) {\n        if (matches.length) {\n          stepThroughMatches(node, matches, genReplacer(callback));\n        }\n        return this;\n      }\n      function find(regex, data) {\n        if (text && regex.global) {\n          while (m = regex.exec(text)) {\n            matches.push(createMatch(m, data));\n          }\n        }\n        return this;\n      }\n      function unwrap(match) {\n        var i;\n        var elements = getWrappersByIndex(match ? indexOf(match) : null);\n        i = elements.length;\n        while (i--) {\n          unwrapElement(elements[i]);\n        }\n        return this;\n      }\n      function matchFromElement(element) {\n        return matches[element.getAttribute('data-mce-index')];\n      }\n      function elementFromMatch(match) {\n        return getWrappersByIndex(indexOf(match))[0];\n      }\n      function add(start, length, data) {\n        matches.push({\n          start: start,\n          end: start + length,\n          text: text.substr(start, length),\n          data: data\n        });\n        return this;\n      }\n      function rangeFromMatch(match) {\n        var wrappers = getWrappersByIndex(indexOf(match));\n        var rng = editor.dom.createRng();\n        rng.setStartBefore(wrappers[0]);\n        rng.setEndAfter(wrappers[wrappers.length - 1]);\n        return rng;\n      }\n      function replace(match, text) {\n        var rng = rangeFromMatch(match);\n        rng.deleteContents();\n        if (text.length > 0) {\n          rng.insertNode(editor.dom.doc.createTextNode(text));\n        }\n        return rng;\n      }\n      function reset() {\n        matches.splice(0, matches.length);\n        unwrap();\n        return this;\n      }\n      text = getText(node);\n      return {\n        text: text,\n        matches: matches,\n        each: each,\n        filter: filter,\n        reset: reset,\n        matchFromElement: matchFromElement,\n        elementFromMatch: elementFromMatch,\n        find: find,\n        add: add,\n        wrap: wrap,\n        unwrap: unwrap,\n        replace: replace,\n        rangeFromMatch: rangeFromMatch,\n        indexOf: indexOf\n      };\n    };\n\n    var getTextMatcher = function (editor, textMatcherState) {\n      if (!textMatcherState.get()) {\n        var textMatcher = DomTextMatcher(editor.getBody(), editor);\n        textMatcherState.set(textMatcher);\n      }\n      return textMatcherState.get();\n    };\n    var isEmpty = function (obj) {\n      for (var _ in obj) {\n        return false;\n      }\n      return true;\n    };\n    var defaultSpellcheckCallback = function (editor, pluginUrl, currentLanguageState) {\n      return function (method, text, doneCallback, errorCallback) {\n        var data = {\n          method: method,\n          lang: currentLanguageState.get()\n        };\n        var postData = '';\n        data[method === 'addToDictionary' ? 'word' : 'text'] = text;\n        global$1.each(data, function (value, key) {\n          if (postData) {\n            postData += '&';\n          }\n          postData += key + '=' + encodeURIComponent(value);\n        });\n        global$3.send({\n          url: new global$2(pluginUrl).toAbsolute(Settings.getRpcUrl(editor)),\n          type: 'post',\n          content_type: 'application/x-www-form-urlencoded',\n          data: postData,\n          success: function (result) {\n            result = JSON.parse(result);\n            if (!result) {\n              var message = editor.translate('Server response wasn\\'t proper JSON.');\n              errorCallback(message);\n            } else if (result.error) {\n              errorCallback(result.error);\n            } else {\n              doneCallback(result);\n            }\n          },\n          error: function () {\n            var message = editor.translate('The spelling service was not found: (') + Settings.getRpcUrl(editor) + editor.translate(')');\n            errorCallback(message);\n          }\n        });\n      };\n    };\n    var sendRpcCall = function (editor, pluginUrl, currentLanguageState, name, data, successCallback, errorCallback) {\n      var userSpellcheckCallback = Settings.getSpellcheckerCallback(editor);\n      var spellCheckCallback = userSpellcheckCallback ? userSpellcheckCallback : defaultSpellcheckCallback(editor, pluginUrl, currentLanguageState);\n      spellCheckCallback.call(editor.plugins.spellchecker, name, data, successCallback, errorCallback);\n    };\n    var spellcheck = function (editor, pluginUrl, startedState, textMatcherState, lastSuggestionsState, currentLanguageState) {\n      if (finish(editor, startedState, textMatcherState)) {\n        return;\n      }\n      var errorCallback = function (message) {\n        editor.notificationManager.open({\n          text: message,\n          type: 'error'\n        });\n        editor.setProgressState(false);\n        finish(editor, startedState, textMatcherState);\n      };\n      var successCallback = function (data) {\n        markErrors(editor, startedState, textMatcherState, lastSuggestionsState, data);\n      };\n      editor.setProgressState(true);\n      sendRpcCall(editor, pluginUrl, currentLanguageState, 'spellcheck', getTextMatcher(editor, textMatcherState).text, successCallback, errorCallback);\n      editor.focus();\n    };\n    var checkIfFinished = function (editor, startedState, textMatcherState) {\n      if (!editor.dom.select('span.mce-spellchecker-word').length) {\n        finish(editor, startedState, textMatcherState);\n      }\n    };\n    var addToDictionary = function (editor, pluginUrl, startedState, textMatcherState, currentLanguageState, word, spans) {\n      editor.setProgressState(true);\n      sendRpcCall(editor, pluginUrl, currentLanguageState, 'addToDictionary', word, function () {\n        editor.setProgressState(false);\n        editor.dom.remove(spans, true);\n        checkIfFinished(editor, startedState, textMatcherState);\n      }, function (message) {\n        editor.notificationManager.open({\n          text: message,\n          type: 'error'\n        });\n        editor.setProgressState(false);\n      });\n    };\n    var ignoreWord = function (editor, startedState, textMatcherState, word, spans, all) {\n      editor.selection.collapse();\n      if (all) {\n        global$1.each(editor.dom.select('span.mce-spellchecker-word'), function (span) {\n          if (span.getAttribute('data-mce-word') === word) {\n            editor.dom.remove(span, true);\n          }\n        });\n      } else {\n        editor.dom.remove(spans, true);\n      }\n      checkIfFinished(editor, startedState, textMatcherState);\n    };\n    var finish = function (editor, startedState, textMatcherState) {\n      var bookmark = editor.selection.getBookmark();\n      getTextMatcher(editor, textMatcherState).reset();\n      editor.selection.moveToBookmark(bookmark);\n      textMatcherState.set(null);\n      if (startedState.get()) {\n        startedState.set(false);\n        Events.fireSpellcheckEnd(editor);\n        return true;\n      }\n    };\n    var getElmIndex = function (elm) {\n      var value = elm.getAttribute('data-mce-index');\n      if (typeof value === 'number') {\n        return '' + value;\n      }\n      return value;\n    };\n    var findSpansByIndex = function (editor, index) {\n      var nodes;\n      var spans = [];\n      nodes = global$1.toArray(editor.getBody().getElementsByTagName('span'));\n      if (nodes.length) {\n        for (var i = 0; i < nodes.length; i++) {\n          var nodeIndex = getElmIndex(nodes[i]);\n          if (nodeIndex === null || !nodeIndex.length) {\n            continue;\n          }\n          if (nodeIndex === index.toString()) {\n            spans.push(nodes[i]);\n          }\n        }\n      }\n      return spans;\n    };\n    var markErrors = function (editor, startedState, textMatcherState, lastSuggestionsState, data) {\n      var suggestions, hasDictionarySupport;\n      if (typeof data !== 'string' && data.words) {\n        hasDictionarySupport = !!data.dictionary;\n        suggestions = data.words;\n      } else {\n        suggestions = data;\n      }\n      editor.setProgressState(false);\n      if (isEmpty(suggestions)) {\n        var message = editor.translate('No misspellings found.');\n        editor.notificationManager.open({\n          text: message,\n          type: 'info'\n        });\n        startedState.set(false);\n        return;\n      }\n      lastSuggestionsState.set({\n        suggestions: suggestions,\n        hasDictionarySupport: hasDictionarySupport\n      });\n      var bookmark = editor.selection.getBookmark();\n      getTextMatcher(editor, textMatcherState).find(Settings.getSpellcheckerWordcharPattern(editor)).filter(function (match) {\n        return !!suggestions[match.text];\n      }).wrap(function (match) {\n        return editor.dom.create('span', {\n          'class': 'mce-spellchecker-word',\n          'data-mce-bogus': 1,\n          'data-mce-word': match.text\n        });\n      });\n      editor.selection.moveToBookmark(bookmark);\n      startedState.set(true);\n      Events.fireSpellcheckStart(editor);\n    };\n    var Actions = {\n      spellcheck: spellcheck,\n      checkIfFinished: checkIfFinished,\n      addToDictionary: addToDictionary,\n      ignoreWord: ignoreWord,\n      findSpansByIndex: findSpansByIndex,\n      getElmIndex: getElmIndex,\n      markErrors: markErrors\n    };\n\n    var get = function (editor, startedState, lastSuggestionsState, textMatcherState, currentLanguageState, url) {\n      var getLanguage = function () {\n        return currentLanguageState.get();\n      };\n      var getWordCharPattern = function () {\n        return Settings.getSpellcheckerWordcharPattern(editor);\n      };\n      var markErrors = function (data) {\n        Actions.markErrors(editor, startedState, textMatcherState, lastSuggestionsState, data);\n      };\n      var getTextMatcher = function () {\n        return textMatcherState.get();\n      };\n      return {\n        getTextMatcher: getTextMatcher,\n        getWordCharPattern: getWordCharPattern,\n        markErrors: markErrors,\n        getLanguage: getLanguage\n      };\n    };\n    var Api = { get: get };\n\n    var register = function (editor, pluginUrl, startedState, textMatcherState, lastSuggestionsState, currentLanguageState) {\n      editor.addCommand('mceSpellCheck', function () {\n        Actions.spellcheck(editor, pluginUrl, startedState, textMatcherState, lastSuggestionsState, currentLanguageState);\n      });\n    };\n    var Commands = { register: register };\n\n    var buildMenuItems = function (listName, languageValues) {\n      var items = [];\n      global$1.each(languageValues, function (languageValue) {\n        items.push({\n          selectable: true,\n          text: languageValue.name,\n          data: languageValue.value\n        });\n      });\n      return items;\n    };\n    var updateSelection = function (editor, currentLanguageState) {\n      return function (e) {\n        var selectedLanguage = currentLanguageState.get();\n        e.control.items().each(function (ctrl) {\n          ctrl.active(ctrl.settings.data === selectedLanguage);\n        });\n      };\n    };\n    var getItems = function (editor) {\n      return global$1.map(Settings.getLanguages(editor).split(','), function (langPair) {\n        langPair = langPair.split('=');\n        return {\n          name: langPair[0],\n          value: langPair[1]\n        };\n      });\n    };\n    var register$1 = function (editor, pluginUrl, startedState, textMatcherState, currentLanguageState, lastSuggestionsState) {\n      var languageMenuItems = buildMenuItems('Language', getItems(editor));\n      var startSpellchecking = function () {\n        Actions.spellcheck(editor, pluginUrl, startedState, textMatcherState, lastSuggestionsState, currentLanguageState);\n      };\n      var buttonArgs = {\n        tooltip: 'Spellcheck',\n        onclick: startSpellchecking,\n        onPostRender: function (e) {\n          var ctrl = e.control;\n          editor.on('SpellcheckStart SpellcheckEnd', function () {\n            ctrl.active(startedState.get());\n          });\n        }\n      };\n      if (languageMenuItems.length > 1) {\n        buttonArgs.type = 'splitbutton';\n        buttonArgs.menu = languageMenuItems;\n        buttonArgs.onshow = updateSelection(editor, currentLanguageState);\n        buttonArgs.onselect = function (e) {\n          currentLanguageState.set(e.control.settings.data);\n        };\n      }\n      editor.addButton('spellchecker', buttonArgs);\n      editor.addMenuItem('spellchecker', {\n        text: 'Spellcheck',\n        context: 'tools',\n        onclick: startSpellchecking,\n        selectable: true,\n        onPostRender: function () {\n          var self = this;\n          self.active(startedState.get());\n          editor.on('SpellcheckStart SpellcheckEnd', function () {\n            self.active(startedState.get());\n          });\n        }\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.ui.Factory');\n\n    var suggestionsMenu;\n    var showSuggestions = function (editor, pluginUrl, lastSuggestionsState, startedState, textMatcherState, currentLanguageState, word, spans) {\n      var items = [], suggestions = lastSuggestionsState.get().suggestions[word];\n      global$1.each(suggestions, function (suggestion) {\n        items.push({\n          text: suggestion,\n          onclick: function () {\n            editor.insertContent(editor.dom.encode(suggestion));\n            editor.dom.remove(spans);\n            Actions.checkIfFinished(editor, startedState, textMatcherState);\n          }\n        });\n      });\n      items.push({ text: '-' });\n      var hasDictionarySupport = lastSuggestionsState.get().hasDictionarySupport;\n      if (hasDictionarySupport) {\n        items.push({\n          text: 'Add to Dictionary',\n          onclick: function () {\n            Actions.addToDictionary(editor, pluginUrl, startedState, textMatcherState, currentLanguageState, word, spans);\n          }\n        });\n      }\n      items.push.apply(items, [\n        {\n          text: 'Ignore',\n          onclick: function () {\n            Actions.ignoreWord(editor, startedState, textMatcherState, word, spans);\n          }\n        },\n        {\n          text: 'Ignore all',\n          onclick: function () {\n            Actions.ignoreWord(editor, startedState, textMatcherState, word, spans, true);\n          }\n        }\n      ]);\n      suggestionsMenu = global$5.create('menu', {\n        items: items,\n        context: 'contextmenu',\n        onautohide: function (e) {\n          if (e.target.className.indexOf('spellchecker') !== -1) {\n            e.preventDefault();\n          }\n        },\n        onhide: function () {\n          suggestionsMenu.remove();\n          suggestionsMenu = null;\n        }\n      });\n      suggestionsMenu.renderTo(domGlobals.document.body);\n      var pos = global$4.DOM.getPos(editor.getContentAreaContainer());\n      var targetPos = editor.dom.getPos(spans[0]);\n      var root = editor.dom.getRoot();\n      if (root.nodeName === 'BODY') {\n        targetPos.x -= root.ownerDocument.documentElement.scrollLeft || root.scrollLeft;\n        targetPos.y -= root.ownerDocument.documentElement.scrollTop || root.scrollTop;\n      } else {\n        targetPos.x -= root.scrollLeft;\n        targetPos.y -= root.scrollTop;\n      }\n      pos.x += targetPos.x;\n      pos.y += targetPos.y;\n      suggestionsMenu.moveTo(pos.x, pos.y + spans[0].offsetHeight);\n    };\n    var setup = function (editor, pluginUrl, lastSuggestionsState, startedState, textMatcherState, currentLanguageState) {\n      editor.on('click', function (e) {\n        var target = e.target;\n        if (target.className === 'mce-spellchecker-word') {\n          e.preventDefault();\n          var spans = Actions.findSpansByIndex(editor, Actions.getElmIndex(target));\n          if (spans.length > 0) {\n            var rng = editor.dom.createRng();\n            rng.setStartBefore(spans[0]);\n            rng.setEndAfter(spans[spans.length - 1]);\n            editor.selection.setRng(rng);\n            showSuggestions(editor, pluginUrl, lastSuggestionsState, startedState, textMatcherState, currentLanguageState, target.getAttribute('data-mce-word'), spans);\n          }\n        }\n      });\n    };\n    var SuggestionsMenu = { setup: setup };\n\n    global.add('spellchecker', function (editor, pluginUrl) {\n      if (DetectProPlugin.hasProPlugin(editor) === false) {\n        var startedState = Cell(false);\n        var currentLanguageState = Cell(Settings.getLanguage(editor));\n        var textMatcherState = Cell(null);\n        var lastSuggestionsState = Cell(null);\n        Buttons.register(editor, pluginUrl, startedState, textMatcherState, currentLanguageState, lastSuggestionsState);\n        SuggestionsMenu.setup(editor, pluginUrl, lastSuggestionsState, startedState, textMatcherState, currentLanguageState);\n        Commands.register(editor, pluginUrl, startedState, textMatcherState, lastSuggestionsState, currentLanguageState);\n        return Api.get(editor, startedState, lastSuggestionsState, textMatcherState, currentLanguageState, pluginUrl);\n      }\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","(function () {\nvar wordcount = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var regExps = {\n      aletter: '[A-Za-z\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05F3\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u10a0-\\u10c5\\u10d0-\\u10fa\\u10fc\\u1100-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1a00-\\u1a16\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bc0-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u24B6-\\u24E9\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2d00-\\u2d25\\u2d30-\\u2d65\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005\\u303b\\u303c\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790\\ua791\\ua7a0-\\ua7a9\\ua7fa-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uffa0-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc]',\n      midnumlet: '[-\\'\\\\.\\u2018\\u2019\\u2024\\uFE52\\uFF07\\uFF0E]',\n      midletter: '[:\\xB7\\xB7\\u05F4\\u2027\\uFE13\\uFE55\\uFF1A]',\n      midnum: '[\\xB1+*/,;;\\u0589\\u060C\\u060D\\u066C\\u07F8\\u2044\\uFE10\\uFE14\\uFE50\\uFE54\\uFF0C\\uFF1B]',\n      numeric: '[0-9\\u0660-\\u0669\\u066B\\u06f0-\\u06f9\\u07c0-\\u07c9\\u0966-\\u096f\\u09e6-\\u09ef\\u0a66-\\u0a6f\\u0ae6-\\u0aef\\u0b66-\\u0b6f\\u0be6-\\u0bef\\u0c66-\\u0c6f\\u0ce6-\\u0cef\\u0d66-\\u0d6f\\u0e50-\\u0e59\\u0ed0-\\u0ed9\\u0f20-\\u0f29\\u1040-\\u1049\\u1090-\\u1099\\u17e0-\\u17e9\\u1810-\\u1819\\u1946-\\u194f\\u19d0-\\u19d9\\u1a80-\\u1a89\\u1a90-\\u1a99\\u1b50-\\u1b59\\u1bb0-\\u1bb9\\u1c40-\\u1c49\\u1c50-\\u1c59\\ua620-\\ua629\\ua8d0-\\ua8d9\\ua900-\\ua909\\ua9d0-\\ua9d9\\uaa50-\\uaa59\\uabf0-\\uabf9]',\n      cr: '\\\\r',\n      lf: '\\\\n',\n      newline: '[\\x0B\\f\\x85\\u2028\\u2029]',\n      extend: '[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09cb-\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2\\u0ae3\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0c01-\\u0c03\\u0c3e-\\u0c44\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d02\\u0d03\\u0d3e-\\u0d44\\u0d46-\\u0d48\\u0d4a-\\u0d4d\\u0d57\\u0d62\\u0d63\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f3e\\u0f3f\\u0f71-\\u0f84\\u0f86\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102b-\\u103e\\u1056-\\u1059\\u105e-\\u1060\\u1062-\\u1064\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f\\u109a-\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b6-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u192b\\u1930-\\u193b\\u19b0-\\u19c0\\u19c8\\u19c9\\u1a17-\\u1a1b\\u1a55-\\u1a5e\\u1a60-\\u1a7c\\u1a7f\\u1b00-\\u1b04\\u1b34-\\u1b44\\u1b6b-\\u1b73\\u1b80-\\u1b82\\u1ba1-\\u1baa\\u1be6-\\u1bf3\\u1c24-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce8\\u1ced\\u1cf2\\u1dc0-\\u1de6\\u1dfc-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\uA672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua823-\\ua827\\ua880\\ua881\\ua8b4-\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua953\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa29-\\uaa36\\uaa43\\uaa4c\\uaa4d\\uaa7b\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe3-\\uabea\\uabec\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]',\n      format: '[\\xAD\\u0600-\\u0603\\u06DD\\u070F\\u17b4\\u17b5\\u200E\\u200F\\u202A-\\u202E\\u2060-\\u2064\\u206A-\\u206F\\uFEFF\\uFFF9-\\uFFFB]',\n      katakana: '[\\u3031-\\u3035\\u309B\\u309C\\u30A0-\\u30fa\\u30fc-\\u30ff\\u31f0-\\u31ff\\u32D0-\\u32FE\\u3300-\\u3357\\uff66-\\uff9d]',\n      extendnumlet: '[=_\\u203f\\u2040\\u2054\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff3f\\u2200-\\u22FF<>]',\n      punctuation: '[!-#%-*,-\\\\/:;?@\\\\[-\\\\]_{}\\xA1\\xAB\\xB7\\xBB\\xBF;\\xB7\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1361-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u3008\\u3009\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30\\u2E31\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uff3f\\uFF5B\\uFF5D\\uFF5F-\\uFF65]'\n    };\n    var characterIndices = {\n      ALETTER: 0,\n      MIDNUMLET: 1,\n      MIDLETTER: 2,\n      MIDNUM: 3,\n      NUMERIC: 4,\n      CR: 5,\n      LF: 6,\n      NEWLINE: 7,\n      EXTEND: 8,\n      FORMAT: 9,\n      KATAKANA: 10,\n      EXTENDNUMLET: 11,\n      AT: 12,\n      OTHER: 13\n    };\n    var SETS = [\n      new RegExp(regExps.aletter),\n      new RegExp(regExps.midnumlet),\n      new RegExp(regExps.midletter),\n      new RegExp(regExps.midnum),\n      new RegExp(regExps.numeric),\n      new RegExp(regExps.cr),\n      new RegExp(regExps.lf),\n      new RegExp(regExps.newline),\n      new RegExp(regExps.extend),\n      new RegExp(regExps.format),\n      new RegExp(regExps.katakana),\n      new RegExp(regExps.extendnumlet),\n      new RegExp('@')\n    ];\n    var EMPTY_STRING = '';\n    var PUNCTUATION = new RegExp('^' + regExps.punctuation + '$');\n    var WHITESPACE = /^\\s+$/;\n    var UnicodeData = {\n      characterIndices: characterIndices,\n      SETS: SETS,\n      EMPTY_STRING: EMPTY_STRING,\n      PUNCTUATION: PUNCTUATION,\n      WHITESPACE: WHITESPACE\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isFunction = isType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var from = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var SETS$1 = UnicodeData.SETS;\n    var OTHER = UnicodeData.characterIndices.OTHER;\n    var getType = function (char) {\n      var j, set, type = OTHER;\n      var setsLength = SETS$1.length;\n      for (j = 0; j < setsLength; ++j) {\n        set = SETS$1[j];\n        if (set && set.test(char)) {\n          type = j;\n          break;\n        }\n      }\n      return type;\n    };\n    var memoize = function (func) {\n      var cache = {};\n      return function (char) {\n        if (cache[char]) {\n          return cache[char];\n        } else {\n          var result = func(char);\n          cache[char] = result;\n          return result;\n        }\n      };\n    };\n    var classify = function (string) {\n      var memoized = memoize(getType);\n      return map(string.split(''), memoized);\n    };\n    var StringMapper = { classify: classify };\n\n    var ci = UnicodeData.characterIndices;\n    var isWordBoundary = function (map, index) {\n      var prevType;\n      var type = map[index];\n      var nextType = map[index + 1];\n      var nextNextType;\n      if (index < 0 || index > map.length - 1 && index !== 0) {\n        return false;\n      }\n      if (type === ci.ALETTER && nextType === ci.ALETTER) {\n        return false;\n      }\n      nextNextType = map[index + 2];\n      if (type === ci.ALETTER && (nextType === ci.MIDLETTER || nextType === ci.MIDNUMLET || nextType === ci.AT) && nextNextType === ci.ALETTER) {\n        return false;\n      }\n      prevType = map[index - 1];\n      if ((type === ci.MIDLETTER || type === ci.MIDNUMLET || nextType === ci.AT) && nextType === ci.ALETTER && prevType === ci.ALETTER) {\n        return false;\n      }\n      if ((type === ci.NUMERIC || type === ci.ALETTER) && (nextType === ci.NUMERIC || nextType === ci.ALETTER)) {\n        return false;\n      }\n      if ((type === ci.MIDNUM || type === ci.MIDNUMLET) && nextType === ci.NUMERIC && prevType === ci.NUMERIC) {\n        return false;\n      }\n      if (type === ci.NUMERIC && (nextType === ci.MIDNUM || nextType === ci.MIDNUMLET) && nextNextType === ci.NUMERIC) {\n        return false;\n      }\n      if (type === ci.EXTEND || type === ci.FORMAT || prevType === ci.EXTEND || prevType === ci.FORMAT || nextType === ci.EXTEND || nextType === ci.FORMAT) {\n        return false;\n      }\n      if (type === ci.CR && nextType === ci.LF) {\n        return false;\n      }\n      if (type === ci.NEWLINE || type === ci.CR || type === ci.LF) {\n        return true;\n      }\n      if (nextType === ci.NEWLINE || nextType === ci.CR || nextType === ci.LF) {\n        return true;\n      }\n      if (type === ci.KATAKANA && nextType === ci.KATAKANA) {\n        return false;\n      }\n      if (nextType === ci.EXTENDNUMLET && (type === ci.ALETTER || type === ci.NUMERIC || type === ci.KATAKANA || type === ci.EXTENDNUMLET)) {\n        return false;\n      }\n      if (type === ci.EXTENDNUMLET && (nextType === ci.ALETTER || nextType === ci.NUMERIC || nextType === ci.KATAKANA)) {\n        return false;\n      }\n      if (type === ci.AT) {\n        return false;\n      }\n      return true;\n    };\n    var WordBoundary = { isWordBoundary: isWordBoundary };\n\n    var EMPTY_STRING$1 = UnicodeData.EMPTY_STRING;\n    var WHITESPACE$1 = UnicodeData.WHITESPACE;\n    var PUNCTUATION$1 = UnicodeData.PUNCTUATION;\n    var isProtocol = function (word) {\n      return word === 'http' || word === 'https';\n    };\n    var findWordEnd = function (str, index) {\n      var i;\n      for (i = index; i < str.length; ++i) {\n        var chr = str.charAt(i);\n        if (WHITESPACE$1.test(chr)) {\n          break;\n        }\n      }\n      return i;\n    };\n    var extractUrl = function (word, str, index) {\n      var endIndex = findWordEnd(str, index + 1);\n      var peakedWord = str.substring(index + 1, endIndex);\n      if (peakedWord.substr(0, 3) === '://') {\n        return {\n          word: word + peakedWord,\n          index: endIndex\n        };\n      }\n      return {\n        word: word,\n        index: index\n      };\n    };\n    var doGetWords = function (str, options) {\n      var i = 0;\n      var map = StringMapper.classify(str);\n      var len = map.length;\n      var word = [];\n      var words = [];\n      var chr;\n      var includePunctuation;\n      var includeWhitespace;\n      if (!options) {\n        options = {};\n      }\n      if (options.ignoreCase) {\n        str = str.toLowerCase();\n      }\n      includePunctuation = options.includePunctuation;\n      includeWhitespace = options.includeWhitespace;\n      for (; i < len; ++i) {\n        chr = str.charAt(i);\n        word.push(chr);\n        if (WordBoundary.isWordBoundary(map, i)) {\n          word = word.join(EMPTY_STRING$1);\n          if (word && (includeWhitespace || !WHITESPACE$1.test(word)) && (includePunctuation || !PUNCTUATION$1.test(word))) {\n            if (isProtocol(word)) {\n              var obj = extractUrl(word, str, i);\n              words.push(obj.word);\n              i = obj.index;\n            } else {\n              words.push(word);\n            }\n          }\n          word = [];\n        }\n      }\n      return words;\n    };\n    var getWords = function (str, options) {\n      return doGetWords(str.replace(/\\ufeff/g, ''), options);\n    };\n    var WordGetter = { getWords: getWords };\n\n    var getText = function (node, schema) {\n      var blockElements = schema.getBlockElements();\n      var shortEndedElements = schema.getShortEndedElements();\n      var whiteSpaceElements = schema.getWhiteSpaceElements();\n      var isSeparator = function (node) {\n        return blockElements[node.nodeName] || shortEndedElements[node.nodeName] || whiteSpaceElements[node.nodeName];\n      };\n      var txt = '';\n      var treeWalker = new global$1(node, node);\n      while (node = treeWalker.next()) {\n        if (node.nodeType === 3) {\n          txt += node.data;\n        } else if (isSeparator(node)) {\n          txt += ' ';\n        }\n      }\n      return txt;\n    };\n    var innerText = function (node, schema) {\n      return global$2.ie ? getText(node, schema) : node.innerText;\n    };\n    var getTextContent = function (editor) {\n      return editor.removed ? '' : innerText(editor.getBody(), editor.schema);\n    };\n    var getCount = function (editor) {\n      return WordGetter.getWords(getTextContent(editor)).length;\n    };\n    var WordCount = { getCount: getCount };\n\n    var get = function (editor) {\n      var getCount = function () {\n        return WordCount.getCount(editor);\n      };\n      return { getCount: getCount };\n    };\n    var Api = { get: get };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var setup = function (editor) {\n      var wordsToText = function (editor) {\n        return global$4.translate([\n          '{0} words',\n          WordCount.getCount(editor)\n        ]);\n      };\n      var update = function () {\n        editor.theme.panel.find('#wordcount').text(wordsToText(editor));\n      };\n      editor.on('init', function () {\n        var statusbar = editor.theme.panel && editor.theme.panel.find('#statusbar')[0];\n        var debouncedUpdate = global$3.debounce(update, 300);\n        if (statusbar) {\n          global$3.setEditorTimeout(editor, function () {\n            statusbar.insert({\n              type: 'label',\n              name: 'wordcount',\n              text: wordsToText(editor),\n              classes: 'wordcount',\n              disabled: editor.settings.readonly\n            }, 0);\n            editor.on('setcontent beforeaddundo undo redo keyup', debouncedUpdate);\n          }, 0);\n        }\n      });\n    };\n    var Statusbar = { setup: setup };\n\n    global.add('wordcount', function (editor) {\n      Statusbar.setup(editor);\n      return Api.get(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","// Exports the \"pagebreak\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/pagebreak')\n//   ES2015:\n//     import 'tinymce/plugins/pagebreak'\nrequire('./plugin.js');","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n","// Exports the \"nonbreaking\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/nonbreaking')\n//   ES2015:\n//     import 'tinymce/plugins/nonbreaking'\nrequire('./plugin.js');","(function () {\nvar code = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var getMinWidth = function (editor) {\n      return editor.getParam('code_dialog_width', 600);\n    };\n    var getMinHeight = function (editor) {\n      return editor.getParam('code_dialog_height', Math.min(global$1.DOM.getViewPort().h - 200, 500));\n    };\n    var Settings = {\n      getMinWidth: getMinWidth,\n      getMinHeight: getMinHeight\n    };\n\n    var setContent = function (editor, html) {\n      editor.focus();\n      editor.undoManager.transact(function () {\n        editor.setContent(html);\n      });\n      editor.selection.setCursorLocation();\n      editor.nodeChanged();\n    };\n    var getContent = function (editor) {\n      return editor.getContent({ source_view: true });\n    };\n    var Content = {\n      setContent: setContent,\n      getContent: getContent\n    };\n\n    var open = function (editor) {\n      var minWidth = Settings.getMinWidth(editor);\n      var minHeight = Settings.getMinHeight(editor);\n      var win = editor.windowManager.open({\n        title: 'Source code',\n        body: {\n          type: 'textbox',\n          name: 'code',\n          multiline: true,\n          minWidth: minWidth,\n          minHeight: minHeight,\n          spellcheck: false,\n          style: 'direction: ltr; text-align: left'\n        },\n        onSubmit: function (e) {\n          Content.setContent(editor, e.data.code);\n        }\n      });\n      win.find('#code').value(Content.getContent(editor));\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor) {\n      editor.addCommand('mceCodeEditor', function () {\n        Dialog.open(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor) {\n      editor.addButton('code', {\n        icon: 'code',\n        tooltip: 'Source code',\n        onclick: function () {\n          Dialog.open(editor);\n        }\n      });\n      editor.addMenuItem('code', {\n        icon: 'code',\n        text: 'Source code',\n        onclick: function () {\n          Dialog.open(editor);\n        }\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('code', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n      return {};\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"toc\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/toc')\n//   ES2015:\n//     import 'tinymce/plugins/toc'\nrequire('./plugin.js');","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","(function () {\nvar fullscreen = (function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var get = function (fullscreenState) {\n      return {\n        isFullscreen: function () {\n          return fullscreenState.get() !== null;\n        }\n      };\n    };\n    var Api = { get: get };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var fireFullscreenStateChanged = function (editor, state) {\n      editor.fire('FullscreenStateChanged', { state: state });\n    };\n    var Events = { fireFullscreenStateChanged: fireFullscreenStateChanged };\n\n    var DOM = global$1.DOM;\n    var getWindowSize = function () {\n      var w;\n      var h;\n      var win = domGlobals.window;\n      var doc = domGlobals.document;\n      var body = doc.body;\n      if (body.offsetWidth) {\n        w = body.offsetWidth;\n        h = body.offsetHeight;\n      }\n      if (win.innerWidth && win.innerHeight) {\n        w = win.innerWidth;\n        h = win.innerHeight;\n      }\n      return {\n        w: w,\n        h: h\n      };\n    };\n    var getScrollPos = function () {\n      var vp = DOM.getViewPort();\n      return {\n        x: vp.x,\n        y: vp.y\n      };\n    };\n    var setScrollPos = function (pos) {\n      domGlobals.window.scrollTo(pos.x, pos.y);\n    };\n    var toggleFullscreen = function (editor, fullscreenState) {\n      var body = domGlobals.document.body;\n      var documentElement = domGlobals.document.documentElement;\n      var editorContainerStyle;\n      var editorContainer, iframe, iframeStyle;\n      var fullscreenInfo = fullscreenState.get();\n      var resize = function () {\n        DOM.setStyle(iframe, 'height', getWindowSize().h - (editorContainer.clientHeight - iframe.clientHeight));\n      };\n      var removeResize = function () {\n        DOM.unbind(domGlobals.window, 'resize', resize);\n      };\n      editorContainer = editor.getContainer();\n      editorContainerStyle = editorContainer.style;\n      iframe = editor.getContentAreaContainer().firstChild;\n      iframeStyle = iframe.style;\n      if (!fullscreenInfo) {\n        var newFullScreenInfo = {\n          scrollPos: getScrollPos(),\n          containerWidth: editorContainerStyle.width,\n          containerHeight: editorContainerStyle.height,\n          iframeWidth: iframeStyle.width,\n          iframeHeight: iframeStyle.height,\n          resizeHandler: resize,\n          removeHandler: removeResize\n        };\n        iframeStyle.width = iframeStyle.height = '100%';\n        editorContainerStyle.width = editorContainerStyle.height = '';\n        DOM.addClass(body, 'mce-fullscreen');\n        DOM.addClass(documentElement, 'mce-fullscreen');\n        DOM.addClass(editorContainer, 'mce-fullscreen');\n        DOM.bind(domGlobals.window, 'resize', resize);\n        editor.on('remove', removeResize);\n        resize();\n        fullscreenState.set(newFullScreenInfo);\n        Events.fireFullscreenStateChanged(editor, true);\n      } else {\n        iframeStyle.width = fullscreenInfo.iframeWidth;\n        iframeStyle.height = fullscreenInfo.iframeHeight;\n        if (fullscreenInfo.containerWidth) {\n          editorContainerStyle.width = fullscreenInfo.containerWidth;\n        }\n        if (fullscreenInfo.containerHeight) {\n          editorContainerStyle.height = fullscreenInfo.containerHeight;\n        }\n        DOM.removeClass(body, 'mce-fullscreen');\n        DOM.removeClass(documentElement, 'mce-fullscreen');\n        DOM.removeClass(editorContainer, 'mce-fullscreen');\n        setScrollPos(fullscreenInfo.scrollPos);\n        DOM.unbind(domGlobals.window, 'resize', fullscreenInfo.resizeHandler);\n        editor.off('remove', fullscreenInfo.removeHandler);\n        fullscreenState.set(null);\n        Events.fireFullscreenStateChanged(editor, false);\n      }\n    };\n    var Actions = { toggleFullscreen: toggleFullscreen };\n\n    var register = function (editor, fullscreenState) {\n      editor.addCommand('mceFullScreen', function () {\n        Actions.toggleFullscreen(editor, fullscreenState);\n      });\n    };\n    var Commands = { register: register };\n\n    var postRender = function (editor) {\n      return function (e) {\n        var ctrl = e.control;\n        editor.on('FullscreenStateChanged', function (e) {\n          ctrl.active(e.state);\n        });\n      };\n    };\n    var register$1 = function (editor) {\n      editor.addMenuItem('fullscreen', {\n        text: 'Fullscreen',\n        shortcut: 'Ctrl+Shift+F',\n        selectable: true,\n        cmd: 'mceFullScreen',\n        onPostRender: postRender(editor),\n        context: 'view'\n      });\n      editor.addButton('fullscreen', {\n        active: false,\n        tooltip: 'Fullscreen',\n        cmd: 'mceFullScreen',\n        onPostRender: postRender(editor)\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('fullscreen', function (editor) {\n      var fullscreenState = Cell(null);\n      if (editor.settings.inline) {\n        return Api.get(fullscreenState);\n      }\n      Commands.register(editor, fullscreenState);\n      Buttons.register(editor);\n      editor.addShortcut('Ctrl+Shift+F', '', 'mceFullScreen');\n      return Api.get(fullscreenState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","// Exports the \"contextmenu\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/contextmenu')\n//   ES2015:\n//     import 'tinymce/plugins/contextmenu'\nrequire('./plugin.js');","var Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n","(function () {\nvar tabfocus = (function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var getTabFocusElements = function (editor) {\n      return editor.getParam('tabfocus_elements', ':prev,:next');\n    };\n    var getTabFocus = function (editor) {\n      return editor.getParam('tab_focus', getTabFocusElements(editor));\n    };\n    var Settings = { getTabFocus: getTabFocus };\n\n    var DOM = global$1.DOM;\n    var tabCancel = function (e) {\n      if (e.keyCode === global$6.TAB && !e.ctrlKey && !e.altKey && !e.metaKey) {\n        e.preventDefault();\n      }\n    };\n    var setup = function (editor) {\n      function tabHandler(e) {\n        var x, el, v, i;\n        if (e.keyCode !== global$6.TAB || e.ctrlKey || e.altKey || e.metaKey || e.isDefaultPrevented()) {\n          return;\n        }\n        function find(direction) {\n          el = DOM.select(':input:enabled,*[tabindex]:not(iframe)');\n          function canSelectRecursive(e) {\n            return e.nodeName === 'BODY' || e.type !== 'hidden' && e.style.display !== 'none' && e.style.visibility !== 'hidden' && canSelectRecursive(e.parentNode);\n          }\n          function canSelect(el) {\n            return /INPUT|TEXTAREA|BUTTON/.test(el.tagName) && global$2.get(e.id) && el.tabIndex !== -1 && canSelectRecursive(el);\n          }\n          global$5.each(el, function (e, i) {\n            if (e.id === editor.id) {\n              x = i;\n              return false;\n            }\n          });\n          if (direction > 0) {\n            for (i = x + 1; i < el.length; i++) {\n              if (canSelect(el[i])) {\n                return el[i];\n              }\n            }\n          } else {\n            for (i = x - 1; i >= 0; i--) {\n              if (canSelect(el[i])) {\n                return el[i];\n              }\n            }\n          }\n          return null;\n        }\n        v = global$5.explode(Settings.getTabFocus(editor));\n        if (v.length === 1) {\n          v[1] = v[0];\n          v[0] = ':prev';\n        }\n        if (e.shiftKey) {\n          if (v[0] === ':prev') {\n            el = find(-1);\n          } else {\n            el = DOM.get(v[0]);\n          }\n        } else {\n          if (v[1] === ':next') {\n            el = find(1);\n          } else {\n            el = DOM.get(v[1]);\n          }\n        }\n        if (el) {\n          var focusEditor = global$2.get(el.id || el.name);\n          if (el.id && focusEditor) {\n            focusEditor.focus();\n          } else {\n            global$4.setTimeout(function () {\n              if (!global$3.webkit) {\n                domGlobals.window.focus();\n              }\n              el.focus();\n            }, 10);\n          }\n          e.preventDefault();\n        }\n      }\n      editor.on('init', function () {\n        if (editor.inline) {\n          DOM.setAttrib(editor.getBody(), 'tabIndex', null);\n        }\n        editor.on('keyup', tabCancel);\n        if (global$3.gecko) {\n          editor.on('keypress keydown', tabHandler);\n        } else {\n          editor.on('keydown', tabHandler);\n        }\n      });\n    };\n    var Keyboard = { setup: setup };\n\n    global.add('tabfocus', function (editor) {\n      Keyboard.setup(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","var baseCreate = require('./_baseCreate'),\n    getPrototype = require('./_getPrototype'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","// Exports the \"importcss\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/importcss')\n//   ES2015:\n//     import 'tinymce/plugins/importcss'\nrequire('./plugin.js');","(function () {\nvar toc = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getTocClass = function (editor) {\n      return editor.getParam('toc_class', 'mce-toc');\n    };\n    var getTocHeader = function (editor) {\n      var tagName = editor.getParam('toc_header', 'h2');\n      return /^h[1-6]$/.test(tagName) ? tagName : 'h2';\n    };\n    var getTocDepth = function (editor) {\n      var depth = parseInt(editor.getParam('toc_depth', '3'), 10);\n      return depth >= 1 && depth <= 9 ? depth : 3;\n    };\n    var Settings = {\n      getTocClass: getTocClass,\n      getTocHeader: getTocHeader,\n      getTocDepth: getTocDepth\n    };\n\n    var create = function (prefix) {\n      var counter = 0;\n      return function () {\n        var guid = new Date().getTime().toString(32);\n        return prefix + guid + (counter++).toString(32);\n      };\n    };\n    var Guid = { create: create };\n\n    var tocId = Guid.create('mcetoc_');\n    var generateSelector = function generateSelector(depth) {\n      var i;\n      var selector = [];\n      for (i = 1; i <= depth; i++) {\n        selector.push('h' + i);\n      }\n      return selector.join(',');\n    };\n    var hasHeaders = function (editor) {\n      return readHeaders(editor).length > 0;\n    };\n    var readHeaders = function (editor) {\n      var tocClass = Settings.getTocClass(editor);\n      var headerTag = Settings.getTocHeader(editor);\n      var selector = generateSelector(Settings.getTocDepth(editor));\n      var headers = editor.$(selector);\n      if (headers.length && /^h[1-9]$/i.test(headerTag)) {\n        headers = headers.filter(function (i, el) {\n          return !editor.dom.hasClass(el.parentNode, tocClass);\n        });\n      }\n      return global$3.map(headers, function (h) {\n        return {\n          id: h.id ? h.id : tocId(),\n          level: parseInt(h.nodeName.replace(/^H/i, ''), 10),\n          title: editor.$.text(h),\n          element: h\n        };\n      });\n    };\n    var getMinLevel = function (headers) {\n      var i, minLevel = 9;\n      for (i = 0; i < headers.length; i++) {\n        if (headers[i].level < minLevel) {\n          minLevel = headers[i].level;\n        }\n        if (minLevel === 1) {\n          return minLevel;\n        }\n      }\n      return minLevel;\n    };\n    var generateTitle = function (tag, title) {\n      var openTag = '<' + tag + ' contenteditable=\"true\">';\n      var closeTag = '</' + tag + '>';\n      return openTag + global$1.DOM.encode(title) + closeTag;\n    };\n    var generateTocHtml = function (editor) {\n      var html = generateTocContentHtml(editor);\n      return '<div class=\"' + editor.dom.encode(Settings.getTocClass(editor)) + '\" contenteditable=\"false\">' + html + '</div>';\n    };\n    var generateTocContentHtml = function (editor) {\n      var html = '';\n      var headers = readHeaders(editor);\n      var prevLevel = getMinLevel(headers) - 1;\n      var i, ii, h, nextLevel;\n      if (!headers.length) {\n        return '';\n      }\n      html += generateTitle(Settings.getTocHeader(editor), global$2.translate('Table of Contents'));\n      for (i = 0; i < headers.length; i++) {\n        h = headers[i];\n        h.element.id = h.id;\n        nextLevel = headers[i + 1] && headers[i + 1].level;\n        if (prevLevel === h.level) {\n          html += '<li>';\n        } else {\n          for (ii = prevLevel; ii < h.level; ii++) {\n            html += '<ul><li>';\n          }\n        }\n        html += '<a href=\"#' + h.id + '\">' + h.title + '</a>';\n        if (nextLevel === h.level || !nextLevel) {\n          html += '</li>';\n          if (!nextLevel) {\n            html += '</ul>';\n          }\n        } else {\n          for (ii = h.level; ii > nextLevel; ii--) {\n            html += '</li></ul><li>';\n          }\n        }\n        prevLevel = h.level;\n      }\n      return html;\n    };\n    var isEmptyOrOffscren = function (editor, nodes) {\n      return !nodes.length || editor.dom.getParents(nodes[0], '.mce-offscreen-selection').length > 0;\n    };\n    var insertToc = function (editor) {\n      var tocClass = Settings.getTocClass(editor);\n      var $tocElm = editor.$('.' + tocClass);\n      if (isEmptyOrOffscren(editor, $tocElm)) {\n        editor.insertContent(generateTocHtml(editor));\n      } else {\n        updateToc(editor);\n      }\n    };\n    var updateToc = function (editor) {\n      var tocClass = Settings.getTocClass(editor);\n      var $tocElm = editor.$('.' + tocClass);\n      if ($tocElm.length) {\n        editor.undoManager.transact(function () {\n          $tocElm.html(generateTocContentHtml(editor));\n        });\n      }\n    };\n    var Toc = {\n      hasHeaders: hasHeaders,\n      insertToc: insertToc,\n      updateToc: updateToc\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceInsertToc', function () {\n        Toc.insertToc(editor);\n      });\n      editor.addCommand('mceUpdateToc', function () {\n        Toc.updateToc(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var setup = function (editor) {\n      var $ = editor.$, tocClass = Settings.getTocClass(editor);\n      editor.on('PreProcess', function (e) {\n        var $tocElm = $('.' + tocClass, e.node);\n        if ($tocElm.length) {\n          $tocElm.removeAttr('contentEditable');\n          $tocElm.find('[contenteditable]').removeAttr('contentEditable');\n        }\n      });\n      editor.on('SetContent', function () {\n        var $tocElm = $('.' + tocClass);\n        if ($tocElm.length) {\n          $tocElm.attr('contentEditable', false);\n          $tocElm.children(':first-child').attr('contentEditable', true);\n        }\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var toggleState = function (editor) {\n      return function (e) {\n        var ctrl = e.control;\n        editor.on('LoadContent SetContent change', function () {\n          ctrl.disabled(editor.readonly || !Toc.hasHeaders(editor));\n        });\n      };\n    };\n    var isToc = function (editor) {\n      return function (elm) {\n        return elm && editor.dom.is(elm, '.' + Settings.getTocClass(editor)) && editor.getBody().contains(elm);\n      };\n    };\n    var register$1 = function (editor) {\n      editor.addButton('toc', {\n        tooltip: 'Table of Contents',\n        cmd: 'mceInsertToc',\n        icon: 'toc',\n        onPostRender: toggleState(editor)\n      });\n      editor.addButton('tocupdate', {\n        tooltip: 'Update',\n        cmd: 'mceUpdateToc',\n        icon: 'reload'\n      });\n      editor.addMenuItem('toc', {\n        text: 'Table of Contents',\n        context: 'insert',\n        cmd: 'mceInsertToc',\n        onPostRender: toggleState(editor)\n      });\n      editor.addContextToolbar(isToc(editor), 'tocupdate');\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('toc', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n      FilterContent.setup(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// Exports the \"autosave\" plugin for usage with module loaders\n// Usage:\n//   CommonJS:\n//     require('tinymce/plugins/autosave')\n//   ES2015:\n//     import 'tinymce/plugins/autosave'\nrequire('./plugin.js');","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n"],"sourceRoot":""}